function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function asyncGeneratorStep(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){asyncGeneratorStep(i,r,a,o,s,"next",e)}function s(e){asyncGeneratorStep(i,r,a,o,s,"throw",e)}o(void 0)}))}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(a,n.prototype),a}).apply(null,arguments)}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"4ZJM":function(e,t,n){e.exports=function(){"use strict";var e,t,n;function r(r,a){if(e)if(t){var i="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",o={};e(o),(n=a(o)).workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}else t=a;else e=a}return r(0,(function(e){function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=r;function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){var n,r,a,i,o;for(void 0===t&&(t=1e-6),a=e,o=0;o<8;o++){if(i=this.sampleCurveX(a)-e,Math.abs(i)<t)return a;var s=this.sampleCurveDerivativeX(a);if(Math.abs(s)<1e-6)break;a-=i/s}if((a=e)<(n=0))return n;if(a>(r=1))return r;for(;n<r;){if(i=this.sampleCurveX(a),Math.abs(i-e)<t)return a;e>i?n=a:r=a,a=.5*(r-n)+n}return a},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var a=i;function i(e,t){this.x=e,this.y=t}function o(e,t,r,a){var i=new n(e,t,r,a);return function(e){return i.solve(e)}}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),a=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(e){return e instanceof i?e:Array.isArray(e)?new i(e[0],e[1]):e};var s=o(.25,.1,.25,1);function u(e,t,n){return Math.min(n,Math.max(t,e))}function l(e,t,n){var r=n-t,a=((e-t)%r+r)%r+t;return a===t?n:a}function c(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,a=t;r<a.length;r+=1){var i=a[r];for(var o in i)e[o]=i[o]}return e}var h=1;function f(){return h++}function d(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function p(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function m(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function v(e,t){return-1!==e.indexOf(t,e.length-t.length)}function y(e,t,n){var r={};for(var a in e)r[a]=t.call(n||this,e[a],a,e);return r}function g(e,t,n){var r={};for(var a in e)t.call(n||this,e[a],a,e)&&(r[a]=e[a]);return r}function _(e){return Array.isArray(e)?e.map(_):"object"==typeof e&&e?y(e,_):e}var b={};function x(e){b[e]||("undefined"!=typeof console&&console.warn(e),b[e]=!0)}function w(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function k(e){for(var t=0,n=0,r=e.length,a=r-1,i=void 0,o=void 0;n<r;a=n++)t+=((o=e[a]).x-(i=e[n]).x)*(i.y+o.y);return t}function C(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function S(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,n,r,a){var i=r||a;return t[n]=!i||i.toLowerCase(),""})),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var I=null;function D(e){if(null==I){var t=e.navigator?e.navigator.userAgent:null;I=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return I}function A(e){try{var t=self[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var T,E,R,O,M=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),N=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,P=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,F={now:M,frame:function(e){var t=N(e);return{cancel:function(){return P(t)}}},getImageData:function(e,t){void 0===t&&(t=0);var n=self.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return T||(T=self.document.createElement("a")),T.href=e,T.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==E&&(E=self.matchMedia("(prefers-reduced-motion: reduce)")),E.matches)}},L={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},z={supported:!1,testSupport:function(e){!B&&O&&(W?q(e):R=e)}},B=!1,W=!1;function q(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,O),e.isContextLost())return;z.supported=!0}catch(e){}e.deleteTexture(t),B=!0}self.document&&((O=self.document.createElement("img")).onload=function(){R&&q(R),R=null,W=!0},O.onerror=function(){B=!0,R=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var V="01",U=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function j(e){return 0===e.indexOf("mapbox:")}U.prototype._createSkuToken=function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",V,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},U.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},U.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},U.prototype.normalizeStyleURL=function(e,t){if(!j(e))return e;var n=X(e);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},U.prototype.normalizeGlyphsURL=function(e,t){if(!j(e))return e;var n=X(e);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},U.prototype.normalizeSourceURL=function(e,t){if(!j(e))return e;var n=X(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)},U.prototype.normalizeSpriteURL=function(e,t,n,r){var a=X(e);return j(e)?(a.path="/styles/v1"+a.path+"/sprite"+t+n,this._makeAPIURL(a,this._customAccessToken||r)):(a.path+=""+t+n,K(a))},U.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!j(e))return e;var n=X(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(F.devicePixelRatio>=2||512===t?"@2x":"")+(z.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var r=this._customAccessToken||function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(n.params)||L.ACCESS_TOKEN;return L.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,r)},U.prototype.canonicalizeTileURL=function(e,t){var n=X(e);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return e;var r="mapbox://tiles/";r+=n.path.replace("/v4/","");var a=n.params;return t&&(a=a.filter((function(e){return!e.match(/^access_token=/)}))),a.length&&(r+="?"+a.join("&")),r},U.prototype.canonicalizeTileset=function(e,t){for(var n=!!t&&j(t),r=[],a=0,i=e.tiles||[];a<i.length;a+=1){var o=i[a];G(o)?r.push(this.canonicalizeTileURL(o,n)):r.push(o)}return r},U.prototype._makeAPIURL=function(e,t){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=X(L.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"/"!==r.path&&(e.path=""+r.path+e.path),!L.REQUIRE_ACCESS_TOKEN)return K(e);if(!(t=t||L.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token="+t),K(e)};var H=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function G(e){return H.test(e)}var J=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function X(e){var t=e.match(J);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function K(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Z(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var Y=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Y.prototype.getStorageKey=function(e){var t,n=Z(L.ACCESS_TOKEN);return t=n&&n.u?self.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):L.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},Y.prototype.fetchEventData=function(){var e=A("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var r=self.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var a=self.localStorage.getItem(n);a&&(this.anonId=a)}catch(e){x("Unable to read from LocalStorage")}},Y.prototype.saveEventData=function(){var e=A("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{self.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){x("Unable to write to LocalStorage")}},Y.prototype.processRequests=function(e){},Y.prototype.postEvent=function(e,t,n,r){var a=this;if(L.EVENTS_URL){var i=X(L.EVENTS_URL);i.params.push("access_token="+(r||L.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:V,userId:this.anonId},s=t?c(o,t):o,u={url:K(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=_e(u,(function(e){a.pendingRequest=null,n(e),a.saveEventData(),a.processRequests(r)}))}},Y.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var Q,$,ee=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(e,t,n,r){this.skuToken=n,(L.EVENTS_URL&&r||L.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return j(e)||G(e)})))&&this.queueRequest({id:t,timestamp:Date.now()},r)},t.prototype.processRequests=function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,a=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),p(this.anonId)||(this.anonId=d()),this.postEvent(a,{skuToken:this.skuToken},(function(e){e||r&&(t.success[r]=!0)}),e))}},t}(Y),te=new(function(e){function t(t){e.call(this,"appUserTurnstile"),this._customAccessToken=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(e,t){L.EVENTS_URL&&L.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return j(e)||G(e)}))&&this.queueRequest(Date.now(),t)},t.prototype.processRequests=function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=Z(L.ACCESS_TOKEN),r=n?n.u:L.ACCESS_TOKEN,a=r!==this.eventData.tokenU;p(this.anonId)||(this.anonId=d(),a=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(i),u=(i-this.eventData.lastSuccess)/864e5;a=a||u>=1||u<-1||o.getDate()!==s.getDate()}else a=!0;if(!a)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},(function(e){e||(t.eventData.lastSuccess=i,t.eventData.tokenU=r)}),e)}},t}(Y)),ne=te.postTurnstileEvent.bind(te),re=new ee,ae=re.postMapLoadEvent.bind(re),ie=500,oe=50;function se(){self.caches&&!Q&&(Q=self.caches.open("mapbox-tiles"))}function ue(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var le,ce=1/0;function he(){return null==le&&(le=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),le}var fe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(fe);var de,pe,me=function(e){function t(t,n,r){401===n&&G(r)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,t),this.status=n,this.url=r,this.name=this.constructor.name,this.message=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),ve=C()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},ye=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(ve())&&!/^\w+:/.test(n))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(e,t){var n,r=new self.AbortController,a=new self.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:ve(),signal:r.signal}),i=!1,o=!1,s=(n=a.url).indexOf("sku=")>0&&G(n);"json"===e.type&&a.headers.set("Accept","application/json");var u=function(n,r,i){if(!o){if(n&&"SecurityError"!==n.message&&x(n),r&&i)return l(r);var u=Date.now();self.fetch(a).then((function(n){if(n.ok){var r=s?n.clone():null;return l(n,r,u)}return t(new me(n.statusText,n.status,e.url))})).catch((function(e){20!==e.code&&t(new Error(e.message))}))}},l=function(n,r,s){("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((function(e){o||(r&&s&&function(e,t,n){if(se(),Q){var r={status:t.status,statusText:t.statusText,headers:new self.Headers};t.headers.forEach((function(e,t){return r.headers.set(t,e)}));var a=S(t.headers.get("Cache-Control")||"");a["no-store"]||(a["max-age"]&&r.headers.set("Expires",new Date(n+1e3*a["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(e,t){if(void 0===$)try{new Response(new ReadableStream),$=!0}catch(e){$=!1}$?t(e.body):e.blob().then(t)}(t,(function(t){var n=new self.Response(t,r);se(),Q&&Q.then((function(t){return t.put(ue(e.url),n)})).catch((function(e){return x(e.message)}))})))}}(a,r,s),i=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(e){o||t(new Error(e.message))}))};return s?function(e,t){if(se(),!Q)return t(null);var n=ue(e.url);Q.then((function(e){e.match(n).then((function(r){var a=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),n=S(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),a&&e.put(n,r.clone()),t(null,r,a)})).catch(t)})).catch(t)}(a,u):u(null,null),{cancel:function(){o=!0,i||r.abort()}}}(e,t);if(C()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){var n=new self.XMLHttpRequest;for(var r in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(r,e.headers[r]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new me(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(e,t)},ge=function(e,t){return ye(c(e,{type:"arrayBuffer"}),t)},_e=function(e,t){return ye(c(e,{method:"POST"}),t)};de=[],pe=0;function be(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function xe(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var we=function(e,t){void 0===t&&(t={}),c(this,t),this.type=e},ke=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,"error",c({error:t},n))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(we),Ce=function(){};Ce.prototype.on=function(e,t){return this._listeners=this._listeners||{},be(e,t,this._listeners),this},Ce.prototype.off=function(e,t){return xe(e,t,this._listeners),xe(e,t,this._oneTimeListeners),this},Ce.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},be(e,t,this._oneTimeListeners),this},Ce.prototype.fire=function(e,t){"string"==typeof e&&(e=new we(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;for(var r=0,a=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<a.length;r+=1)a[r].call(this,e);for(var i=0,o=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];i<o.length;i+=1){var s=o[i];xe(n,s,this._oneTimeListeners),s.call(this,e)}var u=this._eventedParent;u&&(c(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(e))}else e instanceof ke&&console.error(e.error);return this},Ce.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},Ce.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ie=function(e,t,n,r){this.message=(e?e+": ":"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)};function De(e){var t=e.value;return t?[new Ie(e.key,t,"constants have been deprecated as of v8")]:[]}function Ae(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,a=t;r<a.length;r+=1){var i=a[r];for(var o in i)e[o]=i[o]}return e}function Te(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ee(e){if(Array.isArray(e))return e.map(Ee);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=Ee(e[n]);return t}return Te(e)}var Re=function(e){function t(t,n){e.call(this,n),this.message=n,this.key=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),Oe=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var n=0,r=t;n<r.length;n+=1){var a=r[n];this.bindings[a[0]]=a[1]}};Oe.prototype.concat=function(e){return new Oe(this,e)},Oe.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},Oe.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Me={kind:"null"},Ne={kind:"number"},Pe={kind:"string"},Fe={kind:"boolean"},Le={kind:"color"},ze={kind:"object"},Be={kind:"value"},We={kind:"collator"},qe={kind:"formatted"},Ve={kind:"resolvedImage"};function Ue(e,t){return{kind:"array",itemType:e,N:t}}function je(e){if("array"===e.kind){var t=je(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var He=[Me,Ne,Pe,Fe,Le,qe,ze,Ue(Be),Ve];function Ge(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Ge(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=He;n<r.length;n+=1)if(!Ge(r[n],t))return null}return"Expected "+je(e)+" but found "+je(t)+" instead."}function Je(e,t){return t.some((function(t){return t.kind===e.kind}))}function Xe(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}var Ke=t((function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function a(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function i(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function o(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var c=s.substr(0,u),h=s.substr(u+1,l-(u+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=i(h.pop());case"rgb":return 3!==h.length?null:[a(h[0]),a(h[1]),a(h[2]),f];case"hsla":if(4!==h.length)return null;f=i(h.pop());case"hsl":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,p=i(h[1]),m=i(h[2]),v=m<=.5?m*(p+1):m+p-m*p,y=2*m-v;return[r(255*o(y,v,d+1/3)),r(255*o(y,v,d)),r(255*o(y,v,d-1/3)),f];default:return null}}return null}}catch(e){}})).parseCSSColor,Ze=function(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r};Ze.parse=function(e){if(e){if(e instanceof Ze)return e;if("string"==typeof e){var t=Ke(e);if(t)return new Ze(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},Ze.prototype.toString=function(){var e=this.toArray(),t=e[1],n=e[2],r=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(n)+","+r+")"},Ze.prototype.toArray=function(){var e=this.a;return 0===e?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},Ze.black=new Ze(0,0,0,1),Ze.white=new Ze(1,1,1,1),Ze.transparent=new Ze(0,0,0,0),Ze.red=new Ze(1,0,0,1);var Ye=function(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ye.prototype.compare=function(e,t){return this.collator.compare(e,t)},Ye.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Qe=function(e,t,n,r,a){this.text=e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=a},$e=function(e){this.sections=e};$e.fromString=function(e){return new $e([new Qe(e,null,null,null,null)])},$e.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))},$e.factory=function(e){return e instanceof $e?e:$e.fromString(e)},$e.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")},$e.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];if(r.image)e.push(["image",r.image.name]);else{e.push(r.text);var a={};r.fontStack&&(a["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(a["font-scale"]=r.scale),r.textColor&&(a["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(a)}}return e};var et=function(e){this.name=e.name,this.available=e.available};function tt(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function nt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Ze)return!0;if(e instanceof Ye)return!0;if(e instanceof $e)return!0;if(e instanceof et)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!nt(n[t]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!nt(e[r]))return!1;return!0}return!1}function rt(e){if(null===e)return Me;if("string"==typeof e)return Pe;if("boolean"==typeof e)return Fe;if("number"==typeof e)return Ne;if(e instanceof Ze)return Le;if(e instanceof Ye)return We;if(e instanceof $e)return qe;if(e instanceof et)return Ve;if(Array.isArray(e)){for(var t,n=e.length,r=0,a=e;r<a.length;r+=1){var i=rt(a[r]);if(t){if(t===i)continue;t=Be;break}t=i}return Ue(t||Be,n)}return ze}function at(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Ze||e instanceof $e||e instanceof et?e.toString():JSON.stringify(e)}et.prototype.toString=function(){return this.name},et.fromString=function(e){return e?new et({name:e,available:!1}):null},et.prototype.serialize=function(){return["image",this.name]};var it=function(e,t){this.type=e,this.value=t};it.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!nt(e[1]))return t.error("invalid value");var n=e[1],r=rt(n),a=t.expectedType;return"array"!==r.kind||0!==r.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(r=a),new it(r,n)},it.prototype.evaluate=function(){return this.value},it.prototype.eachChild=function(){},it.prototype.outputDefined=function(){return!0},it.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ze?["rgba"].concat(this.value.toArray()):this.value instanceof $e?this.value.serialize():this.value};var ot=function(e){this.name="ExpressionEvaluationError",this.message=e};ot.prototype.toJSON=function(){return this.message};var st={string:Pe,number:Ne,boolean:Fe,object:ze},ut=function(e,t){this.type=e,this.args=t};ut.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n,r=1,a=e[0];if("array"===a){var i,o;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in st)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=st[s],r++}else i=Be;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}n=Ue(i,o)}else n=st[a];for(var u=[];r<e.length;r++){var l=t.parse(e[r],r,Be);if(!l)return null;u.push(l)}return new ut(n,u)},ut.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!Ge(this.type,rt(n)))return n;if(t===this.args.length-1)throw new ot("Expected value to be of type "+je(this.type)+", but found "+je(rt(n))+" instead.")}return null},ut.prototype.eachChild=function(e){this.args.forEach(e)},ut.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},ut.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((function(e){return e.serialize()})))};var lt=function(e){this.type=qe,this.sections=e};lt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");for(var r=[],a=!1,i=1;i<=e.length-1;++i){var o=e[i];if(a&&"object"==typeof o&&!Array.isArray(o)){a=!1;var s=null;if(o["font-scale"]&&!(s=t.parse(o["font-scale"],1,Ne)))return null;var u=null;if(o["text-font"]&&!(u=t.parse(o["text-font"],1,Ue(Pe))))return null;var l=null;if(o["text-color"]&&!(l=t.parse(o["text-color"],1,Le)))return null;var c=r[r.length-1];c.scale=s,c.font=u,c.textColor=l}else{var h=t.parse(e[i],1,Be);if(!h)return null;var f=h.type.kind;if("string"!==f&&"value"!==f&&"null"!==f&&"resolvedImage"!==f)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,r.push({content:h,scale:null,font:null,textColor:null})}}return new lt(r)},lt.prototype.evaluate=function(e){return new $e(this.sections.map((function(t){var n=t.content.evaluate(e);return rt(n)===Ve?new Qe("",n,null,null,null):new Qe(at(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))},lt.prototype.eachChild=function(e){for(var t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}},lt.prototype.outputDefined=function(){return!1},lt.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e.push(r.content.serialize());var a={};r.scale&&(a["font-scale"]=r.scale.serialize()),r.font&&(a["text-font"]=r.font.serialize()),r.textColor&&(a["text-color"]=r.textColor.serialize()),e.push(a)}return e};var ct=function(e){this.type=Ve,this.input=e};ct.parse=function(e,t){if(2!==e.length)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Pe);return n?new ct(n):t.error("No image name provided.")},ct.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=et.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n},ct.prototype.eachChild=function(e){e(this.input)},ct.prototype.outputDefined=function(){return!1},ct.prototype.serialize=function(){return["image",this.input.serialize()]};var ht={"to-boolean":Fe,"to-color":Le,"to-number":Ne,"to-string":Pe},ft=function(e,t){this.type=e,this.args=t};ft.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");for(var r=ht[n],a=[],i=1;i<e.length;i++){var o=t.parse(e[i],i,Be);if(!o)return null;a.push(o)}return new ft(r,a)},ft.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,n,r=0,a=this.args;r<a.length;r+=1){if(n=null,(t=a[r].evaluate(e))instanceof Ze)return t;if("string"==typeof t){var i=e.parseColor(t);if(i)return i}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":tt(t[0],t[1],t[2],t[3])))return new Ze(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ot(n||"Could not parse color from value '"+("string"==typeof t?t:String(JSON.stringify(t)))+"'")}if("number"===this.type.kind){for(var o=null,s=0,u=this.args;s<u.length;s+=1){if(null===(o=u[s].evaluate(e)))return 0;var l=Number(o);if(!isNaN(l))return l}throw new ot("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?$e.fromString(at(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?et.fromString(at(this.args[0].evaluate(e))):at(this.args[0].evaluate(e))},ft.prototype.eachChild=function(e){this.args.forEach(e)},ft.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},ft.prototype.serialize=function(){if("formatted"===this.type.kind)return new lt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ct(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild((function(t){e.push(t.serialize())})),e};var dt=["Unknown","Point","LineString","Polygon"],pt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};pt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},pt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?dt[this.feature.type]:this.feature.type:null},pt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},pt.prototype.canonicalID=function(){return this.canonical},pt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},pt.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ze.parse(e)),t};var mt=function(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r};mt.prototype.evaluate=function(e){return this._evaluate(e,this.args)},mt.prototype.eachChild=function(e){this.args.forEach(e)},mt.prototype.outputDefined=function(){return!1},mt.prototype.serialize=function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))},mt.parse=function(e,t){var n,r=e[0],a=mt.definitions[r];if(!a)return t.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(a)?a[0]:a.type,o=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,s=o.filter((function(t){var n=t[0];return!Array.isArray(n)||n.length===e.length-1})),u=null,l=0,c=s;l<c.length;l+=1){var h=c[l],f=h[0],d=h[1];u=new Lt(t.registry,t.path,null,t.scope);for(var p=[],m=!1,v=1;v<e.length;v++){var y=e[v],g=Array.isArray(f)?f[v-1]:f.type,_=u.parse(y,1+p.length,g);if(!_){m=!0;break}p.push(_)}if(!m)if(Array.isArray(f)&&f.length!==p.length)u.error("Expected "+f.length+" arguments, but found "+p.length+" instead.");else{for(var b=0;b<p.length;b++){var x=Array.isArray(f)?f[b]:f.type,w=p[b];u.concat(b+1).checkSubtype(x,w.type)}if(0===u.errors.length)return new mt(r,i,d,p)}}if(1===s.length)(n=t.errors).push.apply(n,u.errors);else{for(var k=(s.length?s:o).map((function(e){var t;return t=e[0],Array.isArray(t)?"("+t.map(je).join(", ")+")":"("+je(t.type)+"...)"})).join(" | "),C=[],S=1;S<e.length;S++){var I=t.parse(e[S],1+C.length);if(!I)return null;C.push(je(I.type))}t.error("Expected arguments of type "+k+", but found ("+C.join(", ")+") instead.")}return null},mt.register=function(e,t){for(var n in mt.definitions=t,t)e[n]=mt};var vt=function(e,t,n){this.type=We,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t};function yt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function gt(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function _t(e,t){var n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,a=Math.pow(2,t.z);return[Math.round(n*a*8192),Math.round(r*a*8192)]}function bt(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function xt(e,t){for(var n,r,a,i,o,s,u,l=!1,c=0,h=t.length;c<h;c++)for(var f=t[c],d=0,p=f.length;d<p-1;d++){if((i=(n=e)[0]-(r=f[d])[0])*(u=n[1]-(a=f[d+1])[1])-(s=n[0]-a[0])*(o=n[1]-r[1])==0&&i*s<=0&&o*u<=0)return!1;bt(e,f[d],f[d+1])&&(l=!l)}return l}function wt(e,t){for(var n=0;n<t.length;n++)if(xt(e,t[n]))return!0;return!1}function kt(e,t,n,r){var a=r[0]-n[0],i=r[1]-n[1],o=(e[0]-n[0])*i-a*(e[1]-n[1]),s=(t[0]-n[0])*i-a*(t[1]-n[1]);return o>0&&s<0||o<0&&s>0}function Ct(e,t,n){for(var r=0,a=n;r<a.length;r+=1)for(var i=a[r],o=0;o<i.length-1;++o)if(0!=(h=[(c=i[o+1])[0]-(l=i[o])[0],c[1]-l[1]])[0]*(f=[(u=t)[0]-(s=e)[0],u[1]-s[1]])[1]-h[1]*f[0]&&kt(s,u,l,c)&&kt(l,c,s,u))return!0;var s,u,l,c,h,f;return!1}function St(e,t){for(var n=0;n<e.length;++n)if(!xt(e[n],t))return!1;for(var r=0;r<e.length-1;++r)if(Ct(e[r],e[r+1],t))return!1;return!0}function It(e,t){for(var n=0;n<t.length;n++)if(St(e,t[n]))return!0;return!1}function Dt(e,t,n){for(var r=[],a=0;a<e.length;a++){for(var i=[],o=0;o<e[a].length;o++){var s=_t(e[a][o],n);yt(t,s),i.push(s)}r.push(i)}return r}function At(e,t,n){for(var r=[],a=0;a<e.length;a++){var i=Dt(e[a],t,n);r.push(i)}return r}function Tt(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){var a=.5*r,i=e[0]-n[0]>a?-r:n[0]-e[0]>a?r:0;0===i&&(i=e[0]-n[2]>a?-r:n[2]-e[0]>a?r:0),e[0]+=i}yt(t,e)}function Et(e,t,n,r){for(var a=8192*Math.pow(2,r.z),i=[8192*r.x,8192*r.y],o=[],s=0,u=e;s<u.length;s+=1)for(var l=0,c=u[s];l<c.length;l+=1){var h=c[l],f=[h.x+i[0],h.y+i[1]];Tt(f,t,n,a),o.push(f)}return o}function Rt(e,t,n,r){for(var a,i=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],s=[],u=0,l=e;u<l.length;u+=1){for(var c=[],h=0,f=l[u];h<f.length;h+=1){var d=f[h],p=[d.x+o[0],d.y+o[1]];yt(t,p),c.push(p)}s.push(c)}if(t[2]-t[0]<=i/2){(a=t)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(var m=0,v=s;m<v.length;m+=1)for(var y=0,g=v[m];y<g.length;y+=1)Tt(g[y],t,n,i)}return s}vt.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");var r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Fe);if(!r)return null;var a=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Fe);if(!a)return null;var i=null;return n.locale&&!(i=t.parse(n.locale,1,Pe))?null:new vt(r,a,i)},vt.prototype.evaluate=function(e){return new Ye(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},vt.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},vt.prototype.outputDefined=function(){return!1},vt.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Ot=function(e,t){this.type=Fe,this.geojson=e,this.geometries=t};function Mt(e){if(e instanceof mt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Ot)return!1;var t=!0;return e.eachChild((function(e){t&&!Mt(e)&&(t=!1)})),t}function Nt(e){if(e instanceof mt&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!Nt(e)&&(t=!1)})),t}function Pt(e,t){if(e instanceof mt&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild((function(e){n&&!Pt(e,t)&&(n=!1)})),n}Ot.parse=function(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(nt(e[1])){var n=e[1];if("FeatureCollection"===n.type)for(var r=0;r<n.features.length;++r){var a=n.features[r].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new Ot(n,n.features[r].geometry)}else if("Feature"===n.type){var i=n.geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Ot(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new Ot(n,n)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ot.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if("Polygon"===t.type){var i=Dt(t.coordinates,r,a),o=Et(e.geometry(),n,r,a);if(!gt(n,r))return!1;for(var s=0,u=o;s<u.length;s+=1)if(!xt(u[s],i))return!1}if("MultiPolygon"===t.type){var l=At(t.coordinates,r,a),c=Et(e.geometry(),n,r,a);if(!gt(n,r))return!1;for(var h=0,f=c;h<f.length;h+=1)if(!wt(f[h],l))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if("Polygon"===t.type){var i=Dt(t.coordinates,r,a),o=Rt(e.geometry(),n,r,a);if(!gt(n,r))return!1;for(var s=0,u=o;s<u.length;s+=1)if(!St(u[s],i))return!1}if("MultiPolygon"===t.type){var l=At(t.coordinates,r,a),c=Rt(e.geometry(),n,r,a);if(!gt(n,r))return!1;for(var h=0,f=c;h<f.length;h+=1)if(!It(f[h],l))return!1}return!0}(e,this.geometries)}return!1},Ot.prototype.eachChild=function(){},Ot.prototype.outputDefined=function(){return!0},Ot.prototype.serialize=function(){return["within",this.geojson]};var Ft=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Ft.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new Ft(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Ft.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Ft.prototype.eachChild=function(){},Ft.prototype.outputDefined=function(){return!1},Ft.prototype.serialize=function(){return["var",this.name]};var Lt=function(e,t,n,r,a){void 0===t&&(t=[]),void 0===r&&(r=new Oe),void 0===a&&(a=[]),this.registry=e,this.path=t,this.key=t.map((function(e){return"["+e+"]"})).join(""),this.scope=r,this.errors=a,this.expectedType=n};function zt(e,t){for(var n,r=e.length-1,a=0,i=r,o=0;a<=i;)if((n=e[o=Math.floor((a+i)/2)])<=t){if(o===r||t<e[o+1])return o;a=o+1}else{if(!(n>t))throw new ot("Input is not a number.");i=o-1}return 0}Lt.prototype.parse=function(e,t,n,r,a){return void 0===a&&(a={}),t?this.concat(t,n,r)._parse(e,a):this._parse(e,a)},Lt.prototype._parse=function(e,t){function n(e,t,n){return"assert"===n?new ut(t,[e]):"coerce"===n?new ft(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var a=this.registry[r];if(a){var i=a.parse(e,this);if(!i)return null;if(this.expectedType){var o=this.expectedType,s=i.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else i=n(i,o,t.typeAnnotation||"coerce");else i=n(i,o,t.typeAnnotation||"assert")}if(!(i instanceof it)&&"resolvedImage"!==i.type.kind&&function e(t){if(t instanceof Ft)return e(t.boundExpression);if(t instanceof mt&&"error"===t.name)return!1;if(t instanceof vt)return!1;if(t instanceof Ot)return!1;var n=t instanceof ft||t instanceof ut,r=!0;return t.eachChild((function(t){r=n?r&&e(t):r&&t instanceof it})),!!r&&Mt(t)&&Pt(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(i)){var u=new pt;try{i=new it(i.type,i.evaluate(u))}catch(e){return this.error(e.message),null}}return i}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Lt.prototype.concat=function(e,t,n){var r="number"==typeof e?this.path.concat(e):this.path,a=n?this.scope.concat(n):this.scope;return new Lt(this.registry,r,t||null,a,this.errors)},Lt.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=""+this.key+t.map((function(e){return"["+e+"]"})).join("");this.errors.push(new Re(r,e))},Lt.prototype.checkSubtype=function(e,t){var n=Ge(e,t);return n&&this.error(n),n};var Bt=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var r=0,a=n;r<a.length;r+=1){var i=a[r],o=i[1];this.labels.push(i[0]),this.outputs.push(o)}};function Wt(e,t,n){return e*(1-n)+t*n}Bt.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var n=t.parse(e[1],1,Ne);if(!n)return null;var r=[],a=null;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType);for(var i=1;i<e.length;i+=2){var o=1===i?-1/0:e[i],s=e[i+1],u=i,l=i+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var c=t.parse(s,l,a);if(!c)return null;a=a||c.type,r.push([o,c])}return new Bt(a,n,r)},Bt.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var a=t.length;return r>=t[a-1]?n[a-1].evaluate(e):n[zt(t,r)].evaluate(e)},Bt.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},Bt.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))},Bt.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var qt=Object.freeze({__proto__:null,number:Wt,color:function(e,t,n){return new Ze(Wt(e.r,t.r,n),Wt(e.g,t.g,n),Wt(e.b,t.b,n),Wt(e.a,t.a,n))},array:function(e,t,n){return e.map((function(e,r){return Wt(e,t[r],n)}))}}),Vt=6/29*3*(6/29),Ut=Math.PI/180,jt=180/Math.PI;function Ht(e){return e>.008856451679035631?Math.pow(e,1/3):e/Vt+4/29}function Gt(e){return e>6/29?e*e*e:Vt*(e-4/29)}function Jt(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Xt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Kt(e){var t=Xt(e.r),n=Xt(e.g),r=Xt(e.b),a=Ht((.4124564*t+.3575761*n+.1804375*r)/.95047),i=Ht((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*i-16,a:500*(a-i),b:200*(i-Ht((.0193339*t+.119192*n+.9503041*r)/1.08883)),alpha:e.a}}function Zt(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Gt(t),n=.95047*Gt(n),r=1.08883*Gt(r),new Ze(Jt(3.2404542*n-1.5371385*t-.4985314*r),Jt(-.969266*n+1.8760108*t+.041556*r),Jt(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function Yt(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var Qt={forward:Kt,reverse:Zt,interpolate:function(e,t,n){return{l:Wt(e.l,t.l,n),a:Wt(e.a,t.a,n),b:Wt(e.b,t.b,n),alpha:Wt(e.alpha,t.alpha,n)}}},$t={forward:function(e){var t=Kt(e),n=t.l,r=t.a,a=t.b,i=Math.atan2(a,r)*jt;return{h:i<0?i+360:i,c:Math.sqrt(r*r+a*a),l:n,alpha:e.a}},reverse:function(e){var t=e.h*Ut,n=e.c;return Zt({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Yt(e.h,t.h,n),c:Wt(e.c,t.c,n),l:Wt(e.l,t.l,n),alpha:Wt(e.alpha,t.alpha,n)}}},en=Object.freeze({__proto__:null,lab:Qt,hcl:$t}),tn=function(e,t,n,r,a){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var i=0,o=a;i<o.length;i+=1){var s=o[i],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function nn(e,t,n,r){var a=r-n,i=e-n;return 0===a?0:1===t?i/a:(Math.pow(t,i)-1)/(Math.pow(t,a)-1)}tn.interpolationFactor=function(e,t,r,a){var i=0;if("exponential"===e.name)i=nn(t,e.base,r,a);else if("linear"===e.name)i=nn(t,1,r,a);else if("cubic-bezier"===e.name){var o=e.controlPoints;i=new n(o[0],o[1],o[2],o[3]).solve(nn(t,1,r,a))}return i},tn.parse=function(e,t){var n=e[0],r=e[1],a=e[2],i=e.slice(3);if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var o=r[1];if("number"!=typeof o)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:o}}else{if("cubic-bezier"!==r[0])return t.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(e){return"number"!=typeof e||e<0||e>1})))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(a=t.parse(a,2,Ne)))return null;var u=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=Le:t.expectedType&&"value"!==t.expectedType.kind&&(l=t.expectedType);for(var c=0;c<i.length;c+=2){var h=i[c],f=i[c+1],d=c+3,p=c+4;if("number"!=typeof h)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(u.length&&u[u.length-1][0]>=h)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var m=t.parse(f,p,l);if(!m)return null;l=l||m.type,u.push([h,m])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new tn(l,n,r,a,u):t.error("Type "+je(l)+" is not interpolatable.")},tn.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var a=t.length;if(r>=t[a-1])return n[a-1].evaluate(e);var i=zt(t,r),o=tn.interpolationFactor(this.interpolation,r,t[i],t[i+1]),s=n[i].evaluate(e),u=n[i+1].evaluate(e);return"interpolate"===this.operator?qt[this.type.kind.toLowerCase()](s,u,o):"interpolate-hcl"===this.operator?$t.reverse($t.interpolate($t.forward(s),$t.forward(u),o)):Qt.reverse(Qt.interpolate(Qt.forward(s),Qt.forward(u),o))},tn.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},tn.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))},tn.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t};var rn=function(e,t){this.type=e,this.args=t};rn.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,r=t.expectedType;r&&"value"!==r.kind&&(n=r);for(var a=[],i=0,o=e.slice(1);i<o.length;i+=1){var s=t.parse(o[i],1+a.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,a.push(s)}var u=r&&a.some((function(e){return Ge(r,e.type)}));return new rn(u?Be:n,a)},rn.prototype.evaluate=function(e){for(var t,n=null,r=0,a=0,i=this.args;a<i.length&&(r++,(n=i[a].evaluate(e))&&n instanceof et&&!n.available&&(t||(t=n.name),n=null,r===this.args.length&&(n=t)),null===n);a+=1);return n},rn.prototype.eachChild=function(e){this.args.forEach(e)},rn.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},rn.prototype.serialize=function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e};var an=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};an.prototype.evaluate=function(e){return this.result.evaluate(e)},an.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},an.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],r=1;r<e.length-1;r+=2){var a=e[r];if("string"!=typeof a)return t.error("Expected string, but found "+typeof a+" instead.",r);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);var i=t.parse(e[r+1],r+1);if(!i)return null;n.push([a,i])}var o=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return o?new an(n,o):null},an.prototype.outputDefined=function(){return this.result.outputDefined()},an.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var r=n[t];e.push(r[0],r[1].serialize())}return e.push(this.result.serialize()),e};var on=function(e,t,n){this.type=e,this.index=t,this.input=n};on.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Ne),r=t.parse(e[2],2,Ue(t.expectedType||Be));return n&&r?new on(r.type.itemType,n,r):null},on.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new ot("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new ot("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new ot("Array index must be an integer, but found "+t+" instead.");return n[t]},on.prototype.eachChild=function(e){e(this.index),e(this.input)},on.prototype.outputDefined=function(){return!1},on.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var sn=function(e,t){this.type=Fe,this.needle=e,this.haystack=t};sn.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Be),r=t.parse(e[2],2,Be);return n&&r?Je(n.type,[Fe,Pe,Ne,Me,Be])?new sn(n,r):t.error("Expected first argument to be of type boolean, string, number or null, but found "+je(n.type)+" instead"):null},sn.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Xe(t,["boolean","string","number","null"]))throw new ot("Expected first argument to be of type boolean, string, number or null, but found "+je(rt(t))+" instead.");if(!Xe(n,["string","array"]))throw new ot("Expected second argument to be of type array or string, but found "+je(rt(n))+" instead.");return n.indexOf(t)>=0},sn.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},sn.prototype.outputDefined=function(){return!0},sn.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var un=function(e,t,n){this.type=Ne,this.needle=e,this.haystack=t,this.fromIndex=n};un.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Be),r=t.parse(e[2],2,Be);if(!n||!r)return null;if(!Je(n.type,[Fe,Pe,Ne,Me,Be]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+je(n.type)+" instead");if(4===e.length){var a=t.parse(e[3],3,Ne);return a?new un(n,r,a):null}return new un(n,r)},un.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Xe(t,["boolean","string","number","null"]))throw new ot("Expected first argument to be of type boolean, string, number or null, but found "+je(rt(t))+" instead.");if(!Xe(n,["string","array"]))throw new ot("Expected second argument to be of type array or string, but found "+je(rt(n))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)},un.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},un.prototype.outputDefined=function(){return!1},un.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ln=function(e,t,n,r,a,i){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=a,this.otherwise=i};ln.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var a={},i=[],o=2;o<e.length-1;o+=2){var s=e[o],u=e[o+1];Array.isArray(s)||(s=[s]);var l=t.concat(o);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var f=h[c];if("number"!=typeof f&&"string"!=typeof f)return l.error("Branch labels must be numbers or strings.");if("number"==typeof f&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof f&&Math.floor(f)!==f)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,rt(f)))return null}else n=rt(f);if(void 0!==a[String(f)])return l.error("Branch labels must be unique.");a[String(f)]=i.length}var d=t.parse(u,o,r);if(!d)return null;r=r||d.type,i.push(d)}var p=t.parse(e[1],1,Be);if(!p)return null;var m=t.parse(e[e.length-1],e.length-1,r);return m?"value"!==p.type.kind&&t.concat(1).checkSubtype(n,p.type)?null:new ln(n,r,p,a,i,m):null},ln.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(rt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},ln.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},ln.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()},ln.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],r={},a=0,i=Object.keys(this.cases).sort();a<i.length;a+=1){var o=i[a];void 0===(h=r[this.cases[o]])?(r[this.cases[o]]=n.length,n.push([this.cases[o],[o]])):n[h][1].push(o)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},u=0,l=n;u<l.length;u+=1){var c=l[u],h=c[0],f=c[1];t.push(1===f.length?s(f[0]):f.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var cn=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};cn.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],a=1;a<e.length-1;a+=2){var i=t.parse(e[a],a,Fe);if(!i)return null;var o=t.parse(e[a+1],a+1,n);if(!o)return null;r.push([i,o]),n=n||o.type}var s=t.parse(e[e.length-1],e.length-1,n);return s?new cn(n,r,s):null},cn.prototype.evaluate=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],a=r[1];if(r[0].evaluate(e))return a.evaluate(e)}return this.otherwise.evaluate(e)},cn.prototype.eachChild=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],a=r[1];e(r[0]),e(a)}e(this.otherwise)},cn.prototype.outputDefined=function(){return this.branches.every((function(e){return e[1].outputDefined()}))&&this.otherwise.outputDefined()},cn.prototype.serialize=function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e};var hn=function(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r};function fn(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function dn(e,t,n,r){return 0===r.compare(t,n)}function pn(e,t,n){var r="=="!==e&&"!="!==e;return function(){function a(e,t,n){this.type=Fe,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return a.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],i=t.parse(e[1],1,Be);if(!i)return null;if(!fn(n,i.type))return t.concat(1).error('"'+n+"\" comparisons are not supported for type '"+je(i.type)+"'.");var o=t.parse(e[2],2,Be);if(!o)return null;if(!fn(n,o.type))return t.concat(2).error('"'+n+"\" comparisons are not supported for type '"+je(o.type)+"'.");if(i.type.kind!==o.type.kind&&"value"!==i.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '"+je(i.type)+"' and '"+je(o.type)+"'.");r&&("value"===i.type.kind&&"value"!==o.type.kind?i=new ut(o.type,[i]):"value"!==i.type.kind&&"value"===o.type.kind&&(o=new ut(i.type,[o])));var s=null;if(4===e.length){if("string"!==i.type.kind&&"string"!==o.type.kind&&"value"!==i.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,We)))return null}return new a(i,o,s)},a.prototype.evaluate=function(a){var i=this.lhs.evaluate(a),o=this.rhs.evaluate(a);if(r&&this.hasUntypedArgument){var s=rt(i),u=rt(o);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new ot('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var l=rt(i),c=rt(o);if("string"!==l.kind||"string"!==c.kind)return t(a,i,o)}return this.collator?n(a,i,o,this.collator.evaluate(a)):t(a,i,o)},a.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},a.prototype.outputDefined=function(){return!0},a.prototype.serialize=function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t},a}()}hn.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Be),r=t.parse(e[2],2,Ne);if(!n||!r)return null;if(!Je(n.type,[Ue(Be),Pe,Be]))return t.error("Expected first argument to be of type array or string, but found "+je(n.type)+" instead");if(4===e.length){var a=t.parse(e[3],3,Ne);return a?new hn(n.type,n,r,a):null}return new hn(n.type,n,r)},hn.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Xe(t,["string","array"]))throw new ot("Expected first argument to be of type array or string, but found "+je(rt(t))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)},hn.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},hn.prototype.outputDefined=function(){return!1},hn.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var mn=pn("==",(function(e,t,n){return t===n}),dn),vn=pn("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!dn(0,t,n,r)})),yn=pn("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),gn=pn(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),_n=pn("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),bn=pn(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0})),xn=function(e,t,n,r,a){this.type=Pe,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=a};xn.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Ne);if(!n)return null;var r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");var a=null;if(r.locale&&!(a=t.parse(r.locale,1,Pe)))return null;var i=null;if(r.currency&&!(i=t.parse(r.currency,1,Pe)))return null;var o=null;if(r["min-fraction-digits"]&&!(o=t.parse(r["min-fraction-digits"],1,Ne)))return null;var s=null;return r["max-fraction-digits"]&&!(s=t.parse(r["max-fraction-digits"],1,Ne))?null:new xn(n,a,i,o,s)},xn.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},xn.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},xn.prototype.outputDefined=function(){return!1},xn.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var wn=function(e){this.type=Ne,this.input=e};wn.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found "+je(n.type)+" instead."):new wn(n):null},wn.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new ot("Expected value to be of type string or array, but found "+je(rt(t))+" instead.")},wn.prototype.eachChild=function(e){e(this.input)},wn.prototype.outputDefined=function(){return!1},wn.prototype.serialize=function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e};var kn={"==":mn,"!=":vn,">":gn,"<":yn,">=":bn,"<=":_n,array:ut,at:on,boolean:ut,case:cn,coalesce:rn,collator:vt,format:lt,image:ct,in:sn,"index-of":un,interpolate:tn,"interpolate-hcl":tn,"interpolate-lab":tn,length:wn,let:an,literal:it,match:ln,number:ut,"number-format":xn,object:ut,slice:hn,step:Bt,string:ut,"to-boolean":ft,"to-color":ft,"to-number":ft,"to-string":ft,var:Ft,within:Ot};function Cn(e,t){var n=t[0],r=t[1],a=t[2],i=t[3];n=n.evaluate(e),r=r.evaluate(e),a=a.evaluate(e);var o=i?i.evaluate(e):1,s=tt(n,r,a,o);if(s)throw new ot(s);return new Ze(n/255*o,r/255*o,a/255*o,o)}function Sn(e,t){return e in t}function In(e,t){var n=t[e];return void 0===n?null:n}function Dn(e){return{type:e}}function An(e){return{result:"success",value:e}}function Tn(e){return{result:"error",value:e}}function En(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Rn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function On(e){return!!e.expression&&e.expression.interpolated}function Mn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Nn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Pn(e){return e}function Fn(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Ln(e,t,n,r,a){return Fn(typeof n===a?r[n]:void 0,e.default,t.default)}function zn(e,t,n){if("number"!==Mn(n))return Fn(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var a=zt(e.stops.map((function(e){return e[0]})),n);return e.stops[a][1]}function Bn(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==Mn(n))return Fn(e.default,t.default);var a=e.stops.length;if(1===a)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[a-1][0])return e.stops[a-1][1];var i=zt(e.stops.map((function(e){return e[0]})),n),o=function(e,t,n,r){var a=r-n,i=e-n;return 0===a?0:1===t?i/a:(Math.pow(t,i)-1)/(Math.pow(t,a)-1)}(n,r,e.stops[i][0],e.stops[i+1][0]),s=e.stops[i][1],u=e.stops[i+1][1],l=qt[t.type]||Pn;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=en[e.colorSpace];l=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=s.evaluate.apply(void 0,e),r=u.evaluate.apply(void 0,e);if(void 0!==n&&void 0!==r)return l(n,r,o)}}:l(s,u,o)}function Wn(e,t,n){return"color"===t.type?n=Ze.parse(n):"formatted"===t.type?n=$e.fromString(n.toString()):"resolvedImage"===t.type?n=et.fromString(n.toString()):Mn(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Fn(n,e.default,t.default)}mt.register(kn,{error:[{kind:"error"},[Pe],function(e,t){throw new ot(t[0].evaluate(e))}],typeof:[Pe,[Be],function(e,t){return je(rt(t[0].evaluate(e)))}],"to-rgba":[Ue(Ne,4),[Le],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Le,[Ne,Ne,Ne],Cn],rgba:[Le,[Ne,Ne,Ne,Ne],Cn],has:{type:Fe,overloads:[[[Pe],function(e,t){return Sn(t[0].evaluate(e),e.properties())}],[[Pe,ze],function(e,t){var n=t[1];return Sn(t[0].evaluate(e),n.evaluate(e))}]]},get:{type:Be,overloads:[[[Pe],function(e,t){return In(t[0].evaluate(e),e.properties())}],[[Pe,ze],function(e,t){var n=t[1];return In(t[0].evaluate(e),n.evaluate(e))}]]},"feature-state":[Be,[Pe],function(e,t){return In(t[0].evaluate(e),e.featureState||{})}],properties:[ze,[],function(e){return e.properties()}],"geometry-type":[Pe,[],function(e){return e.geometryType()}],id:[Be,[],function(e){return e.id()}],zoom:[Ne,[],function(e){return e.globals.zoom}],"heatmap-density":[Ne,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Ne,[],function(e){return e.globals.lineProgress||0}],accumulated:[Be,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Ne,Dn(Ne),function(e,t){for(var n=0,r=0,a=t;r<a.length;r+=1)n+=a[r].evaluate(e);return n}],"*":[Ne,Dn(Ne),function(e,t){for(var n=1,r=0,a=t;r<a.length;r+=1)n*=a[r].evaluate(e);return n}],"-":{type:Ne,overloads:[[[Ne,Ne],function(e,t){var n=t[1];return t[0].evaluate(e)-n.evaluate(e)}],[[Ne],function(e,t){return-t[0].evaluate(e)}]]},"/":[Ne,[Ne,Ne],function(e,t){var n=t[1];return t[0].evaluate(e)/n.evaluate(e)}],"%":[Ne,[Ne,Ne],function(e,t){var n=t[1];return t[0].evaluate(e)%n.evaluate(e)}],ln2:[Ne,[],function(){return Math.LN2}],pi:[Ne,[],function(){return Math.PI}],e:[Ne,[],function(){return Math.E}],"^":[Ne,[Ne,Ne],function(e,t){var n=t[1];return Math.pow(t[0].evaluate(e),n.evaluate(e))}],sqrt:[Ne,[Ne],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Ne,[Ne],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Ne,[Ne],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Ne,[Ne],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Ne,[Ne],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Ne,[Ne],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Ne,[Ne],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Ne,[Ne],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Ne,[Ne],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Ne,[Ne],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Ne,Dn(Ne),function(e,t){return Math.min.apply(Math,t.map((function(t){return t.evaluate(e)})))}],max:[Ne,Dn(Ne),function(e,t){return Math.max.apply(Math,t.map((function(t){return t.evaluate(e)})))}],abs:[Ne,[Ne],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Ne,[Ne],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ne,[Ne],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Ne,[Ne],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Fe,[Pe,Be],function(e,t){var n=t[0],r=t[1];return e.properties()[n.value]===r.value}],"filter-id-==":[Fe,[Be],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[Fe,[Pe],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[Fe,[Pe,Be],function(e,t){var n=t[0],r=t[1],a=e.properties()[n.value],i=r.value;return typeof a==typeof i&&a<i}],"filter-id-<":[Fe,[Be],function(e,t){var n=t[0],r=e.id(),a=n.value;return typeof r==typeof a&&r<a}],"filter->":[Fe,[Pe,Be],function(e,t){var n=t[0],r=t[1],a=e.properties()[n.value],i=r.value;return typeof a==typeof i&&a>i}],"filter-id->":[Fe,[Be],function(e,t){var n=t[0],r=e.id(),a=n.value;return typeof r==typeof a&&r>a}],"filter-<=":[Fe,[Pe,Be],function(e,t){var n=t[0],r=t[1],a=e.properties()[n.value],i=r.value;return typeof a==typeof i&&a<=i}],"filter-id-<=":[Fe,[Be],function(e,t){var n=t[0],r=e.id(),a=n.value;return typeof r==typeof a&&r<=a}],"filter->=":[Fe,[Pe,Be],function(e,t){var n=t[0],r=t[1],a=e.properties()[n.value],i=r.value;return typeof a==typeof i&&a>=i}],"filter-id->=":[Fe,[Be],function(e,t){var n=t[0],r=e.id(),a=n.value;return typeof r==typeof a&&r>=a}],"filter-has":[Fe,[Be],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Fe,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[Fe,[Ue(Pe)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Fe,[Ue(Be)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Fe,[Pe,Ue(Be)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[Fe,[Pe,Ue(Be)],function(e,t){var n=t[0],r=t[1];return function(e,t,n,r){for(;n<=r;){var a=n+r>>1;if(t[a]===e)return!0;t[a]>e?r=a-1:n=a+1}return!1}(e.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:Fe,overloads:[[[Fe,Fe],function(e,t){var n=t[1];return t[0].evaluate(e)&&n.evaluate(e)}],[Dn(Fe),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(!r[n].evaluate(e))return!1;return!0}]]},any:{type:Fe,overloads:[[[Fe,Fe],function(e,t){var n=t[1];return t[0].evaluate(e)||n.evaluate(e)}],[Dn(Fe),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(r[n].evaluate(e))return!0;return!1}]]},"!":[Fe,[Fe],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Fe,[Pe],function(e,t){var n=e.globals&&e.globals.isSupportedScript;return!n||n(t[0].evaluate(e))}],upcase:[Pe,[Pe],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Pe,[Pe],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Pe,Dn(Be),function(e,t){return t.map((function(t){return at(t.evaluate(e))})).join("")}],"resolved-locale":[Pe,[We],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var qn=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new pt,this._defaultValue=t?function(e){return"color"===e.type&&Nn(e.default)?new Ze(0,0,0,0):"color"===e.type?Ze.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null};function Vn(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in kn}function Un(e,t){var n=new Lt(kn,[],t?function(e){var t={color:Le,string:Pe,number:Ne,enum:Pe,boolean:Fe,formatted:qe,resolvedImage:Ve};return"array"===e.type?Ue(t[e.value]||Be,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?An(new qn(r,t)):Tn(n.errors)}qn.prototype.evaluateWithoutErrorHandling=function(e,t,n,r,a,i){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=i,this.expression.evaluate(this._evaluator)},qn.prototype.evaluate=function(e,t,n,r,a,i){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=i||null;try{var o=this.expression.evaluate(this._evaluator);if(null==o||"number"==typeof o&&o!=o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new ot("Expected value to be one of "+Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", ")+", but found "+JSON.stringify(o)+" instead.");return o}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}};var jn=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Nt(t.expression)};jn.prototype.evaluateWithoutErrorHandling=function(e,t,n,r,a,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,a,i)},jn.prototype.evaluate=function(e,t,n,r,a,i){return this._styleExpression.evaluate(e,t,n,r,a,i)};var Hn=function(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Nt(t.expression),this.interpolationType=r};function Gn(e,t){if("error"===(e=Un(e,t)).result)return e;var n=e.value.expression,r=Mt(n);if(!r&&!En(t))return Tn([new Re("","data expressions not supported")]);var a=Pt(n,["zoom"]);if(!a&&!Rn(t))return Tn([new Re("","zoom expressions not supported")]);var i=function e(t){var n=null;if(t instanceof an)n=e(t.result);else if(t instanceof rn)for(var r=0,a=t.args;r<a.length&&!(n=e(a[r]));r+=1);else(t instanceof Bt||t instanceof tn)&&t.input instanceof mt&&"zoom"===t.input.name&&(n=t);return n instanceof Re||t.eachChild((function(t){var r=e(t);r instanceof Re?n=r:!n&&r?n=new Re("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new Re("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n);return i||a?i instanceof Re?Tn([i]):i instanceof tn&&!On(t)?Tn([new Re("",'"interpolate" expressions cannot be used with this property')]):An(i?new Hn(r?"camera":"composite",e.value,i.labels,i instanceof tn?i.interpolation:void 0):new jn(r?"constant":"source",e.value)):Tn([new Re("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Hn.prototype.evaluateWithoutErrorHandling=function(e,t,n,r,a,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,a,i)},Hn.prototype.evaluate=function(e,t,n,r,a,i){return this._styleExpression.evaluate(e,t,n,r,a,i)},Hn.prototype.interpolationFactor=function(e,t,n){return this.interpolationType?tn.interpolationFactor(this.interpolationType,e,t,n):0};var Jn=function(e,t){this._parameters=e,this._specification=t,Ae(this,function e(t,n){var r,a,i,o="color"===n.type,s=t.stops&&"object"==typeof t.stops[0][0],u=s||!(s||void 0!==t.property),l=t.type||(On(n)?"exponential":"interval");if(o&&((t=Ae({},t)).stops&&(t.stops=t.stops.map((function(e){return[e[0],Ze.parse(e[1])]}))),t.default=Ze.parse(t.default?t.default:n.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!en[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);if("exponential"===l)r=Bn;else if("interval"===l)r=zn;else if("categorical"===l){r=Ln,a=Object.create(null);for(var c=0,h=t.stops;c<h.length;c+=1){var f=h[c];a[f[0]]=f[1]}i=typeof t.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');r=Wn}if(s){for(var d={},p=[],m=0;m<t.stops.length;m++){var v=t.stops[m],y=v[0].zoom;void 0===d[y]&&(d[y]={zoom:y,type:t.type,property:t.property,default:t.default,stops:[]},p.push(y)),d[y].stops.push([v[0].value,v[1]])}for(var g=[],_=0,b=p;_<b.length;_+=1){var x=b[_];g.push([d[x].zoom,e(d[x],n)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:tn.interpolationFactor.bind(void 0,w),zoomStops:g.map((function(e){return e[0]})),evaluate:function(e,r){var a=e.zoom;return Bn({stops:g,base:t.base},n,a).evaluate(a,r)}}}if(u){var k="exponential"===l?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:tn.interpolationFactor.bind(void 0,k),zoomStops:t.stops.map((function(e){return e[0]})),evaluate:function(e){return r(t,n,e.zoom,a,i)}}}return{kind:"source",evaluate:function(e,o){var s=o&&o.properties?o.properties[t.property]:void 0;return void 0===s?Fn(t.default,n.default):r(t,n,s,a,i)}}}(this._parameters,this._specification))};function Xn(e){var t=e.key,n=e.value,r=e.valueSpec||{},a=e.objectElementValidators||{},i=e.style,o=e.styleSpec,s=[],u=Mn(n);if("object"!==u)return[new Ie(t,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],h=r[c]||r["*"],f=void 0;if(a[c])f=a[c];else if(r[c])f=_r;else if(a["*"])f=a["*"];else{if(!r["*"]){s.push(new Ie(t,n[l],'unknown property "'+l+'"'));continue}f=_r}s=s.concat(f({key:(t?t+".":t)+l,value:n[l],valueSpec:h,style:i,styleSpec:o,object:n,objectKey:l},n))}for(var d in r)a[d]||r[d].required&&void 0===r[d].default&&void 0===n[d]&&s.push(new Ie(t,n,'missing required property "'+d+'"'));return s}function Kn(e){var t=e.value,n=e.valueSpec,r=e.style,a=e.styleSpec,i=e.key,o=e.arrayElementValidator||_r;if("array"!==Mn(t))return[new Ie(i,t,"array expected, "+Mn(t)+" found")];if(n.length&&t.length!==n.length)return[new Ie(i,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new Ie(i,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var s={type:n.value,values:n.values};a.$version<7&&(s.function=n.function),"object"===Mn(n.value)&&(s=n.value);for(var u=[],l=0;l<t.length;l++)u=u.concat(o({array:t,arrayIndex:l,value:t[l],valueSpec:s,style:r,styleSpec:a,key:i+"["+l+"]"}));return u}function Zn(e){var t=e.key,n=e.value,r=e.valueSpec,a=Mn(n);return"number"===a&&n!=n&&(a="NaN"),"number"!==a?[new Ie(t,n,"number expected, "+a+" found")]:"minimum"in r&&n<r.minimum?[new Ie(t,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new Ie(t,n,n+" is greater than the maximum value "+r.maximum)]:[]}function Yn(e){var t,n,r,a=e.valueSpec,i=Te(e.value.type),o={},s="categorical"!==i&&void 0===e.value.property,u=!s,l="array"===Mn(e.value.stops)&&"array"===Mn(e.value.stops[0])&&"object"===Mn(e.value.stops[0][0]),c=Xn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===i)return[new Ie(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(Kn({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Mn(n)&&0===n.length&&t.push(new Ie(e.key,n,"array must have at least one stop")),t},default:function(e){return _r({key:e.key,value:e.value,valueSpec:a,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===i&&s&&c.push(new Ie(e.key,e.value,'missing required property "property"')),"identity"===i||e.value.stops||c.push(new Ie(e.key,e.value,'missing required property "stops"')),"exponential"===i&&e.valueSpec.expression&&!On(e.valueSpec)&&c.push(new Ie(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(u&&!En(e.valueSpec)?c.push(new Ie(e.key,e.value,"property functions not supported")):s&&!Rn(e.valueSpec)&&c.push(new Ie(e.key,e.value,"zoom functions not supported"))),"categorical"!==i&&!l||void 0!==e.value.property||c.push(new Ie(e.key,e.value,'"property" property is required')),c;function h(e){var t=[],i=e.value,s=e.key;if("array"!==Mn(i))return[new Ie(s,i,"array expected, "+Mn(i)+" found")];if(2!==i.length)return[new Ie(s,i,"array length 2 expected, length "+i.length+" found")];if(l){if("object"!==Mn(i[0]))return[new Ie(s,i,"object expected, "+Mn(i[0])+" found")];if(void 0===i[0].zoom)return[new Ie(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new Ie(s,i,"object stop key must have value")];if(r&&r>Te(i[0].zoom))return[new Ie(s,i[0].zoom,"stop zoom values must appear in ascending order")];Te(i[0].zoom)!==r&&(r=Te(i[0].zoom),n=void 0,o={}),t=t.concat(Xn({key:s+"[0]",value:i[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Zn,value:f}}))}else t=t.concat(f({key:s+"[0]",value:i[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},i));return Vn(Ee(i[1]))?t.concat([new Ie(s+"[1]",i[1],"expressions are not allowed in function stops.")]):t.concat(_r({key:s+"[1]",value:i[1],valueSpec:a,style:e.style,styleSpec:e.styleSpec}))}function f(e,r){var s=Mn(e.value),u=Te(e.value),l=null!==e.value?e.value:r;if(t){if(s!==t)return[new Ie(e.key,l,s+" stop domain type must match previous stop domain type "+t)]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Ie(e.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==i){var c="number expected, "+s+" found";return En(a)&&void 0===i&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ie(e.key,l,c)]}return"categorical"!==i||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==i&&"number"===s&&void 0!==n&&u<n?[new Ie(e.key,l,"stop domain values must appear in ascending order")]:(n=u,"categorical"===i&&u in o?[new Ie(e.key,l,"stop domain values must be unique")]:(o[u]=!0,[])):[new Ie(e.key,l,"integer expected, found "+u)]}}function Qn(e){var t=("property"===e.expressionContext?Gn:Un)(Ee(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new Ie(""+e.key+t.key,e.value,t.message)}));var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new Ie(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Nt(n))return[new Ie(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Nt(n))return[new Ie(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Pt(n,["zoom","feature-state"]))return[new Ie(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Mt(n))return[new Ie(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $n(e){var t=e.key,n=e.value,r=e.valueSpec,a=[];return Array.isArray(r.values)?-1===r.values.indexOf(Te(n))&&a.push(new Ie(t,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(Te(n))&&a.push(new Ie(t,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),a}function er(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var r=n[t];if(!er(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}Jn.deserialize=function(e){return new Jn(e._parameters,e._specification)},Jn.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var tr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function nr(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};er(e)||(e=ar(e));var t=Un(e,tr);if("error"===t.result)throw new Error(t.value.map((function(e){return e.key+": "+e.message})).join(", "));return{filter:function(e,n,r){return t.value.evaluate(e,n,{},r)},needGeometry:function e(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var n=1;n<t.length;n++)if(e(t[n]))return!0;return!1}(e)}}function rr(e,t){return e<t?-1:e>t?1:0}function ar(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?ir(e[1],e[2],"=="):"!="===n?ur(ir(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?ir(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(ar))):"all"===n?["all"].concat(e.slice(1).map(ar)):"none"===n?["all"].concat(e.slice(1).map(ar).map(ur)):"in"===n?or(e[1],e.slice(2)):"!in"===n?ur(or(e[1],e.slice(2))):"has"===n?sr(e[1]):"!has"===n?ur(sr(e[1])):"within"!==n||e}function ir(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function or(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(rr)]]:["filter-in-small",e,["literal",t]]}}function sr(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function ur(e){return["!",e]}function lr(e){return er(Ee(e.value))?Qn(Ae({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){var n=t.value,r=t.key;if("array"!==Mn(n))return[new Ie(r,n,"array expected, "+Mn(n)+" found")];var a,i=t.styleSpec,o=[];if(n.length<1)return[new Ie(r,n,"filter array must have at least 1 element")];switch(o=o.concat($n({key:r+"[0]",value:n[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),Te(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===Te(n[1])&&o.push(new Ie(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&o.push(new Ie(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(a=Mn(n[1]))&&o.push(new Ie(r+"[1]",n[1],"string expected, "+a+" found"));for(var s=2;s<n.length;s++)a=Mn(n[s]),"$type"===Te(n[1])?o=o.concat($n({key:r+"["+s+"]",value:n[s],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&o.push(new Ie(r+"["+s+"]",n[s],"string, number, or boolean expected, "+a+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)o=o.concat(e({key:r+"["+u+"]",value:n[u],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":a=Mn(n[1]),2!==n.length?o.push(new Ie(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==a&&o.push(new Ie(r+"[1]",n[1],"string expected, "+a+" found"));break;case"within":a=Mn(n[1]),2!==n.length?o.push(new Ie(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"object"!==a&&o.push(new Ie(r+"[1]",n[1],"object expected, "+a+" found"))}return o}(e)}function cr(e,t){var n=e.key,r=e.style,a=e.styleSpec,i=e.value,o=e.objectKey,s=a[t+"_"+e.layerType];if(!s)return[];var u=o.match(/^(.*)-transition$/);if("paint"===t&&u&&s[u[1]]&&s[u[1]].transition)return _r({key:n,value:i,valueSpec:a.transition,style:r,styleSpec:a});var l,c=e.valueSpec||s[o];if(!c)return[new Ie(n,i,'unknown property "'+o+'"')];if("string"===Mn(i)&&En(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(i)))return[new Ie(n,i,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var h=[];return"symbol"===e.layerType&&("text-field"===o&&r&&!r.glyphs&&h.push(new Ie(n,i,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Nn(Ee(i))&&"identity"===Te(i.type)&&h.push(new Ie(n,i,'"text-font" does not support identity functions'))),h.concat(_r({key:e.key,value:i,valueSpec:c,style:r,styleSpec:a,expressionContext:"property",propertyType:t,propertyKey:o}))}function hr(e){return cr(e,"paint")}function fr(e){return cr(e,"layout")}function dr(e){var t=[],n=e.value,r=e.key,a=e.style,i=e.styleSpec;n.type||n.ref||t.push(new Ie(r,n,'either "type" or "ref" is required'));var o,s=Te(n.type),u=Te(n.ref);if(n.id)for(var l=Te(n.id),c=0;c<e.arrayIndex;c++){var h=a.layers[c];Te(h.id)===l&&t.push(new Ie(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+h.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(e){e in n&&t.push(new Ie(r,n[e],'"'+e+'" is prohibited for ref layers'))})),a.layers.forEach((function(e){Te(e.id)===u&&(o=e)})),o?o.ref?t.push(new Ie(r,n.ref,"ref cannot reference another ref layer")):s=Te(o.type):t.push(new Ie(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var f=a.sources&&a.sources[n.source],d=f&&Te(f.type);f?"vector"===d&&"raster"===s?t.push(new Ie(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===d&&"raster"!==s?t.push(new Ie(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==d||n["source-layer"]?"raster-dem"===d&&"hillshade"!==s?t.push(new Ie(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===d&&f.lineMetrics||t.push(new Ie(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Ie(r,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new Ie(r,n.source,'source "'+n.source+'" not found'))}else t.push(new Ie(r,n,'missing required property "source"'));return t=t.concat(Xn({key:r,value:n,valueSpec:i.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return _r({key:r+".type",value:n.type,valueSpec:i.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:lr,layout:function(e){return Xn({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return fr(Ae({layerType:s},e))}}})},paint:function(e){return Xn({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return hr(Ae({layerType:s},e))}}})}}}))}function pr(e){var t=e.value,n=e.key,r=Mn(t);return"string"!==r?[new Ie(n,t,"string expected, "+r+" found")]:[]}var mr={promoteId:function(e){var t=e.key,n=e.value;if("string"===Mn(n))return pr({key:t,value:n});var r=[];for(var a in n)r.push.apply(r,pr({key:t+"."+a,value:n[a]}));return r}};function vr(e){var t=e.value,n=e.key,r=e.styleSpec,a=e.style;if(!t.type)return[new Ie(n,t,'"type" is required')];var i,o=Te(t.type);switch(o){case"vector":case"raster":case"raster-dem":return Xn({key:n,value:t,valueSpec:r["source_"+o.replace("-","_")],style:e.style,styleSpec:r,objectElementValidators:mr});case"geojson":if(i=Xn({key:n,value:t,valueSpec:r.source_geojson,style:a,styleSpec:r,objectElementValidators:mr}),t.cluster)for(var s in t.clusterProperties){var u=t.clusterProperties[s],l=u[0],c="string"==typeof l?[l,["accumulated"],["get",s]]:l;i.push.apply(i,Qn({key:n+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),i.push.apply(i,Qn({key:n+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return i;case"video":return Xn({key:n,value:t,valueSpec:r.source_video,style:a,styleSpec:r});case"image":return Xn({key:n,value:t,valueSpec:r.source_image,style:a,styleSpec:r});case"canvas":return[new Ie(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $n({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,styleSpec:r})}}function yr(e){var t=e.value,n=e.styleSpec,r=n.light,a=e.style,i=[],o=Mn(t);if(void 0===t)return i;if("object"!==o)return i.concat([new Ie("light",t,"object expected, "+o+" found")]);for(var s in t){var u=s.match(/^(.*)-transition$/);i=i.concat(u&&r[u[1]]&&r[u[1]].transition?_r({key:s,value:t[s],valueSpec:n.transition,style:a,styleSpec:n}):r[s]?_r({key:s,value:t[s],valueSpec:r[s],style:a,styleSpec:n}):[new Ie(s,t[s],'unknown property "'+s+'"')])}return i}var gr={"*":function(){return[]},array:Kn,boolean:function(e){var t=e.value,n=e.key,r=Mn(t);return"boolean"!==r?[new Ie(n,t,"boolean expected, "+r+" found")]:[]},number:Zn,color:function(e){var t=e.key,n=e.value,r=Mn(n);return"string"!==r?[new Ie(t,n,"color expected, "+r+" found")]:null===Ke(n)?[new Ie(t,n,'color expected, "'+n+'" found')]:[]},constants:De,enum:$n,filter:lr,function:Yn,layer:dr,object:Xn,source:vr,light:yr,string:pr,formatted:function(e){return 0===pr(e).length?[]:Qn(e)},resolvedImage:function(e){return 0===pr(e).length?[]:Qn(e)}};function _r(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Nn(Te(t))?Yn(e):n.expression&&Vn(Ee(t))?Qn(e):n.type&&gr[n.type]?gr[n.type](e):Xn(Ae({},e,{valueSpec:n.type?r[n.type]:n}))}function br(e){var t=e.value,n=e.key,r=pr(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new Ie(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new Ie(n,t,'"glyphs" url must include a "{range}" token'))),r}function xr(e,t){void 0===t&&(t=Se);var n=[];return n=n.concat(_r({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:br,"*":function(){return[]}}})),e.constants&&(n=n.concat(De({key:"constants",value:e.constants,style:e,styleSpec:t}))),wr(n)}function wr(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function kr(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return wr(e.apply(this,t))}}xr.source=kr(vr),xr.light=kr(yr),xr.layer=kr(dr),xr.filter=kr(lr),xr.paintProperty=kr(hr),xr.layoutProperty=kr(fr);var Cr=xr,Sr=Cr.light,Ir=Cr.paintProperty,Dr=Cr.layoutProperty;function Ar(e,t){var n=!1;if(t&&t.length)for(var r=0,a=t;r<a.length;r+=1)e.fire(new ke(new Error(a[r].message))),n=!0;return n}var Tr=Er;function Er(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var a=new Int32Array(this.arrayBuffer);e=a[0],this.d=(t=a[1])+2*(n=a[2]);for(var i=0;i<this.d*this.d;i++){var o=a[3+i],s=a[3+i+1];r.push(o===s?null:a.subarray(o,s))}var u=a[3+r.length+1];this.keys=a.subarray(a[3+r.length],u),this.bboxes=a.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var c=n/t*e;this.min=-c,this.max=e+c}Er.prototype.insert=function(e,t,n,r,a){this._forEachCell(t,n,r,a,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(a)},Er.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Er.prototype._insertCell=function(e,t,n,r,a,i){this.cells[a].push(i)},Er.prototype.query=function(e,t,n,r,a){var i=this.min,o=this.max;if(e<=i&&t<=i&&o<=n&&o<=r&&!a)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},a),s},Er.prototype._queryCell=function(e,t,n,r,a,i,o,s){var u=this.cells[a];if(null!==u)for(var l=this.keys,c=this.bboxes,h=0;h<u.length;h++){var f=u[h];if(void 0===o[f]){var d=4*f;(s?s(c[d+0],c[d+1],c[d+2],c[d+3]):e<=c[d+2]&&t<=c[d+3]&&n>=c[d+0]&&r>=c[d+1])?(o[f]=!0,i.push(l[f])):o[f]=!1}}},Er.prototype._forEachCell=function(e,t,n,r,a,i,o,s){for(var u=this._convertToCellCoord(e),l=this._convertToCellCoord(t),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r),f=u;f<=c;f++)for(var d=l;d<=h;d++){var p=this.d*d+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(d),this._convertFromCellCoord(f+1),this._convertFromCellCoord(d+1)))&&a.call(this,e,t,n,r,p,i,o,s))return}},Er.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Er.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Er.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var a=new Int32Array(t+n+this.keys.length+this.bboxes.length);a[0]=this.extent,a[1]=this.n,a[2]=this.padding;for(var i=t,o=0;o<e.length;o++){var s=e[o];a[3+o]=i,a.set(s,i),i+=s.length}return a[3+e.length]=i,a.set(this.keys,i),a[3+e.length+1]=i+=this.keys.length,a.set(this.bboxes,i),i+=this.bboxes.length,a.buffer};var Rr=self.ImageData,Or=self.ImageBitmap,Mr={};function Nr(e,t,n){void 0===n&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Mr[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var Pr in Nr("Object",Object),Tr.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Tr.deserialize=function(e){return new Tr(e.buffer)},Nr("Grid",Tr),Nr("Color",Ze),Nr("Error",Error),Nr("ResolvedImage",et),Nr("StylePropertyFunction",Jn),Nr("StyleExpression",qn,{omit:["_evaluator"]}),Nr("ZoomDependentExpression",Hn),Nr("ZoomConstantExpression",jn),Nr("CompoundExpression",mt,{omit:["_evaluate"]}),kn)kn[Pr]._classRegistryKey||Nr("Expression_"+Pr,kn[Pr]);function Fr(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Lr(e){return Or&&e instanceof Or}function zr(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Fr(e)||Lr(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof Rr)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],a=0,i=e;a<i.length;a+=1)r.push(zr(i[a],t));return r}if("object"==typeof e){var o=e.constructor,s=o._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=o.serialize?o.serialize(e,t):{};if(!o.serialize){for(var l in e)if(e.hasOwnProperty(l)&&!(Mr[s].omit.indexOf(l)>=0)){var c=e[l];u[l]=Mr[s].shallow.indexOf(l)>=0?c:zr(c,t)}e instanceof Error&&(u.message=e.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof e)}function Br(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Fr(e)||Lr(e)||ArrayBuffer.isView(e)||e instanceof Rr)return e;if(Array.isArray(e))return e.map(Br);if("object"==typeof e){var t=e.$name||"Object",n=Mr[t].klass;if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);for(var r=Object.create(n.prototype),a=0,i=Object.keys(e);a<i.length;a+=1){var o=i[a];if("$name"!==o){var s=e[o];r[o]=Mr[t].shallow.indexOf(o)>=0?s:Br(s)}}return r}throw new Error("can't deserialize object of type "+typeof e)}var Wr=function(){this.first=!0};Wr.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var qr={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Vr(e){for(var t=0,n=e;t<n.length;t+=1)if(Ur(n[t].charCodeAt(0)))return!0;return!1}function Ur(e){return!(746!==e&&747!==e&&(e<4352||!(qr["Bopomofo Extended"](e)||qr.Bopomofo(e)||qr["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||qr["CJK Compatibility Ideographs"](e)||qr["CJK Compatibility"](e)||qr["CJK Radicals Supplement"](e)||qr["CJK Strokes"](e)||!(!qr["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||qr["CJK Unified Ideographs Extension A"](e)||qr["CJK Unified Ideographs"](e)||qr["Enclosed CJK Letters and Months"](e)||qr["Hangul Compatibility Jamo"](e)||qr["Hangul Jamo Extended-A"](e)||qr["Hangul Jamo Extended-B"](e)||qr["Hangul Jamo"](e)||qr["Hangul Syllables"](e)||qr.Hiragana(e)||qr["Ideographic Description Characters"](e)||qr.Kanbun(e)||qr["Kangxi Radicals"](e)||qr["Katakana Phonetic Extensions"](e)||qr.Katakana(e)&&12540!==e||!(!qr["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!qr["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||qr["Unified Canadian Aboriginal Syllabics"](e)||qr["Unified Canadian Aboriginal Syllabics Extended"](e)||qr["Vertical Forms"](e)||qr["Yijing Hexagram Symbols"](e)||qr["Yi Syllables"](e)||qr["Yi Radicals"](e))))}function jr(e){return!(Ur(e)||function(e){return!!(qr["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||qr["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||qr["Letterlike Symbols"](e)||qr["Number Forms"](e)||qr["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||qr["Control Pictures"](e)&&9251!==e||qr["Optical Character Recognition"](e)||qr["Enclosed Alphanumerics"](e)||qr["Geometric Shapes"](e)||qr["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||qr["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||qr["CJK Symbols and Punctuation"](e)||qr.Katakana(e)||qr["Private Use Area"](e)||qr["CJK Compatibility Forms"](e)||qr["Small Form Variants"](e)||qr["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Hr(e){return e>=1424&&e<=2303||qr["Arabic Presentation Forms-A"](e)||qr["Arabic Presentation Forms-B"](e)}function Gr(e,t){return!(!t&&Hr(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||qr.Khmer(e))}function Jr(e){for(var t=0,n=e;t<n.length;t+=1)if(Hr(n[t].charCodeAt(0)))return!0;return!1}var Xr=null,Kr="unavailable",Zr=null,Yr=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Kr="error"),Xr&&Xr(e)};function Qr(){$r.fire(new we("pluginStateChange",{pluginStatus:Kr,pluginURL:Zr}))}var $r=new Ce,ea=function(){return Kr},ta=function(){if("deferred"!==Kr||!Zr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Kr="loading",Qr(),Zr&&ge({url:Zr},(function(e){e?Yr(e):(Kr="loaded",Qr())}))},na={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Kr||null!=na.applyArabicShaping},isLoading:function(){return"loading"===Kr},setState:function(e){Kr=e.pluginStatus,Zr=e.pluginURL},isParsed:function(){return null!=na.applyArabicShaping&&null!=na.processBidirectionalText&&null!=na.processStyledBidirectionalText},getPluginURL:function(){return Zr}},ra=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Wr,this.transition={})};ra.prototype.isSupportedScript=function(e){return function(e,t){for(var n=0,r=e;n<r.length;n+=1)if(!Gr(r[n].charCodeAt(0),t))return!1;return!0}(e,na.isLoaded())},ra.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ra.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}};var aa=function(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Nn(e))return new Jn(e,t);if(Vn(e)){var n=Gn(e,t);if("error"===n.result)throw new Error(n.value.map((function(e){return e.key+": "+e.message})).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=Ze.parse(e)),{kind:"constant",evaluate:function(){return r}}}(void 0===t?e.specification.default:t,e.specification)};aa.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},aa.prototype.possiblyEvaluate=function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)};var ia=function(e){this.property=e,this.value=new aa(e,void 0)};ia.prototype.transitioned=function(e,t){return new sa(this.property,this.value,t,c({},e.transition,this.transition),e.now)},ia.prototype.untransitioned=function(){return new sa(this.property,this.value,null,{},0)};var oa=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};oa.prototype.getValue=function(e){return _(this._values[e].value.value)},oa.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ia(this._values[e].property)),this._values[e].value=new aa(this._values[e].property,null===t?void 0:_(t))},oa.prototype.getTransition=function(e){return _(this._values[e].transition)},oa.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ia(this._values[e].property)),this._values[e].transition=_(t)||void 0},oa.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],a=this.getValue(r);void 0!==a&&(e[r]=a);var i=this.getTransition(r);void 0!==i&&(e[r+"-transition"]=i)}return e},oa.prototype.transitioned=function(e,t){for(var n=new ua(this._properties),r=0,a=Object.keys(this._values);r<a.length;r+=1){var i=a[r];n._values[i]=this._values[i].transitioned(e,t._values[i])}return n},oa.prototype.untransitioned=function(){for(var e=new ua(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e};var sa=function(e,t,n,r,a){this.property=e,this.value=t,this.begin=a+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};sa.prototype.possiblyEvaluate=function(e,t,n){var r=e.now||0,a=this.value.possiblyEvaluate(e,t,n),i=this.prior;if(i){if(r>this.end)return this.prior=null,a;if(this.value.isDataDriven())return this.prior=null,a;if(r<this.begin)return i.possiblyEvaluate(e,t,n);var o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(i.possiblyEvaluate(e,t,n),a,function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}(o))}return a};var ua=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};ua.prototype.possiblyEvaluate=function(e,t,n){for(var r=new ha(this._properties),a=0,i=Object.keys(this._values);a<i.length;a+=1){var o=i[a];r._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return r},ua.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var la=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};la.prototype.getValue=function(e){return _(this._values[e].value)},la.prototype.setValue=function(e,t){this._values[e]=new aa(this._values[e].property,null===t?void 0:_(t))},la.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],a=this.getValue(r);void 0!==a&&(e[r]=a)}return e},la.prototype.possiblyEvaluate=function(e,t,n){for(var r=new ha(this._properties),a=0,i=Object.keys(this._values);a<i.length;a+=1){var o=i[a];r._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return r};var ca=function(e,t,n){this.property=e,this.value=t,this.parameters=n};ca.prototype.isConstant=function(){return"constant"===this.value.kind},ca.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},ca.prototype.evaluate=function(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)};var ha=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};ha.prototype.get=function(e){return this._values[e]};var fa=function(e){this.specification=e};fa.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},fa.prototype.interpolate=function(e,t,n){var r=qt[this.specification.type];return r?r(e,t,n):e};var da=function(e,t){this.specification=e,this.overrides=t};da.prototype.possiblyEvaluate=function(e,t,n,r){return new ca(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)},da.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new ca(this,{kind:"constant",value:void 0},e.parameters);var r=qt[this.specification.type];return r?new ca(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e},da.prototype.evaluate=function(e,t,n,r,a,i){return"constant"===e.kind?e.value:e.evaluate(t,n,r,a,i)};var pa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(e,t,n,r){if(void 0===e.value)return new ca(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var a=e.expression.evaluate(t,null,{},n,r),i="resolvedImage"===e.property.specification.type&&"string"!=typeof a?a.name:a,o=this._calculate(i,i,i,t);return new ca(this,{kind:"constant",value:o},t)}if("camera"===e.expression.kind){var s=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new ca(this,{kind:"constant",value:s},t)}return new ca(this,e.expression,t)},t.prototype.evaluate=function(e,t,n,r,a,i){if("source"===e.kind){var o=e.evaluate(t,n,r,a,i);return this._calculate(o,o,o,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value},t.prototype._calculate=function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},t.prototype.interpolate=function(e){return e},t}(da),ma=function(e){this.specification=e};ma.prototype.possiblyEvaluate=function(e,t,n,r){if(void 0!==e.value){if("constant"===e.expression.kind){var a=e.expression.evaluate(t,null,{},n,r);return this._calculate(a,a,a,t)}return this._calculate(e.expression.evaluate(new ra(Math.floor(t.zoom-1),t)),e.expression.evaluate(new ra(Math.floor(t.zoom),t)),e.expression.evaluate(new ra(Math.floor(t.zoom+1),t)),t)}},ma.prototype._calculate=function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},ma.prototype.interpolate=function(e){return e};var va=function(e){this.specification=e};va.prototype.possiblyEvaluate=function(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)},va.prototype.interpolate=function(){return!1};var ya=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var n=e[t];n.specification.overridable&&this.overridableProperties.push(t);var r=this.defaultPropertyValues[t]=new aa(n,void 0),a=this.defaultTransitionablePropertyValues[t]=new ia(n);this.defaultTransitioningPropertyValues[t]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}};Nr("DataDrivenProperty",da),Nr("DataConstantProperty",fa),Nr("CrossFadedDataDrivenProperty",pa),Nr("CrossFadedProperty",ma),Nr("ColorRampProperty",va);var ga=function(e){function t(t,n){if(e.call(this),this.id=t.id,this.type=t.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==t.type&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),n.layout&&(this._unevaluatedLayout=new la(n.layout)),n.paint)){for(var r in this._transitionablePaint=new oa(n.paint),t.paint)this.setPaintProperty(r,t.paint[r],{validate:!1});for(var a in t.layout)this.setLayoutProperty(a,t.layout[a],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ha(n.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(e,t,n){void 0===n&&(n={}),null!=t&&this._validate(Dr,"layers."+this.id+".layout."+e,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)},t.prototype.getPaintProperty=function(e){return v(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(e,t,n){if(void 0===n&&(n={}),null!=t&&this._validate(Ir,"layers."+this.id+".paint."+e,e,t,n))return!1;if(v(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;var r=this._transitionablePaint._values[e],a="cross-faded-data-driven"===r.property.specification["property-type"],i=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value;return s.isDataDriven()||i||a||this._handleOverridablePaintPropertyUpdate(e,o,s)},t.prototype._handleSpecialPaintPropertyUpdate=function(e){},t.prototype._handleOverridablePaintPropertyUpdate=function(e,t,n){return!1},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),g(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))},t.prototype._validate=function(e,t,n,r,a){return void 0===a&&(a={}),(!a||!1!==a.validate)&&Ar(this,e.call(Cr,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof ca&&En(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1},t}(Ce),_a={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ba=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},xa=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function wa(e,t){void 0===t&&(t=1);var n=0,r=0;return{members:e.map((function(e){var a=_a[e.type].BYTES_PER_ELEMENT,i=n=ka(n,Math.max(t,a)),o=e.components||1;return r=Math.max(r,a),n+=a*o,{name:e.name,type:e.type,components:o,offset:i}})),size:ka(n,Math.max(r,t)),alignment:t}}function ka(e,t){return Math.ceil(e/t)*t}xa.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},xa.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},xa.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},xa.prototype.clear=function(){this.length=0},xa.prototype.resize=function(e){this.reserve(e),this.length=e},xa.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},xa.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ca=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e},t}(xa);Ca.prototype.bytesPerElement=4,Nr("StructArrayLayout2i4",Ca);var Sa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r)},t.prototype.emplace=function(e,t,n,r,a){var i=4*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,this.int16[i+3]=a,e},t}(xa);Sa.prototype.bytesPerElement=8,Nr("StructArrayLayout4i8",Sa);var Ia=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,a,i)},t.prototype.emplace=function(e,t,n,r,a,i,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=a,this.int16[s+4]=i,this.int16[s+5]=o,e},t}(xa);Ia.prototype.bytesPerElement=12,Nr("StructArrayLayout2i4i12",Ia);var Da=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,a,i)},t.prototype.emplace=function(e,t,n,r,a,i,o){var s=4*e,u=8*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.uint8[u+4]=r,this.uint8[u+5]=a,this.uint8[u+6]=i,this.uint8[u+7]=o,e},t}(xa);Da.prototype.bytesPerElement=8,Nr("StructArrayLayout2i4ub8",Da);var Aa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i,o,s,u,l){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,r,a,i,o,s,u,l)},t.prototype.emplace=function(e,t,n,r,a,i,o,s,u,l,c){var h=9*e,f=18*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=a,this.uint16[h+4]=i,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=u,this.uint8[f+16]=l,this.uint8[f+17]=c,e},t}(xa);Aa.prototype.bytesPerElement=18,Nr("StructArrayLayout8ui2ub18",Aa);var Ta=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i,o,s,u,l,c,h){var f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,r,a,i,o,s,u,l,c,h)},t.prototype.emplace=function(e,t,n,r,a,i,o,s,u,l,c,h,f){var d=12*e;return this.int16[d+0]=t,this.int16[d+1]=n,this.int16[d+2]=r,this.int16[d+3]=a,this.uint16[d+4]=i,this.uint16[d+5]=o,this.uint16[d+6]=s,this.uint16[d+7]=u,this.int16[d+8]=l,this.int16[d+9]=c,this.int16[d+10]=h,this.int16[d+11]=f,e},t}(xa);Ta.prototype.bytesPerElement=24,Nr("StructArrayLayout4i4ui4i24",Ta);var Ea=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var a=3*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,e},t}(xa);Ea.prototype.bytesPerElement=12,Nr("StructArrayLayout3f12",Ea);var Ra=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){return this.uint32[1*e+0]=t,e},t}(xa);Ra.prototype.bytesPerElement=4,Nr("StructArrayLayout1ul4",Ra);var Oa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i,o,s,u){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,r,a,i,o,s,u)},t.prototype.emplace=function(e,t,n,r,a,i,o,s,u,l){var c=10*e,h=5*e;return this.int16[c+0]=t,this.int16[c+1]=n,this.int16[c+2]=r,this.int16[c+3]=a,this.int16[c+4]=i,this.int16[c+5]=o,this.uint32[h+3]=s,this.uint16[c+8]=u,this.uint16[c+9]=l,e},t}(xa);Oa.prototype.bytesPerElement=20,Nr("StructArrayLayout6i1ul2ui20",Oa);var Ma=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,a,i)},t.prototype.emplace=function(e,t,n,r,a,i,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=a,this.int16[s+4]=i,this.int16[s+5]=o,e},t}(xa);Ma.prototype.bytesPerElement=12,Nr("StructArrayLayout2i2i2i12",Ma);var Na=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r,a)},t.prototype.emplace=function(e,t,n,r,a,i){var o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.int16[s+6]=a,this.int16[s+7]=i,e},t}(xa);Na.prototype.bytesPerElement=16,Nr("StructArrayLayout2f1f2i16",Na);var Pa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r)},t.prototype.emplace=function(e,t,n,r,a){var i=12*e,o=3*e;return this.uint8[i+0]=t,this.uint8[i+1]=n,this.float32[o+1]=r,this.float32[o+2]=a,e},t}(xa);Pa.prototype.bytesPerElement=12,Nr("StructArrayLayout2ub2f12",Pa);var Fa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var a=3*e;return this.uint16[a+0]=t,this.uint16[a+1]=n,this.uint16[a+2]=r,e},t}(xa);Fa.prototype.bytesPerElement=6,Nr("StructArrayLayout3ui6",Fa);var La=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i,o,s,u,l,c,h,f,d,p,m,v){var y=this.length;return this.resize(y+1),this.emplace(y,e,t,n,r,a,i,o,s,u,l,c,h,f,d,p,m,v)},t.prototype.emplace=function(e,t,n,r,a,i,o,s,u,l,c,h,f,d,p,m,v,y){var g=24*e,_=12*e,b=48*e;return this.int16[g+0]=t,this.int16[g+1]=n,this.uint16[g+2]=r,this.uint16[g+3]=a,this.uint32[_+2]=i,this.uint32[_+3]=o,this.uint32[_+4]=s,this.uint16[g+10]=u,this.uint16[g+11]=l,this.uint16[g+12]=c,this.float32[_+7]=h,this.float32[_+8]=f,this.uint8[b+36]=d,this.uint8[b+37]=p,this.uint8[b+38]=m,this.uint32[_+10]=v,this.int16[g+22]=y,e},t}(xa);La.prototype.bytesPerElement=48,Nr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",La);var za=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,a,i,o,s,u,l,c,h,f,d,p,m,v,y,g,_,b,x,w,k,C,S,I,D){var A=this.length;return this.resize(A+1),this.emplace(A,e,t,n,r,a,i,o,s,u,l,c,h,f,d,p,m,v,y,g,_,b,x,w,k,C,S,I,D)},t.prototype.emplace=function(e,t,n,r,a,i,o,s,u,l,c,h,f,d,p,m,v,y,g,_,b,x,w,k,C,S,I,D,A){var T=34*e,E=17*e;return this.int16[T+0]=t,this.int16[T+1]=n,this.int16[T+2]=r,this.int16[T+3]=a,this.int16[T+4]=i,this.int16[T+5]=o,this.int16[T+6]=s,this.int16[T+7]=u,this.uint16[T+8]=l,this.uint16[T+9]=c,this.uint16[T+10]=h,this.uint16[T+11]=f,this.uint16[T+12]=d,this.uint16[T+13]=p,this.uint16[T+14]=m,this.uint16[T+15]=v,this.uint16[T+16]=y,this.uint16[T+17]=g,this.uint16[T+18]=_,this.uint16[T+19]=b,this.uint16[T+20]=x,this.uint16[T+21]=w,this.uint16[T+22]=k,this.uint32[E+12]=C,this.float32[E+13]=S,this.float32[E+14]=I,this.float32[E+15]=D,this.float32[E+16]=A,e},t}(xa);za.prototype.bytesPerElement=68,Nr("StructArrayLayout8i15ui1ul4f68",za);var Ba=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){return this.float32[1*e+0]=t,e},t}(xa);Ba.prototype.bytesPerElement=4,Nr("StructArrayLayout1f4",Ba);var Wa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var a=3*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=r,e},t}(xa);Wa.prototype.bytesPerElement=6,Nr("StructArrayLayout3i6",Wa);var qa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var a=4*e;return this.uint32[2*e+0]=t,this.uint16[a+2]=n,this.uint16[a+3]=r,e},t}(xa);qa.prototype.bytesPerElement=8,Nr("StructArrayLayout1ul2ui8",qa);var Va=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e},t}(xa);Va.prototype.bytesPerElement=4,Nr("StructArrayLayout2ui4",Va);var Ua=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){return this.uint16[1*e+0]=t,e},t}(xa);Ua.prototype.bytesPerElement=2,Nr("StructArrayLayout1ui2",Ua);var ja=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e},t}(xa);ja.prototype.bytesPerElement=8,Nr("StructArrayLayout2f8",ja);var Ha=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r)},t.prototype.emplace=function(e,t,n,r,a){var i=4*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,this.float32[i+3]=a,e},t}(xa);Ha.prototype.bytesPerElement=16,Nr("StructArrayLayout4f16",Ha);var Ga=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new a(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(ba);Ga.prototype.size=20;var Ja=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new Ga(this,e)},t}(Oa);Nr("CollisionBoxArray",Ja);var Xa=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(e){this._structArray.uint8[this._pos1+37]=e},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(e){this._structArray.uint8[this._pos1+38]=e},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(e){this._structArray.uint32[this._pos4+10]=e},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,n),t}(ba);Xa.prototype.size=48;var Ka=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new Xa(this,e)},t}(La);Nr("PlacedSymbolArray",Ka);var Za=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(e){this._structArray.uint32[this._pos4+12]=e},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,n),t}(ba);Za.prototype.size=68;var Ya=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new Za(this,e)},t}(za);Nr("SymbolInstanceArray",Ya);var Qa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(e){return this.float32[1*e+0]},t}(Ba);Nr("GlyphOffsetArray",Qa);var $a=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t}(Wa);Nr("SymbolLineVertexArray",$a);var ei=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,n),t}(ba);ei.prototype.size=8;var ti=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new ei(this,e)},t}(qa);Nr("FeatureIndexArray",ti);var ni=wa([{name:"a_pos",components:2,type:"Int16"}],4).members,ri=function(e){void 0===e&&(e=[]),this.segments=e};function ai(e,t){return 256*(e=u(Math.floor(e),0,255))+u(Math.floor(t),0,255)}ri.prototype.prepareSegment=function(e,t,n,r){var a=this.segments[this.segments.length-1];return e>ri.MAX_VERTEX_ARRAY_LENGTH&&x("Max vertices per segment is "+ri.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!a||a.vertexLength+e>ri.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==r)&&(a={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(a.sortKey=r),this.segments.push(a)),a},ri.prototype.get=function(){return this.segments},ri.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var n=t[e];for(var r in n.vaos)n.vaos[r].destroy()}},ri.simpleSegment=function(e,t,n,r){return new ri([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},ri.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Nr("SegmentVector",ri);var ii=wa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),oi=t((function(e){e.exports=function(e,t){var n,r,a,i,o,s,u,l;for(r=e.length-(n=3&e.length),a=t,o=3432918353,s=461845907,l=0;l<r;)u=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,a=27492+(65535&(i=5*(65535&(a=(a^=u=(65535&(u=(u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(l+2))<<16;case 2:u^=(255&e.charCodeAt(l+1))<<8;case 1:a^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(l)))*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}})),si=t((function(e){e.exports=function(e,t){for(var n,r=e.length,a=t^r,i=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(n>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++i;switch(r){case 3:a^=(255&e.charCodeAt(i+2))<<16;case 2:a^=(255&e.charCodeAt(i+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(i)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0}})),ui=oi,li=si;ui.murmur3=oi,ui.murmur2=li;var ci=function(){this.ids=[],this.positions=[],this.indexed=!1};ci.prototype.add=function(e,t,n,r){this.ids.push(fi(e)),this.positions.push(t,n,r)},ci.prototype.getPositions=function(e){for(var t=fi(e),n=0,r=this.ids.length-1;n<r;){var a=n+r>>1;this.ids[a]>=t?r=a:n=a+1}for(var i=[];this.ids[n]===t;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i},ci.serialize=function(e,t){var n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return function e(t,n,r,a){for(;r<a;){for(var i=t[r+a>>1],o=r-1,s=a+1;;){do{o++}while(t[o]<i);do{s--}while(t[s]>i);if(o>=s)break;di(t,o,s),di(n,3*o,3*s),di(n,3*o+1,3*s+1),di(n,3*o+2,3*s+2)}s-r<a-s?(e(t,n,r,s),r=s+1):(e(t,n,s+1,a),a=s)}}(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}},ci.deserialize=function(e){var t=new ci;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var hi=Math.pow(2,53)-1;function fi(e){var t=+e;return!isNaN(t)&&t<=hi?t:ui(String(e))}function di(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}Nr("FeaturePositionMap",ci);var pi=function(e,t){this.gl=e.gl,this.location=t},mi=function(e){function t(t,n){e.call(this,t,n),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},t}(pi),vi=function(e){function t(t,n){e.call(this,t,n),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},t}(pi),yi=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},t}(pi),gi=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},t}(pi),_i=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},t}(pi),bi=function(e){function t(t,n){e.call(this,t,n),this.current=Ze.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},t}(pi),xi=new Float32Array(16),wi=function(e){function t(t,n){e.call(this,t,n),this.current=xi}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},t}(pi);function ki(e){return[ai(255*e.r,255*e.g),ai(255*e.b,255*e.a)]}var Ci=function(e,t,n){this.value=e,this.uniformNames=t.map((function(e){return"u_"+e})),this.type=n};Ci.prototype.setUniform=function(e,t,n){e.set(n.constantOr(this.value))},Ci.prototype.getBinding=function(e,t,n){return"color"===this.type?new bi(e,t):new vi(e,t)};var Si=function(e,t){this.uniformNames=t.map((function(e){return"u_"+e})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Si.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Si.prototype.setUniform=function(e,t,n,r){var a="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;a&&e.set(a)},Si.prototype.getBinding=function(e,t,n){return"u_pattern"===n.substr(0,9)?new _i(e,t):new vi(e,t)};var Ii=function(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new r};Ii.prototype.populatePaintArray=function(e,t,n,r,a){var i=this.paintVertexArray.length,o=this.expression.evaluate(new ra(0),t,{},r,[],a);this.paintVertexArray.resize(e),this._setPaintValue(i,e,o)},Ii.prototype.updatePaintArray=function(e,t,n,r){var a=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(e,t,a)},Ii.prototype._setPaintValue=function(e,t,n){if("color"===this.type)for(var r=ki(n),a=e;a<t;a++)this.paintVertexArray.emplace(a,r[0],r[1]);else{for(var i=e;i<t;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},Ii.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ii.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Di=function(e,t,n,r,a,i){this.expression=e,this.uniformNames=t.map((function(e){return"u_"+e+"_t"})),this.type=n,this.useIntegerZoom=r,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new i};Di.prototype.populatePaintArray=function(e,t,n,r,a){var i=this.expression.evaluate(new ra(this.zoom),t,{},r,[],a),o=this.expression.evaluate(new ra(this.zoom+1),t,{},r,[],a),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,i,o)},Di.prototype.updatePaintArray=function(e,t,n,r){var a=this.expression.evaluate({zoom:this.zoom},n,r),i=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(e,t,a,i)},Di.prototype._setPaintValue=function(e,t,n,r){if("color"===this.type)for(var a=ki(n),i=ki(r),o=e;o<t;o++)this.paintVertexArray.emplace(o,a[0],a[1],i[0],i[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}},Di.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Di.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Di.prototype.setUniform=function(e,t){var n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=u(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(r)},Di.prototype.getBinding=function(e,t,n){return new vi(e,t)};var Ai=function(e,t,n,r,a,i){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=r,this.layerId=i,this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a};Ai.prototype.populatePaintArray=function(e,t,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)},Ai.prototype.updatePaintArray=function(e,t,n,r,a){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],a)},Ai.prototype._setPaintValues=function(e,t,n,r){if(r&&n){var a=r[n.min],i=r[n.mid],o=r[n.max];if(a&&i&&o)for(var s=e;s<t;s++)this.zoomInPaintVertexArray.emplace(s,i.tl[0],i.tl[1],i.br[0],i.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],i.pixelRatio,a.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,i.tl[0],i.tl[1],i.br[0],i.br[1],o.tl[0],o.tl[1],o.br[0],o.br[1],i.pixelRatio,o.pixelRatio)}},Ai.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ii.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ii.members,this.expression.isStateDependent))},Ai.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ti=function(e,t,n,r){this.binders={},this.layoutAttributes=r,this._buffers=[];var a=[];for(var i in e.paint._values)if(n(i)){var o=e.paint.get(i);if(o instanceof ca&&En(o.property.specification)){var s=Ri(i,e.type),u=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,h=o.property.specification["property-type"],f="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===u.kind)this.binders[i]=f?new Si(u.value,s):new Ci(u.value,s,l),a.push("/u_"+i);else if("source"===u.kind||f){var d=Oi(i,l,"source");this.binders[i]=f?new Ai(u,l,c,t,d,e.id):new Ii(u,s,l,d),a.push("/a_"+i)}else{var p=Oi(i,l,"composite");this.binders[i]=new Di(u,s,l,c,t,p),a.push("/z_"+i)}}}this.cacheKey=a.sort().join("")};Ti.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Ii||t instanceof Di?t.maxValue:0},Ti.prototype.populatePaintArrays=function(e,t,n,r,a){for(var i in this.binders){var o=this.binders[i];(o instanceof Ii||o instanceof Di||o instanceof Ai)&&o.populatePaintArray(e,t,n,r,a)}},Ti.prototype.setConstantPatternPositions=function(e,t){for(var n in this.binders){var r=this.binders[n];r instanceof Si&&r.setConstantPatternPositions(e,t)}},Ti.prototype.updatePaintArrays=function(e,t,n,r,a){var i=!1;for(var o in e)for(var s=0,u=t.getPositions(o);s<u.length;s+=1){var l=u[s],c=n.feature(l.index);for(var h in this.binders){var f=this.binders[h];if((f instanceof Ii||f instanceof Di||f instanceof Ai)&&!0===f.expression.isStateDependent){var d=r.paint.get(h);f.expression=d.value,f.updatePaintArray(l.start,l.end,c,e[o],a),i=!0}}}return i},Ti.prototype.defines=function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof Ci||n instanceof Si)&&e.push.apply(e,n.uniformNames.map((function(e){return"#define HAS_UNIFORM_"+e})))}return e},Ti.prototype.getPaintVertexBuffers=function(){return this._buffers},Ti.prototype.getUniforms=function(e,t){var n=[];for(var r in this.binders){var a=this.binders[r];if(a instanceof Ci||a instanceof Si||a instanceof Di)for(var i=0,o=a.uniformNames;i<o.length;i+=1){var s=o[i];if(t[s]){var u=a.getBinding(e,t[s],s);n.push({name:s,property:r,binding:u})}}}return n},Ti.prototype.setUniforms=function(e,t,n,r){for(var a=0,i=t;a<i.length;a+=1){var o=i[a],s=o.name,u=o.property;this.binders[u].setUniform(o.binding,r,n.get(u),s)}},Ti.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];if(e&&n instanceof Ai){var r=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof Ii||n instanceof Di)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},Ti.prototype.upload=function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof Ii||n instanceof Di||n instanceof Ai)&&n.upload(e)}this.updatePaintBuffers()},Ti.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Ii||t instanceof Di||t instanceof Ai)&&t.destroy()}};var Ei=function(e,t,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var a=0,i=t;a<i.length;a+=1){var o=i[a];this.programConfigurations[o.id]=new Ti(o,n,r,e)}this.needsUpload=!1,this._featureMap=new ci,this._bufferOffset=0};function Ri(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Oi(e,t,n){var r={color:{source:ja,composite:Ha},number:{source:Ba,composite:ja}},a=function(e){return{"line-pattern":{source:Aa,composite:Aa},"fill-pattern":{source:Aa,composite:Aa},"fill-extrusion-pattern":{source:Aa,composite:Aa}}[e]}(e);return a&&a[n]||r[t][n]}Ei.prototype.populatePaintArrays=function(e,t,n,r,a,i){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(e,t,r,a,i);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Ei.prototype.updatePaintArrays=function(e,t,n,r){for(var a=0,i=n;a<i.length;a+=1){var o=i[a];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,r)||this.needsUpload}},Ei.prototype.get=function(e){return this.programConfigurations[e]},Ei.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Ei.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},Nr("ConstantBinder",Ci),Nr("CrossFadedConstantBinder",Si),Nr("SourceExpressionBinder",Ii),Nr("CrossFadedCompositeBinder",Ai),Nr("CompositeExpressionBinder",Di),Nr("ProgramConfiguration",Ti,{omit:["_buffers"]}),Nr("ProgramConfigurationSet",Ei);var Mi={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function Ni(e){for(var t=8192/e.extent,n=e.loadGeometry(),r=0;r<n.length;r++)for(var a=n[r],i=0;i<a.length;i++){var o=a[i];o.x=Math.round(o.x*t),o.y=Math.round(o.y*t),(o.x<Mi.min||o.x>Mi.max||o.y<Mi.min||o.y>Mi.max)&&(x("Geometry exceeds allowed extent, reduce your vector tile buffer size"),o.x=u(o.x,Mi.min,Mi.max),o.y=u(o.y,Mi.min,Mi.max))}return n}function Pi(e,t,n,r,a){e.emplaceBack(2*t+(r+1)/2,2*n+(a+1)/2)}var Fi=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ca,this.indexArray=new Fa,this.segments=new ri,this.programConfigurations=new Ei(ni,e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};function Li(e,t){for(var n=0;n<e.length;n++)if(Gi(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(Gi(e,t[r]))return!0;return!!qi(e,t)}function zi(e,t,n){return!!Gi(e,t)||!!Ui(t,e,n)}function Bi(e,t){if(1===e.length)return Hi(t,e[0]);for(var n=0;n<t.length;n++)for(var r=t[n],a=0;a<r.length;a++)if(Gi(e,r[a]))return!0;for(var i=0;i<e.length;i++)if(Hi(t,e[i]))return!0;for(var o=0;o<t.length;o++)if(qi(e,t[o]))return!0;return!1}function Wi(e,t,n){if(e.length>1){if(qi(e,t))return!0;for(var r=0;r<t.length;r++)if(Ui(t[r],e,n))return!0}for(var a=0;a<e.length;a++)if(Ui(e[a],t,n))return!0;return!1}function qi(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],a=e[n+1],i=0;i<t.length-1;i++)if(Vi(r,a,t[i],t[i+1]))return!0;return!1}function Vi(e,t,n,r){return w(e,n,r)!==w(t,n,r)&&w(e,t,n)!==w(e,t,r)}function Ui(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var a=1;a<t.length;a++)if(ji(e,t[a-1],t[a])<r)return!0;return!1}function ji(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var a=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(a<0?t:a>1?n:n.sub(t)._mult(a)._add(t))}function Hi(e,t){for(var n,r,a,i=!1,o=0;o<e.length;o++)for(var s=0,u=(n=e[o]).length-1;s<n.length;u=s++)(r=n[s]).y>t.y!=(a=n[u]).y>t.y&&t.x<(a.x-r.x)*(t.y-r.y)/(a.y-r.y)+r.x&&(i=!i);return i}function Gi(e,t){for(var n=!1,r=0,a=e.length-1;r<e.length;a=r++){var i=e[r],o=e[a];i.y>t.y!=o.y>t.y&&t.x<(o.x-i.x)*(t.y-i.y)/(o.y-i.y)+i.x&&(n=!n)}return n}function Ji(e,t,n){var r=n[0],a=n[2];if(e.x<r.x&&t.x<r.x||e.x>a.x&&t.x>a.x||e.y<r.y&&t.y<r.y||e.y>a.y&&t.y>a.y)return!1;var i=w(e,t,n[0]);return i!==w(e,t,n[1])||i!==w(e,t,n[2])||i!==w(e,t,n[3])}function Xi(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Ki(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Zi(e,t,n,r,i){if(!t[0]&&!t[1])return e;var o=a.convert(t)._mult(i);"viewport"===n&&o._rotate(-r);for(var s=[],u=0;u<e.length;u++)s.push(e[u].sub(o));return s}Fi.prototype.populate=function(e,t,n){var r=this.layers[0],a=[],i=null;"circle"===r.type&&(i=r.layout.get("circle-sort-key"));for(var o=0,s=e;o<s.length;o+=1){var u=s[o],l=u.feature,c=u.id,h=u.index,f=u.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,p={type:l.type,id:c,properties:l.properties,geometry:d?Ni(l):[]};if(this.layers[0]._featureFilter.filter(new ra(this.zoom),p,n)){d||(p.geometry=Ni(l));var m=i?i.evaluate(p,{},n):void 0;a.push({id:c,properties:l.properties,type:l.type,sourceLayerIndex:f,index:h,geometry:p.geometry,patterns:{},sortKey:m})}}i&&a.sort((function(e,t){return e.sortKey-t.sortKey}));for(var v=0,y=a;v<y.length;v+=1){var g=y[v],_=g.geometry,b=g.index,x=g.sourceLayerIndex,w=e[b].feature;this.addFeature(g,_,b,n),t.featureIndex.insert(w,_,b,x,this.index)}},Fi.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Fi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Fi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fi.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ni),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Fi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fi.prototype.addFeature=function(e,t,n,r){for(var a=0,i=t;a<i.length;a+=1)for(var o=0,s=i[a];o<s.length;o+=1){var u=s[o],l=u.x,c=u.y;if(!(l<0||l>=8192||c<0||c>=8192)){var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),f=h.vertexLength;Pi(this.layoutVertexArray,l,c,-1,-1),Pi(this.layoutVertexArray,l,c,1,-1),Pi(this.layoutVertexArray,l,c,1,1),Pi(this.layoutVertexArray,l,c,-1,1),this.indexArray.emplaceBack(f,f+1,f+2),this.indexArray.emplaceBack(f,f+3,f+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r)},Nr("CircleBucket",Fi,{omit:["layers"]});var Yi=new ya({"circle-sort-key":new da(Se.layout_circle["circle-sort-key"])}),Qi={paint:new ya({"circle-radius":new da(Se.paint_circle["circle-radius"]),"circle-color":new da(Se.paint_circle["circle-color"]),"circle-blur":new da(Se.paint_circle["circle-blur"]),"circle-opacity":new da(Se.paint_circle["circle-opacity"]),"circle-translate":new fa(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new fa(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fa(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fa(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new da(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new da(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new da(Se.paint_circle["circle-stroke-opacity"])}),layout:Yi},$i="undefined"!=typeof Float32Array?Float32Array:Array;function eo(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function to(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],m=t[12],v=t[13],y=t[14],g=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*h+w*m,e[1]=_*a+b*u+x*f+w*v,e[2]=_*i+b*l+x*d+w*y,e[3]=_*o+b*c+x*p+w*g,e[4]=(_=n[4])*r+(b=n[5])*s+(x=n[6])*h+(w=n[7])*m,e[5]=_*a+b*u+x*f+w*v,e[6]=_*i+b*l+x*d+w*y,e[7]=_*o+b*c+x*p+w*g,e[8]=(_=n[8])*r+(b=n[9])*s+(x=n[10])*h+(w=n[11])*m,e[9]=_*a+b*u+x*f+w*v,e[10]=_*i+b*l+x*d+w*y,e[11]=_*o+b*c+x*p+w*g,e[12]=(_=n[12])*r+(b=n[13])*s+(x=n[14])*h+(w=n[15])*m,e[13]=_*a+b*u+x*f+w*v,e[14]=_*i+b*l+x*d+w*y,e[15]=_*o+b*c+x*p+w*g,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,n=arguments.length;n--;)t+=e[n]*e[n];return Math.sqrt(t)});var no,ro=to;function ao(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3];return e[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,e[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,e[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,e[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o,e}no=new $i(3),$i!=Float32Array&&(no[0]=0,no[1]=0,no[2]=0),function(){var e=new $i(4);$i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var io=(function(){var e=new $i(2);$i!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(t){e.call(this,t,Qi)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(e){return new Fi(e)},t.prototype.queryRadius=function(e){var t=e;return Xi("circle-radius",this,t)+Xi("circle-stroke-width",this,t)+Ki(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,a,i,o,s){for(var u=Zi(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i.angle,o),l=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),c="map"===this.paint.get("circle-pitch-alignment"),h=c?u:function(e,t){return e.map((function(e){return oo(e,t)}))}(u,s),f=c?l*o:l,d=0,p=r;d<p.length;d+=1)for(var m=0,v=p[d];m<v.length;m+=1){var y=v[m],g=c?y:oo(y,s),_=f,b=ao([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/i.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=i.cameraToCenterDistance/b[3]),zi(h,g,_))return!0}return!1},t}(ga));function oo(e,t){var n=ao([],[e.x,e.y,0,1],t);return new a(n[0]/n[3],n[1]/n[3])}var so=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Fi);function uo(e,t,n,r){var a=t.width,i=t.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==a*i*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(a*i*n);return e.width=a,e.height=i,e.data=r,e}function lo(e,t,n){var r=t.width,a=t.height;if(r!==e.width||a!==e.height){var i=uo({},{width:r,height:a},n);co(e,i,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,a)},n),e.width=r,e.height=a,e.data=i.data}}function co(e,t,n,r,a,i){if(0===a.width||0===a.height)return t;if(a.width>e.width||a.height>e.height||n.x>e.width-a.width||n.y>e.height-a.height)throw new RangeError("out of range source coordinates for image copy");if(a.width>t.width||a.height>t.height||r.x>t.width-a.width||r.y>t.height-a.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,u=0;u<a.height;u++)for(var l=((n.y+u)*e.width+n.x)*i,c=((r.y+u)*t.width+r.x)*i,h=0;h<a.width*i;h++)s[c+h]=o[l+h];return t}Nr("HeatmapBucket",so,{omit:["layers"]});var ho=function(e,t){uo(this,e,1,t)};ho.prototype.resize=function(e){lo(this,e,1)},ho.prototype.clone=function(){return new ho({width:this.width,height:this.height},new Uint8Array(this.data))},ho.copy=function(e,t,n,r,a){co(e,t,n,r,a,1)};var fo=function(e,t){uo(this,e,4,t)};fo.prototype.resize=function(e){lo(this,e,4)},fo.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},fo.prototype.clone=function(){return new fo({width:this.width,height:this.height},new Uint8Array(this.data))},fo.copy=function(e,t,n,r,a){co(e,t,n,r,a,4)},Nr("AlphaImage",ho),Nr("RGBAImage",fo);var po={paint:new ya({"heatmap-radius":new da(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new da(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fa(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new va(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fa(Se.paint_heatmap["heatmap-opacity"])})};function mo(e,t){for(var n=new Uint8Array(1024),r={},a=0,i=0;a<256;a++,i+=4){r[t]=a/255;var o=e.evaluate(r);n[i+0]=Math.floor(255*o.r/o.a),n[i+1]=Math.floor(255*o.g/o.a),n[i+2]=Math.floor(255*o.b/o.a),n[i+3]=Math.floor(255*o.a)}return new fo({width:256,height:1},n)}var vo=function(e){function t(t){e.call(this,t,po),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(e){return new so(e)},t.prototype._handleSpecialPaintPropertyUpdate=function(e){"heatmap-color"===e&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=mo(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(ga),yo={paint:new ya({"hillshade-illumination-direction":new fa(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fa(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fa(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fa(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fa(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fa(Se.paint_hillshade["hillshade-accent-color"])})},go=function(e){function t(t){e.call(this,t,yo)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(ga),_o=wa([{name:"a_pos",components:2,type:"Int16"}],4).members,bo=wo,xo=wo;function wo(e,t,n){n=n||2;var r,a,i,o,s,u,l,c=t&&t.length,h=c?t[0]*n:e.length,f=ko(e,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(e,t,n,r){var a,i,o,s=[];for(a=0,i=t.length;a<i;a++)(o=ko(e,t[a]*r,a<i-1?t[a+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(No(o));for(s.sort(Eo),a=0;a<s.length;a++)Ro(s[a],n),n=Co(n,n.next);return n}(e,t,f,n)),e.length>80*n){r=i=e[0],a=o=e[1];for(var p=n;p<h;p+=n)(s=e[p])<r&&(r=s),(u=e[p+1])<a&&(a=u),s>i&&(i=s),u>o&&(o=u);l=0!==(l=Math.max(i-r,o-a))?1/l:0}return So(f,d,n,r,a,l),d}function ko(e,t,n,r,a){var i,o;if(a===Jo(e,t,n,r)>0)for(i=t;i<n;i+=r)o=jo(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=jo(i,e[i],e[i+1],o);return o&&zo(o,o.next)&&(Ho(o),o=o.next),o}function Co(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!zo(r,r.next)&&0!==Lo(r.prev,r,r.next))r=r.next;else{if(Ho(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function So(e,t,n,r,a,i,o){if(e){!o&&i&&function(e,t,n,r){var a=e;do{null===a.z&&(a.z=Mo(a.x,a.y,t,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,n,r,a,i,o,s,u,l=1;do{for(n=e,e=null,i=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(a=n,n=n.nextZ,s--):(a=r,r=r.nextZ,u--),i?i.nextZ=a:e=a,a.prevZ=i,i=a;n=r}i.nextZ=null,l*=2}while(o>1)}(a)}(e,r,a,i);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,i?Do(e,r,a,i):Io(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),Ho(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?So(e=Ao(Co(e),t,n),t,n,r,a,i,2):2===o&&To(e,t,n,r,a,i):So(Co(e),t,n,r,a,i,1);break}}}function Io(e){var t=e.prev,n=e,r=e.next;if(Lo(t,n,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(Po(t.x,t.y,n.x,n.y,r.x,r.y,a.x,a.y)&&Lo(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function Do(e,t,n,r){var a=e.prev,i=e,o=e.next;if(Lo(a,i,o)>=0)return!1;for(var s=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,u=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,l=Mo(a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,t,n,r),c=Mo(s,u,t,n,r),h=e.prevZ,f=e.nextZ;h&&h.z>=l&&f&&f.z<=c;){if(h!==e.prev&&h!==e.next&&Po(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&Lo(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==e.prev&&f!==e.next&&Po(a.x,a.y,i.x,i.y,o.x,o.y,f.x,f.y)&&Lo(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=l;){if(h!==e.prev&&h!==e.next&&Po(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&Lo(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=c;){if(f!==e.prev&&f!==e.next&&Po(a.x,a.y,i.x,i.y,o.x,o.y,f.x,f.y)&&Lo(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Ao(e,t,n){var r=e;do{var a=r.prev,i=r.next.next;!zo(a,i)&&Bo(a,r,r.next,i)&&Vo(a,i)&&Vo(i,a)&&(t.push(a.i/n),t.push(r.i/n),t.push(i.i/n),Ho(r),Ho(r.next),r=e=i),r=r.next}while(r!==e);return Co(r)}function To(e,t,n,r,a,i){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Fo(o,s)){var u=Uo(o,s);return o=Co(o,o.next),u=Co(u,u.next),So(o,t,n,r,a,i),void So(u,t,n,r,a,i)}s=s.next}o=o.next}while(o!==e)}function Eo(e,t){return e.x-t.x}function Ro(e,t){if(t=function(e,t){var n,r=t,a=e.x,i=e.y,o=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>o){if(o=s,s===a){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(a===o)return n;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{a>=r.x&&r.x>=c&&a!==r.x&&Po(i<h?a:o,i,c,h,i<h?o:a,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(a-r.x),Vo(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&Oo(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(e,t)){var n=Uo(t,e);Co(t,t.next),Co(n,n.next)}}function Oo(e,t){return Lo(e.prev,e,t.prev)<0&&Lo(t.next,e,e.next)<0}function Mo(e,t,n,r,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*a)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*a)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function No(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Po(e,t,n,r,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(i-s)-(a-o)*(r-s)>=0}function Fo(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Bo(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Vo(e,t)&&Vo(t,e)&&function(e,t){var n=e,r=!1,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&a<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Lo(e.prev,e,t.prev)||Lo(e,t.prev,t))||zo(e,t)&&Lo(e.prev,e,e.next)>0&&Lo(t.prev,t,t.next)>0)}function Lo(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function zo(e,t){return e.x===t.x&&e.y===t.y}function Bo(e,t,n,r){var a=qo(Lo(e,t,n)),i=qo(Lo(e,t,r)),o=qo(Lo(n,r,e)),s=qo(Lo(n,r,t));return a!==i&&o!==s||!(0!==a||!Wo(e,n,t))||!(0!==i||!Wo(e,r,t))||!(0!==o||!Wo(n,e,r))||!(0!==s||!Wo(n,t,r))}function Wo(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function qo(e){return e>0?1:e<0?-1:0}function Vo(e,t){return Lo(e.prev,e,e.next)<0?Lo(e,t,e.next)>=0&&Lo(e,e.prev,t)>=0:Lo(e,t,e.prev)<0||Lo(e,e.next,t)<0}function Uo(e,t){var n=new Go(e.i,e.x,e.y),r=new Go(t.i,t.x,t.y),a=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=a,a.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function jo(e,t,n,r){var a=new Go(e,t,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function Ho(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Go(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jo(e,t,n,r){for(var a=0,i=t,o=n-r;i<n;i+=r)a+=(e[o]-e[i])*(e[i+1]+e[o+1]),o=i;return a}function Xo(e,t,n,r,a){!function e(t,n,r,a,i){for(;a>r;){if(a-r>600){var o=a-r+1,s=n-r+1,u=Math.log(o),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(o-l)/o)*(s-o/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*l/o+c)),Math.min(a,Math.floor(n+(o-s)*l/o+c)),i)}var h=t[n],f=r,d=a;for(Ko(t,r,n),i(t[a],h)>0&&Ko(t,r,a);f<d;){for(Ko(t,f,d),f++,d--;i(t[f],h)<0;)f++;for(;i(t[d],h)>0;)d--}0===i(t[r],h)?Ko(t,r,d):Ko(t,++d,a),d<=n&&(r=d+1),n<=d&&(a=d-1)}}(e,t,n||0,r||e.length-1,a||Zo)}function Ko(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Zo(e,t){return e<t?-1:e>t?1:0}function Yo(e,t){var n=e.length;if(n<=1)return[e];for(var r,a,i=[],o=0;o<n;o++){var s=k(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===a&&(a=s<0),a===s<0?(r&&i.push(r),r=[e[o]]):r.push(e[o]))}if(r&&i.push(r),t>1)for(var u=0;u<i.length;u++)i[u].length<=t||(Xo(i[u],t,1,i[u].length-1,Qo),i[u]=i[u].slice(0,t));return i}function Qo(e,t){return t.area-e.area}function $o(e,t,n){for(var r=n.patternDependencies,a=!1,i=0,o=t;i<o.length;i+=1){var s=o[i].paint.get(e+"-pattern");s.isConstant()||(a=!0);var u=s.constantOr(null);u&&(a=!0,r[u.to]=!0,r[u.from]=!0)}return a}function es(e,t,n,r,a){for(var i=a.patternDependencies,o=0,s=t;o<s.length;o+=1){var u=s[o],l=u.paint.get(e+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},n,{},a.availableImages),h=l.evaluate({zoom:r},n,{},a.availableImages),f=l.evaluate({zoom:r+1},n,{},a.availableImages);h=h&&h.name?h.name:h,f=f&&f.name?f.name:f,i[c=c&&c.name?c.name:c]=!0,i[h]=!0,i[f]=!0,n.patterns[u.id]={min:c,mid:h,max:f}}}return n}wo.deviation=function(e,t,n,r){var a=t&&t.length,i=Math.abs(Jo(e,0,a?t[0]*n:e.length,n));if(a)for(var o=0,s=t.length;o<s;o++)i-=Math.abs(Jo(e,t[o]*n,o<s-1?t[o+1]*n:e.length,n));var u=0;for(o=0;o<r.length;o+=3){var l=r[o]*n,c=r[o+1]*n,h=r[o+2]*n;u+=Math.abs((e[l]-e[h])*(e[c+1]-e[l+1])-(e[l]-e[c])*(e[h+1]-e[l+1]))}return 0===i&&0===u?0:Math.abs((u-i)/i)},wo.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,a=0;a<e.length;a++){for(var i=0;i<e[a].length;i++)for(var o=0;o<t;o++)n.vertices.push(e[a][i][o]);a>0&&n.holes.push(r+=e[a-1].length)}return n},bo.default=xo;var ts=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ca,this.indexArray=new Fa,this.indexArray2=new Va,this.programConfigurations=new Ei(_o,e.layers,e.zoom),this.segments=new ri,this.segments2=new ri,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};ts.prototype.populate=function(e,t,n){this.hasPattern=$o("fill",this.layers,t);for(var r=this.layers[0].layout.get("fill-sort-key"),a=[],i=0,o=e;i<o.length;i+=1){var s=o[i],u=s.feature,l=s.id,c=s.index,h=s.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d={type:u.type,id:l,properties:u.properties,geometry:f?Ni(u):[]};if(this.layers[0]._featureFilter.filter(new ra(this.zoom),d,n)){f||(d.geometry=Ni(u));var p=r?r.evaluate(d,{},n,t.availableImages):void 0;a.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:h,index:c,geometry:d.geometry,patterns:{},sortKey:p})}}r&&a.sort((function(e,t){return e.sortKey-t.sortKey}));for(var m=0,v=a;m<v.length;m+=1){var y=v[m],g=y.geometry,_=y.index,b=y.sourceLayerIndex;if(this.hasPattern){var x=es("fill",this.layers,y,this.zoom,t);this.patternFeatures.push(x)}else this.addFeature(y,g,_,n,{});t.featureIndex.insert(e[_].feature,g,_,b,this.index)}},ts.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},ts.prototype.addFeatures=function(e,t,n){for(var r=0,a=this.patternFeatures;r<a.length;r+=1){var i=a[r];this.addFeature(i,i.geometry,i.index,t,n)}},ts.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ts.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ts.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_o),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},ts.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ts.prototype.addFeature=function(e,t,n,r,a){for(var i=0,o=Yo(t,500);i<o.length;i+=1){for(var s=o[i],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var h=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),f=h.vertexLength,d=[],p=[],m=0,v=s;m<v.length;m+=1){var y=v[m];if(0!==y.length){y!==s[0]&&p.push(d.length/2);var g=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),_=g.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(_+y.length-1,_),d.push(y[0].x),d.push(y[0].y);for(var b=1;b<y.length;b++)this.layoutVertexArray.emplaceBack(y[b].x,y[b].y),this.indexArray2.emplaceBack(_+b-1,_+b),d.push(y[b].x),d.push(y[b].y);g.vertexLength+=y.length,g.primitiveLength+=y.length}}for(var x=bo(d,p),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(f+x[w],f+x[w+1],f+x[w+2]);h.vertexLength+=u,h.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,a,r)},Nr("FillBucket",ts,{omit:["layers","patternFeatures"]});var ns=new ya({"fill-sort-key":new da(Se.layout_fill["fill-sort-key"])}),rs={paint:new ya({"fill-antialias":new fa(Se.paint_fill["fill-antialias"]),"fill-opacity":new da(Se.paint_fill["fill-opacity"]),"fill-color":new da(Se.paint_fill["fill-color"]),"fill-outline-color":new da(Se.paint_fill["fill-outline-color"]),"fill-translate":new fa(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new fa(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new pa(Se.paint_fill["fill-pattern"])}),layout:ns},as=function(e){function t(t){e.call(this,t,rs)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(t,n){e.prototype.recalculate.call(this,t,n);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new ts(e)},t.prototype.queryRadius=function(){return Ki(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,a,i,o){return Bi(Zi(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i.angle,o),r)},t.prototype.isTileClipped=function(){return!0},t}(ga),is=wa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,os=ss;function ss(e,t,n,r,a){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=a,e.readFields(us,this,t)}function us(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],a=t._values[e.readVarint()];t.properties[r]=a}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function ls(e){for(var t,n,r=0,a=0,i=e.length,o=i-1;a<i;o=a++)r+=((n=e[o]).x-(t=e[a]).x)*(t.y+n.y);return r}ss.types=["Unknown","Point","LineString","Polygon"],ss.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,s=0,u=[];e.pos<n;){if(i<=0){var l=e.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=e.readSVarint(),s+=e.readSVarint(),1===r&&(t&&u.push(t),t=[]),t.push(new a(o,s));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&u.push(t),u},ss.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,a=0,i=0,o=1/0,s=-1/0,u=1/0,l=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(a+=e.readSVarint())<o&&(o=a),a>s&&(s=a),(i+=e.readSVarint())<u&&(u=i),i>l&&(l=i);else if(7!==n)throw new Error("unknown command "+n)}return[o,u,s,l]},ss.prototype.toGeoJSON=function(e,t,n){var r,a,i=this.extent*Math.pow(2,n),o=this.extent*e,s=this.extent*t,u=this.loadGeometry(),l=ss.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+o)/i-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/i)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<u.length;r++)h[r]=u[r][0];c(u=h);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,a=[],i=0;i<t;i++){var o=ls(e[i]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&a.push(n),n=[e[i]]):n.push(e[i]))}return n&&a.push(n),a}(u),r=0;r<u.length;r++)for(a=0;a<u[r].length;a++)c(u[r][a])}1===u.length?u=u[0]:l="Multi"+l;var f={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f};var cs=hs;function hs(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(fs,this,t),this.length=this._features.length}function fs(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}function ds(e,t,n){if(3===e){var r=new cs(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}hs.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new os(this._pbf,t,this.extent,this._keys,this._values)};var ps={VectorTile:function(e,t){this.layers=e.readFields(ds,{},t)},VectorTileFeature:os,VectorTileLayer:cs},ms=ps.VectorTileFeature.types,vs=Math.pow(2,13);function ys(e,t,n,r,a,i,o,s){e.emplaceBack(t,n,2*Math.floor(r*vs)+o,a*vs*2,i*vs*2,Math.round(s))}var gs=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ia,this.indexArray=new Fa,this.programConfigurations=new Ei(is,e.layers,e.zoom),this.segments=new ri,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};function _s(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}gs.prototype.populate=function(e,t,n){this.features=[],this.hasPattern=$o("fill-extrusion",this.layers,t);for(var r=0,a=e;r<a.length;r+=1){var i=a[r],o=i.feature,s=i.id,u=i.index,l=i.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,h={type:o.type,id:s,properties:o.properties,geometry:c?Ni(o):[]};if(this.layers[0]._featureFilter.filter(new ra(this.zoom),h,n)){var f={id:s,sourceLayerIndex:l,index:u,geometry:c?h.geometry:Ni(o),properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(f.id=o.id),this.hasPattern?this.features.push(es("fill-extrusion",this.layers,f,this.zoom,t)):this.addFeature(f,f.geometry,u,n,{}),t.featureIndex.insert(o,f.geometry,u,l,this.index,!0)}}},gs.prototype.addFeatures=function(e,t,n){for(var r=0,a=this.features;r<a.length;r+=1){var i=a[r];this.addFeature(i,i.geometry,i.index,t,n)}},gs.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},gs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},gs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},gs.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,is),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},gs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},gs.prototype.addFeature=function(e,t,n,r,a){for(var i=0,o=Yo(t,500);i<o.length;i+=1){for(var s=o[i],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),f=0,d=s;f<d.length;f+=1){var p=d[f];if(0!==p.length&&!((O=p).every((function(e){return e.x<0}))||O.every((function(e){return e.x>8192}))||O.every((function(e){return e.y<0}))||O.every((function(e){return e.y>8192}))))for(var m=0,v=0;v<p.length;v++){var y=p[v];if(v>=1){var g=p[v-1];if(!_s(y,g)){h.vertexLength+4>ri.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=y.sub(g)._perp()._unit(),b=g.dist(y);m+b>32768&&(m=0),ys(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,0,m),ys(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,1,m),ys(this.layoutVertexArray,g.x,g.y,_.x,_.y,0,0,m+=b),ys(this.layoutVertexArray,g.x,g.y,_.x,_.y,0,1,m);var x=h.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),h.vertexLength+=4,h.primitiveLength+=2}}}}if(h.vertexLength+u>ri.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===ms[e.type]){for(var w=[],k=[],C=h.vertexLength,S=0,I=s;S<I.length;S+=1){var D=I[S];if(0!==D.length){D!==s[0]&&k.push(w.length/2);for(var A=0;A<D.length;A++){var T=D[A];ys(this.layoutVertexArray,T.x,T.y,0,0,1,1,0),w.push(T.x),w.push(T.y)}}}for(var E=bo(w,k),R=0;R<E.length;R+=3)this.indexArray.emplaceBack(C+E[R],C+E[R+2],C+E[R+1]);h.primitiveLength+=E.length/3,h.vertexLength+=u}}var O;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,a,r)},Nr("FillExtrusionBucket",gs,{omit:["layers","features"]});var bs={paint:new ya({"fill-extrusion-opacity":new fa(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new da(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fa(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fa(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new pa(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new da(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new da(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fa(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},xs=function(e){function t(t){e.call(this,t,bs)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(e){return new gs(e)},t.prototype.queryRadius=function(){return Ki(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,s,u){var l=Zi(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(t,n),h=this.paint.get("fill-extrusion-base").evaluate(t,n),f=function(e,t,n,r){for(var i=[],o=0,s=e;o<s.length;o+=1){var u=s[o],l=[u.x,u.y,0,1];ao(l,l,t),i.push(new a(l[0]/l[3],l[1]/l[3]))}return i}(l,u),d=function(e,t,n,r){for(var i=[],o=[],s=r[8]*t,u=r[9]*t,l=r[10]*t,c=r[11]*t,h=r[8]*n,f=r[9]*n,d=r[10]*n,p=r[11]*n,m=0,v=e;m<v.length;m+=1){for(var y=[],g=[],_=0,b=v[m];_<b.length;_+=1){var x=b[_],w=x.x,k=x.y,C=r[0]*w+r[4]*k+r[12],S=r[1]*w+r[5]*k+r[13],I=r[2]*w+r[6]*k+r[14],D=r[3]*w+r[7]*k+r[15],A=I+l,T=D+c,E=C+h,R=S+f,O=I+d,M=D+p,N=new a((C+s)/T,(S+u)/T);N.z=A/T,y.push(N);var P=new a(E/M,R/M);P.z=O/M,g.push(P)}i.push(y),o.push(g)}return[i,o]}(r,h,c,u);return function(e,t,n){var r=1/0;Bi(n,t)&&(r=ks(n,t[0]));for(var a=0;a<t.length;a++)for(var i=t[a],o=e[a],s=0;s<i.length-1;s++){var u=i[s],l=[u,i[s+1],o[s+1],o[s],u];Li(n,l)&&(r=Math.min(r,ks(n,l)))}return r!==1/0&&r}(d[0],d[1],f)},t}(ga);function ws(e,t){return e.x*t.x+e.y*t.y}function ks(e,t){if(1===e.length){for(var n,r=0,a=t[r++];!n||a.equals(n);)if(!(n=t[r++]))return 1/0;for(;r<t.length;r++){var i=t[r],o=e[0],s=n.sub(a),u=i.sub(a),l=o.sub(a),c=ws(s,s),h=ws(s,u),f=ws(u,u),d=ws(l,s),p=ws(l,u),m=c*f-h*h,v=(f*d-h*p)/m,y=(c*p-h*d)/m,g=a.z*(1-v-y)+n.z*v+i.z*y;if(isFinite(g))return g}return 1/0}for(var _=1/0,b=0,x=t;b<x.length;b+=1)_=Math.min(_,x[b].z);return _}var Cs=wa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ss=ps.VectorTileFeature.types,Is=Math.cos(Math.PI/180*37.5),Ds=Math.pow(2,14)/.5,As=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Da,this.indexArray=new Fa,this.programConfigurations=new Ei(Cs,e.layers,e.zoom),this.segments=new ri,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};As.prototype.populate=function(e,t,n){this.hasPattern=$o("line",this.layers,t);for(var r=this.layers[0].layout.get("line-sort-key"),a=[],i=0,o=e;i<o.length;i+=1){var s=o[i],u=s.feature,l=s.id,c=s.index,h=s.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d={type:u.type,id:l,properties:u.properties,geometry:f?Ni(u):[]};if(this.layers[0]._featureFilter.filter(new ra(this.zoom),d,n)){f||(d.geometry=Ni(u));var p=r?r.evaluate(d,{},n):void 0;a.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:h,index:c,geometry:d.geometry,patterns:{},sortKey:p})}}r&&a.sort((function(e,t){return e.sortKey-t.sortKey}));for(var m=0,v=a;m<v.length;m+=1){var y=v[m],g=y.geometry,_=y.index,b=y.sourceLayerIndex;if(this.hasPattern){var x=es("line",this.layers,y,this.zoom,t);this.patternFeatures.push(x)}else this.addFeature(y,g,_,n,{});t.featureIndex.insert(e[_].feature,g,_,b,this.index)}},As.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},As.prototype.addFeatures=function(e,t,n){for(var r=0,a=this.patternFeatures;r<a.length;r+=1){var i=a[r];this.addFeature(i,i.geometry,i.index,t,n)}},As.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},As.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},As.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Cs),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},As.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},As.prototype.addFeature=function(e,t,n,r,a){for(var i=this.layers[0].layout,o=i.get("line-join").evaluate(e,{}),s=i.get("line-cap"),u=i.get("line-miter-limit"),l=i.get("line-round-limit"),c=0,h=t;c<h.length;c+=1)this.addLine(h[c],e,o,s,u,l);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,a,r)},As.prototype.addLine=function(e,t,n,r,a,i){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+t.properties.mapbox_clip_start,this.clipEnd=+t.properties.mapbox_clip_end;for(var o=0;o<e.length-1;o++)this.totalDistance+=e[o].dist(e[o+1]);this.updateScaledDistance()}for(var s="Polygon"===Ss[t.type],u=e.length;u>=2&&e[u-1].equals(e[u-2]);)u--;for(var l=0;l<u-1&&e[l].equals(e[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===n&&(a=1.05);var c,h=this.overscaling<=16?122880/(512*this.overscaling):0,f=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),d=void 0,p=void 0,m=void 0,v=void 0;this.e1=this.e2=-1,s&&(v=e[l].sub(c=e[u-2])._unit()._perp());for(var y=l;y<u;y++)if(!(p=y===u-1?s?e[l+1]:void 0:e[y+1])||!e[y].equals(p)){v&&(m=v),c&&(d=c),c=e[y],v=p?p.sub(c)._unit()._perp():m;var g=(m=m||v).add(v);0===g.x&&0===g.y||g._unit();var _=m.x*v.x+m.y*v.y,b=g.x*v.x+g.y*v.y,x=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),k=b<Is&&d&&p,C=m.x*v.y-m.y*v.x>0;if(k&&y>l){var S=c.dist(d);if(S>2*h){var I=c.sub(c.sub(d)._mult(h/S)._round());this.updateDistance(d,I),this.addCurrentVertex(I,m,0,0,f),d=I}}var D=d&&p,A=D?n:s?"butt":r;if(D&&"round"===A&&(x<i?A="miter":x<=2&&(A="fakeround")),"miter"===A&&x>a&&(A="bevel"),"bevel"===A&&(x>2&&(A="flipbevel"),x<a&&(A="miter")),d&&this.updateDistance(d,c),"miter"===A)g._mult(x),this.addCurrentVertex(c,g,0,0,f);else if("flipbevel"===A){if(x>100)g=v.mult(-1);else{var T=x*m.add(v).mag()/m.sub(v).mag();g._perp()._mult(T*(C?-1:1))}this.addCurrentVertex(c,g,0,0,f),this.addCurrentVertex(c,g.mult(-1),0,0,f)}else if("bevel"===A||"fakeround"===A){var E=-Math.sqrt(x*x-1),R=C?E:0,O=C?0:E;if(d&&this.addCurrentVertex(c,m,R,O,f),"fakeround"===A)for(var M=Math.round(180*w/Math.PI/20),N=1;N<M;N++){var P=N/M;if(.5!==P){var F=P-.5;P+=P*F*(P-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*F*F+(.848013+_*(.215638*_-1.06021)))}var L=v.sub(m)._mult(P)._add(m)._unit()._mult(C?-1:1);this.addHalfVertex(c,L.x,L.y,!1,C,0,f)}p&&this.addCurrentVertex(c,v,-R,-O,f)}else if("butt"===A)this.addCurrentVertex(c,g,0,0,f);else if("square"===A){var z=d?1:-1;this.addCurrentVertex(c,g,z,z,f)}else"round"===A&&(d&&(this.addCurrentVertex(c,m,0,0,f),this.addCurrentVertex(c,m,1,1,f,!0)),p&&(this.addCurrentVertex(c,v,-1,-1,f,!0),this.addCurrentVertex(c,v,0,0,f)));if(k&&y<u-1){var B=c.dist(p);if(B>2*h){var W=c.add(p.sub(c)._mult(h/B)._round());this.updateDistance(c,W),this.addCurrentVertex(W,v,0,0,f),c=W}}}}},As.prototype.addCurrentVertex=function(e,t,n,r,a,i){void 0===i&&(i=!1);var o=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,i,!1,n,a),this.addHalfVertex(e,o,s,i,!0,-r,a),this.distance>Ds/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,t,n,r,a,i))},As.prototype.addHalfVertex=function(e,t,n,r,a,i,o){var s=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((e.x<<1)+(r?1:0),(e.y<<1)+(a?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===i?0:i<0?-1:1)|(63&s)<<2,s>>6);var u=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),o.primitiveLength++),a?this.e2=u:this.e1=u},As.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Ds-1):this.distance},As.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},Nr("LineBucket",As,{omit:["layers","patternFeatures"]});var Ts=new ya({"line-cap":new fa(Se.layout_line["line-cap"]),"line-join":new da(Se.layout_line["line-join"]),"line-miter-limit":new fa(Se.layout_line["line-miter-limit"]),"line-round-limit":new fa(Se.layout_line["line-round-limit"]),"line-sort-key":new da(Se.layout_line["line-sort-key"])}),Es={paint:new ya({"line-opacity":new da(Se.paint_line["line-opacity"]),"line-color":new da(Se.paint_line["line-color"]),"line-translate":new fa(Se.paint_line["line-translate"]),"line-translate-anchor":new fa(Se.paint_line["line-translate-anchor"]),"line-width":new da(Se.paint_line["line-width"]),"line-gap-width":new da(Se.paint_line["line-gap-width"]),"line-offset":new da(Se.paint_line["line-offset"]),"line-blur":new da(Se.paint_line["line-blur"]),"line-dasharray":new ma(Se.paint_line["line-dasharray"]),"line-pattern":new pa(Se.paint_line["line-pattern"]),"line-gradient":new va(Se.paint_line["line-gradient"])}),layout:Ts},Rs=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(t,n){return n=new ra(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),e.prototype.possiblyEvaluate.call(this,t,n)},t.prototype.evaluate=function(t,n,r,a){return n=c({},n,{zoom:Math.floor(n.zoom)}),e.prototype.evaluate.call(this,t,n,r,a)},t}(da))(Es.paint.properties["line-width"].specification);Rs.useIntegerZoom=!0;var Os=function(e){function t(t){e.call(this,t,Es)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(e){"line-gradient"===e&&this._updateGradient()},t.prototype._updateGradient=function(){this.gradient=mo(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},t.prototype.recalculate=function(t,n){e.prototype.recalculate.call(this,t,n),this.paint._values["line-floorwidth"]=Rs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new As(e)},t.prototype.queryRadius=function(e){var t=e,n=Ms(Xi("line-width",this,t),Xi("line-gap-width",this,t)),r=Xi("line-offset",this,t);return n/2+Math.abs(r)+Ki(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,s){var u=Zi(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),l=s/2*Ms(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),c=this.paint.get("line-offset").evaluate(t,n);return c&&(r=function(e,t){for(var n=[],r=new a(0,0),i=0;i<e.length;i++){for(var o=e[i],s=[],u=0;u<o.length;u++){var l=o[u],c=o[u+1],h=0===u?r:l.sub(o[u-1])._unit()._perp(),f=u===o.length-1?r:c.sub(l)._unit()._perp(),d=h._add(f)._unit();d._mult(1/(d.x*f.x+d.y*f.y)),s.push(d._mult(t)._add(l))}n.push(s)}return n}(r,c*s)),function(e,t,n){for(var r=0;r<t.length;r++){var a=t[r];if(e.length>=3)for(var i=0;i<a.length;i++)if(Gi(e,a[i]))return!0;if(Wi(e,a,n))return!0}return!1}(u,r,l)},t.prototype.isTileClipped=function(){return!0},t}(ga);function Ms(e,t){return t>0?t+2*e:e}var Ns=wa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ps=wa([{name:"a_projected_pos",components:3,type:"Float32"}],4),Fs=(wa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),wa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Ls=(wa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),wa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),zs=wa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Bs(e,t,n){return e.sections.forEach((function(e){e.text=function(e,t,n){var r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),na.applyArabicShaping&&(e=na.applyArabicShaping(e)),e}(e.text,t,n)})),e}wa([{name:"triangle",components:3,type:"Uint16"}]),wa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),wa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),wa([{type:"Float32",name:"offsetX"}]),wa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ws={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},qs=function(e,t,n,r,a){var i,o,s=8*a-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?a-1:0,f=n?-1:1,d=e[t+h];for(h+=f,i=d&(1<<-c)-1,d>>=-c,c+=s;c>0;i=256*i+e[t+h],h+=f,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=r;c>0;o=256*o+e[t+h],h+=f,c-=8);if(0===i)i=1-l;else{if(i===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),i-=l}return(d?-1:1)*o*Math.pow(2,i-r)},Vs=function(e,t,n,r,a,i){var o,s,u,l=8*i-a-1,c=(1<<l)-1,h=c>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*u-1)*Math.pow(2,a),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;e[n+d]=255&s,d+=p,s/=256,a-=8);for(o=o<<a|s,l+=a;l>0;e[n+d]=255&o,d+=p,o/=256,l-=8);e[n+d-p]|=128*m},Us=js;function js(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}js.Varint=0,js.Fixed64=1,js.Bytes=2,js.Fixed32=5;var Hs="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Gs(e){return e.type===js.Bytes?e.readVarint()+e.pos:e.pos+1}function Js(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Xs(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var a=n.pos-1;a>=e;a--)n.buf[a+r]=n.buf[a]}function Ks(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Zs(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Ys(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Qs(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function $s(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function eu(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function tu(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function nu(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function ru(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function au(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function iu(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function ou(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function su(e,t,n){1===e&&n.readMessage(uu,t)}function uu(e,t,n){if(3===e){var r=n.readMessage(lu,{}),a=r.width,i=r.height,o=r.left,s=r.top,u=r.advance;t.push({id:r.id,bitmap:new ho({width:a+6,height:i+6},r.bitmap),metrics:{width:a,height:i,left:o,top:s,advance:u}})}}function lu(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function cu(e){for(var t=0,n=0,r=0,a=e;r<a.length;r+=1){var i=a[r];t+=i.w*i.h,n=Math.max(n,i.w)}e.sort((function(e,t){return t.h-e.h}));for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}],s=0,u=0,l=0,c=e;l<c.length;l+=1)for(var h=c[l],f=o.length-1;f>=0;f--){var d=o[f];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,u=Math.max(u,h.y+h.h),s=Math.max(s,h.x+h.w),h.w===d.w&&h.h===d.h){var p=o.pop();f<o.length&&(o[f]=p)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(o.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}return{w:s,h:u,fill:t/(s*u)||0}}js.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),a=r>>3,i=this.pos;this.type=7&r,e(a,t,this),this.pos===i&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=au(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ou(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=au(this.buf,this.pos)+4294967296*au(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=au(this.buf,this.pos)+4294967296*ou(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=qs(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=qs(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,a,i=n.buf;if(r=(112&(a=i[n.pos++]))>>4,a<128)return Js(e,r,t);if(r|=(127&(a=i[n.pos++]))<<3,a<128)return Js(e,r,t);if(r|=(127&(a=i[n.pos++]))<<10,a<128)return Js(e,r,t);if(r|=(127&(a=i[n.pos++]))<<17,a<128)return Js(e,r,t);if(r|=(127&(a=i[n.pos++]))<<24,a<128)return Js(e,r,t);if(r|=(1&(a=i[n.pos++]))<<31,a<128)return Js(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Hs?function(e,t,n){return Hs.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",a=t;a<n;){var i,o,s,u=e[a],l=null,c=u>239?4:u>223?3:u>191?2:1;if(a+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(i=e[a+1]))&&(l=(31&u)<<6|63&i)<=127&&(l=null):3===c?(o=e[a+2],128==(192&(i=e[a+1]))&&128==(192&o)&&((l=(15&u)<<12|(63&i)<<6|63&o)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=e[a+2],s=e[a+3],128==(192&(i=e[a+1]))&&128==(192&o)&&128==(192&s)&&((l=(15&u)<<18|(63&i)<<12|(63&o)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),a+=c}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==js.Bytes)return e.push(this.readVarint(t));var n=Gs(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==js.Bytes)return e.push(this.readSVarint());var t=Gs(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==js.Bytes)return e.push(this.readBoolean());var t=Gs(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==js.Bytes)return e.push(this.readFloat());var t=Gs(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==js.Bytes)return e.push(this.readDouble());var t=Gs(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==js.Bytes)return e.push(this.readFixed32());var t=Gs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==js.Bytes)return e.push(this.readSFixed32());var t=Gs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==js.Bytes)return e.push(this.readFixed64());var t=Gs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==js.Bytes)return e.push(this.readSFixed64());var t=Gs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===js.Varint)for(;this.buf[this.pos++]>127;);else if(t===js.Bytes)this.pos=this.readVarint()+this.pos;else if(t===js.Fixed32)this.pos+=4;else{if(t!==js.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),iu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),iu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),iu(this.buf,-1&e,this.pos),iu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),iu(this.buf,-1&e,this.pos),iu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,a,i=0;i<t.length;i++){if((r=t.charCodeAt(i))>55295&&r<57344){if(!a){r>56319||i+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):a=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,a=r;continue}r=a-55296<<10|r-56320|65536,a=null}else a&&(e[n++]=239,e[n++]=191,e[n++]=189,a=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Xs(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Vs(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Vs(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&Xs(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,js.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Ks,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Zs,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,$s,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Ys,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Qs,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,eu,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,tu,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,nu,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,ru,t)},writeBytesField:function(e,t){this.writeTag(e,js.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,js.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,js.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,js.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,js.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,js.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,js.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,js.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,js.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,js.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var hu=function(e,t){var n=t.pixelRatio,r=t.version,a=t.stretchX,i=t.stretchY,o=t.content;this.paddedRect=e,this.pixelRatio=n,this.stretchX=a,this.stretchY=i,this.content=o,this.version=r},fu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};fu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},fu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},fu.tlbr.get=function(){return this.tl.concat(this.br)},fu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(hu.prototype,fu);var du=function(e,t){var n={},r={};this.haveRenderCallbacks=[];var a=[];this.addImages(e,n,a),this.addImages(t,r,a);var i=cu(a),o=new fo({width:i.w||1,height:i.h||1});for(var s in e){var u=e[s],l=n[s].paddedRect;fo.copy(u.data,o,{x:0,y:0},{x:l.x+1,y:l.y+1},u.data)}for(var c in t){var h=t[c],f=r[c].paddedRect,d=f.x+1,p=f.y+1,m=h.data.width,v=h.data.height;fo.copy(h.data,o,{x:0,y:0},{x:d,y:p},h.data),fo.copy(h.data,o,{x:0,y:v-1},{x:d,y:p-1},{width:m,height:1}),fo.copy(h.data,o,{x:0,y:0},{x:d,y:p+v},{width:m,height:1}),fo.copy(h.data,o,{x:m-1,y:0},{x:d-1,y:p},{width:1,height:v}),fo.copy(h.data,o,{x:0,y:0},{x:d+m,y:p},{width:1,height:v})}this.image=o,this.iconPositions=n,this.patternPositions=r};du.prototype.addImages=function(e,t,n){for(var r in e){var a=e[r],i={x:0,y:0,w:a.data.width+2,h:a.data.height+2};n.push(i),t[r]=new hu(i,a),a.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},du.prototype.patchUpdatedImages=function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)},du.prototype.patchUpdatedImage=function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var r=e.tl;n.update(t.data,void 0,{x:r[0],y:r[1]})}},Nr("ImagePosition",hu),Nr("ImageAtlas",du);var pu={horizontal:1,vertical:2,horizontalOnly:3},mu=function(){this.scale=1,this.fontStack="",this.imageName=null};mu.forText=function(e,t){var n=new mu;return n.scale=e||1,n.fontStack=t,n},mu.forImage=function(e){var t=new mu;return t.imageName=e,t};var vu=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function yu(e,t,n,r,a,i,o,s,u,l,c,h,f,d,p,m){var v,y=vu.fromFeature(e,a);h===pu.vertical&&y.verticalizePunctuation();var g=na.processBidirectionalText,_=na.processStyledBidirectionalText;if(g&&1===y.sections.length){v=[];for(var b=0,x=g(y.toString(),Cu(y,l,i,t,r,d,p));b<x.length;b+=1){var w=x[b],k=new vu;k.text=w,k.sections=y.sections;for(var C=0;C<w.length;C++)k.sectionIndex.push(0);v.push(k)}}else if(_){v=[];for(var S=0,I=_(y.text,y.sectionIndex,Cu(y,l,i,t,r,d,p));S<I.length;S+=1){var D=I[S],A=new vu;A.text=D[0],A.sectionIndex=D[1],A.sections=y.sections,v.push(A)}}else v=function(e,t){for(var n=[],r=e.text,a=0,i=0,o=t;i<o.length;i+=1){var s=o[i];n.push(e.substring(a,s)),a=s}return a<r.length&&n.push(e.substring(a,r.length)),n}(y,Cu(y,l,i,t,r,d,p));var T=[],E={positionedLines:T,text:y.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(e,t,n,r,a,i,o,s,u,l,c,h){for(var f=0,d=-17,p=0,m=0,v="right"===s?1:"left"===s?0:.5,y=0,g=0,_=a;g<_.length;g+=1){var b=_[g];b.trim();var x=b.getMaxScale(),w=24*(x-1),k={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=k;var C=k.positionedGlyphs,S=0;if(b.length()){for(var I=0;I<b.length();I++){var D=b.getSection(I),A=b.getSectionIndex(I),T=b.getCharCode(I),E=0,R=null,O=null,M=null,N=24,P=!(u===pu.horizontal||!c&&!Ur(T)||c&&(gu[T]||(j=T,qr.Arabic(j)||qr["Arabic Supplement"](j)||qr["Arabic Extended-A"](j)||qr["Arabic Presentation Forms-A"](j)||qr["Arabic Presentation Forms-B"](j))));if(D.imageName){var F=r[D.imageName];if(!F)continue;M=D.imageName,e.iconsInText=e.iconsInText||!0,O=F.paddedRect;var L=F.displaySize;D.scale=24*D.scale/h,E=w+(24-L[1]*D.scale),N=(R={width:L[0],height:L[1],left:1,top:-3,advance:P?L[1]:L[0]}).advance;var z=P?L[0]*D.scale-24*x:L[1]*D.scale-24*x;z>0&&z>S&&(S=z)}else{var B=n[D.fontStack],W=B&&B[T];if(W&&W.rect)O=W.rect,R=W.metrics;else{var q=t[D.fontStack],V=q&&q[T];if(!V)continue;R=V.metrics}E=24*(x-D.scale)}P?(e.verticalizable=!0,C.push({glyph:T,imageName:M,x:f,y:d+E,vertical:P,scale:D.scale,fontStack:D.fontStack,sectionIndex:A,metrics:R,rect:O}),f+=N*D.scale+l):(C.push({glyph:T,imageName:M,x:f,y:d+E,vertical:P,scale:D.scale,fontStack:D.fontStack,sectionIndex:A,metrics:R,rect:O}),f+=R.advance*D.scale+l)}0!==C.length&&(p=Math.max(f-l,p),Iu(C,0,C.length-1,v,S)),f=0;var U=i*x+S;k.lineOffset=Math.max(S,w),d+=U,m=Math.max(U,m),++y}else d+=i,++y}var j,H=d- -17,G=Su(o),J=G.horizontalAlign,X=G.verticalAlign;(function(e,t,n,r,a,i,o,s,u){var l,c=(t-n)*a;l=i!==o?-s*r- -17:(-r*u+.5)*o;for(var h=0,f=e;h<f.length;h+=1)for(var d=0,p=f[h].positionedGlyphs;d<p.length;d+=1){var m=p[d];m.x+=c,m.y+=l}})(e.positionedLines,v,J,X,p,m,i,H,a.length),e.top+=-X*H,e.bottom=e.top+H,e.left+=-J*p,e.right=e.left+p}(E,t,n,r,v,o,s,u,h,l,f,m),!function(e){for(var t=0,n=e;t<n.length;t+=1)if(0!==n[t].positionedGlyphs.length)return!1;return!0}(T)&&E}vu.fromFeature=function(e,t){for(var n=new vu,r=0;r<e.sections.length;r++){var a=e.sections[r];a.image?n.addImageSection(a):n.addTextSection(a,t)}return n},vu.prototype.length=function(){return this.text.length},vu.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},vu.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},vu.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},vu.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n+1)||null,a=e.charCodeAt(n-1)||null;t+=r&&jr(r)&&!Ws[e[n+1]]||a&&jr(a)&&!Ws[e[n-1]]||!Ws[e[n]]?e[n]:Ws[e[n]]}return t}(this.text)},vu.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&gu[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=e&&gu[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)},vu.prototype.substring=function(e,t){var n=new vu;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n},vu.prototype.toString=function(){return this.text},vu.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce((function(t,n){return Math.max(t,e.sections[n].scale)}),0)},vu.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(mu.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,r=0;r<e.text.length;++r)this.sectionIndex.push(n)},vu.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(0!==t.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(mu.forImage(t)),this.sectionIndex.push(this.sections.length-1)):x("Reached maximum number of images 6401")}else x("Can't add FormattedSection with an empty image.")},vu.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var gu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_u={};function bu(e,t,n,r,a,i){if(t.imageName){var o=r[t.imageName];return o?o.displaySize[0]*t.scale*24/i+a:0}var s=n[t.fontStack],u=s&&s[e];return u?u.metrics.advance*t.scale+a:0}function xu(e,t,n,r){var a=Math.pow(e-t,2);return r?e<t?a/2:2*a:a+Math.abs(n)*n}function wu(e,t,n){var r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function ku(e,t,n,r,a,i){for(var o=null,s=xu(t,n,a,i),u=0,l=r;u<l.length;u+=1){var c=l[u],h=xu(t-c.x,n,a,i)+c.badness;h<=s&&(o=c,s=h)}return{index:e,x:t,priorBreak:o,badness:s}}function Cu(e,t,n,r,a,i,o){if("point"!==i)return[];if(!e)return[];for(var s,u=[],l=function(e,t,n,r,a,i){for(var o=0,s=0;s<e.length();s++){var u=e.getSection(s);o+=bu(e.getCharCode(s),u,r,a,t,i)}return o/Math.max(1,Math.ceil(o/n))}(e,t,n,r,a,o),c=e.text.indexOf("\u200b")>=0,h=0,f=0;f<e.length();f++){var d=e.getSection(f),p=e.getCharCode(f);if(gu[p]||(h+=bu(p,d,r,a,t,o)),f<e.length()-1){var m=!((s=p)<11904||!(qr["Bopomofo Extended"](s)||qr.Bopomofo(s)||qr["CJK Compatibility Forms"](s)||qr["CJK Compatibility Ideographs"](s)||qr["CJK Compatibility"](s)||qr["CJK Radicals Supplement"](s)||qr["CJK Strokes"](s)||qr["CJK Symbols and Punctuation"](s)||qr["CJK Unified Ideographs Extension A"](s)||qr["CJK Unified Ideographs"](s)||qr["Enclosed CJK Letters and Months"](s)||qr["Halfwidth and Fullwidth Forms"](s)||qr.Hiragana(s)||qr["Ideographic Description Characters"](s)||qr["Kangxi Radicals"](s)||qr["Katakana Phonetic Extensions"](s)||qr.Katakana(s)||qr["Vertical Forms"](s)||qr["Yi Radicals"](s)||qr["Yi Syllables"](s)));(_u[p]||m||d.imageName)&&u.push(ku(f+1,h,l,u,wu(p,e.getCharCode(f+1),m&&c),!1))}}return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(ku(e.length(),h,l,u,0,!0))}function Su(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Iu(e,t,n,r,a){if(r||a)for(var i=e[n],o=(e[n].x+i.metrics.advance*i.scale)*r,s=t;s<=n;s++)e[s].x-=o,e[s].y+=a}function Du(e,t,n,r,a,i){var o,s=e.image;if(s.content){var u=s.content,l=s.pixelRatio||1;o=[u[0]/l,u[1]/l,s.displaySize[0]-u[2]/l,s.displaySize[1]-u[3]/l]}var c,h,f,d,p=t.left*i,m=t.right*i;"width"===n||"both"===n?(d=a[0]+p-r[3],h=a[0]+m+r[1]):h=(d=a[0]+(p+m-s.displaySize[0])/2)+s.displaySize[0];var v=t.top*i,y=t.bottom*i;return"height"===n||"both"===n?(c=a[1]+v-r[0],f=a[1]+y+r[2]):f=(c=a[1]+(v+y-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:f,left:d,collisionPadding:o}}_u[10]=!0,_u[32]=!0,_u[38]=!0,_u[40]=!0,_u[41]=!0,_u[43]=!0,_u[45]=!0,_u[47]=!0,_u[173]=!0,_u[183]=!0,_u[8203]=!0,_u[8208]=!0,_u[8211]=!0,_u[8231]=!0;var Au=function(e){function t(t,n,r,a){e.call(this,t,n),this.angle=r,void 0!==a&&(this.segment=a)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(a);function Tu(e,t){var n=t.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new ra(e+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,a=n.interpolationType,i=0;i<r.length&&r[i]<=e;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var s=r[i],u=r[o];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:a}:{kind:"camera",minZoom:s,maxZoom:u,minSize:n.evaluate(new ra(s)),maxSize:n.evaluate(new ra(u)),interpolationType:a}}function Eu(e,t,n){var r=t.uSize,a=n.lowerSize;return"source"===e.kind?a/128:"composite"===e.kind?Wt(a/128,n.upperSize/128,t.uSizeT):r}function Ru(e,t){var n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){var a=e.interpolationType,i=a?u(tn.interpolationFactor(a,t,e.minZoom,e.maxZoom),0,1):0;"camera"===e.kind?r=Wt(e.minSize,e.maxSize,i):n=i}return{uSizeT:n,uSize:r}}Nr("Anchor",Au);var Ou=Object.freeze({__proto__:null,getSizeData:Tu,evaluateSizeForFeature:Eu,evaluateSizeForZoom:Ru,SIZE_PACK_FACTOR:128});function Mu(e,t,n,r,a){if(void 0===t.segment)return!0;for(var i=t,o=t.segment+1,s=0;s>-n/2;){if(--o<0)return!1;s-=e[o].dist(i),i=e[o]}s+=e[o].dist(e[o+1]),o++;for(var u=[],l=0;s<n/2;){var c=e[o],h=e[o+1];if(!h)return!1;var f=e[o-1].angleTo(c)-c.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>a)return!1;o++,s+=c.dist(h)}return!0}function Nu(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Pu(e,t,n){return e?.6*t*n:0}function Fu(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Lu(e,t,n,r,a,i){for(var o=Pu(n,a,i),s=Fu(n,r)*i,u=0,l=Nu(e)/2,c=0;c<e.length-1;c++){var h=e[c],f=e[c+1],d=h.dist(f);if(u+d>l){var p=(l-u)/d,m=Wt(h.x,f.x,p),v=Wt(h.y,f.y,p),y=new Au(m,v,f.angleTo(h),c);return y._round(),!o||Mu(e,y,s,o,t)?y:void 0}u+=d}}function zu(e,t,n,r,a,i,o,s,u){var l=Pu(r,i,o),c=Fu(r,a),h=c*o,f=0===e[0].x||e[0].x===u||0===e[0].y||e[0].y===u;return t-h<t/4&&(t=h+t/4),function e(t,n,r,a,i,o,s,u,l){for(var c=o/2,h=Nu(t),f=0,d=n-r,p=[],m=0;m<t.length-1;m++){for(var v=t[m],y=t[m+1],g=v.dist(y),_=y.angleTo(v);d+r<f+g;){var b=((d+=r)-f)/g,x=Wt(v.x,y.x,b),w=Wt(v.y,y.y,b);if(x>=0&&x<l&&w>=0&&w<l&&d-c>=0&&d+c<=h){var k=new Au(x,w,_,m);k._round(),a&&!Mu(t,k,o,a,i)||p.push(k)}}f+=g}return u||p.length||s||(p=e(t,f/2,r,a,i,o,s,!0,l)),p}(e,f?t/2*s%t:(c/2+2*i)*o*s%t,t,l,n,h,f,!1,u)}function Bu(e,t,n,r,i){for(var o=[],s=0;s<e.length;s++)for(var u=e[s],l=void 0,c=0;c<u.length-1;c++){var h=u[c],f=u[c+1];h.x<t&&f.x<t||(h.x<t?h=new a(t,h.y+(t-h.x)/(f.x-h.x)*(f.y-h.y))._round():f.x<t&&(f=new a(t,h.y+(t-h.x)/(f.x-h.x)*(f.y-h.y))._round()),h.y<n&&f.y<n||(h.y<n?h=new a(h.x+(n-h.y)/(f.y-h.y)*(f.x-h.x),n)._round():f.y<n&&(f=new a(h.x+(n-h.y)/(f.y-h.y)*(f.x-h.x),n)._round()),h.x>=r&&f.x>=r||(h.x>=r?h=new a(r,h.y+(r-h.x)/(f.x-h.x)*(f.y-h.y))._round():f.x>=r&&(f=new a(r,h.y+(r-h.x)/(f.x-h.x)*(f.y-h.y))._round()),h.y>=i&&f.y>=i||(h.y>=i?h=new a(h.x+(i-h.y)/(f.y-h.y)*(f.x-h.x),i)._round():f.y>=i&&(f=new a(h.x+(i-h.y)/(f.y-h.y)*(f.x-h.x),i)._round()),l&&h.equals(l[l.length-1])||o.push(l=[h]),l.push(f)))))}return o}function Wu(e,t,n,r){var i=[],o=e.image,s=o.pixelRatio,u=o.paddedRect.w-2,l=o.paddedRect.h-2,c=e.right-e.left,h=e.bottom-e.top,f=o.stretchX||[[0,u]],d=o.stretchY||[[0,l]],p=function(e,t){return e+t[1]-t[0]},m=f.reduce(p,0),v=d.reduce(p,0),y=u-m,g=l-v,_=0,b=m,x=0,w=v,k=0,C=y,S=0,I=g;if(o.content&&r){var D=o.content;_=qu(f,0,D[0]),x=qu(d,0,D[1]),b=qu(f,D[0],D[2]),w=qu(d,D[1],D[3]),k=D[0]-_,S=D[1]-x,C=D[2]-D[0]-b,I=D[3]-D[1]-w}var A=function(r,i,u,l){var f=Uu(r.stretch-_,b,c,e.left),d=ju(r.fixed-k,C,r.stretch,m),p=Uu(i.stretch-x,w,h,e.top),y=ju(i.fixed-S,I,i.stretch,v),g=Uu(u.stretch-_,b,c,e.left),D=ju(u.fixed-k,C,u.stretch,m),A=Uu(l.stretch-x,w,h,e.top),T=ju(l.fixed-S,I,l.stretch,v),E=new a(f,p),R=new a(g,p),O=new a(g,A),M=new a(f,A),N=new a(d/s,y/s),P=new a(D/s,T/s),F=t*Math.PI/180;if(F){var L=Math.sin(F),z=Math.cos(F),B=[z,-L,L,z];E._matMult(B),R._matMult(B),M._matMult(B),O._matMult(B)}var W=r.stretch+r.fixed,q=i.stretch+i.fixed;return{tl:E,tr:R,bl:M,br:O,tex:{x:o.paddedRect.x+1+W,y:o.paddedRect.y+1+q,w:u.stretch+u.fixed-W,h:l.stretch+l.fixed-q},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:N,pixelOffsetBR:P,minFontScaleX:C/s/c,minFontScaleY:I/s/h,isSDF:n}};if(r&&(o.stretchX||o.stretchY))for(var T=Vu(f,y,m),E=Vu(d,g,v),R=0;R<T.length-1;R++)for(var O=T[R],M=T[R+1],N=0;N<E.length-1;N++)i.push(A(O,E[N],M,E[N+1]));else i.push(A({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:u+1},{fixed:0,stretch:l+1}));return i}function qu(e,t,n){for(var r=0,a=0,i=e;a<i.length;a+=1){var o=i[a];r+=Math.max(t,Math.min(n,o[1]))-Math.max(t,Math.min(n,o[0]))}return r}function Vu(e,t,n){for(var r=[{fixed:-1,stretch:0}],a=0,i=e;a<i.length;a+=1){var o=i[a],s=o[0],u=o[1],l=r[r.length-1];r.push({fixed:s-l.stretch,stretch:l.stretch}),r.push({fixed:s-l.stretch,stretch:l.stretch+(u-s)})}return r.push({fixed:t+1,stretch:n}),r}function Uu(e,t,n,r){return e/t*n+r}function ju(e,t,n,r){return e-t*n/r}var Hu=function(e,t,n,r,i,o,s,u,l,c){if(this.boxStartIndex=e.length,l){var h=o.top,f=o.bottom,d=o.collisionPadding;d&&(h-=d[1],f+=d[3]);var p=f-h;p>0&&(p=Math.max(10,p),this.circleDiameter=p)}else{var m=o.top*s-u,v=o.bottom*s+u,y=o.left*s-u,g=o.right*s+u,_=o.collisionPadding;if(_&&(y-=_[0]*s,m-=_[1]*s,g+=_[2]*s,v+=_[3]*s),c){var b=new a(y,m),x=new a(g,m),w=new a(y,v),k=new a(g,v),C=c*Math.PI/180;b._rotate(C),x._rotate(C),w._rotate(C),k._rotate(C),y=Math.min(b.x,x.x,w.x,k.x),g=Math.max(b.x,x.x,w.x,k.x),m=Math.min(b.y,x.y,w.y,k.y),v=Math.max(b.y,x.y,w.y,k.y)}e.emplaceBack(t.x,t.y,y,m,g,v,n,r,i)}this.boxEndIndex=e.length},Gu=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=Ju),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function Ju(e,t){return e<t?-1:e>t?1:0}function Xu(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);for(var r=1/0,i=1/0,o=-1/0,s=-1/0,u=e[0],l=0;l<u.length;l++){var c=u[l];(!l||c.x<r)&&(r=c.x),(!l||c.y<i)&&(i=c.y),(!l||c.x>o)&&(o=c.x),(!l||c.y>s)&&(s=c.y)}var h=Math.min(o-r,s-i),f=h/2,d=new Gu([],Ku);if(0===h)return new a(r,i);for(var p=r;p<o;p+=h)for(var m=i;m<s;m+=h)d.push(new Zu(p+f,m+f,f,e));for(var v=function(e){for(var t=0,n=0,r=0,a=e[0],i=0,o=a.length,s=o-1;i<o;s=i++){var u=a[i],l=a[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,t+=3*c}return new Zu(n/t,r/t,0,e)}(e),y=d.length;d.length;){var g=d.pop();(g.d>v.d||!v.d)&&(v=g,n&&console.log("found best %d after %d probes",Math.round(1e4*g.d)/1e4,y)),g.max-v.d<=t||(d.push(new Zu(g.p.x-(f=g.h/2),g.p.y-f,f,e)),d.push(new Zu(g.p.x+f,g.p.y-f,f,e)),d.push(new Zu(g.p.x-f,g.p.y+f,f,e)),d.push(new Zu(g.p.x+f,g.p.y+f,f,e)),y+=4)}return n&&(console.log("num probes: "+y),console.log("best distance: "+v.d)),v.p}function Ku(e,t){return t.max-e.max}function Zu(e,t,n,r){this.p=new a(e,t),this.h=n,this.d=function(e,t){for(var n=!1,r=1/0,a=0;a<t.length;a++)for(var i=t[a],o=0,s=i.length,u=s-1;o<s;u=o++){var l=i[o],c=i[u];l.y>e.y!=c.y>e.y&&e.x<(c.x-l.x)*(e.y-l.y)/(c.y-l.y)+l.x&&(n=!n),r=Math.min(r,ji(e,l,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}Gu.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Gu.prototype.pop=function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},Gu.prototype.peek=function(){return this.data[0]},Gu.prototype._up=function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var a=e-1>>1,i=t[a];if(n(r,i)>=0)break;t[e]=i,e=a}t[e]=r},Gu.prototype._down=function(e){for(var t=this.data,n=this.compare,r=this.length>>1,a=t[e];e<r;){var i=1+(e<<1),o=t[i],s=i+1;if(s<this.length&&n(t[s],o)<0&&(i=s,o=t[s]),n(o,a)>=0)break;t[e]=o,e=i}t[e]=a};var Yu=Number.POSITIVE_INFINITY;function Qu(e,t){return t[1]!==Yu?function(e,t,n){var r=0,a=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":a=n-7;break;case"bottom-right":case"bottom-left":case"bottom":a=7-n}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,a]}(e,t[0],t[1]):function(e,t){var n=0,r=0;t<0&&(t=0);var a=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":r=a-7;break;case"bottom-right":case"bottom-left":r=7-a;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":n=-a;break;case"top-left":case"bottom-left":n=a;break;case"left":n=t;break;case"right":n=-t}return[n,r]}(e,t[0])}function $u(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function el(e,t,n,r,i,o,s,u,l,c,h,f,d,p,m){var v=function(e,t,n,r,i,o,s,u){for(var l=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,c=[],h=0,f=t.positionedLines;h<f.length;h+=1)for(var d=f[h],p=0,m=d.positionedGlyphs;p<m.length;p+=1){var v=m[p];if(v.rect){var y=v.rect||{},g=4,_=!0,b=1,x=0,w=(i||u)&&v.vertical,k=v.metrics.advance*v.scale/2;if(u&&t.verticalizable&&(x=d.lineOffset/2-(v.imageName?-(24-v.metrics.width*v.scale)/2:24*(v.scale-1))),v.imageName){var C=s[v.imageName];_=C.sdf,g=1/(b=C.pixelRatio)}var S=i?[v.x+k,v.y]:[0,0],I=i?[0,0]:[v.x+k+n[0],v.y+n[1]-x],D=[0,0];w&&(D=I,I=[0,0]);var A=(v.metrics.left-g)*v.scale-k+I[0],T=(-v.metrics.top-g)*v.scale+I[1],E=A+y.w*v.scale/b,R=T+y.h*v.scale/b,O=new a(A,T),M=new a(E,T),N=new a(A,R),P=new a(E,R);if(w){var F=new a(-k,k- -17),L=-Math.PI/2,z=12-k,B=new a(22-z,-(v.imageName?z:0)),W=new(Function.prototype.bind.apply(a,[null].concat(D)));O._rotateAround(L,F)._add(B)._add(W),M._rotateAround(L,F)._add(B)._add(W),N._rotateAround(L,F)._add(B)._add(W),P._rotateAround(L,F)._add(B)._add(W)}if(l){var q=Math.sin(l),V=Math.cos(l),U=[V,-q,q,V];O._matMult(U),M._matMult(U),N._matMult(U),P._matMult(U)}var j=new a(0,0),H=new a(0,0);c.push({tl:O,tr:M,bl:N,br:P,tex:y,writingMode:t.writingMode,glyphOffset:S,sectionIndex:v.sectionIndex,isSDF:_,pixelOffsetTL:j,pixelOffsetBR:H,minFontScaleX:0,minFontScaleY:0})}}return c}(0,n,u,i,o,s,r,e.allowVerticalPlacement),y=e.textSizeData,g=null;"source"===y.kind?(g=[128*i.layout.get("text-size").evaluate(s,{})])[0]>32640&&x(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===y.kind&&((g=[128*p.compositeTextSizes[0].evaluate(s,{},m),128*p.compositeTextSizes[1].evaluate(s,{},m)])[0]>32640||g[1]>32640)&&x(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,v,g,u,o,s,c,t,l.lineStartIndex,l.lineLength,d,m);for(var _=0,b=h;_<b.length;_+=1)f[b[_]]=e.text.placedSymbolArray.length-1;return 4*v.length}function tl(e){for(var t in e)return e[t];return null}function nl(e,t,n,r){var a=e.compareText;if(t in a){for(var i=a[t],o=i.length-1;o>=0;o--)if(r.dist(i[o])<n)return!0}else a[t]=[];return a[t].push(r),!1}var rl=ps.VectorTileFeature.types,al=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function il(e,t,n,r,a,i,o,s,u,l,c,h,f){var d=s?Math.min(32640,Math.round(s[0])):0,p=s?Math.min(32640,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*a),i,o,(d<<1)+(u?1:0),p,16*l,16*c,256*h,256*f)}function ol(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function sl(e){for(var t=0,n=e.sections;t<n.length;t+=1)if(Jr(n[t].text))return!0;return!1}var ul=function(e){this.layoutVertexArray=new Ta,this.indexArray=new Fa,this.programConfigurations=e,this.segments=new ri,this.dynamicLayoutVertexArray=new Ea,this.opacityVertexArray=new Ra,this.placedSymbolArray=new Ka};ul.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},ul.prototype.upload=function(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ns.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Ps.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,al,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))},ul.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Nr("SymbolBuffers",ul);var ll=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new ri,this.collisionVertexArray=new Pa};ll.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Fs.members,!0)},ll.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Nr("CollisionBuffers",ll);var cl=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=eo([]),this.placementViewportMatrix=eo([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Tu(this.zoom,t["text-size"]),this.iconSizeData=Tu(this.zoom,t["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),a=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==a&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((function(e){return pu[e]}))),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=e.sourceID};cl.prototype.createArrays=function(){this.text=new ul(new Ei(Ns.members,this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new ul(new Ei(Ns.members,this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new Qa,this.lineVertexArray=new $a,this.symbolInstances=new Ya},cl.prototype.calculateGlyphDependencies=function(e,t,n,r,a){for(var i=0;i<e.length;i++)if(t[e.charCodeAt(i)]=!0,(n||r)&&a){var o=Ws[e.charAt(i)];o&&(t[o.charCodeAt(0)]=!0)}},cl.prototype.populate=function(e,t,n){var r=this.layers[0],a=r.layout,i=a.get("text-font"),o=a.get("text-field"),s=a.get("icon-image"),u=("constant"!==o.value.kind||o.value.value instanceof $e&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),l="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=a.get("symbol-sort-key");if(this.features=[],u||l){for(var h=t.iconDependencies,f=t.glyphDependencies,d=t.availableImages,p=new ra(this.zoom),m=0,v=e;m<v.length;m+=1){var y=v[m],g=y.feature,_=y.id,b=y.index,x=y.sourceLayerIndex,w=r._featureFilter.needGeometry,k={type:g.type,id:_,properties:g.properties,geometry:w?Ni(g):[]};if(r._featureFilter.filter(p,k,n)){w||(k.geometry=Ni(g));var C=void 0;if(u){var S=r.getValueAndResolveTokens("text-field",k,n,d),I=$e.factory(S);sl(I)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ea()||this.hasRTLText&&na.isParsed())&&(C=Bs(I,r,k))}var D=void 0;if(l){var A=r.getValueAndResolveTokens("icon-image",k,n,d);D=A instanceof et?A:et.fromString(A)}if(C||D){var T=this.sortFeaturesByKey?c.evaluate(k,{},n):void 0,E={id:_,text:C,icon:D,index:b,sourceLayerIndex:x,geometry:Ni(g),properties:g.properties,type:rl[g.type],sortKey:T};if(this.features.push(E),D&&(h[D.name]=!0),C){var R=i.evaluate(k,{},n).join(","),O="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(pu.vertical)>=0;for(var M=0,N=C.sections;M<N.length;M+=1){var P=N[M];if(P.image)h[P.image.name]=!0;else{var F=Vr(C.toString()),L=P.fontStack||R,z=f[L]=f[L]||{};this.calculateGlyphDependencies(P.text,z,O,this.allowVerticalPlacement,F)}}}}}}"line"===a.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],a=0;function i(t){r.push(e[t]),a++}function o(e,t,a){var i=n[e];return delete n[e],n[t]=i,r[i].geometry[0].pop(),r[i].geometry[0]=r[i].geometry[0].concat(a[0]),i}function s(e,n,a){var i=t[n];return delete t[n],t[e]=i,r[i].geometry[0].shift(),r[i].geometry[0]=a[0].concat(r[i].geometry[0]),i}function u(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var l=0;l<e.length;l++){var c=e[l],h=c.geometry,f=c.text?c.text.toString():null;if(f){var d=u(f,h),p=u(f,h,!0);if(d in n&&p in t&&n[d]!==t[p]){var m=s(d,p,h),v=o(d,p,r[m].geometry);delete t[d],delete n[p],n[u(f,r[v].geometry,!0)]=v,r[m].geometry=null}else d in n?o(d,p,h):p in t?s(d,p,h):(i(l),t[d]=a-1,n[p]=a-1)}else i(l)}return r.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}},cl.prototype.update=function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},cl.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},cl.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},cl.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},cl.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},cl.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},cl.prototype.addToLineVertexArray=function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){for(var r=e.dist(t[e.segment+1]),a=e.dist(t[e.segment]),i={},o=e.segment+1;o<t.length;o++)i[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:r},o<t.length-1&&(r+=t[o+1].dist(t[o]));for(var s=e.segment||0;s>=0;s--)i[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:a},s>0&&(a+=t[s-1].dist(t[s]));for(var u=0;u<t.length;u++){var l=i[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},cl.prototype.addSymbols=function(e,t,n,r,a,i,o,s,u,l,c,h){for(var f=e.indexArray,d=e.layoutVertexArray,p=e.segments.prepareSegment(4*t.length,d,f,i.sortKey),m=this.glyphOffsetArray.length,v=p.vertexLength,y=this.allowVerticalPlacement&&o===pu.vertical?Math.PI/2:0,g=i.text&&i.text.sections,_=0;_<t.length;_++){var b=t[_],x=b.tl,w=b.tr,k=b.bl,C=b.br,S=b.tex,I=b.pixelOffsetTL,D=b.pixelOffsetBR,A=b.minFontScaleX,T=b.minFontScaleY,E=b.glyphOffset,R=b.isSDF,O=b.sectionIndex,M=p.vertexLength,N=E[1];il(d,s.x,s.y,x.x,N+x.y,S.x,S.y,n,R,I.x,I.y,A,T),il(d,s.x,s.y,w.x,N+w.y,S.x+S.w,S.y,n,R,D.x,I.y,A,T),il(d,s.x,s.y,k.x,N+k.y,S.x,S.y+S.h,n,R,I.x,D.y,A,T),il(d,s.x,s.y,C.x,N+C.y,S.x+S.w,S.y+S.h,n,R,D.x,D.y,A,T),ol(e.dynamicLayoutVertexArray,s,y),f.emplaceBack(M,M+1,M+2),f.emplaceBack(M+1,M+2,M+3),p.vertexLength+=4,p.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(E[0]),_!==t.length-1&&O===t[_+1].sectionIndex||e.programConfigurations.populatePaintArrays(d.length,i,i.index,{},h,g&&g[O])}e.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,v,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],o,0,!1,0,c)},cl.prototype._addCollisionDebugVertex=function(e,t,n,r,a,i){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r,a,Math.round(i.x),Math.round(i.y))},cl.prototype.addCollisionDebugVertices=function(e,t,n,r,i,o,s){var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=u.vertexLength,c=i.layoutVertexArray,h=i.collisionVertexArray,f=s.anchorX,d=s.anchorY;this._addCollisionDebugVertex(c,h,o,f,d,new a(e,t)),this._addCollisionDebugVertex(c,h,o,f,d,new a(n,t)),this._addCollisionDebugVertex(c,h,o,f,d,new a(n,r)),this._addCollisionDebugVertex(c,h,o,f,d,new a(e,r)),u.vertexLength+=4;var p=i.indexArray;p.emplaceBack(l,l+1),p.emplaceBack(l+1,l+2),p.emplaceBack(l+2,l+3),p.emplaceBack(l+3,l),u.primitiveLength+=4},cl.prototype.addDebugCollisionBoxes=function(e,t,n,r){for(var a=e;a<t;a++){var i=this.collisionBoxArray.get(a);this.addCollisionDebugVertices(i.x1,i.y1,i.x2,i.y2,r?this.textCollisionBox:this.iconCollisionBox,i.anchorPoint,n)}},cl.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ll(Ma,Ls.members,Va),this.iconCollisionBox=new ll(Ma,Ls.members,Va);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},cl.prototype._deserializeCollisionBoxesForSymbol=function(e,t,n,r,a,i,o,s,u){for(var l={},c=t;c<n;c++){var h=e.get(c);l.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},l.textFeatureIndex=h.featureIndex;break}for(var f=r;f<a;f++){var d=e.get(f);l.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},l.verticalTextFeatureIndex=d.featureIndex;break}for(var p=i;p<o;p++){var m=e.get(p);l.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},l.iconFeatureIndex=m.featureIndex;break}for(var v=s;v<u;v++){var y=e.get(v);l.verticalIconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},l.verticalIconFeatureIndex=y.featureIndex;break}return l},cl.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},cl.prototype.hasTextData=function(){return this.text.segments.get().length>0},cl.prototype.hasIconData=function(){return this.icon.segments.get().length>0},cl.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},cl.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},cl.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},cl.prototype.addIndicesForPlacedSymbol=function(e,t){for(var n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs,a=n.vertexStartIndex;a<r;a+=4)e.indexArray.emplaceBack(a,a+1,a+2),e.indexArray.emplaceBack(a+1,a+2,a+3)},cl.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),r=[],a=[],i=[],o=0;o<this.symbolInstances.length;++o){i.push(o);var s=this.symbolInstances.get(o);r.push(0|Math.round(t*s.anchorX+n*s.anchorY)),a.push(s.featureIndex)}return i.sort((function(e,t){return r[e]-r[t]||a[t]-a[e]})),i},cl.prototype.addToSortKeyRanges=function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},cl.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,r=this.symbolInstanceIndexes;n<r.length;n+=1){var a=this.symbolInstances.get(r[n]);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e,n,r){e>=0&&r.indexOf(e)===n&&t.addIndicesForPlacedSymbol(t.text,e)})),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Nr("SymbolBucket",cl,{omit:["layers","collisionBoxArray","features","compareText"]}),cl.MAX_GLYPHS=65535,cl.addDynamicAttributes=ol;var hl=new ya({"symbol-placement":new fa(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new fa(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fa(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new da(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fa(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fa(Se.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new fa(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new fa(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fa(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new da(Se.layout_symbol["icon-size"]),"icon-text-fit":new fa(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fa(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new da(Se.layout_symbol["icon-image"]),"icon-rotate":new da(Se.layout_symbol["icon-rotate"]),"icon-padding":new fa(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new fa(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new da(Se.layout_symbol["icon-offset"]),"icon-anchor":new da(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fa(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fa(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fa(Se.layout_symbol["text-rotation-alignment"]),"text-field":new da(Se.layout_symbol["text-field"]),"text-font":new da(Se.layout_symbol["text-font"]),"text-size":new da(Se.layout_symbol["text-size"]),"text-max-width":new da(Se.layout_symbol["text-max-width"]),"text-line-height":new fa(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new da(Se.layout_symbol["text-letter-spacing"]),"text-justify":new da(Se.layout_symbol["text-justify"]),"text-radial-offset":new da(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fa(Se.layout_symbol["text-variable-anchor"]),"text-anchor":new da(Se.layout_symbol["text-anchor"]),"text-max-angle":new fa(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new fa(Se.layout_symbol["text-writing-mode"]),"text-rotate":new da(Se.layout_symbol["text-rotate"]),"text-padding":new fa(Se.layout_symbol["text-padding"]),"text-keep-upright":new fa(Se.layout_symbol["text-keep-upright"]),"text-transform":new da(Se.layout_symbol["text-transform"]),"text-offset":new da(Se.layout_symbol["text-offset"]),"text-allow-overlap":new fa(Se.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new fa(Se.layout_symbol["text-ignore-placement"]),"text-optional":new fa(Se.layout_symbol["text-optional"])}),fl={paint:new ya({"icon-opacity":new da(Se.paint_symbol["icon-opacity"]),"icon-color":new da(Se.paint_symbol["icon-color"]),"icon-halo-color":new da(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new da(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new da(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new fa(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new fa(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new da(Se.paint_symbol["text-opacity"]),"text-color":new da(Se.paint_symbol["text-color"],{runtimeType:Le,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new da(Se.paint_symbol["text-halo-color"]),"text-halo-width":new da(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new da(Se.paint_symbol["text-halo-blur"]),"text-translate":new fa(Se.paint_symbol["text-translate"]),"text-translate-anchor":new fa(Se.paint_symbol["text-translate-anchor"])}),layout:hl},dl=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Me,this.defaultValue=e};dl.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},dl.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},dl.prototype.outputDefined=function(){return!1},dl.prototype.serialize=function(){return null},Nr("FormatSectionOverride",dl,{omit:["defaultValue"]});var pl=function(e){function t(t){e.call(this,t,fl)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(t,n){if(e.prototype.recalculate.call(this,t,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var a=[],i=0,o=r;i<o.length;i+=1){var s=o[i];a.indexOf(s)<0&&a.push(s)}this.layout._values["text-writing-mode"]=a}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(e,t,n,r){var a=this.layout.get(e).evaluate(t,{},n,r),i=this._unevaluatedLayout._values[e];return i.isDataDriven()||Vn(i.value)||!a?a:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,n){return n in e?String(e[n]):""}))}(t.properties,a)},t.prototype.createBucket=function(e){return new cl(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var e=0,n=fl.paint.overridableProperties;e<n.length;e+=1){var r=n[e];if(t.hasPaintOverride(this.layout,r)){var a,i=this.paint.get(r),o=new dl(i),s=new qn(o,i.property.specification);a="constant"===i.value.kind||"source"===i.value.kind?new jn("source",s):new Hn("composite",s,i.value.zoomStops,i.value._interpolationType),this.paint._values[r]=new ca(i.property,a,i.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(e,n,r){return!(!this.layout||n.isDataDriven()||r.isDataDriven())&&t.hasPaintOverride(this.layout,e)},t.hasPaintOverride=function(e,t){var n=e.get("text-field"),r=fl.paint.properties[t],a=!1,i=function(e){for(var t=0,n=e;t<n.length;t+=1)if(r.overrides&&r.overrides.hasOverride(n[t]))return void(a=!0)};if("constant"===n.value.kind&&n.value.value instanceof $e)i(n.value.value.sections);else if("source"===n.value.kind){var o=n.value;o._styleExpression&&function e(t){a||(t instanceof it&&rt(t.value)===qe?i(t.value.sections):t instanceof lt?i(t.sections):t.eachChild(e))}(o._styleExpression.expression)}return a},t}(ga),ml={paint:new ya({"background-color":new fa(Se.paint_background["background-color"]),"background-pattern":new ma(Se.paint_background["background-pattern"]),"background-opacity":new fa(Se.paint_background["background-opacity"])})},vl=function(e){function t(t){e.call(this,t,ml)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ga),yl={paint:new ya({"raster-opacity":new fa(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new fa(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fa(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fa(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new fa(Se.paint_raster["raster-saturation"]),"raster-contrast":new fa(Se.paint_raster["raster-contrast"]),"raster-resampling":new fa(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new fa(Se.paint_raster["raster-fade-duration"])})},gl=function(e){function t(t){e.call(this,t,yl)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ga),_l=function(e){function t(t){e.call(this,t,{}),this.implementation=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},t.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},t.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},t}(ga),bl={circle:io,heatmap:vo,hillshade:go,fill:as,"fill-extrusion":xs,line:Os,symbol:pl,background:vl,raster:gl},xl=self.HTMLImageElement,wl=self.HTMLCanvasElement,kl=self.HTMLVideoElement,Cl=self.ImageData,Sl=self.ImageBitmap,Il=function(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)};Il.prototype.update=function(e,t,n){var r=e.width,a=e.height,i=!(this.size&&this.size[0]===r&&this.size[1]===a||n),o=this.context,s=o.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),i)this.size=[r,a],e instanceof xl||e instanceof wl||e instanceof kl||e instanceof Cl||Sl&&e instanceof Sl?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,r,a,0,this.format,s.UNSIGNED_BYTE,e.data);else{var u=n||{x:0,y:0},l=u.x,c=u.y;e instanceof xl||e instanceof wl||e instanceof kl||e instanceof Cl||Sl&&e instanceof Sl?s.texSubImage2D(s.TEXTURE_2D,0,l,c,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,l,c,r,a,s.RGBA,s.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Il.prototype.bind=function(e,t,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)},Il.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Il.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Dl=function(e){var t=this;this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Dl.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))},Dl.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Al=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},m(["receive","process"],this),this.invoker=new Dl(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=C()?e:self};function Tl(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}Al.prototype.send=function(e,t,n,r,a){var i=this;void 0===a&&(a=!1);var o=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[o]=n);var s=D(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:e,hasCallback:!!n,targetMapId:r,mustQueue:a,sourceMapId:this.mapId,data:zr(t,s)},s),{cancel:function(){n&&delete i.callbacks[o],i.target.postMessage({id:o,type:"<cancel>",targetMapId:r,sourceMapId:i.mapId})}}},Al.prototype.receive=function(e){var t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){delete this.tasks[n];var r=this.cancelCallbacks[n];delete this.cancelCallbacks[n],r&&r()}else C()||t.mustQueue?(this.tasks[n]=t,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,t)},Al.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},Al.prototype.processTask=function(e,t){var n=this;if("<response>"===t.type){var r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(Br(t.error)):r(null,Br(t.data)))}else{var a=!1,i=D(this.globalScope)?void 0:[],o=t.hasCallback?function(t,r){a=!0,delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:t?zr(t):null,data:zr(r,i)},i)}:function(e){a=!0},s=null,u=Br(t.data);if(this.parent[t.type])s=this.parent[t.type](t.sourceMapId,u,o);else if(this.parent.getWorkerSource){var l=t.type.split(".");s=this.parent.getWorkerSource(t.sourceMapId,l[0],u.source)[l[1]](u,o)}else o(new Error("Could not find function "+t.type));!a&&s&&s.cancel&&(this.cancelCallbacks[e]=s.cancel)}},Al.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var El=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};El.prototype.setNorthEast=function(e){return this._ne=e instanceof Rl?new Rl(e.lng,e.lat):Rl.convert(e),this},El.prototype.setSouthWest=function(e){return this._sw=e instanceof Rl?new Rl(e.lng,e.lat):Rl.convert(e),this},El.prototype.extend=function(e){var t,n,r=this._sw,a=this._ne;if(e instanceof Rl)t=e,n=e;else{if(!(e instanceof El))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(El.convert(e)):this.extend(Rl.convert(e)):this;if(n=e._ne,!(t=e._sw)||!n)return this}return r||a?(r.lng=Math.min(t.lng,r.lng),r.lat=Math.min(t.lat,r.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new Rl(t.lng,t.lat),this._ne=new Rl(n.lng,n.lat)),this},El.prototype.getCenter=function(){return new Rl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},El.prototype.getSouthWest=function(){return this._sw},El.prototype.getNorthEast=function(){return this._ne},El.prototype.getNorthWest=function(){return new Rl(this.getWest(),this.getNorth())},El.prototype.getSouthEast=function(){return new Rl(this.getEast(),this.getSouth())},El.prototype.getWest=function(){return this._sw.lng},El.prototype.getSouth=function(){return this._sw.lat},El.prototype.getEast=function(){return this._ne.lng},El.prototype.getNorth=function(){return this._ne.lat},El.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},El.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},El.prototype.isEmpty=function(){return!(this._sw&&this._ne)},El.prototype.contains=function(e){var t=Rl.convert(e),n=t.lng,r=t.lat,a=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(a=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&a},El.convert=function(e){return!e||e instanceof El?e:new El(e)};var Rl=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Rl.prototype.wrap=function(){return new Rl(l(this.lng,-180,180),this.lat)},Rl.prototype.toArray=function(){return[this.lng,this.lat]},Rl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Rl.prototype.distanceTo=function(e){var t=Math.PI/180,n=this.lat*t,r=e.lat*t,a=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return 6371008.8*Math.acos(Math.min(a,1))},Rl.prototype.toBounds=function(e){void 0===e&&(e=0);var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new El(new Rl(this.lng-n,this.lat-t),new Rl(this.lng+n,this.lat+t))},Rl.convert=function(e){if(e instanceof Rl)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Rl(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Rl(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ol=2*Math.PI*6371008.8;function Ml(e){return Ol*Math.cos(e*Math.PI/180)}function Nl(e){return(180+e)/360}function Pl(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Fl(e,t){return e/Ml(t)}function Ll(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var zl=function(e,t,n){void 0===n&&(n=0),this.x=+e,this.y=+t,this.z=+n};zl.fromLngLat=function(e,t){void 0===t&&(t=0);var n=Rl.convert(e);return new zl(Nl(n.lng),Pl(n.lat),Fl(t,n.lat))},zl.prototype.toLngLat=function(){return new Rl(360*this.x-180,Ll(this.y))},zl.prototype.toAltitude=function(){return this.z*Ml(Ll(this.y))},zl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ol*(e=Ll(this.y),1/Math.cos(e*Math.PI/180));var e};var Bl=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=Vl(0,e,e,t,n)};Bl.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Bl.prototype.url=function(e,t){var n,r,a,i,o,s=(r=this.y,a=this.z,i=Tl(256*(n=this.x),256*(r=Math.pow(2,a)-r-1),a),o=Tl(256*(n+1),256*(r+1),a),i[0]+","+i[1]+","+o[0]+","+o[1]),u=function(e,t,n){for(var r,a="",i=e;i>0;i--)a+=(t&(r=1<<i-1)?1:0)+(n&r?2:0);return a}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},Bl.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new a(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},Bl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Wl=function(e,t){this.wrap=e,this.canonical=t,this.key=Vl(e,t.z,t.z,t.x,t.y)},ql=function(e,t,n,r,a){this.overscaledZ=e,this.wrap=t,this.canonical=new Bl(n,+r,+a),this.key=Vl(t,e,n,r,a)};function Vl(e,t,n,r,a){(e*=2)<0&&(e=-1*e-1);var i=1<<n;return(i*i*e+i*a+r).toString(36)+n.toString(36)+t.toString(36)}ql.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},ql.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new ql(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ql(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},ql.prototype.calculateScaledKey=function(e,t){var n=this.canonical.z-e;return e>this.canonical.z?Vl(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Vl(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)},ql.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},ql.prototype.children=function(e){if(this.overscaledZ>=e)return[new ql(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new ql(t,this.wrap,t,n,r),new ql(t,this.wrap,t,n+1,r),new ql(t,this.wrap,t,n,r+1),new ql(t,this.wrap,t,n+1,r+1)]},ql.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},ql.prototype.wrapped=function(){return new ql(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ql.prototype.unwrapTo=function(e){return new ql(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},ql.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ql.prototype.toUnwrapped=function(){return new Wl(this.wrap,this.canonical)},ql.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ql.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new zl(e.x-this.wrap,e.y))},Nr("CanonicalTileID",Bl),Nr("OverscaledTileID",ql,{omit:["posMatrix"]});var Ul=function(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return x('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var r=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=n||"mapbox";for(var a=0;a<r;a++)this.data[this._idx(-1,a)]=this.data[this._idx(0,a)],this.data[this._idx(r,a)]=this.data[this._idx(r-1,a)],this.data[this._idx(a,-1)]=this.data[this._idx(a,0)],this.data[this._idx(a,r)]=this.data[this._idx(a,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};Ul.prototype.get=function(e,t){var n=new Uint8Array(this.data.buffer),r=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])},Ul.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ul.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Ul.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},Ul.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},Ul.prototype.getPixels=function(){return new fo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ul.prototype.backfillBorder=function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,a=t*this.dim+this.dim,i=n*this.dim,o=n*this.dim+this.dim;switch(t){case-1:r=a-1;break;case 1:a=r+1}switch(n){case-1:i=o-1;break;case 1:o=i+1}for(var s=-t*this.dim,u=-n*this.dim,l=i;l<o;l++)for(var c=r;c<a;c++)this.data[this._idx(c,l)]=e.data[this._idx(c+s,l+u)]},Nr("DEMData",Ul);var jl=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}};jl.prototype.encode=function(e){return this._stringToNumber[e]},jl.prototype.decode=function(e){return this._numberToString[e]};var Hl=function(e,t,n,r,a){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,this.id=a},Gl={geometry:{configurable:!0}};Gl.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Gl.geometry.set=function(e){this._geometry=e},Hl.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(Hl.prototype,Gl);var Jl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Jl.prototype.updateState=function(e,t,n){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},c(this.stateChanges[e][r],n),null===this.deletedStates[e])for(var a in this.deletedStates[e]={},this.state[e])a!==r&&(this.deletedStates[e][a]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var i in this.deletedStates[e][r]={},this.state[e][r])n[i]||(this.deletedStates[e][r][i]=null);else for(var o in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][o]&&delete this.deletedStates[e][r][o]},Jl.prototype.removeFeatureState=function(e,t,n){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}},Jl.prototype.getState=function(e,t){var n=String(t),r=c({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var a=this.deletedStates[e][t];if(null===a)return{};for(var i in a)delete r[i]}return r},Jl.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},Jl.prototype.coalesceChanges=function(e,t){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var a={};for(var i in this.stateChanges[r])this.state[r][i]||(this.state[r][i]={}),c(this.state[r][i],this.stateChanges[r][i]),a[i]=this.state[r][i];n[r]=a}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var u in this.state[o])s[u]={},this.state[o][u]={};else for(var l in this.deletedStates[o]){if(null===this.deletedStates[o][l])this.state[o][l]={};else for(var h=0,f=Object.keys(this.deletedStates[o][l]);h<f.length;h+=1)delete this.state[o][l][f[h]];s[l]=this.state[o][l]}n[o]=n[o]||{},c(n[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var d in e)e[d].setFeatureState(n,t)};var Xl=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Tr(8192,16,0),this.grid3D=new Tr(8192,16,0),this.featureIndexArray=new ti,this.promoteId=t};function Kl(e,t,n,r,a){return y(e,(function(e,i){var o=t instanceof ha?t.get(i):null;return o&&o.evaluate?o.evaluate(n,r,a):o}))}function Zl(e){for(var t=1/0,n=1/0,r=-1/0,a=-1/0,i=0,o=e;i<o.length;i+=1){var s=o[i];t=Math.min(t,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),a=Math.max(a,s.y)}return{minX:t,minY:n,maxX:r,maxY:a}}function Yl(e,t){return t-e}Xl.prototype.insert=function(e,t,n,r,a,i){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,a);for(var s=i?this.grid3D:this.grid,u=0;u<t.length;u++){for(var l=t[u],c=[1/0,1/0,-1/0,-1/0],h=0;h<l.length;h++){var f=l[h];c[0]=Math.min(c[0],f.x),c[1]=Math.min(c[1],f.y),c[2]=Math.max(c[2],f.x),c[3]=Math.max(c[3],f.y)}c[0]<8192&&c[1]<8192&&c[2]>=0&&c[3]>=0&&s.insert(o,c[0],c[1],c[2],c[3])}},Xl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ps.VectorTile(new Us(this.rawTileData)).layers,this.sourceLayerCoder=new jl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Xl.prototype.query=function(e,t,n,r){var i=this;this.loadVTLayers();for(var o=e.params||{},s=8192/e.tileSize/e.scale,u=nr(o.filter),l=e.queryGeometry,c=e.queryPadding*s,h=Zl(l),f=this.grid.query(h.minX-c,h.minY-c,h.maxX+c,h.maxY+c),d=Zl(e.cameraQueryGeometry),p=0,m=this.grid3D.query(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c,(function(t,n,r,i){return function(e,t,n,r,i){for(var o=0,s=e;o<s.length;o+=1){var u=s[o];if(t<=u.x&&n<=u.y&&r>=u.x&&i>=u.y)return!0}var l=[new a(t,n),new a(t,i),new a(r,i),new a(r,n)];if(e.length>2)for(var c=0,h=l;c<h.length;c+=1)if(Gi(e,h[c]))return!0;for(var f=0;f<e.length-1;f++)if(Ji(e[f],e[f+1],l))return!0;return!1}(e.cameraQueryGeometry,t-c,n-c,r+c,i+c)}));p<m.length;p+=1)f.push(m[p]);f.sort(Yl);for(var v,y={},g=function(a){var c=f[a];if(c!==v){v=c;var h=i.featureIndexArray.get(c),d=null;i.loadMatchingFeature(y,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,u,o.layers,o.availableImages,t,n,r,(function(t,n,r){return d||(d=Ni(t)),n.queryIntersectsFeature(l,t,r,d,i.z,e.transform,s,e.pixelPosMatrix)}))}},_=0;_<f.length;_++)g(_);return y},Xl.prototype.loadMatchingFeature=function(e,t,n,r,a,i,o,s,u,l,c){var h=this.bucketLayerIDs[t];if(!i||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(i,h)){var f=this.sourceLayerCoder.decode(n),d=this.vtLayers[f].feature(r);if(a.filter(new ra(this.tileID.overscaledZ),d))for(var p=this.getId(d,f),m=0;m<h.length;m++){var v=h[m];if(!(i&&i.indexOf(v)<0)){var y=s[v];if(y){var g={};void 0!==p&&l&&(g=l.getState(y.sourceLayer||"_geojsonTileLayer",p));var _=u[v];_.paint=Kl(_.paint,y.paint,d,g,o),_.layout=Kl(_.layout,y.layout,d,g,o);var b=!c||c(d,y,g);if(b){var x=new Hl(d,this.z,this.x,this.y,p);x.layer=_;var w=e[v];void 0===w&&(w=e[v]=[]),w.push({featureIndex:r,feature:x,intersectionZ:b})}}}}}},Xl.prototype.lookupSymbolFeatures=function(e,t,n,r,a,i,o,s){var u={};this.loadVTLayers();for(var l=nr(a),c=0,h=e;c<h.length;c+=1)this.loadMatchingFeature(u,n,r,h[c],l,i,o,s,t);return u},Xl.prototype.hasLayer=function(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var r=0,a=n[t];r<a.length;r+=1)if(e===a[r])return!0;return!1},Xl.prototype.getId=function(e,t){var n=e.id;return this.promoteId&&"boolean"==typeof(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(n=Number(n)),n},Nr("FeatureIndex",Xl,{omit:["rawTileData","sourceLayerCoder"]});var Ql=function(e,t){this.tileID=e,this.uid=f(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ql.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<F.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Ql.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ql.prototype.loadVectorData=function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;for(var r=function(){var e=i[a],r=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==r.length){e.layers=r,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return r.filter((function(t){return t.id===e}))[0]})));for(var o=0,s=r;o<s.length;o+=1)n[s[o].id]=e}},a=0,i=e;a<i.length;a+=1)r();return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var a=this.buckets[r];if(a instanceof cl){if(this.hasSymbolBuckets=!0,!n)break;a.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var i in this.buckets){var o=this.buckets[i];if(o instanceof cl&&o.hasRTLText){this.hasRTLText=!0,na.isLoading()||na.isLoaded()||"deferred"!==ea()||ta();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(u))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new Ja},Ql.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ql.prototype.getBucket=function(e){return this.buckets[e.id]},Ql.prototype.upload=function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Il(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Il(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},Ql.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Ql.prototype.queryRenderedFeatures=function(e,t,n,r,a,i,o,s,u,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:a,scale:i,tileSize:this.tileSize,pixelPosMatrix:l,transform:s,params:o,queryPadding:this.queryPadding*u},e,t,n):{}},Ql.prototype.querySourceFeatures=function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),a=t?t.sourceLayer:"",i=r._geojsonTileLayer||r[a];if(i)for(var o=nr(t&&t.filter),s=this.tileID.canonical,u=s.z,l=s.x,c=s.y,h={z:u,x:l,y:c},f=0;f<i.length;f++){var d=i.feature(f);if(o.filter(new ra(this.tileID.overscaledZ),d)){var p=n.getId(d,a),m=new Hl(d,u,l,c,p);m.tile=h,e.push(m)}}}},Ql.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ql.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ql.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=S(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),a=!1;if(this.expirationTime>r)a=!1;else if(t)if(this.expirationTime<t)a=!0;else{var i=this.expirationTime-t;i?this.expirationTime=r+Math.max(i,3e4):a=!0}else a=!0;a?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ql.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ql.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(t.style.hasLayer(r)){var a=this.buckets[r],i=a.layers[0].sourceLayer||"_geojsonTileLayer",o=n[i],s=e[i];if(o&&s&&0!==Object.keys(s).length){a.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=t&&t.style&&t.style.getLayer(r);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(a)))}}}},Ql.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ql.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F.now()},Ql.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ql.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=F.now()+e},Ql.prototype.setDependencies=function(e,t){for(var n={},r=0,a=t;r<a.length;r+=1)n[a[r]]=!0;this.dependencies[e]=n},Ql.prototype.hasDependency=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var a=this.dependencies[r[n]];if(a)for(var i=0,o=t;i<o.length;i+=1)if(a[o[i]])return!0}return!1};var $l=self.performance,ec=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},$l.mark(this._marks.start)};ec.prototype.finish=function(){$l.mark(this._marks.end);var e=$l.getEntriesByName(this._marks.measure);return 0===e.length&&($l.measure(this._marks.measure,this._marks.start,this._marks.end),e=$l.getEntriesByName(this._marks.measure),$l.clearMarks(this._marks.start),$l.clearMarks(this._marks.end),$l.clearMeasures(this._marks.measure)),e},e.Actor=Al,e.AlphaImage=ho,e.CanonicalTileID=Bl,e.CollisionBoxArray=Ja,e.Color=Ze,e.DEMData=Ul,e.DataConstantProperty=fa,e.DictionaryCoder=jl,e.EXTENT=8192,e.ErrorEvent=ke,e.EvaluationParameters=ra,e.Event=we,e.Evented=Ce,e.FeatureIndex=Xl,e.FillBucket=ts,e.FillExtrusionBucket=gs,e.ImageAtlas=du,e.ImagePosition=hu,e.LineBucket=As,e.LngLat=Rl,e.LngLatBounds=El,e.MercatorCoordinate=zl,e.ONE_EM=24,e.OverscaledTileID=ql,e.Point=a,e.Point$1=a,e.Properties=ya,e.Protobuf=Us,e.RGBAImage=fo,e.RequestManager=U,e.RequestPerformance=ec,e.ResourceType=fe,e.SegmentVector=ri,e.SourceFeatureState=Jl,e.StructArrayLayout1ui2=Ua,e.StructArrayLayout2f1f2i16=Na,e.StructArrayLayout2i4=Ca,e.StructArrayLayout3ui6=Fa,e.StructArrayLayout4i8=Sa,e.SymbolBucket=cl,e.Texture=Il,e.Tile=Ql,e.Transitionable=oa,e.Uniform1f=vi,e.Uniform1i=mi,e.Uniform2f=yi,e.Uniform3f=gi,e.Uniform4f=_i,e.UniformColor=bi,e.UniformMatrix4f=wi,e.UnwrappedTileID=Wl,e.ValidationError=Ie,e.WritingMode=pu,e.ZoomHistory=Wr,e.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},e.addDynamicAttributes=ol,e.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,a=new Array(e.length),i=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(i=e),a[o]=t,0==--r&&n(i,a)}))}))},e.bezier=o,e.bindAll=m,e.browser=F,e.cacheEntryPossiblyAdded=function(e){++ce>oe&&(e.getActor().send("enforceCacheSizeLimit",ie),ce=0)},e.clamp=u,e.clearTileCache=function(e){var t=self.caches.delete("mapbox-tiles");e&&t.catch(e).then((function(){return e()}))},e.clipLine=Bu,e.clone=function(e){var t=new $i(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=_,e.clone$2=function(e){var t=new $i(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.collisionCircleLayout=zs,e.config=L,e.create=function(){var e=new $i(16);return $i!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=function(){var e=new $i(9);return $i!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},e.create$2=function(){var e=new $i(4);return $i!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.createCommonjsModule=t,e.createExpression=Un,e.createLayout=wa,e.createStyleLayer=function(e){return"custom"===e.type?new _l(e):new bl[e.type](e)},e.cross=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[0],s=n[1],u=n[2];return e[0]=a*u-i*s,e[1]=i*o-r*u,e[2]=r*s-a*o,e},e.deepEqual=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var a in t)if(!e(t[a],n[a]))return!1;return!0}return t===n},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.ease=s,e.emitValidationErrors=Ar,e.endsWith=v,e.enforceCacheSizeLimit=function(e){se(),Q&&Q.then((function(t){t.keys().then((function(n){for(var r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=Eu,e.evaluateSizeForZoom=Ru,e.evaluateVariableOffset=Qu,e.evented=$r,e.extend=c,e.featureFilter=nr,e.filterObject=g,e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.getAnchorAlignment=Su,e.getAnchorJustification=$u,e.getArrayBuffer=ge,e.getImage=function e(t,n){if(z.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),pe>=L.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return de.push(r),r}pe++;var a=!1,i=function(){if(!a)for(a=!0,pe--;de.length&&pe<L.MAX_PARALLEL_IMAGE_REQUESTS;){var t=de.shift();t.cancelled||(t.cancel=e(t.requestParameters,t.callback).cancel)}},o=ge(t,(function(e,t,r,a){i(),e?n(e):t&&(he()?function(e,t){var n=new self.Blob([new Uint8Array(e)],{type:"image/png"});self.createImageBitmap(n).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of "+e.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(t,n):function(e,t,n,r){var a=new self.Image,i=self.URL;a.onload=function(){t(null,a),i.revokeObjectURL(a.src)},a.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var o=new self.Blob([new Uint8Array(e)],{type:"image/png"});a.cacheControl=n,a.expires=r,a.src=e.byteLength?i.createObjectURL(o):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(t,n,r,a))}));return{cancel:function(){o.cancel(),i()}}},e.getJSON=function(e,t){return ye(c(e,{type:"json"}),t)},e.getRTLTextPluginStatus=ea,e.getReferrer=ve,e.getVideo=function(e,t){var n,r,a=self.document.createElement("video");a.muted=!0,a.onloadstart=function(){t(null,a)};for(var i=0;i<e.length;i++){var o=self.document.createElement("source");n=e[i],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(a.crossOrigin="Anonymous"),o.src=e[i],a.appendChild(o)}return{cancel:function(){}}},e.identity=eo,e.invert=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],v=t[14],y=t[15],g=n*s-r*o,_=n*u-a*o,b=n*l-i*o,x=r*u-a*s,w=r*l-i*s,k=a*l-i*u,C=c*m-h*p,S=c*v-f*p,I=c*y-d*p,D=h*v-f*m,A=h*y-d*m,T=f*y-d*v,E=g*T-_*A+b*D+x*I-w*S+k*C;return E?(e[0]=(s*T-u*A+l*D)*(E=1/E),e[1]=(a*A-r*T-i*D)*E,e[2]=(m*k-v*w+y*x)*E,e[3]=(f*w-h*k-d*x)*E,e[4]=(u*I-o*T-l*S)*E,e[5]=(n*T-a*I+i*S)*E,e[6]=(v*b-p*k-y*_)*E,e[7]=(c*k-f*b+d*_)*E,e[8]=(o*A-s*I+l*C)*E,e[9]=(r*I-n*A-i*C)*E,e[10]=(p*w-m*b+y*g)*E,e[11]=(h*b-c*w-d*g)*E,e[12]=(s*S-o*D-u*C)*E,e[13]=(n*D-r*S+a*C)*E,e[14]=(m*_-p*x-v*g)*E,e[15]=(c*x-h*_+f*g)*E,e):null},e.isChar=qr,e.isMapboxURL=j,e.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},e.makeRequest=ye,e.mapObject=y,e.mercatorXfromLng=Nl,e.mercatorYfromLat=Pl,e.mercatorZfromAltitude=Fl,e.mul=ro,e.multiply=to,e.mvt=ps,e.normalize=function(e,t){var n=t[0],r=t[1],a=t[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},e.number=Wt,e.offscreenCanvasSupported=he,e.ortho=function(e,t,n,r,a,i,o){var s=1/(t-n),u=1/(r-a),l=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*u,e[14]=(o+i)*l,e[15]=1,e},e.parseGlyphPBF=function(e){return new Us(e).readFields(su,[])},e.pbf=Us,e.performSymbolLayout=function(e,t,n,r,a,i,o){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var s=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,l={};if("composite"===e.textSizeData.kind){var c=e.textSizeData,h=c.maxZoom;l.compositeTextSizes=[u["text-size"].possiblyEvaluate(new ra(c.minZoom),o),u["text-size"].possiblyEvaluate(new ra(h),o)]}if("composite"===e.iconSizeData.kind){var f=e.iconSizeData,d=f.maxZoom;l.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new ra(f.minZoom),o),u["icon-size"].possiblyEvaluate(new ra(d),o)]}l.layoutTextSize=u["text-size"].possiblyEvaluate(new ra(e.zoom+1),o),l.layoutIconSize=u["icon-size"].possiblyEvaluate(new ra(e.zoom+1),o),l.textMaxSize=u["text-size"].possiblyEvaluate(new ra(18));for(var p=24*s.get("text-line-height"),m="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),v=s.get("text-keep-upright"),y=s.get("text-size"),g=function(){var i=b[_],u=s.get("text-font").evaluate(i,{},o).join(","),c=y.evaluate(i,{},o),h=l.layoutTextSize.evaluate(i,{},o),f=l.layoutIconSize.evaluate(i,{},o),d={horizontal:{},vertical:void 0},g=i.text,w=[0,0];if(g){var k=g.toString(),C=24*s.get("text-letter-spacing").evaluate(i,{},o),S=function(e){for(var t=0,n=e;t<n.length;t+=1)if(r=n[t].charCodeAt(0),qr.Arabic(r)||qr["Arabic Supplement"](r)||qr["Arabic Extended-A"](r)||qr["Arabic Presentation Forms-A"](r)||qr["Arabic Presentation Forms-B"](r))return!1;var r;return!0}(k)?C:0,I=s.get("text-anchor").evaluate(i,{},o),D=s.get("text-variable-anchor");if(!D){var A=s.get("text-radial-offset").evaluate(i,{},o);w=A?Qu(I,[24*A,Yu]):s.get("text-offset").evaluate(i,{},o).map((function(e){return 24*e}))}var T=m?"center":s.get("text-justify").evaluate(i,{},o),E=s.get("symbol-placement"),R="point"===E?24*s.get("text-max-width").evaluate(i,{},o):0,O=function(){e.allowVerticalPlacement&&Vr(k)&&(d.vertical=yu(g,t,n,a,u,R,p,I,"left",S,w,pu.vertical,!0,E,h,c))};if(!m&&D){for(var M="auto"===T?D.map((function(e){return $u(e)})):[T],N=!1,P=0;P<M.length;P++){var F=M[P];if(!d.horizontal[F])if(N)d.horizontal[F]=d.horizontal[0];else{var L=yu(g,t,n,a,u,R,p,"center",F,S,w,pu.horizontal,!1,E,h,c);L&&(d.horizontal[F]=L,N=1===L.positionedLines.length)}}O()}else{"auto"===T&&(T=$u(I));var z=yu(g,t,n,a,u,R,p,I,T,S,w,pu.horizontal,!1,E,h,c);z&&(d.horizontal[T]=z),O(),Vr(k)&&m&&v&&(d.vertical=yu(g,t,n,a,u,R,p,I,T,S,w,pu.vertical,!1,E,h,c))}}var B=void 0,W=!1;if(i.icon&&i.icon.name){var q=r[i.icon.name];q&&(B=function(e,t,n){var r=Su(n),a=t[0]-e.displaySize[0]*r.horizontalAlign,i=t[1]-e.displaySize[1]*r.verticalAlign;return{image:e,top:i,bottom:i+e.displaySize[1],left:a,right:a+e.displaySize[0]}}(a[i.icon.name],s.get("icon-offset").evaluate(i,{},o),s.get("icon-anchor").evaluate(i,{},o)),W=q.sdf,void 0===e.sdfIcons?e.sdfIcons=q.sdf:e.sdfIcons!==q.sdf&&x("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(q.pixelRatio!==e.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var V=tl(d.horizontal)||d.vertical;e.iconsInText=!!V&&V.iconsInText,(V||B)&&function(e,t,n,r,a,i,o,s,u,l,c){var h=i.textMaxSize.evaluate(t,{});void 0===h&&(h=o);var f,d=e.layers[0].layout,p=d.get("icon-offset").evaluate(t,{},c),m=tl(n.horizontal),v=o/24,y=e.tilePixelRatio*v,g=e.tilePixelRatio*h/24,_=e.tilePixelRatio*s,b=e.tilePixelRatio*d.get("symbol-spacing"),w=d.get("text-padding")*e.tilePixelRatio,k=d.get("icon-padding")*e.tilePixelRatio,C=d.get("text-max-angle")/180*Math.PI,S="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),I="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),D=d.get("symbol-placement"),A=b/2,T=d.get("icon-text-fit");r&&"none"!==T&&(e.allowVerticalPlacement&&n.vertical&&(f=Du(r,n.vertical,T,d.get("icon-text-fit-padding"),p,v)),m&&(r=Du(r,m,T,d.get("icon-text-fit-padding"),p,v)));var E=function(s,h){h.x<0||h.x>=8192||h.y<0||h.y>=8192||function(e,t,n,r,a,i,o,s,u,l,c,h,f,d,p,m,v,y,g,_,b,w,k,C,S){var I,D,A,T,E,R=e.addToLineVertexArray(t,n),O=0,M=0,N=0,P=0,F=-1,L=-1,z={},B=ui(""),W=0,q=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(W=(I=s.layout.get("text-offset").evaluate(b,{},C).map((function(e){return 24*e})))[0],q=I[1]):(W=24*s.layout.get("text-radial-offset").evaluate(b,{},C),q=Yu),e.allowVerticalPlacement&&r.vertical){var V=s.layout.get("text-rotate").evaluate(b,{},C)+90;T=new Hu(u,t,l,c,h,r.vertical,f,d,p,V),o&&(E=new Hu(u,t,l,c,h,o,v,y,p,V))}if(a){var U=s.layout.get("icon-rotate").evaluate(b,{}),j="none"!==s.layout.get("icon-text-fit"),H=Wu(a,U,k,j),G=o?Wu(o,U,k,j):void 0;A=new Hu(u,t,l,c,h,a,v,y,!1,U),O=4*H.length;var J=e.iconSizeData,X=null;"source"===J.kind?(X=[128*s.layout.get("icon-size").evaluate(b,{})])[0]>32640&&x(e.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===J.kind&&((X=[128*w.compositeIconSizes[0].evaluate(b,{},C),128*w.compositeIconSizes[1].evaluate(b,{},C)])[0]>32640||X[1]>32640)&&x(e.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),e.addSymbols(e.icon,H,X,_,g,b,!1,t,R.lineStartIndex,R.lineLength,-1,C),F=e.icon.placedSymbolArray.length-1,G&&(M=4*G.length,e.addSymbols(e.icon,G,X,_,g,b,pu.vertical,t,R.lineStartIndex,R.lineLength,-1,C),L=e.icon.placedSymbolArray.length-1)}for(var K in r.horizontal){var Z=r.horizontal[K];if(!D){B=ui(Z.text);var Y=s.layout.get("text-rotate").evaluate(b,{},C);D=new Hu(u,t,l,c,h,Z,f,d,p,Y)}var Q=1===Z.positionedLines.length;if(N+=el(e,t,Z,i,s,p,b,m,R,r.vertical?pu.horizontal:pu.horizontalOnly,Q?Object.keys(r.horizontal):[K],z,F,w,C),Q)break}r.vertical&&(P+=el(e,t,r.vertical,i,s,p,b,m,R,pu.vertical,["vertical"],z,L,w,C));var $=D?D.boxStartIndex:e.collisionBoxArray.length,ee=D?D.boxEndIndex:e.collisionBoxArray.length,te=T?T.boxStartIndex:e.collisionBoxArray.length,ne=T?T.boxEndIndex:e.collisionBoxArray.length,re=A?A.boxStartIndex:e.collisionBoxArray.length,ae=A?A.boxEndIndex:e.collisionBoxArray.length,ie=E?E.boxStartIndex:e.collisionBoxArray.length,oe=E?E.boxEndIndex:e.collisionBoxArray.length,se=-1,ue=function(e,t){return e&&e.circleDiameter?Math.max(e.circleDiameter,t):t};se=ue(D,se),se=ue(T,se),se=ue(A,se);var le=(se=ue(E,se))>-1?1:0;le&&(se*=S/24),e.glyphOffsetArray.length>=cl.MAX_GLYPHS&&x("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey),e.symbolInstances.emplaceBack(t.x,t.y,z.right>=0?z.right:-1,z.center>=0?z.center:-1,z.left>=0?z.left:-1,z.vertical||-1,F,L,B,$,ee,te,ne,re,ae,ie,oe,l,N,P,O,M,le,0,f,W,q,se)}(e,h,s,n,r,a,f,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,y,w,S,u,_,k,I,p,t,i,l,c,o)};if("line"===D)for(var R=0,O=Bu(t.geometry,0,0,8192,8192);R<O.length;R+=1)for(var M=O[R],N=0,P=zu(M,b,C,n.vertical||m,r,24,g,e.overscaling,8192);N<P.length;N+=1){var F=P[N];m&&nl(e,m.text,A,F)||E(M,F)}else if("line-center"===D)for(var L=0,z=t.geometry;L<z.length;L+=1){var B=z[L];if(B.length>1){var W=Lu(B,C,n.vertical||m,r,24,g);W&&E(B,W)}}else if("Polygon"===t.type)for(var q=0,V=Yo(t.geometry,0);q<V.length;q+=1){var U=V[q],j=Xu(U,16);E(U[0],new Au(j.x,j.y,0))}else if("LineString"===t.type)for(var H=0,G=t.geometry;H<G.length;H+=1){var J=G[H];E(J,new Au(J[0].x,J[0].y,0))}else if("Point"===t.type)for(var X=0,K=t.geometry;X<K.length;X+=1)for(var Z=0,Y=K[X];Z<Y.length;Z+=1){var Q=Y[Z];E([Q],new Au(Q.x,Q.y,0))}}(e,i,d,B,r,l,h,f,w,W,o)},_=0,b=e.features;_<b.length;_+=1)g();i&&e.generateCollisionDebugBuffers()},e.perspective=function(e,t,n,r,a){var i,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(e[10]=(a+r)*(i=1/(r-a)),e[14]=2*a*r*i):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var a=t[r];a in e&&(n[a]=e[a])}return n},e.plugin=na,e.polygonIntersectsPolygon=Li,e.postMapLoadEvent=ae,e.postTurnstileEvent=ne,e.potpack=cu,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=Nr,e.registerForPluginStateChange=function(e){return e({pluginStatus:Kr,pluginURL:Zr}),$r.on("pluginStateChange",e),e},e.rotate=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=a*u+o*s,e[2]=r*-s+i*u,e[3]=a*-s+o*u,e},e.rotateX=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*a+l*r,e[5]=o*a+c*r,e[6]=s*a+h*r,e[7]=u*a+f*r,e[8]=l*a-i*r,e[9]=c*a-o*r,e[10]=h*a-s*r,e[11]=f*a-u*r,e},e.rotateZ=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a+l*r,e[1]=o*a+c*r,e[2]=s*a+h*r,e[3]=u*a+f*r,e[4]=l*a-i*r,e[5]=c*a-o*r,e[6]=h*a-s*r,e[7]=f*a-u*r,e},e.scale=function(e,t,n){var r=n[0],a=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},e.scale$2=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},e.setCacheLimits=function(e,t){ie=e,oe=t},e.setRTLTextPlugin=function(e,t,n){if(void 0===n&&(n=!1),"deferred"===Kr||"loading"===Kr||"loaded"===Kr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Zr=F.resolveURL(e),Kr="deferred",Xr=t,Qr(),n||ta()},e.sphericalToCartesian=function(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}},e.sqrLen=function(e){var t=e[0],n=e[1];return t*t+n*n},e.styleSpec=Se,e.sub=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},e.symbolSize=Ou,e.transformMat3=function(e,t,n){var r=t[0],a=t[1],i=t[2];return e[0]=r*n[0]+a*n[3]+i*n[6],e[1]=r*n[1]+a*n[4]+i*n[7],e[2]=r*n[2]+a*n[5]+i*n[8],e},e.transformMat4=ao,e.translate=function(e,t,n){var r,a,i,o,s,u,l,c,h,f,d,p,m=n[0],v=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*y+t[12],e[13]=t[1]*m+t[5]*v+t[9]*y+t[13],e[14]=t[2]*m+t[6]*v+t[10]*y+t[14],e[15]=t[3]*m+t[7]*v+t[11]*y+t[15]):(a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],e[0]=r=t[0],e[1]=a,e[2]=i,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=h,e[9]=f,e[10]=d,e[11]=p,e[12]=r*m+s*v+h*y+t[12],e[13]=a*m+u*v+f*y+t[13],e[14]=i*m+l*v+d*y+t[14],e[15]=o*m+c*v+p*y+t[15]),e},e.triggerPluginCompletionEvent=Yr,e.uniqueId=f,e.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers."+n+': missing required property "id"'}),void 0===e.render&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t},e.validateLight=Sr,e.validateStyle=Cr,e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.vectorTile=ps,e.version="1.10.1",e.warnOnce=x,e.webpSupported=z,e.window=self,e.wrap=l})),r(0,(function(e){function t(e){var n=typeof e;if("number"===n||"boolean"===n||"string"===n||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var r="[",a=0,i=e;a<i.length;a+=1)r+=t(i[a])+",";return r+"]"}for(var o=Object.keys(e).sort(),s="{",u=0;u<o.length;u++)s+=JSON.stringify(o[u])+":"+t(e[o[u]])+",";return s+"}"}function n(n){for(var r="",a=0,i=e.refProperties;a<i.length;a+=1)r+="/"+t(n[i[a]]);return r}var r=function(e){this.keyCache={},e&&this.replace(e)};r.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},r.prototype.update=function(t,r){for(var a=this,i=0,o=t;i<o.length;i+=1){var s=o[i];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=e.createStyleLayer(s);u._featureFilter=e.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var l=0,c=r;l<c.length;l+=1){var h=c[l];delete this.keyCache[h],delete this._layerConfigs[h],delete this._layers[h]}this.familiesBySource={};for(var f=0,d=function(e,t){for(var r={},a=0;a<e.length;a++){var i=t&&t[e[a].id]||n(e[a]);t&&(t[e[a].id]=i);var o=r[i];o||(o=r[i]=[]),o.push(e[a])}var s=[];for(var u in r)s.push(r[u]);return s}(e.values(this._layerConfigs),this.keyCache);f<d.length;f+=1){var p=d[f].map((function(e){return a._layers[e.id]})),m=p[0];if("none"!==m.visibility){var v=m.source||"",y=this.familiesBySource[v];y||(y=this.familiesBySource[v]={});var g=m.sourceLayer||"_geojsonTileLayer",_=y[g];_||(_=y[g]=[]),_.push(p)}}};var a=function(t){var n={},r=[];for(var a in t){var i=t[a],o=n[a]={};for(var s in i){var u=i[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(l),o[s]={rect:l,metrics:u.metrics}}}}var c=e.potpack(r),h=new e.AlphaImage({width:c.w||1,height:c.h||1});for(var f in t){var d=t[f];for(var p in d){var m=d[+p];if(m&&0!==m.bitmap.width&&0!==m.bitmap.height){var v=n[f][p].rect;e.AlphaImage.copy(m.bitmap,h,{x:0,y:0},{x:v.x+1,y:v.y+1},m.bitmap)}}}this.image=h,this.positions=n};e.register("GlyphAtlas",a);var i=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId};function o(t,n,r){for(var a=new e.EvaluationParameters(n),i=0,o=t;i<o.length;i+=1)o[i].recalculate(a,r)}function s(t,n){var r=e.getArrayBuffer(t.request,(function(t,r,a,i){t?n(t):r&&n(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(r)),rawData:r,cacheControl:a,expires:i})}));return function(){r.cancel(),n()}}i.prototype.parse=function(t,n,r,i,s){var u=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var l=new e.DictionaryCoder(Object.keys(t.layers).sort()),c=new e.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var h,f,d,p,m={},v={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},y=n.familiesBySource[this.source];for(var g in y){var _=t.layers[g];if(_){1===_.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+g+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=l.encode(g),x=[],w=0;w<_.length;w++){var k=_.feature(w),C=c.getId(k,g);x.push({feature:k,id:C,index:w,sourceLayerIndex:b})}for(var S=0,I=y[g];S<I.length;S+=1){var D=I[S],A=D[0];A.minzoom&&this.zoom<Math.floor(A.minzoom)||A.maxzoom&&this.zoom>=A.maxzoom||"none"!==A.visibility&&(o(D,this.zoom,r),(m[A.id]=A.createBucket({index:c.bucketLayerIDs.length,layers:D,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(x,v,this.tileID.canonical),c.bucketLayerIDs.push(D.map((function(e){return e.id}))))}}}var T=e.mapObject(v.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(T).length?i.send("getGlyphs",{uid:this.uid,stacks:T},(function(e,t){h||(h=e,f=t,O.call(u))})):f={};var E=Object.keys(v.iconDependencies);E.length?i.send("getImages",{icons:E,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){h||(h=e,d=t,O.call(u))})):d={};var R=Object.keys(v.patternDependencies);function O(){if(h)return s(h);if(f&&d&&p){var t=new a(f),n=new e.ImageAtlas(d,p);for(var i in m){var u=m[i];u instanceof e.SymbolBucket?(o(u.layers,this.zoom,r),e.performSymbolLayout(u,f,t.positions,d,n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):u.hasPattern&&(u instanceof e.LineBucket||u instanceof e.FillBucket||u instanceof e.FillExtrusionBucket)&&(o(u.layers,this.zoom,r),u.addFeatures(v,this.tileID.canonical,n.patternPositions))}this.status="done",s(null,{buckets:e.values(m).filter((function(e){return!e.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:n,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?t.positions:null})}}R.length?i.send("getImages",{icons:R,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){h||(h=e,p=t,O.call(u))})):p={},O.call(this)};var u=function(e,t,n,r){this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=r||s,this.loading={},this.loaded={}};u.prototype.loadTile=function(t,n){var r=this,a=t.uid;this.loading||(this.loading={});var o=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request),s=this.loading[a]=new i(t);s.abort=this.loadVectorData(t,(function(t,i){if(delete r.loading[a],t||!i)return s.status="done",r.loaded[a]=s,n(t);var u=i.rawData,l={};i.expires&&(l.expires=i.expires),i.cacheControl&&(l.cacheControl=i.cacheControl);var c={};if(o){var h=o.finish();h&&(c.resourceTiming=JSON.parse(JSON.stringify(h)))}s.vectorTile=i.vectorTile,s.parse(i.vectorTile,r.layerIndex,r.availableImages,r.actor,(function(t,r){if(t||!r)return n(t);n(null,e.extend({rawTileData:u.slice(0)},r,l,c))})),r.loaded=r.loaded||{},r.loaded[a]=s}))},u.prototype.reloadTile=function(e,t){var n=this,r=this.loaded,a=e.uid,i=this;if(r&&r[a]){var o=r[a];o.showCollisionBoxes=e.showCollisionBoxes;var s=function(e,r){var a=o.reloadCallback;a&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,n.availableImages,i.actor,a)),t(e,r)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},u.prototype.abortTile=function(e,t){var n=this.loading,r=e.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),t()},u.prototype.removeTile=function(e,t){var n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()};var l=e.window.ImageBitmap,c=function(){this.loaded={}};function h(e,t){if(0!==e.length){f(e[0],t);for(var n=1;n<e.length;n++)f(e[n],!t)}}function f(e,t){for(var n=0,r=0,a=e.length,i=a-1;r<a;i=r++)n+=(e[r][0]-e[i][0])*(e[i][1]+e[r][1]);n>=0!=!!t&&e.reverse()}c.prototype.loadTile=function(t,n){var r=t.uid,a=t.encoding,i=t.rawImageData,o=l&&i instanceof l?this.getImageData(i):i,s=new e.DEMData(r,o,a);this.loaded=this.loaded||{},this.loaded[r]=s,n(null,s)},c.prototype.getImageData=function(t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:n.width,height:n.height},n.data)},c.prototype.removeTile=function(e){var t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]};var d=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,p=function(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};p.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var a=r[n];t.push([new e.Point$1(a[0],a[1])])}return t}for(var i=[],o=0,s=this._feature.geometry;o<s.length;o+=1){for(var u=[],l=0,c=s[o];l<c.length;l+=1){var h=c[l];u.push(new e.Point$1(h[0],h[1]))}i.push(u)}return i},p.prototype.toGeoJSON=function(e,t,n){return d.call(this,e,t,n)};var m=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t};m.prototype.feature=function(e){return new p(this._features[e])};var v=e.vectorTile.VectorTileFeature,y=g;function g(e,t){this.options=t||{},this.features=e,this.length=e.length}function _(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}g.prototype.feature=function(e){return new _(this.features[e],this.options.extent)},_.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var r=t[n],a=[],i=0;i<r.length;i++)a.push(new e.Point$1(r[i][0],r[i][1]));this.geometry.push(a)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,a=-1/0,i=0;i<e.length;i++)for(var o=e[i],s=0;s<o.length;s++){var u=o[s];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),a=Math.max(a,u.y)}return[t,r,n,a]},_.prototype.toGeoJSON=v.prototype.toGeoJSON;var b=w,x=y;function w(t){var n=new e.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,k,e.layers[n])}(t,n),n.finish()}function k(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,C,r);var a=r.keys;for(n=0;n<a.length;n++)t.writeStringField(3,a[n]);var i=r.values;for(n=0;n<i.length;n++)t.writeMessage(4,T,i[n])}function C(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,S,e),t.writeVarintField(3,n.type),t.writeMessage(4,A,n)}function S(e,t){var n=e.feature,r=e.keys,a=e.values,i=e.keycache,o=e.valuecache;for(var s in n.properties){var u=i[s];void 0===u&&(r.push(s),i[s]=u=r.length-1),t.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,f=o[h];void 0===f&&(a.push(l),o[h]=f=a.length-1),t.writeVarint(f)}}function I(e,t){return(t<<3)+(7&e)}function D(e){return e<<1^e>>31}function A(e,t){for(var n=e.loadGeometry(),r=e.type,a=0,i=0,o=n.length,s=0;s<o;s++){var u=n[s],l=1;1===r&&(l=u.length),t.writeVarint(I(1,l));for(var c=3===r?u.length-1:u.length,h=0;h<c;h++){1===h&&1!==r&&t.writeVarint(I(2,c-1));var f=u[h].x-a,d=u[h].y-i;t.writeVarint(D(f)),t.writeVarint(D(d)),a+=f,i+=d}3===r&&t.writeVarint(I(7,1))}}function T(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function E(e,t,n,r){R(e,n,r),R(t,2*n,2*r),R(t,2*n+1,2*r+1)}function R(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function O(e,t,n,r){var a=e-n,i=t-r;return a*a+i*i}b.fromVectorTileJs=w,b.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new y(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return w({layers:n})},b.GeoJSONWrapper=x;var M=function(e){return e[0]},N=function(e){return e[1]},P=function(e,t,n,r,a){void 0===t&&(t=M),void 0===n&&(n=N),void 0===r&&(r=64),void 0===a&&(a=Float64Array),this.nodeSize=r,this.points=e;for(var i=e.length<65536?Uint16Array:Uint32Array,o=this.ids=new i(e.length),s=this.coords=new a(2*e.length),u=0;u<e.length;u++)o[u]=u,s[2*u]=t(e[u]),s[2*u+1]=n(e[u]);!function e(t,n,r,a,i,o){if(!(i-a<=r)){var s=a+i>>1;!function e(t,n,r,a,i,o){for(;i>a;){if(i-a>600){var s=i-a+1,u=r-a+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);e(t,n,r,Math.max(a,Math.floor(r-u*c/s+h)),Math.min(i,Math.floor(r+(s-u)*c/s+h)),o)}var f=n[2*r+o],d=a,p=i;for(E(t,n,a,r),n[2*i+o]>f&&E(t,n,a,i);d<p;){for(E(t,n,d,p),d++,p--;n[2*d+o]<f;)d++;for(;n[2*p+o]>f;)p--}n[2*a+o]===f?E(t,n,a,p):E(t,n,++p,i),p<=r&&(a=p+1),r<=p&&(i=p-1)}}(t,n,s,a,i,o%2),e(t,n,r,a,s-1,o+1),e(t,n,r,s+1,i,o+1)}}(o,s,r,0,o.length-1,0)};P.prototype.range=function(e,t,n,r){return function(e,t,n,r,a,i,o){for(var s,u,l=[0,e.length-1,0],c=[];l.length;){var h=l.pop(),f=l.pop(),d=l.pop();if(f-d<=o)for(var p=d;p<=f;p++)u=t[2*p+1],(s=t[2*p])>=n&&s<=a&&u>=r&&u<=i&&c.push(e[p]);else{var m=Math.floor((d+f)/2);u=t[2*m+1],(s=t[2*m])>=n&&s<=a&&u>=r&&u<=i&&c.push(e[m]);var v=(h+1)%2;(0===h?n<=s:r<=u)&&(l.push(d),l.push(m-1),l.push(v)),(0===h?a>=s:i>=u)&&(l.push(m+1),l.push(f),l.push(v))}}return c}(this.ids,this.coords,e,t,n,r,this.nodeSize)},P.prototype.within=function(e,t,n){return function(e,t,n,r,a,i){for(var o=[0,e.length-1,0],s=[],u=a*a;o.length;){var l=o.pop(),c=o.pop(),h=o.pop();if(c-h<=i)for(var f=h;f<=c;f++)O(t[2*f],t[2*f+1],n,r)<=u&&s.push(e[f]);else{var d=Math.floor((h+c)/2),p=t[2*d],m=t[2*d+1];O(p,m,n,r)<=u&&s.push(e[d]);var v=(l+1)%2;(0===l?n-a<=p:r-a<=m)&&(o.push(h),o.push(d-1),o.push(v)),(0===l?n+a>=p:r+a>=m)&&(o.push(d+1),o.push(c),o.push(v))}}return s}(this.ids,this.coords,e,t,n,this.nodeSize)};var F={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},L=function(e){this.options=j(Object.create(F),e),this.trees=new Array(this.options.maxZoom+1)};function z(e,t,n,r,a){return{x:e,y:t,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:a}}function B(e,t){var n=e.geometry.coordinates,r=n[1];return{x:V(n[0]),y:U(r),zoom:1/0,index:t,parentId:-1}}function W(e){return{type:"Feature",id:e.id,properties:q(e),geometry:{type:"Point",coordinates:[(r=e.x,360*(r-.5)),(t=e.y,n=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var t,n,r}function q(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return j(j({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function V(e){return e/360+.5}function U(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function j(e,t){for(var n in t)e[n]=t[n];return e}function H(e){return e.x}function G(e){return e.y}function J(e,t,n,r,a,i){var o=a-n,s=i-r;if(0!==o||0!==s){var u=((e-n)*o+(t-r)*s)/(o*o+s*s);u>1?(n=a,r=i):u>0&&(n+=o*u,r+=s*u)}return(o=e-n)*o+(s=t-r)*s}function X(e,t,n,r){var a={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)K(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)K(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var a=0;a<t[r].length;a++)K(e,t[r][a])}(a),a}function K(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function Z(e,t,n,r){if(t.geometry){var a=t.geometry.coordinates,i=t.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=t.id;if(n.promoteId?u=t.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===i)Y(a,s);else if("MultiPoint"===i)for(var l=0;l<a.length;l++)Y(a[l],s);else if("LineString"===i)Q(a,s,o,!1);else if("MultiLineString"===i){if(n.lineMetrics){for(l=0;l<a.length;l++)Q(a[l],s=[],o,!1),e.push(X(u,"LineString",s,t.properties));return}$(a,s,o,!1)}else if("Polygon"===i)$(a,s,o,!0);else{if("MultiPolygon"!==i){if("GeometryCollection"===i){for(l=0;l<t.geometry.geometries.length;l++)Z(e,{id:u,geometry:t.geometry.geometries[l],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<a.length;l++){var c=[];$(a[l],c,o,!0),s.push(c)}}e.push(X(u,i,s,t.properties))}}function Y(e,t){t.push(ee(e[0])),t.push(te(e[1])),t.push(0)}function Q(e,t,n,r){for(var a,i,o=0,s=0;s<e.length;s++){var u=ee(e[s][0]),l=te(e[s][1]);t.push(u),t.push(l),t.push(0),s>0&&(o+=r?(a*l-u*i)/2:Math.sqrt(Math.pow(u-a,2)+Math.pow(l-i,2))),a=u,i=l}var c=t.length-3;t[2]=1,function e(t,n,r,a){for(var i,o=a,s=r-n>>1,u=r-n,l=t[n],c=t[n+1],h=t[r],f=t[r+1],d=n+3;d<r;d+=3){var p=J(t[d],t[d+1],l,c,h,f);if(p>o)i=d,o=p;else if(p===o){var m=Math.abs(d-s);m<u&&(i=d,u=m)}}o>a&&(i-n>3&&e(t,n,i,a),t[i+2]=o,r-i>3&&e(t,i,r,a))}(t,0,c,n),t[c+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function $(e,t,n,r){for(var a=0;a<e.length;a++){var i=[];Q(e[a],i,n,r),t.push(i)}}function ee(e){return e/360+.5}function te(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function ne(e,t,n,r,a,i,o,s){if(r/=t,i>=(n/=t)&&o<r)return e;if(o<n||i>=r)return null;for(var u=[],l=0;l<e.length;l++){var c=e[l],h=c.geometry,f=c.type,d=0===a?c.minX:c.minY,p=0===a?c.maxX:c.maxY;if(d>=n&&p<r)u.push(c);else if(!(p<n||d>=r)){var m=[];if("Point"===f||"MultiPoint"===f)re(h,m,n,r,a);else if("LineString"===f)ae(h,m,n,r,a,!1,s.lineMetrics);else if("MultiLineString"===f)oe(h,m,n,r,a,!1);else if("Polygon"===f)oe(h,m,n,r,a,!0);else if("MultiPolygon"===f)for(var v=0;v<h.length;v++){var y=[];oe(h[v],y,n,r,a,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===f){for(v=0;v<m.length;v++)u.push(X(c.id,f,m[v],c.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===m.length?(f="LineString",m=m[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===m.length?"Point":"MultiPoint"),u.push(X(c.id,f,m,c.tags))}}}return u.length?u:null}function re(e,t,n,r,a){for(var i=0;i<e.length;i+=3){var o=e[i+a];o>=n&&o<=r&&(t.push(e[i]),t.push(e[i+1]),t.push(e[i+2]))}}function ae(e,t,n,r,a,i,o){for(var s,u,l=ie(e),c=0===a?ue:le,h=e.start,f=0;f<e.length-3;f+=3){var d=e[f],p=e[f+1],m=e[f+2],v=e[f+3],y=e[f+4],g=0===a?d:p,_=0===a?v:y,b=!1;o&&(s=Math.sqrt(Math.pow(d-v,2)+Math.pow(p-y,2))),g<n?_>n&&(u=c(l,d,p,v,y,n),o&&(l.start=h+s*u)):g>r?_<r&&(u=c(l,d,p,v,y,r),o&&(l.start=h+s*u)):se(l,d,p,m),_<n&&g>=n&&(u=c(l,d,p,v,y,n),b=!0),_>r&&g<=r&&(u=c(l,d,p,v,y,r),b=!0),!i&&b&&(o&&(l.end=h+s*u),t.push(l),l=ie(e)),o&&(h+=s)}var x=e.length-3;d=e[x],p=e[x+1],m=e[x+2],(g=0===a?d:p)>=n&&g<=r&&se(l,d,p,m),x=l.length-3,i&&x>=3&&(l[x]!==l[0]||l[x+1]!==l[1])&&se(l,l[0],l[1],l[2]),l.length&&t.push(l)}function ie(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function oe(e,t,n,r,a,i){for(var o=0;o<e.length;o++)ae(e[o],t,n,r,a,i,!1)}function se(e,t,n,r){e.push(t),e.push(n),e.push(r)}function ue(e,t,n,r,a,i){var o=(i-t)/(r-t);return e.push(i),e.push(n+(a-n)*o),e.push(1),o}function le(e,t,n,r,a,i){var o=(i-n)/(a-n);return e.push(t+(r-t)*o),e.push(i),e.push(1),o}function ce(e,t){for(var n=[],r=0;r<e.length;r++){var a,i=e[r],o=i.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)a=he(i.geometry,t);else if("MultiLineString"===o||"Polygon"===o){a=[];for(var s=0;s<i.geometry.length;s++)a.push(he(i.geometry[s],t))}else if("MultiPolygon"===o)for(a=[],s=0;s<i.geometry.length;s++){for(var u=[],l=0;l<i.geometry[s].length;l++)u.push(he(i.geometry[s][l],t));a.push(u)}n.push(X(i.id,o,a,i.tags))}return n}function he(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function fe(e,t){if(e.transformed)return e;var n,r,a,i=1<<e.z,o=e.x,s=e.y;for(n=0;n<e.features.length;n++){var u=e.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(de(l[r],l[r+1],t,i,o,s));else for(r=0;r<l.length;r++){var h=[];for(a=0;a<l[r].length;a+=2)h.push(de(l[r][a],l[r][a+1],t,i,o,s));u.geometry.push(h)}}return e.transformed=!0,e}function de(e,t,n,r,a,i){return[Math.round(n*(e*r-a)),Math.round(n*(t*r-i))]}function pe(e,t,n,r,a){for(var i=t===a.maxZoom?0:a.tolerance/((1<<t)*a.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,me(o,e[s],i,a);var u=e[s].minX,l=e[s].minY,c=e[s].maxX,h=e[s].maxY;u<o.minX&&(o.minX=u),l<o.minY&&(o.minY=l),c>o.maxX&&(o.maxX=c),h>o.maxY&&(o.maxY=h)}return o}function me(e,t,n,r){var a=t.geometry,i=t.type,o=[];if("Point"===i||"MultiPoint"===i)for(var s=0;s<a.length;s+=3)o.push(a[s]),o.push(a[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===i)ve(o,a,e,n,!1,!1);else if("MultiLineString"===i||"Polygon"===i)for(s=0;s<a.length;s++)ve(o,a[s],e,n,"Polygon"===i,0===s);else if("MultiPolygon"===i)for(var u=0;u<a.length;u++){var l=a[u];for(s=0;s<l.length;s++)ve(o,l[s],e,n,!0,0===s)}if(o.length){var c=t.tags||null;if("LineString"===i&&r.lineMetrics){for(var h in c={},t.tags)c[h]=t.tags[h];c.mapbox_clip_start=a.start/a.size,c.mapbox_clip_end=a.end/a.size}var f={geometry:o,type:"Polygon"===i||"MultiPolygon"===i?3:"LineString"===i||"MultiLineString"===i?2:1,tags:c};null!==t.id&&(f.id=t.id),e.features.push(f)}}function ve(e,t,n,r,a,i){var o=r*r;if(r>0&&t.size<(a?o:r))n.numPoints+=t.length/3;else{for(var s=[],u=0;u<t.length;u+=3)(0===r||t[u+2]>o)&&(n.numSimplified++,s.push(t[u]),s.push(t[u+1])),n.numPoints++;a&&function(e,t){for(var n=0,r=0,a=e.length,i=a-2;r<a;i=r,r+=2)n+=(e[r]-e[i])*(e[r+1]+e[i+1]);if(n>0===t)for(r=0,a=e.length;r<a/2;r+=2){var o=e[r],s=e[r+1];e[r]=e[a-2-r],e[r+1]=e[a-1-r],e[a-2-r]=o,e[a-1-r]=s}}(s,i),e.push(s)}}function ye(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)Z(n,e.features[r],t,r);else Z(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var n=t.buffer/t.extent,r=e,a=ne(e,1,-1-n,n,0,-1,2,t),i=ne(e,1,1-n,2+n,0,-1,2,t);return(a||i)&&(r=ne(e,1,-n,1+n,0,-1,2,t)||[],a&&(r=ce(a,1).concat(r)),i&&(r=r.concat(ce(i,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ge(e,t,n){return 32*((1<<e)*n+t)+e}function _e(e,t){var n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);var a=new m(r.features),i=b(a);0===i.byteOffset&&i.byteLength===i.buffer.byteLength||(i=new Uint8Array(i)),t(null,{vectorTile:a,rawData:i.buffer})}L.prototype.load=function(e){var t=this.options,n=t.log,r=t.minZoom,a=t.maxZoom,i=t.nodeSize;n&&console.time("total time");var o="prepare "+e.length+" points";n&&console.time(o),this.points=e;for(var s=[],u=0;u<e.length;u++)e[u].geometry&&s.push(B(e[u],u));this.trees[a+1]=new P(s,H,G,i,Float32Array),n&&console.timeEnd(o);for(var l=a;l>=r;l--){var c=+Date.now();s=this._cluster(s,l),this.trees[l]=new P(s,H,G,i,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this},L.prototype.getClusters=function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),a=180===e[2]?180:((e[2]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,a=180;else if(n>a){var o=this.getClusters([n,r,180,i],t),s=this.getClusters([-180,r,a,i],t);return o.concat(s)}for(var u=this.trees[this._limitZoom(t)],l=[],c=0,h=u.range(V(n),U(i),V(a),U(r));c<h.length;c+=1){var f=u.points[h[c]];l.push(f.numPoints?W(f):this.points[f.index])}return l},L.prototype.getChildren=function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",a=this.trees[n];if(!a)throw new Error(r);var i=a.points[t];if(!i)throw new Error(r);for(var o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,l=a.within(i.x,i.y,o);u<l.length;u+=1){var c=a.points[l[u]];c.parentId===e&&s.push(c.numPoints?W(c):this.points[c.index])}if(0===s.length)throw new Error(r);return s},L.prototype.getLeaves=function(e,t,n){var r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r},L.prototype.getTile=function(e,t,n){var r=this.trees[this._limitZoom(e)],a=Math.pow(2,e),i=this.options,o=i.radius/i.extent,s=(n-o)/a,u=(n+1+o)/a,l={features:[]};return this._addTileFeatures(r.range((t-o)/a,s,(t+1+o)/a,u),r.points,t,n,a,l),0===t&&this._addTileFeatures(r.range(1-o/a,s,1,u),r.points,a,n,a,l),t===a-1&&this._addTileFeatures(r.range(0,s,o/a,u),r.points,-1,n,a,l),l.features.length?l:null},L.prototype.getClusterExpansionZoom=function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},L.prototype._appendLeaves=function(e,t,n,r,a){for(var i=0,o=this.getChildren(t);i<o.length;i+=1){var s=o[i],u=s.properties;if(u&&u.cluster?a+u.point_count<=r?a+=u.point_count:a=this._appendLeaves(e,u.cluster_id,n,r,a):a<r?a++:e.push(s),e.length===n)break}return a},L.prototype._addTileFeatures=function(e,t,n,r,a,i){for(var o=0,s=e;o<s.length;o+=1){var u=t[s[o]],l=u.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(u.x*a-n)),Math.round(this.options.extent*(u.y*a-r))]],tags:l?q(u):this.points[u.index].properties},h=void 0;l?h=u.id:this.options.generateId?h=u.index:this.points[u.index].id&&(h=this.points[u.index].id),void 0!==h&&(c.id=h),i.features.push(c)}},L.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},L.prototype._cluster=function(e,t){for(var n=[],r=this.options,a=r.reduce,i=r.radius/(r.extent*Math.pow(2,t)),o=0;o<e.length;o++){var s=e[o];if(!(s.zoom<=t)){s.zoom=t;for(var u=this.trees[t+1],l=u.within(s.x,s.y,i),c=s.numPoints||1,h=s.x*c,f=s.y*c,d=a&&c>1?this._map(s,!0):null,p=(o<<5)+(t+1)+this.points.length,m=0,v=l;m<v.length;m+=1){var y=u.points[v[m]];if(!(y.zoom<=t)){y.zoom=t;var g=y.numPoints||1;h+=y.x*g,f+=y.y*g,c+=g,y.parentId=p,a&&(d||(d=this._map(s,!0)),a(d,this._map(y)))}}1===c?n.push(s):(s.parentId=p,n.push(z(h/c,f/c,p,c,d)))}}return n},L.prototype._getOriginId=function(e){return e-this.points.length>>5},L.prototype._getOriginZoom=function(e){return(e-this.points.length)%32},L.prototype._map=function(e,t){if(e.numPoints)return t?j({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?j({},r):r},ye.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ye.prototype.splitTile=function(e,t,n,r,a,i,o){for(var s=[e,t,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,h=ge(t,n,r),f=this.tiles[h];if(!f&&(l>1&&console.time("creation"),f=this.tiles[h]=pe(e,t,n,r,u),this.tileCoords.push({z:t,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var d="z"+t;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(f.source=e,a){if(t===u.maxZoom||t===a)continue;var p=1<<a-t;if(n!==Math.floor(i/p)||r!==Math.floor(o/p))continue}else if(t===u.indexMaxZoom||f.numPoints<=u.indexMaxPoints)continue;if(f.source=null,0!==e.length){l>1&&console.time("clipping");var m,v,y,g,_,b,x=.5*u.buffer/u.extent,w=.5-x,k=.5+x,C=1+x;m=v=y=g=null,_=ne(e,c,n-x,n+k,0,f.minX,f.maxX,u),b=ne(e,c,n+w,n+C,0,f.minX,f.maxX,u),e=null,_&&(m=ne(_,c,r-x,r+k,1,f.minY,f.maxY,u),v=ne(_,c,r+w,r+C,1,f.minY,f.maxY,u),_=null),b&&(y=ne(b,c,r-x,r+k,1,f.minY,f.maxY,u),g=ne(b,c,r+w,r+C,1,f.minY,f.maxY,u),b=null),l>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(v||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(g||[],t+1,2*n+1,2*r+1)}}},ye.prototype.getTile=function(e,t,n){var r=this.options,a=r.extent,i=r.debug;if(e<0||e>24)return null;var o=1<<e,s=ge(e,t=(t%o+o)%o,n);if(this.tiles[s])return fe(this.tiles[s],a);i>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var u,l=e,c=t,h=n;!u&&l>0;)l--,c=Math.floor(c/2),h=Math.floor(h/2),u=this.tiles[ge(l,c,h)];return u&&u.source?(i>1&&console.log("found parent tile z%d-%d-%d",l,c,h),i>1&&console.time("drilling down"),this.splitTile(u.source,l,c,h,e,t,n),i>1&&console.timeEnd("drilling down"),this.tiles[s]?fe(this.tiles[s],a):null):null};var be=function(t){function n(e,n,r,a){t.call(this,e,n,r,_e),a&&(this.loadGeoJSON=a)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var a=!!(r&&r.request&&r.request.collectResourceTiming)&&new e.RequestPerformance(r.request);this.loadGeoJSON(r,(function(i,o){if(i||!o)return n(i);if("object"!=typeof o)return n(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));!function e(t,n){var r,a=t&&t.type;if("FeatureCollection"===a)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===a)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===a)e(t.geometry,n);else if("Polygon"===a)h(t.coordinates,n);else if("MultiPolygon"===a)for(r=0;r<t.coordinates.length;r++)h(t.coordinates[r],n);return t}(o,!0);try{t._geoJSONIndex=r.cluster?new L(function(t){var n=t.superclusterOptions,r=t.clusterProperties;if(!r||!n)return n;for(var a={},i={},o={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),l=0,c=u;l<c.length;l+=1){var h=c[l],f=r[h],d=f[0],p=e.createExpression(f[1]),m=e.createExpression("string"==typeof d?[d,["accumulated"],["get",h]]:d);a[h]=p.value,i[h]=m.value}return n.map=function(e){s.properties=e;for(var t={},n=0,r=u;n<r.length;n+=1){var i=r[n];t[i]=a[i].evaluate(o,s)}return t},n.reduce=function(e,t){s.properties=t;for(var n=0,r=u;n<r.length;n+=1){var a=r[n];o.accumulated=e[a],e[a]=i[a].evaluate(o,s)}},n}(r)).load(o.features):function(e,t){return new ye(e,t)}(o,r.geojsonVtOptions)}catch(i){return n(i)}t.loaded={};var s={};if(a){var u=a.finish();u&&(s.resourceTiming={},s.resourceTiming[r.source]=JSON.parse(JSON.stringify(u)))}n(null,s)}))}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(e,n){var r=this.loaded;return r&&r[e.uid]?t.prototype.reloadTile.call(this,e,n):this.loadTile(e,n)},n.prototype.loadGeoJSON=function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},n.prototype.getClusterExpansionZoom=function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}},n.prototype.getClusterChildren=function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}},n.prototype.getClusterLeaves=function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}},n}(u),xe=function(t){var n=this;this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:u,geojson:be},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(n.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');n.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}};return xe.prototype.setReferrer=function(e,t){this.referrer=t},xe.prototype.setImages=function(e,t,n){for(var r in this.availableImages[e]=t,this.workerSources[e]){var a=this.workerSources[e][r];for(var i in a)a[i].availableImages=t}n()},xe.prototype.setLayers=function(e,t,n){this.getLayerIndex(e).replace(t),n()},xe.prototype.updateLayers=function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},xe.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).loadTile(t,n)},xe.prototype.loadDEMTile=function(e,t,n){this.getDEMWorkerSource(e,t.source).loadTile(t,n)},xe.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).reloadTile(t,n)},xe.prototype.abortTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)},xe.prototype.removeTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)},xe.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},xe.prototype.removeSource=function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}},xe.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}},xe.prototype.syncRTLPluginState=function(t,n,r){try{e.plugin.setState(n);var a=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=a){this.self.importScripts(a);var i=e.plugin.isParsed();r(i?void 0:new Error("RTL Text Plugin failed to import scripts from "+a),i)}}catch(e){r(e.toString())}},xe.prototype.getAvailableImages=function(e){var t=this.availableImages[e];return t||(t=[]),t},xe.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t},xe.prototype.getWorkerSource=function(e,t,n){var r=this;return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][n]||(this.workerSources[e][t][n]=new this.workerSourceTypes[t]({send:function(t,n,a){r.actor.send(t,n,a,e)}},this.getLayerIndex(e),this.getAvailableImages(e))),this.workerSources[e][t][n]},xe.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new c),this.demWorkerSources[e][t]},xe.prototype.enforceCacheSizeLimit=function(t,n){e.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new xe(e.window)),xe})),r(0,(function(e){var t=e.createCommonjsModule((function(e){function t(e){return!n(e)}function n(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===r[n=e&&e.failIfMajorPerformanceCaveat]&&(r[n]=function(e){var n=function(e){var n=document.createElement("canvas"),r=Object.create(t.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(e);if(!n)return!1;var r=n.createShader(n.VERTEX_SHADER);return!(!r||n.isContextLost())&&(n.shaderSource(r,"void main() {}"),n.compileShader(r),!0===n.getShaderParameter(r,n.COMPILE_STATUS))}(n)),r[n]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var n}e.exports?e.exports=t:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=t,window.mapboxgl.notSupportedReason=n);var r={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),n={create:function(t,n,r){var a=e.window.document.createElement(t);return void 0!==n&&(a.className=n),r&&r.appendChild(a),a},createNS:function(t,n){return e.window.document.createElementNS(t,n)}},r=e.window.document.documentElement.style;function a(e){if(!r)return e[0];for(var t=0;t<e.length;t++)if(e[t]in r)return e[t];return e[0]}var i,o=a(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){r&&o&&(i=r[o],r[o]="none")},n.enableDrag=function(){r&&o&&(r[o]=i)};var s=a(["transform","WebkitTransform"]);n.setTransform=function(e,t){e.style[s]=t};var u=!1;try{var l=Object.defineProperty({},"passive",{get:function(){u=!0}});e.window.addEventListener("test",l,l),e.window.removeEventListener("test",l,l)}catch(e){u=!1}n.addEventListener=function(e,t,n,r){void 0===r&&(r={}),e.addEventListener(t,n,"passive"in r&&u?r:r.capture)},n.removeEventListener=function(e,t,n,r){void 0===r&&(r={}),e.removeEventListener(t,n,"passive"in r&&u?r:r.capture)};var c=function t(n){n.preventDefault(),n.stopPropagation(),e.window.removeEventListener("click",t,!0)};function h(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}n.suppressClick=function(){e.window.addEventListener("click",c,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",c,!0)}),0)},n.mousePos=function(t,n){var r=t.getBoundingClientRect();return new e.Point(n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop)},n.touchPos=function(t,n){for(var r=t.getBoundingClientRect(),a=[],i=0;i<n.length;i++)a.push(new e.Point(n[i].clientX-r.left-t.clientLeft,n[i].clientY-r.top-t.clientTop));return a},n.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},n.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var f=function(t){function n(){t.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.isLoaded=function(){return this.loaded},n.prototype.setLoaded=function(e){if(this.loaded!==e&&(this.loaded=e,e)){for(var t=0,n=this.requestors;t<n.length;t+=1){var r=n[t];this._notify(r.ids,r.callback)}this.requestors=[]}},n.prototype.getImage=function(e){return this.images[e]},n.prototype.addImage=function(e,t){this._validate(e,t)&&(this.images[e]=t)},n.prototype._validate=function(t,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchY" value'))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "content" value'))),r=!1),r},n.prototype._validateStretch=function(e,t){if(!e)return!0;for(var n=0,r=0,a=e;r<a.length;r+=1){var i=a[r];if(i[0]<n||i[1]<i[0]||t<i[1])return!1;n=i[1]}return!0},n.prototype._validateContent=function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))},n.prototype.updateImage=function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0},n.prototype.removeImage=function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()},n.prototype.listImages=function(){return Object.keys(this.images)},n.prototype.getImages=function(e,t){var n=!0;if(!this.isLoaded())for(var r=0,a=e;r<a.length;r+=1)this.images[a[r]]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})},n.prototype._notify=function(t,n){for(var r={},a=0,i=t;a<i.length;a+=1){var o=i[a];this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o}));var s=this.images[o];s?r[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,r)},n.prototype.getPixelSize=function(){var e=this.atlasImage;return{width:e.width,height:e.height}},n.prototype.getPattern=function(t){var n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var a={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new e.ImagePosition(a,r);this.patterns[t]={bin:a,position:i}}return this._updatePatternAtlas(),this.patterns[t].position},n.prototype.bind=function(t){var n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},n.prototype._updatePatternAtlas=function(){var t=[];for(var n in this.patterns)t.push(this.patterns[n].bin);var r=e.potpack(t),a=r.w,i=r.h,o=this.atlasImage;for(var s in o.resize({width:a||1,height:i||1}),this.patterns){var u=this.patterns[s].bin,l=u.x+1,c=u.y+1,h=this.images[s].data,f=h.width,d=h.height;e.RGBAImage.copy(h,o,{x:0,y:0},{x:l,y:c},{width:f,height:d}),e.RGBAImage.copy(h,o,{x:0,y:d-1},{x:l,y:c-1},{width:f,height:1}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:l,y:c+d},{width:f,height:1}),e.RGBAImage.copy(h,o,{x:f-1,y:0},{x:l-1,y:c},{width:1,height:d}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:l+f,y:c},{width:1,height:d})}this.dirty=!0},n.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},n.prototype.dispatchRenderCallbacks=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var a=this.images[r];h(a)&&this.updateImage(r,a)}}},n}(e.Evented),d=v,p=v,m=1e20;function v(e,t,n,r,a,i){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=a||"sans-serif",this.fontWeight=i||"normal",this.radius=n||8;var o=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(e,t,n,r,a,i,o){for(var s=0;s<t;s++){for(var u=0;u<n;u++)r[u]=e[u*t+s];for(g(r,a,i,o,n),u=0;u<n;u++)e[u*t+s]=a[u]}for(u=0;u<n;u++){for(s=0;s<t;s++)r[s]=e[u*t+s];for(g(r,a,i,o,t),s=0;s<t;s++)e[u*t+s]=Math.sqrt(a[s])}}function g(e,t,n,r,a){n[0]=0,r[0]=-m,r[1]=+m;for(var i=1,o=0;i<a;i++){for(var s=(e[i]+i*i-(e[n[o]]+n[o]*n[o]))/(2*i-2*n[o]);s<=r[o];)o--,s=(e[i]+i*i-(e[n[o]]+n[o]*n[o]))/(2*i-2*n[o]);n[++o]=i,r[o]=s,r[o+1]=+m}for(i=0,o=0;i<a;i++){for(;r[o+1]<i;)o++;t[i]=(i-n[o])*(i-n[o])+e[n[o]]}}v.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var a=t.data[4*r+3]/255;this.gridOuter[r]=1===a?0:0===a?m:Math.pow(Math.max(0,.5-a),2),this.gridInner[r]=1===a?m:0===a?0:Math.pow(Math.max(0,a-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n},d.default=p;var _=function(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}};_.prototype.setURL=function(e){this.url=e},_.prototype.getGlyphs=function(t,n){var r=this,a=[];for(var i in t)for(var o=0,s=t[i];o<s.length;o+=1)a.push({stack:i,id:s[o]});e.asyncAll(a,(function(e,t){var n=e.stack,a=e.id,i=r.entries[n];i||(i=r.entries[n]={glyphs:{},requests:{},ranges:{}});var o=i.glyphs[a];if(void 0===o){if(o=r._tinySDF(i,n,a))return i.glyphs[a]=o,void t(null,{stack:n,id:a,glyph:o});var s=Math.floor(a/256);if(256*s>65535)t(new Error("glyphs > 65535 not supported"));else if(i.ranges[s])t(null,{stack:n,id:a,glyph:o});else{var u=i.requests[s];u||(u=i.requests[s]=[],_.loadGlyphRange(n,s,r.url,r.requestManager,(function(e,t){if(t){for(var n in t)r._doesCharSupportLocalGlyph(+n)||(i.glyphs[+n]=t[+n]);i.ranges[s]=!0}for(var a=0,o=u;a<o.length;a+=1)(0,o[a])(e,t);delete i.requests[s]}))),u.push((function(e,r){e?t(e):r&&t(null,{stack:n,id:a,glyph:r[a]||null})}))}}else t(null,{stack:n,id:a,glyph:o})}),(function(e,t){if(e)n(e);else if(t){for(var r={},a=0,i=t;a<i.length;a+=1){var o=i[a],s=o.stack,u=o.id,l=o.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}}))},_.prototype._doesCharSupportLocalGlyph=function(t){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](t)||e.isChar["Hangul Syllables"](t)||e.isChar.Hiragana(t)||e.isChar.Katakana(t))},_.prototype._tinySDF=function(t,n,r){var a=this.localIdeographFontFamily;if(a&&this._doesCharSupportLocalGlyph(r)){var i=t.tinySDF;if(!i){var o="400";/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),i=t.tinySDF=new _.TinySDF(24,3,8,.25,a,o)}return{id:r,bitmap:new e.AlphaImage({width:30,height:30},i.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},_.loadGlyphRange=function(t,n,r,a,i){var o=256*n,s=o+255,u=a.transformRequest(a.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}",o+"-"+s),e.ResourceType.Glyphs);e.getArrayBuffer(u,(function(t,n){if(t)i(t);else if(n){for(var r={},a=0,o=e.parseGlyphPBF(n);a<o.length;a+=1){var s=o[a];r[s.id]=s}i(null,r)}}))},_.TinySDF=d;var b=function(){this.specification=e.styleSpec.light.position};b.prototype.possiblyEvaluate=function(t,n){return e.sphericalToCartesian(t.expression.evaluate(n))},b.prototype.interpolate=function(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r)}};var x=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new b,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),w=function(t){function n(n){t.call(this),this._transitionable=new e.Transitionable(x),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(t,n){if(void 0===n&&(n={}),!this._validate(e.validateLight,t,n))for(var r in t){var a=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),a):this._transitionable.setValue(r,a)}},n.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},n.prototype._validate=function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},n}(e.Evented),k=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};k.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]},k.prototype.getDashRanges=function(e,t,n){var r=[],a=e.length%2==1?-e[e.length-1]*n:0,i=e[0]*n,o=!0;r.push({left:a,right:i,isDash:o,zeroLength:0===e[0]});for(var s=e[0],u=1;u<e.length;u++){var l=e[u];r.push({left:a=s*n,right:i=(s+=l)*n,isDash:o=!o,zeroLength:0===l})}return r},k.prototype.addRoundDash=function(e,t,n){for(var r=t/2,a=-n;a<=n;a++)for(var i=this.width*(this.nextRow+n+a),o=0,s=e[o],u=0;u<this.width;u++){u/s.right>1&&(s=e[++o]);var l=Math.abs(u-s.left),c=Math.abs(u-s.right),h=Math.min(l,c),f=void 0,d=a/n*(r+1);if(s.isDash){var p=r-Math.abs(d);f=Math.sqrt(h*h+p*p)}else f=r-Math.sqrt(h*h+d*d);this.data[i+u]=Math.max(0,Math.min(255,f+128))}},k.prototype.addRegularDash=function(e){for(var t=e.length-1;t>=0;--t){var n=e[t],r=e[t+1];n.zeroLength?e.splice(t,1):r&&r.isDash===n.isDash&&(r.left=n.left,e.splice(t,1))}var a=e[0],i=e[e.length-1];a.isDash===i.isDash&&(a.left=i.left-this.width,i.right=a.right+this.width);for(var o=this.width*this.nextRow,s=0,u=e[s],l=0;l<this.width;l++){l/u.right>1&&(u=e[++s]);var c=Math.abs(l-u.left),h=Math.abs(l-u.right),f=Math.min(c,h);this.data[o+l]=Math.max(0,Math.min(255,(u.isDash?f:-f)+128))}},k.prototype.addDash=function(t,n){var r=n?7:0,a=2*r+1;if(this.nextRow+a>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var i=0,o=0;o<t.length;o++)i+=t[o];if(0!==i){var s=this.width/i,u=this.getDashRanges(t,this.width,s);n?this.addRoundDash(u,s,r):this.addRegularDash(u)}var l={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:i};return this.nextRow+=a,this.dirty=!0,l},k.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))};var C=function t(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var a=this.workerPool.acquire(this.id),i=0;i<a.length;i++){var o=new t.Actor(a[i],r,this.id);o.name="Worker "+i,this.actors.push(o)}};function S(t,n,r){var a=function(a,i){if(a)return r(a);if(i){var o=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(e){return e.id}))),o.tiles=n.canonicalizeTileset(o,t.url),r(null,o)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url),e.ResourceType.Source),a):e.browser.frame((function(){return a(null,t)}))}C.prototype.broadcast=function(t,n,r){e.asyncAll(this.actors,(function(e,r){e.send(t,n,r)}),r=r||function(){})},C.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},C.prototype.remove=function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)},C.Actor=e.Actor;var I=function(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24};I.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},I.prototype.contains=function(t){var n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),a=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),i=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<i&&t.y>=a&&t.y<o};var D=function(t){function n(n,r,a,i){if(t.call(this),this.id=n,this.dispatcher=a,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(r,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=S(this._options,this.map._requestManager,(function(n,r){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new I(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles,t.map._requestManager._customAccessToken),e.postMapLoadEvent(r.tiles,t.map._getMapId(),t.map._requestManager._skuToken,t.map._requestManager._customAccessToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return e.extend({},this._options)},n.prototype.loadTile=function(t,n){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function i(r,a){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(a&&a.resourceTiming&&(t.resourceTiming=a.resourceTiming),this.map._refreshExpiredTiles&&a&&t.setExpiryData(a),t.loadVectorData(a,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}a.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",a,i.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",a,i.bind(this)))},n.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)},n.prototype.unloadTile=function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)},n.prototype.hasTransition=function(){return!1},n}(e.Evented),A=function(t){function n(n,r,a,i){t.call(this),this.id=n,this.dispatcher=a,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},r),e.extend(this,e.pick(r,["url","scheme","tileSize"]))}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=S(this._options,this.map._requestManager,(function(n,r){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new I(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles),e.postMapLoadEvent(r.tiles,t.map._getMapId(),t.map._requestManager._skuToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return e.extend({},this._options)},n.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},n.prototype.loadTile=function(t,n){var r=this,a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),(function(a,i){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(a)t.state="errored",n(a);else if(i){r.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=r.map.painter.context,s=o.gl;t.texture=r.map.painter.getTileTexture(i.width),t.texture?t.texture.update(i,{useMipmap:!0}):(t.texture=new e.Texture(o,i,s.RGBA,{useMipmap:!0}),t.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(r.dispatcher),n(null)}}))},n.prototype.abortTile=function(e,t){e.request&&(e.request.cancel(),delete e.request),t()},n.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},n.prototype.hasTransition=function(){return!1},n}(e.Evented),T=function(t){function n(n,r,a,i){t.call(this,n,r,a,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(t,n){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function a(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),(function(r,i){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=e.window.ImageBitmap&&i instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?i:e.browser.getImageData(i,1),s={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:o,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",s,a.bind(this)))}}).bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},n.prototype._getNeighboringTiles=function(t){var n=t.canonical,r=Math.pow(2,n.z),a=(n.x-1+r)%r,i=0===n.x?t.wrap-1:t.wrap,o=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,u={};return u[new e.OverscaledTileID(t.overscaledZ,i,n.z,a,n.y).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(u[new e.OverscaledTileID(t.overscaledZ,i,n.z,a,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new e.OverscaledTileID(t.overscaledZ,i,n.z,a,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&e.actor.send("removeDEMTile",{uid:e.uid,source:this.id})},n}(A),E=function(t){function n(n,r,a,i){t.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=a.getActor(),this.setEventedParent(i),this._data=r.data,this._options=e.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;var o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*o,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(r.clusterRadius||50)*o,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties},r.workerOptions)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(n){if(n)t.fire(new e.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(r.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new e.Event("data",r))}}))},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setData=function(t){var n=this;return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(t){if(t)n.fire(new e.ErrorEvent(t));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new e.Event("data",r))}})),this},n.prototype.getClusterExpansionZoom=function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this},n.prototype.getClusterChildren=function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this},n.prototype.getClusterLeaves=function(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this},n.prototype._updateWorkerData=function(t){var n=this;this._loaded=!1;var r=e.extend({},this.workerOptions),a=this._data;"string"==typeof a?(r.request=this.map._requestManager.transformRequest(e.browser.resolveURL(a),e.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(a),this.actor.send(this.type+".loadData",r,(function(e,a){n._removed||a&&a.abandoned||(n._loaded=!0,a&&a.resourceTiming&&a.resourceTiming[n.id]&&(n._resourceTiming=a.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:r.source},null),t(e))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.loadTile=function(t,n){var r=this,a=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(a,{type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(e,i){return delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(i,r.map.painter,"reloadTile"===a),n(null))}))},n.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0},n.prototype.unloadTile=function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})},n.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},n.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(e.Evented),R=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),O=function(t){function n(e,n,r,a){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(a),this.options=n}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.load=function(t,n){var r=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(a,i){r._loaded=!0,a?r.fire(new e.ErrorEvent(a)):i&&(r.image=i,t&&(r.coordinates=t),n&&n(),r._finishLoading())}))},n.prototype.loaded=function(){return this._loaded},n.prototype.updateImage=function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(function(){t.texture=null})),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setCoordinates=function(t){var n=this;this.coordinates=t;var r=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){for(var n=1/0,r=1/0,a=-1/0,i=-1/0,o=0,s=t;o<s.length;o+=1){var u=s[o];n=Math.min(n,u.x),r=Math.min(r,u.y),a=Math.max(a,u.x),i=Math.max(i,u.y)}var l=Math.max(a-n,i-r),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),h=Math.pow(2,c);return new e.CanonicalTileID(c,Math.floor((n+a)/2*h),Math.floor((r+i)/2*h))}(r),this.minzoom=this.maxzoom=this.tileID.z;var a=r.map((function(e){return n.tileID.getTilePoint(e)._round()}));return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(a[0].x,a[0].y,0,0),this._boundsArray.emplaceBack(a[1].x,a[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(a[3].x,a[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(a[2].x,a[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,R.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var a=this.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},n.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(e.Evented),M=function(t){function n(e,n,r,a){t.call(this,e,n,r,a),this.roundZoom=!0,this.type="video",this.options=n}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.load=function(){var t=this;this._loaded=!1;var n=this.options;this.urls=[];for(var r=0,a=n.urls;r<a.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(a[r],e.ResourceType.Source).url);e.getVideo(this.urls,(function(n,r){t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(t.video=r,t.video.loop=!0,t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))},n.prototype.pause=function(){this.video&&this.video.pause()},n.prototype.play=function(){this.video&&this.video.play()},n.prototype.seek=function(t){if(this.video){var n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=t}},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,R.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var a=this.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(O),N=function(t){function n(n,r,a,i){t.call(this,n,r,a,i),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,R.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var i=this.tiles[a];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e+=1){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1},n}(O),P={vector:D,raster:A,"raster-dem":T,geojson:E,video:M,image:O,canvas:N};function F(t,n){var r=e.identity([]);return e.translate(r,r,[1,1,0]),e.scale(r,r,[.5*t.width,.5*t.height,1]),e.multiply(r,r,t.calculatePosMatrix(n.toUnwrapped()))}function L(e,t,n,r,a,i){var o=function(e,t,n){if(e)for(var r=0,a=e;r<a.length;r+=1){var i=t[a[r]];if(i&&i.source===n&&"fill-extrusion"===i.type)return!0}else for(var o in t){var s=t[o];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(a&&a.layers,t,e.id),s=i.maxPitchScaleFactor(),u=e.tilesIn(r,s,o);u.sort(z);for(var l=[],c=0,h=u;c<h.length;c+=1){var f=h[c];l.push({wrappedTileID:f.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(t,n,e._state,f.queryGeometry,f.cameraQueryGeometry,f.scale,a,i,s,F(e.transform,f.tileID))})}var d=function(e){for(var t={},n={},r=0,a=e;r<a.length;r+=1){var i=a[r],o=i.queryResults,s=i.wrappedTileID,u=n[s]=n[s]||{};for(var l in o)for(var c=o[l],h=u[l]=u[l]||{},f=t[l]=t[l]||[],d=0,p=c;d<p.length;d+=1){var m=p[d];h[m.featureIndex]||(h[m.featureIndex]=!0,f.push(m))}}return t}(l);for(var p in d)d[p].forEach((function(t){var n=t.feature,r=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return d}function z(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var B=function(e,t){this.max=e,this.onRemove=t,this.reset()};B.prototype.reset=function(){for(var e in this.data)for(var t=0,n=this.data[e];t<n.length;t+=1){var r=n[t];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},B.prototype.add=function(e,t,n){var r=this,a=e.wrapped().key;void 0===this.data[a]&&(this.data[a]=[]);var i={value:t,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((function(){r.remove(e,i)}),n)),this.data[a].push(i),this.order.push(a),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},B.prototype.has=function(e){return e.wrapped().key in this.data},B.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},B.prototype._getAndRemoveByKey=function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},B.prototype.getByKey=function(e){var t=this.data[e];return t?t[0].value:null},B.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},B.prototype.remove=function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),a=this.data[n][r];return this.data[n].splice(r,1),a.timeout&&clearTimeout(a.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(a.value),this.order.splice(this.order.indexOf(n),1),this},B.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this},B.prototype.filter=function(e){var t=[];for(var n in this.data)for(var r=0,a=this.data[n];r<a.length;r+=1){var i=a[r];e(i.value)||t.push(i)}for(var o=0,s=t;o<s.length;o+=1){var u=s[o];this.remove(u.value.tileID,u)}};var W=function(e,t,n){this.context=e;var r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};W.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},W.prototype.updateData=function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},W.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var q={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},V=function(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;var a=e.gl;this.buffer=a.createBuffer(),e.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};V.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},V.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},V.prototype.enableAttributes=function(e,t){for(var n=0;n<this.attributes.length;n++){var r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}},V.prototype.setVertexAttribPointers=function(e,t,n){for(var r=0;r<this.attributes.length;r++){var a=this.attributes[r],i=t.attributes[a.name];void 0!==i&&e.vertexAttribPointer(i,a.components,e[q[a.type]],!1,this.itemSize,a.offset+this.itemSize*(n||0))}},V.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var U=function(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};U.prototype.get=function(){return this.current},U.prototype.set=function(e){},U.prototype.getDefault=function(){return this.default},U.prototype.setDefault=function(){this.set(this.default)};var j=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getDefault=function(){return e.Color.transparent},n.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},n}(U),H=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 1},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)},t}(U),G=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)},t}(U),J=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return[!0,!0,!0,!0]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(U),X=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)},t}(U),K=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 255},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)},t}(U),Z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},t.prototype.set=function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)},t}(U),Y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)},t}(U),Q=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}},t}(U),$=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return[0,1]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)},t}(U),ee=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}},t}(U),te=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.LESS},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)},t}(U),ne=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}},t}(U),re=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.ONE,e.ZERO]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)},t}(U),ae=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getDefault=function(){return e.Color.transparent},n.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},n}(U),ie=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.FUNC_ADD},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)},t}(U),oe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}},t}(U),se=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.BACK},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)},t}(U),ue=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.CCW},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)},t}(U),le=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)},t}(U),ce=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.TEXTURE0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)},t}(U),he=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(U),fe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}},t}(U),de=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(U),pe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}},t}(U),me=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}},t}(U),ve=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1},t}(U),ye=function(e){function t(t){e.call(this,t),this.vao=t.extVertexArrayObject}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)},t}(U),ge=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 4},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}},t}(U),_e=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}},t}(U),be=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}},t}(U),xe=function(e){function t(t,n){e.call(this,t),this.context=t,this.parent=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t}(U),we=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.setDirty=function(){this.dirty=!0},t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},t}(xe),ke=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(xe),Ce=function(e,t,n,r){this.context=e,this.width=t,this.height=n;var a=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new we(e,a),r&&(this.depthAttachment=new ke(e,a))};Ce.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n)}e.deleteFramebuffer(this.framebuffer)};var Se=function(e,t,n){this.func=e,this.mask=t,this.range=n};Se.ReadOnly=!1,Se.ReadWrite=!0,Se.disabled=new Se(519,Se.ReadOnly,[0,1]);var Ie=function(e,t,n,r,a,i){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=a,this.pass=i};Ie.disabled=new Ie({func:519,mask:0},0,0,7680,7680,7680);var De=function(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n};De.disabled=new De(De.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),De.unblended=new De(De.Replace,e.Color.transparent,[!0,!0,!0,!0]),De.alphaBlended=new De([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Ae=function(e,t,n){this.enable=e,this.mode=t,this.frontFace=n};Ae.disabled=new Ae(!1,1029,2305),Ae.backCCW=new Ae(!0,1029,2305);var Te=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new j(this),this.clearDepth=new H(this),this.clearStencil=new G(this),this.colorMask=new J(this),this.depthMask=new X(this),this.stencilMask=new K(this),this.stencilFunc=new Z(this),this.stencilOp=new Y(this),this.stencilTest=new Q(this),this.depthRange=new $(this),this.depthTest=new ee(this),this.depthFunc=new te(this),this.blend=new ne(this),this.blendFunc=new re(this),this.blendColor=new ae(this),this.blendEquation=new ie(this),this.cullFace=new oe(this),this.cullFaceSide=new se(this),this.frontFace=new ue(this),this.program=new le(this),this.activeTexture=new ce(this),this.viewport=new he(this),this.bindFramebuffer=new fe(this),this.bindRenderbuffer=new de(this),this.bindTexture=new pe(this),this.bindVertexBuffer=new me(this),this.bindElementBuffer=new ve(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ye(this),this.pixelStoreUnpack=new ge(this),this.pixelStoreUnpackPremultiplyAlpha=new _e(this),this.pixelStoreUnpackFlipY=new be(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query")};Te.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Te.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Te.prototype.createIndexBuffer=function(e,t){return new W(this,e,t)},Te.prototype.createVertexBuffer=function(e,t,n){return new V(this,e,t,n)},Te.prototype.createRenderbuffer=function(e,t,n){var r=this.gl,a=r.createRenderbuffer();return this.bindRenderbuffer.set(a),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),a},Te.prototype.createFramebuffer=function(e,t,n){return new Ce(this,e,t,n)},Te.prototype.clear=function(e){var t=e.color,n=e.depth,r=this.gl,a=0;t&&(a|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(a|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(a)},Te.prototype.setCullFace=function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},Te.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},Te.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},Te.prototype.setColorMode=function(t){e.deepEqual(t.blendFunction,De.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},Te.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ee=function(t){function n(n,r,a){var i=this;t.call(this),this.id=n,this.dispatcher=a,this.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))})),this.on("error",(function(){i._sourceErrored=!0})),this._source=function(t,n,r,a){var i=new P[n.type](t,n,r,a);if(i.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+i.id);return e.bindAll(["load","abort","unload","serialize","prepare"],i),i}(n,r,a,this),this._tiles={},this._cache=new B(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},n.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},n.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))},n.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return e.values(this._tiles).map((function(e){return e.tileID})).sort(Re).map((function(e){return e.key}))},n.prototype.getRenderableIds=function(t){var n=this,r=[];for(var a in this._tiles)this._isIdRenderable(a,t)&&r.push(this._tiles[a]);return t?r.sort((function(t,r){var a=t.tileID,i=r.tileID,o=new e.Point(a.canonical.x,a.canonical.y)._rotate(n.transform.angle),s=new e.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle);return a.overscaledZ-i.overscaledZ||s.y-o.y||s.x-o.x})).map((function(e){return e.tileID.key})):r.map((function(e){return e.tileID})).sort(Re).map((function(e){return e.key}))},n.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)},n.prototype._isIdRenderable=function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")},n.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},n.prototype._tileLoaded=function(t,n,r,a){if(a)return t.state="errored",void(404!==a.status?this._source.fire(new e.ErrorEvent(a,{tile:t})):this.update(this.transform));t.timeAdded=e.browser.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(n,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:t,coord:t.tileID}))},n.prototype._backfillDEM=function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];if(e.neighboringTiles&&e.neighboringTiles[r]){var a=this.getTileByID(r);i(e,a),i(a,e)}}function i(e,t){e.needsHillshadePrepare=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,a=Math.pow(2,e.tileID.canonical.z),i=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+a)?n+=a:1===Math.abs(n-a)&&(n-=a)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[i]&&(e.neighboringTiles[i].backfilled=!0)))}},n.prototype.getTile=function(e){return this.getTileByID(e.key)},n.prototype.getTileByID=function(e){return this._tiles[e]},n.prototype._retainLoadedChildren=function(e,t,n,r){for(var a in this._tiles){var i=this._tiles[a];if(!(r[a]||!i.hasData()||i.tileID.overscaledZ<=t||i.tileID.overscaledZ>n)){for(var o=i.tileID;i&&i.tileID.overscaledZ>t+1;){var s=i.tileID.scaledTo(i.tileID.overscaledZ-1);(i=this._tiles[s.key])&&i.hasData()&&(o=s)}for(var u=o;u.overscaledZ>t;)if(e[(u=u.scaledTo(u.overscaledZ-1)).key]){r[o.key]=o;break}}}},n.prototype.findLoadedParent=function(e,t){if(e.key in this._loadedParentTiles){var n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(var r=e.overscaledZ-1;r>=t;r--){var a=e.scaledTo(r),i=this._getLoadedTile(a);if(i)return i}},n.prototype._getLoadedTile=function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)},n.prototype.updateCacheSize=function(e){var t=Math.ceil(e.width/this._source.tileSize)+1,n=Math.ceil(e.height/this._source.tileSize)+1,r=Math.floor(t*n*5),a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(a)},n.prototype.handleWrapJump=function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var n={};for(var r in this._tiles){var a=this._tiles[r];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),n[a.tileID.key]=a}for(var i in this._tiles=n,this._timers)clearTimeout(this._timers[i]),delete this._timers[i];for(var o in this._tiles)this._setTileReloadTimer(o,this._tiles[o])}},n.prototype.update=function(t){var r=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var a;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?a=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(t){return new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)})):(a=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(a=a.filter((function(e){return r._source.hasTile(e)})))):a=[];var i=t.coveringZoomLevel(this._source),o=Math.max(i-n.maxOverzooming,this._source.minzoom),s=Math.max(i+n.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(a,i);if(Oe(this._source.type)){for(var l={},c={},h=0,f=Object.keys(u);h<f.length;h+=1){var d=f[h],p=u[d],m=this._tiles[d];if(m&&!(m.fadeEndTime&&m.fadeEndTime<=e.browser.now())){var v=this.findLoadedParent(p,o);v&&(this._addTile(v.tileID),l[v.tileID.key]=v.tileID),c[d]=p}}for(var y in this._retainLoadedChildren(c,i,s,u),l)u[y]||(this._coveredTiles[y]=!0,u[y]=l[y])}for(var g in u)this._tiles[g].clearFadeHold();for(var _=0,b=e.keysDifference(this._tiles,u);_<b.length;_+=1){var x=b[_],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},n.prototype.releaseSymbolFadeTiles=function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},n.prototype._updateRetainedTiles=function(e,t){for(var r={},a={},i=Math.max(t-n.maxOverzooming,this._source.minzoom),o=Math.max(t+n.maxUnderzooming,this._source.minzoom),s={},u=0,l=e;u<l.length;u+=1){var c=l[u],h=this._addTile(c);r[c.key]=c,h.hasData()||t<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,t,o,r);for(var f=0,d=e;f<d.length;f+=1){var p=d[f],m=this._tiles[p.key];if(!m.hasData()){if(t+1>this._source.maxzoom){var v=p.children(this._source.maxzoom)[0],y=this.getTile(v);if(y&&y.hasData()){r[v.key]=v;continue}}else{var g=p.children(this._source.maxzoom);if(r[g[0].key]&&r[g[1].key]&&r[g[2].key]&&r[g[3].key])continue}for(var _=m.wasRequested(),b=p.overscaledZ-1;b>=i;--b){var x=p.scaledTo(b);if(a[x.key])break;if(a[x.key]=!0,!(m=this.getTile(x))&&_&&(m=this._addTile(x)),m&&(r[x.key]=x,_=m.wasRequested(),m.hasData()))break}}}return r},n.prototype._updateLoadedParentTileCache=function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],n=void 0,r=this._tiles[e].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);var a=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(a))break;r=a}for(var i=0,o=t;i<o.length;i+=1)this._loadedParentTiles[o[i]]=n}},n.prototype._addTile=function(t){var n=this._tiles[t.key];if(n)return n;(n=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,n),n.tileID=t,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,n)));var r=Boolean(n);return r||(n=new e.Tile(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,t.key,n.state))),n?(n.uses++,this._tiles[t.key]=n,r||this._source.fire(new e.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((function(){n._reloadTile(e,"expired"),delete n._timers[e]}),r))},n.prototype._removeTile=function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},n.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},n.prototype.tilesIn=function(t,n,r){var a=this,i=[],o=this.transform;if(!o)return i;for(var s=r?o.getCameraQueryGeometry(t):t,u=t.map((function(e){return o.pointCoordinate(e)})),l=s.map((function(e){return o.pointCoordinate(e)})),c=this.getIds(),h=1/0,f=1/0,d=-1/0,p=-1/0,m=0,v=l;m<v.length;m+=1){var y=v[m];h=Math.min(h,y.x),f=Math.min(f,y.y),d=Math.max(d,y.x),p=Math.max(p,y.y)}for(var g=function(t){var r=a._tiles[c[t]];if(!r.holdingForFade()){var s=r.tileID,m=Math.pow(2,o.zoom-r.tileID.overscaledZ),v=n*r.queryPadding*e.EXTENT/r.tileSize/m,y=[s.getTilePoint(new e.MercatorCoordinate(h,f)),s.getTilePoint(new e.MercatorCoordinate(d,p))];if(y[0].x-v<e.EXTENT&&y[0].y-v<e.EXTENT&&y[1].x+v>=0&&y[1].y+v>=0){var g=u.map((function(e){return s.getTilePoint(e)})),_=l.map((function(e){return s.getTilePoint(e)}));i.push({tile:r,tileID:s,queryGeometry:g,cameraQueryGeometry:_,scale:m})}}},_=0;_<c.length;_++)g(_);return i},n.prototype.getVisibleCoordinates=function(e){for(var t=this,n=this.getRenderableIds(e).map((function(e){return t._tiles[e].tileID})),r=0,a=n;r<a.length;r+=1){var i=a[r];i.posMatrix=this.transform.calculatePosMatrix(i.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Oe(this._source.type))for(var t in this._tiles){var n=this._tiles[t];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=e.browser.now())return!0}return!1},n.prototype.setFeatureState=function(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)},n.prototype.removeFeatureState=function(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)},n.prototype.getFeatureState=function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)},n.prototype.setDependencies=function(e,t,n){var r=this._tiles[e];r&&r.setDependencies(t,n)},n.prototype.reloadTilesForDependencies=function(e,t){for(var n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(n,"reloading");this._cache.filter((function(n){return!n.hasDependency(e,t)}))},n}(e.Evented);function Re(e,t){var n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Oe(e){return"raster"===e||"image"===e||"video"===e}function Me(){return new e.window.Worker(Ga.workerUrl)}Ee.maxOverzooming=10,Ee.maxUnderzooming=3;var Ne="mapboxgl_preloaded_worker_pool",Pe=function(){this.active={}};Pe.prototype.acquire=function(e){if(!this.workers)for(this.workers=[];this.workers.length<Pe.workerCount;)this.workers.push(new Me);return this.active[e]=!0,this.workers.slice()},Pe.prototype.release=function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)},Pe.prototype.isPreloaded=function(){return!!this.active[Ne]},Pe.prototype.numActive=function(){return Object.keys(this.active).length};var Fe,Le=Math.floor(e.browser.hardwareConcurrency/2);function ze(){return Fe||(Fe=new Pe),Fe}function Be(t,n){var r={};for(var a in t)"ref"!==a&&(r[a]=t[a]);return e.refProperties.forEach((function(e){e in n&&(r[e]=n[e])})),r}function We(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=Be(e[r],t[e[r].ref]));return e}Pe.workerCount=Math.max(Math.min(Le,6),1);var qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ve(e,t,n){n.push({command:qe.addSource,args:[e,t[e]]})}function Ue(e,t,n){t.push({command:qe.removeSource,args:[e]}),n[e]=!0}function je(e,t,n,r){Ue(e,n,r),Ve(e,t,n)}function He(t,n,r){var a;for(a in t[r])if(t[r].hasOwnProperty(a)&&"data"!==a&&!e.deepEqual(t[r][a],n[r][a]))return!1;for(a in n[r])if(n[r].hasOwnProperty(a)&&"data"!==a&&!e.deepEqual(t[r][a],n[r][a]))return!1;return!0}function Ge(t,n,r,a,i,o){var s;for(s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(e.deepEqual(t[s],n[s])||r.push({command:o,args:[a,s,n[s],i]}));for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e.deepEqual(t[s],n[s])||r.push({command:o,args:[a,s,n[s],i]}))}function Je(e){return e.id}function Xe(e,t){return e[t.id]=t,e}var Ke=function(e,t){this.reset(e,t)};Ke.prototype.reset=function(e,t){this.points=e||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Ke.prototype.lerp=function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var n=1,r=this._distances[n],a=t*this.paddedLength+this.padding;r<a&&n<this._distances.length;)r=this._distances[++n];var i=n-1,o=this._distances[i],s=r-o,u=s>0?(a-o)/s:0;return this.points[i].mult(1-u).add(this.points[n].mult(u))};var Ze=function(e,t,n){var r=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(var i=0;i<this.xCellCount*this.yCellCount;i++)r.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};function Ye(t,n,r,a,i){var o=e.create();return n?(e.scale(o,o,[1/i,1/i,1]),r||e.rotateZ(o,o,a.angle)):e.multiply(o,a.labelPlaneMatrix,t),o}function Qe(t,n,r,a,i){if(n){var o=e.clone(t);return e.scale(o,o,[i,i,1]),r||e.rotateZ(o,o,-a.angle),o}return a.glCoordMatrix}function $e(t,n){var r=[t.x,t.y,0,1];ct(r,r,n);var a=r[3];return{point:new e.Point(r[0]/a,r[1]/a),signedDistanceFromCamera:a}}function et(e,t){return.5+e/t*.5}function tt(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function nt(t,n,r,a,i,o,s,u){var l=a?t.textSizeData:t.iconSizeData,c=e.evaluateSizeForZoom(l,r.transform.zoom),h=[256/r.width*2+1,256/r.height*2+1],f=a?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;f.clear();for(var d=t.lineVertexArray,p=a?t.text.placedSymbolArray:t.icon.placedSymbolArray,m=r.transform.width/r.transform.height,v=!1,y=0;y<p.length;y++){var g=p.get(y);if(g.hidden||g.writingMode===e.WritingMode.vertical&&!v)lt(g.numGlyphs,f);else{v=!1;var _=[g.anchorX,g.anchorY,0,1];if(e.transformMat4(_,_,n),tt(_,h)){var b=et(r.transform.cameraToCenterDistance,_[3]),x=e.evaluateSizeForFeature(l,c,g),w=s?x/b:x*b,k=new e.Point(g.anchorX,g.anchorY),C=$e(k,i).point,S={},I=it(g,w,!1,u,n,i,o,t.glyphOffsetArray,d,f,C,k,S,m);v=I.useVertical,(I.notEnoughRoom||v||I.needsFlipping&&it(g,w,!0,u,n,i,o,t.glyphOffsetArray,d,f,C,k,S,m).notEnoughRoom)&&lt(g.numGlyphs,f)}else lt(g.numGlyphs,f)}}a?t.text.dynamicLayoutVertexBuffer.updateData(f):t.icon.dynamicLayoutVertexBuffer.updateData(f)}function rt(e,t,n,r,a,i,o,s,u,l,c){var h=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,p=t.getoffsetX(s.glyphStartIndex),m=t.getoffsetX(h-1),v=st(e*p,n,r,a,i,o,s.segment,f,d,u,l,c);if(!v)return null;var y=st(e*m,n,r,a,i,o,s.segment,f,d,u,l,c);return y?{first:v,last:y}:null}function at(t,n,r,a){return t===e.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*a?{useVertical:!0}:(t===e.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function it(t,n,r,a,i,o,s,u,l,c,h,f,d,p){var m,v=n/24,y=t.lineOffsetX*v,g=t.lineOffsetY*v;if(t.numGlyphs>1){var _=t.glyphStartIndex+t.numGlyphs,b=t.lineStartIndex,x=t.lineStartIndex+t.lineLength,w=rt(v,u,y,g,r,h,f,t,l,o,d);if(!w)return{notEnoughRoom:!0};var k=$e(w.first.point,s).point,C=$e(w.last.point,s).point;if(a&&!r){var S=at(t.writingMode,k,C,p);if(S)return S}m=[w.first];for(var I=t.glyphStartIndex+1;I<_-1;I++)m.push(st(v*u.getoffsetX(I),y,g,r,h,f,t.segment,b,x,l,o,d));m.push(w.last)}else{if(a&&!r){var D=$e(f,i).point,A=t.lineStartIndex+t.segment+1,T=new e.Point(l.getx(A),l.gety(A)),E=$e(T,i),R=E.signedDistanceFromCamera>0?E.point:ot(f,T,D,1,i),O=at(t.writingMode,D,R,p);if(O)return O}var M=st(v*u.getoffsetX(t.glyphStartIndex),y,g,r,h,f,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,o,d);if(!M)return{notEnoughRoom:!0};m=[M]}for(var N=0,P=m;N<P.length;N+=1){var F=P[N];e.addDynamicAttributes(c,F.point,F.angle)}return{}}function ot(e,t,n,r,a){var i=$e(e.add(e.sub(t)._unit()),a).point,o=n.sub(i);return n.add(o._mult(r/o.mag()))}function st(t,n,r,a,i,o,s,u,l,c,h,f){var d=a?t-n:t+n,p=d>0?1:-1,m=0;a&&(p*=-1,m=Math.PI),p<0&&(m+=Math.PI);for(var v=p>0?u+s:u+s+1,y=i,g=i,_=0,b=0,x=Math.abs(d),w=[];_+b<=x;){if((v+=p)<u||v>=l)return null;if(g=y,w.push(y),void 0===(y=f[v])){var k=new e.Point(c.getx(v),c.gety(v)),C=$e(k,h);if(C.signedDistanceFromCamera>0)y=f[v]=C.point;else{var S=v-p;y=ot(0===_?o:new e.Point(c.getx(S),c.gety(S)),k,g,x-_+1,h)}}_+=b,b=g.dist(y)}var I=(x-_)/b,D=y.sub(g),A=D.mult(I)._add(g);A._add(D._unit()._perp()._mult(r*p));var T=m+Math.atan2(y.y-g.y,y.x-g.x);return w.push(A),{point:A,angle:T,path:w}}Ze.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ze.prototype.insert=function(e,t,n,r,a){this._forEachCell(t,n,r,a,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(a)},Ze.prototype.insertCircle=function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)},Ze.prototype._insertBoxCell=function(e,t,n,r,a,i){this.boxCells[a].push(i)},Ze.prototype._insertCircleCell=function(e,t,n,r,a,i){this.circleCells[a].push(i)},Ze.prototype._query=function(e,t,n,r,a,i){if(n<0||e>this.width||r<0||t>this.height)return!a&&[];var o=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(a)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],h=this.circles[3*u+2];o.push({key:this.circleKeys[u],x1:l-h,y1:c-h,x2:l+h,y2:c+h})}return i?o.filter(i):o}return this._forEachCell(e,t,n,r,this._queryCell,o,{hitTest:a,seenUids:{box:{},circle:{}}},i),a?o.length>0:o},Ze.prototype._queryCircle=function(e,t,n,r,a){var i=e-n,o=e+n,s=t-n,u=t+n;if(o<0||i>this.width||u<0||s>this.height)return!r&&[];var l=[];return this._forEachCell(i,s,o,u,this._queryCellCircle,l,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},a),r?l.length>0:l},Ze.prototype.query=function(e,t,n,r,a){return this._query(e,t,n,r,!1,a)},Ze.prototype.hitTest=function(e,t,n,r,a){return this._query(e,t,n,r,!0,a)},Ze.prototype.hitTestCircle=function(e,t,n,r){return this._queryCircle(e,t,n,!0,r)},Ze.prototype._queryCell=function(e,t,n,r,a,i,o,s){var u=o.seenUids,l=this.boxCells[a];if(null!==l)for(var c=this.bboxes,h=0,f=l;h<f.length;h+=1){var d=f[h];if(!u.box[d]){u.box[d]=!0;var p=4*d;if(e<=c[p+2]&&t<=c[p+3]&&n>=c[p+0]&&r>=c[p+1]&&(!s||s(this.boxKeys[d]))){if(o.hitTest)return i.push(!0),!0;i.push({key:this.boxKeys[d],x1:c[p],y1:c[p+1],x2:c[p+2],y2:c[p+3]})}}}var m=this.circleCells[a];if(null!==m)for(var v=this.circles,y=0,g=m;y<g.length;y+=1){var _=g[y];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(v[b],v[b+1],v[b+2],e,t,n,r)&&(!s||s(this.circleKeys[_]))){if(o.hitTest)return i.push(!0),!0;var x=v[b],w=v[b+1],k=v[b+2];i.push({key:this.circleKeys[_],x1:x-k,y1:w-k,x2:x+k,y2:w+k})}}}},Ze.prototype._queryCellCircle=function(e,t,n,r,a,i,o,s){var u=o.circle,l=o.seenUids,c=this.boxCells[a];if(null!==c)for(var h=this.bboxes,f=0,d=c;f<d.length;f+=1){var p=d[f];if(!l.box[p]){l.box[p]=!0;var m=4*p;if(this._circleAndRectCollide(u.x,u.y,u.radius,h[m+0],h[m+1],h[m+2],h[m+3])&&(!s||s(this.boxKeys[p])))return i.push(!0),!0}}var v=this.circleCells[a];if(null!==v)for(var y=this.circles,g=0,_=v;g<_.length;g+=1){var b=_[g];if(!l.circle[b]){l.circle[b]=!0;var x=3*b;if(this._circlesCollide(y[x],y[x+1],y[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[b])))return i.push(!0),!0}}},Ze.prototype._forEachCell=function(e,t,n,r,a,i,o,s){for(var u=this._convertToXCellCoord(e),l=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),f=u;f<=c;f++)for(var d=l;d<=h;d++)if(a.call(this,e,t,n,r,this.xCellCount*d+f,i,o,s))return},Ze.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},Ze.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},Ze.prototype._circlesCollide=function(e,t,n,r,a,i){var o=r-e,s=a-t,u=n+i;return u*u>o*o+s*s},Ze.prototype._circleAndRectCollide=function(e,t,n,r,a,i,o){var s=(i-r)/2,u=Math.abs(e-(r+s));if(u>s+n)return!1;var l=(o-a)/2,c=Math.abs(t-(a+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var h=u-s,f=c-l;return h*h+f*f<=n*n};var ut=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function lt(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(ut,3*r)}}function ct(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[4]*a+n[12],e[1]=n[1]*r+n[5]*a+n[13],e[3]=n[3]*r+n[7]*a+n[15],e}var ht=function(e,t,n){void 0===t&&(t=new Ze(e.width+200,e.height+200,25)),void 0===n&&(n=new Ze(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200};function ft(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}ht.prototype.placeCollisionBox=function(e,t,n,r,a){var i=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),o=n*i.perspectiveRatio,s=e.x1*o+i.point.x,u=e.y1*o+i.point.y,l=e.x2*o+i.point.x,c=e.y2*o+i.point.y;return!this.isInsideGrid(s,u,l,c)||!t&&this.grid.hitTest(s,u,l,c,a)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},ht.prototype.placeCollisionCircles=function(t,n,r,a,i,o,s,u,l,c,h,f,d){var p=[],m=new e.Point(n.anchorX,n.anchorY),v=$e(m,o),y=et(this.transform.cameraToCenterDistance,v.signedDistanceFromCamera),g=(c?i/y:i*y)/e.ONE_EM,_=$e(m,s).point,b=rt(g,a,n.lineOffsetX*g,n.lineOffsetY*g,!1,_,m,n,r,s,{}),x=!1,w=!1,k=!0;if(b){for(var C=.5*f*y+d,S=new e.Point(-100,-100),I=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),D=new Ke,A=b.first,T=b.last,E=[],R=A.path.length-1;R>=1;R--)E.push(A.path[R]);for(var O=1;O<T.path.length;O++)E.push(T.path[O]);var M=2.5*C;if(u){var N=E.map((function(e){return $e(e,u)}));E=N.some((function(e){return e.signedDistanceFromCamera<=0}))?[]:N.map((function(e){return e.point}))}var P=[];if(E.length>0){for(var F=E[0].clone(),L=E[0].clone(),z=1;z<E.length;z++)F.x=Math.min(F.x,E[z].x),F.y=Math.min(F.y,E[z].y),L.x=Math.max(L.x,E[z].x),L.y=Math.max(L.y,E[z].y);P=F.x>=S.x&&L.x<=I.x&&F.y>=S.y&&L.y<=I.y?[E]:L.x<S.x||F.x>I.x||L.y<S.y||F.y>I.y?[]:e.clipLine([E],S.x,S.y,I.x,I.y)}for(var B=0,W=P;B<W.length;B+=1){var q;D.reset(W[B],.25*C),q=D.length<=.5*C?1:Math.ceil(D.paddedLength/M)+1;for(var V=0;V<q;V++){var U=V/Math.max(q-1,1),j=D.lerp(U),H=j.x+100,G=j.y+100;p.push(H,G,C,0);var J=H-C,X=G-C,K=H+C,Z=G+C;if(k=k&&this.isOffscreen(J,X,K,Z),w=w||this.isInsideGrid(J,X,K,Z),!t&&this.grid.hitTestCircle(H,G,C,h)&&(x=!0,!l))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!l&&x||!w?[]:p,offscreen:k,collisionDetected:x}},ht.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,a=1/0,i=-1/0,o=-1/0,s=0,u=t;s<u.length;s+=1){var l=u[s],c=new e.Point(l.x+100,l.y+100);r=Math.min(r,c.x),a=Math.min(a,c.y),i=Math.max(i,c.x),o=Math.max(o,c.y),n.push(c)}for(var h={},f={},d=0,p=this.grid.query(r,a,i,o).concat(this.ignoredGrid.query(r,a,i,o));d<p.length;d+=1){var m=p[d],v=m.key;if(void 0===h[v.bucketInstanceId]&&(h[v.bucketInstanceId]={}),!h[v.bucketInstanceId][v.featureIndex]){var y=[new e.Point(m.x1,m.y1),new e.Point(m.x2,m.y1),new e.Point(m.x2,m.y2),new e.Point(m.x1,m.y2)];e.polygonIntersectsPolygon(n,y)&&(h[v.bucketInstanceId][v.featureIndex]=!0,void 0===f[v.bucketInstanceId]&&(f[v.bucketInstanceId]=[]),f[v.bucketInstanceId].push(v.featureIndex))}}return f},ht.prototype.insertCollisionBox=function(e,t,n,r,a){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:a},e[0],e[1],e[2],e[3])},ht.prototype.insertCollisionCircles=function(e,t,n,r,a){for(var i=t?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:r,collisionGroupID:a},s=0;s<e.length;s+=4)i.insertCircle(o,e[s],e[s+1],e[s+2])},ht.prototype.projectAndGetPerspectiveRatio=function(t,n,r){var a=[n,r,0,1];return ct(a,a,t),{point:new e.Point((a[0]/a[3]+1)/2*this.transform.width+100,(-a[1]/a[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/a[3]*.5}},ht.prototype.isOffscreen=function(e,t,n,r){return n<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary},ht.prototype.isInsideGrid=function(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary},ht.prototype.getViewportMatrix=function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t};var dt=function(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n};dt.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var pt=function(e,t,n,r,a){this.text=new dt(e?e.text:null,t,n,a),this.icon=new dt(e?e.icon:null,t,r,a)};pt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var mt=function(e,t,n){this.text=e,this.icon=t,this.skipFade=n},vt=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},yt=function(e,t,n,r,a){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=a},gt=function(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}};function _t(t,n,r,a,i){var o=e.getAnchorAlignment(t),s=-(o.horizontalAlign-.5)*n,u=-(o.verticalAlign-.5)*r,l=e.evaluateVariableOffset(t,a);return new e.Point(s+l[0]*i,u+l[1]*i)}function bt(t,n,r,a,i,o){var s=t.x1,u=t.x2,l=t.y1,c=t.y2,h=t.anchorPointX,f=t.anchorPointY,d=new e.Point(n,r);return a&&d._rotate(i?o:-o),{x1:s+d.x,y1:l+d.y,x2:u+d.x,y2:c+d.y,anchorPointX:h,anchorPointY:f}}gt.prototype.get=function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]};var xt=function(e,t,n,r){this.transform=e.clone(),this.collisionIndex=new ht(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new gt(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};function wt(e,t,n,r,a){e.emplaceBack(t?1:0,n?1:0,r||0,a||0),e.emplaceBack(t?1:0,n?1:0,r||0,a||0),e.emplaceBack(t?1:0,n?1:0,r||0,a||0),e.emplaceBack(t?1:0,n?1:0,r||0,a||0)}xt.prototype.getBucketParts=function(t,n,r,a){var i=r.getBucket(n),o=r.latestFeatureIndex;if(i&&o&&n.id===i.layerIds[0]){var s=r.collisionBoxArray,u=i.layers[0].layout,l=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/e.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),f="map"===u.get("text-pitch-alignment"),d="map"===u.get("text-rotation-alignment"),p=ft(r,1,this.transform.zoom),m=Ye(h,f,d,this.transform,p),v=null;if(f){var y=Qe(h,f,d,this.transform,p);v=e.multiply([],this.transform.labelPlaneMatrix,y)}this.retainedQueryData[i.bucketInstanceId]=new yt(i.bucketInstanceId,o,i.sourceLayerIndex,i.index,r.tileID);var g={bucket:i,layout:u,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:v,scale:l,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(i.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(i.sourceID)};if(a)for(var _=0,b=i.sortKeyRanges;_<b.length;_+=1){var x=b[_];t.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:g})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:i.symbolInstances.length,parameters:g})}},xt.prototype.attemptAnchorPlacement=function(e,t,n,r,a,i,o,s,u,l,c,h,f,d,p){var m,v=[h.textOffset0,h.textOffset1],y=_t(e,n,r,v,a),g=this.collisionIndex.placeCollisionBox(bt(t,y.x,y.y,i,o,this.transform.angle),c,s,u,l.predicate);if(!p||0!==this.collisionIndex.placeCollisionBox(bt(p,y.x,y.y,i,o,this.transform.angle),c,s,u,l.predicate).box.length)return g.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(m=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:v,width:n,height:r,anchor:e,textBoxScale:a,prevAnchor:m},this.markUsedJustification(f,e,h,d),f.allowVerticalPlacement&&(this.markUsedOrientation(f,d,h),this.placedOrientations[h.crossTileID]=d),{shift:y,placedGlyphBoxes:g}):void 0},xt.prototype.placeLayerBucketPart=function(t,n,r){var a=this,i=t.parameters,o=i.bucket,s=i.layout,u=i.posMatrix,l=i.textLabelPlaneMatrix,c=i.labelToScreenMatrix,h=i.textPixelRatio,f=i.holdingForFade,d=i.collisionBoxArray,p=i.partiallyEvaluatedTextSize,m=i.collisionGroup,v=s.get("text-optional"),y=s.get("icon-optional"),g=s.get("text-allow-overlap"),_=s.get("icon-allow-overlap"),b="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),k="viewport-y"===s.get("symbol-z-order"),C=g&&(_||!o.hasIconData()||y),S=_&&(g||!o.hasTextData()||v);!o.collisionArrays&&d&&o.deserializeCollisionBoxes(d);var I=function(t,i){if(!n[t.crossTileID])if(f)a.placements[t.crossTileID]=new mt(!1,!1,!1);else{var d,k=!1,I=!1,D=!0,A=null,T={box:null,offscreen:null},E={box:null,offscreen:null},R=null,O=null,M=0,N=0,P=0;i.textFeatureIndex?M=i.textFeatureIndex:t.useRuntimeCollisionCircles&&(M=t.featureIndex),i.verticalTextFeatureIndex&&(N=i.verticalTextFeatureIndex);var F=i.textBox;if(F){var L=function(n){var r=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&a.prevPlacement){var i=a.prevPlacement.placedOrientations[t.crossTileID];i&&(a.placedOrientations[t.crossTileID]=i,a.markUsedOrientation(o,r=i,t))}return r},z=function(n,r){if(o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&i.verticalTextBox)for(var a=0,s=o.writingModes;a<s.length&&(s[a]===e.WritingMode.vertical?(T=r(),E=T):T=n(),!(T&&T.box&&T.box.length));a+=1);else T=n()};if(s.get("text-variable-anchor")){var B=s.get("text-variable-anchor");if(a.prevPlacement&&a.prevPlacement.variableOffsets[t.crossTileID]){var W=a.prevPlacement.variableOffsets[t.crossTileID];B.indexOf(W.anchor)>0&&(B=B.filter((function(e){return e!==W.anchor}))).unshift(W.anchor)}var q=function(e,n,r){for(var i=e.x2-e.x1,s=e.y2-e.y1,l=t.textBoxScale,c=w&&!_?n:null,f={box:[],offscreen:!1},d=g?2*B.length:B.length,p=0;p<d;++p){var v=a.attemptAnchorPlacement(B[p%B.length],e,i,s,l,b,x,h,u,m,p>=B.length,t,o,r,c);if(v&&(f=v.placedGlyphBoxes)&&f.box&&f.box.length){k=!0,A=v.shift;break}}return f};z((function(){return q(F,i.iconBox,e.WritingMode.horizontal)}),(function(){var n=i.verticalTextBox;return o.allowVerticalPlacement&&!(T&&T.box&&T.box.length)&&t.numVerticalGlyphVertices>0&&n?q(n,i.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),T&&(k=T.box,D=T.offscreen);var V=L(T&&T.box);if(!k&&a.prevPlacement){var U=a.prevPlacement.variableOffsets[t.crossTileID];U&&(a.variableOffsets[t.crossTileID]=U,a.markUsedJustification(o,U.anchor,t,V))}}else{var j=function(e,n){var r=a.collisionIndex.placeCollisionBox(e,g,h,u,m.predicate);return r&&r.box&&r.box.length&&(a.markUsedOrientation(o,n,t),a.placedOrientations[t.crossTileID]=n),r};z((function(){return j(F,e.WritingMode.horizontal)}),(function(){var n=i.verticalTextBox;return o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n?j(n,e.WritingMode.vertical):{box:null,offscreen:null}})),L(T&&T.box&&T.box.length)}}if(k=(d=T)&&d.box&&d.box.length>0,D=d&&d.offscreen,t.useRuntimeCollisionCircles){var H=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),G=e.evaluateSizeForFeature(o.textSizeData,p,H),J=s.get("text-padding");R=a.collisionIndex.placeCollisionCircles(g,H,o.lineVertexArray,o.glyphOffsetArray,G,u,l,c,r,x,m.predicate,t.collisionCircleDiameter,J),k=g||R.circles.length>0&&!R.collisionDetected,D=D&&R.offscreen}if(i.iconFeatureIndex&&(P=i.iconFeatureIndex),i.iconBox){var X=function(e){var t=w&&A?bt(e,A.x,A.y,b,x,a.transform.angle):e;return a.collisionIndex.placeCollisionBox(t,_,h,u,m.predicate)};I=E&&E.box&&E.box.length&&i.verticalIconBox?(O=X(i.verticalIconBox)).box.length>0:(O=X(i.iconBox)).box.length>0,D=D&&O.offscreen}var K=v||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,Z=y||0===t.numIconVertices;if(K||Z?Z?K||(I=I&&k):k=I&&k:I=k=I&&k,k&&d&&d.box&&a.collisionIndex.insertCollisionBox(d.box,s.get("text-ignore-placement"),o.bucketInstanceId,E&&E.box&&N?N:M,m.ID),I&&O&&a.collisionIndex.insertCollisionBox(O.box,s.get("icon-ignore-placement"),o.bucketInstanceId,P,m.ID),R&&(k&&a.collisionIndex.insertCollisionCircles(R.circles,s.get("text-ignore-placement"),o.bucketInstanceId,M,m.ID),r)){var Y=o.bucketInstanceId,Q=a.collisionCircleArrays[Y];void 0===Q&&(Q=a.collisionCircleArrays[Y]=new vt);for(var $=0;$<R.circles.length;$+=4)Q.circles.push(R.circles[$+0]),Q.circles.push(R.circles[$+1]),Q.circles.push(R.circles[$+2]),Q.circles.push(R.collisionDetected?1:0)}a.placements[t.crossTileID]=new mt(k||C,I||S,D||o.justReloaded),n[t.crossTileID]=!0}};if(k)for(var D=o.getSortedSymbolIndexes(this.transform.angle),A=D.length-1;A>=0;--A){var T=D[A];I(o.symbolInstances.get(T),o.collisionArrays[T])}else for(var E=t.symbolInstanceStart;E<t.symbolInstanceEnd;E++)I(o.symbolInstances.get(E),o.collisionArrays[E]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){var R=this.collisionCircleArrays[o.bucketInstanceId];e.invert(R.invProjMatrix,u),R.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1},xt.prototype.markUsedJustification=function(t,n,r,a){var i;i=a===e.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(n)];for(var o=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];o<s.length;o+=1){var u=s[o];u>=0&&(t.text.placedSymbolArray.get(u).crossTileID=i>=0&&u!==i?0:r.crossTileID)}},xt.prototype.markUsedOrientation=function(t,n,r){for(var a=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,i=n===e.WritingMode.vertical?n:0,o=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];o<s.length;o+=1)t.text.placedSymbolArray.get(s[o]).placedOrientation=a;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=i)},xt.prototype.commit=function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var r=t?t.symbolFadeChange(e):1,a=t?t.opacities:{},i=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],l=a[s];l?(this.opacities[s]=new pt(l,r,u.text,u.icon),n=n||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[s]=new pt(null,r,u.text,u.icon,u.skipFade),n=n||u.text||u.icon)}for(var c in a){var h=a[c];if(!this.opacities[c]){var f=new pt(h,r,!1,!1);f.isHidden()||(this.opacities[c]=f,n=n||h.text.placed||h.icon.placed)}}for(var d in i)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=i[d]);for(var p in o)this.placedOrientations[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.placedOrientations[p]=o[p]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},xt.prototype.updateLayerOpacities=function(e,t){for(var n={},r=0,a=t;r<a.length;r+=1){var i=a[r],o=i.getBucket(e);o&&i.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,n,i.collisionBoxArray)}},xt.prototype.updateBucketOpacities=function(t,n,r){var a=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var i=t.layers[0].layout,o=new pt(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),u=i.get("icon-allow-overlap"),l=i.get("text-variable-anchor"),c="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),f="none"!==i.get("icon-text-fit"),d=new pt(null,0,s&&(u||!t.hasIconData()||i.get("icon-optional")),u&&(s||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);for(var p=function(e,t,n){for(var r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)},m=function(r){var i=t.symbolInstances.get(r),s=i.numHorizontalGlyphVertices,u=i.numVerticalGlyphVertices,m=i.crossTileID,v=a.opacities[m];n[m]?v=o:v||(a.opacities[m]=v=d),n[m]=!0;var y=i.numIconVertices>0,g=a.placedOrientations[i.crossTileID],_=g===e.WritingMode.vertical,b=g===e.WritingMode.horizontal||g===e.WritingMode.horizontalOnly;if(s>0||u>0){var x=Et(v.text);p(t.text,s,_?Rt:x),p(t.text,u,b?Rt:x);var w=v.text.isHidden();[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=w||_?1:0)})),i.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).hidden=w||b?1:0);var k=a.variableOffsets[i.crossTileID];k&&a.markUsedJustification(t,k.anchor,i,g);var C=a.placedOrientations[i.crossTileID];C&&(a.markUsedJustification(t,"left",i,C),a.markUsedOrientation(t,C,i))}if(y){var S=Et(v.icon),I=!(f&&i.verticalPlacedIconSymbolIndex&&_);i.placedIconSymbolIndex>=0&&(p(t.icon,i.numIconVertices,I?S:Rt),t.icon.placedSymbolArray.get(i.placedIconSymbolIndex).hidden=v.icon.isHidden()),i.verticalPlacedIconSymbolIndex>=0&&(p(t.icon,i.numVerticalIconVertices,I?Rt:S),t.icon.placedSymbolArray.get(i.verticalPlacedIconSymbolIndex).hidden=v.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var D=t.collisionArrays[r];if(D){var A=new e.Point(0,0);if(D.textBox||D.verticalTextBox){var T=!0;if(l){var E=a.variableOffsets[m];E?(A=_t(E.anchor,E.width,E.height,E.textOffset,E.textBoxScale),c&&A._rotate(h?a.transform.angle:-a.transform.angle)):T=!1}D.textBox&&wt(t.textCollisionBox.collisionVertexArray,v.text.placed,!T||_,A.x,A.y),D.verticalTextBox&&wt(t.textCollisionBox.collisionVertexArray,v.text.placed,!T||b,A.x,A.y)}var R=Boolean(!b&&D.verticalIconBox);D.iconBox&&wt(t.iconCollisionBox.collisionVertexArray,v.icon.placed,R,f?A.x:0,f?A.y:0),D.verticalIconBox&&wt(t.iconCollisionBox.collisionVertexArray,v.icon.placed,!R,f?A.x:0,f?A.y:0)}}},v=0;v<t.symbolInstances.length;v++)m(v);if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var y=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=y.invProjMatrix,t.placementViewportMatrix=y.viewportMatrix,t.collisionCircleArray=y.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}},xt.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},xt.prototype.zoomAdjustment=function(e){return Math.max(0,(this.transform.zoom-e)/1.5)},xt.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},xt.prototype.stillRecent=function(e,t){var n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e},xt.prototype.setStale=function(){this.stale=!0};var kt=Math.pow(2,25),Ct=Math.pow(2,24),St=Math.pow(2,17),It=Math.pow(2,16),Dt=Math.pow(2,9),At=Math.pow(2,8),Tt=Math.pow(2,1);function Et(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*kt+t*Ct+n*St+t*It+n*Dt+t*At+n*Tt+t}var Rt=0,Ot=function(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ot.prototype.continuePlacement=function(e,t,n,r,a){for(var i=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(i,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,a())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,i.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<i.length;)if(t.placeLayerBucketPart(i[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,a())return!0;return!1};var Mt=function(e,t,n,r,a,i,o){this.placement=new xt(e,a,i,o),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};Mt.prototype.isDone=function(){return this._done},Mt.prototype.continuePlacement=function(t,n,r){for(var a=this,i=e.browser.now(),o=function(){var t=e.browser.now()-i;return!a._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=n[t[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new Ot(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Mt.prototype.commit=function(e){return this.placement.commit(e),this.placement};var Nt=512/e.EXTENT/2,Pt=function(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<t.length;r++){var a=t.get(r),i=a.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:a.crossTileID,coord:this.getScaledCoordinates(a,e)})}};Pt.prototype.getScaledCoordinates=function(t,n){var r=Nt/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.anchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.anchorY)*r)}},Pt.prototype.findMatches=function(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),a=0;a<e.length;a++){var i=e.get(a);if(!i.crossTileID){var o=this.indexedSymbolInstances[i.key];if(o)for(var s=this.getScaledCoordinates(i,t),u=0,l=o;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,i.crossTileID=c.crossTileID;break}}}}};var Ft=function(){this.maxCrossTileID=0};Ft.prototype.generate=function(){return++this.maxCrossTileID};var Lt=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Lt.prototype.handleWrapJump=function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],a={};for(var i in r){var o=r[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),a[o.tileID.key]=o}this.indexes[n]=a}this.lng=e},Lt.prototype.addBucket=function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var a=this.usedCrossTileIDs[e.overscaledZ];for(var i in this.indexes){var o=this.indexes[i];if(Number(i)>e.overscaledZ)for(var s in o){var u=o[s];u.tileID.isChildOf(e)&&u.findMatches(t.symbolInstances,e,a)}else{var l=o[e.scaledTo(Number(i)).key];l&&l.findMatches(t.symbolInstances,e,a)}}for(var c=0;c<t.symbolInstances.length;c++){var h=t.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),a[h.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Pt(e,t.symbolInstances,t.bucketInstanceId),!0},Lt.prototype.removeBucketCrossTileIDs=function(e,t){for(var n in t.indexedSymbolInstances)for(var r=0,a=t.indexedSymbolInstances[n];r<a.length;r+=1)delete this.usedCrossTileIDs[e][a[r].crossTileID]},Lt.prototype.removeStaleBuckets=function(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var a in r)e[r[a].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[a]),delete r[a],t=!0)}return t};var zt=function(){this.layerIndexes={},this.crossTileIDs=new Ft,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};zt.prototype.addLayer=function(e,t,n){var r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new Lt);var a=!1,i={};r.handleWrapJump(n);for(var o=0,s=t;o<s.length;o+=1){var u=s[o],l=u.getBucket(e);l&&e.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(a=!0),i[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(i)&&(a=!0),a},zt.prototype.pruneUnusedLayers=function(e){var t={};for(var n in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[n]||delete this.layerIndexes[n]};var Bt=function(t,n){return e.emitValidationErrors(t,n&&n.filter((function(e){return"source.canvas"!==e.identifier})))},Wt=e.pick(qe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),qt=e.pick(qe,["setCenter","setZoom","setBearing","setPitch"]),Vt=function(){var t={},n=e.styleSpec.$version;for(var r in e.styleSpec.$root){var a,i=e.styleSpec.$root[r];i.required&&null!=(a="version"===r?n:"array"===i.type?[]:{})&&(t[r]=a)}return t}(),Ut=function(t){function n(r,a){var i=this;void 0===a&&(a={}),t.call(this),this.map=r,this.dispatcher=new C(ze(),this),this.imageManager=new f,this.imageManager.setEventedParent(this),this.glyphManager=new _(r._requestManager,a.localIdeographFontFamily),this.lineAtlas=new k(256,512),this.crossTileSymbolIndex=new zt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var o=this;this._rtlTextPluginCallback=n.registerForPluginStateChange((function(t){o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,n){if(e.triggerPluginCompletionEvent(t),n&&n.every((function(e){return e})))for(var r in o.sourceCaches)o.sourceCaches[r].reload()}))})),this.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=i.sourceCaches[e.sourceId];if(t){var n=t.getSource();if(n&&n.vectorLayerIds)for(var r in i._layers){var a=i._layers[r];a.source===n.id&&i._validateLayer(a)}}}}))}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.loadURL=function(t,n){var r=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var a="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);var i=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(i,(function(t,n){r._request=null,t?r.fire(new e.ErrorEvent(t)):n&&r._load(n,a)}))},n.prototype.loadJSON=function(t,n){var r=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame((function(){r._request=null,r._load(t,!1!==n.validate)}))},n.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Vt,!1)},n.prototype._load=function(t,n){if(!n||!Bt(this,e.validateStyle(t))){for(var r in this._loaded=!0,this.stylesheet=t,t.sources)this.addSource(r,t.sources[r],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var a=We(this.stylesheet.layers);this._order=a.map((function(e){return e.id})),this._layers={},this._serializedLayers={};for(var i=0,o=a;i<o.length;i+=1){var s=o[i];(s=e.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},n.prototype._loadSprite=function(t){var n=this;this._spriteRequest=function(t,n,r){var a,i,o,s=e.browser.devicePixelRatio>1?"@2x":"",u=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){u=null,o||(o=e,a=t,c())})),l=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){l=null,o||(o=e,i=t,c())}));function c(){if(o)r(o);else if(a&&i){var t=e.browser.getImageData(i),n={};for(var s in a){var u=a[s],l=u.width,c=u.height,h=u.x,f=u.y,d=u.sdf,p=u.pixelRatio,m=u.stretchX,v=u.stretchY,y=u.content,g=new e.RGBAImage({width:l,height:c});e.RGBAImage.copy(t,g,{x:h,y:f},{x:0,y:0},{width:l,height:c}),n[s]={data:g,pixelRatio:p,sdf:d,stretchX:m,stretchY:v,content:y}}r(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),l&&(l.cancel(),l=null)}}}(t,this.map._requestManager,(function(t,r){if(n._spriteRequest=null,t)n.fire(new e.ErrorEvent(t));else if(r)for(var a in r)n.imageManager.addImage(a,r[a]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new e.Event("data",{dataType:"style"}))}))},n.prototype._validateLayer=function(t){var n=this.sourceCaches[t.source];if(n){var r=t.sourceLayer;if(r){var a=n.getSource();("geojson"===a.type||a.vectorLayerIds&&-1===a.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+a.id+'" as specified by style layer "'+t.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(e){for(var t=[],n=0,r=e;n<r.length;n+=1){var a=this._layers[r[n]];"custom"!==a.type&&t.push(a.serialize())}return t},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(t){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),a=Object.keys(this._removedLayers);for(var i in(r.length||a.length)&&this._updateWorkerLayers(r,a),this._updatedSources){var o=this._updatedSources[i];"reload"===o?this._reloadSource(i):"clear"===o&&this._clearSource(i)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}for(var u in this.sourceCaches)this.sourceCaches[u].used=!1;for(var l=0,c=this._order;l<c.length;l+=1){var h=this._layers[c[l]];h.recalculate(t,this._availableImages),!h.isHidden(t.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(t),this.z=t.zoom,n&&this.fire(new e.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}},n.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(t){var n=this;if(this._checkLoaded(),Bt(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=We(t.layers);var r=function(t,n){if(!t)return[{command:qe.setStyle,args:[n]}];var r=[];try{if(!e.deepEqual(t.version,n.version))return[{command:qe.setStyle,args:[n]}];e.deepEqual(t.center,n.center)||r.push({command:qe.setCenter,args:[n.center]}),e.deepEqual(t.zoom,n.zoom)||r.push({command:qe.setZoom,args:[n.zoom]}),e.deepEqual(t.bearing,n.bearing)||r.push({command:qe.setBearing,args:[n.bearing]}),e.deepEqual(t.pitch,n.pitch)||r.push({command:qe.setPitch,args:[n.pitch]}),e.deepEqual(t.sprite,n.sprite)||r.push({command:qe.setSprite,args:[n.sprite]}),e.deepEqual(t.glyphs,n.glyphs)||r.push({command:qe.setGlyphs,args:[n.glyphs]}),e.deepEqual(t.transition,n.transition)||r.push({command:qe.setTransition,args:[n.transition]}),e.deepEqual(t.light,n.light)||r.push({command:qe.setLight,args:[n.light]});var a={},i=[];!function(t,n,r,a){var i;for(i in n=n||{},t=t||{})t.hasOwnProperty(i)&&(n.hasOwnProperty(i)||Ue(i,r,a));for(i in n)n.hasOwnProperty(i)&&(t.hasOwnProperty(i)?e.deepEqual(t[i],n[i])||("geojson"===t[i].type&&"geojson"===n[i].type&&He(t,n,i)?r.push({command:qe.setGeoJSONSourceData,args:[i,n[i].data]}):je(i,n,r,a)):Ve(i,n,r))}(t.sources,n.sources,i,a);var o=[];t.layers&&t.layers.forEach((function(e){a[e.source]?r.push({command:qe.removeLayer,args:[e.id]}):o.push(e)})),r=r.concat(i),function(t,n,r){n=n||[];var a,i,o,s,u,l,c,h=(t=t||[]).map(Je),f=n.map(Je),d=t.reduce(Xe,{}),p=n.reduce(Xe,{}),m=h.slice(),v=Object.create(null);for(a=0,i=0;a<h.length;a++)p.hasOwnProperty(o=h[a])?i++:(r.push({command:qe.removeLayer,args:[o]}),m.splice(m.indexOf(o,i),1));for(a=0,i=0;a<f.length;a++)m[m.length-1-a]!==(o=f[f.length-1-a])&&(d.hasOwnProperty(o)?(r.push({command:qe.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-i),1)):i++,r.push({command:qe.addLayer,args:[p[o],l=m[m.length-a]]}),m.splice(m.length-a,0,o),v[o]=!0);for(a=0;a<f.length;a++)if(s=d[o=f[a]],u=p[o],!v[o]&&!e.deepEqual(s,u))if(e.deepEqual(s.source,u.source)&&e.deepEqual(s["source-layer"],u["source-layer"])&&e.deepEqual(s.type,u.type)){for(c in Ge(s.layout,u.layout,r,o,null,qe.setLayoutProperty),Ge(s.paint,u.paint,r,o,null,qe.setPaintProperty),e.deepEqual(s.filter,u.filter)||r.push({command:qe.setFilter,args:[o,u.filter]}),e.deepEqual(s.minzoom,u.minzoom)&&e.deepEqual(s.maxzoom,u.maxzoom)||r.push({command:qe.setLayerZoomRange,args:[o,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Ge(s[c],u[c],r,o,c.slice(6),qe.setPaintProperty):e.deepEqual(s[c],u[c])||r.push({command:qe.setLayerProperty,args:[o,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Ge(s[c],u[c],r,o,c.slice(6),qe.setPaintProperty):e.deepEqual(s[c],u[c])||r.push({command:qe.setLayerProperty,args:[o,c,u[c]]}))}else r.push({command:qe.removeLayer,args:[o]}),l=m[m.lastIndexOf(o)+1],r.push({command:qe.addLayer,args:[u,l]})}(o,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:qe.setStyle,args:[n]}]}return r}(this.serialize(),t).filter((function(e){return!(e.command in qt)}));if(0===r.length)return!1;var a=r.filter((function(e){return!(e.command in Wt)}));if(a.length>0)throw new Error("Unimplemented: "+a.map((function(e){return e.command})).join(", ")+".");return r.forEach((function(e){"setTransition"!==e.command&&n[e.command].apply(n,e.args)})),this.stylesheet=t,!0},n.prototype.addImage=function(t,n){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,n),this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},n.prototype.updateImage=function(e,t){this.imageManager.updateImage(e,t)},n.prototype.getImage=function(e){return this.imageManager.getImage(e)},n.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(t,n,r){var a=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateStyle.source,"sources."+t,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var i=this.sourceCaches[t]=new Ee(t,n,this.dispatcher);i.style=this,i.setEventedParent(this,(function(){return{isSourceLoaded:a.loaded(),source:i.serialize(),sourceId:t}})),i.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},n.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},n.prototype.addLayer=function(t,n,r){void 0===r&&(r={}),this._checkLoaded();var a=t.id;if(this.getLayer(a))this.fire(new e.ErrorEvent(new Error('Layer with id "'+a+'" already exists on this map')));else{var i;if("custom"===t.type){if(Bt(this,e.validateCustomStyleLayer(t)))return;i=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(a,t.source),t=e.clone$1(t),t=e.extend(t,{source:a})),this._validate(e.validateStyle.layer,"layers."+a,t,{arrayIndex:-1},r))return;i=e.createStyleLayer(t),this._validateLayer(i),i.setEventedParent(this,{layer:{id:a}}),this._serializedLayers[i.id]=i.serialize()}var o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(o,0,a),this._layerOrderChanged=!0,this._layers[a]=i,this._removedLayers[a]&&i.source&&"custom"!==i.type){var s=this._removedLayers[a];delete this._removedLayers[a],s.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause())}this._updateLayer(i),i.onAdd&&i.onAdd(this.map)}}},n.prototype.moveLayer=function(t,n){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==n){var r=this._order.indexOf(t);this._order.splice(r,1);var a=n?this._order.indexOf(n):this._order.length;n&&-1===a?this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(a,0,t),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(t){this._checkLoaded();var n=this._layers[t];if(n){n.setEventedParent(null);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(e){return this._layers[e]},n.prototype.hasLayer=function(e){return e in this._layers},n.prototype.setLayerZoomRange=function(t,n,r){this._checkLoaded();var a=this.getLayer(t);a?a.minzoom===n&&a.maxzoom===r||(null!=n&&(a.minzoom=n),null!=r&&(a.maxzoom=r),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(t,n,r){void 0===r&&(r={}),this._checkLoaded();var a=this.getLayer(t);if(a){if(!e.deepEqual(a.filter,n))return null==n?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(e.validateStyle.filter,"layers."+a.id+".filter",n,null,r)||(a.filter=e.clone$1(n),this._updateLayer(a)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(t){return e.clone$1(this.getLayer(t).filter)},n.prototype.setLayoutProperty=function(t,n,r,a){void 0===a&&(a={}),this._checkLoaded();var i=this.getLayer(t);i?e.deepEqual(i.getLayoutProperty(n),r)||(i.setLayoutProperty(n,r,a),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(t,n){var r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(t,n,r,a){void 0===a&&(a={}),this._checkLoaded();var i=this.getLayer(t);i?e.deepEqual(i.getPaintProperty(n),r)||(i.setPaintProperty(n,r,a)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},n.prototype.setFeatureState=function(t,n){this._checkLoaded();var r=t.source,a=t.sourceLayer,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type;"geojson"===o&&a?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||a?(void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),i.setFeatureState(a,t.id,n)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(t,n){this._checkLoaded();var r=t.source,a=this.sourceCaches[r];if(void 0!==a){var i=a.getSource().type,o="vector"===i?t.sourceLayer:void 0;"vector"!==i||o?n&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):a.removeFeatureState(o,t.id,n):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(t){this._checkLoaded();var n=t.source,r=t.sourceLayer,a=this.sourceCaches[n];if(void 0!==a){if("vector"!==a.getSource().type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),a.getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,(function(e){return e.serialize()})),layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))},n.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},r={},a=[],i=this._order.length-1;i>=0;i--){var o=this._order[i];if(n(o)){r[o]=i;for(var s=0,u=e;s<u.length;s+=1){var l=u[s][o];if(l)for(var c=0,h=l;c<h.length;c+=1)a.push(h[c])}}}a.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var f=[],d=this._order.length-1;d>=0;d--){var p=this._order[d];if(n(p))for(var m=a.length-1;m>=0;m--){var v=a[m].feature;if(r[v.layer.id]<d)break;f.push(v),a.pop()}else for(var y=0,g=e;y<g.length;y+=1){var _=g[y][p];if(_)for(var b=0,x=_;b<x.length;b+=1)f.push(x[b].feature)}}return f},n.prototype.queryRenderedFeatures=function(t,n,r){n&&n.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var a={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var i=0,o=n.layers;i<o.length;i+=1){var s=o[i],u=this._layers[s];if(!u)return this.fire(new e.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];a[u.source]=!0}}var l=[];for(var c in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!a[c]||l.push(L(this.sourceCaches[c],this._layers,this._serializedLayers,t,n,r));return this.placement&&l.push(function(e,t,n,r,a,i,o){for(var s={},u=i.queryRenderedSymbols(r),l=[],c=0,h=Object.keys(u).map(Number);c<h.length;c+=1)l.push(o[h[c]]);l.sort(z);for(var f=function(){var n=p[d],r=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,a.filter,a.layers,a.availableImages,e);for(var i in r){var o=s[i]=s[i]||[],l=r[i];l.sort((function(e,t){var r=n.featureSortOrder;if(r){var a=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-a}return t.featureIndex-e.featureIndex}));for(var c=0,h=l;c<h.length;c+=1)o.push(h[c])}},d=0,p=l;d<p.length;d+=1)f();var m=function(t){s[t].forEach((function(r){var a=r.feature,i=n[e[t].source].getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source,a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]),a.state=i}))};for(var v in s)m(v);return s}(this._layers,this._serializedLayers,this.sourceCaches,t,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)},n.prototype.querySourceFeatures=function(t,n){n&&n.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var r=this.sourceCaches[t];return r?function(e,t){for(var n=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),r=[],a={},i=0;i<n.length;i++){var o=n[i],s=o.tileID.canonical.key;a[s]||(a[s]=!0,o.querySourceFeatures(r,t))}return r}(r,n):[]},n.prototype.addSourceType=function(e,t,r){return n.getSourceType(e)?r(new Error('A source type called "'+e+'" already exists.')):(n.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(t,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),a=!1;for(var i in t)if(!e.deepEqual(t[i],r[i])){a=!0;break}if(a){var o={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,n),this.light.updateTransitions(o)}},n.prototype._validate=function(t,n,r,a,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&Bt(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.styleSpec},a)))},n.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},n.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},n.prototype._updateSources=function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},n.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},n.prototype._updatePlacement=function(t,n,r,a,i){void 0===i&&(i=!1);for(var o=!1,s=!1,u={},l=0,c=this._order;l<c.length;l+=1){var h=this._layers[c[l]];if("symbol"===h.type){if(!u[h.source]){var f=this.sourceCaches[h.source];u[h.source]=f.getRenderableIds(!0).map((function(e){return f.getTileByID(e)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}var d=this.crossTileSymbolIndex.addLayer(h,u[h.source],t.center.lng);o=o||d}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((i=i||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),t.zoom))&&(this.pauseablePlacement=new Mt(t,this._order,i,n,r,a,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),s=!0),o&&this.pauseablePlacement.placement.setStale()),s||o)for(var p=0,m=this._order;p<m.length;p+=1){var v=this._layers[m[p]];"symbol"===v.type&&this.placement.updateLayerOpacities(v,u[v.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},n.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();var r=this.sourceCaches[t.source];r&&r.setDependencies(t.tileID.key,t.type,t.icons)},n.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},n.prototype.getResource=function(t,n,r){return e.makeRequest(n,r)},n}(e.Evented);Ut.getSourceType=function(e){return P[e]},Ut.setSourceType=function(e,t){P[e]=t},Ut.registerForPluginStateChange=e.registerForPluginStateChange;var jt=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ht=gn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Gt=gn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Jt=gn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Xt=gn("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Kt=gn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Zt=gn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Yt=gn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Qt=gn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),$t=gn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),en=gn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),tn=gn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),nn=gn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),rn=gn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),an=gn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),on=gn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),sn=gn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),un=gn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ln=gn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),cn=gn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),hn=gn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),fn=gn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),dn=gn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),pn=gn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),mn=gn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),vn=gn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),yn=gn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function gn(e,t){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r={};return{fragmentSource:e=e.replace(n,(function(e,t,n,a,i){return r[i]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+n+" "+a+" "+i+";\n#else\nuniform "+n+" "+a+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+n+" "+a+" "+i+" = u_"+i+";\n#endif\n"})),vertexSource:t=t.replace(n,(function(e,t,n,a,i){var o="float"===a?"vec2":"vec4",s=i.match(/color/)?"color":o;return r[i]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\nvarying "+n+" "+a+" "+i+";\n#else\nuniform "+n+" "+a+" u_"+i+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+n+" "+a+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+s+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+a+" "+i+" = u_"+i+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\n#else\nuniform "+n+" "+a+" u_"+i+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+a+" "+i+" = a_"+i+";\n#else\n    "+n+" "+a+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+a+" "+i+" = unpack_mix_"+s+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+a+" "+i+" = u_"+i+";\n#endif\n"}))}}var _n=Object.freeze({__proto__:null,prelude:Ht,background:Gt,backgroundPattern:Jt,circle:Xt,clippingMask:Kt,heatmap:Zt,heatmapTexture:Yt,collisionBox:Qt,collisionCircle:$t,debug:en,fill:tn,fillOutline:nn,fillOutlinePattern:rn,fillPattern:an,fillExtrusion:on,fillExtrusionPattern:sn,hillshadePrepare:un,hillshade:ln,line:cn,lineGradient:hn,linePattern:fn,lineSDF:dn,raster:pn,symbolIcon:mn,symbolSDF:vn,symbolTextAndIcon:yn}),bn=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};bn.prototype.bind=function(e,t,n,r,a,i,o,s){this.context=e;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===a&&this.boundVertexOffset===i&&this.boundDynamicVertexBuffer===o&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),a&&a.dynamicDraw&&a.bind(),s&&s.bind()):this.freshBind(t,n,r,a,i,o,s)},bn.prototype.freshBind=function(e,t,n,r,a,i,o){var s,u=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=a,this.boundDynamicVertexBuffer=i,this.boundDynamicVertexBuffer2=o;else{s=l.currentNumAttributes||0;for(var h=u;h<s;h++)c.disableVertexAttribArray(h)}t.enableAttributes(c,e);for(var f=0,d=n;f<d.length;f+=1)d[f].enableAttributes(c,e);i&&i.enableAttributes(c,e),o&&o.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,a);for(var p=0,m=n;p<m.length;p+=1){var v=m[p];v.bind(),v.setVertexAttribPointers(c,e,a)}i&&(i.bind(),i.setVertexAttribPointers(c,e,a)),r&&r.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,e,a)),l.currentNumAttributes=u},bn.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var xn=function(e,t,n,r,a){var i=e.gl;this.program=i.createProgram();var o=n?n.defines():[];a&&o.push("#define OVERDRAW_INSPECTOR;");var s=o.concat(Ht.fragmentSource,t.fragmentSource).join("\n"),u=o.concat(Ht.vertexSource,t.vertexSource).join("\n"),l=i.createShader(i.FRAGMENT_SHADER);if(i.isContextLost())this.failedToCreate=!0;else{i.shaderSource(l,s),i.compileShader(l),i.attachShader(this.program,l);var c=i.createShader(i.VERTEX_SHADER);if(i.isContextLost())this.failedToCreate=!0;else{i.shaderSource(c,u),i.compileShader(c),i.attachShader(this.program,c);for(var h=n?n.layoutAttributes:[],f=0;f<h.length;f++)i.bindAttribLocation(this.program,f,h[f].name);i.linkProgram(this.program),i.deleteShader(c),i.deleteShader(l),this.numAttributes=i.getProgramParameter(this.program,i.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},p=0;p<this.numAttributes;p++){var m=i.getActiveAttrib(this.program,p);m&&(this.attributes[m.name]=i.getAttribLocation(this.program,m.name))}for(var v=i.getProgramParameter(this.program,i.ACTIVE_UNIFORMS),y=0;y<v;y++){var g=i.getActiveUniform(this.program,y);g&&(d[g.name]=i.getUniformLocation(this.program,g.name))}this.fixedUniforms=r(e,d),this.binderUniforms=n?n.getUniforms(e,d):[]}}};function wn(e,t,n){var r=1/ft(n,1,t.transform.tileZoom),a=Math.pow(2,n.tileID.overscaledZ),i=n.tileSize*Math.pow(2,t.transform.tileZoom)/a,o=i*(n.tileID.canonical.x+n.tileID.wrap*a),s=i*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}xn.prototype.draw=function(e,t,n,r,a,i,o,s,u,l,c,h,f,d,p,m){var v,y=e.gl;if(!this.failedToCreate){for(var g in e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(a),e.setCullFace(i),this.fixedUniforms)this.fixedUniforms[g].set(o[g]);d&&d.setUniforms(e,this.binderUniforms,h,{zoom:f});for(var _=(v={},v[y.LINES]=2,v[y.TRIANGLES]=3,v[y.LINE_STRIP]=1,v)[t],b=0,x=c.get();b<x.length;b+=1){var w=x[b],k=w.vaos||(w.vaos={});(k[s]||(k[s]=new bn)).bind(e,this,u,d?d.getPaintVertexBuffers():[],l,w.vertexOffset,p,m),y.drawElements(t,w.primitiveLength*_,y.UNSIGNED_SHORT,w.primitiveOffset*_*2)}}};var kn=function(t,n,r,a){var i=n.style.light,o=i.properties.get("position"),s=[o.x,o.y,o.z],u=e.create$1();"viewport"===i.properties.get("anchor")&&e.fromRotation(u,-n.transform.angle),e.transformMat3(s,s,u);var l=i.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+r,u_opacity:a}},Cn=function(t,n,r,a,i,o,s){return e.extend(kn(t,n,r,a),wn(o,n,s),{u_height_factor:-Math.pow(2,i.overscaledZ)/s.tileSize/8})},Sn=function(e){return{u_matrix:e}},In=function(t,n,r,a){return e.extend(Sn(t),wn(r,n,a))},Dn=function(e,t){return{u_matrix:e,u_world:t}},An=function(t,n,r,a,i){return e.extend(In(t,n,r,a),{u_world:i})},Tn=function(t,n,r,a){var i,o,s=t.transform;if("map"===a.paint.get("circle-pitch-alignment")){var u=ft(r,1,s.zoom);i=!0,o=[u,u]}else i=!1,o=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===a.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(n.posMatrix,r,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:o}},En=function(e,t,n){var r=ft(n,1,t.zoom),a=Math.pow(2,t.zoom-n.tileID.overscaledZ),i=n.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[t.pixelsToGLUnits[0]/(r*a),t.pixelsToGLUnits[1]/(r*a)],u_overscale_factor:i}},Rn=function(e,t,n){return{u_matrix:e,u_inv_matrix:t,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}},On=function(e,t,n){return void 0===n&&(n=1),{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n}},Mn=function(e){return{u_matrix:e}},Nn=function(e,t,n,r){return{u_matrix:e,u_extrude_scale:ft(t,1,n),u_intensity:r}},Pn=function(t,n,r){var a=t.transform;return{u_matrix:Wn(t,n,r),u_ratio:1/ft(n,1,a.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Fn=function(t,n,r){return e.extend(Pn(t,n,r),{u_image:0})},Ln=function(t,n,r,a){var i=t.transform,o=Bn(n,i);return{u_matrix:Wn(t,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/ft(n,1,i.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[o,a.fromScale,a.toScale],u_fade:a.t,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},zn=function(t,n,r,a,i){var o=t.lineAtlas,s=Bn(n,t.transform),u="round"===r.layout.get("line-cap"),l=o.getDash(a.from,u),c=o.getDash(a.to,u),h=l.width*i.fromScale,f=c.width*i.toScale;return e.extend(Pn(t,n,r),{u_patternscale_a:[s/h,-l.height/2],u_patternscale_b:[s/f,-c.height/2],u_sdfgamma:o.width/(256*Math.min(h,f)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:c.y,u_mix:i.t})};function Bn(e,t){return 1/ft(e,1,t.tileZoom)}function Wn(e,t,n){return e.translatePosMatrix(t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var qn=function(e,t,n,r,a){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*a.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:a.paint.get("raster-brightness-min"),u_brightness_high:a.paint.get("raster-brightness-max"),u_saturation_factor:(o=a.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(i=a.paint.get("raster-contrast"),i>0?1/(1-i):1+i),u_spin_weights:Vn(a.paint.get("raster-hue-rotate"))};var i,o};function Vn(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}var Un,jn=function(e,t,n,r,a,i,o,s,u,l){var c=a.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:i,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},Hn=function(t,n,r,a,i,o,s,u,l,c,h){var f=i.transform;return e.extend(jn(t,n,r,a,i,o,s,u,l,c),{u_gamma_scale:a?Math.cos(f._pitch)*f.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+h})},Gn=function(t,n,r,a,i,o,s,u,l,c){return e.extend(Hn(t,n,r,a,i,o,s,u,!0,l,!0),{u_texsize_icon:c,u_texture_icon:1})},Jn=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},Xn=function(t,n,r,a,i,o){return e.extend(function(e,t,n,r){var a=n.imageManager.getPattern(e.from.toString()),i=n.imageManager.getPattern(e.to.toString()),o=n.imageManager.getPixelSize(),s=o.width,u=o.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,h=c*(r.tileID.canonical.x+r.tileID.wrap*l),f=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:a.tl,u_pattern_br_a:a.br,u_pattern_tl_b:i.tl,u_pattern_br_b:i.br,u_texsize:[s,u],u_mix:t.t,u_pattern_size_a:a.displaySize,u_pattern_size_b:i.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/ft(r,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,f>>16],u_pixel_coord_lower:[65535&h,65535&f]}}(a,o,r,i),{u_matrix:t,u_opacity:n})},Kn={fillExtrusion:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fillExtrusionPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,n.u_height_factor),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fill:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},fillPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},fillOutline:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world)}},fillOutlinePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},circle:function(t,n){return{u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(t,n.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},collisionBox:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(t,n.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_overscale_factor:new e.Uniform1f(t,n.u_overscale_factor)}},collisionCircle:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,n.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,n.u_viewport_size)}},debug:function(t,n){return{u_color:new e.UniformColor(t,n.u_color),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_overlay:new e.Uniform1i(t,n.u_overlay),u_overlay_scale:new e.Uniform1f(t,n.u_overlay_scale)}},clippingMask:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmap:function(t,n){return{u_extrude_scale:new e.Uniform1f(t,n.u_extrude_scale),u_intensity:new e.Uniform1f(t,n.u_intensity),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmapTexture:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_opacity:new e.Uniform1f(t,n.u_opacity)}},hillshade:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_latrange:new e.Uniform2f(t,n.u_latrange),u_light:new e.Uniform2f(t,n.u_light),u_shadow:new e.UniformColor(t,n.u_shadow),u_highlight:new e.UniformColor(t,n.u_highlight),u_accent:new e.UniformColor(t,n.u_accent)}},hillshadePrepare:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_dimension:new e.Uniform2f(t,n.u_dimension),u_zoom:new e.Uniform1f(t,n.u_zoom),u_maxzoom:new e.Uniform1f(t,n.u_maxzoom),u_unpack:new e.Uniform4f(t,n.u_unpack)}},line:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels)}},lineGradient:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_image:new e.Uniform1i(t,n.u_image)}},linePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texsize:new e.Uniform2f(t,n.u_texsize),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_image:new e.Uniform1i(t,n.u_image),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_scale:new e.Uniform3f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},lineSDF:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,n.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,n.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,n.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,n.u_sdfgamma),u_image:new e.Uniform1i(t,n.u_image),u_tex_y_a:new e.Uniform1f(t,n.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,n.u_tex_y_b),u_mix:new e.Uniform1f(t,n.u_mix)}},raster:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_tl_parent:new e.Uniform2f(t,n.u_tl_parent),u_scale_parent:new e.Uniform1f(t,n.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,n.u_buffer_scale),u_fade_t:new e.Uniform1f(t,n.u_fade_t),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image0:new e.Uniform1i(t,n.u_image0),u_image1:new e.Uniform1i(t,n.u_image1),u_brightness_low:new e.Uniform1f(t,n.u_brightness_low),u_brightness_high:new e.Uniform1f(t,n.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,n.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,n.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,n.u_spin_weights)}},symbolIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture)}},symbolSDF:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}},symbolTextAndIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,n.u_coord_matrix),u_is_text:new e.Uniform1i(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texsize_icon:new e.Uniform2f(t,n.u_texsize_icon),u_texture:new e.Uniform1i(t,n.u_texture),u_texture_icon:new e.Uniform1i(t,n.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,n.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,n.u_is_halo)}},background:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_color:new e.UniformColor(t,n.u_color)}},backgroundPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image:new e.Uniform1i(t,n.u_image),u_pattern_tl_a:new e.Uniform2f(t,n.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,n.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,n.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,n.u_pattern_br_b),u_texsize:new e.Uniform2f(t,n.u_texsize),u_mix:new e.Uniform1f(t,n.u_mix),u_pattern_size_a:new e.Uniform2f(t,n.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,n.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,n.u_scale_a),u_scale_b:new e.Uniform1f(t,n.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,n.u_tile_units_to_pixels)}}};function Zn(t,n,r,a,i,o,s){for(var u=t.context,l=u.gl,c=t.useProgram("collisionBox"),h=[],f=0,d=0,p=0;p<a.length;p++){var m=a[p],v=n.getTile(m),y=v.getBucket(r);if(y){var g=m.posMatrix;0===i[0]&&0===i[1]||(g=t.translatePosMatrix(m.posMatrix,v,i,o));var _=s?y.textCollisionBox:y.iconCollisionBox,b=y.collisionCircleArray;if(b.length>0){var x=e.create(),w=g;e.mul(x,y.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(x,x,y.placementViewportMatrix),h.push({circleArray:b,circleOffset:d,transform:w,invTransform:x}),d=f+=b.length/4}_&&c.draw(u,l.LINES,Se.disabled,Ie.disabled,t.colorModeForRenderPass(),Ae.disabled,En(g,t.transform,v),r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,t.transform.zoom,null,null,_.collisionVertexBuffer)}}if(s&&h.length){var k=t.useProgram("collisionCircle"),C=new e.StructArrayLayout2f1f2i16;C.resize(4*f),C._trim();for(var S=0,I=0,D=h;I<D.length;I+=1)for(var A=D[I],T=0;T<A.circleArray.length/4;T++){var E=4*T,R=A.circleArray[E+0],O=A.circleArray[E+1],M=A.circleArray[E+2],N=A.circleArray[E+3];C.emplace(S++,R,O,M,N,0),C.emplace(S++,R,O,M,N,1),C.emplace(S++,R,O,M,N,2),C.emplace(S++,R,O,M,N,3)}(!Un||Un.length<2*f)&&(Un=function(t){var n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(var a=0;a<n;a++){var i=6*a;r.uint16[i+0]=4*a+0,r.uint16[i+1]=4*a+1,r.uint16[i+2]=4*a+2,r.uint16[i+3]=4*a+2,r.uint16[i+4]=4*a+3,r.uint16[i+5]=4*a+0}return r}(f));for(var P=u.createIndexBuffer(Un,!0),F=u.createVertexBuffer(C,e.collisionCircleLayout.members,!0),L=0,z=h;L<z.length;L+=1){var B=z[L],W=Rn(B.transform,B.invTransform,t.transform);k.draw(u,l.TRIANGLES,Se.disabled,Ie.disabled,t.colorModeForRenderPass(),Ae.disabled,W,r.id,F,P,e.SegmentVector.simpleSegment(0,2*B.circleOffset,B.circleArray.length,B.circleArray.length/2),null,t.transform.zoom,null,null,null)}F.destroy(),P.destroy()}}var Yn=e.identity(new Float32Array(16));function Qn(t,n,r,a,i,o){var s=e.getAnchorAlignment(t),u=-(s.horizontalAlign-.5)*n,l=-(s.verticalAlign-.5)*r,c=e.evaluateVariableOffset(t,a);return new e.Point((u/i+c[0])*o,(l/i+c[1])*o)}function $n(t,n,r,a,i,o,s,u,l,c,h){var f=t.text.placedSymbolArray,d=t.text.dynamicLayoutVertexArray,p=t.icon.dynamicLayoutVertexArray,m={};d.clear();for(var v=0;v<f.length;v++){var y=f.get(v),g=y.hidden||!y.crossTileID||t.allowVerticalPlacement&&!y.placedOrientation?null:a[y.crossTileID];if(g){var _=new e.Point(y.anchorX,y.anchorY),b=$e(_,r?u:s),x=et(o.cameraToCenterDistance,b.signedDistanceFromCamera),w=i.evaluateSizeForFeature(t.textSizeData,c,y)*x/e.ONE_EM;r&&(w*=t.tilePixelRatio/l);for(var k=Qn(g.anchor,g.width,g.height,g.textOffset,g.textBoxScale,w),C=r?$e(_.add(k),s).point:b.point.add(n?k.rotate(-o.angle):k),S=t.allowVerticalPlacement&&y.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,I=0;I<y.numGlyphs;I++)e.addDynamicAttributes(d,C,S);h&&y.associatedIconIndex>=0&&(m[y.associatedIconIndex]={shiftedAnchor:C,angle:S})}else lt(y.numGlyphs,d)}if(h){p.clear();for(var D=t.icon.placedSymbolArray,A=0;A<D.length;A++){var T=D.get(A);if(T.hidden)lt(T.numGlyphs,p);else{var E=m[A];if(E)for(var R=0;R<T.numGlyphs;R++)e.addDynamicAttributes(p,E.shiftedAnchor,E.angle);else lt(T.numGlyphs,p)}}t.icon.dynamicLayoutVertexBuffer.updateData(p)}t.text.dynamicLayoutVertexBuffer.updateData(d)}function er(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function tr(t,n,r,a,i,o,s,u,l,c,h,f){for(var d=t.context,p=d.gl,m=t.transform,v="map"===u,y="map"===l,g=v&&"point"!==r.layout.get("symbol-placement"),_=v&&!y&&!g,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=t.depthModeForSublayer(0,Se.ReadOnly),w=r.layout.get("text-variable-anchor"),k=[],C=0,S=a;C<S.length;C+=1){var I=S[C],D=n.getTile(I),A=D.getBucket(r);if(A){var T=i?A.text:A.icon;if(T&&T.segments.get().length){var E=T.programConfigurations.get(r.id),R=i||A.sdfIcons,O=i?A.textSizeData:A.iconSizeData,M=y||0!==m.pitch,N=t.useProgram(er(R,i,A),E),P=e.evaluateSizeForZoom(O,m.zoom),F=void 0,L=[0,0],z=void 0,B=void 0,W=null,q=void 0;if(i)z=D.glyphAtlasTexture,B=p.LINEAR,F=D.glyphAtlasTexture.size,A.iconsInText&&(L=D.imageAtlasTexture.size,W=D.imageAtlasTexture,q=M||t.options.rotating||t.options.zooming||"composite"===O.kind||"camera"===O.kind?p.LINEAR:p.NEAREST);else{var V=1!==r.layout.get("icon-size").constantOr(0)||A.iconsNeedLinear;z=D.imageAtlasTexture,B=R||t.options.rotating||t.options.zooming||V||M?p.LINEAR:p.NEAREST,F=D.imageAtlasTexture.size}var U=ft(D,1,t.transform.zoom),j=Ye(I.posMatrix,y,v,t.transform,U),H=Qe(I.posMatrix,y,v,t.transform,U),G=w&&A.hasTextData(),J="none"!==r.layout.get("icon-text-fit")&&G&&A.hasIconData();g&&nt(A,I.posMatrix,t,i,j,H,y,c);var X=t.translatePosMatrix(I.posMatrix,D,o,s),K=g||i&&w||J?Yn:j,Z=t.translatePosMatrix(H,D,o,s,!0),Y=R&&0!==r.paint.get(i?"text-halo-width":"icon-halo-width").constantOr(1),Q={program:N,buffers:T,uniformValues:R?A.iconsInText?Gn(O.kind,P,_,y,t,X,K,Z,F,L):Hn(O.kind,P,_,y,t,X,K,Z,i,F,!0):jn(O.kind,P,_,y,t,X,K,Z,i,F),atlasTexture:z,atlasTextureIcon:W,atlasInterpolation:B,atlasInterpolationIcon:q,isSDF:R,hasHalo:Y};if(b)for(var $=0,ee=T.segments.get();$<ee.length;$+=1){var te=ee[$];k.push({segments:new e.SegmentVector([te]),sortKey:te.sortKey,state:Q})}else k.push({segments:T.segments,sortKey:0,state:Q})}}}b&&k.sort((function(e,t){return e.sortKey-t.sortKey}));for(var ne=0,re=k;ne<re.length;ne+=1){var ae=re[ne],ie=ae.state;if(d.activeTexture.set(p.TEXTURE0),ie.atlasTexture.bind(ie.atlasInterpolation,p.CLAMP_TO_EDGE),ie.atlasTextureIcon&&(d.activeTexture.set(p.TEXTURE1),ie.atlasTextureIcon&&ie.atlasTextureIcon.bind(ie.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),ie.isSDF){var oe=ie.uniformValues;ie.hasHalo&&(oe.u_is_halo=1,nr(ie.buffers,ae.segments,r,t,ie.program,x,h,f,oe)),oe.u_is_halo=0}nr(ie.buffers,ae.segments,r,t,ie.program,x,h,f,ie.uniformValues)}}function nr(e,t,n,r,a,i,o,s,u){var l=r.context;a.draw(l,l.gl.TRIANGLES,i,o,s,Ae.disabled,u,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,r.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function rr(e,t,n,r,a,i,o){var s,u,l,c,h,f=e.context.gl,d=n.paint.get("fill-pattern"),p=d&&d.constantOr(1),m=n.getCrossfadeParameters();o?(u=p&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=f.LINES):(u=p?"fillPattern":"fill",s=f.TRIANGLES);for(var v=0,y=r;v<y.length;v+=1){var g=y[v],_=t.getTile(g);if(!p||_.patternsLoaded()){var b=_.getBucket(n);if(b){var x=b.programConfigurations.get(n.id),w=e.useProgram(u,x);p&&(e.context.activeTexture.set(f.TEXTURE0),_.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),x.updatePaintBuffers(m));var k=d.constantOr(null);if(k&&_.imageAtlas){var C=_.imageAtlas,S=C.patternPositions[k.to.toString()],I=C.patternPositions[k.from.toString()];S&&I&&x.setConstantPatternPositions(S,I)}var D=e.translatePosMatrix(g.posMatrix,_,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(o){c=b.indexBuffer2,h=b.segments2;var A=[f.drawingBufferWidth,f.drawingBufferHeight];l="fillOutlinePattern"===u&&p?An(D,e,m,_,A):Dn(D,A)}else c=b.indexBuffer,h=b.segments,l=p?In(D,e,m,_):Sn(D);w.draw(e.context,s,a,e.stencilModeForClipping(g),i,Ae.disabled,l,n.id,b.layoutVertexBuffer,c,h,n.paint,e.transform.zoom,x)}}}}function ar(e,t,n,r,a,i,o){for(var s=e.context,u=s.gl,l=n.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),h=n.getCrossfadeParameters(),f=n.paint.get("fill-extrusion-opacity"),d=0,p=r;d<p.length;d+=1){var m=p[d],v=t.getTile(m),y=v.getBucket(n);if(y){var g=y.programConfigurations.get(n.id),_=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",g);c&&(e.context.activeTexture.set(u.TEXTURE0),v.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),g.updatePaintBuffers(h));var b=l.constantOr(null);if(b&&v.imageAtlas){var x=v.imageAtlas,w=x.patternPositions[b.to.toString()],k=x.patternPositions[b.from.toString()];w&&k&&g.setConstantPatternPositions(w,k)}var C=e.translatePosMatrix(m.posMatrix,v,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),S=n.paint.get("fill-extrusion-vertical-gradient"),I=c?Cn(C,e,S,f,m,h,v):kn(C,e,S,f);_.draw(s,s.gl.TRIANGLES,a,i,o,Ae.backCCW,I,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,e.transform.zoom,g)}}}function ir(t,n,r,a,i,o){var s=t.context,u=s.gl,l=n.fbo;if(l){var c=t.useProgram("hillshade");s.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,l.colorAttachment.get());var h=function(t,n,r){var a=r.paint.get("hillshade-shadow-color"),i=r.paint.get("hillshade-highlight-color"),o=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);var u,l,c,h=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(n.tileID.toUnwrapped(),h),u_image:0,u_latrange:(u=n.tileID,l=Math.pow(2,u.canonical.z),c=u.canonical.y,[new e.MercatorCoordinate(0,c/l).toLngLat().lat,new e.MercatorCoordinate(0,(c+1)/l).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:a,u_highlight:i,u_accent:o}}(t,n,r);c.draw(s,u.TRIANGLES,a,i,o,Ae.disabled,h,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function or(t,n,r,a,i,o,s){var u=t.context,l=u.gl,c=n.dem;if(c&&c.data){var h=c.dim,f=c.stride,d=c.getPixels();if(u.activeTexture.set(l.TEXTURE1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(f),n.demTexture){var p=n.demTexture;p.update(d,{premultiply:!1}),p.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new e.Texture(u,d,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);u.activeTexture.set(l.TEXTURE0);var m=n.fbo;if(!m){var v=new e.Texture(u,{width:h,height:h,data:null},l.RGBA);v.bind(l.LINEAR,l.CLAMP_TO_EDGE),(m=n.fbo=u.createFramebuffer(h,h,!0)).colorAttachment.set(v.texture)}u.bindFramebuffer.set(m.framebuffer),u.viewport.set([0,0,h,h]),t.useProgram("hillshadePrepare").draw(u,l.TRIANGLES,i,o,s,Ae.disabled,function(t,n,r){var a=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[a,a],u_zoom:t.overscaledZ,u_maxzoom:r,u_unpack:n.getUnpackVector()}}(n.tileID,c,a),r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function sr(t,n,r,a,i){var o=a.paint.get("raster-fade-duration");if(o>0){var s=e.browser.now(),u=(s-t.timeAdded)/o,l=n?(s-n.timeAdded)/o:-1,c=r.getSource(),h=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),f=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(t.tileID.overscaledZ-h),d=f&&t.refreshedUponExpiration?1:e.clamp(f?u:1-l,0,1);return t.refreshedUponExpiration&&u>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var ur=new e.Color(1,0,0,1),lr=new e.Color(0,1,0,1),cr=new e.Color(0,0,1,1),hr=new e.Color(1,0,1,1),fr=new e.Color(0,1,1,1);function dr(e,t,n,r){mr(e,0,t+n/2,e.transform.width,n,r)}function pr(e,t,n,r){mr(e,t-n/2,0,n,e.transform.height,r)}function mr(t,n,r,a,i,o){var s=t.context,u=s.gl;u.enable(u.SCISSOR_TEST),u.scissor(n*e.browser.devicePixelRatio,r*e.browser.devicePixelRatio,a*e.browser.devicePixelRatio,i*e.browser.devicePixelRatio),s.clear({color:o}),u.disable(u.SCISSOR_TEST)}function vr(t,n,r){var a=t.context,i=a.gl,o=r.posMatrix,s=t.useProgram("debug"),u=Se.disabled,l=Ie.disabled,c=t.colorModeForRenderPass();a.activeTexture.set(i.TEXTURE0),t.emptyTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE),s.draw(a,i.LINE_STRIP,u,l,c,Ae.disabled,On(o,e.Color.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var h=n.getTileByID(r.key).latestRawTileData,f=Math.floor((h&&h.byteLength||0)/1024),d=n.getTile(r).tileSize,p=512/Math.min(d,512)*(r.overscaledZ/t.transform.zoom)*.5,m=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(m+=" => "+r.overscaledZ),function(e,t){e.initDebugOverlayCanvas();var n=e.debugOverlayCanvas,r=e.context.gl,a=e.debugOverlayCanvas.getContext("2d");a.clearRect(0,0,n.width,n.height),a.shadowColor="white",a.shadowBlur=2,a.lineWidth=1.5,a.strokeStyle="white",a.textBaseline="top",a.font="bold 36px Open Sans, sans-serif",a.fillText(t,5,5),a.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,m+" "+f+"kb"),s.draw(a,i.TRIANGLES,u,l,De.alphaBlended,Ae.disabled,On(o,e.Color.transparent,p),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}var yr={symbol:function(t,n,r,a,i){if("translucent"===t.renderPass){var o=Ie.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,a,i,o,s){for(var u=n.transform,l="map"===i,c="map"===o,h=0,f=t;h<f.length;h+=1){var d=f[h],p=a.getTile(d),m=p.getBucket(r);if(m&&m.text&&m.text.segments.get().length){var v=e.evaluateSizeForZoom(m.textSizeData,u.zoom),y=ft(p,1,n.transform.zoom),g=Ye(d.posMatrix,c,l,n.transform,y),_="none"!==r.layout.get("icon-text-fit")&&m.hasIconData();if(v){var b=Math.pow(2,u.zoom-p.tileID.overscaledZ);$n(m,l,c,s,e.symbolSize,u,g,d.posMatrix,b,v,_)}}}}(a,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),i),0!==r.paint.get("icon-opacity").constantOr(1)&&tr(t,n,r,a,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,s),0!==r.paint.get("text-opacity").constantOr(1)&&tr(t,n,r,a,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,s),n.map.showCollisionBoxes&&(Zn(t,n,r,a,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Zn(t,n,r,a,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(t,n,r,a){if("translucent"===t.renderPass){var i=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),u=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var l=t.context,c=l.gl,h=t.depthModeForSublayer(0,Se.ReadOnly),f=Ie.disabled,d=t.colorModeForRenderPass(),p=[],m=0;m<a.length;m++){var v=a[m],y=n.getTile(v),g=y.getBucket(r);if(g){var _=g.programConfigurations.get(r.id),b={programConfiguration:_,program:t.useProgram("circle",_),layoutVertexBuffer:g.layoutVertexBuffer,indexBuffer:g.indexBuffer,uniformValues:Tn(t,v,y,r)};if(u)for(var x=0,w=g.segments.get();x<w.length;x+=1){var k=w[x];p.push({segments:new e.SegmentVector([k]),sortKey:k.sortKey,state:b})}else p.push({segments:g.segments,sortKey:0,state:b})}}u&&p.sort((function(e,t){return e.sortKey-t.sortKey}));for(var C=0,S=p;C<S.length;C+=1){var I=S[C],D=I.state;D.program.draw(l,c.TRIANGLES,h,f,d,Ae.disabled,D.uniformValues,r.id,D.layoutVertexBuffer,D.indexBuffer,I.segments,r.paint,t.transform.zoom,D.programConfiguration)}}}},heatmap:function(t,n,r,a){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var i=t.context,o=i.gl,s=Ie.disabled,u=new De([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var a=n.heatmapFbo;if(a)r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),e.bindFramebuffer.set(a.framebuffer);else{var i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),a=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,n,r){var a=e.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,t.width/4,t.height/4,0,a.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,t,i,a)}}(i,t,r),i.clear({color:e.Color.transparent});for(var l=0;l<a.length;l++){var c=a[l];if(!n.hasRenderableParent(c)){var h=n.getTile(c),f=h.getBucket(r);if(f){var d=f.programConfigurations.get(r.id);t.useProgram("heatmap",d).draw(i,o.TRIANGLES,Se.disabled,s,u,Ae.disabled,Nn(c.posMatrix,h,t.transform.zoom,r.paint.get("heatmap-intensity")),r.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,r.paint,t.transform.zoom,d)}}}i.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){var r=t.context,a=r.gl,i=n.heatmapFbo;if(i){r.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,i.colorAttachment.get()),r.activeTexture.set(a.TEXTURE1);var o=n.colorRampTexture;o||(o=n.colorRampTexture=new e.Texture(r,n.colorRamp,a.RGBA)),o.bind(a.LINEAR,a.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,a.TRIANGLES,Se.disabled,Ie.disabled,t.colorModeForRenderPass(),Ae.disabled,function(t,n,r,a){var i=e.create();e.ortho(i,0,t.width,t.height,0,0,1);var o=t.context.gl;return{u_matrix:i,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(t,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}}(t,r))},line:function(t,n,r,a){if("translucent"===t.renderPass){var i=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0!==i.constantOr(1)&&0!==o.constantOr(1)){var s=t.depthModeForSublayer(0,Se.ReadOnly),u=t.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),h=c.constantOr(1),f=r.paint.get("line-gradient"),d=r.getCrossfadeParameters(),p=h?"linePattern":l?"lineSDF":f?"lineGradient":"line",m=t.context,v=m.gl,y=!0;if(f){m.activeTexture.set(v.TEXTURE0);var g=r.gradientTexture;if(!r.gradient)return;g||(g=r.gradientTexture=new e.Texture(m,r.gradient,v.RGBA)),g.bind(v.LINEAR,v.CLAMP_TO_EDGE)}for(var _=0,b=a;_<b.length;_+=1){var x=b[_],w=n.getTile(x);if(!h||w.patternsLoaded()){var k=w.getBucket(r);if(k){var C=k.programConfigurations.get(r.id),S=t.context.program.get(),I=t.useProgram(p,C),D=y||I.program!==S,A=c.constantOr(null);if(A&&w.imageAtlas){var T=w.imageAtlas,E=T.patternPositions[A.to.toString()],R=T.patternPositions[A.from.toString()];E&&R&&C.setConstantPatternPositions(E,R)}var O=h?Ln(t,w,r,d):l?zn(t,w,r,l,d):f?Fn(t,w,r):Pn(t,w,r);h?(m.activeTexture.set(v.TEXTURE0),w.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),C.updatePaintBuffers(d)):l&&(D||t.lineAtlas.dirty)&&(m.activeTexture.set(v.TEXTURE0),t.lineAtlas.bind(m)),I.draw(m,v.TRIANGLES,s,t.stencilModeForClipping(x),u,Ae.disabled,O,r.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,r.paint,t.transform.zoom,C),y=!1}}}}}},fill:function(t,n,r,a){var i=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=t.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),l=t.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===i.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===l){var c=t.depthModeForSublayer(1,"opaque"===t.renderPass?Se.ReadWrite:Se.ReadOnly);rr(t,n,r,a,c,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){var h=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Se.ReadOnly);rr(t,n,r,a,h,s,!0)}}},"fill-extrusion":function(e,t,n,r){var a=n.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===e.renderPass){var i=new Se(e.context.gl.LEQUAL,Se.ReadWrite,e.depthRangeFor3D);if(1!==a||n.paint.get("fill-extrusion-pattern").constantOr(1))ar(e,t,n,r,i,Ie.disabled,De.disabled),ar(e,t,n,r,i,e.stencilModeFor3D(),e.colorModeForRenderPass());else{var o=e.colorModeForRenderPass();ar(e,t,n,r,i,Ie.disabled,o)}}},hillshade:function(e,t,n,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){for(var a=e.context,i=t.getSource().maxzoom,o=e.depthModeForSublayer(0,Se.ReadOnly),s=e.colorModeForRenderPass(),u="translucent"===e.renderPass?e.stencilConfigForOverlap(r):[{},r],l=u[0],c=0,h=u[1];c<h.length;c+=1){var f=h[c],d=t.getTile(f);d.needsHillshadePrepare&&"offscreen"===e.renderPass?or(e,d,n,i,o,Ie.disabled,s):"translucent"===e.renderPass&&ir(e,d,n,o,l[f.overscaledZ],s)}a.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,n,r){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity")&&r.length)for(var a=e.context,i=a.gl,o=t.getSource(),s=e.useProgram("raster"),u=e.colorModeForRenderPass(),l=o instanceof O?[{},r]:e.stencilConfigForOverlap(r),c=l[0],h=l[1],f=h[h.length-1].overscaledZ,d=!e.options.moving,p=0,m=h;p<m.length;p+=1){var v=m[p],y=e.depthModeForSublayer(v.overscaledZ-f,1===n.paint.get("raster-opacity")?Se.ReadWrite:Se.ReadOnly,i.LESS),g=t.getTile(v),_=e.transform.calculatePosMatrix(v.toUnwrapped(),d);g.registerFadeDuration(n.paint.get("raster-fade-duration"));var b=t.findLoadedParent(v,0),x=sr(g,b,t,n,e.transform),w=void 0,k=void 0,C="nearest"===n.paint.get("raster-resampling")?i.NEAREST:i.LINEAR;a.activeTexture.set(i.TEXTURE0),g.texture.bind(C,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(i.TEXTURE1),b?(b.texture.bind(C,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,b.tileID.overscaledZ-g.tileID.overscaledZ),k=[g.tileID.canonical.x*w%1,g.tileID.canonical.y*w%1]):g.texture.bind(C,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST);var S=qn(_,k||[0,0],w||1,x,n);o instanceof O?s.draw(a,i.TRIANGLES,y,Ie.disabled,u,Ae.disabled,S,n.id,o.boundsBuffer,e.quadTriangleIndexBuffer,o.boundsSegments):s.draw(a,i.TRIANGLES,y,c[v.overscaledZ],u,Ae.disabled,S,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,t,n){var r=n.paint.get("background-color"),a=n.paint.get("background-opacity");if(0!==a){var i=e.context,o=i.gl,s=e.transform,u=s.tileSize,l=n.paint.get("background-pattern");if(!e.isPatternMissing(l)){var c=!l&&1===r.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass===c){var h=Ie.disabled,f=e.depthModeForSublayer(0,"opaque"===c?Se.ReadWrite:Se.ReadOnly),d=e.colorModeForRenderPass(),p=e.useProgram(l?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:u});l&&(i.activeTexture.set(o.TEXTURE0),e.imageManager.bind(e.context));for(var v=n.getCrossfadeParameters(),y=0,g=m;y<g.length;y+=1){var _=g[y],b=e.transform.calculatePosMatrix(_.toUnwrapped()),x=l?Xn(b,a,e,l,{tileID:_,tileSize:u},v):Jn(b,a,r);p.draw(i,o.TRIANGLES,f,h,d,Ae.disabled,x,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}}}},debug:function(e,t,n){for(var r=0;r<n.length;r++)vr(e,t,n[r])},custom:function(e,t,n){var r=e.context,a=n.implementation;if("offscreen"===e.renderPass){var i=a.prerender;i&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),i.call(a,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(Ie.disabled);var o="3d"===a.renderingMode?new Se(e.context.gl.LEQUAL,Se.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,Se.ReadOnly);r.setDepthMode(o),a.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}},gr=function(e,t){this.context=new Te(e),this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=Ee.maxUnderzooming+Ee.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new zt,this.gpuTimers={}};gr.prototype.resize=function(t,n){if(this.width=t*e.browser.devicePixelRatio,this.height=n*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,a=this.style._order;r<a.length;r+=1)this.style._layers[a[r]].resize()},gr.prototype.setup=function(){var t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,jt.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,jt.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var a=new e.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(e.EXTENT,0,e.EXTENT,0),a.emplaceBack(0,e.EXTENT,0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(a,R.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var i=new e.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,jt.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(o);var s=new e.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);var u=this.context.gl;this.stencilClearMode=new Ie({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},gr.prototype.clearStencil=function(){var t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=e.create();e.ortho(r,0,this.width,this.height,0,0,1),e.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,n.TRIANGLES,Se.disabled,this.stencilClearMode,De.disabled,Ae.disabled,Mn(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},gr.prototype._renderTileClippingMasks=function(e,t){if(this.currentStencilSource!==e.source&&e.isTileClipped()&&t&&t.length){this.currentStencilSource=e.source;var n=this.context,r=n.gl;this.nextStencilID+t.length>256&&this.clearStencil(),n.setColorMode(De.disabled),n.setDepthMode(Se.disabled);var a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var i=0,o=t;i<o.length;i+=1){var s=o[i],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;a.draw(n,r.TRIANGLES,Se.disabled,new Ie({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE),De.disabled,Ae.disabled,Mn(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},gr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var e=this.nextStencilID++,t=this.context.gl;return new Ie({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)},gr.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new Ie({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},gr.prototype.stencilConfigForOverlap=function(e){var t,n=this.context.gl,r=e.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),a=r[r.length-1].overscaledZ,i=r[0].overscaledZ-a+1;if(i>1){this.currentStencilSource=void 0,this.nextStencilID+i>256&&this.clearStencil();for(var o={},s=0;s<i;s++)o[s+a]=new Ie({func:n.GEQUAL,mask:255},s+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=i,[o,r]}return[(t={},t[a]=Ie.disabled,t),r]},gr.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new De([t.CONSTANT_COLOR,t.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?De.unblended:De.alphaBlended},gr.prototype.depthModeForSublayer=function(e,t,n){if(!this.opaquePassEnabledForLayer())return Se.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Se(n||this.context.gl.LEQUAL,t,[r,r])},gr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},gr.prototype.render=function(t,n){var r=this;this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var a=this.style._order,i=this.style.sourceCaches;for(var o in i){var s=i[o];s.used&&s.prepare(this.context)}var u,l,c={},h={},f={};for(var d in i){var p=i[d];c[d]=p.getVisibleCoordinates(),h[d]=c[d].slice().reverse(),f[d]=p.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var m=0;m<a.length;m++)if(this.style._layers[a[m]].is3D()){this.opaquePassCutoff=m;break}this.renderPass="offscreen";for(var v=0,y=a;v<y.length;v+=1){var g=this.style._layers[y[v]];if(g.hasOffscreenPass()&&!g.isHidden(this.transform.zoom)){var _=h[g.source];("custom"===g.type||_.length)&&this.renderLayer(this,i[g.source],g,_)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=a.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[a[this.currentLayer]],x=i[b.source],w=c[b.source];this._renderTileClippingMasks(b,w),this.renderLayer(this,x,b,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<a.length;this.currentLayer++){var k=this.style._layers[a[this.currentLayer]],C=i[k.source],S=("symbol"===k.type?f:h)[k.source];this._renderTileClippingMasks(k,c[k.source]),this.renderLayer(this,C,k,S)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach((function(e){e.source&&!e.isHidden(r.transform.zoom)&&(e.source!==(l&&l.id)&&(l=r.style.sourceCaches[e.source]),(!u||u.getSource().maxzoom<l.getSource().maxzoom)&&(u=l))})),u&&yr.debug(this,u,u.getVisibleCoordinates())),this.options.showPadding&&function(e){var t=e.transform.padding;dr(e,e.transform.height-(t.top||0),3,ur),dr(e,t.bottom||0,3,lr),pr(e,t.left||0,3,cr),pr(e,e.transform.width-(t.right||0),3,hr);var n=e.transform.centerPoint;!function(e,t,n,r){mr(e,t-1,n-10,2,20,r),mr(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,fr)}(this),this.context.setDefault()},gr.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,this.gpuTimingStart(n),yr[n.type](e,t,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},gr.prototype.gpuTimingStart=function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}},gr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}},gr.prototype.collectGpuTimers=function(){var e=this.gpuTimers;return this.gpuTimers={},e},gr.prototype.queryGpuTimers=function(e){var t={};for(var n in e){var r=e[n],a=this.context.extTimerQuery,i=a.getQueryObjectEXT(r.query,a.QUERY_RESULT_EXT)/1e6;a.deleteQueryEXT(r.query),t[n]=i}return t},gr.prototype.translatePosMatrix=function(t,n,r,a,i){if(!r[0]&&!r[1])return t;var o=i?"map"===a?this.transform.angle:0:"viewport"===a?-this.transform.angle:0;if(o){var s=Math.sin(o),u=Math.cos(o);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[i?r[0]:ft(n,r[0],this.transform.zoom),i?r[1]:ft(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return e.translate(c,t,l),c},gr.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},gr.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},gr.prototype.isPatternMissing=function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n},gr.prototype.useProgram=function(e,t){this.cache=this.cache||{};var n=""+e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new xn(this.context,_n[e],t,Kn[e],this._showOverdrawInspector)),this.cache[n]},gr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},gr.prototype.setBaseState=function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)},gr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},gr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _r=function(e,t){this.points=e,this.planes=t};_r.fromInvProjectionMatrix=function(t,n,r){var a=Math.pow(2,r),i=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(n){return e.transformMat4([],n,t)})).map((function(t){return e.scale$1([],t,1/t[3]/n*a)})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(t){var n=e.sub([],i[t[0]],i[t[1]]),r=e.sub([],i[t[2]],i[t[1]]),a=e.normalize([],e.cross([],n,r)),o=-e.dot(a,i[t[1]]);return a.concat(o)}));return new _r(i,o)};var br=function(t,n){this.min=t,this.max=n,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};br.prototype.quadrant=function(t){for(var n=[t%2==0,t<2],r=e.clone$2(this.min),a=e.clone$2(this.max),i=0;i<n.length;i++)r[i]=n[i]?this.min[i]:this.center[i],a[i]=n[i]?this.center[i]:this.max[i];return a[2]=this.max[2],new br(r,a)},br.prototype.distanceX=function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]},br.prototype.distanceY=function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]},br.prototype.intersects=function(t){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,a=0;a<t.planes.length;a++){for(var i=t.planes[a],o=0,s=0;s<n.length;s++)o+=e.dot$1(i,n[s])>=0;if(0===o)return 0;o!==n.length&&(r=!1)}if(r)return 2;for(var u=0;u<3;u++){for(var l=Number.MAX_VALUE,c=-Number.MAX_VALUE,h=0;h<t.points.length;h++){var f=t.points[h][u]-this.min[u];l=Math.min(l,f),c=Math.max(c,f)}if(c<0||l>this.max[u]-this.min[u])return 0}return 1};var xr=function(e,t,n,r){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r};xr.prototype.interpolate=function(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this},xr.prototype.getCenter=function(t,n){var r=e.clamp((this.left+t-this.right)/2,0,t),a=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.Point(r,a)},xr.prototype.equals=function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right},xr.prototype.clone=function(){return new xr(this.top,this.bottom,this.left,this.right)},xr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var wr=function(t,n,r,a,i){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===i||i,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==a?60:a,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new xr,this._posMatrixCache={},this._alignedPosMatrixCache={}},kr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};wr.prototype.clone=function(){var e=new wr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._calcMatrices(),e},kr.minZoom.get=function(){return this._minZoom},kr.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},kr.maxZoom.get=function(){return this._maxZoom},kr.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},kr.minPitch.get=function(){return this._minPitch},kr.minPitch.set=function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))},kr.maxPitch.get=function(){return this._maxPitch},kr.maxPitch.set=function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))},kr.renderWorldCopies.get=function(){return this._renderWorldCopies},kr.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},kr.worldSize.get=function(){return this.tileSize*this.scale},kr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},kr.size.get=function(){return new e.Point(this.width,this.height)},kr.bearing.get=function(){return-this.angle/Math.PI*180},kr.bearing.set=function(t){var n=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},kr.pitch.get=function(){return this._pitch/Math.PI*180},kr.pitch.set=function(t){var n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},kr.fov.get=function(){return this._fov/Math.PI*180},kr.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},kr.zoom.get=function(){return this._zoom},kr.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},kr.center.get=function(){return this._center},kr.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},kr.padding.get=function(){return this._edgeInsets.toJSON()},kr.padding.set=function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())},kr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},wr.prototype.isPaddingEqual=function(e){return this._edgeInsets.equals(e)},wr.prototype.interpolatePadding=function(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()},wr.prototype.coveringZoomLevel=function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)},wr.prototype.getVisibleUnwrappedCoordinates=function(t){var n=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new e.Point(0,0)),a=this.pointCoordinate(new e.Point(this.width,0)),i=this.pointCoordinate(new e.Point(this.width,this.height)),o=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(r.x,a.x,i.x,o.x)),u=Math.floor(Math.max(r.x,a.x,i.x,o.x)),l=s-1;l<=u+1;l++)0!==l&&n.push(new e.UnwrappedTileID(l,t));return n},wr.prototype.coveringTiles=function(t){var n=this.coveringZoomLevel(t),r=n;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);var a=e.MercatorCoordinate.fromLngLat(this.center),i=Math.pow(2,n),o=[i*a.x,i*a.y,0],s=_r.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),u=t.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(u=n);var l=function(e){return{aabb:new br([e*i,0,0],[(e+1)*i,i,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}},c=[],h=[],f=n,d=t.reparseOverscaled?r:n;if(this._renderWorldCopies)for(var p=1;p<=3;p++)c.push(l(-p)),c.push(l(p));for(c.push(l(0));c.length>0;){var m=c.pop(),v=m.x,y=m.y,g=m.fullyVisible;if(!g){var _=m.aabb.intersects(s);if(0===_)continue;g=2===_}var b=m.aabb.distanceX(o),x=m.aabb.distanceY(o),w=Math.max(Math.abs(b),Math.abs(x));if(m.zoom===f||w>3+(1<<f-m.zoom)-2&&m.zoom>=u)h.push({tileID:new e.OverscaledTileID(m.zoom===f?d:m.zoom,m.wrap,m.zoom,v,y),distanceSq:e.sqrLen([o[0]-.5-v,o[1]-.5-y])});else for(var k=0;k<4;k++){var C=(v<<1)+k%2,S=(y<<1)+(k>>1);c.push({aabb:m.aabb.quadrant(k),zoom:m.zoom+1,x:C,y:S,wrap:m.wrap,fullyVisible:g})}}return h.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))},wr.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},kr.unmodified.get=function(){return this._unmodified},wr.prototype.zoomScale=function(e){return Math.pow(2,e)},wr.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},wr.prototype.project=function(t){var n=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(n)*this.worldSize)},wr.prototype.unproject=function(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},kr.point.get=function(){return this.project(this.center)},wr.prototype.setLocationAtPoint=function(t,n){var r=this.pointCoordinate(n),a=this.pointCoordinate(this.centerPoint),i=this.locationCoordinate(t),o=new e.MercatorCoordinate(i.x-(r.x-a.x),i.y-(r.y-a.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},wr.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},wr.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},wr.prototype.locationCoordinate=function(t){return e.MercatorCoordinate.fromLngLat(t)},wr.prototype.coordinateLocation=function(e){return e.toLngLat()},wr.prototype.pointCoordinate=function(t){var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];e.transformMat4(n,n,this.pixelMatrixInverse),e.transformMat4(r,r,this.pixelMatrixInverse);var a=n[3],i=r[3],o=n[1]/a,s=r[1]/i,u=n[2]/a,l=r[2]/i,c=u===l?0:(0-u)/(l-u);return new e.MercatorCoordinate(e.number(n[0]/a,r[0]/i,c)/this.worldSize,e.number(o,s,c)/this.worldSize)},wr.prototype.coordinatePoint=function(t){var n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(n,n,this.pixelMatrix),new e.Point(n[0]/n[3],n[1]/n[3])},wr.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},wr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},wr.prototype.setMaxBounds=function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},wr.prototype.calculatePosMatrix=function(t,n){void 0===n&&(n=!1);var r=t.key,a=n?this._alignedPosMatrixCache:this._posMatrixCache;if(a[r])return a[r];var i=t.canonical,o=this.worldSize/this.zoomScale(i.z),s=i.x+Math.pow(2,i.z)*t.wrap,u=e.identity(new Float64Array(16));return e.translate(u,u,[s*o,i.y*o,0]),e.scale(u,u,[o/e.EXTENT,o/e.EXTENT,1]),e.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),a[r]=new Float32Array(u),a[r]},wr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},wr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,n,r,a,i=-90,o=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;i=e.mercatorYfromLat(h[1])*this.worldSize,t=(o=e.mercatorYfromLat(h[0])*this.worldSize)-i<l.y?l.y/(o-i):0}if(this.lngRange){var f=this.lngRange;s=e.mercatorXfromLng(f[0])*this.worldSize,n=(u=e.mercatorXfromLng(f[1])*this.worldSize)-s<l.x?l.x/(u-s):0}var d=this.point,p=Math.max(n||0,t||0);if(p)return this.center=this.unproject(new e.Point(n?(u+s)/2:d.x,t?(o+i)/2:d.y)),this.zoom+=this.scaleZoom(p),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=d.y,v=l.y/2;m-v<i&&(a=i+v),m+v>o&&(a=o-v)}if(this.lngRange){var y=d.x,g=l.x/2;y-g<s&&(r=s+g),y+g>u&&(r=u-g)}void 0===r&&void 0===a||(this.center=this.unproject(new e.Point(void 0!==r?r:d.x,void 0!==a?a:d.y))),this._unmodified=c,this._constraining=!1}},wr.prototype._calcMatrices=function(){if(this.height){var t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+t.y/this.height),a=Math.sin(r)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-n-r,.01,Math.PI-.01)),i=this.point,o=i.x,s=i.y,u=1.01*(Math.cos(Math.PI/2-this._pitch)*a+this.cameraToCenterDistance),l=this.height/50,c=new Float64Array(16);e.perspective(c,this._fov,this.width/this.height,l,u),c[8]=2*-t.x/this.width,c[9]=2*t.y/this.height,e.scale(c,c,[1,-1,1]),e.translate(c,c,[0,0,-this.cameraToCenterDistance]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle),e.translate(c,c,[-o,-s,0]),this.mercatorMatrix=e.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),e.scale(c,c,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c,this.invProjMatrix=e.invert([],this.projMatrix);var h=this.width%2/2,f=this.height%2/2,d=Math.cos(this.angle),p=Math.sin(this.angle),m=o-Math.round(o)+d*h+p*f,v=s-Math.round(s)+d*f+p*h,y=new Float64Array(c);if(e.translate(y,y,[m>.5?m-1:m,v>.5?v-1:v,0]),this.alignedProjMatrix=y,c=e.create(),e.scale(c,c,[this.width/2,-this.height/2,1]),e.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=e.create(),e.scale(c,c,[1,-1,1]),e.translate(c,c,[-1,-1,0]),e.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},wr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new e.Point(0,0)),n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},wr.prototype.getCameraPoint=function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))},wr.prototype.getCameraQueryGeometry=function(t){var n=this.getCameraPoint();if(1===t.length)return[t[0],n];for(var r=n.x,a=n.y,i=n.x,o=n.y,s=0,u=t;s<u.length;s+=1){var l=u[s];r=Math.min(r,l.x),a=Math.min(a,l.y),i=Math.max(i,l.x),o=Math.max(o,l.y)}return[new e.Point(r,a),new e.Point(i,a),new e.Point(i,o),new e.Point(r,o),new e.Point(r,a)]},Object.defineProperties(wr.prototype,kr);var Cr=function(t){var n,r,a,i;this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),r=!1,a=null,i=function(){a=null,r&&(n(),a=setTimeout(i,300),r=!1)},function(){return r=!0,a||i(),a})};Cr.prototype.addTo=function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Cr.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Cr.prototype.getHashString=function(t){var n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,a=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,a),o=Math.round(n.lng*i)/i,s=Math.round(n.lat*i)/i,u=this._map.getBearing(),l=this._map.getPitch(),c="";if(c+=t?"/"+o+"/"+s+"/"+r:r+"/"+s+"/"+o,(u||l)&&(c+="/"+Math.round(10*u)/10),l&&(c+="/"+Math.round(l)),this._hashName){var h=this._hashName,f=!1,d=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===h?(f=!0,t+"="+c):e})).filter((function(e){return e}));return f||d.push(h+"="+c),"#"+d.join("&")}return"#"+c},Cr.prototype._getCurrentHash=function(){var t,n=this,r=e.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===n._hashName&&(t=e)})),(t&&t[1]||"").split("/")):r.split("/")},Cr.prototype._onHashChange=function(){var e=this._getCurrentHash();if(e.length>=3&&!e.some((function(e){return isNaN(e)}))){var t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1},Cr.prototype._updateHashUnthrottled=function(){var t=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",t)}catch(e){}};var Sr={linearity:.3,easing:e.bezier(0,0,.3,1)},Ir=e.extend({deceleration:2500,maxSpeed:1400},Sr),Dr=e.extend({deceleration:20,maxSpeed:1400},Sr),Ar=e.extend({deceleration:1e3,maxSpeed:360},Sr),Tr=e.extend({deceleration:1e3,maxSpeed:90},Sr),Er=function(e){this._map=e,this.clear()};function Rr(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Or(t,n,r){var a=r.maxSpeed,i=r.linearity,o=r.deceleration,s=e.clamp(t*i/(n/1e3),-a,a),u=Math.abs(s)/(o*i);return{easing:r.easing,duration:1e3*u,amount:s*(u/2)}}Er.prototype.clear=function(){this._inertiaBuffer=[]},Er.prototype.record=function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:t})},Er.prototype._drainInertiaBuffer=function(){for(var t=this._inertiaBuffer,n=e.browser.now();t.length>0&&n-t[0].time>160;)t.shift()},Er.prototype._onMoveEnd=function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var n={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},r=0,a=this._inertiaBuffer;r<a.length;r+=1){var i=a[r].settings;n.zoom+=i.zoomDelta||0,n.bearing+=i.bearingDelta||0,n.pitch+=i.pitchDelta||0,i.panDelta&&n.pan._add(i.panDelta),i.around&&(n.around=i.around),i.pinchAround&&(n.pinchAround=i.pinchAround)}var o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(n.pan.mag()){var u=Or(n.pan.mag(),o,e.extend({},Ir,t||{}));s.offset=n.pan.mult(u.amount/n.pan.mag()),s.center=this._map.transform.center,Rr(s,u)}if(n.zoom){var l=Or(n.zoom,o,Dr);s.zoom=this._map.transform.zoom+l.amount,Rr(s,l)}if(n.bearing){var c=Or(n.bearing,o,Ar);s.bearing=this._map.transform.bearing+e.clamp(c.amount,-179,179),Rr(s,c)}if(n.pitch){var h=Or(n.pitch,o,Tr);s.pitch=this._map.transform.pitch+h.amount,Rr(s,h)}if(s.zoom||s.bearing){var f=void 0===n.pinchAround?n.around:n.pinchAround;s.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),e.extend(s,{noMoveStart:!0})}};var Mr=function(t){function r(r,a,i,o){void 0===o&&(o={});var s=n.mousePos(a.getCanvasContainer(),i),u=a.unproject(s);t.call(this,r,e.extend({point:s,lngLat:u,originalEvent:i},o)),this._defaultPrevented=!1,this.target=a}t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r;var a={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,a),r}(e.Event),Nr=function(t){function r(r,a,i){var o="touchend"===r?i.changedTouches:i.touches,s=n.touchPos(a.getCanvasContainer(),o),u=s.map((function(e){return a.unproject(e)})),l=s.reduce((function(e,t,n,r){return e.add(t.div(r.length))}),new e.Point(0,0)),c=a.unproject(l);t.call(this,r,{points:s,point:l,lngLats:u,lngLat:c,originalEvent:i}),this._defaultPrevented=!1}t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r;var a={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,a),r}(e.Event),Pr=function(e){function t(t,n,r){e.call(this,t,{originalEvent:r}),this._defaultPrevented=!1}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={defaultPrevented:{configurable:!0}};return t.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,n),t}(e.Event),Fr=function(e,t){this._map=e,this._clickTolerance=t.clickTolerance};Fr.prototype.reset=function(){delete this._mousedownPos},Fr.prototype.wheel=function(e){return this._firePreventable(new Pr(e.type,this._map,e))},Fr.prototype.mousedown=function(e,t){return this._mousedownPos=t,this._firePreventable(new Mr(e.type,this._map,e))},Fr.prototype.mouseup=function(e){this._map.fire(new Mr(e.type,this._map,e))},Fr.prototype.click=function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Mr(e.type,this._map,e))},Fr.prototype.dblclick=function(e){return this._firePreventable(new Mr(e.type,this._map,e))},Fr.prototype.mouseover=function(e){this._map.fire(new Mr(e.type,this._map,e))},Fr.prototype.mouseout=function(e){this._map.fire(new Mr(e.type,this._map,e))},Fr.prototype.touchstart=function(e){return this._firePreventable(new Nr(e.type,this._map,e))},Fr.prototype.touchmove=function(e){this._map.fire(new Nr(e.type,this._map,e))},Fr.prototype.touchend=function(e){this._map.fire(new Nr(e.type,this._map,e))},Fr.prototype.touchcancel=function(e){this._map.fire(new Nr(e.type,this._map,e))},Fr.prototype._firePreventable=function(e){if(this._map.fire(e),e.defaultPrevented)return{}},Fr.prototype.isEnabled=function(){return!0},Fr.prototype.isActive=function(){return!1},Fr.prototype.enable=function(){},Fr.prototype.disable=function(){};var Lr=function(e){this._map=e};Lr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Lr.prototype.mousemove=function(e){this._map.fire(new Mr(e.type,this._map,e))},Lr.prototype.mousedown=function(){this._delayContextMenu=!0},Lr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Mr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Lr.prototype.contextmenu=function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new Mr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()},Lr.prototype.isEnabled=function(){return!0},Lr.prototype.isActive=function(){return!1},Lr.prototype.enable=function(){},Lr.prototype.disable=function(){};var zr=function(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1};function Br(e,t){for(var n={},r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}zr.prototype.isEnabled=function(){return!!this._enabled},zr.prototype.isActive=function(){return!!this._active},zr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},zr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},zr.prototype.mousedown=function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(n.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)},zr.prototype.mousemoveWindow=function(e,t){if(this._active){var r=t;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var a=this._startPos;this._lastPos=r,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var i=Math.min(a.x,r.x),o=Math.max(a.x,r.x),s=Math.min(a.y,r.y),u=Math.max(a.y,r.y);n.setTransform(this._box,"translate("+i+"px,"+s+"px)"),this._box.style.width=o-i+"px",this._box.style.height=u-s+"px"}}},zr.prototype.mouseupWindow=function(t,r){var a=this;if(this._active&&0===t.button){var i=this._startPos,o=r;if(this.reset(),n.suppressClick(),i.x!==o.x||i.y!==o.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(i,o,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",t)}},zr.prototype.keydown=function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))},zr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},zr.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))};var Wr=function(e){this.reset(),this.numTouches=e.numTouches};Wr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Wr.prototype.touchstart=function(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){for(var n=new e.Point(0,0),r=0,a=t;r<a.length;r+=1)n._add(a[r]);return n.div(t.length)}(n),this.touches=Br(r,n)))},Wr.prototype.touchmove=function(e,t,n){if(!this.aborted&&this.centroid){var r=Br(n,t);for(var a in this.touches){var i=r[a];(!i||i.dist(this.touches[a])>30)&&(this.aborted=!0)}}},Wr.prototype.touchend=function(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};var qr=function(e){this.singleTap=new Wr(e),this.numTaps=e.numTaps,this.reset()};qr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},qr.prototype.touchstart=function(e,t,n){this.singleTap.touchstart(e,t,n)},qr.prototype.touchmove=function(e,t,n){this.singleTap.touchmove(e,t,n)},qr.prototype.touchend=function(e,t,n){var r=this.singleTap.touchend(e,t,n);if(r){var a=e.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(r)<30;if(a&&i||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}};var Vr=function(){this._zoomIn=new qr({numTouches:1,numTaps:2}),this._zoomOut=new qr({numTouches:2,numTaps:1}),this.reset()};Vr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Vr.prototype.touchstart=function(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)},Vr.prototype.touchmove=function(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)},Vr.prototype.touchend=function(e,t,n){var r=this,a=this._zoomIn.touchend(e,t,n),i=this._zoomOut.touchend(e,t,n);return a?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(a)},{originalEvent:e})}}):i?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}}):void 0},Vr.prototype.touchcancel=function(){this.reset()},Vr.prototype.enable=function(){this._enabled=!0},Vr.prototype.disable=function(){this._enabled=!1,this.reset()},Vr.prototype.isEnabled=function(){return this._enabled},Vr.prototype.isActive=function(){return this._active};var Ur=function(e){this.reset(),this._clickTolerance=e.clickTolerance||1};Ur.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Ur.prototype._correctButton=function(e,t){return!1},Ur.prototype._move=function(e,t){return{}},Ur.prototype.mousedown=function(e,t){if(!this._lastPoint){var r=n.mouseButton(e);this._correctButton(e,r)&&(this._lastPoint=t,this._eventButton=r)}},Ur.prototype.mousemoveWindow=function(e,t){var n=this._lastPoint;if(n&&(e.preventDefault(),this._moved||!(t.dist(n)<this._clickTolerance)))return this._moved=!0,this._lastPoint=t,this._move(n,t)},Ur.prototype.mouseupWindow=function(e){n.mouseButton(e)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},Ur.prototype.enable=function(){this._enabled=!0},Ur.prototype.disable=function(){this._enabled=!1,this.reset()},Ur.prototype.isEnabled=function(){return this._enabled},Ur.prototype.isActive=function(){return this._active};var jr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.mousedown=function(t,n){e.prototype.mousedown.call(this,t,n),this._lastPoint&&(this._active=!0)},t.prototype._correctButton=function(e,t){return 0===t&&!e.ctrlKey},t.prototype._move=function(e,t){return{around:t,panDelta:t.sub(e)}},t}(Ur),Hr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._correctButton=function(e,t){return 0===t&&e.ctrlKey||2===t},t.prototype._move=function(e,t){var n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}},t.prototype.contextmenu=function(e){e.preventDefault()},t}(Ur),Gr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._correctButton=function(e,t){return 0===t&&e.ctrlKey||2===t},t.prototype._move=function(e,t){var n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}},t.prototype.contextmenu=function(e){e.preventDefault()},t}(Ur),Jr=function(e){this._minTouches=1,this._clickTolerance=e.clickTolerance||1,this.reset()};Jr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Jr.prototype.touchstart=function(e,t,n){return this._calculateTransform(e,t,n)},Jr.prototype.touchmove=function(e,t,n){if(this._active)return e.preventDefault(),this._calculateTransform(e,t,n)},Jr.prototype.touchend=function(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()},Jr.prototype.touchcancel=function(){this.reset()},Jr.prototype._calculateTransform=function(t,n,r){r.length>0&&(this._active=!0);var a=Br(r,n),i=new e.Point(0,0),o=new e.Point(0,0),s=0;for(var u in a){var l=a[u],c=this._touches[u];c&&(i._add(l),o._add(l.sub(c)),s++,a[u]=l)}if(this._touches=a,!(s<this._minTouches)&&o.mag()){var h=o.div(s);if(this._sum._add(h),!(this._sum.mag()<this._clickTolerance))return{around:i.div(s),panDelta:h}}},Jr.prototype.enable=function(){this._enabled=!0},Jr.prototype.disable=function(){this._enabled=!1,this.reset()},Jr.prototype.isEnabled=function(){return this._enabled},Jr.prototype.isActive=function(){return this._active};var Xr=function(){this.reset()};function Kr(e,t,n){for(var r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Zr(e,t){return Math.log(e/t)/Math.LN2}Xr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Xr.prototype._start=function(e){},Xr.prototype._move=function(e,t,n){return{}},Xr.prototype.touchstart=function(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))},Xr.prototype.touchmove=function(e,t,n){if(this._firstTwoTouches){e.preventDefault();var r=this._firstTwoTouches,a=r[1],i=Kr(n,t,r[0]),o=Kr(n,t,a);if(i&&o){var s=this._aroundCenter?null:i.add(o).div(2);return this._move([i,o],s,e)}}},Xr.prototype.touchend=function(e,t,r){if(this._firstTwoTouches){var a=this._firstTwoTouches,i=a[1],o=Kr(r,t,a[0]),s=Kr(r,t,i);o&&s||(this._active&&n.suppressClick(),this.reset())}},Xr.prototype.touchcancel=function(){this.reset()},Xr.prototype.enable=function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around},Xr.prototype.disable=function(){this._enabled=!1,this.reset()},Xr.prototype.isEnabled=function(){return this._enabled},Xr.prototype.isActive=function(){return this._active};var Yr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),delete this._distance,delete this._startDistance},t.prototype._start=function(e){this._startDistance=this._distance=e[0].dist(e[1])},t.prototype._move=function(e,t){var n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Zr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zr(this._distance,n),pinchAround:t}},t}(Xr);function Qr(e,t){return 180*e.angleWith(t)/Math.PI}var $r=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},t.prototype._start=function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])},t.prototype._move=function(e,t){var n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Qr(this._vector,n),pinchAround:t}},t.prototype._isBelowThreshold=function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,n=Qr(e,this._startVector);return Math.abs(n)<t},t}(Xr);function ea(e){return Math.abs(e.y)>Math.abs(e.x)}var ta=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},t.prototype._start=function(e){this._lastPoints=e,ea(e[0].sub(e[1]))&&(this._valid=!1)},t.prototype._move=function(e,t,n){var r=e[0].sub(this._lastPoints[0]),a=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,a,n.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+a.y)/2*-.5}},t.prototype.gestureBeginsVertically=function(e,t,n){if(void 0!==this._valid)return this._valid;var r=e.mag()>=2,a=t.mag()>=2;if(r||a){if(!r||!a)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var i=e.y>0==t.y>0;return ea(e)&&ea(t)&&i}},t}(Xr),na={panStep:100,bearingStep:15,pitchStep:10},ra=function(){var e=na;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep};function aa(e){return e*(2-e)}ra.prototype.reset=function(){this._active=!1},ra.prototype.keydown=function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=0,r=0,a=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?a=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?a=-1:(e.preventDefault(),o=1);break;default:return}return{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:aa,zoom:n?Math.round(u)+n*(e.shiftKey?2:1):u,bearing:s.getBearing()+r*t._bearingStep,pitch:s.getPitch()+a*t._pitchStep,offset:[-i*t._panStep,-o*t._panStep],center:s.getCenter()},{originalEvent:e})}}}},ra.prototype.enable=function(){this._enabled=!0},ra.prototype.disable=function(){this._enabled=!1,this.reset()},ra.prototype.isEnabled=function(){return this._enabled},ra.prototype.isActive=function(){return this._active};var ia=function(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ia.prototype.setZoomRate=function(e){this._defaultZoomRate=e},ia.prototype.setWheelZoomRate=function(e){this._wheelZoomRate=e},ia.prototype.isEnabled=function(){return!!this._enabled},ia.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},ia.prototype.isZooming=function(){return!!this._zooming},ia.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},ia.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ia.prototype.wheel=function(t){if(this.isEnabled()){var n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=e.browser.now(),a=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":a>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(a*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}},ia.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},ia.prototype._start=function(t){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var r=n.mousePos(this._el,t);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ia.prototype.renderFrame=function(){return this._onScrollFrame()},ia.prototype._onScrollFrame=function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,a=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==a&&(a=1/a);var i="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(i*a))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o,s="number"==typeof this._targetZoom?this._targetZoom:n.zoom,u=this._startZoom,l=this._easing,c=!1;if("wheel"===this._type&&u&&l){var h=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),f=l(h);o=e.number(u,s,f),h<1?this._frameId||(this._frameId=!0):c=!0}else o=s,c=!0;return this._active=!0,c&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!c,zoomDelta:o-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ia.prototype._smoothOutEasing=function(t){var n=e.ease;if(this._prevEase){var r=this._prevEase,a=(e.browser.now()-r.start)/r.duration,i=r.easing(a+.01)-r.easing(a),o=.27/Math.sqrt(i*i+1e-4)*.01,s=Math.sqrt(.0729-o*o);n=e.bezier(o,s,.25,1)}return this._prevEase={start:e.browser.now(),duration:t,easing:n},n},ia.prototype.reset=function(){this._active=!1};var oa=function(e,t){this._clickZoom=e,this._tapZoom=t};oa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},oa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},oa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},oa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var sa=function(){this.reset()};sa.prototype.reset=function(){this._active=!1},sa.prototype.dblclick=function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}},sa.prototype.enable=function(){this._enabled=!0},sa.prototype.disable=function(){this._enabled=!1,this.reset()},sa.prototype.isEnabled=function(){return this._enabled},sa.prototype.isActive=function(){return this._active};var ua=function(){this._tap=new qr({numTouches:1,numTaps:1}),this.reset()};ua.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ua.prototype.touchstart=function(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))},ua.prototype.touchmove=function(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=t[0],a=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:a/128}}}else this._tap.touchmove(e,t,n)},ua.prototype.touchend=function(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)},ua.prototype.touchcancel=function(){this.reset()},ua.prototype.enable=function(){this._enabled=!0},ua.prototype.disable=function(){this._enabled=!1,this.reset()},ua.prototype.isEnabled=function(){return this._enabled},ua.prototype.isActive=function(){return this._active};var la=function(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n};la.prototype.enable=function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},la.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},la.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},la.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ca=function(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n};ca.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ca.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ca.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ca.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ha=function(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};ha.prototype.enable=function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ha.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ha.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ha.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ha.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ha.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var fa=function(e){return e.zoom||e.drag||e.pitch||e.rotate},da=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(e.Event);function pa(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var ma=function(t,r){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Er(t),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!1}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[e.window,"blur",void 0]];for(var i=0,o=this._listeners;i<o.length;i+=1){var s=o[i],u=s[0];n.addEventListener(u,s[1],u===e.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};ma.prototype.destroy=function(){for(var t=0,r=this._listeners;t<r.length;t+=1){var a=r[t],i=a[0];n.removeEventListener(i,a[1],i===e.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},ma.prototype._addDefaultHandlers=function(e){var t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new Fr(t,e));var r=t.boxZoom=new zr(t,e);this._add("boxZoom",r);var a=new Vr,i=new sa;t.doubleClickZoom=new oa(i,a),this._add("tapZoom",a),this._add("clickZoom",i);var o=new ua;this._add("tapDragZoom",o);var s=t.touchPitch=new ta;this._add("touchPitch",s);var u=new Hr(e),l=new Gr(e);t.dragRotate=new ca(e,u,l),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",l,["mouseRotate"]);var c=new jr(e),h=new Jr(e);t.dragPan=new la(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var f=new $r,d=new Yr;t.touchZoomRotate=new ha(n,d,f,o),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]);var p=t.scrollZoom=new ia(t,this);this._add("scrollZoom",p,["mousePan"]);var m=t.keyboard=new ra;this._add("keyboard",m),this._add("blockableMapEvent",new Lr(t));for(var v=0,y=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];v<y.length;v+=1){var g=y[v];e.interactive&&e[g]&&t[g].enable(e[g])}},ma.prototype._add=function(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t},ma.prototype.stop=function(){if(!this._updatingCamera){for(var e=0,t=this._handlers;e<t.length;e+=1)t[e].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ma.prototype.isActive=function(){for(var e=0,t=this._handlers;e<t.length;e+=1)if(t[e].handler.isActive())return!0;return!1},ma.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ma.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ma.prototype.isMoving=function(){return Boolean(fa(this._eventsInProgress))||this.isZooming()},ma.prototype._blockedByActive=function(e,t,n){for(var r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1},ma.prototype.handleWindowEvent=function(e){this.handleEvent(e,e.type+"Window")},ma.prototype._getMapTouches=function(e){for(var t=[],n=0,r=e;n<r.length;n+=1){var a=r[n];this._el.contains(a.target)&&t.push(a)}return t},ma.prototype.handleEvent=function(e,t){if("blur"!==e.type){this._updatingCamera=!0;for(var r="renderFrame"===e.type?void 0:e,a={needsRenderFrame:!1},i={},o={},s=e.touches?this._getMapTouches(e.touches):void 0,u=s?n.touchPos(this._el,s):n.mousePos(this._el,e),l=0,c=this._handlers;l<c.length;l+=1){var h=c[l],f=h.handlerName,d=h.handler,p=h.allowed;if(d.isEnabled()){var m=void 0;this._blockedByActive(o,p,f)?d.reset():d[t||e.type]&&(m=d[t||e.type](e,u,s),this.mergeHandlerResult(a,i,m,f,r),m&&m.needsRenderFrame&&this._triggerRenderFrame()),(m||d.isActive())&&(o[f]=d)}}var v={};for(var y in this._previousActiveHandlers)o[y]||(v[y]=r);this._previousActiveHandlers=o,(Object.keys(v).length||pa(a))&&(this._changes.push([a,i,v]),this._triggerRenderFrame()),(Object.keys(o).length||pa(a))&&this._map._stop(!0),this._updatingCamera=!1;var g=a.cameraAnimation;g&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],g(this._map))}else this.stop()},ma.prototype.mergeHandlerResult=function(t,n,r,a,i){if(r){e.extend(t,r);var o={handlerName:a,originalEvent:r.originalEvent||i};void 0!==r.zoomDelta&&(n.zoom=o),void 0!==r.panDelta&&(n.drag=o),void 0!==r.pitchDelta&&(n.pitch=o),void 0!==r.bearingDelta&&(n.rotate=o)}},ma.prototype._applyChanges=function(){for(var t={},n={},r={},a=0,i=this._changes;a<i.length;a+=1){var o=i[a],s=o[0],u=o[1],l=o[2];s.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(t.around=s.around),void 0!==s.pinchAround&&(t.pinchAround=s.pinchAround),s.noInertia&&(t.noInertia=s.noInertia),e.extend(n,u),e.extend(r,l)}this._updateMapTransform(t,n,r),this._changes=[]},ma.prototype._updateMapTransform=function(e,t,n){var r=this._map,a=r.transform;if(!pa(e))return this._fireEvents(t,n);var i=e.panDelta,o=e.zoomDelta,s=e.bearingDelta,u=e.pitchDelta,l=e.around,c=e.pinchAround;void 0!==c&&(l=c),r._stop(!0),l=l||r.transform.centerPoint;var h=a.pointLocation(i?l.sub(i):l);s&&(a.bearing+=s),u&&(a.pitch+=u),o&&(a.zoom+=o),a.setLocationAtPoint(h,l),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,n)},ma.prototype._fireEvents=function(t,n){var r=this,a=fa(this._eventsInProgress),i=fa(t),o={};for(var s in t)this._eventsInProgress[s]||(o[s+"start"]=t[s].originalEvent),this._eventsInProgress[s]=t[s];for(var u in!a&&i&&this._fireEvent("movestart",i.originalEvent),o)this._fireEvent(u,o[u]);for(var l in t.rotate&&(this._bearingChanged=!0),i&&this._fireEvent("move",i.originalEvent),t)this._fireEvent(l,t[l].originalEvent);var c,h={};for(var f in this._eventsInProgress){var d=this._eventsInProgress[f],p=d.handlerName,m=d.originalEvent;this._handlersById[p].isActive()||(delete this._eventsInProgress[f],h[f+"end"]=c=n[p]||m)}for(var v in h)this._fireEvent(v,h[v]);var y=fa(this._eventsInProgress);if((a||i)&&!y){this._updatingCamera=!0;var g=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),_=function(e){return 0!==e&&-r._bearingSnap<e&&e<r._bearingSnap};g?(_(g.bearing||this._map.getBearing())&&(g.bearing=0),this._map.easeTo(g,{originalEvent:c})):(this._map.fire(new e.Event("moveend",{originalEvent:c})),_(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ma.prototype._fireEvent=function(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))},ma.prototype._triggerRenderFrame=function(){var e=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame((function(t){delete e._frameId,e.handleEvent(new da("renderFrame",{timeStamp:t})),e._applyChanges()})))};var va=function(t){function n(n,r){t.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},n.prototype.panBy=function(t,n,r){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)},n.prototype.panTo=function(t,n,r){return this.easeTo(e.extend({center:t},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},n.prototype.zoomTo=function(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)},n.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},n.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},n.prototype.getPadding=function(){return this.transform.padding},n.prototype.setPadding=function(e,t){return this.jumpTo({padding:e},t),this},n.prototype.rotateTo=function(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)},n.prototype.resetNorth=function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this},n.prototype.resetNorthPitch=function(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this},n.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},n.prototype.cameraForBounds=function(t,n){return t=e.LngLatBounds.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,n)},n.prototype._cameraForBoxAndBearing=function(t,n,r,a){var i={top:0,bottom:0,right:0,left:0};if("number"==typeof(a=e.extend({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding){var o=a.padding;a.padding={top:o,bottom:o,right:o,left:o}}a.padding=e.extend(i,a.padding);var s=this.transform,u=s.padding,l=s.project(e.LngLat.convert(t)),c=s.project(e.LngLat.convert(n)),h=l.rotate(-r*Math.PI/180),f=c.rotate(-r*Math.PI/180),d=new e.Point(Math.max(h.x,f.x),Math.max(h.y,f.y)),p=new e.Point(Math.min(h.x,f.x),Math.min(h.y,f.y)),m=d.sub(p),v=(s.width-(u.left+u.right+a.padding.left+a.padding.right))/m.x,y=(s.height-(u.top+u.bottom+a.padding.top+a.padding.bottom))/m.y;if(!(y<0||v<0)){var g=Math.min(s.scaleZoom(s.scale*Math.min(v,y)),a.maxZoom),_=e.Point.convert(a.offset),b=new e.Point(_.x+(a.padding.left-a.padding.right)/2,_.y+(a.padding.top-a.padding.bottom)/2).mult(s.scale/s.zoomScale(g));return{center:s.unproject(l.add(c).div(2).sub(b)),zoom:g,bearing:r}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},n.prototype.fitBounds=function(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)},n.prototype.fitScreenCoordinates=function(t,n,r,a,i){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)),this.transform.pointLocation(e.Point.convert(n)),r,a),a,i)},n.prototype._fitInternal=function(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this},n.prototype.jumpTo=function(t,n){this.stop();var r=this.transform,a=!1,i=!1,o=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(a=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(i=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(o=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),a&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),i&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),o&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n))},n.prototype.easeTo=function(t,n){var r=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.browser.prefersReducedMotion)&&(t.duration=0);var a=this.transform,i=this.getZoom(),o=this.getBearing(),s=this.getPitch(),u=this.getPadding(),l="zoom"in t?+t.zoom:i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,h="pitch"in t?+t.pitch:s,f="padding"in t?t.padding:a.padding,d=e.Point.convert(t.offset),p=a.centerPoint.add(d),m=a.pointLocation(p),v=e.LngLat.convert(t.center||m);this._normalizeCenter(v);var y,g,_=a.project(m),b=a.project(v).sub(_),x=a.zoomScale(l-i);t.around&&(y=e.LngLat.convert(t.around),g=a.locationPoint(y));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==i,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||h!==s,this._padding=!a.isPaddingEqual(f),this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,w),clearTimeout(this._easeEndTimeoutID),this._ease((function(t){if(r._zooming&&(a.zoom=e.number(i,l,t)),r._rotating&&(a.bearing=e.number(o,c,t)),r._pitching&&(a.pitch=e.number(s,h,t)),r._padding&&(a.interpolatePadding(u,f,t),p=a.centerPoint.add(d)),y)a.setLocationAtPoint(y,g);else{var m=a.zoomScale(a.zoom-i),v=l>i?Math.min(2,x):Math.max(.5,x),w=Math.pow(v,1-t),k=a.unproject(_.add(b.mult(t*w)).mult(m));a.setLocationAtPoint(a.renderWorldCopies?k.wrap():k,p)}r._fireMoveEvents(n)}),(function(e){r._afterEase(n,e)}),t),this},n.prototype._prepareEase=function(t,n,r){void 0===r&&(r={}),this._moving=!0,n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))},n.prototype._fireMoveEvents=function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))},n.prototype._afterEase=function(t,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId;var r=this._zooming,a=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),a&&this.fire(new e.Event("rotateend",t)),i&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}},n.prototype.flyTo=function(t,n){var r=this;if(!t.essential&&e.browser.prefersReducedMotion){var a=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(a,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var i=this.transform,o=this.getZoom(),s=this.getBearing(),u=this.getPitch(),l=this.getPadding(),c="zoom"in t?e.clamp(+t.zoom,i.minZoom,i.maxZoom):o,h="bearing"in t?this._normalizeBearing(t.bearing,s):s,f="pitch"in t?+t.pitch:u,d="padding"in t?t.padding:i.padding,p=i.zoomScale(c-o),m=e.Point.convert(t.offset),v=i.centerPoint.add(m),y=i.pointLocation(v),g=e.LngLat.convert(t.center||y);this._normalizeCenter(g);var _=i.project(y),b=i.project(g).sub(_),x=t.curve,w=Math.max(i.width,i.height),k=w/p,C=b.mag();if("minZoom"in t){var S=e.clamp(Math.min(t.minZoom,o,c),i.minZoom,i.maxZoom),I=w/i.zoomScale(S-o);x=Math.sqrt(I/C*2)}var D=x*x;function A(e){var t=(k*k-w*w+(e?-1:1)*D*D*C*C)/(2*(e?k:w)*D*C);return Math.log(Math.sqrt(t*t+1)-t)}function T(e){return(Math.exp(e)-Math.exp(-e))/2}function E(e){return(Math.exp(e)+Math.exp(-e))/2}var R=A(0),O=function(e){return E(R)/E(R+x*e)},M=function(e){return w*((E(R)*(T(t=R+x*e)/E(t))-T(R))/D)/C;var t},N=(A(1)-R)/x;if(Math.abs(C)<1e-6||!isFinite(N)){if(Math.abs(w-k)<1e-6)return this.easeTo(t,n);var P=k<w?-1:1;N=Math.abs(Math.log(k/w))/x,M=function(){return 0},O=function(e){return Math.exp(P*x*e)}}return t.duration="duration"in t?+t.duration:1e3*N/("screenSpeed"in t?+t.screenSpeed/x:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=s!==h,this._pitching=f!==u,this._padding=!i.isPaddingEqual(d),this._prepareEase(n,!1),this._ease((function(t){var a=t*N,p=1/O(a);i.zoom=1===t?c:o+i.scaleZoom(p),r._rotating&&(i.bearing=e.number(s,h,t)),r._pitching&&(i.pitch=e.number(u,f,t)),r._padding&&(i.interpolatePadding(l,d,t),v=i.centerPoint.add(m));var y=1===t?g:i.unproject(_.add(b.mult(M(a))).mult(p));i.setLocationAtPoint(i.renderWorldCopies?y.wrap():y,v),r._fireMoveEvents(n)}),(function(){return r._afterEase(n)}),t),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){return this._stop()},n.prototype._stop=function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,t)}if(!e){var r=this.handlers;r&&r.stop()}return this},n.prototype._ease=function(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.browser.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var t=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(t,n){t=e.wrap(t,-180,180);var r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t},n.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}},n}(e.Evented),ya=function(t){void 0===t&&(t={}),this.options=t,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};ya.prototype.getDefaultPosition=function(){return"bottom-right"},ya.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ya.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ya.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){var r=n.reduce((function(e,t,r){return t.value&&(e+=t.key+"="+t.value+(r<n.length-1?"&":"")),e}),"?");t.href=e.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener nofollow"}},ya.prototype._updateData=function(e){!e||"metadata"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())},ya.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((function(e){return"string"!=typeof e?"":e}))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style.sourceCaches;for(var r in n){var a=n[r];if(a.used){var i=a.getSource();i.attribution&&e.indexOf(i.attribution)<0&&e.push(i.attribution)}}e.sort((function(e,t){return e.length-t.length}));var o=(e=e.filter((function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}))).join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ya.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ga=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};ga.prototype.onAdd=function(e){this._map=e,this._container=n.create("div","mapboxgl-ctrl");var t=n.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ga.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ga.prototype.getDefaultPosition=function(){return"bottom-left"},ga.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},ga.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},ga.prototype._updateCompact=function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}};var _a=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};_a.prototype.add=function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},_a.prototype.remove=function(e){for(var t=this._currentlyRunning,n=0,r=t?this._queue.concat(t):this._queue;n<r.length;n+=1){var a=r[n];if(a.id===e)return void(a.cancelled=!0)}},_a.prototype.run=function(e){void 0===e&&(e=0);var t=this._currentlyRunning=this._queue;this._queue=[];for(var n=0,r=t;n<r.length;n+=1){var a=r[n];if(!a.cancelled&&(a.callback(e),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},_a.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ba={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},xa=e.window.HTMLImageElement,wa=e.window.HTMLElement,ka=e.window.ImageBitmap,Ca={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Sa=function(r){function a(t){var n=this;if(null!=(t=e.extend({},Ca,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var a=new wr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies);if(r.call(this,a,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new _a,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},ba,t.locale),this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken),"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.")}else{if(!(t.container instanceof wa))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return n._update(!1)})),this.on("moveend",(function(){return n._update(!1)})),this.on("zoom",(function(){return n._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ma(this,t),this._hash=t.hash&&new Cr("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new ya({customAttribution:t.customAttribution})),this.addControl(new ga,t.logoPosition),this.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),this.on("data",(function(t){n._update("style"===t.dataType),n.fire(new e.Event(t.dataType+"data",t))})),this.on("dataloading",(function(t){n.fire(new e.Event(t.dataType+"dataloading",t))}))}r&&(a.__proto__=r),(a.prototype=Object.create(r&&r.prototype)).constructor=a;var i={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return a.prototype._getMapId=function(){return this._mapId},a.prototype.addControl=function(t,n){if(void 0===n&&t.getDefaultPosition&&(n=t.getDefaultPosition()),void 0===n&&(n="top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var a=this._controlPositions[n];return-1!==n.indexOf("bottom")?a.insertBefore(r,a.firstChild):a.appendChild(r),this},a.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this},a.prototype.resize=function(t){var n=this._containerDimensions(),r=n[0],a=n[1];this._resizeCanvas(r,a),this.transform.resize(r,a),this.painter.resize(r,a);var i=!this._moving;return i&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),i&&this.fire(new e.Event("moveend",t)),this},a.prototype.getBounds=function(){return this.transform.getBounds()},a.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},a.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()},a.prototype.setMinZoom=function(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},a.prototype.getMinZoom=function(){return this.transform.minZoom},a.prototype.setMaxZoom=function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},a.prototype.getMaxZoom=function(){return this.transform.maxZoom},a.prototype.setMinPitch=function(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},a.prototype.getMinPitch=function(){return this.transform.minPitch},a.prototype.setMaxPitch=function(e){if((e=null==e?60:e)>60)throw new Error("maxPitch must be less than or equal to 60");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")},a.prototype.getMaxPitch=function(){return this.transform.maxPitch},a.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},a.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update()},a.prototype.project=function(t){return this.transform.locationPoint(e.LngLat.convert(t))},a.prototype.unproject=function(t){return this.transform.pointLocation(e.Point.convert(t))},a.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},a.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},a.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},a.prototype._createDelegatedListener=function(e,t,n){var r,a=this;if("mouseenter"===e||"mouseover"===e){var i=!1;return{layer:t,listener:n,delegates:{mousemove:function(r){var o=a.getLayer(t)?a.queryRenderedFeatures(r.point,{layers:[t]}):[];o.length?i||(i=!0,n.call(a,new Mr(e,a,r.originalEvent,{features:o}))):i=!1},mouseout:function(){i=!1}}}}if("mouseleave"===e||"mouseout"===e){var o=!1;return{layer:t,listener:n,delegates:{mousemove:function(r){(a.getLayer(t)?a.queryRenderedFeatures(r.point,{layers:[t]}):[]).length?o=!0:o&&(o=!1,n.call(a,new Mr(e,a,r.originalEvent)))},mouseout:function(t){o&&(o=!1,n.call(a,new Mr(e,a,t.originalEvent)))}}}}return{layer:t,listener:n,delegates:(r={},r[e]=function(e){var r=a.getLayer(t)?a.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,n.call(a,e),delete e.features)},r)}},a.prototype.on=function(e,t,n){if(void 0===n)return r.prototype.on.call(this,e,t);var a=this._createDelegatedListener(e,t,n);for(var i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(a),a.delegates)this.on(i,a.delegates[i]);return this},a.prototype.once=function(e,t,n){if(void 0===n)return r.prototype.once.call(this,e,t);var a=this._createDelegatedListener(e,t,n);for(var i in a.delegates)this.once(i,a.delegates[i]);return this},a.prototype.off=function(e,t,n){var a=this;return void 0===n?r.prototype.off.call(this,e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&function(r){for(var i=r[e],o=0;o<i.length;o++){var s=i[o];if(s.layer===t&&s.listener===n){for(var u in s.delegates)a.off(u,s.delegates[u]);return i.splice(o,1),a}}}(this._delegatedListeners),this)},a.prototype.queryRenderedFeatures=function(t,n){if(!this.style)return[];var r;if(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),n=n||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof t[0])r=[e.Point.convert(t)];else{var a=e.Point.convert(t[0]),i=e.Point.convert(t[1]);r=[a,new e.Point(i.x,a.y),i,new e.Point(a.x,i.y),a]}return this.style.queryRenderedFeatures(r,n,this.transform)},a.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},a.prototype.setStyle=function(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(t,n))},a.prototype._getUIString=function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '"+e+"'");return t},a.prototype._updateStyle=function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new Ut(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},a.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ut(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},a.prototype._diffStyle=function(t,n){var r=this;if("string"==typeof t){var a=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(a,e.ResourceType.Style);e.getJSON(i,(function(t,a){t?r.fire(new e.ErrorEvent(t)):a&&r._updateDiff(a,n)}))}else"object"==typeof t&&this._updateDiff(t,n)},a.prototype._updateDiff=function(t,n){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(t,n)}},a.prototype.getStyle=function(){if(this.style)return this.style.serialize()},a.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},a.prototype.addSource=function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)},a.prototype.isSourceLoaded=function(t){var n=this.style&&this.style.sourceCaches[t];if(void 0!==n)return n.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},a.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var a=n[r];if("loaded"!==a.state&&"errored"!==a.state)return!1}}return!0},a.prototype.addSourceType=function(e,t,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)},a.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0)},a.prototype.getSource=function(e){return this.style.getSource(e)},a.prototype.addImage=function(t,n,r){void 0===r&&(r={});var a=r.pixelRatio;void 0===a&&(a=1);var i=r.sdf;void 0===i&&(i=!1);var o=r.stretchX,s=r.stretchY,u=r.content;if(this._lazyInitEmptyStyle(),n instanceof xa||ka&&n instanceof ka){var l=e.browser.getImageData(n);this.style.addImage(t,{data:new e.RGBAImage({width:l.width,height:l.height},l.data),pixelRatio:a,stretchX:o,stretchY:s,content:u,sdf:i,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n;this.style.addImage(t,{data:new e.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:a,stretchX:o,stretchY:s,content:u,sdf:i,version:0,userImage:c}),c.onAdd&&c.onAdd(this,t)}},a.prototype.updateImage=function(t,n){var r=this.style.getImage(t);if(!r)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var a=n instanceof xa||ka&&n instanceof ka?e.browser.getImageData(n):n,i=a.width,o=a.height,s=a.data;return void 0===i||void 0===o?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):i!==r.data.width||o!==r.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(n instanceof xa||ka&&n instanceof ka)),void this.style.updateImage(t,r))},a.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},a.prototype.removeImage=function(e){this.style.removeImage(e)},a.prototype.loadImage=function(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),n)},a.prototype.listImages=function(){return this.style.listImages()},a.prototype.addLayer=function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)},a.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0)},a.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0)},a.prototype.getLayer=function(e){return this.style.getLayer(e)},a.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)},a.prototype.setFilter=function(e,t,n){return void 0===n&&(n={}),this.style.setFilter(e,t,n),this._update(!0)},a.prototype.getFilter=function(e){return this.style.getFilter(e)},a.prototype.setPaintProperty=function(e,t,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(e,t,n,r),this._update(!0)},a.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},a.prototype.setLayoutProperty=function(e,t,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(e,t,n,r),this._update(!0)},a.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},a.prototype.setLight=function(e,t){return void 0===t&&(t={}),this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)},a.prototype.getLight=function(){return this.style.getLight()},a.prototype.setFeatureState=function(e,t){return this.style.setFeatureState(e,t),this._update()},a.prototype.removeFeatureState=function(e,t){return this.style.removeFeatureState(e,t),this._update()},a.prototype.getFeatureState=function(e){return this.style.getFeatureState(e)},a.prototype.getContainer=function(){return this._container},a.prototype.getCanvasContainer=function(){return this._canvasContainer},a.prototype.getCanvas=function(){return this._canvas},a.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]},a.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},a.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=n.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var a=this._controlContainer=n.create("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){i[e]=n.create("div","mapboxgl-ctrl-"+e,a)}))},a.prototype._resizeCanvas=function(t,n){var r=e.browser.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*n,this._canvas.style.width=t+"px",this._canvas.style.height=n+"px"},a.prototype._setupPainter=function(){var n=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new gr(r,this.transform),e.webpSupported.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},a.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))},a.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))},a.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},a.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this},a.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},a.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},a.prototype._render=function(t){var n,r=this,a=0,i=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n),a=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed){var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,u=e.browser.now();this.style.zoomHistory.update(s,u);var l=new e.EvaluationParameters(s,{now:u,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),c=l.crossFadingFactor();1===c&&c===this._crossFadingFactor||(o=!0,this._crossFadingFactor=c),this.style.update(l)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=e.browser.now()-a;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((function(){var t=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),r.fire(new e.Event("gpu-timing-frame",{cpuTime:h,gpuTime:t}))}),50)}if(this.listens("gpu-timing-layer")){var f=this.painter.collectGpuTimers();setTimeout((function(){var t=r.painter.queryGpuTimers(f);r.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},a.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,n=this._controls;t<n.length;t+=1)n[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Ia(this._canvasContainer),Ia(this._controlContainer),Ia(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},a.prototype.triggerRepaint=function(){var t=this;this.style&&!this._frame&&(this._frame=e.browser.frame((function(e){t._frame=null,t._render(e)})))},a.prototype._onWindowOnline=function(){this._update()},a.prototype._onWindowResize=function(e){this._trackResize&&this.resize({originalEvent:e})._update()},i.showTileBoundaries.get=function(){return!!this._showTileBoundaries},i.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},i.showPadding.get=function(){return!!this._showPadding},i.showPadding.set=function(e){this._showPadding!==e&&(this._showPadding=e,this._update())},i.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},i.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},i.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},i.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},i.repaint.get=function(){return!!this._repaint},i.repaint.set=function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())},i.vertices.get=function(){return!!this._vertices},i.vertices.set=function(e){this._vertices=e,this._update()},a.prototype._setCacheLimits=function(t,n){e.setCacheLimits(t,n)},i.version.get=function(){return e.version},Object.defineProperties(a.prototype,i),a}(va);function Ia(e){e.parentNode&&e.parentNode.removeChild(e)}var Da={showCompass:!0,showZoom:!0,visualizePitch:!1},Aa=function(t){var r=this;this.options=e.extend({},Da,t),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){return r._map.zoomIn({},{originalEvent:e})})),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){return r._map.zoomOut({},{originalEvent:e})})),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){r.options.visualizePitch?r._map.resetNorthPitch({},{originalEvent:e}):r._map.resetNorth({},{originalEvent:e})})),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Aa.prototype._updateZoomButtons=function(){var e=this._map.getZoom();this._zoomInButton.disabled=e===this._map.getMaxZoom(),this._zoomOutButton.disabled=e===this._map.getMinZoom()},Aa.prototype._rotateCompassArrow=function(){var e=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=e},Aa.prototype.onAdd=function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ta(this._map,this._compass,this.options.visualizePitch)),this._container},Aa.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Aa.prototype._createButton=function(e,t){var r=n.create("button",e,this._container);return r.type="button",r.addEventListener("click",t),r},Aa.prototype._setButtonTitle=function(e,t){var n=this._map._getUIString("NavigationControl."+t);e.title=n,e.setAttribute("aria-label",n)};var Ta=function(t,r,a){void 0===a&&(a=!1),this._clickTolerance=10,this.element=r,this.mouseRotate=new Hr({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,a&&(this.mousePitch=new Gr({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(r,"mousedown",this.mousedown),n.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(r,"touchmove",this.touchmove),n.addEventListener(r,"touchend",this.touchend),n.addEventListener(r,"touchcancel",this.reset)};function Ea(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){var a=new e.LngLat(t.lng-360,t.lat),i=new e.LngLat(t.lng+360,t.lat),o=r.locationPoint(t).distSqr(n);r.locationPoint(a).distSqr(n)<o?t=a:r.locationPoint(i).distSqr(n)<o&&(t=i)}for(;Math.abs(t.lng-r.center.lng)>180;){var s=r.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}Ta.prototype.down=function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),n.disableDrag()},Ta.prototype.move=function(e,t){var n=this.map,r=this.mouseRotate.mousemoveWindow(e,t);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){var a=this.mousePitch.mousemoveWindow(e,t);a&&a.pitchDelta&&n.setPitch(n.getPitch()+a.pitchDelta)}},Ta.prototype.off=function(){var e=this.element;n.removeEventListener(e,"mousedown",this.mousedown),n.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(e,"touchmove",this.touchmove),n.removeEventListener(e,"touchend",this.touchend),n.removeEventListener(e,"touchcancel",this.reset),this.offTemp()},Ta.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(e.window,"mousemove",this.mousemove),n.removeEventListener(e.window,"mouseup",this.mouseup)},Ta.prototype.mousedown=function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),n.mousePos(this.element,t)),n.addEventListener(e.window,"mousemove",this.mousemove),n.addEventListener(e.window,"mouseup",this.mouseup)},Ta.prototype.mousemove=function(e){this.move(e,n.mousePos(this.element,e))},Ta.prototype.mouseup=function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()},Ta.prototype.touchstart=function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))},Ta.prototype.touchmove=function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))},Ta.prototype.touchend=function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ta.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ra={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Oa(e,t,n){var r=e.classList;for(var a in Ra)r.remove("mapboxgl-"+n+"-anchor-"+a);r.add("mapboxgl-"+n+"-anchor-"+t)}var Ma,Na=function(t){function r(r,a){var i=this;if(t.call(this),(r instanceof e.window.HTMLElement||a)&&(r=e.extend({element:r},a)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._draggable=r&&r.draggable||!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&"auto"!==r.pitchAlignment?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=e.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var o=n.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var u=n.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill-rule","nonzero");var l=n.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var c=0,h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<h.length;c+=1){var f=h[c],d=n.createNS("http://www.w3.org/2000/svg","ellipse");d.setAttributeNS(null,"opacity","0.04"),d.setAttributeNS(null,"cx","10.5"),d.setAttributeNS(null,"cy","5.80029008"),d.setAttributeNS(null,"rx",f.rx),d.setAttributeNS(null,"ry",f.ry),l.appendChild(d)}var p=n.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",this._color);var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(m);var v=n.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"fill","#000000");var y=n.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),v.appendChild(y);var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var _=n.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var x=n.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),_.appendChild(b),_.appendChild(x),u.appendChild(l),u.appendChild(p),u.appendChild(v),u.appendChild(g),u.appendChild(_),o.appendChild(u),this._element.appendChild(o),this._offset=e.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(e){e.preventDefault()})),this._element.addEventListener("mousedown",(function(e){e.preventDefault()})),this._element.addEventListener("focus",(function(){var e=i._map.getContainer();e.scrollTop=0,e.scrollLeft=0})),Oa(this._element,this._anchor,"marker"),this._popup=null}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=Math.sqrt(Math.pow(13.5,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},r.prototype._onKeyPress=function(e){var t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()},r.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},r.prototype._update=function(e){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ea(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(t="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX("+this._map.getPitch()+"deg)"),e&&"moveend"!==e.type||(this._pos=this._pos.round()),n.setTransform(this._element,Ra[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+r+" "+t)}},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(t){return this._offset=e.Point.convert(t),this._update(),this},r.prototype._onMove=function(t){this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r.prototype.setRotation=function(e){return this._rotation=e||0,this._update(),this},r.prototype.getRotation=function(){return this._rotation},r.prototype.setRotationAlignment=function(e){return this._rotationAlignment=e||"auto",this._update(),this},r.prototype.getRotationAlignment=function(){return this._rotationAlignment},r.prototype.setPitchAlignment=function(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this},r.prototype.getPitchAlignment=function(){return this._pitchAlignment},r}(e.Evented),Pa={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Fa=0,La=!1,za=function(t){function r(n){t.call(this),this.options=e.extend({},Pa,n),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.onAdd=function(t){var r;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Ma?r(Ma):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){r(Ma="denied"!==e.state)})):r(Ma=!!e.window.navigator.geolocation),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fa=0,La=!1},r.prototype._isOutOfMapMaxBounds=function(e){var t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())},r.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},r.prototype._onSuccess=function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}},r.prototype._updateCamera=function(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,a=this._map.getBearing(),i=e.extend({bearing:a},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),i,{geolocateSource:!0})},r.prototype._updateMarker=function(t){if(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},r.prototype._updateCircleRadius=function(){var e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),n=this._map.unproject([1,e]),r=t.distanceTo(n),a=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=a+"px",this._circleElement.style.height=a+"px"},r.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},r.prototype._onError=function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&La)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(t){var r=this;if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{var i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Na(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Na({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==r._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new e.Event("trackuserlocationend")))}))},r.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fa--,La=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Fa>1?(t={maximumAge:6e5,timeout:0},La=!0):(t=this.options.positionOptions,La=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(e.Evented),Ba={maxWidth:100,unit:"metric"},Wa=function(t){this.options=e.extend({},Ba,t),e.bindAll(["_onMove","setUnit"],this)};function qa(e,t,n){var r=n&&n.maxWidth||100,a=e._container.clientHeight/2,i=e.unproject([0,a]),o=e.unproject([r,a]),s=i.distanceTo(o);if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?Va(t,r,u/5280,e._getUIString("ScaleControl.Miles")):Va(t,r,u,e._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Va(t,r,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Va(t,r,s/1e3,e._getUIString("ScaleControl.Kilometers")):Va(t,r,s,e._getUIString("ScaleControl.Meters"))}function Va(e,t,n,r){var a,i,o,s=(a=n,(i=Math.pow(10,(""+Math.floor(a)).length-1))*(o=(o=a/i)>=10?10:o>=5?5:o>=3?3:o>=2?2:o>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(o)));e.style.width=t*(s/n)+"px",e.innerHTML=s+"&nbsp;"+r}Wa.prototype.getDefaultPosition=function(){return"bottom-left"},Wa.prototype._onMove=function(){qa(this._map,this._container,this.options)},Wa.prototype.onAdd=function(e){return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Wa.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Wa.prototype.setUnit=function(e){this.options.unit=e,qa(this._map,this._container,this.options)};var Ua=function(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ua.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ua.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ua.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Ua.prototype._setupUI=function(){var t=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ua.prototype._updateTitle=function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e},Ua.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ua.prototype._isFullscreen=function(){return this._fullscreen},Ua.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ua.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ja={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Ha=function(t){function r(n){t.call(this),this.options=e.extend(Object.create(ja),n),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.addTo=function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},r.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},r.prototype.getElement=function(){return this._container},r.prototype.setText=function(t){return this.setDOMContent(e.window.document.createTextNode(t))},r.prototype.setHTML=function(t){var n,r=e.window.document.createDocumentFragment(),a=e.window.document.createElement("body");for(a.innerHTML=t;n=a.firstChild;)r.appendChild(n);return this.setDOMContent(r)},r.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},r.prototype.setMaxWidth=function(e){return this.options.maxWidth=e,this._update(),this},r.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},r.prototype.addClassName=function(e){this._container&&this._container.classList.add(e)},r.prototype.removeClassName=function(e){this._container&&this._container.classList.remove(e)},r.prototype.toggleClassName=function(e){if(this._container)return this._container.classList.toggle(e)},r.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},r.prototype._onMouseUp=function(e){this._update(e.point)},r.prototype._onMouseMove=function(e){this._update(e.point)},r.prototype._onDrag=function(e){this._update(e.point)},r.prototype._update=function(t){var r=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(e){return r._container.classList.add(e)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ea(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var a=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),i=this.options.anchor,o=function t(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new e.Point(0,0),top:new e.Point(0,n),"top-left":new e.Point(r,r),"top-right":new e.Point(-r,r),bottom:new e.Point(0,-n),"bottom-left":new e.Point(r,-r),"bottom-right":new e.Point(-r,-r),left:new e.Point(n,0),right:new e.Point(-n,0)}}if(n instanceof e.Point||Array.isArray(n)){var a=e.Point.convert(n);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:e.Point.convert(n.center||[0,0]),top:e.Point.convert(n.top||[0,0]),"top-left":e.Point.convert(n["top-left"]||[0,0]),"top-right":e.Point.convert(n["top-right"]||[0,0]),bottom:e.Point.convert(n.bottom||[0,0]),"bottom-left":e.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(n["bottom-right"]||[0,0]),left:e.Point.convert(n.left||[0,0]),right:e.Point.convert(n.right||[0,0])}}return t(new e.Point(0,0))}(this.options.offset);if(!i){var s,u=this._container.offsetWidth,l=this._container.offsetHeight;s=a.y+o.bottom.y<l?["top"]:a.y>this._map.transform.height-l?["bottom"]:[],a.x<u/2?s.push("left"):a.x>this._map.transform.width-u/2&&s.push("right"),i=0===s.length?"bottom":s.join("-")}var c=a.add(o[i]).round();n.setTransform(this._container,Ra[i]+" translate("+c.x+"px,"+c.y+"px)"),Oa(this._container,i,"popup")}},r.prototype._onClose=function(){this.remove()},r}(e.Evented),Ga={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Sa,NavigationControl:Aa,GeolocateControl:za,AttributionControl:ya,ScaleControl:Wa,FullscreenControl:Ua,Popup:Ha,Marker:Na,Style:Ut,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){ze().acquire(Ne)},clearPrewarmedResources:function(){var e=Fe;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Ne),Fe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Pe.workerCount},set workerCount(e){Pe.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:""};return Ga})),n}()},5:function(e,t){},B9Yq:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},EhIR:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},YSVl:function(e,t,n){var r=n("EhIR"),a=n("uDiL"),i=n("pJ6O"),o=n("yuCN"),s=n("euyF"),u=n("ie1u"),l=n("pJ3+");l.alea=r,l.xor128=a,l.xorwow=i,l.xorshift7=o,l.xor4096=s,l.tychei=u,e.exports=l},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},euyF:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n=a[i]=(n^=n>>>15)^(e^=e>>>12),t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=0==(n=s[127&i]^=r+(o=o+1640531527|0))?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,s[a]=(r^=r>>>15)^(n^=n>>>12);e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},ie1u:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},"pJ3+":function(e,t,n){var r;!function(a,i){var o,s=this,u=i.pow(256,6),l=i.pow(2,52),c=2*l;function h(e,t,n){var r=[],h=p(function e(t,n){var r,a=[],i=typeof t;if(n&&"object"==i)for(r in t)try{a.push(e(t[r],n-1))}catch(o){}return a.length?a:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,m(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(256):(e=new Uint8Array(256),(s.crypto||s.msCrypto).getRandomValues(e)),m(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,m(a)]}}():e,3),r),v=new f(r),y=function(){for(var e=v.g(6),t=u,n=0;e<l;)e=256*(e+n),t*=256,n=v.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|v.g(4)},y.quick=function(){return v.g(4)/4294967296},y.double=y,p(m(v.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&d(r,v),e.state=function(){return d(v,{})}),n?(i.random=e,t):e})(y,h,"global"in t?t.global:this==i,t.state)}function f(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<256;)o[a]=a++;for(a=0;a<256;a++)o[a]=o[i=255&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=255&a+1],n=256*n+o[255&(o[a]=o[i=255&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(256)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){for(var n,r=e+"",a=0;a<r.length;)t[255&a]=255&(n^=19*t[255&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=h,p(i.random(),a),e.exports){e.exports=h;try{o=n(3)}catch(v){}}else void 0===(r=(function(){return h}).call(t,n,t,e))||(e.exports=r)}([],Math)},pJ6O:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},uDiL:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},xexB:function(e,t,n){var r;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(n,a){"use strict";var i=[],o=Object.getPrototypeOf,s=i.slice,u=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},l=i.push,c=i.indexOf,h={},f=h.toString,d=h.hasOwnProperty,p=d.toString,m=p.call(Object),v={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},g=function(e){return null!=e&&e===e.window},_=n.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function x(e,t,n){var r,a,i=(n=n||_).createElement("script");if(i.text=e,t)for(r in b)(a=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,a);n.head.appendChild(i).parentNode.removeChild(i)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[f.call(e)]||"object":typeof e}var k="3.5.1",C=function e(t,n){return new e.fn.init(t,n)};function S(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!y(e)&&!g(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}C.fn=C.prototype={jquery:k,constructor:C,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(e){return this.pushStack(C.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(C.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:i.sort,splice:i.splice},C.extend=C.fn.extend=function(){var e,t,n,r,a,i,o=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[s]||{},s++),"object"==typeof o||y(o)||(o={}),s===u&&(o=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(l&&r&&(C.isPlainObject(r)||(a=Array.isArray(r)))?(n=o[t],i=a&&!Array.isArray(n)?[]:a||C.isPlainObject(n)?n:{},a=!1,o[t]=C.extend(l,i,r)):void 0!==r&&(o[t]=r));return o},C.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e)||(t=o(e))&&("function"!=typeof(n=d.call(t,"constructor")&&t.constructor)||p.call(n)!==m))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){x(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(S(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(S(Object(e))?C.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,i=e.length,o=!n;a<i;a++)!t(e[a],a)!==o&&r.push(e[a]);return r},map:function(e,t,n){var r,a,i=0,o=[];if(S(e))for(r=e.length;i<r;i++)null!=(a=t(e[i],i,n))&&o.push(a);else for(i in e)null!=(a=t(e[i],i,n))&&o.push(a);return u(o)},guid:1,support:v}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=i[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var I=function(e){var t,n,r,a,i,o,s,u,l,c,h,f,d,p,m,v,y,g,_,b="sizzle"+1*new Date,x=e.document,w=0,k=0,C=ue(),S=ue(),I=ue(),D=ue(),A=function(e,t){return e===t&&(h=!0),0},T={}.hasOwnProperty,E=[],R=E.pop,O=E.push,M=E.push,N=E.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",z="(?:\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+L+"*("+z+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+L+"*\\]",W=":("+z+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",q=new RegExp(L+"+","g"),V=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),U=new RegExp("^"+L+"*,"+L+"*"),j=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),H=new RegExp(L+"|>"),G=new RegExp(W),J=new RegExp("^"+z+"$"),X={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),TAG:new RegExp("^("+z+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){f()},oe=be((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{M.apply(E=N.call(x.childNodes),x.childNodes)}catch(t){M={apply:E.length?function(e,t){O.apply(e,N.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,a){var i,s,l,c,h,p,y,g=t&&t.ownerDocument,x=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return r;if(!a&&(f(t),t=t||d,m)){if(11!==x&&(h=$.exec(e)))if(i=h[1]){if(9===x){if(!(l=t.getElementById(i)))return r;if(l.id===i)return r.push(l),r}else if(g&&(l=g.getElementById(i))&&_(t,l)&&l.id===i)return r.push(l),r}else{if(h[2])return M.apply(r,t.getElementsByTagName(e)),r;if((i=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return M.apply(r,t.getElementsByClassName(i)),r}if(n.qsa&&!D[e+" "]&&(!v||!v.test(e))&&(1!==x||"object"!==t.nodeName.toLowerCase())){if(y=e,g=t,1===x&&(H.test(e)||j.test(e))){for((g=ee.test(e)&&ye(t.parentNode)||t)===t&&n.scope||((c=t.getAttribute("id"))?c=c.replace(re,ae):t.setAttribute("id",c=b)),s=(p=o(e)).length;s--;)p[s]=(c?"#"+c:":scope")+" "+_e(p[s]);y=p.join(",")}try{return M.apply(r,g.querySelectorAll(y)),r}catch(t){D(e,!0)}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace(V,"$1"),t,r,a)}function ue(){var e=[];return function t(n,a){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=a}}function le(e){return e[b]=!0,e}function ce(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var n=e.split("|"),a=n.length;a--;)r.attrHandle[n[a]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return le((function(t){return t=+t,le((function(n,r){for(var a,i=e([],n.length,t),o=i.length;o--;)n[a=i[o]]&&(n[a]=!(r[a]=n[a]))}))}))}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},i=se.isXML=function(e){var t=(e.ownerDocument||e).documentElement;return!K.test(e.namespaceURI||t&&t.nodeName||"HTML")},f=se.setDocument=function(e){var t,a,o=e?e.ownerDocument||e:x;return o!=d&&9===o.nodeType&&o.documentElement&&(p=(d=o).documentElement,m=!i(d),x!=d&&(a=d.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",ie,!1):a.attachEvent&&a.attachEvent("onunload",ie)),n.scope=ce((function(e){return p.appendChild(e).appendChild(d.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ce((function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ce((function(e){return p.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,r,a,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(a=t.getElementsByName(e),r=0;i=a[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[a++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},y=[],v=[],(n.qsa=Q.test(d.querySelectorAll))&&(ce((function(e){var t;p.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+L+"*(?:value|"+F+")"),e.querySelectorAll("[id~="+b+"-]").length||v.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+L+"*name"+L+"*="+L+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=Q.test(g=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ce((function(e){n.disconnectedMatch=g.call(e,"*"),g.call(e,"[s!='']:x"),y.push("!=",W)})),v=v.length&&new RegExp(v.join("|")),y=y.length&&new RegExp(y.join("|")),t=Q.test(p.compareDocumentPosition),_=t||Q.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return h=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==d||e.ownerDocument==x&&_(x,e)?-1:t==d||t.ownerDocument==x&&_(x,t)?1:c?P(c,e)-P(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,r=0,a=e.parentNode,i=t.parentNode,o=[e],s=[t];if(!a||!i)return e==d?-1:t==d?1:a?-1:i?1:c?P(c,e)-P(c,t):0;if(a===i)return fe(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?fe(o[r],s[r]):o[r]==x?-1:s[r]==x?1:0}),d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(f(e),n.matchesSelector&&m&&!D[t+" "]&&(!y||!y.test(t))&&(!v||!v.test(t)))try{var r=g.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){D(t,!0)}return 0<se(t,d,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=d&&f(e),_(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=d&&f(e);var a=r.attrHandle[t.toLowerCase()],i=a&&T.call(r.attrHandle,t.toLowerCase())?a(e,t,!m):void 0;return void 0!==i?i:n.attributes||!m?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},se.escape=function(e){return(e+"").replace(re,ae)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],a=0,i=0;if(h=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(A),h){for(;t=e[i++];)t===e[i]&&(a=r.push(i));for(;a--;)e.splice(r[a],1)}return c=null,e},a=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=a(t);return n},(r=se.selectors={cacheLength:50,createPseudo:le,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&C(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var a=se.attr(r,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&-1<a.indexOf(n):"$="===t?n&&a.slice(-n.length)===n:"~="===t?-1<(" "+a.replace(q," ")+" ").indexOf(n):"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,a){var i="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,u){var l,c,h,f,d,p,m=i!==o?"nextSibling":"previousSibling",v=t.parentNode,y=s&&t.nodeName.toLowerCase(),g=!u&&!s,_=!1;if(v){if(i){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===y:1===f.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?v.firstChild:v.lastChild],o&&g){for(_=(d=(l=(c=(h=(f=v)[b]||(f[b]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===w&&l[1])&&l[2],f=d&&v.childNodes[d];f=++d&&f&&f[m]||(_=d=0)||p.pop();)if(1===f.nodeType&&++_&&f===t){c[e]=[w,d,_];break}}else if(g&&(_=d=(l=(c=(h=(f=t)[b]||(f[b]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===w&&l[1]),!1===_)for(;(f=++d&&f&&f[m]||(_=d=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==y:1!==f.nodeType)||!++_||(g&&((c=(h=f[b]||(f[b]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]=[w,_]),f!==t)););return(_-=a)===r||_%r==0&&0<=_/r}}},PSEUDO:function(e,t){var n,a=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[b]?a(t):1<a.length?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?le((function(e,n){for(var r,i=a(e,t),o=i.length;o--;)e[r=P(e,i[o])]=!(n[r]=i[o])})):function(e){return a(e,0,n)}):a}},pseudos:{not:le((function(e){var t=[],n=[],r=s(e.replace(V,"$1"));return r[b]?le((function(e,t,n,a){for(var i,o=r(e,null,a,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))})):function(e,a,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}})),has:le((function(e){return function(t){return 0<se(e,t).length}})),contains:le((function(e){return e=e.replace(te,ne),function(t){return-1<(t.textContent||a(t)).indexOf(e)}})),lang:le((function(e){return J.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve((function(){return[0]})),last:ve((function(e,t){return[t-1]})),eq:ve((function(e,t,n){return[n<0?n+t:n]})),even:ve((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ve((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ve((function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e})),gt:ve((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ge(){}function _e(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(e,t,n){var r=t.dir,a=t.next,i=a||r,o=n&&"parentNode"===i,s=k++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,a);return!1}:function(t,n,u){var l,c,h,f=[w,s];if(u){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(c=(h=t[b]||(t[b]={}))[t.uniqueID]||(h[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[i])&&l[0]===w&&l[1]===s)return f[2]=l[2];if((c[i]=f)[2]=e(t,n,u))return!0}return!1}}function xe(e){return 1<e.length?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function we(e,t,n,r,a){for(var i,o=[],s=0,u=e.length,l=null!=t;s<u;s++)(i=e[s])&&(n&&!n(i,r,a)||(o.push(i),l&&t.push(s)));return o}function ke(e,t,n,r,a,i){return r&&!r[b]&&(r=ke(r)),a&&!a[b]&&(a=ke(a,i)),le((function(i,o,s,u){var l,c,h,f=[],d=[],p=o.length,m=i||function(e,t,n){for(var r=0,a=t.length;r<a;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!i&&t?m:we(m,f,e,s,u),y=n?a||(i?e:p||r)?[]:o:v;if(n&&n(v,y,s,u),r)for(l=we(y,d),r(l,[],s,u),c=l.length;c--;)(h=l[c])&&(y[d[c]]=!(v[d[c]]=h));if(i){if(a||e){if(a){for(l=[],c=y.length;c--;)(h=y[c])&&l.push(v[c]=h);a(null,y=[],l,u)}for(c=y.length;c--;)(h=y[c])&&-1<(l=a?P(i,h):f[c])&&(i[l]=!(o[l]=h))}}else y=we(y===o?y.splice(p,y.length):y),a?a(null,o,y,u):M.apply(o,y)}))}function Ce(e){for(var t,n,a,i=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],u=o?1:0,c=be((function(e){return e===t}),s,!0),h=be((function(e){return-1<P(t,e)}),s,!0),f=[function(e,n,r){var a=!o&&(r||n!==l)||((t=n).nodeType?c(e,n,r):h(e,n,r));return t=null,a}];u<i;u++)if(n=r.relative[e[u].type])f=[be(xe(f),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(a=++u;a<i&&!r.relative[e[a].type];a++);return ke(1<u&&xe(f),1<u&&_e(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(V,"$1"),n,u<a&&Ce(e.slice(u,a)),a<i&&Ce(e=e.slice(a)),a<i&&_e(e))}f.push(n)}return xe(f)}return ge.prototype=r.filters=r.pseudos,r.setFilters=new ge,o=se.tokenize=function(e,t){var n,a,i,o,s,u,l,c=S[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=r.preFilter;s;){for(o in n&&!(a=U.exec(s))||(a&&(s=s.slice(a[0].length)||s),u.push(i=[])),n=!1,(a=j.exec(s))&&(n=a.shift(),i.push({value:n,type:a[0].replace(V," ")}),s=s.slice(n.length)),r.filter)!(a=X[o].exec(s))||l[o]&&!(a=l[o](a))||(n=a.shift(),i.push({value:n,type:o,matches:a}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):S(e,u).slice(0)},s=se.compile=function(e,t){var n,a,i,s,u,c,h=[],p=[],v=I[e+" "];if(!v){for(t||(t=o(e)),n=t.length;n--;)(v=Ce(t[n]))[b]?h.push(v):p.push(v);(v=I(e,(a=p,s=0<(i=h).length,u=0<a.length,c=function(e,t,n,o,c){var h,p,v,y=0,g="0",_=e&&[],b=[],x=l,k=e||u&&r.find.TAG("*",c),C=w+=null==x?1:Math.random()||.1,S=k.length;for(c&&(l=t==d||t||c);g!==S&&null!=(h=k[g]);g++){if(u&&h){for(p=0,t||h.ownerDocument==d||(f(h),n=!m);v=a[p++];)if(v(h,t||d,n)){o.push(h);break}c&&(w=C)}s&&((h=!v&&h)&&y--,e&&_.push(h))}if(y+=g,s&&g!==y){for(p=0;v=i[p++];)v(_,b,t,n);if(e){if(0<y)for(;g--;)_[g]||b[g]||(b[g]=R.call(o));b=we(b)}M.apply(o,b),c&&!e&&0<b.length&&1<y+i.length&&se.uniqueSort(o)}return c&&(w=C,l=x),_},s?le(c):c))).selector=e}return v},u=se.select=function(e,t,n,a){var i,u,l,c,h,f="function"==typeof e&&e,d=!a&&o(e=f.selector||e);if(n=n||[],1===d.length){if(2<(u=d[0]=d[0].slice(0)).length&&"ID"===(l=u[0]).type&&9===t.nodeType&&m&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(i=X.needsContext.test(e)?0:u.length;i--&&!r.relative[c=(l=u[i]).type];)if((h=r.find[c])&&(a=h(l.matches[0].replace(te,ne),ee.test(u[0].type)&&ye(t.parentNode)||t))){if(u.splice(i,1),!(e=a.length&&_e(u)))return M.apply(n,a),n;break}}return(f||s(e,d))(a,t,!m,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},n.sortStable=b.split("").sort(A).join("")===b,n.detectDuplicates=!!h,f(),n.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||he(F,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(n);C.find=I,(C.expr=I.selectors)[":"]=C.expr.pseudos,C.uniqueSort=C.unique=I.uniqueSort,C.text=I.getText,C.isXMLDoc=I.isXML,C.contains=I.contains,C.escapeSelector=I.escape;var D=function(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&C(e).is(n))break;r.push(e)}return r},A=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},T=C.expr.match.needsContext;function E(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(e,t,n){return y(t)?C.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?C.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?C.grep(e,(function(e){return-1<c.call(t,e)!==n})):C.filter(t,e,n)}C.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?C.find.matchesSelector(r,e)?[r]:[]:C.find.matches(e,C.grep(t,(function(e){return 1===e.nodeType})))},C.fn.extend({find:function(e){var t,n,r=this.length,a=this;if("string"!=typeof e)return this.pushStack(C(e).filter((function(){for(t=0;t<r;t++)if(C.contains(a[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)C.find(e,a[t],n);return 1<r?C.uniqueSort(n):n},filter:function(e){return this.pushStack(O(this,e||[],!1))},not:function(e){return this.pushStack(O(this,e||[],!0))},is:function(e){return!!O(this,"string"==typeof e&&T.test(e)?C(e):e||[],!1).length}});var M,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,n){var r,a;if(!e)return this;if(n=n||M,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:N.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(C.merge(this,C.parseHTML(r[1],(t=t instanceof C?t[0]:t)&&t.nodeType?t.ownerDocument||t:_,!0)),R.test(r[1])&&C.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(a=_.getElementById(r[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(C):C.makeArray(e,this)}).prototype=C.fn,M=C(_);var P=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(C.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,a=this.length,i=[],o="string"!=typeof e&&C(e);if(!T.test(e))for(;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&C.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(1<i.length?C.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?c.call(C(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return D(e,"parentNode")},parentsUntil:function(e,t,n){return D(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return D(e,"nextSibling")},prevAll:function(e){return D(e,"previousSibling")},nextUntil:function(e,t,n){return D(e,"nextSibling",n)},prevUntil:function(e,t,n){return D(e,"previousSibling",n)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(E(e,"template")&&(e=e.content||e),C.merge([],e.childNodes))}},(function(e,t){C.fn[e]=function(n,r){var a=C.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(a=C.filter(r,a)),1<this.length&&(F[e]||C.uniqueSort(a),P.test(e)&&a.reverse()),this.pushStack(a)}}));var z=/[^\x20\t\r\n\f]+/g;function B(e){return e}function W(e){throw e}function q(e,t,n,r){var a;try{e&&y(a=e.promise)?a.call(e).done(t).fail(n):e&&y(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}C.Callbacks=function(e){var t;e="string"==typeof e?(t={},C.each(e.match(z)||[],(function(e,n){t[n]=!0})),t):C.extend({},e);var n,r,a,i,o=[],s=[],u=-1,l=function(){for(i=i||e.once,a=n=!0;s.length;u=-1)for(r=s.shift();++u<o.length;)!1===o[u].apply(r[0],r[1])&&e.stopOnFalse&&(u=o.length,r=!1);e.memory||(r=!1),n=!1,i&&(o=r?[]:"")},c={add:function(){return o&&(r&&!n&&(u=o.length-1,s.push(r)),function t(n){C.each(n,(function(n,r){y(r)?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==w(r)&&t(r)}))}(arguments),r&&!n&&l()),this},remove:function(){return C.each(arguments,(function(e,t){for(var n;-1<(n=C.inArray(t,o,n));)o.splice(n,1),n<=u&&u--})),this},has:function(e){return e?-1<C.inArray(e,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=r="",this},disabled:function(){return!o},lock:function(){return i=s=[],r||n||(o=r=""),this},locked:function(){return!!i},fireWith:function(e,t){return i||(t=[e,(t=t||[]).slice?t.slice():t],s.push(t),n||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!a}};return c},C.extend({Deferred:function(e){var t=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return C.Deferred((function(n){C.each(t,(function(t,r){var a=y(e[r[4]])&&e[r[4]];i[r[1]]((function(){var e=a&&a.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,a?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,a){var i=0;function o(e,t,r,a){return function(){var s=this,u=arguments,l=function(){var n,l;if(!(e<i)){if((n=r.apply(s,u))===t.promise())throw new TypeError("Thenable self-resolution");y(l=n&&("object"==typeof n||"function"==typeof n)&&n.then)?a?l.call(n,o(i,t,B,a),o(i,t,W,a)):(i++,l.call(n,o(i,t,B,a),o(i,t,W,a),o(i,t,B,t.notifyWith))):(r!==B&&(s=void 0,u=[n]),(a||t.resolveWith)(s,u))}},c=a?l:function(){try{l()}catch(l){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(l,c.stackTrace),i<=e+1&&(r!==W&&(s=void 0,u=[l]),t.rejectWith(s,u))}};e?c():(C.Deferred.getStackHook&&(c.stackTrace=C.Deferred.getStackHook()),n.setTimeout(c))}}return C.Deferred((function(n){t[0][3].add(o(0,n,y(a)?a:B,n.notifyWith)),t[1][3].add(o(0,n,y(e)?e:B)),t[2][3].add(o(0,n,y(r)?r:W))})).promise()},promise:function(e){return null!=e?C.extend(e,a):a}},i={};return C.each(t,(function(e,n){var o=n[2],s=n[5];a[n[1]]=o.add,s&&o.add((function(){r=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(n[3].fire),i[n[0]]=function(){return i[n[0]+"With"](this===i?void 0:this,arguments),this},i[n[0]+"With"]=o.fireWith})),a.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),a=s.call(arguments),i=C.Deferred(),o=function(e){return function(n){r[e]=this,a[e]=1<arguments.length?s.call(arguments):n,--t||i.resolveWith(r,a)}};if(t<=1&&(q(e,i.done(o(n)).resolve,i.reject,!t),"pending"===i.state()||y(a[n]&&a[n].then)))return i.then();for(;n--;)q(a[n],o(n),i.reject);return i.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&V.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){n.setTimeout((function(){throw e}))};var U=C.Deferred();function j(){_.removeEventListener("DOMContentLoaded",j),n.removeEventListener("load",j),C.ready()}C.fn.ready=function(e){return U.then(e).catch((function(e){C.readyException(e)})),this},C.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0)!==e&&0<--C.readyWait||U.resolveWith(_,[C])}}),C.ready.then=U.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?n.setTimeout(C.ready):(_.addEventListener("DOMContentLoaded",j),n.addEventListener("load",j));var H=function e(t,n,r,a,i,o,s){var u=0,l=t.length,c=null==r;if("object"===w(r))for(u in i=!0,r)e(t,n,u,r[u],!0,o,s);else if(void 0!==a&&(i=!0,y(a)||(s=!0),c&&(s?(n.call(t,a),n=null):(c=n,n=function(e,t,n){return c.call(C(e),n)})),n))for(;u<l;u++)n(t[u],r,s?a:a.call(t[u],u,n(t[u],r)));return i?t:c?n.call(t):l?n(t[0],r):o},G=/^-ms-/,J=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function K(e){return e.replace(G,"ms-").replace(J,X)}var Z=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=C.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Z(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"==typeof t)a[K(t)]=n;else for(r in t)a[K(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][K(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(K):(t=K(t))in r?[t]:t.match(z)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||C.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var Q=new Y,$=new Y,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r,a;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(a=n)||"false"!==a&&("null"===a?null:a===+a+""?+a:ee.test(a)?JSON.parse(a):a)}catch(e){}$.set(e,t,n)}else n=void 0;return n}C.extend({hasData:function(e){return $.hasData(e)||Q.hasData(e)},data:function(e,t,n){return $.access(e,t,n)},removeData:function(e,t){$.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),C.fn.extend({data:function(e,t){var n,r,a,i=this[0],o=i&&i.attributes;if(void 0===e){if(this.length&&(a=$.get(i),1===i.nodeType&&!Q.get(i,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=K(r.slice(5)),ne(i,r,a[r]));Q.set(i,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each((function(){$.set(this,e)})):H(this,(function(t){var n;if(i&&void 0===t)return void 0!==(n=$.get(i,e))||void 0!==(n=ne(i,e))?n:void 0;this.each((function(){$.set(this,e,t)}))}),null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each((function(){$.remove(this,e)}))}}),C.extend({queue:function(e,t,n){var r;if(e)return r=Q.get(e,t=(t||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=Q.access(e,t,C.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=C.queue(e,t=t||"fx"),r=n.length,a=n.shift(),i=C._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,(function(){C.dequeue(e,t)}),i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:C.Callbacks("once memory").add((function(){Q.remove(e,[t+"queue",n])}))})}}),C.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?C.queue(this[0],e):void 0===t?this:this.each((function(){var n=C.queue(this,e,t);C._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&C.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){C.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=C.Deferred(),i=this,o=this.length,s=function(){--r||a.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=Q.get(i[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),a.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],oe=_.documentElement,se=function(e){return C.contains(e.ownerDocument,e)},ue={composed:!0};oe.getRootNode&&(se=function(e){return C.contains(e.ownerDocument,e)||e.getRootNode(ue)===e.ownerDocument});var le=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===C.css(e,"display")};function ce(e,t,n,r){var a,i,o=20,s=r?function(){return r.cur()}:function(){return C.css(e,t,"")},u=s(),l=n&&n[3]||(C.cssNumber[t]?"":"px"),c=e.nodeType&&(C.cssNumber[t]||"px"!==l&&+u)&&ae.exec(C.css(e,t));if(c&&c[3]!==l){for(l=l||c[3],c=+(u/=2)||1;o--;)C.style(e,t,c+l),(1-i)*(1-(i=s()/u||.5))<=0&&(o=0),c/=i;C.style(e,t,(c*=2)+l),n=n||[]}return n&&(c=+c||+u||0,a=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=a)),a}var he={};function fe(e,t){for(var n,r,a,i,o,s,u,l=[],c=0,h=e.length;c<h;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Q.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&le(r)&&(l[c]=(u=o=i=void 0,o=(a=r).ownerDocument,(u=he[s=a.nodeName])||(i=o.body.appendChild(o.createElement(s)),u=C.css(i,"display"),i.parentNode.removeChild(i),"none"===u&&(u="block"),he[s]=u)))):"none"!==n&&(l[c]="none",Q.set(r,"display",n)));for(c=0;c<h;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}C.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){le(this)?C(this).show():C(this).hide()}))}});var de,pe,me=/^(?:checkbox|radio)$/i,ve=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ye=/^$|^module$|\/(?:java|ecma)script/i;de=_.createDocumentFragment().appendChild(_.createElement("div")),(pe=_.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),de.appendChild(pe),v.checkClone=de.cloneNode(!0).cloneNode(!0).lastChild.checked,de.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!de.cloneNode(!0).lastChild.defaultValue,de.innerHTML="<option></option>",v.option=!!de.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _e(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&E(e,t)?C.merge([e],n):n}function be(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,v.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function we(e,t,n,r,a){for(var i,o,s,u,l,c,h=t.createDocumentFragment(),f=[],d=0,p=e.length;d<p;d++)if((i=e[d])||0===i)if("object"===w(i))C.merge(f,i.nodeType?[i]:i);else if(xe.test(i)){for(o=o||h.appendChild(t.createElement("div")),s=(ve.exec(i)||["",""])[1].toLowerCase(),o.innerHTML=(u=ge[s]||ge._default)[1]+C.htmlPrefilter(i)+u[2],c=u[0];c--;)o=o.lastChild;C.merge(f,o.childNodes),(o=h.firstChild).textContent=""}else f.push(t.createTextNode(i));for(h.textContent="",d=0;i=f[d++];)if(r&&-1<C.inArray(i,r))a&&a.push(i);else if(l=se(i),o=_e(h.appendChild(i),"script"),l&&be(o),n)for(c=0;i=o[c++];)ye.test(i.type||"")&&n.push(i);return h}var ke=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function Ie(){return!0}function De(){return!1}function Ae(e,t){return e===function(){try{return _.activeElement}catch(e){}}()==("focus"===t)}function Te(e,t,n,r,a,i){var o,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Te(e,s,n,r,t[s],i);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"==typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=De;else if(!a)return e;return 1===i&&(o=a,(a=function(e){return C().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=C.guid++)),e.each((function(){C.event.add(this,t,a,r,n)}))}function Ee(e,t,n){n?(Q.set(e,t,!1),C.event.add(e,t,{namespace:!1,handler:function(e){var r,a,i=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(i.length)(C.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=s.call(arguments),Q.set(this,t,i),r=n(this,t),this[t](),i!==(a=Q.get(this,t))||r?Q.set(this,t,!1):a={},i!==a)return e.stopImmediatePropagation(),e.preventDefault(),a.value}else i.length&&(Q.set(this,t,{value:C.event.trigger(C.extend(i[0],C.Event.prototype),i.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&C.event.add(e,t,Ie)}C.event={global:{},add:function(e,t,n,r,a){var i,o,s,u,l,c,h,f,d,p,m,v=Q.get(e);if(Z(e))for(n.handler&&(n=(i=n).handler,a=i.selector),a&&C.find.matchesSelector(oe,a),n.guid||(n.guid=C.guid++),(u=v.events)||(u=v.events=Object.create(null)),(o=v.handle)||(o=v.handle=function(t){return void 0!==C&&C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(z)||[""]).length;l--;)d=m=(s=Se.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),d&&(h=C.event.special[d]||{},h=C.event.special[d=(a?h.delegateType:h.bindType)||d]||{},c=C.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&C.expr.match.needsContext.test(a),namespace:p.join(".")},i),(f=u[d])||((f=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,p,o)||e.addEventListener&&e.addEventListener(d,o)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),a?f.splice(f.delegateCount++,0,c):f.push(c),C.event.global[d]=!0)},remove:function(e,t,n,r,a){var i,o,s,u,l,c,h,f,d,p,m,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){for(l=(t=(t||"").match(z)||[""]).length;l--;)if(d=m=(s=Se.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),d){for(h=C.event.special[d]||{},f=u[d=(r?h.delegateType:h.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=f.length;i--;)c=f[i],!a&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(i,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(e,c));o&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,p,v.handle)||C.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)C.event.remove(e,d+t[l],n,r,!0);C.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,a,i,o,s=new Array(arguments.length),u=C.event.fix(e),l=(Q.get(this,"events")||Object.create(null))[u.type]||[],c=C.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(o=C.event.handlers.call(this,u,l),t=0;(a=o[t++])&&!u.isPropagationStopped();)for(u.currentTarget=a.elem,n=0;(i=a.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==i.namespace&&!u.rnamespace.test(i.namespace)||(u.handleObj=i,u.data=i.data,void 0!==(r=((C.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,a,i,o,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(i=[],o={},n=0;n<u;n++)void 0===o[a=(r=t[n]).selector+" "]&&(o[a]=r.needsContext?-1<C(a,this).index(l):C.find(a,this,null,[l]).length),o[a]&&i.push(r);i.length&&s.push({elem:l,handlers:i})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(C.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return me.test(t.type)&&t.click&&E(t,"input")&&Ee(t,"click",Ie),!1},trigger:function(e){var t=this||e;return me.test(t.type)&&t.click&&E(t,"input")&&Ee(t,"click"),!0},_default:function(e){var t=e.target;return me.test(t.type)&&t.click&&E(t,"input")&&Q.get(t,"click")||E(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},(C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ie:De,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[C.expando]=!0}).prototype={constructor:C.Event,isDefaultPrevented:De,isPropagationStopped:De,isImmediatePropagationStopped:De,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ie,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ie,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ie,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ke.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},(function(e,t){C.event.special[e]={setup:function(){return Ee(this,e,Ae),!1},trigger:function(){return Ee(this,e),!0},delegateType:t}})),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){C.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,a=e.handleObj;return r&&(r===this||C.contains(this,r))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),C.fn.extend({on:function(e,t,n,r){return Te(this,e,t,n,r)},one:function(e,t,n,r){return Te(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,C(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=De),this.each((function(){C.event.remove(this,e,n,t)}))}});var Re=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return E(e,"table")&&E(11!==t.nodeType?t:t.firstChild,"tr")&&C(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Fe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,a,i,o,s;if(1===t.nodeType){if(Q.hasData(e)&&(s=Q.get(e).events))for(a in Q.remove(t,"handle events"),s)for(n=0,r=s[a].length;n<r;n++)C.event.add(t,a,s[a][n]);$.hasData(e)&&(i=$.access(e),o=C.extend({},i),$.set(t,o))}}function ze(e,t,n,r){t=u(t);var a,i,o,s,l,c,h=0,f=e.length,d=f-1,p=t[0],m=y(p);if(m||1<f&&"string"==typeof p&&!v.checkClone&&Oe.test(p))return e.each((function(a){var i=e.eq(a);m&&(t[0]=p.call(this,a,i.html())),ze(i,t,n,r)}));if(f&&(i=(a=we(t,e[0].ownerDocument,!1,e,r)).firstChild,1===a.childNodes.length&&(a=i),i||r)){for(s=(o=C.map(_e(a,"script"),Pe)).length;h<f;h++)l=a,h!==d&&(l=C.clone(l,!0,!0),s&&C.merge(o,_e(l,"script"))),n.call(e[h],l,h);if(s)for(c=o[o.length-1].ownerDocument,C.map(o,Fe),h=0;h<s;h++)ye.test((l=o[h]).type||"")&&!Q.access(l,"globalEval")&&C.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?C._evalUrl&&!l.noModule&&C._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):x(l.textContent.replace(Me,""),l,c))}return e}function Be(e,t,n){for(var r,a=t?C.filter(t,e):e,i=0;null!=(r=a[i]);i++)n||1!==r.nodeType||C.cleanData(_e(r)),r.parentNode&&(n&&se(r)&&be(_e(r,"script")),r.parentNode.removeChild(r));return e}C.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,a,i,o,s,u,l,c=e.cloneNode(!0),h=se(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(o=_e(c),r=0,a=(i=_e(e)).length;r<a;r++)s=i[r],"input"===(l=(u=o[r]).nodeName.toLowerCase())&&me.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(i=i||_e(e),o=o||_e(c),r=0,a=i.length;r<a;r++)Le(i[r],o[r]);else Le(e,c);return 0<(o=_e(c,"script")).length&&be(o,!h&&_e(e,"script")),c},cleanData:function(e){for(var t,n,r,a=C.event.special,i=0;void 0!==(n=e[i]);i++)if(Z(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)a[r]?C.event.remove(n,r):C.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[$.expando]&&(n[$.expando]=void 0)}}}),C.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return H(this,(function(e){return void 0===e?C.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return ze(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)}))},prepend:function(){return ze(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return ze(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return ze(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(_e(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return C.clone(this,e,t)}))},html:function(e){return H(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Re.test(e)&&!ge[(ve.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(C.cleanData(_e(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return ze(this,arguments,(function(t){var n=this.parentNode;C.inArray(this,e)<0&&(C.cleanData(_e(this)),n&&n.replaceChild(t,this))}),e)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){C.fn[e]=function(e){for(var n,r=[],a=C(e),i=a.length-1,o=0;o<=i;o++)n=o===i?this:this.clone(!0),C(a[o])[t](n),l.apply(r,n.get());return this.pushStack(r)}}));var We=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),qe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Ve=function(e,t,n){var r,a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];for(a in r=n.call(e),t)e.style[a]=i[a];return r},Ue=new RegExp(ie.join("|"),"i");function je(e,t,n){var r,a,i,o,s=e.style;return(n=n||qe(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||se(e)||(o=C.style(e,t)),!v.pixelBoxStyles()&&We.test(o)&&Ue.test(t)&&(r=s.width,a=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=a,s.maxWidth=i)),void 0!==o?o+"":o}function He(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(l).appendChild(c);var e=n.getComputedStyle(c);r="1%"!==e.top,u=12===t(e.marginLeft),c.style.right="60%",o=36===t(e.right),a=36===t(e.width),c.style.position="absolute",i=12===t(c.offsetWidth/3),oe.removeChild(l),c=null}}function t(e){return Math.round(parseFloat(e))}var r,a,i,o,s,u,l=_.createElement("div"),c=_.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,C.extend(v,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,r,a;return null==s&&(e=_.createElement("table"),t=_.createElement("tr"),r=_.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",r.style.height="9px",oe.appendChild(e).appendChild(t).appendChild(r),a=n.getComputedStyle(t),s=3<parseInt(a.height),oe.removeChild(e)),s}}))}();var Ge=["Webkit","Moz","ms"],Je=_.createElement("div").style,Xe={};function Ke(e){return C.cssProps[e]||Xe[e]||(e in Je?e:Xe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;n--;)if((e=Ge[n]+t)in Je)return e}(e)||e)}var Ze=/^(none|table(?!-c[ea]).+)/,Ye=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},$e={letterSpacing:"0",fontWeight:"400"};function et(e,t,n){var r=ae.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function tt(e,t,n,r,a,i){var o="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(u+=C.css(e,n+ie[o],!0,a)),r?("content"===n&&(u-=C.css(e,"padding"+ie[o],!0,a)),"margin"!==n&&(u-=C.css(e,"border"+ie[o]+"Width",!0,a))):(u+=C.css(e,"padding"+ie[o],!0,a),"padding"!==n?u+=C.css(e,"border"+ie[o]+"Width",!0,a):s+=C.css(e,"border"+ie[o]+"Width",!0,a));return!r&&0<=i&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-u-s-.5))||0),u}function nt(e,t,n){var r=qe(e),a=(!v.boxSizingReliable()||n)&&"border-box"===C.css(e,"boxSizing",!1,r),i=a,o=je(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(We.test(o)){if(!n)return o;o="auto"}return(!v.boxSizingReliable()&&a||!v.reliableTrDimensions()&&E(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===C.css(e,"display",!1,r))&&e.getClientRects().length&&(a="border-box"===C.css(e,"boxSizing",!1,r),(i=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+tt(e,t,n||(a?"border":"content"),i,r,o)+"px"}function rt(e,t,n,r,a){return new rt.prototype.init(e,t,n,r,a)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=je(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,o,s=K(t),u=Ye.test(t),l=e.style;if(u||(t=Ke(s)),o=C.cssHooks[t]||C.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,r))?a:l[t];"string"==(i=typeof n)&&(a=ae.exec(n))&&a[1]&&(n=ce(e,t,a),i="number"),null!=n&&n==n&&("number"!==i||u||(n+=a&&a[3]||(C.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var a,i,o,s=K(t);return Ye.test(t)||(t=Ke(s)),(o=C.cssHooks[t]||C.cssHooks[s])&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=je(e,t,r)),"normal"===a&&t in $e&&(a=$e[t]),""===n||n?(i=parseFloat(a),!0===n||isFinite(i)?i||0:a):a}}),C.each(["height","width"],(function(e,t){C.cssHooks[t]={get:function(e,n,r){if(n)return!Ze.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,t,r):Ve(e,Qe,(function(){return nt(e,t,r)}))},set:function(e,n,r){var a,i=qe(e),o=!v.scrollboxSize()&&"absolute"===i.position,s=(o||r)&&"border-box"===C.css(e,"boxSizing",!1,i),u=r?tt(e,t,r,s,i):0;return s&&o&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-tt(e,t,"border",!1,i)-.5)),u&&(a=ae.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=C.css(e,t)),et(0,n,u)}}})),C.cssHooks.marginLeft=He(v.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(je(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),C.each({margin:"",padding:"",border:"Width"},(function(e,t){C.cssHooks[e+t]={expand:function(n){for(var r=0,a={},i="string"==typeof n?n.split(" "):[n];r<4;r++)a[e+ie[r]+t]=i[r]||i[r-2]||i[0];return a}},"margin"!==e&&(C.cssHooks[e+t].set=et)})),C.fn.extend({css:function(e,t){return H(this,(function(e,t,n){var r,a,i={},o=0;if(Array.isArray(t)){for(r=qe(e),a=t.length;o<a;o++)i[t[o]]=C.css(e,t[o],!1,r);return i}return void 0!==n?C.style(e,t,n):C.css(e,t)}),e,t,1<arguments.length)}}),((C.Tween=rt).prototype={constructor:rt,init:function(e,t,n,r,a,i){this.elem=e,this.prop=n,this.easing=a||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(C.cssNumber[n]?"":"px")},cur:function(){var e=rt.propHooks[this.prop];return e&&e.get?e.get(this):rt.propHooks._default.get(this)},run:function(e){var t,n=rt.propHooks[this.prop];return this.pos=t=this.options.duration?C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rt.propHooks._default.set(this),this}}).init.prototype=rt.prototype,(rt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||!C.cssHooks[e.prop]&&null==e.elem.style[Ke(e.prop)]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=rt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},(C.fx=rt.prototype.init).step={};var at,it,ot,st,ut=/^(?:toggle|show|hide)$/,lt=/queueHooks$/;function ct(){it&&(!1===_.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ct):n.setTimeout(ct,C.fx.interval),C.fx.tick())}function ht(){return n.setTimeout((function(){at=void 0})),at=Date.now()}function ft(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(n=ie[r])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function dt(e,t,n){for(var r,a=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),i=0,o=a.length;i<o;i++)if(r=a[i].call(n,t,e))return r}function pt(e,t,n){var r,a,i=0,o=pt.prefilters.length,s=C.Deferred().always((function(){delete u.elem})),u=function(){if(a)return!1;for(var t=at||ht(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),i=0,o=l.tweens.length;i<o;i++)l.tweens[i].run(r);return s.notifyWith(e,[l,r,n]),r<1&&o?n:(o||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},n),originalProperties:t,originalOptions:n,startTime:at||ht(),duration:n.duration,tweens:[],createTween:function(t,n){var r=C.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(a)return this;for(a=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(function(e,t){var n,r,a,i,o;for(n in e)if(a=t[r=K(n)],i=e[n],Array.isArray(i)&&(a=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(o=C.cssHooks[r])&&"expand"in o)for(n in i=o.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=a);else t[r]=a}(c,l.opts.specialEasing);i<o;i++)if(r=pt.prefilters[i].call(l,e,c,l.opts))return y(r.stop)&&(C._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return C.map(c,dt,l),y(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),C.fx.timer(C.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}C.Animation=C.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ce(n.elem,e,ae.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(z);for(var n,r=0,a=e.length;r<a;r++)(pt.tweeners[n=e[r]]=pt.tweeners[n]||[]).unshift(t)},prefilters:[function(e,t,n){var r,a,i,o,s,u,l,c,h="width"in t||"height"in t,f=this,d={},p=e.style,m=e.nodeType&&le(e),v=Q.get(e,"fxshow");for(r in n.queue||(null==(o=C._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always((function(){f.always((function(){o.unqueued--,C.queue(e,"fx").length||o.empty.fire()}))}))),t)if(ut.test(a=t[r])){if(delete t[r],i=i||"toggle"===a,a===(m?"hide":"show")){if("show"!==a||!v||void 0===v[r])continue;m=!0}d[r]=v&&v[r]||C.style(e,r)}if((u=!C.isEmptyObject(t))||!C.isEmptyObject(d))for(r in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=v&&v.display)&&(l=Q.get(e,"display")),"none"===(c=C.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=C.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===C.css(e,"float")&&(u||(f.done((function(){p.display=l})),null==l&&(l="none"===(c=p.display)?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,d)u||(v?"hidden"in v&&(m=v.hidden):v=Q.access(e,"fxshow",{display:l}),i&&(v.hidden=!m),m&&fe([e],!0),f.done((function(){for(r in m||fe([e]),Q.remove(e,"fxshow"),d)C.style(e,r,d[r])}))),u=dt(m?v[r]:0,r,f),r in v||(v[r]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),C.speed=function(e,t,n){var r=e&&"object"==typeof e?C.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return C.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in C.fx.speeds?C.fx.speeds[r.duration]:C.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&C.dequeue(this,r.queue)},r},C.fn.extend({fadeTo:function(e,t,n,r){return this.filter(le).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=C.isEmptyObject(e),i=C.speed(t,n,r),o=function(){var t=pt(this,C.extend({},e),i);(a||Q.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,a=null!=e&&e+"queueHooks",i=C.timers,o=Q.get(this);if(a)o[a]&&o[a].stop&&r(o[a]);else for(a in o)o[a]&&o[a].stop&&lt.test(a)&&r(o[a]);for(a=i.length;a--;)i[a].elem!==this||null!=e&&i[a].queue!==e||(i[a].anim.stop(n),t=!1,i.splice(a,1));!t&&n||C.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Q.get(this),r=n[e+"queue"],a=n[e+"queueHooks"],i=C.timers,o=r?r.length:0;for(n.finish=!0,C.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),C.each(["toggle","show","hide"],(function(e,t){var n=C.fn[t];C.fn[t]=function(e,r,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ft(t,!0),e,r,a)}})),C.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){C.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),C.timers=[],C.fx.tick=function(){var e,t=0,n=C.timers;for(at=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||C.fx.stop(),at=void 0},C.fx.timer=function(e){C.timers.push(e),C.fx.start()},C.fx.interval=13,C.fx.start=function(){it||(it=!0,ct())},C.fx.stop=function(){it=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(e,t){return e=C.fx&&C.fx.speeds[e]||e,this.queue(t=t||"fx",(function(t,r){var a=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(a)}}))},ot=_.createElement("input"),st=_.createElement("select").appendChild(_.createElement("option")),ot.type="checkbox",v.checkOn=""!==ot.value,v.optSelected=st.selected,(ot=_.createElement("input")).value="t",ot.type="radio",v.radioValue="t"===ot.value;var mt,vt=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return H(this,C.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each((function(){C.removeAttr(this,e)}))}}),C.extend({attr:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?C.prop(e,t,n):(1===i&&C.isXMLDoc(e)||(a=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void C.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(r=a.get(e,t))?r:null==(r=C.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&E(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,a=t&&t.match(z);if(a&&1===e.nodeType)for(;n=a[r++];)e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?C.removeAttr(e,n):e.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=vt[t]||C.find.attr;vt[t]=function(e,t,r){var a,i,o=t.toLowerCase();return r||(i=vt[o],vt[o]=a,a=null!=n(e,t,r)?o:null,vt[o]=i),a}}));var yt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function _t(e){return(e.match(z)||[]).join(" ")}function bt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(z)||[]}C.fn.extend({prop:function(e,t){return H(this,C.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each((function(){delete this[C.propFix[e]||e]}))}}),C.extend({prop:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&C.isXMLDoc(e)||(a=C.propHooks[t=C.propFix[t]||t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(C.propHooks.selected={get:function(e){return null},set:function(e){}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){C.propFix[this.toLowerCase()]=this})),C.fn.extend({addClass:function(e){var t,n,r,a,i,o,s,u=0;if(y(e))return this.each((function(t){C(this).addClass(e.call(this,t,bt(this)))}));if((t=xt(e)).length)for(;n=this[u++];)if(a=bt(n),r=1===n.nodeType&&" "+_t(a)+" "){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a!==(s=_t(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,a,i,o,s,u=0;if(y(e))return this.each((function(t){C(this).removeClass(e.call(this,t,bt(this)))}));if(!arguments.length)return this.attr("class","");if((t=xt(e)).length)for(;n=this[u++];)if(a=bt(n),r=1===n.nodeType&&" "+_t(a)+" "){for(o=0;i=t[o++];)for(;-1<r.indexOf(" "+i+" ");)r=r.replace(" "+i+" "," ");a!==(s=_t(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):y(e)?this.each((function(n){C(this).toggleClass(e.call(this,n,bt(this),t),t)})):this.each((function(){var t,a,i,o;if(r)for(a=0,i=C(this),o=xt(e);t=o[a++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||((t=bt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+_t(bt(n))+" ").indexOf(t))return!0;return!1}});var wt=/\r/g;C.fn.extend({val:function(e){var t,n,r,a=this[0];return arguments.length?(r=y(e),this.each((function(n){var a;1===this.nodeType&&(null==(a=r?e.call(this,n,C(this).val()):e)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=C.map(a,(function(e){return null==e?"":e+""}))),(t=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))}))):a?(t=C.valHooks[a.type]||C.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:"string"==typeof(n=a.value)?n.replace(wt,""):null==n?"":n:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:_t(C.text(e))}},select:{get:function(e){var t,n,r,a=e.options,i=e.selectedIndex,o="select-one"===e.type,s=o?null:[],u=o?i+1:a.length;for(r=i<0?u:o?i:0;r<u;r++)if(((n=a[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!E(n.parentNode,"optgroup"))){if(t=C(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,a=e.options,i=C.makeArray(t),o=a.length;o--;)((r=a[o]).selected=-1<C.inArray(C.valHooks.option.get(r),i))&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),C.each(["radio","checkbox"],(function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<C.inArray(C(e).val(),t)}},v.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),v.focusin="onfocusin"in n;var kt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};C.extend(C.event,{trigger:function(e,t,r,a){var i,o,s,u,l,c,h,f,p=[r||_],m=d.call(e,"type")?e.type:e,v=d.call(e,"namespace")?e.namespace.split("."):[];if(o=f=s=r=r||_,3!==r.nodeType&&8!==r.nodeType&&!kt.test(m+C.event.triggered)&&(-1<m.indexOf(".")&&(m=(v=m.split(".")).shift(),v.sort()),l=m.indexOf(":")<0&&"on"+m,(e=e[C.expando]?e:new C.Event(m,"object"==typeof e&&e)).isTrigger=a?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:C.makeArray(t,[e]),h=C.event.special[m]||{},a||!h.trigger||!1!==h.trigger.apply(r,t))){if(!a&&!h.noBubble&&!g(r)){for(kt.test((u=h.delegateType||m)+m)||(o=o.parentNode);o;o=o.parentNode)p.push(o),s=o;s===(r.ownerDocument||_)&&p.push(s.defaultView||s.parentWindow||n)}for(i=0;(o=p[i++])&&!e.isPropagationStopped();)f=o,e.type=1<i?u:h.bindType||m,(c=(Q.get(o,"events")||Object.create(null))[e.type]&&Q.get(o,"handle"))&&c.apply(o,t),(c=l&&o[l])&&c.apply&&Z(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=m,a||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!Z(r)||l&&y(r[m])&&!g(r)&&((s=r[l])&&(r[l]=null),C.event.triggered=m,e.isPropagationStopped()&&f.addEventListener(m,Ct),r[m](),e.isPropagationStopped()&&f.removeEventListener(m,Ct),C.event.triggered=void 0,s&&(r[l]=s)),e.result}},simulate:function(e,t,n){var r=C.extend(new C.Event,n,{type:e,isSimulated:!0});C.event.trigger(r,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each((function(){C.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return C.event.trigger(e,t,n,!0)}}),v.focusin||C.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){C.event.simulate(t,e.target,C.event.fix(e))};C.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,a=Q.access(r,t);a||r.addEventListener(e,n,!0),Q.access(r,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,a=Q.access(r,t)-1;a?Q.access(r,t,a):(r.removeEventListener(e,n,!0),Q.remove(r,t))}}}));var St=n.location,It={guid:Date.now()},Dt=/\?/;C.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+e),t};var At=/\[\]$/,Tt=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,Rt=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,n,r){var a;if(Array.isArray(t))C.each(t,(function(t,a){n||At.test(e)?r(e,a):Ot(e+"["+("object"==typeof a&&null!=a?t:"")+"]",a,n,r)}));else if(n||"object"!==w(t))r(e,t);else for(a in t)Ot(e+"["+a+"]",t[a],n,r)}C.param=function(e,t){var n,r=[],a=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,(function(){a(this.name,this.value)}));else for(n in e)Ot(n,e[n],t,a);return r.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&Rt.test(this.nodeName)&&!Et.test(e)&&(this.checked||!me.test(e))})).map((function(e,t){var n=C(this).val();return null==n?null:Array.isArray(n)?C.map(n,(function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}})):{name:t.name,value:n.replace(Tt,"\r\n")}})).get()}});var Mt=/%20/g,Nt=/#.*$/,Pt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,zt=/^\/\//,Bt={},Wt={},qt="*/".concat("*"),Vt=_.createElement("a");function Ut(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,a=0,i=t.toLowerCase().match(z)||[];if(y(n))for(;r=i[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function jt(e,t,n,r){var a={},i=e===Wt;function o(s){var u;return a[s]=!0,C.each(e[s]||[],(function(e,s){var l=s(t,n,r);return"string"!=typeof l||i||a[l]?i?!(u=l):void 0:(t.dataTypes.unshift(l),o(l),!1)})),u}return o(t.dataTypes[0])||!a["*"]&&o("*")}function Ht(e,t){var n,r,a=C.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r||(r={}))[n]=t[n]);return r&&C.extend(!0,e,r),e}Vt.href=St.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ht(Ht(e,C.ajaxSettings),t):Ht(C.ajaxSettings,e)},ajaxPrefilter:Ut(Bt),ajaxTransport:Ut(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var r,a,i,o,s,u,l,c,h,f,d=C.ajaxSetup({},t=t||{}),p=d.context||d,m=d.context&&(p.nodeType||p.jquery)?C(p):C.event,v=C.Deferred(),y=C.Callbacks("once memory"),g=d.statusCode||{},b={},x={},w="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(l){if(!o)for(o={};t=Ft.exec(i);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?i:null},setRequestHeader:function(e,t){return null==l&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==l&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)k.always(e[k.status]);else for(t in e)g[t]=[g[t],e[t]];return this},abort:function(e){var t=e||w;return r&&r.abort(t),S(0,t),this}};if(v.promise(k),d.url=((e||d.url||St.href)+"").replace(zt,St.protocol+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(z)||[""],null==d.crossDomain){u=_.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Vt.protocol+"//"+Vt.host!=u.protocol+"//"+u.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=C.param(d.data,d.traditional)),jt(Bt,d,t,k),l)return k;for(h in(c=C.event&&d.global)&&0==C.active++&&C.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Lt.test(d.type),a=d.url.replace(Nt,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Mt,"+")):(f=d.url.slice(a.length),d.data&&(d.processData||"string"==typeof d.data)&&(a+=(Dt.test(a)?"&":"?")+d.data,delete d.data),!1===d.cache&&(a=a.replace(Pt,"$1"),f=(Dt.test(a)?"&":"?")+"_="+It.guid+++f),d.url=a+f),d.ifModified&&(C.lastModified[a]&&k.setRequestHeader("If-Modified-Since",C.lastModified[a]),C.etag[a]&&k.setRequestHeader("If-None-Match",C.etag[a])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&k.setRequestHeader("Content-Type",d.contentType),k.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+qt+"; q=0.01":""):d.accepts["*"]),d.headers)k.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(p,k,d)||l))return k.abort();if(w="abort",y.add(d.complete),k.done(d.success),k.fail(d.error),r=jt(Wt,d,t,k)){if(k.readyState=1,c&&m.trigger("ajaxSend",[k,d]),l)return k;d.async&&0<d.timeout&&(s=n.setTimeout((function(){k.abort("timeout")}),d.timeout));try{l=!1,r.send(b,S)}catch(e){if(l)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,o,u){var h,f,_,b,x,w=t;l||(l=!0,s&&n.clearTimeout(s),r=void 0,i=u||"",k.readyState=0<e?4:0,h=200<=e&&e<300||304===e,o&&(b=function(e,t,n){for(var r,a,i,o,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){u.unshift(a);break}if(u[0]in n)i=u[0];else{for(a in n){if(!u[0]||e.converters[a+" "+u[0]]){i=a;break}o||(o=a)}i=i||o}if(i)return i!==u[0]&&u.unshift(i),n[i]}(d,k,o)),!h&&-1<C.inArray("script",d.dataTypes)&&(d.converters["text script"]=function(){}),b=function(e,t,n,r){var a,i,o,s,u,l={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(i=c.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=i,i=c.shift())if("*"===i)i=u;else if("*"!==u&&u!==i){if(!(o=l[u+" "+i]||l["* "+i]))for(a in l)if((s=a.split(" "))[1]===i&&(o=l[u+" "+s[0]]||l["* "+s[0]])){!0===o?o=l[a]:!0!==l[a]&&(i=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+u+" to "+i}}}return{state:"success",data:t}}(d,b,k,h),h?(d.ifModified&&((x=k.getResponseHeader("Last-Modified"))&&(C.lastModified[a]=x),(x=k.getResponseHeader("etag"))&&(C.etag[a]=x)),204===e||"HEAD"===d.type?w="nocontent":304===e?w="notmodified":(w=b.state,f=b.data,h=!(_=b.error))):(_=w,!e&&w||(w="error",e<0&&(e=0))),k.status=e,k.statusText=(t||w)+"",h?v.resolveWith(p,[f,w,k]):v.rejectWith(p,[k,w,_]),k.statusCode(g),g=void 0,c&&m.trigger(h?"ajaxSuccess":"ajaxError",[k,d,h?f:_]),y.fireWith(p,[k,w]),c&&(m.trigger("ajaxComplete",[k,d]),--C.active||C.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],(function(e,t){C[t]=function(e,n,r,a){return y(n)&&(a=a||r,r=n,n=void 0),C.ajax(C.extend({url:e,type:t,dataType:a,data:n,success:r},C.isPlainObject(e)&&e))}})),C.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),C._evalUrl=function(e,t,n){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){C.globalEval(e,t,n)}})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){C(this).wrapInner(e.call(this,t))})):this.each((function(){var t=C(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(n){C(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){C(this).replaceWith(this.childNodes)})),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(a){}};var Gt={0:200,1223:204},Jt=C.ajaxSettings.xhr();v.cors=!!Jt&&"withCredentials"in Jt,v.ajax=Jt=!!Jt,C.ajaxTransport((function(e){var t,r;if(v.cors||Jt&&!e.crossDomain)return{send:function(a,i){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)s.setRequestHeader(o,a[o]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Gt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}})),C.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),C.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,a){t=C("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),_.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Xt,Kt=[],Zt=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||C.expando+"_"+It.guid++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",(function(e,t,r){var a,i,o,s=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Zt,"$1"+a):!1!==e.jsonp&&(e.url+=(Dt.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return o||C.error(a+" was not called"),o[0]},e.dataTypes[0]="json",i=n[a],n[a]=function(){o=arguments},r.always((function(){void 0===i?C(n).removeProp(a):n[a]=i,e[a]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(a)),o&&y(i)&&i(o[0]),o=i=void 0})),"script"})),v.createHTMLDocument=((Xt=_.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xt.childNodes.length),C.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,t.head.appendChild(r)):t=_),i=!n&&[],(a=R.exec(e))?[t.createElement(a[1])]:(a=we([e],t,i),i&&i.length&&C(i).remove(),C.merge([],a.childNodes)));var r,a,i},C.fn.load=function(e,t,n){var r,a,i,o=this,s=e.indexOf(" ");return-1<s&&(r=_t(e.slice(s)),e=e.slice(0,s)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),0<o.length&&C.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done((function(e){i=arguments,o.html(r?C("<div>").append(C.parseHTML(e)).find(r):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,i||[e.responseText,t,e])}))}),this},C.expr.pseudos.animated=function(e){return C.grep(C.timers,(function(t){return e===t.elem})).length},C.offset={setOffset:function(e,t,n){var r,a,i,o,s,u,l=C.css(e,"position"),c=C(e),h={};"static"===l&&(e.style.position="relative"),s=c.offset(),i=C.css(e,"top"),u=C.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(i+u).indexOf("auto")?(o=(r=c.position()).top,a=r.left):(o=parseFloat(i)||0,a=parseFloat(u)||0),y(t)&&(t=t.call(e,n,C.extend({},s))),null!=t.top&&(h.top=t.top-s.top+o),null!=t.left&&(h.left=t.left-s.left+a),"using"in t?t.using.call(e,h):("number"==typeof h.top&&(h.top+="px"),"number"==typeof h.left&&(h.left+="px"),c.css(h))}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){C.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?{top:(t=r.getBoundingClientRect()).top+(n=r.ownerDocument.defaultView).pageYOffset,left:t.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],a={top:0,left:0};if("fixed"===C.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===C.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((a=C(e).offset()).top+=C.css(e,"borderTopWidth",!0),a.left+=C.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-C.css(r,"marginTop",!0),left:t.left-a.left-C.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||oe}))}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;C.fn[e]=function(r){return H(this,(function(e,r,a){var i;if(g(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===a)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:a,n?a:i.pageYOffset):e[r]=a}),e,r,arguments.length)}})),C.each(["top","left"],(function(e,t){C.cssHooks[t]=He(v.pixelPosition,(function(e,n){if(n)return n=je(e,t),We.test(n)?C(e).position()[t]+"px":n}))})),C.each({Height:"height",Width:"width"},(function(e,t){C.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){C.fn[r]=function(a,i){var o=arguments.length&&(n||"boolean"!=typeof a),s=n||(!0===a||!0===i?"margin":"border");return H(this,(function(t,n,a){var i;return g(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===a?C.css(t,n,s):C.style(t,n,a,s)}),t,o?a:void 0,o)}}))})),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){C.fn[t]=function(e){return this.on(t,e)}})),C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){C.fn[t]=function(e,n){return 0<arguments.length?this.on(t,null,e,n):this.trigger(t)}}));var Yt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(e,t){var n,r,a;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=s.call(arguments,2),(a=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||C.guid++,a},C.holdReady=function(e){e?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=E,C.isFunction=y,C.isWindow=g,C.camelCase=K,C.type=w,C.now=Date.now,C.isNumeric=function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},C.trim=function(e){return null==e?"":(e+"").replace(Yt,"")},void 0===(r=(function(){return C}).apply(t,[]))||(e.exports=r);var Qt=n.jQuery,$t=n.$;return C.noConflict=function(e){return n.$===C&&(n.$=$t),e&&n.jQuery===C&&(n.jQuery=Qt),C},void 0===a&&(n.jQuery=n.$=C),C}))},yuCN:function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],r[a]=n^=(e^=e<<13)^e<<9,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return u}).call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},zUnb:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"shuffle",(function(){return Sv})),n.d(r,"clamp",(function(){return Iv})),n.d(r,"nearestLargerEven",(function(){return Dv})),n.d(r,"sum",(function(){return Av})),n.d(r,"randUniform",(function(){return Tv})),n.d(r,"distSquared",(function(){return Ev})),n.d(r,"assert",(function(){return Rv})),n.d(r,"assertShapesMatch",(function(){return Ov})),n.d(r,"assertNonNull",(function(){return Mv})),n.d(r,"flatten",(function(){return Nv})),n.d(r,"sizeFromShape",(function(){return Pv})),n.d(r,"isScalarShape",(function(){return Fv})),n.d(r,"arraysEqual",(function(){return Lv})),n.d(r,"isInt",(function(){return zv})),n.d(r,"tanh",(function(){return Bv})),n.d(r,"sizeToSquarishShape",(function(){return Wv})),n.d(r,"createShuffledIndices",(function(){return qv})),n.d(r,"rightPad",(function(){return Vv})),n.d(r,"repeatedTry",(function(){return Uv})),n.d(r,"inferFromImplicitShape",(function(){return jv})),n.d(r,"parseAxisParam",(function(){return Hv})),n.d(r,"squeezeShape",(function(){return Gv})),n.d(r,"getTypedArrayFromDType",(function(){return Jv})),n.d(r,"getArrayFromDType",(function(){return Xv})),n.d(r,"checkConversionForErrors",(function(){return Kv})),n.d(r,"isValidDtype",(function(){return Zv})),n.d(r,"hasEncodingLoss",(function(){return Yv})),n.d(r,"isTypedArray",(function(){return Qv})),n.d(r,"bytesPerElement",(function(){return $v})),n.d(r,"bytesFromStringArray",(function(){return ey})),n.d(r,"isString",(function(){return ty})),n.d(r,"isBoolean",(function(){return ny})),n.d(r,"isNumber",(function(){return ry})),n.d(r,"inferDtype",(function(){return ay})),n.d(r,"isFunction",(function(){return iy})),n.d(r,"nearestDivisor",(function(){return oy})),n.d(r,"computeStrides",(function(){return sy})),n.d(r,"toTypedArray",(function(){return uy})),n.d(r,"toNestedArray",(function(){return ly})),n.d(r,"makeOnesTypedArray",(function(){return cy})),n.d(r,"makeZerosTypedArray",(function(){return hy})),n.d(r,"now",(function(){return fy})),n.d(r,"assertNonNegativeIntegerDimensions",(function(){return dy})),n.d(r,"fetch",(function(){return py})),n.d(r,"encodeString",(function(){return my})),n.d(r,"decodeString",(function(){return vy})),n.d(r,"locToIndex",(function(){return yy})),n.d(r,"indexToLoc",(function(){return gy}));var a={};n.r(a),n.d(a,"makeTypesMatch",(function(){return Ly})),n.d(a,"assertTypesMatch",(function(){return zy})),n.d(a,"isTensorInList",(function(){return By})),n.d(a,"getTensorsInContainer",(function(){return Wy}));var i={};n.r(i),n.d(i,"isMobile",(function(){return jy})),n.d(i,"isBrowser",(function(){return Hy}));var o={};n.r(o),n.d(o,"assertParamsValid",(function(){return ex})),n.d(o,"maskToAxes",(function(){return tx})),n.d(o,"computeOutShape",(function(){return nx})),n.d(o,"startForAxis",(function(){return rx})),n.d(o,"stopForAxis",(function(){return ax})),n.d(o,"isSliceContinous",(function(){return ix})),n.d(o,"computeFlatOffset",(function(){return ox}));var s={};n.r(s),n.d(s,"copyModel",(function(){return Wx})),n.d(s,"listModels",(function(){return Fx})),n.d(s,"moveModel",(function(){return Vx})),n.d(s,"removeModel",(function(){return zx})),n.d(s,"browserFiles",(function(){return lw})),n.d(s,"browserHTTPRequest",(function(){return bw})),n.d(s,"concatenateArrayBuffers",(function(){return Cx})),n.d(s,"decodeWeights",(function(){return bx})),n.d(s,"encodeWeights",(function(){return gx})),n.d(s,"fromMemory",(function(){return kw})),n.d(s,"getLoadHandlers",(function(){return Rx})),n.d(s,"getModelArtifactsInfoForJSON",(function(){return Ix})),n.d(s,"getSaveHandlers",(function(){return Ex})),n.d(s,"http",(function(){return _w})),n.d(s,"isHTTPScheme",(function(){return yw})),n.d(s,"loadWeights",(function(){return dw})),n.d(s,"registerLoadRouter",(function(){return Tx})),n.d(s,"registerSaveRouter",(function(){return Ax})),n.d(s,"weightsLoaderFactory",(function(){return mw})),n.d(s,"withSaveHandler",(function(){return Cw}));var u={};n.r(u),n.d(u,"toPixels",(function(){return Dw})),n.d(u,"fromPixels",(function(){return Tw}));var l={};n.r(l),n.d(l,"Serializable",(function(){return Nw})),n.d(l,"SerializationMap",(function(){return Pw})),n.d(l,"registerClass",(function(){return Fw}));var c={};n.r(c),n.d(c,"segOpComputeOptimalWindowSize",(function(){return Bk})),n.d(c,"computeOutShape",(function(){return Wk})),n.d(c,"collectGatherOpShapeInfo",(function(){return qk}));var h={};n.r(h),n.d(h,"fft",(function(){return TC})),n.d(h,"ifft",(function(){return EC})),n.d(h,"rfft",(function(){return RC})),n.d(h,"irfft",(function(){return OC}));var f={};n.r(f),n.d(f,"hannWindow",(function(){return zC})),n.d(f,"hammingWindow",(function(){return BC})),n.d(f,"frame",(function(){return WC})),n.d(f,"stft",(function(){return qC}));var d={};n.r(d),n.d(d,"Reduction",(function(){return LC})),n.d(d,"absoluteDifference",(function(){return UC})),n.d(d,"computeWeightedLoss",(function(){return jC})),n.d(d,"cosineDistance",(function(){return HC})),n.d(d,"hingeLoss",(function(){return GC})),n.d(d,"huberLoss",(function(){return JC})),n.d(d,"logLoss",(function(){return XC})),n.d(d,"meanSquaredError",(function(){return KC})),n.d(d,"sigmoidCrossEntropy",(function(){return ZC})),n.d(d,"softmaxCrossEntropy",(function(){return YC}));var p={};n.r(p),n.d(p,"bandPart",(function(){return $C})),n.d(p,"gramSchmidt",(function(){return eS})),n.d(p,"qr",(function(){return tS}));var m={};n.r(m),n.d(m,"nonMaxSuppression",(function(){return hS})),n.d(m,"resizeBilinear",(function(){return fS})),n.d(m,"resizeNearestNeighbor",(function(){return dS})),n.d(m,"nonMaxSuppressionAsync",(function(){return pS})),n.d(m,"nonMaxSuppressionWithScore",(function(){return mS})),n.d(m,"nonMaxSuppressionWithScoreAsync",(function(){return vS})),n.d(m,"cropAndResize",(function(){return yS}));var v={};n.r(v),n.d(v,"matMul",(function(){return wS})),n.d(v,"conv2d",(function(){return kS})),n.d(v,"depthwiseConv2d",(function(){return CS}));var y={};n.r(y),n.d(y,"add",(function(){return z_})),n.d(y,"addN",(function(){return Lw})),n.d(y,"batchToSpaceND",(function(){return Jb})),n.d(y,"batchNorm",(function(){return Bw})),n.d(y,"batchNorm2d",(function(){return Ww})),n.d(y,"batchNorm3d",(function(){return qw})),n.d(y,"batchNorm4d",(function(){return Vw})),n.d(y,"broadcastTo",(function(){return jw})),n.d(y,"clone",(function(){return Uw})),n.d(y,"concat",(function(){return Og})),n.d(y,"concat1d",(function(){return Hw})),n.d(y,"concat2d",(function(){return Gw})),n.d(y,"concat3d",(function(){return Jw})),n.d(y,"concat4d",(function(){return Xw})),n.d(y,"conv1d",(function(){return Kw})),n.d(y,"conv2d",(function(){return k_})),n.d(y,"conv2dTranspose",(function(){return Zw})),n.d(y,"conv3d",(function(){return Yw})),n.d(y,"conv3dTranspose",(function(){return Qw})),n.d(y,"depthToSpace",(function(){return $w})),n.d(y,"depthwiseConv2d",(function(){return ek})),n.d(y,"diag",(function(){return tk})),n.d(y,"div",(function(){return Pb})),n.d(y,"divNoNan",(function(){return lk})),n.d(y,"dot",(function(){return ck})),n.d(y,"equal",(function(){return hk})),n.d(y,"eye",(function(){return fk})),n.d(y,"greater",(function(){return dk})),n.d(y,"greaterEqual",(function(){return pk})),n.d(y,"less",(function(){return mk})),n.d(y,"lessEqual",(function(){return vk})),n.d(y,"localResponseNormalization",(function(){return yk})),n.d(y,"matMul",(function(){return Ug})),n.d(y,"max",(function(){return gk})),n.d(y,"multinomial",(function(){return _k})),n.d(y,"notEqual",(function(){return bk})),n.d(y,"oneHot",(function(){return Iw})),n.d(y,"outerProduct",(function(){return xk})),n.d(y,"pad",(function(){return $b})),n.d(y,"pad1d",(function(){return wk})),n.d(y,"pad2d",(function(){return kk})),n.d(y,"pad3d",(function(){return Ck})),n.d(y,"pad4d",(function(){return Sk})),n.d(y,"rand",(function(){return Ik})),n.d(y,"randomGamma",(function(){return Rk})),n.d(y,"randomNormal",(function(){return Ok})),n.d(y,"randomUniform",(function(){return Mk})),n.d(y,"separableConv2d",(function(){return Nk})),n.d(y,"spaceToBatchND",(function(){return Hg})),n.d(y,"split",(function(){return o_})),n.d(y,"square",(function(){return Fb})),n.d(y,"squaredDifference",(function(){return Pk})),n.d(y,"sub",(function(){return zb})),n.d(y,"tile",(function(){return Bb})),n.d(y,"truncatedNormal",(function(){return Fk})),n.d(y,"booleanMaskAsync",(function(){return Gk})),n.d(y,"complex",(function(){return fg})),n.d(y,"real",(function(){return dg})),n.d(y,"imag",(function(){return pg})),n.d(y,"reverse",(function(){return Jk})),n.d(y,"reverse1d",(function(){return Xk})),n.d(y,"reverse2d",(function(){return Kk})),n.d(y,"reverse3d",(function(){return Zk})),n.d(y,"reverse4d",(function(){return Yk})),n.d(y,"maxPool",(function(){return eC})),n.d(y,"avgPool",(function(){return tC})),n.d(y,"pool",(function(){return nC})),n.d(y,"maxPool3d",(function(){return rC})),n.d(y,"avgPool3d",(function(){return aC})),n.d(y,"maxPoolWithArgmax",(function(){return iC})),n.d(y,"slice",(function(){return cx})),n.d(y,"slice1d",(function(){return hx})),n.d(y,"slice2d",(function(){return fx})),n.d(y,"slice3d",(function(){return dx})),n.d(y,"slice4d",(function(){return px})),n.d(y,"abs",(function(){return B_})),n.d(y,"acos",(function(){return W_})),n.d(y,"acosh",(function(){return q_})),n.d(y,"asin",(function(){return V_})),n.d(y,"asinh",(function(){return U_})),n.d(y,"atan",(function(){return j_})),n.d(y,"atanh",(function(){return H_})),n.d(y,"ceil",(function(){return G_})),n.d(y,"clipByValue",(function(){return J_})),n.d(y,"cos",(function(){return X_})),n.d(y,"cosh",(function(){return K_})),n.d(y,"erf",(function(){return Z_})),n.d(y,"exp",(function(){return Y_})),n.d(y,"expm1",(function(){return Q_})),n.d(y,"floor",(function(){return $_})),n.d(y,"log",(function(){return eb})),n.d(y,"log1p",(function(){return tb})),n.d(y,"logSigmoid",(function(){return nb})),n.d(y,"neg",(function(){return rb})),n.d(y,"reciprocal",(function(){return ab})),n.d(y,"round",(function(){return ib})),n.d(y,"rsqrt",(function(){return ob})),n.d(y,"sigmoid",(function(){return sb})),n.d(y,"sign",(function(){return ub})),n.d(y,"isNaN",(function(){return lb})),n.d(y,"isInf",(function(){return cb})),n.d(y,"isFinite",(function(){return hb})),n.d(y,"sin",(function(){return fb})),n.d(y,"sinh",(function(){return db})),n.d(y,"softplus",(function(){return pb})),n.d(y,"sqrt",(function(){return mb})),n.d(y,"step",(function(){return vb})),n.d(y,"tan",(function(){return yb})),n.d(y,"tanh",(function(){return gb})),n.d(y,"all",(function(){return Kg})),n.d(y,"any",(function(){return Zg})),n.d(y,"argMax",(function(){return Yg})),n.d(y,"argMin",(function(){return Qg})),n.d(y,"logSumExp",(function(){return $g})),n.d(y,"mean",(function(){return e_})),n.d(y,"min",(function(){return t_})),n.d(y,"moments",(function(){return n_})),n.d(y,"sum",(function(){return r_})),n.d(y,"prod",(function(){return a_})),n.d(y,"equalStrict",(function(){return oC})),n.d(y,"greaterEqualStrict",(function(){return sC})),n.d(y,"greaterStrict",(function(){return uC})),n.d(y,"lessEqualStrict",(function(){return lC})),n.d(y,"lessStrict",(function(){return cC})),n.d(y,"notEqualStrict",(function(){return hC})),n.d(y,"addStrict",(function(){return _b})),n.d(y,"atan2",(function(){return bb})),n.d(y,"divStrict",(function(){return xb})),n.d(y,"floorDiv",(function(){return wb})),n.d(y,"maximum",(function(){return kb})),n.d(y,"maximumStrict",(function(){return Cb})),n.d(y,"minimum",(function(){return Sb})),n.d(y,"minimumStrict",(function(){return Ib})),n.d(y,"mod",(function(){return Db})),n.d(y,"modStrict",(function(){return Ab})),n.d(y,"mul",(function(){return Tb})),n.d(y,"mulStrict",(function(){return Eb})),n.d(y,"pow",(function(){return Rb})),n.d(y,"powStrict",(function(){return Ob})),n.d(y,"squaredDifferenceStrict",(function(){return Mb})),n.d(y,"subStrict",(function(){return Nb})),n.d(y,"elu",(function(){return pC})),n.d(y,"leakyRelu",(function(){return mC})),n.d(y,"prelu",(function(){return vC})),n.d(y,"relu",(function(){return yC})),n.d(y,"relu6",(function(){return gC})),n.d(y,"selu",(function(){return _C})),n.d(y,"logicalAnd",(function(){return rk})),n.d(y,"logicalNot",(function(){return ak})),n.d(y,"logicalOr",(function(){return ik})),n.d(y,"logicalXor",(function(){return ok})),n.d(y,"where",(function(){return sk})),n.d(y,"whereAsync",(function(){return uk})),n.d(y,"buffer",(function(){return Mg})),n.d(y,"print",(function(){return Ng})),n.d(y,"cast",(function(){return Pg})),n.d(y,"cumsum",(function(){return Fg})),n.d(y,"expandDims",(function(){return Lg})),n.d(y,"reshape",(function(){return zg})),n.d(y,"squeeze",(function(){return Bg})),n.d(y,"stack",(function(){return Wg})),n.d(y,"unstack",(function(){return qg})),n.d(y,"setdiff1dAsync",(function(){return Vg})),n.d(y,"fill",(function(){return Dg})),n.d(y,"linspace",(function(){return Ag})),n.d(y,"ones",(function(){return Sg})),n.d(y,"range",(function(){return Tg})),n.d(y,"scalar",(function(){return yg})),n.d(y,"tensor",(function(){return mg})),n.d(y,"tensor1d",(function(){return gg})),n.d(y,"tensor2d",(function(){return _g})),n.d(y,"tensor3d",(function(){return bg})),n.d(y,"tensor4d",(function(){return xg})),n.d(y,"tensor5d",(function(){return wg})),n.d(y,"tensor6d",(function(){return kg})),n.d(y,"variable",(function(){return Cg})),n.d(y,"zeros",(function(){return Ig})),n.d(y,"onesLike",(function(){return Eg})),n.d(y,"zerosLike",(function(){return Rg})),n.d(y,"transpose",(function(){return jb})),n.d(y,"softmax",(function(){return bC})),n.d(y,"logSoftmax",(function(){return xC})),n.d(y,"norm",(function(){return wC})),n.d(y,"gather",(function(){return jk})),n.d(y,"unsortedSegmentSum",(function(){return Hk})),n.d(y,"basicLSTMCell",(function(){return kC})),n.d(y,"multiRNNCell",(function(){return CC})),n.d(y,"movingAverage",(function(){return SC})),n.d(y,"stridedSlice",(function(){return IC})),n.d(y,"topk",(function(){return DC})),n.d(y,"scatterND",(function(){return AC})),n.d(y,"fft",(function(){return TC})),n.d(y,"ifft",(function(){return EC})),n.d(y,"rfft",(function(){return RC})),n.d(y,"irfft",(function(){return OC})),n.d(y,"sparseToDense",(function(){return MC})),n.d(y,"gatherND",(function(){return NC})),n.d(y,"dropout",(function(){return PC})),n.d(y,"hannWindow",(function(){return zC})),n.d(y,"hammingWindow",(function(){return BC})),n.d(y,"frame",(function(){return WC})),n.d(y,"stft",(function(){return qC})),n.d(y,"inTopKAsync",(function(){return VC})),n.d(y,"op",(function(){return hg})),n.d(y,"image",(function(){return m})),n.d(y,"linalg",(function(){return p})),n.d(y,"losses",(function(){return d})),n.d(y,"spectral",(function(){return h})),n.d(y,"fused",(function(){return v})),n.d(y,"signal",(function(){return f}));var g={};n.r(g),n.d(g,"axesAreInnerMostDims",(function(){return tg})),n.d(g,"combineLocations",(function(){return ng})),n.d(g,"computeOutAndReduceShapes",(function(){return rg})),n.d(g,"expandShapeToKeepDim",(function(){return ag})),n.d(g,"assertAxesAreInnerMostDims",(function(){return ig})),n.d(g,"getAxesPermutation",(function(){return og})),n.d(g,"getUndoAxesPermutation",(function(){return sg})),n.d(g,"getInnerMostAxes",(function(){return ug})),n.d(g,"getBroadcastDims",(function(){return Jy})),n.d(g,"getReductionAxes",(function(){return Xy})),n.d(g,"assertAndGetBroadcastShape",(function(){return Ky})),n.d(g,"assertParamsConsistent",(function(){return lg})),n.d(g,"computeOutShape",(function(){return cg})),n.d(g,"computePool2DInfo",(function(){return u_})),n.d(g,"computePool3DInfo",(function(){return l_})),n.d(g,"computeConv2DInfo",(function(){return c_})),n.d(g,"computeConv3DInfo",(function(){return h_})),n.d(g,"computeDefaultPad",(function(){return f_})),n.d(g,"tupleValuesAreOne",(function(){return y_})),n.d(g,"eitherStridesOrDilationsAreOne",(function(){return g_})),n.d(g,"convertConv2DDataFormat",(function(){return __})),n.d(g,"PARALLELIZE_THRESHOLD",(function(){return Lk})),n.d(g,"computeOptimalWindowSize",(function(){return zk})),n.d(g,"nonMaxSuppressionV3",(function(){return aS})),n.d(g,"nonMaxSuppressionV5",(function(){return iS})),n.d(g,"upcastType",(function(){return Py})),n.d(g,"getReshaped",(function(){return LS})),n.d(g,"getPermuted",(function(){return zS})),n.d(g,"getReshapedPermuted",(function(){return BS})),n.d(g,"getSliceBeginCoords",(function(){return WS})),n.d(g,"getSliceSize",(function(){return qS})),n.d(g,"prepareAndValidate",(function(){return Ew})),n.d(g,"validateUpdateShape",(function(){return Rw})),n.d(g,"validateInput",(function(){return Ow})),n.d(g,"calculateShapes",(function(){return Mw})),n.d(g,"SELU_SCALEALPHA",(function(){return fC})),n.d(g,"SELU_SCALE",(function(){return dC})),n.d(g,"shouldFuse",(function(){return gS})),n.d(g,"ERF_P",(function(){return VS})),n.d(g,"ERF_A1",(function(){return US})),n.d(g,"ERF_A2",(function(){return jS})),n.d(g,"ERF_A3",(function(){return HS})),n.d(g,"ERF_A4",(function(){return GS})),n.d(g,"ERF_A5",(function(){return JS})),n.d(g,"warn",(function(){return XS})),n.d(g,"log",(function(){return KS})),n.d(g,"mergeRealAndImagArrays",(function(){return ZS})),n.d(g,"splitRealAndImagArrays",(function(){return YS})),n.d(g,"complexWithEvenIndex",(function(){return QS})),n.d(g,"complexWithOddIndex",(function(){return $S})),n.d(g,"getComplexWithIndex",(function(){return eI})),n.d(g,"assignToTypedArray",(function(){return tI})),n.d(g,"exponents",(function(){return nI})),n.d(g,"exponent",(function(){return rI})),n.d(g,"segment_util",(function(){return c})),n.d(g,"castTensor",(function(){return aI})),n.d(g,"reshapeTensor",(function(){return iI})),n.d(g,"linspaceImpl",(function(){return oI}));var _={};n.r(_),n.d(_,"nonMaxSuppressionV3",(function(){return aS})),n.d(_,"nonMaxSuppressionV5",(function(){return iS})),n.d(_,"split",(function(){return sI})),n.d(_,"tile",(function(){return uI})),n.d(_,"topkImpl",(function(){return lI})),n.d(_,"whereImpl",(function(){return nk}));var b={};n.r(b),n.d(b,"json",(function(){return wR}));var x={};n.r(x),n.d(x,"json",(function(){return kR}));var w={};n.r(w),n.d(w,"json",(function(){return CR}));var k={};n.r(k),n.d(k,"json",(function(){return SR}));var C={};n.r(C),n.d(C,"json",(function(){return IR}));var S={};n.r(S),n.d(S,"json",(function(){return DR}));var I={};n.r(I),n.d(I,"json",(function(){return AR}));var D={};n.r(D),n.d(D,"json",(function(){return TR}));var A={};n.r(A),n.d(A,"json",(function(){return ER}));var T={};n.r(T),n.d(T,"json",(function(){return RR}));var E={};n.r(E),n.d(E,"json",(function(){return OR}));var R={};n.r(R),n.d(R,"json",(function(){return MR}));var O={};n.r(O),n.d(O,"json",(function(){return NR}));var M={};n.r(M),n.d(M,"json",(function(){return PR}));var N={};n.r(N),n.d(N,"json",(function(){return FR}));var P={};n.r(P),n.d(P,"json",(function(){return LR}));var F={};function L(e){return"function"==typeof e}n.r(F),n.d(F,"maxImpl",(function(){return uO})),n.d(F,"transposeImpl",(function(){return lO}));var z=!1,B={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else z&&console.log("RxJS: Back to a better error behavior. Thank you. <3");z=e},get useDeprecatedSynchronousErrorHandling(){return z}};function W(e){setTimeout((function(){throw e}),0)}var q={closed:!0,next:function(e){},error:function(e){if(B.useDeprecatedSynchronousErrorHandling)throw e;W(e)},complete:function(){}},V=Array.isArray||function(e){return e&&"number"==typeof e.length};function U(e){return null!==e&&"object"==typeof e}var j,H,G=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),J=((H=function(){function e(t){_classCallCheck(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return _createClass(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,a=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var i=0;i<n.length;++i)n[i].remove(this);if(L(r))try{r.call(this)}catch(l){t=l instanceof G?X(l.errors):[l]}if(V(a))for(var o=-1,s=a.length;++o<s;){var u=a[o];if(U(u))try{u.unsubscribe()}catch(l){t=t||[],l instanceof G?t=t.concat(X(l.errors)):t.push(l)}}if(t)throw new G(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var a=n._parentOrParents;if(null===a)n._parentOrParents=this;else if(a instanceof e){if(a===this)return n;n._parentOrParents=[a,this]}else{if(-1!==a.indexOf(this))return n;a.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}()).EMPTY=((j=new H).closed=!0,j),H);function X(e){return e.reduce((function(e,t){return e.concat(t instanceof G?t.errors:t)}),[])}var K="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Z=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;switch(_classCallCheck(this,n),(i=t.call(this)).syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=q;break;case 1:if(!e){i.destination=q;break}if("object"==typeof e){e instanceof n?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(_assertThisInitialized(i))):(i.syncErrorThrowable=!0,i.destination=new Y(_assertThisInitialized(i),e));break}default:i.syncErrorThrowable=!0,i.destination=new Y(_assertThisInitialized(i),e,r,a)}return i}return _createClass(n,[{key:K,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,r){var a=new n(e,t,r);return a.syncErrorThrowable=!1,a}}]),n}(J),Y=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o,s;_classCallCheck(this,n),(o=t.call(this))._parentSubscriber=e;var u=_assertThisInitialized(o);return L(r)?s=r:r&&(s=r.next,a=r.error,i=r.complete,r!==q&&(L((u=Object.create(r)).unsubscribe)&&o.add(u.unsubscribe.bind(u)),u.unsubscribe=o.unsubscribe.bind(_assertThisInitialized(o)))),o._context=u,o._next=s,o._error=a,o._complete=i,o}return _createClass(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;B.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=B.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):W(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;W(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};B.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),B.useDeprecatedSynchronousErrorHandling)throw n;W(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!B.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return B.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(W(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(Z),Q="function"==typeof Symbol&&Symbol.observable||"@@observable";function $(e){return e}function ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return te(t)}function te(e){return 0===e.length?$:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var ne,re=((ne=function(){function e(t){_classCallCheck(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,a=function(e,t,n){if(e){if(e instanceof Z)return e;if(e[K])return e[K]()}return e||t||n?new Z(e,t,n):new Z(q)}(e,t,n);if(a.add(r?r.call(a,this.source):this.source||B.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),B.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){B.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,a=t.isStopped;if(n||a)return!1;e=r&&r instanceof Z?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=ae(t))((function(t,r){var a;a=n.subscribe((function(t){try{e(t)}catch(n){r(n),a&&a.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:Q,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:te(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=ae(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}()).create=function(e){return new ne(e)},ne);function ae(e){if(e||(e=B.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var ie,oe=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),se=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).subject=e,a.subscriber=r,a.closed=!1,a}return _createClass(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(J),ue=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).destination=e,r}return n}(Z),le=((ie=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _createClass(n,[{key:K,value:function(){return new ue(this)}},{key:"lift",value:function(e){var t=new ce(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new oe;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),a=0;a<n;a++)r[a].next(e)}},{key:"error",value:function(e){if(this.closed)throw new oe;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),a=0;a<n;a++)r[a].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new oe;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new oe;return _get(_getPrototypeOf(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new oe;return this.hasError?(e.error(this.thrownError),J.EMPTY):this.isStopped?(e.complete(),J.EMPTY):(this.observers.push(e),new se(this,e))}},{key:"asObservable",value:function(){var e=new re;return e.source=this,e}}]),n}(re)).create=function(e,t){return new ce(e,t)},ie),ce=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).destination=e,a.source=r,a}return _createClass(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):J.EMPTY}}]),n}(le);function he(e){return e&&"function"==typeof e.schedule}var fe=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this)).parent=e,i.outerValue=r,i.outerIndex=a,i.index=0,i}return _createClass(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(Z),de=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};var pe="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",me=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ve(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var ye=function(e){if(e&&"function"==typeof e[Q])return r=e,function(e){var t=r[Q]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(me(e))return de(e);if(ve(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,W),e};if(e&&"function"==typeof e[pe])return t=e,function(e){for(var n=t[pe]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,a=U(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(a," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.")};function ge(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new fe(e,n,r);if(!a.closed)return t instanceof re?t.subscribe(a):ye(t)(a)}var _e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"notifyNext",value:function(e,t,n,r,a){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(Z);function be(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new xe(e,t))}}var xe=function(){function e(t,n){_classCallCheck(this,e),this.project=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new we(e,this.project,this.thisArg))}}]),e}(),we=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).project=r,i.count=0,i.thisArg=a||_assertThisInitialized(i),i}return _createClass(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(Z);function ke(e,t){return new re((function(n){var r=new J,a=0;return r.add(t.schedule((function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function Ce(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[Q]}(e))return function(e,t){return new re((function(n){var r=new J;return r.add(t.schedule((function(){var a=e[Q]();r.add(a.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(ve(e))return function(e,t){return new re((function(n){var r=new J;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(me(e))return ke(e,t);if(function(e){return e&&"function"==typeof e[pe]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new re((function(n){var r,a=new J;return a.add((function(){r&&"function"==typeof r.return&&r.return()})),a.add(t.schedule((function(){r=e[pe](),a.add(t.schedule((function(){if(!n.closed){var e,t;try{var a=r.next();e=a.value,t=a.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}})))}))),a}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof re?e:new re(ye(e))}function Se(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(r){return r.pipe(Se((function(n,r){return Ce(e(n,r)).pipe(be((function(e,a){return t(n,e,r,a)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new Ie(e,n))})}var Ie=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,e),this.project=t,this.concurrent=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new De(e,this.project,this.concurrent))}}]),e}(),De=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(a=t.call(this,e)).project=r,a.concurrent=i,a.hasCompleted=!1,a.buffer=[],a.active=0,a.index=0,a}return _createClass(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=new fe(this,t,n),a=this.destination;a.add(r);var i=ge(this,e,void 0,void 0,r);i!==r&&a.add(i)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,r,a){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(_e);function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Se($,e)}function Te(e,t){return t?ke(e,t):new re(de(e))}function Ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Number.POSITIVE_INFINITY,a=null,i=t[t.length-1];return he(i)?(a=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof i&&(r=t.pop()),null===a&&1===t.length&&t[0]instanceof re?t[0]:Ae(r)(Te(t,a))}function Re(){return function(e){return e.lift(new Me(e))}}var Oe,Me=function(){function e(t){_classCallCheck(this,e),this.connectable=t}return _createClass(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new Ne(e,n),a=t.subscribe(r);return r.closed||(r.connection=n.connect()),a}}]),e}(),Ne=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).connectable=r,a}return _createClass(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(Z),Pe={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(Oe=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).source=e,a.subjectFactory=r,a._refCount=0,a._isComplete=!1,a}return _createClass(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new J).add(this.source.subscribe(new Fe(this.getSubject(),this))),e.closed&&(this._connection=null,e=J.EMPTY)),e}},{key:"refCount",value:function(){return Re()(this)}}]),n}(re).prototype)._subscribe},_isComplete:{value:Oe._isComplete,writable:!0},getSubject:{value:Oe.getSubject},connect:{value:Oe.connect},refCount:{value:Oe.refCount}},Fe=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).connectable=r,a}return _createClass(n,[{key:"_error",value:function(e){this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(ue);function Le(){return new le}function ze(){return function(e){return Re()((t=Le,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,Pe);return r.source=e,r.subjectFactory=n,r})(e));var t}}function Be(e){return{toString:e}.toString()}function We(e,t,n){return Be((function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof a)return r.apply(this,t),this;var i=_construct(a,t);return o.annotation=i,o;function o(e,t,n){for(var r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(i),e}}return n&&(a.prototype=Object.create(n.prototype)),a.prototype.ngMetadataName=e,a.annotationCls=a,a}))}var qe=We("Inject",(function(e){return{token:e}})),Ve=We("Optional"),Ue=We("Self"),je=We("SkipSelf"),He=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function Ge(e){for(var t in e)if(e[t]===Ge)return t;throw Error("Could not find renamed property on target object.")}function Je(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Xe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ke(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function Ze(e){return Ye(e,e[$e])||Ye(e,e[nt])}function Ye(e,t){return t&&t.token===e?t:null}function Qe(e){return e&&(e.hasOwnProperty(et)||e.hasOwnProperty(rt))?e[et]:null}var $e=Ge({"\u0275prov":Ge}),et=Ge({"\u0275inj":Ge}),tt=Ge({"\u0275provFallback":Ge}),nt=Ge({ngInjectableDef:Ge}),rt=Ge({ngInjectorDef:Ge});function at(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(at).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function it(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var ot=Ge({__forward_ref__:Ge});function st(e){return e.__forward_ref__=st,e.toString=function(){return at(this())},e}function ut(e){return lt(e)?e():e}function lt(e){return"function"==typeof e&&e.hasOwnProperty(ot)&&e.__forward_ref__===st}var ct,ht="undefined"!=typeof globalThis&&globalThis,ft="undefined"!=typeof window&&window,dt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,pt="undefined"!=typeof global&&global,mt=ht||pt||ft||dt,vt=Ge({"\u0275cmp":Ge}),yt=Ge({"\u0275dir":Ge}),gt=Ge({"\u0275pipe":Ge}),_t=Ge({"\u0275mod":Ge}),bt=Ge({"\u0275loc":Ge}),xt=Ge({"\u0275fac":Ge}),wt=Ge({__NG_ELEMENT_ID__:Ge}),kt=function(){function e(t,n){_classCallCheck(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Xe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),Ct=new kt("INJECTOR",-1),St={},It=/\n/gm,Dt=Ge({provide:String,useValue:Ge}),At=void 0;function Tt(e){var t=At;return At=e,t}function Et(e){var t=ct;return ct=e,t}function Rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He.Default;if(void 0===At)throw new Error("inject() must be called from an injection context");return null===At?Nt(e,void 0,t):At.get(e,t&He.Optional?null:void 0,t)}function Ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He.Default;return(ct||Rt)(ut(e),t)}var Mt=Ot;function Nt(e,t,n){var r=Ze(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&He.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND [".concat(at(e),"]"))}function Pt(e){for(var t=[],n=0;n<e.length;n++){var r=ut(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var a=void 0,i=He.Default,o=0;o<r.length;o++){var s=r[o];s instanceof Ve||"Optional"===s.ngMetadataName||s===Ve?i|=He.Optional:s instanceof je||"SkipSelf"===s.ngMetadataName||s===je?i|=He.SkipSelf:s instanceof Ue||"Self"===s.ngMetadataName||s===Ue?i|=He.Self:a=s instanceof qe||s===qe?s.token:s}t.push(Ot(a,i))}else t.push(Ot(r))}return t}var Ft=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St;if(t===St){var n=new Error("NullInjectorError: No provider for ".concat(at(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),Lt=function e(){_classCallCheck(this,e)},zt=function e(){_classCallCheck(this,e)};function Bt(e,t){e.forEach((function(e){return Array.isArray(e)?Bt(e,t):t(e)}))}function Wt(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function qt(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Vt(e,t){for(var n=[],r=0;r<e;r++)n.push(t);return n}function Ut(e,t,n){var r=Ht(e,t);return r>=0?e[1|r]=n:function(e,t,n,r){var a=e.length;if(a==t)e.push(n,r);else if(1===a)e.push(r,e[0]),e[0]=n;else{for(a--,e.push(e[a-1],e[a]);a>t;)e[a]=e[a-2],a--;e[t]=n,e[t+1]=r}}(e,r=~r,t,n),r}function jt(e,t){var n=Ht(e,t);if(n>=0)return e[1|n]}function Ht(e,t){return function(e,t,n){for(var r=0,a=e.length>>1;a!==r;){var i=r+(a-r>>1),o=e[i<<1];if(t===o)return i<<1;o>t?a=i:r=i+1}return~(a<<1)}(e,t)}var Gt=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),Jt=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),Xt={},Kt=[],Zt=0;function Yt(e){return Be((function(){var t=e.type,n=t.prototype,r={},a={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===Gt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Kt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Jt.Emulated,id:"c",styles:e.styles||Kt,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,o=e.features,s=e.pipes;return a.id+=Zt++,a.inputs=nn(e.inputs,r),a.outputs=nn(e.outputs),o&&o.forEach((function(e){return e(a)})),a.directiveDefs=i?function(){return("function"==typeof i?i():i).map(Qt)}:null,a.pipeDefs=s?function(){return("function"==typeof s?s():s).map($t)}:null,a}))}function Qt(e){return an(e)||function(e){return e[yt]||null}(e)}function $t(e){return function(e){return e[gt]||null}(e)}var en={};function tn(e){var t={type:e.type,bootstrap:e.bootstrap||Kt,declarations:e.declarations||Kt,imports:e.imports||Kt,exports:e.exports||Kt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&Be((function(){en[e.id]=e.type})),t}function nn(e,t){if(null==e)return Xt;var n={};for(var r in e)if(e.hasOwnProperty(r)){var a=e[r],i=a;Array.isArray(a)&&(i=a[1],a=a[0]),n[a]=r,t&&(t[a]=i)}return n}var rn=Yt;function an(e){return e[vt]||null}function on(e,t){return e.hasOwnProperty(xt)?e[xt]:null}function sn(e,t){var n=e[_t]||null;if(!n&&!0===t)throw new Error("Type ".concat(at(e)," does not have '\u0275mod' property."));return n}function un(e){return Array.isArray(e)&&"object"==typeof e[1]}function ln(e){return Array.isArray(e)&&!0===e[1]}function cn(e){return 0!=(8&e.flags)}function hn(e){return 2==(2&e.flags)}function fn(e){return 1==(1&e.flags)}function dn(e){return null!==e.template}function pn(e){return 0!=(512&e[2])}var mn=void 0;function vn(){return void 0!==mn?mn:"undefined"!=typeof document?document:void 0}function yn(e){return!!e.listen}var gn={createRenderer:function(e,t){return vn()}};function _n(e){for(;Array.isArray(e);)e=e[0];return e}function bn(e,t){return _n(t[e+19])}function xn(e,t){return _n(t[e.index])}function wn(e,t){return e.data[t+19]}function kn(e,t){var n=t[e];return un(n)?n:n[0]}function Cn(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Sn(e){return 4==(4&e[2])}function In(e){return 128==(128&e[2])}function Dn(e,t){return null===e||null==t?null:e[t]}function An(e){e[18]=0}var Tn={lFrame:Kn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function En(){return Tn.bindingsEnabled}function Rn(){return Tn.lFrame.lView}function On(){return Tn.lFrame.tView}function Mn(e){Tn.lFrame.contextLView=e}function Nn(){return Tn.lFrame.previousOrParentTNode}function Pn(e,t){Tn.lFrame.previousOrParentTNode=e,Tn.lFrame.isParent=t}function Fn(){return Tn.lFrame.isParent}function Ln(){Tn.lFrame.isParent=!1}function zn(){return Tn.checkNoChangesMode}function Bn(e){Tn.checkNoChangesMode=e}function Wn(){var e=Tn.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function qn(){return Tn.lFrame.bindingIndex++}function Vn(e){var t=Tn.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Un(e,t){var n=Tn.lFrame;n.bindingIndex=n.bindingRootIndex=e,n.currentDirectiveIndex=t}function jn(){return Tn.lFrame.currentQueryIndex}function Hn(e){Tn.lFrame.currentQueryIndex=e}function Gn(e,t){var n=Xn();Tn.lFrame=n,n.previousOrParentTNode=t,n.lView=e}function Jn(e,t){var n=Xn(),r=e[1];Tn.lFrame=n,n.previousOrParentTNode=t,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex}function Xn(){var e=Tn.lFrame,t=null===e?null:e.child;return null===t?Kn(e):t}function Kn(e){var t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function Zn(){var e=Tn.lFrame;return Tn.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}var Yn=Zn;function Qn(){var e=Zn();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function $n(){return Tn.lFrame.selectedIndex}function er(e){Tn.lFrame.selectedIndex=e}function tr(){var e=Tn.lFrame;return wn(e.tView,e.selectedIndex)}function nr(){Tn.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function rr(){Tn.lFrame.currentNamespace=null}function ar(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var a=e.data[n];a.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-n,a.afterContentInit),a.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,a.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a.afterContentChecked)),a.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-n,a.afterViewInit),a.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,a.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,a.afterViewChecked)),null!=a.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a.onDestroy)}}function ir(e,t,n){ur(e,t,3,n)}function or(e,t,n,r){(3&e[2])===n&&ur(e,t,n,r)}function sr(e,t){var n=e[2];(3&n)===t&&(n&=1023,n+=1,e[2]=n)}function ur(e,t,n,r){for(var a=null!=r?r:-1,i=0,o=void 0!==r?65535&e[18]:0;o<t.length;o++)if("number"==typeof t[o+1]){if(i=t[o],null!=r&&i>=r)break}else t[o]<0&&(e[18]+=65536),(i<a||-1==a)&&(lr(e,n,t,o),e[18]=(4294901760&e[18])+o+2),o++}function lr(e,t,n,r){var a=n[r]<0,i=n[r+1],o=e[a?-n[r]:n[r]];a?e[2]>>10<e[18]>>16&&(3&e[2])===t&&(e[2]+=1024,i.call(o)):i.call(o)}var cr=function e(t,n,r){_classCallCheck(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function hr(e,t,n){for(var r=yn(e),a=0;a<n.length;){var i=n[a];if("number"==typeof i){if(0!==i)break;a++;var o=n[a++],s=n[a++],u=n[a++];r?e.setAttribute(t,s,u,o):t.setAttributeNS(o,s,u)}else{var l=i,c=n[++a];dr(l)?r&&e.setProperty(t,l,c):r?e.setAttribute(t,l,c):t.setAttribute(l,c),a++}}return a}function fr(e){return 3===e||4===e||6===e}function dr(e){return 64===e.charCodeAt(0)}function pr(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var a=t[r];"number"==typeof a?n=a:0===n||mr(e,n,a,null,-1===n||2===n?t[++r]:null)}return e}function mr(e,t,n,r,a){var i=0,o=e.length;if(-1===t)o=-1;else for(;i<e.length;){var s=e[i++];if("number"==typeof s){if(s===t){o=-1;break}if(s>t){o=i-1;break}}}for(;i<e.length;){var u=e[i];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==a&&(e[i+1]=a));if(r===e[i+1])return void(e[i+2]=a)}i++,null!==r&&i++,null!==a&&i++}-1!==o&&(e.splice(o,0,t),i=o+1),e.splice(i++,0,n),null!==r&&e.splice(i++,0,r),null!==a&&e.splice(i++,0,a)}function vr(e){return-1!==e}function yr(e){return 32767&e}function gr(e){return e>>16}function _r(e,t){for(var n=gr(e),r=t;n>0;)r=r[15],n--;return r}function br(e){return"string"==typeof e?e:null==e?"":""+e}function xr(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():br(e)}var wr=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(mt);function kr(e){return{name:"window",target:e.ownerDocument.defaultView}}function Cr(e){return e instanceof Function?e():e}var Sr=!0;function Ir(e){var t=Sr;return Sr=e,t}var Dr=0;function Ar(e,t){var n=Er(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Tr(r.data,e),Tr(t,null),Tr(r.blueprint,null));var a=Rr(e,t),i=e.injectorIndex;if(vr(a))for(var o=yr(a),s=_r(a,t),u=s[1].data,l=0;l<8;l++)t[i+l]=s[o+l]|u[o+l];return t[i+8]=a,i}function Tr(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Er(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function Rr(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=t[6],r=1;n&&-1===n.injectorIndex;)n=(t=t[15])?t[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Or(e,t,n){!function(e,t,n){var r="string"!=typeof n?n[wt]:n.charCodeAt(0)||0;null==r&&(r=n[wt]=Dr++);var a=255&r,i=1<<a,o=64&a,s=32&a,u=t.data;128&a?o?s?u[e+7]|=i:u[e+6]|=i:s?u[e+5]|=i:u[e+4]|=i:o?s?u[e+3]|=i:u[e+2]|=i:s?u[e+1]|=i:u[e]|=i}(e,t,n)}function Mr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:He.Default,a=arguments.length>4?arguments[4]:void 0;if(null!==e){var i=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e[wt];return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof i){Gn(t,e);try{var o=i();if(null!=o||r&He.Optional)return o;throw new Error("No provider for ".concat(xr(n),"!"))}finally{Yn()}}else if("number"==typeof i){if(-1===i)return new Wr(e,t);var s=null,u=Er(e,t),l=-1,c=r&He.Host?t[16][6]:null;for((-1===u||r&He.SkipSelf)&&(l=-1===u?Rr(e,t):t[u+8],Br(r,!1)?(s=t[1],u=yr(l),t=_r(l,t)):u=-1);-1!==u;){l=t[u+8];var h=t[1];if(zr(i,u,h.data)){var f=Pr(u,t,n,s,r,c);if(f!==Nr)return f}Br(r,t[1].data[u+8]===c)&&zr(i,u,t)?(s=h,u=yr(l),t=_r(l,t)):u=-1}}}if(r&He.Optional&&void 0===a&&(a=null),0==(r&(He.Self|He.Host))){var d=t[9],p=Et(void 0);try{return d?d.get(n,a,r&He.Optional):Nt(n,a,r&He.Optional)}finally{Et(p)}}if(r&He.Optional)return a;throw new Error("NodeInjector: NOT_FOUND [".concat(xr(n),"]"))}var Nr={};function Pr(e,t,n,r,a,i){var o=t[1],s=o.data[e+8],u=Fr(s,o,n,null==r?hn(s)&&Sr:r!=o&&3===s.type,a&He.Host&&i===s);return null!==u?Lr(t,o,u,s):Nr}function Fr(e,t,n,r,a){for(var i=e.providerIndexes,o=t.data,s=65535&i,u=e.directiveStart,l=i>>16,c=a?s+l:e.directiveEnd,h=r?s:s+l;h<c;h++){var f=o[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(a){var d=o[u];if(d&&dn(d)&&d.type===n)return u}return null}function Lr(e,t,n,r){var a=e[n],i=t.data;if(a instanceof cr){var o=a;if(o.resolving)throw new Error("Circular dep for ".concat(xr(i[n])));var s,u=Ir(o.canSeeViewProviders);o.resolving=!0,o.injectImpl&&(s=Et(o.injectImpl)),Gn(e,r);try{a=e[n]=o.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.onChanges,a=t.onInit,i=t.doCheck;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)),a&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-e,a),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,i))}(n,i[n],t)}finally{o.injectImpl&&Et(s),Ir(u),o.resolving=!1,Yn()}}return a}function zr(e,t,n){var r=64&e,a=32&e;return!!((128&e?r?a?n[t+7]:n[t+6]:a?n[t+5]:n[t+4]:r?a?n[t+3]:n[t+2]:a?n[t+1]:n[t])&1<<e)}function Br(e,t){return!(e&He.Self||e&He.Host&&t)}var Wr=function(){function e(t,n){_classCallCheck(this,e),this._tNode=t,this._lView=n}return _createClass(e,[{key:"get",value:function(e,t){return Mr(this._tNode,this._lView,e,void 0,t)}}]),e}();function qr(e){return Be((function(){var t=Object.getPrototypeOf(e.prototype).constructor,n=t[xt]||function e(t){var n=t;if(lt(t))return function(){var t=e(ut(n));return t?t():null};var r=on(n);if(null===r){var a=Qe(n);r=a&&a.factory}return r||null}(t);return null!==n?n:function(e){return new e}}))}function Vr(e){return e.ngDebugContext}function Ur(e){return e.ngOriginalError}function jr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var Hr=function(){function e(){_classCallCheck(this,e),this._console=console}return _createClass(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||jr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?Vr(e)?Vr(e):this._findContext(Ur(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=Ur(e);t&&Ur(t);)t=Ur(t);return t}}]),e}(),Gr=function(){function e(t){_classCallCheck(this,e),this.changingThisBreaksApplicationSecurity=t}return _createClass(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see http://g.co/ng/security#xss)"}}]),e}(),Jr=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Gr),Xr=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Gr),Kr=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Gr),Zr=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Gr),Yr=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Gr);function Qr(e){return e instanceof Gr?e.changingThisBreaksApplicationSecurity:e}function $r(e,t){var n=ea(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see http://g.co/ng/security#xss)"))}return n===t}function ea(e){return e instanceof Gr&&e.getTypeName()||null}var ta=!0,na=!1;function ra(){return na=!0,ta}var aa=function(){function e(t){_classCallCheck(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert");var n=this.inertDocument.body;if(null==n){var r=this.inertDocument.createElement("html");this.inertDocument.appendChild(r),n=this.inertDocument.createElement("body"),r.appendChild(n)}n.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!n.querySelector||n.querySelector("svg")?(n.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=n.querySelector&&n.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return _createClass(e,[{key:"getInertBodyElement_XHR",value:function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(r){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);var n=t.response.body;return n.removeChild(n.firstChild),n}},{key:"getInertBodyElement_DOMParser",value:function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(n){return null}}},{key:"getInertBodyElement_InertDocument",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=e,t;var n=this.inertDocument.createElement("body");return n.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var a=e.firstChild;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}]),e}(),ia=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,oa=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function sa(e){return(e=String(e)).match(ia)||e.match(oa)?e:(ra()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(e," (see http://g.co/ng/security#xss)")),"unsafe:"+e)}function ua(e){var t,n={},r=_createForOfIteratorHelper(e.split(","));try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(a){r.e(a)}finally{r.f()}return n}function la(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];for(var s in o)o.hasOwnProperty(s)&&(e[s]=!0)}return e}var ca,ha=ua("area,br,col,hr,img,wbr"),fa=ua("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),da=ua("rp,rt"),pa=la(da,fa),ma=la(ha,la(fa,ua("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),la(da,ua("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pa),va=ua("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ya=ua("srcset"),ga=la(va,ya,ua("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ua("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_a=ua("script,style,template"),ba=function(){function e(){_classCallCheck(this,e),this.sanitizedSomething=!1,this.buf=[]}return _createClass(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!ma.hasOwnProperty(t))return this.sanitizedSomething=!0,!_a.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,a=0;a<r.length;a++){var i=r.item(a),o=i.name,s=o.toLowerCase();if(ga.hasOwnProperty(s)){var u=i.value;va[s]&&(u=sa(u)),ya[s]&&(n=u,u=(n=String(n)).split(",").map((function(e){return sa(e.trim())})).join(", ")),this.buf.push(" ",o,'="',ka(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();ma.hasOwnProperty(t)&&!ha.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(ka(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),xa=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wa=/([^\#-~ |!])/g;function ka(e){return e.replace(/&/g,"&amp;").replace(xa,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(wa,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ca(e,t){var n=null;try{ca=ca||new aa(e);var r=t?String(t):"";n=ca.getInertBodyElement(r);var a=5,i=r;do{if(0===a)throw new Error("Failed to sanitize html because the input is unstable");a--,r=i,i=n.innerHTML,n=ca.getInertBodyElement(r)}while(r!==i);var o=new ba,s=o.sanitizeChildren(Sa(n)||n);return ra()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=Sa(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function Sa(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Ia=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}(),Da=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:attr|calc|var))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Aa=/^url\(([^)]+)\)$/;function Ta(e){if(!(e=String(e).trim()))return"";var t=e.match(Aa);return t&&sa(t[1])===t[1]||e.match(Da)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var a=e.charAt(r);"'"===a&&n?t=!t:'"'===a&&t&&(n=!n)}return t&&n}(e)?e:(ra()&&console.warn("WARNING: sanitizing unsafe style value ".concat(e," (see http://g.co/ng/security#xss).")),"unsafe")}function Ea(e){var t=Ma();return t?t.sanitize(Ia.HTML,e)||"":$r(e,"HTML")?Qr(e):Ca(vn(),br(e))}function Ra(e){var t=Ma();return t?t.sanitize(Ia.STYLE,e)||"":$r(e,"Style")?Qr(e):Ta(br(e))}var Oa=function(e,t,n){if(void 0===t&&void 0===n)return Ra(e);var r=!0;return 1&(n=n||3)&&(r=function(e){return"background-image"===e||"backgroundImage"===e||"background"===e||"border-image"===e||"borderImage"===e||"border-image-source"===e||"borderImageSource"===e||"filter"===e||"list-style"===e||"listStyle"===e||"list-style-image"===e||"listStyleImage"===e||"clip-path"===e||"clipPath"===e}(e)),2&n?r?Ra(t):Qr(t):r};function Ma(){var e=Rn();return e&&e[12]}function Na(e,t){e.__ngContext__=t}function Pa(e){throw new Error("Multiple components match node with tagname ".concat(e.tagName))}function Fa(){throw new Error("Cannot mix multi providers and regular providers")}function La(e,t,n){for(var r=e.length;;){var a=e.indexOf(t,n);if(-1===a)return a;if(0===a||e.charCodeAt(a-1)<=32){var i=t.length;if(a+i===r||e.charCodeAt(a+i)<=32)return a}n=a+1}}function za(e,t,n){for(var r=0;r<e.length;){var a=e[r++];if(n&&"class"===a){if(-1!==La((a=e[r]).toLowerCase(),t,0))return!0}else if(1===a){for(;r<e.length&&"string"==typeof(a=e[r++]);)if(a.toLowerCase()===t)return!0;return!1}}return!1}function Ba(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function Wa(e,t,n){for(var r=4,a=e.attrs||[],i=function(e){for(var t=0;t<e.length;t++)if(fr(e[t]))return t;return e.length}(a),o=!1,s=0;s<t.length;s++){var u=t[s];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Ba(e,u,n)||""===u&&1===t.length){if(qa(r))return!1;o=!0}}else{var l=8&r?u:t[++s];if(8&r&&null!==e.attrs){if(!za(e.attrs,l,n)){if(qa(r))return!1;o=!0}continue}var c=Va(8&r?"class":u,a,0==e.type&&"ng-template"!==e.tagName,n);if(-1===c){if(qa(r))return!1;o=!0;continue}if(""!==l){var h;h=c>i?"":a[c+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==La(f,l,0)||2&r&&l!==h){if(qa(r))return!1;o=!0}}}}else{if(!o&&!qa(r)&&!qa(u))return!1;if(o&&qa(u))continue;o=!1,r=u|1&r}}return qa(r)||o}function qa(e){return 0==(1&e)}function Va(e,t,n,r){if(null===t)return-1;var a=0;if(r||!n){for(var i=!1;a<t.length;){var o=t[a];if(o===e)return a;if(3===o||6===o)i=!0;else{if(1===o||2===o){for(var s=t[++a];"string"==typeof s;)s=t[++a];continue}if(4===o)break;if(0===o){a+=4;continue}}a+=i?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){if(e[n]===t)return n;n++}return-1}(t,e)}function Ua(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(Wa(e,t[r],n))return!0;return!1}function ja(e,t){e:for(var n=0;n<t.length;n++){var r=t[n];if(e.length===r.length){for(var a=0;a<e.length;a++)if(e[a]!==r[a])continue e;return!0}}return!1}function Ha(e,t){return e?":not("+t.trim()+")":t}function Ga(e){for(var t=e[0],n=1,r=2,a="",i=!1;n<e.length;){var o=e[n];if("string"==typeof o)if(2&r){var s=e[++n];a+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?a+="."+o:4&r&&(a+=" "+o);else""===a||qa(o)||(t+=Ha(i,a),a=""),r=o,i=i||!qa(r);n++}return""!==a&&(t+=Ha(i,a)),t}var Ja={};function Xa(e){var t=e[3];return ln(t)?t[3]:t}function Ka(e){Za(On(),Rn(),$n()+e,zn())}function Za(e,t,n,r){if(!r)if(3==(3&t[2])){var a=e.preOrderCheckHooks;null!==a&&ir(t,a,n)}else{var i=e.preOrderHooks;null!==i&&or(t,i,0,n)}er(n)}function Ya(e,t){return e<<17|t<<2}function Qa(e){return e>>17&32767}function $a(e){return 2|e}function ei(e){return(131068&e)>>2}function ti(e,t){return-131069&e|t<<2}function ni(e){return 1|e}function ri(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1];if(-1!==i){var o=e.data[i];Hn(a),o.contentQueries(2,t[i],i)}}}function ai(e,t,n){return yn(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function ii(e,t,n,r,a,i,o,s,u,l){var c=t.blueprint.slice();return c[0]=a,c[2]=140|r,An(c),c[3]=c[15]=e,c[8]=n,c[10]=o||e&&e[10],c[11]=s||e&&e[11],c[12]=u||e&&e[12]||null,c[9]=l||e&&e[9]||null,c[6]=i,c[16]=2==t.type?e[16]:c,c}function oi(e,t,n,r,a,i){var o=n+19,s=e.data[o]||function(e,t,n,r,a,i){var o=Nn(),s=Fn(),u=s?o:o&&o.parent,l=e.data[n]=vi(0,u&&u!==t?u:null,r,n,a,i);return null===e.firstChild&&(e.firstChild=l),o&&(!s||null!=o.child||null===l.parent&&2!==o.type?s||(o.next=l):o.child=l),l}(e,t,o,r,a,i);return Pn(s,!0),s}function si(e,t,n){Jn(t,t[6]);try{var r=e.viewQuery;null!==r&&Bi(1,r,n);var a=e.template;null!==a&&ci(e,t,a,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&ri(e,t),e.staticViewQueries&&Bi(2,e.viewQuery,n);var i=e.components;null!==i&&function(e,t){for(var n=0;n<t.length;n++)Ni(e,t[n])}(t,i)}finally{t[2]&=-5,Qn()}}function ui(e,t,n,r){var a=t[2];if(256!=(256&a)){Jn(t,t[6]);var i=zn();try{An(t),Tn.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&ci(e,t,n,2,r);var o=3==(3&a);if(!i)if(o){var s=e.preOrderCheckHooks;null!==s&&ir(t,s,null)}else{var u=e.preOrderHooks;null!==u&&or(t,u,0,null),sr(t,0)}if(function(e){for(var t=e[13];null!==t;){var n=void 0;if(ln(t)&&(n=t[2])>>1==-1){for(var r=9;r<t.length;r++){var a=t[r],i=a[1];In(a)&&ui(i,a,i.template,a[8])}0!=(1&n)&&Oi(t,e[16])}t=t[4]}}(t),null!==e.contentQueries&&ri(e,t),!i)if(o){var l=e.contentCheckHooks;null!==l&&ir(t,l)}else{var c=e.contentHooks;null!==c&&or(t,c,1),sr(t,1)}!function(e,t){try{var n=e.expandoInstructions;if(null!==n)for(var r=e.expandoStartIndex,a=-1,i=0;i<n.length;i++){var o=n[i];"number"==typeof o?o<=0?(er(0-o),a=r+=9+n[++i]):r+=o:(null!==o&&(Un(r,a),o(2,t[a])),a++)}}finally{er(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)Mi(e,t[n])}(t,h);var f=e.viewQuery;if(null!==f&&Bi(2,f,r),!i)if(o){var d=e.viewCheckHooks;null!==d&&ir(t,d)}else{var p=e.viewHooks;null!==p&&or(t,p,2),sr(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),i||(t[2]&=-73)}finally{Qn()}}}function li(e,t,n,r){var a=t[10],i=!zn(),o=Sn(t);try{i&&!o&&a.begin&&a.begin(),o&&si(e,t,r),ui(e,t,n,r)}finally{i&&!o&&a.end&&a.end()}}function ci(e,t,n,r,a){var i=$n();try{er(-1),2&r&&t.length>19&&Za(e,t,0,zn()),n(r,a)}finally{er(i)}}function hi(e,t,n){if(cn(t))for(var r=t.directiveEnd,a=t.directiveStart;a<r;a++){var i=e.data[a];i.contentQueries&&i.contentQueries(1,n[a],a)}}function fi(e,t,n){En()&&(function(e,t,n,r){var a=n.directiveStart,i=n.directiveEnd;e.firstCreatePass||Ar(n,t),Na(r,t);for(var o=n.initialInputs,s=a;s<i;s++){var u=e.data[s],l=dn(u);l&&Ai(t,n,u);var c=Lr(t,e,s,n);Na(c,t),null!==o&&Ti(0,s-a,c,u,0,o),l&&(kn(n.index,t)[8]=c)}}(e,t,n,xn(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,a=n.directiveEnd,i=e.expandoInstructions,o=e.firstCreatePass,s=n.index-19;try{er(s);for(var u=r;u<a;u++){var l=e.data[u],c=t[u];null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs?wi(l,c):o&&i.push(null)}}finally{er(-1)}}(e,t,n))}function di(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xn,r=t.localNames;if(null!==r)for(var a=t.index+1,i=0;i<r.length;i+=2){var o=r[i+1],s=-1===o?n(t,e):e[o];e[a++]=s}}function pi(e){return e.tView||(e.tView=mi(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts))}function mi(e,t,n,r,a,i,o,s,u,l){var c=19+r,h=c+a,f=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:Ja);return n}(c,h);return f[1]={type:e,id:t,blueprint:f,template:n,queries:null,viewQuery:s,node:null,data:f.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:l}}function vi(e,t,n,r,a,i){return{type:n,index:r,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:a,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function yi(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,a):n[r]=[t,a]}return n}function gi(e,t,n,r,a,i,o,s){var u,l,c=xn(t,n),h=t.inputs;!s&&null!=h&&(u=h[r])?(Hi(e,n,u,r,a),hn(t)&&function(e,t){var n=kn(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3===t.type&&(r="class"===(l=r)?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l,a=null!=o?o(a,t.tagName||"",r):a,yn(i)?i.setProperty(c,r,a):dr(r)||(c.setProperty?c.setProperty(r,a):c[r]=a))}function _i(e,t,n,r){var a=!1;if(En()){var i=function(e,t,n){var r=e.directiveRegistry,a=null;if(r)for(var i=0;i<r.length;i++){var o=r[i];Ua(n,o.selectors,!1)&&(a||(a=[]),Or(Ar(n,t),e,o.type),dn(o)?(2&n.flags&&Pa(n),Ci(e,n),a.unshift(o)):a.push(o))}return a}(e,t,n),o=null===r?null:{"":-1};if(null!==i){var s=0;a=!0,Ii(n,e.data.length,i.length);for(var u=0;u<i.length;u++){var l=i[u];l.providersResolver&&l.providersResolver(l)}ki(e,n,i.length);for(var c=!1,h=!1,f=0;f<i.length;f++){var d=i[f];n.mergedAttrs=pr(n.mergedAttrs,d.hostAttrs),Di(e,t,d),Si(e.data.length-1,d,o),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128),!c&&(d.onChanges||d.onInit||d.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-19),c=!0),h||!d.onChanges&&!d.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-19),h=!0),bi(e,d),s+=d.hostVars}!function(e,t){for(var n=t.directiveEnd,r=e.data,a=t.attrs,i=[],o=null,s=null,u=t.directiveStart;u<n;u++){var l=r[u],c=l.inputs;i.push(null!==a?Ei(c,a):null),o=yi(c,u,o),s=yi(l.outputs,u,s)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=i,t.inputs=o,t.outputs=s}(e,n),xi(e,t,s)}o&&function(e,t,n){if(t)for(var r=e.localNames=[],a=0;a<t.length;a+=2){var i=n[t[a+1]];if(null==i)throw new Error("Export of name '".concat(t[a+1],"' not found!"));r.push(t[a],i)}}(n,r,o)}return n.mergedAttrs=pr(n.mergedAttrs,n.attrs),a}function bi(e,t){var n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function xi(e,t,n){for(var r=0;r<n;r++)t.push(Ja),e.blueprint.push(Ja),e.data.push(null)}function wi(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ki(e,t,n){var r=19-t.index,a=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,a,n)}function Ci(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Si(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;dn(t)&&(n[""]=e)}}function Ii(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Di(e,t,n){e.data.push(n);var r=n.factory||(n.factory=on(n.type)),a=new cr(r,dn(n),null);e.blueprint.push(a),t.push(a)}function Ai(e,t,n){var r=xn(t,e),a=pi(n),i=e[10],o=Pi(e,ii(e,a,null,n.onPush?64:16,r,t,i,i.createRenderer(r,n)));e[t.index]=o}function Ti(e,t,n,r,a,i){var o=i[t];if(null!==o)for(var s=r.setInput,u=0;u<o.length;){var l=o[u++],c=o[u++],h=o[u++];null!==s?r.setInput(n,h,l,c):n[c]=h}}function Ei(e,t){for(var n=null,r=0;r<t.length;){var a=t[r];if(0!==a)if(5!==a){if("number"==typeof a)break;e.hasOwnProperty(a)&&(null===n&&(n=[]),n.push(a,e[a],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Ri(e,t,n,r){return new Array(e,!0,-2,t,null,null,r,n,null)}function Oi(e,t){for(var n=e[5],r=0;r<n.length;r++){var a=n[r],i=a[3][3][16];if(i!==t&&0==(16&i[2])){var o=a[1];ui(o,a,o.template,a[8])}}}function Mi(e,t){var n=kn(t,e);if(In(n)&&80&n[2]){var r=n[1];ui(r,n,r.template,n[8])}}function Ni(e,t){var n=kn(t,e),r=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),si(r,n,n[8])}function Pi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Fi(e){for(;e;){e[2]|=64;var t=Xa(e);if(pn(e)&&!t)return e;e=t}return null}function Li(e,t,n){var r=t[10];r.begin&&r.begin();try{ui(e,t,e.template,n)}catch(a){throw ji(t,a),a}finally{r.end&&r.end()}}function zi(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=Cn(n),a=r[1];li(a,r,a.template,n)}}(e[8])}function Bi(e,t,n){Hn(0),t(e,n)}var Wi=Promise.resolve(null);function qi(e){return e[7]||(e[7]=[])}function Vi(e){return e.cleanup||(e.cleanup=[])}function Ui(e,t){return function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(t[e.index])[11]}function ji(e,t){var n=e[9],r=n?n.get(Hr,null):null;r&&r.handleError(t)}function Hi(e,t,n,r,a){for(var i=0;i<n.length;){var o=n[i++],s=n[i++],u=t[o],l=e.data[o];null!==l.setInput?l.setInput(u,a,r,s):u[s]=a}}function Gi(e,t,n){var r=bn(t,e),a=e[11];yn(a)?a.setValue(r,n):r.textContent=n}function Ji(e,t){var n=t[3];return-1===e.index?ln(n)?n:null:n}function Xi(e,t){var n=Ji(e,t);return n?oo(t[11],n[7]):null}function Ki(e,t,n,r,a){if(null!=r){var i,o=!1;ln(r)?i=r:un(r)&&(o=!0,r=r[0]);var s=_n(r);0===e&&null!==n?null==a?ao(t,n,s):ro(t,n,s,a||null):1===e&&null!==n?ro(t,n,s,a||null):2===e?function(e,t,n){var r=oo(e,t);r&&function(e,t,n,r){yn(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,s,o):3===e&&t.destroyNode(s),null!=i&&function(e,t,n,r,a){var i=n[7];i!==_n(n)&&Ki(t,e,r,i,a);for(var o=9;o<n.length;o++){var s=n[o];ho(s[1],s,e,t,r,i)}}(t,e,i,n,a)}}function Zi(e,t,n,r){var a=Xi(e.node,t);a&&ho(e,t,t[11],n?1:2,a,r)}function Yi(e,t){var n=e[5],r=n.indexOf(t);n.splice(r,1)}function Qi(e,t){if(!(e.length<=9)){var n=9+t,r=e[n];if(r){var a=r[17];null!==a&&a!==e&&Yi(a,r),t>0&&(e[n-1][4]=r[4]);var i=qt(e,9+t);Zi(r[1],r,!1,null);var o=i[5];null!==o&&o.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function $i(e,t){if(!(256&t[2])){var n=t[11];yn(n)&&n.destroyNode&&ho(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return to(e[1],e);for(;t;){var n=null;if(un(t))n=t[13];else{var r=t[9];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)un(t)&&to(t[1],t),t=eo(t,e);null===t&&(t=e),un(t)&&to(t[1],t),n=t&&t[4]}t=n}}(t)}}function eo(e,t){var n;return un(e)&&(n=e[6])&&2===n.type?Ji(n,e):e[3]===t?null:e[3]}function to(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var a=t[n[r]];a instanceof cr||n[r+1].call(a)}}(e,t),function(e,t){var n=e.cleanup;if(null!==n){for(var r=t[7],a=0;a<n.length-1;a+=2)if("string"==typeof n[a]){var i=n[a+1],o="function"==typeof i?i(t):_n(t[i]),s=r[n[a+2]],u=n[a+3];"boolean"==typeof u?o.removeEventListener(n[a],s,u):u>=0?r[u]():r[-u].unsubscribe(),a+=2}else n[a].call(r[n[a+1]]);t[7]=null}}(e,t);var n=t[6];n&&3===n.type&&yn(t[11])&&t[11].destroy();var r=t[17];if(null!==r&&ln(t[3])){r!==t[3]&&Yi(r,t);var a=t[5];null!==a&&a.detachView(e)}}}function no(e,t,n){for(var r=t.parent;null!=r&&(4===r.type||5===r.type);)r=(t=r).parent;if(null==r){var a=n[6];return 2===a.type?Xi(a,n):n[0]}if(t&&5===t.type&&4&t.flags)return xn(t,n).parentNode;if(2&r.flags){var i=e.data,o=i[i[r.index].directiveStart].encapsulation;if(o!==Jt.ShadowDom&&o!==Jt.Native)return null}return xn(r,n)}function ro(e,t,n,r){yn(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function ao(e,t,n){yn(e)?e.appendChild(t,n):t.appendChild(n)}function io(e,t,n,r){null!==r?ro(e,t,n,r):ao(e,t,n)}function oo(e,t){return yn(e)?e.parentNode(t):t.parentNode}function so(e,t){if(2===e.type){var n=Ji(e,t);return null===n?null:lo(n.indexOf(t,9)-9,n)}return 4===e.type||5===e.type?xn(e,t):null}function uo(e,t,n,r){var a=no(e,r,t);if(null!=a){var i=t[11],o=so(r.parent||t[6],t);if(Array.isArray(n))for(var s=0;s<n.length;s++)io(i,a,n[s],o);else io(i,a,n,o)}}function lo(e,t){var n=9+e+1;if(n<t.length){var r=t[n],a=r[1].firstChild;if(null!==a)return function e(t,n){if(null!==n){var r=n.type;if(3===r)return xn(n,t);if(0===r)return lo(-1,t[n.index]);if(4===r||5===r){var a=n.child;if(null!==a)return e(t,a);var i=t[n.index];return ln(i)?lo(-1,i):_n(i)}var o=t[16],s=o[6],u=Xa(o),l=s.projection[n.projection];return null!=l?e(u,l):e(t,n.next)}return null}(r,a)}return t[7]}function co(e,t,n,r,a,i,o){for(;null!=n;){var s=r[n.index],u=n.type;o&&0===t&&(s&&Na(_n(s),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(co(e,t,n.child,r,a,i,!1),Ki(t,e,a,s,i)):1===u?fo(e,t,r,n,a,i):Ki(t,e,a,s,i)),n=o?n.projectionNext:n.next}}function ho(e,t,n,r,a,i){co(n,r,e.node.child,t,a,i,!1)}function fo(e,t,n,r,a,i){var o=n[16],s=o[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)Ki(t,e,a,s[u],i);else co(e,t,s,o[3],a,i,!0)}function po(e,t,n){yn(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function mo(e,t,n){yn(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}var vo,yo,go,_o=function(){function e(t,n){_classCallCheck(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}return _createClass(e,[{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}$i(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){var t,n,r;t=this._lView[1],r=e,qi(n=this._lView).push(r),t.firstCreatePass&&Vi(t).push(n[7].length-1,null)}},{key:"markForCheck",value:function(){Fi(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Li(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){Bn(!0);try{Li(e,t,n)}finally{Bn(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,ho(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}},{key:"rootNodes",get:function(){var e=this._lView;return null==e[0]?function e(t,n,r,a){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var o=n[r.index];if(null!==o&&a.push(_n(o)),ln(o))for(var s=9;s<o.length;s++){var u=o[s],l=u[1].firstChild;null!==l&&e(u[1],u,l,a)}var c=r.type;if(4===c||5===c)e(t,n,r.child,a);else if(1===c){var h=n[16],f=h[6],d=Xa(h),p=f.projection[r.projection];null!==p&&null!==d&&e(d[1],d,p,a,!0)}r=i?r.projectionNext:r.next}return a}(e[1],e,e[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}}]),e}(),bo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e))._view=e,r}return _createClass(n,[{key:"detectChanges",value:function(){zi(this._view)}},{key:"checkNoChanges",value:function(){!function(e){Bn(!0);try{zi(e)}finally{Bn(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(_o);function xo(e,t,n){return vo||(vo=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(e)),new vo(xn(t,n))}function wo(e,t,n,r){return yo||(yo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this))._declarationView=e,i._declarationTContainer=r,i.elementRef=a,i}return _createClass(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=ii(this._declarationView,t,e,16,null,t.node);n[17]=this._declarationView[this._declarationTContainer.index];var r=this._declarationView[5];null!==r&&(n[5]=r.createEmbeddedView(t)),si(t,n,e);var a=new _o(n);return a._tViewNode=n[6],a}}]),n}(e)),0===n.type?new yo(r,n,xo(t,n,r)):null}function ko(e,t,n,r){var a;go||(go=function(e){_inherits(r,e);var n=_createSuper(r);function r(e,t,a){var i;return _classCallCheck(this,r),(i=n.call(this))._lContainer=e,i._hostTNode=t,i._hostView=a,i}return _createClass(r,[{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,a){var i=n||this.parentInjector;if(!a&&null==e.ngModule&&i){var o=i.get(Lt,null);o&&(a=o)}var s=e.create(i,r,void 0,a);return this.insert(s.hostView,t),s}},{key:"insert",value:function(e,t){var n=e._lView,r=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),ln(n[3])){var a=this.indexOf(e);if(-1!==a)this.detach(a);else{var i=n[3],o=new go(i,i[6],i[3]);o.detach(o.indexOf(e))}}var s=this._adjustIndex(t);return function(e,t,n,r){var a=9+r,i=n.length;r>0&&(n[a-1][4]=t),r<i-9?(t[4]=n[a],Wt(n,9+r,t)):(n.push(t),t[4]=null),t[3]=n;var o=t[17];null!==o&&n!==o&&function(e,t){var n=e[5],r=t[3][3][16];16!=(16&r[2])&&t[16]!==r&&(e[2]|=1),null===n?e[5]=[t]:n.push(t)}(o,t);var s=t[5];null!==s&&s.insertView(e),t[2]|=128}(r,n,this._lContainer,s),Zi(r,n,!0,lo(s,this._lContainer)),e.attachToViewContainerRef(this),Wt(this._lContainer[8],s,e),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=this._lContainer[8];return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1);(function(e,t){var n=Qi(e,t);n&&$i(n[1],n)})(this._lContainer,t),qt(this._lContainer[8],t)}},{key:"detach",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1),n=Qi(this._lContainer,t);return n&&null!=qt(this._lContainer[8],t)?new _o(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}},{key:"element",get:function(){return xo(t,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new Wr(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var e=Rr(this._hostTNode,this._hostView),t=_r(e,this._hostView),n=function(e,t,n){if(n.parent&&-1!==n.parent.injectorIndex){for(var r=n.parent.injectorIndex,a=n.parent;null!=a.parent&&r==a.parent.injectorIndex;)a=a.parent;return a}for(var i=gr(e),o=t,s=t[6];i>1;)s=(o=o[15])[6],i--;return s}(e,this._hostView,this._hostTNode);return vr(e)&&null!=n?new Wr(n,t):new Wr(null,this._hostView)}},{key:"length",get:function(){return this._lContainer.length-9}}]),r}(e));var i=r[n.index];if(ln(i))(function(e,t){e[2]=-2})(a=i);else{var o;if(4===n.type)o=_n(i);else if(o=r[11].createComment(""),pn(r)){var s=r[11],u=xn(n,r);ro(s,oo(s,u),o,function(e,t){return yn(e)?e.nextSibling(t):t.nextSibling}(s,u))}else uo(r[1],r,o,n);r[n.index]=a=Ri(i,r,o,n),Pi(r,a)}return new go(a,n,r)}var Co=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return So()},e}(),So=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t,n){if(!n&&hn(e)){var r=kn(e.index,t);return new _o(r,r)}return 3===e.type||0===e.type||4===e.type||5===e.type?new _o(t[16],t):null}(Nn(),Rn(),e)},Io=new kt("Set Injector scope."),Do={},Ao={},To=[],Eo=void 0;function Ro(){return void 0===Eo&&(Eo=new Ft),Eo}function Oo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Mo(e,n,t||Ro(),r)}var Mo=function(){function e(t,n,r){var a=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];n&&Bt(n,(function(e){return a.processProvider(e,t,n)})),Bt([t],(function(e){return a.processInjectorType(e,[],o)})),this.records.set(Ct,Fo(void 0,this));var s=this.records.get(Io);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof t?null:at(t))}return _createClass(e,[{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(e){return e.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He.Default;this.assertNotDestroyed();var r,a=Tt(this);try{if(!(n&He.SkipSelf)){var i=this.records.get(e);if(void 0===i){var o=("function"==typeof(r=e)||"object"==typeof r&&r instanceof kt)&&Ze(e);i=o&&this.injectableDefInScope(o)?Fo(No(e),Do):null,this.records.set(e,i)}if(null!=i)return this.hydrate(e,i)}return(n&He.Self?Ro():this.parent).get(e,t=n&He.Optional&&t===St?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(at(e)),a)throw s;return function(e,t,n,r){var a=e.ngTempTokenPath;throw t.__source&&a.unshift(t.__source),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var a=at(t);if(Array.isArray(t))a=t.map(at).join(" -> ");else if("object"==typeof t){var i=[];for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];i.push(o+":"+("string"==typeof s?JSON.stringify(s):at(s)))}a="{".concat(i.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(a,"]: ").concat(e.replace(It,"\n  "))}("\n"+e.message,a,"R3InjectorError",r),e.ngTokenPath=a,e.ngTempTokenPath=null,e}(s,e,0,this.source)}throw s}finally{Tt(a)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach((function(t){return e.get(t)}))}},{key:"toString",value:function(){var e=[];return this.records.forEach((function(t,n){return e.push(at(n))})),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=ut(e)))return!1;var a=Qe(e),i=null==a&&e.ngModule||void 0,o=void 0===i?e:i,s=-1!==n.indexOf(o);if(void 0!==i&&(a=Qe(i)),null==a)return!1;if(null!=a.imports&&!s){var u;n.push(o);try{Bt(a.imports,(function(e){r.processInjectorType(e,t,n)&&(void 0===u&&(u=[]),u.push(e))}))}finally{}if(void 0!==u)for(var l=function(e){var t=u[e],n=t.ngModule,a=t.providers;Bt(a,(function(e){return r.processProvider(e,n,a||To)}))},c=0;c<u.length;c++)l(c)}this.injectorDefTypes.add(o),this.records.set(o,Fo(a.factory,Do));var h=a.providers;if(null!=h&&!s){var f=e;Bt(h,(function(e){return r.processProvider(e,f,h)}))}return void 0!==i&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r=zo(e=ut(e))?e:ut(e&&e.provide),a=function(e,t,n){return Lo(e)?Fo(void 0,e.useValue):Fo(Po(e,t,n),Do)}(e,t,n);if(zo(e)||!0!==e.multi){var i=this.records.get(r);i&&void 0!==i.multi&&Fa()}else{var o=this.records.get(r);o?void 0===o.multi&&Fa():((o=Fo(void 0,Do,!0)).factory=function(){return Pt(o.multi)},this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,a)}},{key:"hydrate",value:function(e,t){var n;return t.value===Ao?function(e){throw new Error("Cannot instantiate cyclic dependency! ".concat(e))}(at(e)):t.value===Do&&(t.value=Ao,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();function No(e){var t=Ze(e),n=null!==t?t.factory:on(e);if(null!==n)return n;var r=Qe(e);if(null!==r)return r.factory;if(e instanceof kt)throw new Error("Token ".concat(at(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=Vt(t,"?");throw new Error("Can't resolve all parameters for ".concat(at(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[$e]||e[nt]||e[tt]&&e[tt]());if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in v10. Please add @Injectable() to the "'.concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function Po(e,t,n){var r,a=void 0;if(zo(e)){var i=ut(e);return on(i)||No(i)}if(Lo(e))a=function(){return ut(e.useValue)};else if((r=e)&&r.useFactory)a=function(){return e.useFactory.apply(e,_toConsumableArray(Pt(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))a=function(){return Ot(ut(e.useExisting))};else{var o=ut(e&&(e.useClass||e.provide));if(o||function(e,t,n){var r="";throw e&&t&&(r=" - only instances of Provider and Type are allowed, got: [".concat(t.map((function(e){return e==n?"?"+n+"?":"..."})).join(", "),"]")),new Error("Invalid provider for the NgModule '".concat(at(e),"'")+r)}(t,n,e),!function(e){return!!e.deps}(e))return on(o)||No(o);a=function(){return _construct(o,_toConsumableArray(Pt(e.deps)))}}return a}function Fo(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function Lo(e){return null!==e&&"object"==typeof e&&Dt in e}function zo(e){return"function"==typeof e}var Bo=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,a=Oo(e,t,n,r);return a._resolveInjectorDefTypes(),a}({name:n},t,e,n)},Wo=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?Bo(e,t,""):Bo(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=St,e.NULL=new Ft,e.\u0275prov=Xe({token:e,providedIn:"any",factory:function(){return Ot(Ct)}}),e.__NG_ELEMENT_ID__=-1,e}(),qo=new kt("AnalyzeForEntryComponents"),Vo=new Map,Uo=new Set;function jo(e){return"string"==typeof e?e:e.text()}function Ho(e,t){for(var n=e.styles,r=e.classes,a=0,i=0;i<t.length;i++){var o=t[i];"number"==typeof o?a=o:1==a?r=it(r,o):2==a&&(n=it(n,o+": "+t[++i]+";"))}null!==n&&(e.styles=n),null!==r&&(e.classes=r)}var Go=null;function Jo(){if(!Go){var e=mt.Symbol;if(e&&e.iterator)Go=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Go=r)}}return Go}function Xo(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function Ko(e){return!!Zo(e)&&(Array.isArray(e)||!(e instanceof Map)&&Jo()in e)}function Zo(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Yo(e,t,n){return e[t]=n}function Qo(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function $o(e,t,n,r){var a=Qo(e,t,n);return Qo(e,t+1,r)||a}function es(e,t,n,r){var a=Rn();return Qo(a,qn(),t)&&(On(),function(e,t,n,r,a,i){var o=xn(e,t),s=t[11];if(null==r)yn(s)?s.removeAttribute(o,n,i):o.removeAttribute(n);else{var u=null==a?br(r):a(r,e.tagName||"",n);yn(s)?s.setAttribute(o,n,u,i):i?o.setAttributeNS(i,n,u):o.setAttribute(n,u)}}(tr(),a,e,t,n,r)),es}function ts(e,t,n,r){return Qo(e,qn(),n)?t+br(n)+r:Ja}function ns(e,t,n,r,a,i,o,s){var u=Rn(),l=On(),c=e+19,h=l.firstCreatePass?function(e,t,n,r,a,i,o,s,u){var l=t.consts,c=oi(t,n[6],e,0,o||null,Dn(l,s));_i(t,n,c,Dn(l,u)),ar(t,c);var h=c.tViews=mi(2,-1,r,a,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l),f=vi(0,null,2,-1,null,null);return f.injectorIndex=c.injectorIndex,h.node=f,null!==t.queries&&(t.queries.template(t,c),h.queries=t.queries.embeddedTView(c)),c}(e,l,u,t,n,r,a,i,o):l.data[c];Pn(h,!1);var f=u[11].createComment("");uo(l,u,f,h),Na(f,u),Pi(u,u[c]=Ri(f,u,f,h)),fn(h)&&fi(l,u,h),null!=o&&di(u,h,s)}function rs(e){return function(e,t){return e[t+19]}(Tn.lFrame.contextLView,e)}function as(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He.Default,n=Rn();return null==n?Ot(e,t):Mr(Nn(),n,ut(e),t)}function is(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,a=0;a<r;){var i=n[a];if(fr(i))break;if(0===i)a+=2;else if("number"==typeof i)for(a++;a<r&&"string"==typeof n[a];)a++;else{if(i===t)return n[a+1];a+=2}}return null}(Nn(),e)}function os(){throw new Error("invalid")}function ss(e,t,n){var r=Rn();return Qo(r,qn(),t)&&gi(On(),tr(),r,e,t,r[11],n,!1),ss}function us(e,t,n,r,a){var i=a?"class":"style";Hi(e,n,t.inputs[i],i,r)}function ls(e,t,n,r){var a=Rn(),i=On(),o=19+e,s=a[11],u=a[o]=ai(t,s,Tn.lFrame.currentNamespace),l=i.firstCreatePass?function(e,t,n,r,a,i,o){var s=t.consts,u=Dn(s,i),l=oi(t,n[6],e,3,a,u);return _i(t,n,l,Dn(s,o)),null!==l.mergedAttrs&&Ho(l,l.mergedAttrs),null!==t.queries&&t.queries.elementStart(t,l),l}(e,i,a,0,t,n,r):i.data[o];Pn(l,!0);var c=l.mergedAttrs;null!==c&&hr(s,u,c);var h=l.classes;null!==h&&mo(s,u,h);var f=l.styles;null!==f&&po(s,u,f),uo(i,a,u,l),0===Tn.lFrame.elementDepthCount&&Na(u,a),Tn.lFrame.elementDepthCount++,fn(l)&&(fi(i,a,l),hi(i,l,a)),null!==r&&di(a,l)}function cs(){var e=Nn();Fn()?Ln():Pn(e=e.parent,!1);var t=e;Tn.lFrame.elementDepthCount--;var n=On();n.firstCreatePass&&(ar(n,e),cn(e)&&n.queries.elementEnd(e)),null!==t.classes&&function(e){return 0!=(16&e.flags)}(t)&&us(n,t,Rn(),t.classes,!0),null!==t.styles&&function(e){return 0!=(32&e.flags)}(t)&&us(n,t,Rn(),t.styles,!1)}function hs(e,t,n,r){ls(e,t,n,r),cs()}function fs(e,t,n){var r=Rn(),a=On(),i=e+19,o=a.firstCreatePass?function(e,t,n,r,a){var i=t.consts,o=Dn(i,r),s=oi(t,n[6],e,4,"ng-container",o);return null!==o&&Ho(s,o),_i(t,n,s,Dn(i,a)),null!==t.queries&&t.queries.elementStart(t,s),s}(e,a,r,t,n):a.data[i];Pn(o,!0);var s=r[i]=r[11].createComment("");uo(a,r,s,o),Na(s,r),fn(o)&&(fi(a,r,o),hi(a,o,r)),null!=n&&di(r,o)}function ds(){var e=Nn(),t=On();Fn()?Ln():Pn(e=e.parent,!1),t.firstCreatePass&&(ar(t,e),cn(e)&&t.queries.elementEnd(e))}function ps(){return Rn()}function ms(e){return!!e&&"function"==typeof e.then}function vs(e){return!!e&&"function"==typeof e.subscribe}function ys(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a=Rn(),i=On(),o=Nn();return _s(i,a,a[11],o,e,t,n,r),ys}function gs(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a=Nn(),i=Rn(),o=Ui(a,i);return _s(On(),i,o,a,e,t,n,r),gs}function _s(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=fn(r),l=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),c=qi(t),h=!0;if(3===r.type){var f=xn(r,t),d=s?s(f):Xt,p=d.target||f,m=c.length,v=s?function(e){return s(_n(e[r.index])).target}:r.index;if(yn(n)){var y=null;if(!s&&u&&(y=function(e,t,n,r){var a=e.cleanup;if(null!=a)for(var i=0;i<a.length-1;i+=2){var o=a[i];if(o===n&&a[i+1]===r){var s=t[7],u=a[i+2];return s.length>u?s[u]:null}"string"==typeof o&&(i+=2)}return null}(e,t,a,r.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=i,y.__ngLastListenerFn__=i,h=!1;else{i=xs(r,t,i,!1);var g=n.listen(d.name||p,a,i);c.push(i,g),l&&l.push(a,v,m,m+1)}}else i=xs(r,t,i,!0),p.addEventListener(a,i,o),c.push(i),l&&l.push(a,v,m,o)}var _,b=r.outputs;if(h&&null!==b&&(_=b[a])){var x=_.length;if(x)for(var w=0;w<x;w+=2){var k=t[_[w]][_[w+1]].subscribe(i),C=c.length;c.push(i,k),l&&l.push(a,r.index,C,-(C+1))}}}function bs(e,t,n){try{return!1!==t(n)}catch(r){return ji(e,r),!1}}function xs(e,t,n,r){return function a(i){if(i===Function)return n;var o=2&e.flags?kn(e.index,t):t;0==(32&t[2])&&Fi(o);for(var s=bs(t,n,i),u=a.__ngNextListenerFn__;u;)s=bs(t,u,i)&&s,u=u.__ngNextListenerFn__;return r&&!1===s&&(i.preventDefault(),i.returnValue=!1),s}}function ws(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return(Tn.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Tn.lFrame.contextLView))[8]}(e)}function ks(e,t){for(var n=null,r=function(e){var t=e.attrs;if(null!=t){var n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(e),a=0;a<t.length;a++){var i=t[a];if("*"!==i){if(null===r?Ua(e,i,!0):ja(r,i))return a}else n=a}return n}function Cs(e){var t=Rn()[16][6];if(!t.projection)for(var n=t.projection=Vt(e?e.length:1,null),r=n.slice(),a=t.child;null!==a;){var i=e?ks(a,e):0;null!==i&&(r[i]?r[i].projectionNext=a:n[i]=a,r[i]=a),a=a.next}}function Ss(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=Rn(),a=On(),i=oi(a,r[6],e,1,null,n||null);null===i.projection&&(i.projection=t),Ln(),function(e,t,n){fo(t[11],0,t,n,no(e,n,t),so(n.parent||t[6],t))}(a,r,i)}var Is=[];function Ds(e,t,n,r,a){for(var i=e[n+1],o=null===t,s=r?Qa(i):ei(i),u=!1;0!==s&&(!1===u||o);){var l=e[s+1];As(e[s],t)&&(u=!0,e[s+1]=r?ni(l):$a(l)),s=r?Qa(l):ei(l)}u&&(e[n+1]=r?$a(i):ni(i))}function As(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Ht(e,t)>=0}var Ts={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Es(e){return e.substring(Ts.key,Ts.keyEnd)}function Rs(e,t){var n=Ts.textEnd;return n===t?-1:(t=Ts.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Ts.key=t,n),Os(e,t,n))}function Os(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Ms(e,t,n){return Fs(e,t,n,!1),Ms}function Ns(e,t){return Fs(e,t,null,!0),Ns}function Ps(e,t){for(var n=function(e){return function(e){Ts.key=0,Ts.keyEnd=0,Ts.value=0,Ts.valueEnd=0,Ts.textEnd=e.length}(e),Rs(e,Os(e,0,Ts.textEnd))}(t);n>=0;n=Rs(t,n))Ut(e,Es(t),!0)}function Fs(e,t,n,r){var a,i,o=Rn(),s=On(),u=Vn(2);(s.firstUpdatePass&&Bs(s,e,u,r),t!==Ja&&Qo(o,u,t))&&(null==n&&(a=null===(i=Tn.lFrame)?null:i.currentSanitizer)&&(n=a),Vs(s,s.data[$n()+19],o,o[11],e,o[u+1]=function(e,t){return null==e||("function"==typeof t?e=t(e):"string"==typeof t?e+=t:"object"==typeof e&&(e=at(Qr(e)))),e}(t,n),r,u))}function Ls(e,t,n,r){var a=On(),i=Vn(2);a.firstUpdatePass&&Bs(a,null,i,r);var o=Rn();if(n!==Ja&&Qo(o,i,n)){var s=a.data[$n()+19];if(Hs(s,r)&&!zs(a,i)){var u=r?s.classes:s.styles;null!==u&&(n=it(u,n||"")),us(a,s,o,n,r)}else!function(e,t,n,r,a,i,o,s){a===Ja&&(a=Is);for(var u=0,l=0,c=0<a.length?a[0]:null,h=0<i.length?i[0]:null;null!==c||null!==h;){var f=u<a.length?a[u+1]:void 0,d=l<i.length?i[l+1]:void 0,p=null,m=void 0;c===h?(u+=2,l+=2,f!==d&&(p=h,m=d)):null===h||null!==c&&c<h?(u+=2,p=c):(l+=2,p=h,m=d),null!==p&&Vs(e,t,n,r,p,m,o,s),c=u<a.length?a[u]:null,h=l<i.length?i[l]:null}}(a,s,o,o[11],o[i+1],o[i+1]=function(e,t,n){if(null==n||""===n)return Is;var r=[],a=Qr(n);if(Array.isArray(a))for(var i=0;i<a.length;i++)e(r,a[i],!0);else if("object"==typeof a)for(var o in a)a.hasOwnProperty(o)&&e(r,o,a[o]);else"string"==typeof a&&t(r,a);return r}(e,t,n),r,i)}}function zs(e,t){return t>=e.expandoStartIndex}function Bs(e,t,n,r){var a=e.data;if(null===a[n+1]){var i=a[$n()+19],o=zs(e,n);Hs(i,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){var a=function(e){var t=Tn.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e),i=r?t.residualClasses:t.residualStyles;if(null===a)0===(r?t.classBindings:t.styleBindings)&&(n=qs(n=Ws(null,e,t,n,r),t.attrs,r),i=null);else{var o=t.directiveStylingLast;if(-1===o||e[o]!==a)if(n=Ws(a,e,t,n,r),null===i){var s=function(e,t,n){var r=n?t.classBindings:t.styleBindings;if(0!==ei(r))return e[Qa(r)]}(e,t,r);void 0!==s&&Array.isArray(s)&&function(e,t,n,r){e[Qa(n?t.classBindings:t.styleBindings)]=r}(e,t,r,s=qs(s=Ws(null,e,t,s[1],r),t.attrs,r))}else i=function(e,t,n){for(var r=void 0,a=t.directiveEnd,i=1+t.directiveStylingLast;i<a;i++)r=qs(r,e[i].hostAttrs,n);return qs(r,t.attrs,n)}(e,t,r)}return void 0!==i&&(r?t.residualClasses=i:t.residualStyles=i),n}(a,i,t,r),function(e,t,n,r,a,i){var o=i?t.classBindings:t.styleBindings,s=Qa(o),u=ei(o);e[r]=n;var l,c=!1;if(Array.isArray(n)){var h=n;(null===(l=h[1])||Ht(h,l)>0)&&(c=!0)}else l=n;if(a)if(0!==u){var f=Qa(e[s+1]);e[r+1]=Ya(f,s),0!==f&&(e[f+1]=ti(e[f+1],r)),e[s+1]=131071&e[s+1]|r<<17}else e[r+1]=Ya(s,0),0!==s&&(e[s+1]=ti(e[s+1],r)),s=r;else e[r+1]=Ya(u,0),0===s?s=r:e[u+1]=ti(e[u+1],r),u=r;c&&(e[r+1]=$a(e[r+1])),Ds(e,l,r,!0),Ds(e,l,r,!1),function(e,t,n,r,a){var i=a?e.residualClasses:e.residualStyles;null!=i&&"string"==typeof t&&Ht(i,t)>=0&&(n[r+1]=ni(n[r+1]))}(t,l,e,r,i),o=Ya(s,u),i?t.classBindings=o:t.styleBindings=o}(a,i,t,n,o,r)}}function Ws(e,t,n,r,a){var i=null,o=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<o&&(r=qs(r,(i=t[s]).hostAttrs,a),i!==e);)s++;return null!==e&&(n.directiveStylingLast=s),r}function qs(e,t,n){var r=n?1:2,a=-1;if(null!==t)for(var i=0;i<t.length;i++){var o=t[i];"number"==typeof o?a=o:a===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Ut(e,o,!!n||t[++i]))}return void 0===e?null:e}function Vs(e,t,n,r,a,i,o,s){if(3===t.type){var u=e.data,l=u[s+1];js(1==(1&l)?Us(u,t,n,a,ei(l),o):void 0)||(js(i)||2==(2&l)&&(i=Us(u,null,n,a,s,o)),function(e,t,n,r,a){var i=yn(e);if(t)a?i?e.addClass(n,r):n.classList.add(r):i?e.removeClass(n,r):n.classList.remove(r);else{var o=-1==r.indexOf("-")?void 0:2;null==a?i?e.removeStyle(n,r,o):n.style.removeProperty(r):i?e.setStyle(n,r,a,o):n.style.setProperty(r,a)}}(r,o,bn($n(),n),a,i))}}function Us(e,t,n,r,a,i){for(var o=null===t,s=void 0;a>0;){var u=e[a],l=Array.isArray(u),c=l?u[1]:u,h=null===c,f=n[a+1];f===Ja&&(f=h?Is:void 0);var d=h?jt(f,r):c===r?f:void 0;if(l&&!js(d)&&(d=jt(u,r)),js(d)&&(s=d,o))return s;var p=e[a+1];a=o?Qa(p):ei(p)}if(null!==t){var m=i?t.residualClasses:t.residualStyles;null!=m&&(s=jt(m,r))}return s}function js(e){return void 0!==e}function Hs(e,t){return 0!=(e.flags&(t?16:32))}function Gs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Rn(),r=On(),a=e+19,i=r.firstCreatePass?oi(r,n[6],e,3,null,null):r.data[a],o=n[a]=function(e,t){return yn(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);uo(r,n,o,i),Pn(i,!1)}function Js(e){return Xs("",e,""),Js}function Xs(e,t,n){var r=Rn(),a=ts(r,e,t,n);return a!==Ja&&Gi(r,$n(),a),Xs}function Ks(e,t,n,r,a){var i=Rn(),o=function(e,t,n,r,a,i){var o=$o(e,Tn.lFrame.bindingIndex,n,a);return Vn(2),o?t+br(n)+r+br(a)+i:Ja}(i,e,t,n,r,a);return o!==Ja&&Gi(i,$n(),o),Ks}function Zs(e,t,n){Ls(Ut,Ps,ts(Rn(),e,t,n),!0)}function Ys(e,t,n){var r=Rn();return Qo(r,qn(),t)&&gi(On(),tr(),r,e,t,r[11],n,!0),Ys}function Qs(e,t,n){var r=Rn();if(Qo(r,qn(),t)){var a=On(),i=tr();gi(a,i,r,e,t,Ui(i,r),n,!0)}return Qs}function $s(e,t){var n=Cn(e)[1],r=n.data.length-1;ar(n,{directiveStart:r,directiveEnd:r+1})}function eu(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0,r=[e];t;){var a=void 0;if(dn(e))a=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");a=t.\u0275dir}if(a){if(n){r.push(a);var i=e;i.inputs=tu(e.inputs),i.declaredInputs=tu(e.declaredInputs),i.outputs=tu(e.outputs);var o=a.hostBindings;o&&au(e,o);var s=a.viewQuery,u=a.contentQueries;if(s&&nu(e,s),u&&ru(e,u),Je(e.inputs,a.inputs),Je(e.declaredInputs,a.declaredInputs),Je(e.outputs,a.outputs),dn(a)&&a.data.animation){var l=e.data;l.animation=(l.animation||[]).concat(a.data.animation)}i.afterContentChecked=i.afterContentChecked||a.afterContentChecked,i.afterContentInit=e.afterContentInit||a.afterContentInit,i.afterViewChecked=e.afterViewChecked||a.afterViewChecked,i.afterViewInit=e.afterViewInit||a.afterViewInit,i.doCheck=e.doCheck||a.doCheck,i.onDestroy=e.onDestroy||a.onDestroy,i.onInit=e.onInit||a.onInit}var c=a.features;if(c)for(var h=0;h<c.length;h++){var f=c[h];f&&f.ngInherit&&f(e),f===eu&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var a=e[r];a.hostVars=t+=a.hostVars,a.hostAttrs=pr(a.hostAttrs,n=pr(n,a.hostAttrs))}}(r)}function tu(e){return e===Xt?{}:e===Kt?[]:e}function nu(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function ru(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,a){t(e,r,a),n(e,r,a)}:t}function au(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}var iu=function(){function e(t,n,r){_classCallCheck(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return _createClass(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function ou(e){e.type.prototype.ngOnChanges&&(e.setInput=su,e.onChanges=function(){var e=uu(this),t=e&&e.current;if(t){var n=e.previous;if(n===Xt)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}})}function su(e,t,n,r){var a=uu(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:Xt,current:null}),i=a.current||(a.current={}),o=a.previous,s=this.declaredInputs[n],u=o[s];i[s]=new iu(u&&u.currentValue,t,o===Xt),e[r]=t}function uu(e){return e.__ngSimpleChanges__||null}function lu(e,t,n,r,a){if(e=ut(e),Array.isArray(e))for(var i=0;i<e.length;i++)lu(e[i],t,n,r,a);else{var o=On(),s=Rn(),u=zo(e)?e:ut(e.provide),l=Po(e),c=Nn(),h=65535&c.providerIndexes,f=c.directiveStart,d=c.providerIndexes>>16;if(zo(e)||!e.multi){var p=new cr(l,a,as),m=fu(u,t,a?h:h+d,f);-1===m?(Or(Ar(c,s),o,u),cu(o,e,t.length),t.push(u),c.directiveStart++,c.directiveEnd++,a&&(c.providerIndexes+=65536),n.push(p),s.push(p)):(n[m]=p,s[m]=p)}else{var v=fu(u,t,h+d,f),y=fu(u,t,h,h+d),g=v>=0&&n[v],_=y>=0&&n[y];if(a&&!_||!a&&!g){Or(Ar(c,s),o,u);var b=function(e,t,n,r,a){var i=new cr(e,n,as);return i.multi=[],i.index=t,i.componentProviders=0,hu(i,a,r&&!n),i}(a?pu:du,n.length,a,r,l);!a&&_&&(n[y].providerFactory=b),cu(o,e,t.length),t.push(u),c.directiveStart++,c.directiveEnd++,a&&(c.providerIndexes+=65536),n.push(b),s.push(b)}else cu(o,e,v>-1?v:y),hu(n[a?y:v],l,!a&&r);!a&&r&&_&&n[y].componentProviders++}}}function cu(e,t,n){if(zo(t)||t.useClass){var r=(t.useClass||t).prototype.ngOnDestroy;r&&(e.destroyHooks||(e.destroyHooks=[])).push(n,r)}}function hu(e,t,n){e.multi.push(t),n&&e.componentProviders++}function fu(e,t,n,r){for(var a=n;a<r;a++)if(t[a]===e)return a;return-1}function du(e,t,n,r){return mu(this.multi,[])}function pu(e,t,n,r){var a,i=this.multi;if(this.providerFactory){var o=this.providerFactory.componentProviders,s=Lr(n,n[1],this.providerFactory.index,r);mu(i,a=s.slice(0,o));for(var u=o;u<s.length;u++)a.push(s[u])}else mu(i,a=[]);return a}function mu(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function vu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=On();if(r.firstCreatePass){var a=dn(e);lu(n,r.data,r.blueprint,a,!0),lu(t,r.data,r.blueprint,a,!1)}}(n,r?r(e):e,t)}}}ou.ngInherit=!0;var yu=function e(){_classCallCheck(this,e)},gu=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(at(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),_u=function(){var e=function e(){_classCallCheck(this,e)};return e.NULL=new gu,e}(),bu=function(){var e=function e(t){_classCallCheck(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return xu(e)},e}(),xu=function(e){return xo(e,Nn(),Rn())},wu=function e(){_classCallCheck(this,e)},ku=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),Cu=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Su()},e}(),Su=function(){var e=Rn(),t=kn(Nn().index,e);return function(e){var t=e[11];if(yn(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(un(t)?t:e)},Iu=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275prov=Xe({token:e,providedIn:"root",factory:function(){return null}}),e}(),Du=function e(t){_classCallCheck(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},Au=new Du("9.0.7"),Tu=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return Ko(e)}},{key:"create",value:function(e){return new Ru(e)}}]),e}(),Eu=function(e,t){return t},Ru=function(){function e(t){_classCallCheck(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Eu}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,a=null;t||n;){var i=!n||t&&t.currentIndex<Pu(n,r,a)?t:n,o=Pu(i,r,a),s=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(t=t._next,null==i.previousIndex)r++;else{a||(a=[]);var u=o-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var h=c<a.length?a[c]:a[c]=0,f=h+c;l<=f&&f<u&&(a[c]=h+1)}a[i.previousIndex]=l-u}}o!==s&&e(i,o,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Ko(e))throw new Error("Error trying to diff '".concat(at(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,a,i=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)r=e[s],a=this._trackByFn(s,r),null!==i&&Xo(i.trackById,a)?(o&&(i=this._verifyReinsertion(i,r,a,s)),Xo(i.item,r)||this._addIdentityChange(i,r)):(i=this._mismatch(i,r,a,s),o=!0),i=i._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,a=e[Jo()]();!(r=a.next()).done;)t(r.value)}(e,(function(e){a=t._trackByFn(n,e),null!==i&&Xo(i.trackById,a)?(o&&(i=t._verifyReinsertion(i,e,a,n)),Xo(i.item,e)||t._addIdentityChange(i,e)):(i=t._mismatch(i,e,a,n),o=!0),i=i._next,n++})),this.length=n;return this._truncate(i),this.collection=e,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var a;return null===e?a=this._itTail:(a=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Xo(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,a,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Xo(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,a,r)):e=this._addAfter(new Ou(t,n),a,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==a?e=this._reinsertAfter(a,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,a=e._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Nu),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Nu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),e}(),Ou=function e(t,n){_classCallCheck(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Mu=function(){function e(){_classCallCheck(this,e),this._head=null,this._tail=null}return _createClass(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Xo(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),Nu=function(){function e(){_classCallCheck(this,e),this.map=new Map}return _createClass(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new Mu,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),e}();function Pu(e,t,n){var r=e.previousIndex;if(null===r)return r;var a=0;return n&&r<n.length&&(a=n[r]),r+t+a}var Fu=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return e instanceof Map||Zo(e)}},{key:"create",value:function(){return new Lu}}]),e}(),Lu=function(){function e(){_classCallCheck(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Zo(e)))throw new Error("Error trying to diff '".concat(at(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var a=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,a)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,a=n._next;return r&&(r._next=a),a&&(a._prev=r),n._next=null,n._prev=null,n}var i=new zu(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Xo(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),e}(),zu=function e(t){_classCallCheck(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Bu=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new je,new Ve]]}}}]),e}();return e.\u0275prov=Xe({token:e,providedIn:"root",factory:function(){return new e([new Tu])}}),e}(),Wu=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new je,new Ve]]}}}]),e}();return e.\u0275prov=Xe({token:e,providedIn:"root",factory:function(){return new e([new Fu])}}),e}(),qu=[new Fu],Vu=new Bu([new Tu]),Uu=new Wu(qu),ju=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Hu(e,bu)},e}(),Hu=function(e,t){return wo(e,t,Nn(),Rn())},Gu=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Ju(e,bu)},e}(),Ju=function(e,t){return ko(e,t,Nn(),Rn())},Xu={},Ku=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).ngModule=e,r}return _createClass(n,[{key:"resolveComponentFactory",value:function(e){var t=an(e);return new Qu(t,this.ngModule)}}]),n}(_u);function Zu(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var Yu=new kt("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return wr}}),Qu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).componentDef=e,a.ngModule=r,a.componentType=e.type,a.selector=e.selectors.map(Ga).join(","),a.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],a.isBoundToModule=!!r,a}return _createClass(n,[{key:"create",value:function(e,t,n,r){var a,i,o=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,a){var i=e.get(n,Xu,a);return i!==Xu||r===Xu?i:t.get(n,r,a)}}}(e,r.injector):e,s=o.get(wu,gn),u=o.get(Iu,null),l=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(yn(e))return e.selectRootElement(t,n===Jt.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(l,n,this.componentDef.encapsulation):ai(c,s.createRenderer(null,this.componentDef),function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),f=this.componentDef.onPush?576:528,d="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),p={components:[],scheduler:wr,clean:Wi,playerHandler:null,flags:0},m=mi(0,-1,null,1,0,null,null,null,null,null),v=ii(null,m,p,f,null,null,s,l,u,o);Jn(v,null);try{var y=function(e,t,n,r,a,i){var o=n[1];n[19]=e;var s=oi(o,null,0,3,null,null),u=s.mergedAttrs=t.hostAttrs;null!==u&&(Ho(s,u),null!==e&&(hr(a,e,u),null!==s.classes&&mo(a,e,s.classes),null!==s.styles&&po(a,e,s.styles)));var l=r.createRenderer(e,t),c=ii(n,pi(t),null,t.onPush?64:16,n[19],s,r,l,void 0);return o.firstCreatePass&&(Or(Ar(s,n),o,t.type),Ci(o,s),Ii(s,n.length,1)),Pi(n,c),n[19]=c}(h,this.componentDef,v,s,l);if(h)if(n)hr(l,h,["ng-version",Au.full]);else{var g=function(e){for(var t=[],n=[],r=1,a=2;r<e.length;){var i=e[r];if("string"==typeof i)2===a?""!==i&&t.push(i,e[++r]):8===a&&n.push(i);else{if(!qa(a))break;a=i}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),_=g.attrs,b=g.classes;_&&hr(l,h,_),b&&b.length>0&&mo(l,h,b.join(" "))}i=wn(v[1],0),t&&(i.projection=t.map((function(e){return Array.from(e)}))),a=function(e,t,n,r,a){var i=n[1],o=function(e,t,n){var r=Nn();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ki(e,r,1),Di(e,t,n));var a=Lr(t,e,t.length-1,r);Na(a,t);var i=xn(r,t);return i&&Na(i,t),a}(i,n,t);r.components.push(o),e[8]=o,a&&a.forEach((function(e){return e(o,t)})),t.contentQueries&&t.contentQueries(1,o,n.length-1);var s=Nn();if(i.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){er(s.index-19);var u=n[1];bi(u,t),xi(u,n,t.hostVars),wi(t,o)}return o}(y,this.componentDef,v,p,[$s]),si(m,v,null)}finally{Qn()}var x=new $u(this.componentType,a,xo(bu,i,v),v,i);return n&&!d||(x.hostView._tViewNode.child=i),x}},{key:"inputs",get:function(){return Zu(this.componentDef.inputs)}},{key:"outputs",get:function(){return Zu(this.componentDef.outputs)}}]),n}(yu),$u=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o){var s,u,l,c;return _classCallCheck(this,n),(s=t.call(this)).location=a,s._rootLView=i,s._tNode=o,s.destroyCbs=[],s.instance=r,s.hostView=s.changeDetectorRef=new bo(i),s.hostView._tViewNode=(u=i[1],l=i,null==(c=u.node)&&(u.node=c=vi(0,null,2,-1,null,null)),l[6]=c),s.componentType=e,s}return _createClass(n,[{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(e){this.destroyCbs&&this.destroyCbs.push(e)}},{key:"injector",get:function(){return new Wr(this._tNode,this._rootLView)}}]),n}(function(){return function e(){_classCallCheck(this,e)}}()),el=void 0,tl=["en",[["a","p"],["AM","PM"],el],[["AM","PM"],el,el],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],el,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],el,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",el,"{1} 'at' {0}",el],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],nl={};function rl(e){return e in nl||(nl[e]=mt.ng&&mt.ng.common&&mt.ng.common.locales&&mt.ng.common.locales[e]),nl[e]}var al=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,PluralCase:19,ExtraData:20};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();function il(e){var t;null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat("Expected localeId to be defined")+" [Expected=> null != ".concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}var ol=new Map,sl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;_classCallCheck(this,n),(a=t.call(this))._parent=r,a._bootstrapComponents=[],a.injector=_assertThisInitialized(a),a.destroyCbs=[],a.componentFactoryResolver=new Ku(_assertThisInitialized(a));var i=sn(e),o=e[bt]||null;return o&&il(o),a._bootstrapComponents=Cr(i.bootstrap),a._r3Injector=Oo(e,r,[{provide:Lt,useValue:_assertThisInitialized(a)},{provide:_u,useValue:a.componentFactoryResolver}],at(e)),a._r3Injector._resolveInjectorDefTypes(),a.instance=a.get(e),a}return _createClass(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wo.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He.Default;return e===Wo||e===Lt||e===Ct?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(Lt),ul=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).moduleType=e,null!==sn(e)&&function e(t){if(null!==t.\u0275mod.id){var n=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(at(t)," vs ").concat(at(t.name)))})(n,ol.get(n),t),ol.set(n,t)}var r=t.\u0275mod.imports;r instanceof Function&&(r=r()),r&&r.forEach((function(t){return e(t)}))}(e),r}return _createClass(n,[{key:"create",value:function(e){return new sl(this.moduleType,e)}}]),n}(zt);function ll(e,t,n,r){return function(e,t,n,r,a,i){var o=t+n;return Qo(e,o,a)?Yo(e,o+1,i?r.call(i,a):r(a)):hl(e,o+1)}(Rn(),Wn(),e,t,n,r)}function cl(e,t,n,r,a){return function(e,t,n,r,a,i,o){var s=t+n;return $o(e,s,a,i)?Yo(e,s+2,o?r.call(o,a,i):r(a,i)):hl(e,s+2)}(Rn(),Wn(),e,t,n,r,a)}function hl(e,t){var n=e[t];return n===Ja?void 0:n}var fl=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,n),(e=t.call(this)).__isAsync=r,e}return _createClass(n,[{key:"emit",value:function(e){_get(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var a,i=function(e){return null},o=function(){return null};e&&"object"==typeof e?(a=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(i=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(o=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(a=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},t&&(i=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)}),r&&(o=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var s=_get(_getPrototypeOf(n.prototype),"subscribe",this).call(this,a,i,o);return e instanceof J&&e.add(s),s}}]),n}(le);function dl(){return this._results[Jo()]()}var pl=function(){function e(){_classCallCheck(this,e),this.dirty=!0,this._results=[],this.changes=new fl,this.length=0;var t=Jo(),n=e.prototype;n[t]||(n[t]=dl)}return _createClass(e,[{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e){this._results=function e(t,n){void 0===n&&(n=t);for(var r=0;r<t.length;r++){var a=t[r];Array.isArray(a)?(n===t&&(n=t.slice(0,r)),e(a,n)):n!==t&&n.push(a)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),ml=function(){function e(t){_classCallCheck(this,e),this.queryList=t,this.matches=null}return _createClass(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),vl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,e),this.queries=t}return _createClass(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,a=[],i=0;i<r;i++){var o=n.getByIndex(i);a.push(this.queries[o.indexInDeclarationView].clone())}return new e(a)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==Ml(e,t).matches&&this.queries[t].setDirty()}}]),e}(),yl=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.predicate=t,this.descendants=n,this.isStatic=r,this.read=a},gl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,e),this.queries=t}return _createClass(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var a=null!==n?n.length:0,i=this.getByIndex(r).embeddedTView(t,a);i&&(i.indexInDeclarationView=r,null!==n?n.push(i):n=[i])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"track",value:function(e){this.queries.push(e)}},{key:"length",get:function(){return this.queries.length}}]),e}(),_l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return _createClass(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&!1===this.metadata.descendants){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&4===n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){if(Array.isArray(this.metadata.predicate))for(var n=this.metadata.predicate,r=0;r<n.length;r++)this.matchTNodeWithReadOption(e,t,bl(t,n[r]));else{var a=this.metadata.predicate;a===ju?0===t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Fr(t,e,a,!1,!1))}}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===bu||r===Gu||r===ju&&0===t.type)this.addMatch(t.index,-2);else{var a=Fr(t,e,r,!1,!1);null!==a&&this.addMatch(t.index,a)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function bl(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function xl(e,t,n,r){return-1===n?function(e,t){return 3===e.type||4===e.type?xo(bu,e,t):0===e.type?wo(ju,bu,e,t):null}(t,e):-2===n?function(e,t,n){return n===bu?xo(bu,t,e):n===ju?wo(ju,bu,t,e):n===Gu?ko(Gu,bu,t,e):void 0}(e,t,r):Lr(e,e[1],n,t)}function wl(e,t,n,r){var a=t[5].queries[r];if(null===a.matches){for(var i=e.data,o=n.matches,s=[],u=0;u<o.length;u+=2){var l=o[u];s.push(l<0?null:xl(t,i[l],o[u+1],n.metadata.read))}a.matches=s}return a.matches}function kl(e){var t=Rn(),n=On(),r=jn();Hn(r+1);var a=Ml(n,r);if(e.dirty&&Sn(t)===a.metadata.isStatic){if(null===a.matches)e.reset([]);else{var i=a.crossesNgTemplate?function e(t,n,r,a){var i=t.queries.getByIndex(r),o=i.matches;if(null!==o)for(var s=wl(t,n,i,r),u=0;u<o.length;u+=2){var l=o[u];if(l>0)a.push(s[u/2]);else{for(var c=o[u+1],h=n[-l],f=9;f<h.length;f++){var d=h[f];d[17]===d[3]&&e(d[1],d,c,a)}if(null!==h[5])for(var p=h[5],m=0;m<p.length;m++){var v=p[m];e(v[1],v,c,a)}}}return a}(n,t,r,[]):wl(n,t,a,r);e.reset(i),e.notifyOnChanges()}return!0}return!1}function Cl(e,t,n){Il(On(),Rn(),e,t,n,!0)}function Sl(e,t,n){Il(On(),Rn(),e,t,n,!1)}function Il(e,t,n,r,a,i){e.firstCreatePass&&(Ol(e,new yl(n,r,i,a),-1),i&&(e.staticViewQueries=!0)),Rl(e,t)}function Dl(e,t,n,r){Tl(On(),Rn(),t,n,r,!1,Nn(),e)}function Al(e,t,n,r){Tl(On(),Rn(),t,n,r,!0,Nn(),e)}function Tl(e,t,n,r,a,i,o,s){e.firstCreatePass&&(Ol(e,new yl(n,r,i,a),o.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(e.contentQueries.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(e,s),i&&(e.staticContentQueries=!0)),Rl(e,t)}function El(){return e=Rn(),t=jn(),e[5].queries[t].queryList;var e,t}function Rl(e,t){var n=new pl;!function(e,t,n,r){var a=qi(t);a.push(n),e.firstCreatePass&&Vi(e).push(r,a.length-1)}(e,t,n,n.destroy),null===t[5]&&(t[5]=new vl),t[5].queries.push(new ml(n))}function Ol(e,t,n){null===e.queries&&(e.queries=new gl),e.queries.track(new _l(t,n))}function Ml(e,t){return e.queries.getByIndex(t)}function Nl(e,t){return wo(ju,bu,e,t)}var Pl=new kt("Application Initializer"),Fl=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return _createClass(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var a=this.appInits[r]();ms(a)&&t.push(a)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Ot(Pl,8))},e.\u0275prov=Xe({token:e,factory:e.\u0275fac}),e}(),Ll=new kt("AppId"),zl={provide:Ll,useFactory:function(){return"".concat(Bl()).concat(Bl()).concat(Bl())},deps:[]};function Bl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Wl=new kt("Platform Initializer"),ql=new kt("Platform ID"),Vl=new kt("appBootstrapListener"),Ul=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Xe({token:e,factory:e.\u0275fac}),e}(),jl=new kt("LocaleId"),Hl=new kt("DefaultCurrencyCode"),Gl=function e(t,n){_classCallCheck(this,e),this.ngModuleFactory=t,this.componentFactories=n},Jl=function(e){return new ul(e)},Xl=Jl,Kl=function(e){return Promise.resolve(Jl(e))},Zl=function(e){var t=Jl(e),n=Cr(sn(e).declarations).reduce((function(e,t){var n=an(t);return n&&e.push(new Qu(n)),e}),[]);return new Gl(t,n)},Yl=Zl,Ql=function(e){return Promise.resolve(Zl(e))},$l=function(){var e=function(){function e(){_classCallCheck(this,e),this.compileModuleSync=Xl,this.compileModuleAsync=Kl,this.compileModuleAndAllComponentsSync=Yl,this.compileModuleAndAllComponentsAsync=Ql}return _createClass(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Xe({token:e,factory:e.\u0275fac}),e}(),ec=new kt("compilerOptions"),tc=Promise.resolve(0);function nc(e){"undefined"==typeof Zone?tc.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var rc=function(){function e(t){var n,r,a=t.enableLongStackTrace,i=void 0!==a&&a,o=t.shouldCoalesceEventChangeDetection,s=void 0!==o&&o;if(_classCallCheck(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fl(!1),this.onMicrotaskEmpty=new fl(!1),this.onStable=new fl(!1),this.onError=new fl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=s,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=mt.requestAnimationFrame,t=mt.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(mt,(function(){e.lastRequestAnimationFrameId=-1,sc(e),oc(e)})),sc(e))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(e,t,a,i,o,s){try{return uc(n),e.invokeTask(a,i,o,s)}finally{r&&"eventTask"===i.type&&r(),lc(n)}},onInvoke:function(e,t,r,a,i,o,s){try{return uc(n),e.invoke(r,a,i,o,s)}finally{lc(n)}},onHasTask:function(e,t,r,a){e.hasTask(r,a),t===r&&("microTask"==a.change?(n._hasPendingMicrotasks=a.microTask,sc(n),oc(n)):"macroTask"==a.change&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:function(e,t,r,a){return e.handleError(r,a),n.runOutsideAngular((function(){return n.onError.emit(a)})),!1}})}return _createClass(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var a=this._inner,i=a.scheduleEventTask("NgZoneEvent: "+r,e,ic,ac,ac);try{return a.runTask(i,t,n)}finally{a.cancelTask(i)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function ac(){}var ic={};function oc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function sc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function uc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function lc(e){e._nesting--,oc(e)}var cc,hc=function(){function e(){_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fl,this.onMicrotaskEmpty=new fl,this.onStable=new fl,this.onError=new fl}return _createClass(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),fc=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){rc.assertNotInAngularZone(),nc((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())nc((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var r=this,a=-1;t&&t>0&&(a=setTimeout((function(){r._callbacks=r._callbacks.filter((function(e){return e.timeoutId!==a})),e(r._didWork,r.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Ot(rc))},e.\u0275prov=Xe({token:e,factory:e.\u0275fac}),e}(),dc=function(){var e=function(){function e(){_classCallCheck(this,e),this._applications=new Map,pc.addToWindow(this)}return _createClass(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return pc.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Xe({token:e,factory:e.\u0275fac}),e}(),pc=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),mc=function(e,t,n){var r=new ul(n);if(0===Vo.size)return Promise.resolve(r);var a,i,o=(a=e.get(ec,[]).concat(t).map((function(e){return e.providers})),i=[],a.forEach((function(e){return e&&i.push.apply(i,_toConsumableArray(e))})),i);if(0===o.length)return Promise.resolve(r);var s=function(){var e=mt.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),u=Wo.create({providers:o}).get(s.ResourceLoader);return function(e){var t=[],n=new Map;function r(e){var t=n.get(e);if(!t){var r=function(e){return Promise.resolve(u.get(e))}(e);n.set(e,t=r.then(jo))}return t}return Vo.forEach((function(e,n){var a=[];e.templateUrl&&a.push(r(e.templateUrl).then((function(t){e.template=t})));var i=e.styleUrls,o=e.styles||(e.styles=[]),s=e.styles.length;i&&i.forEach((function(t,n){o.push(""),a.push(r(t).then((function(r){o[s+n]=r,i.splice(i.indexOf(t),1),0==i.length&&(e.styleUrls=void 0)})))}));var u=Promise.all(a).then((function(){return function(e){Uo.delete(e)}(n)}));t.push(u)})),Vo=new Map,Promise.all(t).then((function(){}))}().then((function(){return r}))},vc=new kt("AllowMultipleToken"),yc=function e(t,n){_classCallCheck(this,e),this.name=t,this.token=n};function gc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),a=new kt(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=_c();if(!i||i.injector.get(vc,!1))if(e)e(n.concat(t).concat({provide:a,useValue:!0}));else{var o=n.concat(t).concat({provide:a,useValue:!0},{provide:Io,useValue:"platform"});!function(e){if(cc&&!cc.destroyed&&!cc.injector.get(vc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");cc=e.get(bc);var t=e.get(Wl,null);t&&t.forEach((function(e){return e()}))}(Wo.create({providers:o,name:r}))}return function(e){var t=_c();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(a)}}function _c(){return cc&&!cc.destroyed?cc:null}var bc=function(){var e=function(){function e(t){_classCallCheck(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r,a=this,i=(n=t?t.ngZone:void 0,r=t&&t.ngZoneEventCoalescing||!1,"noop"===n?new hc:("zone.js"===n?void 0:n)||new rc({enableLongStackTrace:ra(),shouldCoalesceEventChangeDetection:r})),o=[{provide:rc,useValue:i}];return i.run((function(){var t=Wo.create({providers:o,parent:a.injector,name:e.moduleType.name}),n=e.create(t),r=n.injector.get(Hr,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return Cc(a._modules,n)})),i.runOutsideAngular((function(){return i.onError.subscribe({next:function(e){r.handleError(e)}})})),function(e,t,r){try{var i=((o=n.injector.get(Fl)).runInitializers(),o.donePromise.then((function(){return il(n.injector.get(jl,"en-US")||"en-US"),a._moduleDoBootstrap(n),n})));return ms(i)?i.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):i}catch(s){throw t.runOutsideAngular((function(){return e.handleError(s)})),s}var o}(r,i)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=xc({},n);return mc(this.injector,r,e).then((function(e){return t.bootstrapModuleFactory(e,r)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(kc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(at(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Ot(Wo))},e.\u0275prov=Xe({token:e,factory:e.\u0275fac}),e}();function xc(e,t){return Array.isArray(t)?t.reduce(xc,e):Object.assign(Object.assign({},e),t)}var wc,kc=((wc=function(){function e(t,n,r,a,i,o){var s=this;_classCallCheck(this,e),this._zone=t,this._console=n,this._injector=r,this._exceptionHandler=a,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=ra(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var u=new re((function(e){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){e.next(s._stable),e.complete()}))})),l=new re((function(e){var t;s._zone.runOutsideAngular((function(){t=s._zone.onStable.subscribe((function(){rc.assertNotInAngularZone(),nc((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,e.next(!0))}))}))}));var n=s._zone.onUnstable.subscribe((function(){rc.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=Ee(u,l.pipe(ze()))}return _createClass(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof yu?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var a=n.isBoundToModule?void 0:this._injector.get(Lt),i=n.create(Wo.NULL,[],t||n.selector,a);i.onDestroy((function(){r._unloadComponent(i)}));var o=i.injector.get(fc,null);return o&&i.injector.get(dc).registerApplication(i.location.nativeElement,o),this._loadComponent(i),ra()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=_createForOfIteratorHelper(this._views);try{for(n.s();!(t=n.n()).done;)t.value.detectChanges()}catch(i){n.e(i)}finally{n.f()}if(this._enforceNoNewChanges){var r,a=_createForOfIteratorHelper(this._views);try{for(a.s();!(r=a.n()).done;)r.value.checkNoChanges()}catch(i){a.e(i)}finally{a.f()}}}catch(o){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(o)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;Cc(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Vl,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),Cc(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}()).\u0275fac=function(e){return new(e||wc)(Ot(rc),Ot(Ul),Ot(Wo),Ot(Hr),Ot(_u),Ot(Fl))},wc.\u0275prov=Xe({token:wc,factory:wc.\u0275fac}),wc);function Cc(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Sc=function e(){_classCallCheck(this,e)},Ic=function e(){_classCallCheck(this,e)},Dc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Ac=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this._compiler=t,this._config=n||Dc}return _createClass(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,r=_slicedToArray(e.split("#"),2),a=r[0],i=r[1];return void 0===i&&(i="default"),n("zn8P")(a).then((function(e){return e[i]})).then((function(e){return Tc(e,a,i)})).then((function(e){return t._compiler.compileModuleAsync(e)}))}},{key:"loadFactory",value:function(e){var t=_slicedToArray(e.split("#"),2),r=t[0],a=t[1],i="NgFactory";return void 0===a&&(a="default",i=""),n("zn8P")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then((function(e){return e[a+i]})).then((function(e){return Tc(e,r,a)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Ot($l),Ot(Ic,8))},e.\u0275prov=Xe({token:e,factory:e.\u0275fac}),e}();function Tc(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var Ec=gc(null,"core",[{provide:ql,useValue:"unknown"},{provide:bc,deps:[Wo]},{provide:dc,deps:[]},{provide:Ul,deps:[]}]),Rc=[{provide:kc,useClass:kc,deps:[rc,Ul,Wo,Hr,_u,Fl]},{provide:Yu,deps:[rc],useFactory:function(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}},{provide:Fl,useClass:Fl,deps:[[new Ve,Pl]]},{provide:$l,useClass:$l,deps:[]},zl,{provide:Bu,useFactory:function(){return Vu},deps:[]},{provide:Wu,useFactory:function(){return Uu},deps:[]},{provide:jl,useFactory:function(e){return il(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new qe(jl),new Ve,new je]]},{provide:Hl,useValue:"USD"}],Oc=function(){var e=function e(t){_classCallCheck(this,e)};return e.\u0275mod=tn({type:e}),e.\u0275inj=Ke({factory:function(t){return new(t||e)(Ot(kc))},providers:Rc}),e}(),Mc=null;function Nc(){return Mc}var Pc,Fc=new kt("DocumentToken"),Lc=((Pc=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Pc)},Pc.\u0275prov=Xe({factory:zc,token:Pc,providedIn:"platform"}),Pc);function zc(){return Ot(qc)}var Bc,Wc=new kt("Location Initialized"),qc=((Bc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._init(),r}return _createClass(n,[{key:"_init",value:function(){this.location=Nc().getLocation(),this._history=Nc().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return Nc().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){Nc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){Nc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"pushState",value:function(e,t,n){Vc()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){Vc()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),n}(Lc)).\u0275fac=function(e){return new(e||Bc)(Ot(Fc))},Bc.\u0275prov=Xe({factory:Uc,token:Bc,providedIn:"platform"}),Bc);function Vc(){return!!window.history.pushState}function Uc(){return new qc(Ot(Fc))}function jc(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Hc(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Gc(e){return e&&"?"!==e[0]?"?"+e:e}var Jc,Xc=((Jc=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Jc)},Jc.\u0275prov=Xe({factory:Kc,token:Jc,providedIn:"root"}),Jc);function Kc(e){var t=Ot(Fc).location;return new eh(Ot(Lc),t&&t.origin||"")}var Zc,Yc,Qc,$c=new kt("appBaseHref"),eh=((Qc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;if(_classCallCheck(this,n),(a=t.call(this))._platformLocation=e,null==r&&(r=a._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return a._baseHref=r,_possibleConstructorReturn(a)}return _createClass(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return jc(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+Gc(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var a=this.prepareExternalUrl(n+Gc(r));this._platformLocation.pushState(e,t,a)}},{key:"replaceState",value:function(e,t,n,r){var a=this.prepareExternalUrl(n+Gc(r));this._platformLocation.replaceState(e,t,a)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(Xc)).\u0275fac=function(e){return new(e||Qc)(Ot(Lc),Ot($c,8))},Qc.\u0275prov=Xe({token:Qc,factory:Qc.\u0275fac}),Qc),th=((Yc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this))._platformLocation=e,a._baseHref="",null!=r&&(a._baseHref=r),a}return _createClass(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=jc(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var a=this.prepareExternalUrl(n+Gc(r));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(e,t,a)}},{key:"replaceState",value:function(e,t,n,r){var a=this.prepareExternalUrl(n+Gc(r));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,a)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(Xc)).\u0275fac=function(e){return new(e||Yc)(Ot(Lc),Ot($c,8))},Yc.\u0275prov=Xe({token:Yc,factory:Yc.\u0275fac}),Yc),nh=((Zc=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._subject=new fl,this._urlChangeListeners=[],this._platformStrategy=t;var a=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=Hc(ah(a)),this._platformStrategy.onPopState((function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})}))}return _createClass(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+Gc(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,ah(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Gc(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Gc(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this.subscribe((function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(e,t)}))}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}()).\u0275fac=function(e){return new(e||Zc)(Ot(Xc),Ot(Lc))},Zc.normalizeQueryParams=Gc,Zc.joinWithSlash=jc,Zc.stripTrailingSlash=Hc,Zc.\u0275prov=Xe({factory:rh,token:Zc,providedIn:"root"}),Zc);function rh(){return new nh(Ot(Xc),Ot(Lc))}function ah(e){return e.replace(/\/index.html$/,"")}var ih,oh=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),sh=function e(){_classCallCheck(this,e)},uh=((ih=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).locale=e,r}return _createClass(n,[{key:"getPluralCategory",value:function(e,t){switch(function(e){return function(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=rl(t);if(n)return n;var r=t.split("-")[0];if(n=rl(r))return n;if("en"===r)return tl;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}(e)[al.PluralCase]}(t||this.locale)(e)){case oh.Zero:return"zero";case oh.One:return"one";case oh.Two:return"two";case oh.Few:return"few";case oh.Many:return"many";default:return"other"}}}]),n}(sh)).\u0275fac=function(e){return new(e||ih)(Ot(jl))},ih.\u0275prov=Xe({token:ih,factory:ih.\u0275fac}),ih);function lh(e,t){t=encodeURIComponent(t);var n,r=_createForOfIteratorHelper(e.split(";"));try{for(r.s();!(n=r.n()).done;){var a=n.value,i=a.indexOf("="),o=_slicedToArray(-1==i?[a,""]:[a.slice(0,i),a.slice(i+1)],2),s=o[0],u=o[1];if(s.trim()===t)return decodeURIComponent(u)}}catch(l){r.e(l)}finally{r.f()}return null}var ch,hh,fh,dh=((ch=function(){function e(t,n,r,a){_classCallCheck(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachRemovedItem((function(e){e.previousValue&&t._toggleClass(e.key,!1)}))}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat(at(e.item)));t._toggleClass(e.item,!0)})),e.forEachRemovedItem((function(e){return t._toggleClass(e.item,!1)}))}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!0)})):Object.keys(e).forEach((function(n){return t._toggleClass(n,!!e[n])})))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!1)})):Object.keys(e).forEach((function(e){return t._toggleClass(e,!1)})))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach((function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)}))}},{key:"klass",set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Ko(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}}]),e}()).\u0275fac=function(e){return new(e||ch)(as(Bu),as(Wu),as(bu),as(Cu))},ch.\u0275dir=rn({type:ch,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),ch),ph=function(){function e(t,n,r,a){_classCallCheck(this,e),this.$implicit=t,this.ngForOf=n,this.index=r,this.count=a}return _createClass(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),mh=((hh=function(){function e(t,n,r){_classCallCheck(this,e),this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation((function(e,r,a){if(null==e.previousIndex){var i=t._viewContainer.createEmbeddedView(t._template,new ph(null,t._ngForOf,-1,-1),null===a?void 0:a),o=new vh(e,i);n.push(o)}else if(null==a)t._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=t._viewContainer.get(r);t._viewContainer.move(s,a);var u=new vh(e,s);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var a=0,i=this._viewContainer.length;a<i;a++){var o=this._viewContainer.get(a);o.context.index=a,o.context.count=i,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange((function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item}))}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}},{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(e){ra()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(e),". ")+"See https://angular.io/api/common/NgForOf#change-propagation for more information."),this._trackByFn=e},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||hh)(as(Gu),as(ju),as(Bu))},hh.\u0275dir=rn({type:hh,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),hh),vh=function e(t,n){_classCallCheck(this,e),this.record=t,this.view=n},yh=((fh=function(){function e(t,n){_classCallCheck(this,e),this._viewContainer=t,this._context=new gh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(e,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){_h("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){_h("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||fh)(as(Gu),as(ju))},fh.\u0275dir=rn({type:fh,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),fh),gh=function e(){_classCallCheck(this,e),this.$implicit=null,this.ngIf=null};function _h(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(at(t),"'."))}var bh,xh,wh,kh,Ch,Sh,Ih,Dh,Ah,Th,Eh,Rh=function(){function e(t,n){_classCallCheck(this,e),this._viewContainerRef=t,this._templateRef=n,this._created=!1}return _createClass(e,[{key:"create",value:function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}},{key:"destroy",value:function(){this._created=!1,this._viewContainerRef.clear()}},{key:"enforceState",value:function(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}]),e}(),Oh=((Ih=function(){function e(){_classCallCheck(this,e),this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return _createClass(e,[{key:"_addCase",value:function(){return this._caseCount++}},{key:"_addDefault",value:function(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}},{key:"_matchCase",value:function(e){var t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}},{key:"_updateDefaultCases",value:function(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(var t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}},{key:"ngSwitch",set:function(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}}]),e}()).\u0275fac=function(e){return new(e||Ih)},Ih.\u0275dir=rn({type:Ih,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),Ih),Mh=((Sh=function(){function e(t,n,r){_classCallCheck(this,e),this.ngSwitch=r,r._addCase(),this._view=new Rh(t,n)}return _createClass(e,[{key:"ngDoCheck",value:function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}]),e}()).\u0275fac=function(e){return new(e||Sh)(as(Gu),as(ju),as(Oh,1))},Sh.\u0275dir=rn({type:Sh,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),Sh),Nh=((Ch=function e(t,n,r){_classCallCheck(this,e),r._addDefault(new Rh(t,n))}).\u0275fac=function(e){return new(e||Ch)(as(Gu),as(ju),as(Oh,1))},Ch.\u0275dir=rn({type:Ch,selectors:[["","ngSwitchDefault",""]]}),Ch),Ph=((kh=function(){function e(t,n,r){_classCallCheck(this,e),this._ngEl=t,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._differ){var e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}},{key:"_setStyle",value:function(e,t){var n=_slicedToArray(e.split("."),2),r=n[0],a=n[1];null!=(t=null!=t&&a?"".concat(t).concat(a):t)?this._renderer.setStyle(this._ngEl.nativeElement,r,t):this._renderer.removeStyle(this._ngEl.nativeElement,r)}},{key:"_applyChanges",value:function(e){var t=this;e.forEachRemovedItem((function(e){return t._setStyle(e.key,null)})),e.forEachAddedItem((function(e){return t._setStyle(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._setStyle(e.key,e.currentValue)}))}},{key:"ngStyle",set:function(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}}]),e}()).\u0275fac=function(e){return new(e||kh)(as(bu),as(Wu),as(Cu))},kh.\u0275dir=rn({type:kh,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),kh),Fh=((wh=function(){function e(t){_classCallCheck(this,e),this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}return _createClass(e,[{key:"ngOnChanges",value:function(e){if(this._shouldRecreateView(e)){var t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}},{key:"_shouldRecreateView",value:function(e){var t=e.ngTemplateOutletContext;return!!e.ngTemplateOutlet||t&&this._hasContextShapeChanged(t)}},{key:"_hasContextShapeChanged",value:function(e){var t=Object.keys(e.previousValue||{}),n=Object.keys(e.currentValue||{});if(t.length===n.length){var r,a=_createForOfIteratorHelper(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(-1===t.indexOf(i))return!0}}catch(o){a.e(o)}finally{a.f()}return!1}return!0}},{key:"_updateExistingContext",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this._viewRef.context[r]=this.ngTemplateOutletContext[r]}}}]),e}()).\u0275fac=function(e){return new(e||wh)(as(Gu))},wh.\u0275dir=rn({type:wh,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[ou]}),wh),Lh=((xh=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:xh}),xh.\u0275inj=Ke({factory:function(e){return new(e||xh)},providers:[{provide:sh,useClass:uh}]}),xh),zh=((bh=function e(){_classCallCheck(this,e)}).\u0275prov=Xe({token:bh,providedIn:"root",factory:function(){return new Bh(Ot(Fc),window,Ot(Hr))}}),bh),Bh=function(){function e(t,n,r){_classCallCheck(this,e),this.document=t,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return _createClass(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var t=this.document.querySelector("#".concat(e));if(t)return void this.scrollToElement(t);var n=this.document.querySelector("[name='".concat(e,"']"));if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(n-a[0],r-a[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}]),e}(),Wh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getProperty",value:function(e,t){return e[t]}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"getValue",value:function(e){return e.value}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=qh||(qh=document.querySelector("base"))?qh.getAttribute("href"):null;return null==n?null:(t=n,Dh||(Dh=document.createElement("a")),Dh.setAttribute("href",t),"/"===Dh.pathname.charAt(0)?Dh.pathname:"/"+Dh.pathname)}},{key:"resetBaseElement",value:function(){qh=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return lh(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new n,Mc||(Mc=e)}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this)}return _createClass(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return function e(){_classCallCheck(this,e)}}())),qh=null,Vh=new kt("TRANSITION_ID"),Uh=[{provide:Pl,useFactory:function(e,t,n){return function(){n.get(Fl).donePromise.then((function(){var n=Nc();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[Vh,Fc,Wo],multi:!0}],jh=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){mt.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},mt.getAllAngularTestabilities=function(){return e.getAllTestabilities()},mt.getAllAngularRootElements=function(){return e.getAllRootElements()},mt.frameworkStabilizers||(mt.frameworkStabilizers=[]),mt.frameworkStabilizers.push((function(e){var t=mt.getAllAngularTestabilities(),n=t.length,r=!1,a=function(t){r=r||t,0==--n&&e(r)};t.forEach((function(e){e.whenStable(a)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?Nc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){var t;t=new e,pc=t}}]),e}(),Hh=new kt("EventManagerPlugins"),Gh=((Ah=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=r})),this._plugins=t.slice().reverse()}return _createClass(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var a=n[r];if(a.supports(e))return this._eventNameToPlugin.set(e,a),a}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}()).\u0275fac=function(e){return new(e||Ah)(Ot(Hh),Ot(rc))},Ah.\u0275prov=Xe({token:Ah,factory:Ah.\u0275fac}),Ah),Jh=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=Nc().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),Xh=((Eh=function(){function e(){_classCallCheck(this,e),this._stylesSet=new Set}return _createClass(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}()).\u0275fac=function(e){return new(e||Eh)},Eh.\u0275prov=Xe({token:Eh,factory:Eh.\u0275fac}),Eh),Kh=((Th=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(e.head),r}return _createClass(n,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return Nc().remove(e)}))}}]),n}(Xh)).\u0275fac=function(e){return new(e||Th)(Ot(Fc))},Th.\u0275prov=Xe({token:Th,factory:Th.\u0275fac}),Th),Zh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Yh=/%COMP%/g;function Qh(e,t,n){for(var r=0;r<t.length;r++){var a=t[r];Array.isArray(a)?Qh(e,a,n):(a=a.replace(Yh,e),n.push(a))}return n}function $h(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var ef,tf,nf,rf,af,of,sf=((ef=function(){function e(t,n,r){_classCallCheck(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new uf(t)}return _createClass(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case Jt.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new lf(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case Jt.Native:case Jt.ShadowDom:return new cf(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=Qh(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ef)(Ot(Gh),Ot(Kh),Ot(Ll))},ef.\u0275prov=Xe({token:ef,factory:ef.\u0275fac}),ef),uf=function(){function e(t){_classCallCheck(this,e),this.eventManager=t,this.data=Object.create(null)}return _createClass(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(Zh[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var a=Zh[r];a?e.setAttributeNS(a,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=Zh[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&ku.DashCase?e.style.setProperty(t,n,r&ku.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&ku.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,$h(n)):this.eventManager.addEventListener(e,t,$h(n))}}]),e}(),lf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;_classCallCheck(this,n),(o=t.call(this,e)).component=a;var s,u=Qh(i+"-"+a.id,a.styles,[]);return r.addStyles(u),o.contentAttr="_ngcontent-%COMP%".replace(Yh,i+"-"+a.id),o.hostAttr=(s=i+"-"+a.id,"_nghost-%COMP%".replace(Yh,s)),o}return _createClass(n,[{key:"applyToHost",value:function(e){_get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=_get(_getPrototypeOf(n.prototype),"createElement",this).call(this,e,t);return _get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(uf),cf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;_classCallCheck(this,n),(o=t.call(this,e)).sharedStylesHost=r,o.hostEl=a,o.component=i,o.shadowRoot=i.encapsulation===Jt.ShadowDom?a.attachShadow({mode:"open"}):a.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=Qh(i.id,i.styles,[]),u=0;u<s.length;u++){var l=document.createElement("style");l.textContent=s[u],o.shadowRoot.appendChild(l)}return o}return _createClass(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return _get(_getPrototypeOf(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(_get(_getPrototypeOf(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(uf),hf=((tf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(Jh)).\u0275fac=function(e){return new(e||tf)(Ot(Fc))},tf.\u0275prov=Xe({token:tf,factory:tf.\u0275fac}),tf),ff=["alt","control","meta","shift"],df={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pf={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mf={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},vf=((af=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var a=n.parseEventName(t),i=n.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return Nc().onAndCancel(e,a.domEventName,i)}))}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var a=n._normalizeKey(t.pop()),i="";if(ff.forEach((function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),i+=e+".")})),i+=a,0!=t.length||0===a.length)return null;var o={};return o.domEventName=r,o.fullKey=i,o}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&pf.hasOwnProperty(t)&&(t=pf[t]))}return df[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ff.forEach((function(r){r!=n&&(0,mf[r])(e)&&(t+=r+".")})),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(a){n.getEventFullKey(a)===e&&r.runGuarded((function(){return t(a)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(Jh)).\u0275fac=function(e){return new(e||af)(Ot(Fc))},af.\u0275prov=Xe({token:af,factory:af.\u0275fac}),af),yf=((rf=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||rf)},rf.\u0275prov=Xe({factory:function(){return Ot(gf)},token:rf,providedIn:"root"}),rf),gf=((nf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r}return _createClass(n,[{key:"sanitize",value:function(e,t){if(null==t)return null;switch(e){case Ia.NONE:return t;case Ia.HTML:return $r(t,"HTML")?Qr(t):Ca(this._doc,String(t));case Ia.STYLE:return $r(t,"Style")?Qr(t):Ta(t);case Ia.SCRIPT:if($r(t,"Script"))return Qr(t);throw new Error("unsafe value used in a script context");case Ia.URL:return ea(t),$r(t,"URL")?Qr(t):sa(String(t));case Ia.RESOURCE_URL:if($r(t,"ResourceURL"))return Qr(t);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(e," (see http://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(e){return new Jr(e)}},{key:"bypassSecurityTrustStyle",value:function(e){return new Xr(e)}},{key:"bypassSecurityTrustScript",value:function(e){return new Kr(e)}},{key:"bypassSecurityTrustUrl",value:function(e){return new Zr(e)}},{key:"bypassSecurityTrustResourceUrl",value:function(e){return new Yr(e)}}]),n}(yf)).\u0275fac=function(e){return new(e||nf)(Ot(Fc))},nf.\u0275prov=Xe({factory:function(){return e=Ot(Ct),new gf(e.get(Fc));var e},token:nf,providedIn:"root"}),nf),_f=gc(Ec,"browser",[{provide:ql,useValue:"browser"},{provide:Wl,useValue:function(){Wh.makeCurrent(),jh.init()},multi:!0},{provide:Fc,useFactory:function(){return function(e){mn=e}(document),document},deps:[]}]),bf=[[],{provide:Io,useValue:"root"},{provide:Hr,useFactory:function(){return new Hr},deps:[]},{provide:Hh,useClass:hf,multi:!0,deps:[Fc,rc,ql]},{provide:Hh,useClass:vf,multi:!0,deps:[Fc]},[],{provide:sf,useClass:sf,deps:[Gh,Kh,Ll]},{provide:wu,useExisting:sf},{provide:Xh,useExisting:Kh},{provide:Kh,useClass:Kh,deps:[Fc]},{provide:fc,useClass:fc,deps:[rc]},{provide:Gh,useClass:Gh,deps:[Hh,rc]},[]],xf=((of=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:Ll,useValue:t.appId},{provide:Vh,useExisting:Ll},Uh]}}}]),e}()).\u0275mod=tn({type:of}),of.\u0275inj=Ke({factory:function(e){return new(e||of)(Ot(of,12))},providers:bf,imports:[Lh,Oc]}),of);function wf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return he(r)?(t.pop(),ke(t,r)):Te(t)}"undefined"!=typeof window&&window;var kf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._value=e,r}return _createClass(n,[{key:"_subscribe",value:function(e){var t=_get(_getPrototypeOf(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new oe;return this._value}},{key:"next",value:function(e){_get(_getPrototypeOf(n.prototype),"next",this).call(this,this._value=e)}},{key:"value",get:function(){return this.getValue()}}]),n}(le),Cf=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Sf={},If=function(){function e(t){_classCallCheck(this,e),this.resultSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Df(e,this.resultSelector))}}]),e}(),Df=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).resultSelector=r,a.active=0,a.values=[],a.observables=[],a}return _createClass(n,[{key:"_next",value:function(e){this.values.push(Sf),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(ge(this,r,r,n))}}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n,r,a){var i=this.values,o=this.toRespond?i[n]===Sf?--this.toRespond:this.toRespond:0;i[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(_e),Af=new re((function(e){return e.complete()}));function Tf(e){return e?function(e){return new re((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Af}function Ef(e){return new re((function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?Ce(n):Tf()).subscribe(t)}))}function Rf(){return Ae(1)}function Of(e,t){return function(n){return n.lift(new Mf(e,t))}}var Mf=function(){function e(t,n){_classCallCheck(this,e),this.predicate=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Nf(e,this.predicate,this.thisArg))}}]),e}(),Nf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).predicate=r,i.thisArg=a,i.count=0,i}return _createClass(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(Z),Pf=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function Ff(e){return function(t){return 0===e?Tf():t.lift(new Lf(e))}}var Lf=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new Pf}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new zf(e,this.total))}}]),e}(),zf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).total=r,a.ring=new Array,a.count=0,a}return _createClass(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,a=0;a<n;a++){var i=t++%n;e.next(r[i])}e.complete()}}]),n}(Z);function Bf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vf;return function(t){return t.lift(new Wf(e))}}var Wf=function(){function e(t){_classCallCheck(this,e),this.errorFactory=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new qf(e,this.errorFactory))}}]),e}(),qf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).errorFactory=r,a.hasValue=!1,a}return _createClass(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(Z);function Vf(){return new Cf}function Uf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new jf(e))}}var jf=function(){function e(t){_classCallCheck(this,e),this.defaultValue=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Hf(e,this.defaultValue))}}]),e}(),Hf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).defaultValue=r,a.isEmpty=!0,a}return _createClass(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(Z);function Gf(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Of((function(t,n){return e(t,n,r)})):$,Ff(1),n?Uf(t):Bf((function(){return new Cf})))}}function Jf(e){return function(t){var n=new Xf(e),r=t.lift(n);return n.caught=r}}var Xf=function(){function e(t){_classCallCheck(this,e),this.selector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Kf(e,this.selector,this.caught))}}]),e}(),Kf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).selector=r,i.caught=a,i}return _createClass(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(i){return void _get(_getPrototypeOf(n.prototype),"error",this).call(this,i)}this._unsubscribeAndRecycle();var r=new fe(this,void 0,void 0);this.add(r);var a=ge(this,t,void 0,void 0,r);a!==r&&this.add(a)}}}]),n}(_e);function Zf(e){return function(t){return 0===e?Tf():t.lift(new Yf(e))}}var Yf=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new Pf}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Qf(e,this.total))}}]),e}(),Qf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).total=r,a.count=0,a}return _createClass(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(Z);function $f(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Of((function(t,n){return e(t,n,r)})):$,Zf(1),n?Uf(t):Bf((function(){return new Cf})))}}var ed=function(){function e(t,n,r){_classCallCheck(this,e),this.predicate=t,this.thisArg=n,this.source=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new td(e,this.predicate,this.thisArg,this.source))}}]),e}(),td=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e)).predicate=r,o.thisArg=a,o.source=i,o.index=0,o.thisArg=a||_assertThisInitialized(o),o}return _createClass(n,[{key:"notifyComplete",value:function(e){this.destination.next(e),this.destination.complete()}},{key:"_next",value:function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(Z);function nd(e,t){return"function"==typeof t?function(n){return n.pipe(nd((function(n,r){return Ce(e(n,r)).pipe(be((function(e,a){return t(n,e,r,a)})))})))}:function(t){return t.lift(new rd(e))}}var rd=function(){function e(t){_classCallCheck(this,e),this.project=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new ad(e,this.project))}}]),e}(),ad=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).project=r,a.index=0,a}return _createClass(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var a=new fe(this,t,n),i=this.destination;i.add(a),this.innerSubscription=ge(this,e,void 0,void 0,a),this.innerSubscription!==a&&i.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||_get(_getPrototypeOf(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e,t,n,r,a){this.destination.next(t)}}]),n}(_e);function id(){return Rf()(wf.apply(void 0,arguments))}function od(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return he(r)?(t.pop(),function(e){return id(t,e,r)}):function(e){return id(t,e)}}function sd(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ud(e,t,n))}}var ud=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new ld(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),ld=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e)).accumulator=r,o._seed=a,o.hasSeed=i,o.index=0,o}return _createClass(n,[{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}},{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}}]),n}(Z);function cd(e,t){return Se(e,t,1)}function hd(){}function fd(e,t,n){return function(r){return r.lift(new dd(e,t,n))}}var dd=function(){function e(t,n,r){_classCallCheck(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new pd(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),pd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e))._tapNext=hd,o._tapError=hd,o._tapComplete=hd,o._tapError=a||hd,o._tapComplete=i||hd,L(r)?(o._context=_assertThisInitialized(o),o._tapNext=r):r&&(o._context=r,o._tapNext=r.next||hd,o._tapError=r.error||hd,o._tapComplete=r.complete||hd),o}return _createClass(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(Z);function md(e){return function(t){return t.lift(new yd(e))}}var vd,yd=function(){function e(t){_classCallCheck(this,e),this.callback=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new gd(e,this.callback))}}]),e}(),gd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).add(new J(r)),a}return n}(Z),_d=function e(t,n){_classCallCheck(this,e),this.id=t,this.url=n},bd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,n),(a=t.call(this,e,r)).navigationTrigger=i,a.restoredState=o,a}return _createClass(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(_d),xd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).urlAfterRedirects=a,i}return _createClass(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(_d),wd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).reason=a,i}return _createClass(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(_d),kd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).error=a,i}return _createClass(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(_d),Cd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=a,o.state=i,o}return _createClass(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(_d),Sd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=a,o.state=i,o}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(_d),Id=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o){var s;return _classCallCheck(this,n),(s=t.call(this,e,r)).urlAfterRedirects=a,s.state=i,s.shouldActivate=o,s}return _createClass(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(_d),Dd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=a,o.state=i,o}return _createClass(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(_d),Ad=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r)).urlAfterRedirects=a,o.state=i,o}return _createClass(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(_d),Td=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),Ed=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Rd=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Od=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Md=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Nd=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Pd=function(){function e(t,n,r){_classCallCheck(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return _createClass(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),Fd=((vd=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||vd)},vd.\u0275cmp=Yt({type:vd,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&hs(0,"router-outlet")},directives:function(){return[Wm]},encapsulation:2}),vd),Ld=function(){function e(t){_classCallCheck(this,e),this.params=t||{}}return _createClass(e,[{key:"has",value:function(e){return this.params.hasOwnProperty(e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function zd(e){return new Ld(e)}function Bd(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Wd(e,t,n){var r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var a={},i=0;i<r.length;i++){var o=r[i],s=e[i];if(o.startsWith(":"))a[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:a}}var qd=function e(t,n){_classCallCheck(this,e),this.routes=t,this.module=n};function Vd(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];Ud(r,jd(t,r))}}function Ud(e,t){if(!e)throw new Error("\n      Invalid configuration of route '".concat(t,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(e))throw new Error("Invalid configuration of route '".concat(t,"': Array cannot be specified"));if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error("Invalid configuration of route '".concat(t,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and children cannot be used together"));if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and loadChildren cannot be used together"));if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': children and loadChildren cannot be used together"));if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and component cannot be used together"));if(e.path&&e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': path and matcher cannot be used together"));if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': routes must have either a path or a matcher specified"));if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '".concat(t,"': path cannot start with a slash"));if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(t,'", redirectTo: "').concat(e.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '".concat(t,"': pathMatch can only be set to 'prefix' or 'full'"));e.children&&Vd(e.children,t)}function jd(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function Hd(e){var t=e.children&&e.children.map(Hd),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Fd),n}function Gd(e,t){var n,r=Object.keys(e),a=Object.keys(t);if(!r||!a||r.length!=a.length)return!1;for(var i=0;i<r.length;i++)if(!Jd(e[n=r[i]],t[n]))return!1;return!0}function Jd(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every((function(e){return t.indexOf(e)>-1})):e===t}function Xd(e){return Array.prototype.concat.apply([],e)}function Kd(e){return e.length>0?e[e.length-1]:null}function Zd(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Yd(e){return vs(e)?e:ms(e)?Ce(Promise.resolve(e)):wf(e)}function Qd(e,t,n){return n?function(e,t){return Gd(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!np(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(n){return Jd(e[n],t[n])}))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,a){if(n.segments.length>a.length)return!!np(n.segments.slice(0,a.length),a)&&!r.hasChildren();if(n.segments.length===a.length){if(!np(n.segments,a))return!1;for(var i in r.children){if(!n.children[i])return!1;if(!e(n.children[i],r.children[i]))return!1}return!0}var o=a.slice(0,n.segments.length),s=a.slice(n.segments.length);return!!np(n.segments,o)&&!!n.children.primary&&t(n.children.primary,r,s)}(t,n,n.segments)}(e.root,t.root)}var $d=function(){function e(t,n,r){_classCallCheck(this,e),this.root=t,this.queryParams=n,this.fragment=r}return _createClass(e,[{key:"toString",value:function(){return op.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=zd(this.queryParams)),this._queryParamMap}}]),e}(),ep=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.segments=t,this.children=n,this.parent=null,Zd(n,(function(e,t){return e.parent=r}))}return _createClass(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return sp(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),e}(),tp=function(){function e(t,n){_classCallCheck(this,e),this.path=t,this.parameters=n}return _createClass(e,[{key:"toString",value:function(){return dp(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=zd(this.parameters)),this._parameterMap}}]),e}();function np(e,t){return e.length===t.length&&e.every((function(e,n){return e.path===t[n].path}))}function rp(e,t){var n=[];return Zd(e.children,(function(e,r){"primary"===r&&(n=n.concat(t(e,r)))})),Zd(e.children,(function(e,r){"primary"!==r&&(n=n.concat(t(e,r)))})),n}var ap=function e(){_classCallCheck(this,e)},ip=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"parse",value:function(e){var t=new gp(e);return new $d(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t,n,r;return"".concat("/".concat(function e(t,n){if(!t.hasChildren())return sp(t);if(n){var r=t.children.primary?e(t.children.primary,!1):"",a=[];return Zd(t.children,(function(t,n){"primary"!==n&&a.push("".concat(n,":").concat(e(t,!1)))})),a.length>0?"".concat(r,"(").concat(a.join("//"),")"):r}var i=rp(t,(function(n,r){return"primary"===r?[e(t.children.primary,!1)]:["".concat(r,":").concat(e(n,!1))]}));return"".concat(sp(t),"/(").concat(i.join("//"),")")}(e.root,!0)),(n=e.queryParams,r=Object.keys(n).map((function(e){var t=n[e];return Array.isArray(t)?t.map((function(t){return"".concat(lp(e),"=").concat(lp(t))})).join("&"):"".concat(lp(e),"=").concat(lp(t))})),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof e.fragment?"#".concat((t=e.fragment,encodeURI(t))):"")}}]),e}(),op=new ip;function sp(e){return e.segments.map((function(e){return dp(e)})).join("/")}function up(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lp(e){return up(e).replace(/%3B/gi,";")}function cp(e){return up(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hp(e){return decodeURIComponent(e)}function fp(e){return hp(e.replace(/\+/g,"%20"))}function dp(e){return"".concat(cp(e.path)).concat((t=e.parameters,Object.keys(t).map((function(e){return";".concat(cp(e),"=").concat(cp(t[e]))})).join("")));var t}var pp=/^[^\/()?;=#]+/;function mp(e){var t=e.match(pp);return t?t[0]:""}var vp=/^[^=?&#]+/,yp=/^[^?&#]+/,gp=function(){function e(t){_classCallCheck(this,e),this.url=t,this.remaining=t}return _createClass(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ep([],{}):new ep([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new ep(e,t)),n}},{key:"parseSegment",value:function(){var e=mp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new tp(hp(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=mp(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=mp(this.remaining);r&&(n=r,this.capture(n))}e[hp(t)]=hp(n)}}},{key:"parseQueryParam",value:function(e){var t,n,r=(t=this.remaining,(n=t.match(vp))?n[0]:"");if(r){this.capture(r);var a="";if(this.consumeOptional("=")){var i=function(e){var t=e.match(yp);return t?t[0]:""}(this.remaining);i&&(a=i,this.capture(a))}var o=fp(r),s=fp(a);if(e.hasOwnProperty(o)){var u=e[o];Array.isArray(u)||(u=[u],e[o]=u),u.push(s)}else e[o]=s}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=mp(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var a=void 0;n.indexOf(":")>-1?(a=n.substr(0,n.indexOf(":")),this.capture(a),this.capture(":")):e&&(a="primary");var i=this.parseChildren();t[a]=1===Object.keys(i).length?i.primary:new ep([],i),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),_p=function(){function e(t){_classCallCheck(this,e),this._root=t}return _createClass(e,[{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=bp(e,this._root);return t?t.children.map((function(e){return e.value})):[]}},{key:"firstChild",value:function(e){var t=bp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=xp(e,this._root);return t.length<2?[]:t[t.length-2].children.map((function(e){return e.value})).filter((function(t){return t!==e}))}},{key:"pathFromRoot",value:function(e){return xp(e,this._root).map((function(e){return e.value}))}},{key:"root",get:function(){return this._root.value}}]),e}();function bp(e,t){if(e===t.value)return t;var n,r=_createForOfIteratorHelper(t.children);try{for(r.s();!(n=r.n()).done;){var a=bp(e,n.value);if(a)return a}}catch(i){r.e(i)}finally{r.f()}return null}function xp(e,t){if(e===t.value)return[t];var n,r=_createForOfIteratorHelper(t.children);try{for(r.s();!(n=r.n()).done;){var a=xp(e,n.value);if(a.length)return a.unshift(t),a}}catch(i){r.e(i)}finally{r.f()}return[]}var wp=function(){function e(t,n){_classCallCheck(this,e),this.value=t,this.children=n}return _createClass(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function kp(e){var t={};return e&&e.children.forEach((function(e){return t[e.value.outlet]=e})),t}var Cp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).snapshot=r,Ep(_assertThisInitialized(a),e),a}return _createClass(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(_p);function Sp(e,t){var n=function(e,t){var n=new Ap([],{},{},"",{},"primary",t,null,e.root,-1,{});return new Tp("",new wp(n,[]))}(e,t),r=new kf([new tp("",{})]),a=new kf({}),i=new kf({}),o=new kf({}),s=new kf(""),u=new Ip(r,a,o,s,i,"primary",t,n.root);return u.snapshot=n.root,new Cp(new wp(u,[]),n)}var Ip=function(){function e(t,n,r,a,i,o,s,u){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=a,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=u}return _createClass(e,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(be((function(e){return zd(e)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(be((function(e){return zd(e)})))),this._queryParamMap}}]),e}();function Dp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var a=n[r],i=n[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(i.component)break;r--}}return function(e){return e.reduce((function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var Ap=function(){function e(t,n,r,a,i,o,s,u,l,c,h){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=a,this.data=i,this.outlet=o,this.component=s,this.routeConfig=u,this._urlSegment=l,this._lastPathIndex=c,this._resolve=h}return _createClass(e,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(e){return e.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=zd(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=zd(this.queryParams)),this._queryParamMap}}]),e}(),Tp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,r)).url=e,Ep(_assertThisInitialized(a),r),a}return _createClass(n,[{key:"toString",value:function(){return Rp(this._root)}}]),n}(_p);function Ep(e,t){t.value._routerState=e,t.children.forEach((function(t){return Ep(e,t)}))}function Rp(e){var t=e.children.length>0?" { ".concat(e.children.map(Rp).join(", ")," } "):"";return"".concat(e.value).concat(t)}function Op(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Gd(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Gd(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!Gd(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Gd(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Mp(e,t){var n,r;return Gd(e.params,t.params)&&np(n=e.url,r=t.url)&&n.every((function(e,t){return Gd(e.parameters,r[t].parameters)}))&&!(!e.parent!=!t.parent)&&(!e.parent||Mp(e.parent,t.parent))}function Np(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Pp(e,t,n,r,a){var i={};return r&&Zd(r,(function(e,t){i[t]=Array.isArray(e)?e.map((function(e){return"".concat(e)})):"".concat(e)})),new $d(n.root===e?t:function e(t,n,r){var a={};return Zd(t.children,(function(t,i){a[i]=t===n?r:e(t,n,r)})),new ep(t.segments,a)}(n.root,e,t),i,a)}var Fp=function(){function e(t,n,r){if(_classCallCheck(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Np(r[0]))throw new Error("Root segment cannot have matrix parameters");var a=r.find((function(e){return"object"==typeof e&&null!=e&&e.outlets}));if(a&&a!==Kd(r))throw new Error("{outlets:{}} has to be the last command")}return _createClass(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),Lp=function e(t,n,r){_classCallCheck(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r};function zp(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:"".concat(e)}function Bp(e,t,n){if(e||(e=new ep([],{})),0===e.segments.length&&e.hasChildren())return Wp(e,t,n);var r=function(e,t,n){for(var r=0,a=t,i={match:!1,pathIndex:0,commandIndex:0};a<e.segments.length;){if(r>=n.length)return i;var o=e.segments[a],s=zp(n[r]),u=r<n.length-1?n[r+1]:null;if(a>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!jp(s,u,o))return i;r+=2}else{if(!jp(s,{},o))return i;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(e,t,n),a=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var i=new ep(e.segments.slice(0,r.pathIndex),{});return i.children.primary=new ep(e.segments.slice(r.pathIndex),e.children),Wp(i,0,a)}return r.match&&0===a.length?new ep(e.segments,{}):r.match&&!e.hasChildren()?qp(e,t,n):r.match?Wp(e,0,a):qp(e,t,n)}function Wp(e,t,n){if(0===n.length)return new ep(e.segments,{});var r=function(e){return"object"!=typeof e[0]||void 0===e[0].outlets?{primary:e}:e[0].outlets}(n),a={};return Zd(r,(function(n,r){null!==n&&(a[r]=Bp(e.children[r],t,n))})),Zd(e.children,(function(e,t){void 0===r[t]&&(a[t]=e)})),new ep(e.segments,a)}function qp(e,t,n){for(var r=e.segments.slice(0,t),a=0;a<n.length;){if("object"==typeof n[a]&&void 0!==n[a].outlets){var i=Vp(n[a].outlets);return new ep(r,i)}if(0===a&&Np(n[0]))r.push(new tp(e.segments[t].path,n[0])),a++;else{var o=zp(n[a]),s=a<n.length-1?n[a+1]:null;o&&s&&Np(s)?(r.push(new tp(o,Up(s))),a+=2):(r.push(new tp(o,{})),a++)}}return new ep(r,{})}function Vp(e){var t={};return Zd(e,(function(e,n){null!==e&&(t[n]=qp(new ep([],{}),0,e))})),t}function Up(e){var t={};return Zd(e,(function(e,n){return t[n]="".concat(e)})),t}function jp(e,t,n){return e==n.path&&Gd(t,n.parameters)}var Hp=function(){function e(t,n,r,a){_classCallCheck(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=a}return _createClass(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Op(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,a=kp(t);e.children.forEach((function(e){var t=e.value.outlet;r.deactivateRoutes(e,a[t],n),delete a[t]})),Zd(a,(function(e,t){r.deactivateRouteAndItsChildren(e,n)}))}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,a=t?t.value:null;if(r===a)if(r.component){var i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else a&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:a})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){var n=this,r=t.getContext(e.value.outlet);if(r){var a=kp(e),i=e.value.component?r.children:t;Zd(a,(function(e,t){return n.deactivateRouteAndItsChildren(e,i)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,a=kp(t);e.children.forEach((function(e){r.activateRoutes(e,a[e.value.outlet],n),r.forwardEvent(new Nd(e.value.snapshot))})),e.children.length&&this.forwardEvent(new Od(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,a=t?t.value:null;if(Op(r),r===a)if(r.component){var i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),Gp(s.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),l=u?u.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function Gp(e){Op(e.value),e.children.forEach(Gp)}function Jp(e){return"function"==typeof e}function Xp(e){return e instanceof $d}var Kp=function e(t){_classCallCheck(this,e),this.segmentGroup=t||null},Zp=function e(t){_classCallCheck(this,e),this.urlTree=t};function Yp(e){return new re((function(t){return t.error(new Kp(e))}))}function Qp(e){return new re((function(t){return t.error(new Zp(e))}))}function $p(e){return new re((function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))}))}var em=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=a,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Lt)}return _createClass(e,[{key:"apply",value:function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(be((function(t){return e.createUrlTree(t,e.urlTree.queryParams,e.urlTree.fragment)}))).pipe(Jf((function(t){if(t instanceof Zp)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof Kp)throw e.noMatchError(t);throw t})))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(be((function(n){return t.createUrlTree(n,e.queryParams,e.fragment)}))).pipe(Jf((function(e){if(e instanceof Kp)throw t.noMatchError(e);throw e})))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var r=e.segments.length>0?new ep([],{primary:e}):e;return new $d(r,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(be((function(e){return new ep([],e)}))):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){var r=this;return function(n,a){if(0===Object.keys(n).length)return wf({});var i=[],o=[],s={};return Zd(n,(function(n,a){var u,l,c=(u=a,l=n,r.expandSegmentGroup(e,t,l,u)).pipe(be((function(e){return s[a]=e})));"primary"===a?i.push(c):o.push(c)})),wf.apply(null,i.concat(o)).pipe(Rf(),Gf(),be((function(){return s})))}(n.children)}},{key:"expandSegment",value:function(e,t,n,r,a,i){var o=this;return wf.apply(void 0,_toConsumableArray(n)).pipe(be((function(s){return o.expandSegmentAgainstRoute(e,t,n,s,r,a,i).pipe(Jf((function(e){if(e instanceof Kp)return wf(null);throw e})))})),Rf(),$f((function(e){return!!e})),Jf((function(e,n){if(e instanceof Cf||"EmptyError"===e.name){if(o.noLeftoversInUrl(t,r,a))return wf(new ep([],{}));throw new Kp(t)}throw e})))}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,a,i,o){return am(r)!==i?Yp(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,a):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,a,i):Yp(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,a,i){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,a,i)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var a=this,i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Qp(i):this.lineralizeSegments(n,i).pipe(Se((function(n){var i=new ep(n,{});return a.expandSegment(e,i,t,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,a,i){var o=this,s=tm(t,r,a),u=s.matched,l=s.consumedSegments,c=s.lastChild,h=s.positionalParamSegments;if(!u)return Yp(t);var f=this.applyRedirectCommands(l,r.redirectTo,h);return r.redirectTo.startsWith("/")?Qp(f):this.lineralizeSegments(r,f).pipe(Se((function(r){return o.expandSegment(e,t,n,r.concat(a.slice(c)),i,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r){var a=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(be((function(e){return n._loadedConfig=e,new ep(r,{})}))):wf(new ep(r,{}));var i=tm(t,n,r),o=i.matched,s=i.consumedSegments,u=i.lastChild;if(!o)return Yp(t);var l=r.slice(u);return this.getChildConfig(e,n,r).pipe(Se((function(e){var n=e.module,r=e.routes,i=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some((function(n){return rm(e,t,n)&&"primary"!==am(n)}))}(e,n,r)?{segmentGroup:nm(new ep(t,function(e,t){var n={};n.primary=t;var r,a=_createForOfIteratorHelper(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;""===i.path&&"primary"!==am(i)&&(n[am(i)]=new ep([],{}))}}catch(o){a.e(o)}finally{a.f()}return n}(r,new ep(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some((function(n){return rm(e,t,n)}))}(e,n,r)?{segmentGroup:nm(new ep(e.segments,function(e,t,n,r){var a,i={},o=_createForOfIteratorHelper(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;rm(e,t,s)&&!r[am(s)]&&(i[am(s)]=new ep([],{}))}}catch(u){o.e(u)}finally{o.f()}return Object.assign(Object.assign({},r),i)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,s,l,r),o=i.segmentGroup,u=i.slicedSegments;return 0===u.length&&o.hasChildren()?a.expandChildren(n,r,o).pipe(be((function(e){return new ep(s,e)}))):0===r.length&&0===u.length?wf(new ep(s,{})):a.expandSegment(n,o,r,u,"primary",!0).pipe(be((function(e){return new ep(s.concat(e.segments),e.children)})))})))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?wf(new qd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?wf(t._loadedConfig):function(e,t,n){var r,a=t.canLoad;return a&&0!==a.length?Ce(a).pipe(be((function(r){var a,i=e.get(r);if(function(e){return e&&Jp(e.canLoad)}(i))a=i.canLoad(t,n);else{if(!Jp(i))throw new Error("Invalid CanLoad guard");a=i(t,n)}return Yd(a)}))).pipe(Rf(),(r=function(e){return!0===e},function(e){return e.lift(new ed(r,void 0,e))})):wf(!0)}(e.injector,t,n).pipe(Se((function(n){return n?r.configLoader.load(e.injector,t).pipe(be((function(e){return t._loadedConfig=e,e}))):function(e){return new re((function(t){return t.error(Bd("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))}))}(t)}))):wf(new qd([],e))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return wf(n);if(r.numberOfChildren>1||!r.children.primary)return $p(e.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var a=this.createSegmentGroup(e,t.root,n,r);return new $d(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return Zd(e,(function(e,r){if("string"==typeof e&&e.startsWith(":")){var a=e.substring(1);n[r]=t[a]}else n[r]=e})),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var a=this,i=this.createSegments(e,t.segments,n,r),o={};return Zd(t.children,(function(t,i){o[i]=a.createSegmentGroup(e,t,n,r)})),new ep(i,o)}},{key:"createSegments",value:function(e,t,n,r){var a=this;return t.map((function(t){return t.path.startsWith(":")?a.findPosParam(e,t,r):a.findOrReturn(t,n)}))}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.path===e.path)return t.splice(r),i;r++}}catch(o){a.e(o)}finally{a.f()}return e}}]),e}();function tm(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(t.matcher||Wd)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function nm(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new ep(e.segments.concat(t.segments),t.children)}return e}function rm(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function am(e){return e.outlet||"primary"}var im=function e(t){_classCallCheck(this,e),this.path=t,this.route=this.path[this.path.length-1]},om=function e(t,n){_classCallCheck(this,e),this.component=t,this.route=n};function sm(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function um(e,t,n){var r=kp(e),a=e.value;Zd(r,(function(e,r){um(e,a.component?t?t.children.getContext(r):null:t,n)})),n.canDeactivateChecks.push(new om(a.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,a))}var lm=Symbol("INITIAL_VALUE");function cm(){return nd((function(e){return(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=null,a=null;return he(t[t.length-1])&&(a=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&V(t[0])&&(t=t[0]),Te(t,a).lift(new If(r))}).apply(void 0,_toConsumableArray(e.map((function(e){return e.pipe(Zf(1),od(lm))})))).pipe(sd((function(e,t){var n=!1;return t.reduce((function(e,r,a){if(e!==lm)return e;if(r===lm&&(n=!0),!n){if(!1===r)return r;if(a===t.length-1||Xp(r))return r}return e}),e)}),lm),Of((function(e){return e!==lm})),be((function(e){return Xp(e)?e:!0===e})),Zf(1))}))}function hm(e,t){return null!==e&&t&&t(new Md(e)),wf(!0)}function fm(e,t){return null!==e&&t&&t(new Rd(e)),wf(!0)}function dm(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?wf(r.map((function(r){return Ef((function(){var a,i=sm(r,t,n);if(function(e){return e&&Jp(e.canActivate)}(i))a=Yd(i.canActivate(t,e));else{if(!Jp(i))throw new Error("Invalid CanActivate guard");a=Yd(i(t,e))}return a.pipe($f())}))}))).pipe(cm()):wf(!0)}function pm(e,t,n){var r=t[t.length-1],a=t.slice(0,t.length-1).reverse().map((function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)})).filter((function(e){return null!==e})).map((function(t){return Ef((function(){return wf(t.guards.map((function(a){var i,o=sm(a,t.node,n);if(function(e){return e&&Jp(e.canActivateChild)}(o))i=Yd(o.canActivateChild(r,e));else{if(!Jp(o))throw new Error("Invalid CanActivateChild guard");i=Yd(o(r,e))}return i.pipe($f())}))).pipe(cm())}))}));return wf(a).pipe(cm())}var mm=function e(){_classCallCheck(this,e)},vm=function(){function e(t,n,r,a,i,o){_classCallCheck(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}return _createClass(e,[{key:"recognize",value:function(){try{var e=_m(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),n=new Ap([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new wp(n,t),a=new Tp(this.url,r);return this.inheritParamsAndData(a._root),wf(a)}catch(i){return new re((function(e){return e.error(i)}))}}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=Dp(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach((function(e){return t.inheritParamsAndData(e)}))}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){var n,r=this,a=rp(t,(function(t,n){return r.processSegmentGroup(e,t,n)}));return n={},a.forEach((function(e){var t=n[e.value.outlet];if(t){var r=t.url.map((function(e){return e.toString()})).join("/"),a=e.value.url.map((function(e){return e.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(a,"'."))}n[e.value.outlet]=e.value})),a.sort((function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)})),a}},{key:"processSegment",value:function(e,t,n,r){var a,i=_createForOfIteratorHelper(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;try{return this.processSegmentAgainstRoute(o,t,n,r)}catch(s){if(!(s instanceof mm))throw s}}}catch(u){i.e(u)}finally{i.f()}if(this.noLeftoversInUrl(t,n,r))return[];throw new mm}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo)throw new mm;if((e.outlet||"primary")!==r)throw new mm;var a,i=[],o=[];if("**"===e.path){var s=n.length>0?Kd(n).parameters:{};a=new Ap(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wm(e),r,e.component,e,ym(t),gm(t)+n.length,km(e))}else{var u=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new mm;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(t.matcher||Wd)(n,e,t);if(!r)throw new mm;var a={};Zd(r.posParams,(function(e,t){a[t]=e.path}));var i=r.consumed.length>0?Object.assign(Object.assign({},a),r.consumed[r.consumed.length-1].parameters):a;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:i}}(t,e,n);i=u.consumedSegments,o=n.slice(u.lastChild),a=new Ap(i,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wm(e),r,e.component,e,ym(t),gm(t)+i.length,km(e))}var l=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),c=_m(t,i,o,l,this.relativeLinkResolution),h=c.segmentGroup,f=c.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(l,h);return[new wp(a,d)]}if(0===l.length&&0===f.length)return[new wp(a,[])];var p=this.processSegment(l,h,f,"primary");return[new wp(a,p)]}}]),e}();function ym(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function gm(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function _m(e,t,n,r,a){if(n.length>0&&function(e,t,n){return n.some((function(n){return bm(e,t,n)&&"primary"!==xm(n)}))}(e,n,r)){var i=new ep(t,function(e,t,n,r){var a={};a.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var i,o=_createForOfIteratorHelper(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(""===s.path&&"primary"!==xm(s)){var u=new ep([],{});u._sourceSegment=e,u._segmentIndexShift=t.length,a[xm(s)]=u}}}catch(l){o.e(l)}finally{o.f()}return a}(e,t,r,new ep(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some((function(n){return bm(e,t,n)}))}(e,n,r)){var o=new ep(e.segments,function(e,t,n,r,a,i){var o,s={},u=_createForOfIteratorHelper(r);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(bm(e,n,l)&&!a[xm(l)]){var c=new ep([],{});c._sourceSegment=e,c._segmentIndexShift="legacy"===i?e.segments.length:t.length,s[xm(l)]=c}}}catch(h){u.e(h)}finally{u.f()}return Object.assign(Object.assign({},a),s)}(e,t,n,r,e.children,a));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}var s=new ep(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function bm(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function xm(e){return e.outlet||"primary"}function wm(e){return e.data||{}}function km(e){return e.resolve||{}}function Cm(e,t,n,r){var a=sm(e,t,r);return Yd(a.resolve?a.resolve(t,n):a(t,n))}function Sm(e){return function(t){return t.pipe(nd((function(t){var n=e(t);return n?Ce(n).pipe(be((function(){return t}))):Ce([t])})))}}var Im=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}(),Dm=new kt("ROUTES"),Am=function(){function e(t,n,r,a){_classCallCheck(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=a}return _createClass(e,[{key:"load",value:function(e,t){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(be((function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var a=r.create(e);return new qd(Xd(a.injector.get(Dm)).map(Hd),a)})))}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?Ce(this.loader.load(e)):Yd(e()).pipe(Se((function(e){return e instanceof zt?wf(e):Ce(t.compiler.compileModuleAsync(e))})))}}]),e}(),Tm=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function Em(e){throw e}function Rm(e,t,n){return t.parse("/")}function Om(e,t){return wf(null)}var Mm,Nm,Pm,Fm,Lm=((Mm=function(){function e(t,n,r,a,i,o,s,u){var l=this;_classCallCheck(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=a,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new le,this.errorHandler=Em,this.malformedUriErrorHandler=Rm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Om,afterPreactivation:Om},this.urlHandlingStrategy=new Tm,this.routeReuseStrategy=new Im,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Lt),this.console=i.get(Ul);var c=i.get(rc);this.isNgZoneEnabled=c instanceof rc,this.resetConfig(u),this.currentUrlTree=new $d(new ep([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Am(o,s,(function(e){return l.triggerEvent(new Td(e))}),(function(e){return l.triggerEvent(new Ed(e))})),this.routerState=Sp(this.currentUrlTree,this.rootComponentType),this.transitions=new kf({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(e,[{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(Of((function(e){return 0!==e.id})),be((function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})})),nd((function(e){var r,a,i,o=!1,s=!1;return wf(e).pipe(fd((function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}})),nd((function(e){var r,a,i,o,s=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||s)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return wf(e).pipe(nd((function(e){var r=t.transitions.getValue();return n.next(new bd(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?Af:[e]})),nd((function(e){return Promise.resolve(e)})),(r=t.ngModule.injector,a=t.configLoader,i=t.urlSerializer,o=t.config,function(e){return e.pipe(nd((function(e){return function(e,t,n,r,a){return new em(e,t,n,r,a).apply()}(r,a,i,e.extractedUrl,o).pipe(be((function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})})))})))}),fd((function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})})),function(e,n,r,a,i){return function(r){return r.pipe(Se((function(r){return function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new vm(e,t,n,r,a,i).recognize()}(e,n,r.urlAfterRedirects,(o=r.urlAfterRedirects,t.serializeUrl(o)),a,i).pipe(be((function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})})));var o})))}}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),fd((function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),fd((function(e){var r=new Cd(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)})));if(s&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var u=e.id,l=e.extractedUrl,c=e.source,h=e.restoredState,f=e.extras,d=new bd(u,t.serializeUrl(l),c,h);n.next(d);var p=Sp(l,t.rootComponentType).snapshot;return wf(Object.assign(Object.assign({},e),{targetSnapshot:p,urlAfterRedirects:l,extras:Object.assign(Object.assign({},f),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Af})),Sm((function(e){var n=e.targetSnapshot,r=e.id,a=e.extractedUrl,i=e.rawUrl,o=e.extras,s=o.skipLocationChange,u=o.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:a,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!u})})),fd((function(e){var n=new Sd(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),be((function(e){return Object.assign(Object.assign({},e),{guards:(n=e.targetSnapshot,r=e.currentSnapshot,a=t.rootContexts,i=n._root,function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=kp(n);return t.children.forEach((function(t){!function(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=t.value,s=n?n.value:null,u=r?r.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){var l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!np(e.url,t.url);case"pathParamsOrQueryParamsChange":return!np(e.url,t.url)||!Gd(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mp(e,t)||!Gd(e.queryParams,t.queryParams);case"paramsChange":default:return!Mp(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new im(a)):(o.data=s.data,o._resolvedData=s._resolvedData),e(t,n,o.component?u?u.children:null:r,a,i),l&&i.canDeactivateChecks.push(new om(u&&u.outlet&&u.outlet.component||null,s))}else s&&um(n,u,i),i.canActivateChecks.push(new im(a)),e(t,null,o.component?u?u.children:null:r,a,i)}(t,o[t.value.outlet],r,a.concat([t.value]),i),delete o[t.value.outlet]})),Zd(o,(function(e,t){return um(e,r.getContext(t),i)})),i}(i,r?r._root:null,a,[i.value]))});var n,r,a,i})),function(e,t){return function(n){return n.pipe(Se((function(n){var r=n.targetSnapshot,a=n.currentSnapshot,i=n.guards,o=i.canActivateChecks,s=i.canDeactivateChecks;return 0===s.length&&0===o.length?wf(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return Ce(e).pipe(Se((function(e){return function(e,t,n,r,a){var i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return i&&0!==i.length?wf(i.map((function(i){var o,s=sm(i,t,a);if(function(e){return e&&Jp(e.canDeactivate)}(s))o=Yd(s.canDeactivate(e,t,n,r));else{if(!Jp(s))throw new Error("Invalid CanDeactivate guard");o=Yd(s(e,t,n,r))}return o.pipe($f())}))).pipe(cm()):wf(!0)}(e.component,e.route,n,t,r)})),$f((function(e){return!0!==e}),!0))}(s,r,a,e).pipe(Se((function(n){return n&&"boolean"==typeof n?function(e,t,n,r){return Ce(t).pipe(cd((function(t){return Ce([fm(t.route.parent,r),hm(t.route,r),pm(e,t.path,n),dm(e,t.route,n)]).pipe(Rf(),$f((function(e){return!0!==e}),!0))})),$f((function(e){return!0!==e}),!0))}(r,o,e,t):wf(n)})),be((function(e){return Object.assign(Object.assign({},n),{guardsResult:e})})))})))}}(t.ngModule.injector,(function(e){return t.triggerEvent(e)})),fd((function(e){if(Xp(e.guardsResult)){var n=Bd('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}})),fd((function(e){var n=new Id(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(n)})),Of((function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var r=new wd(e.id,t.serializeUrl(e.extractedUrl),"");return n.next(r),e.resolve(!1),!1}return!0})),Sm((function(e){if(e.guards.canActivateChecks.length)return wf(e).pipe(fd((function(e){var n=new Dd(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),(n=t.paramsInheritanceStrategy,r=t.ngModule.injector,function(e){return e.pipe(Se((function(e){var t=e.targetSnapshot,a=e.guards.canActivateChecks;return a.length?Ce(a).pipe(cd((function(e){return function(e,t,n,r){return function(e,t,n,r){var a=Object.keys(e);if(0===a.length)return wf({});if(1===a.length){var i=a[0];return Cm(e[i],t,n,r).pipe(be((function(e){return _defineProperty({},i,e)})))}var o={};return Ce(a).pipe(Se((function(a){return Cm(e[a],t,n,r).pipe(be((function(e){return o[a]=e,e})))}))).pipe(Gf(),be((function(){return o})))}(e._resolve,e,t,r).pipe(be((function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Dp(e,n).resolve),null})))}(e.route,t,n,r)})),function(e,t){return arguments.length>=2?function(n){return ee(sd(e,t),Ff(1),Uf(t))(n)}:function(t){return ee(sd((function(t,n,r){return e(t,n,r+1)})),Ff(1))(t)}}((function(e,t){return e})),be((function(t){return e}))):wf(e)})))}),fd((function(e){var n=new Ad(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})));var n,r})),Sm((function(e){var n=e.targetSnapshot,r=e.id,a=e.extractedUrl,i=e.rawUrl,o=e.extras,s=o.skipLocationChange,u=o.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:a,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!u})})),be((function(e){var n=function(e,t,n){var r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){var a=r.value;a._futureSnapshot=n.value;var i=function(t,n,r){return n.children.map((function(n){var a,i=_createForOfIteratorHelper(r.children);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(t.shouldReuseRoute(o.value.snapshot,n.value))return e(t,n,o)}}catch(s){i.e(s)}finally{i.f()}return e(t,n)}))}(t,n,r);return new wp(a,i)}var o=t.retrieve(n.value);if(o){var s=o.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(var r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,s),s}var u,l=new Ip(new kf((u=n.value).url),new kf(u.params),new kf(u.queryParams),new kf(u.fragment),new kf(u.data),u.outlet,u.component,u),c=n.children.map((function(n){return e(t,n)}));return new wp(l,c)}(e,t._root,n?n._root:void 0);return new Cp(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})})),fd((function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),(r=t.rootContexts,a=t.routeReuseStrategy,i=function(e){return t.triggerEvent(e)},be((function(e){return new Hp(a,e.targetRouterState,e.currentRouterState,i).activate(r),e}))),fd({next:function(){o=!0},complete:function(){o=!0}}),md((function(){if(!o&&!s){t.resetUrlToCurrentUrlTree();var r=new wd(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));n.next(r),e.resolve(!1)}t.currentNavigation=null})),Jf((function(r){if(s=!0,(u=r)&&u.ngNavigationCancelingError){var a=Xp(r.url);a||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var i=new wd(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(i),a?setTimeout((function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree);return t.scheduleNavigation(n,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})}),0):e.resolve(!1)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var o=new kd(e.id,t.serializeUrl(e.extractedUrl),r);n.next(o);try{e.resolve(t.errorHandler(r))}catch(l){e.reject(l)}}var u;return Af})))})))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(t){var n=e.parseUrl(t.url),r="popstate"===t.type?"popstate":"hashchange",a=t.state&&t.state.navigationId?t.state:null;setTimeout((function(){e.scheduleNavigation(n,r,a,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){Vd(e),this.config=e.map(Hd),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,a=t.fragment,i=t.preserveQueryParams,o=t.queryParamsHandling,s=t.preserveFragment;ra()&&i&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var u=n||this.routerState.root,l=s?this.currentUrlTree.fragment:a,c=null;if(o)switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}else c=i?this.currentUrlTree.queryParams:r||null;return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,r,a){if(0===n.length)return Pp(t.root,t.root,t,r,a);var i=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Fp(!0,0,e);var t=0,n=!1,r=e.reduce((function(e,r,a){if("object"==typeof r&&null!=r){if(r.outlets){var i={};return Zd(r.outlets,(function(e,t){i[t]="string"==typeof e?e.split("/"):e})),[].concat(_toConsumableArray(e),[{outlets:i}])}if(r.segmentPath)return[].concat(_toConsumableArray(e),[r.segmentPath])}return"string"!=typeof r?[].concat(_toConsumableArray(e),[r]):0===a?(r.split("/").forEach((function(r,a){0==a&&"."===r||(0==a&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))})),e):[].concat(_toConsumableArray(e),[r])}),[]);return new Fp(n,t,r)}(n);if(i.toRoot())return Pp(t.root,new ep([],{}),t,r,a);var o=function(e,t,n){if(e.isAbsolute)return new Lp(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new Lp(n.snapshot._urlSegment,!0,0);var r=Np(e.commands[0])?0:1;return function(e,t,n){for(var r=e,a=t,i=n;i>a;){if(i-=a,!(r=r.parent))throw new Error("Invalid number of '../'");a=r.segments.length}return new Lp(r,!1,a-i)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(i,t,e),s=o.processChildren?Wp(o.segmentGroup,o.index,i.commands):Bp(o.segmentGroup,o.index,i.commands);return Pp(o.segmentGroup,s,t,r,a)}(u,this.currentUrlTree,e,c,l)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};ra()&&this.isNgZoneEnabled&&!rc.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=Xp(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){if(Xp(e))return Qd(this.currentUrlTree,e,t);var n=this.parseUrl(e);return Qd(this.currentUrlTree,n,t)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return null!=r&&(t[n]=r),t}),{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe((function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new xd(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,t.resolve(!0)}),(function(t){e.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(e,t,n,r,a){var i,o,s,u=this.getTransition();if(u&&"imperative"!==t&&"imperative"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"hashchange"==t&&"popstate"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"popstate"==t&&"hashchange"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);a?(i=a.resolve,o=a.reject,s=a.promise):s=new Promise((function(e,t){i=e,o=t}));var l=++this.navigationId;return this.setTransition({id:l,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:i,reject:o,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(e){return Promise.reject(e)}))}},{key:"setBrowserUrl",value:function(e,t,n,r){var a=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(a)||t?this.location.replaceState(a,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(a,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),e}()).\u0275fac=function(e){os()},Mm.\u0275dir=rn({type:Mm}),Mm),zm=function e(){_classCallCheck(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new Bm,this.attachRef=null},Bm=function(){function e(){_classCallCheck(this,e),this.contexts=new Map}return _createClass(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new zm,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),Wm=((Nm=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new fl,this.deactivateEvents=new fl,this.name=a||"primary",t.onChildOutletCreated(this.name,this)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,a=new qm(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,a),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),e}()).\u0275fac=function(e){return new(e||Nm)(as(Bm),as(Gu),as(_u),is("name"),as(Co))},Nm.\u0275dir=rn({type:Nm,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),Nm),qm=function(){function e(t,n,r){_classCallCheck(this,e),this.route=t,this.childContexts=n,this.parent=r}return _createClass(e,[{key:"get",value:function(e,t){return e===Ip?this.route:e===Bm?this.childContexts:this.parent.get(e,t)}}]),e}(),Vm=function e(){_classCallCheck(this,e)},Um=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return wf(null)}}]),e}(),jm=((Fm=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this.router=t,this.injector=a,this.preloadingStrategy=i,this.loader=new Am(n,r,(function(e){return t.triggerEvent(new Td(e))}),(function(e){return t.triggerEvent(new Ed(e))}))}return _createClass(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(Of((function(e){return e instanceof xd})),cd((function(){return e.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var e=this.injector.get(Lt);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.loadChildren&&!i.canLoad&&i._loadedConfig){var o=i._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else i.loadChildren&&!i.canLoad?r.push(this.preloadConfig(e,i)):i.children&&r.push(this.processRoutes(e,i.children))}}catch(s){a.e(s)}finally{a.f()}return Ce(r).pipe(Ae(),be((function(e){})))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,(function(){return n.loader.load(e.injector,t).pipe(Se((function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)})))}))}}]),e}()).\u0275fac=function(e){return new(e||Fm)(Ot(Lm),Ot(Sc),Ot($l),Ot(Wo),Ot(Vm))},Fm.\u0275prov=Xe({token:Fm,factory:Fm.\u0275fac}),Fm),Hm=((Pm=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _createClass(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof bd?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xd&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof Pd&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new Pd(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){os()},Pm.\u0275dir=rn({type:Pm}),Pm),Gm=new kt("ROUTER_CONFIGURATION"),Jm=new kt("ROUTER_FORROOT_GUARD"),Xm=[nh,{provide:ap,useClass:ip},{provide:Lm,useFactory:function(e,t,n,r,a,i,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,c=new Lm(null,e,t,n,r,a,i,Xd(o));if(u&&(c.urlHandlingStrategy=u),l&&(c.routeReuseStrategy=l),s.errorHandler&&(c.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(c.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){var h=Nc();c.events.subscribe((function(e){h.logGroup("Router Event: ".concat(e.constructor.name)),h.log(e.toString()),h.log(e),h.logGroupEnd()}))}return s.onSameUrlNavigation&&(c.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(c.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(c.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(c.relativeLinkResolution=s.relativeLinkResolution),c},deps:[ap,Bm,nh,Wo,Sc,$l,Dm,Gm,[function(){return function e(){_classCallCheck(this,e)}}(),new Ve],[function(){return function e(){_classCallCheck(this,e)}}(),new Ve]]},Bm,{provide:Ip,useFactory:function(e){return e.routerState.root},deps:[Lm]},{provide:Sc,useClass:Ac},jm,Um,function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return t().pipe(Jf((function(){return wf(null)})))}}]),e}(),{provide:Gm,useValue:{enableTracing:!1}}];function Km(){return new yc("Router",Lm)}var Zm,Ym=((Zm=function(){function e(t,n){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[Xm,tv(t),{provide:Jm,useFactory:ev,deps:[[Lm,new Ve,new je]]},{provide:Gm,useValue:n||{}},{provide:Xc,useFactory:$m,deps:[Lc,[new qe($c),new Ve],Gm]},{provide:Hm,useFactory:Qm,deps:[Lm,zh,Gm]},{provide:Vm,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Um},{provide:yc,multi:!0,useFactory:Km},[rv,{provide:Pl,multi:!0,useFactory:av,deps:[rv]},{provide:sv,useFactory:iv,deps:[rv]},{provide:Vl,multi:!0,useExisting:sv}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[tv(t)]}}}]),e}()).\u0275mod=tn({type:Zm}),Zm.\u0275inj=Ke({factory:function(e){return new(e||Zm)(Ot(Jm,8),Ot(Lm,8))}}),Zm);function Qm(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Hm(e,t,n)}function $m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new th(e,t):new eh(e,t)}function ev(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function tv(e){return[{provide:qo,multi:!0,useValue:e},{provide:Dm,multi:!0,useValue:e}]}var nv,rv=((nv=function(){function e(t){_classCallCheck(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new le}return _createClass(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(Wc,Promise.resolve(null)).then((function(){var t=null,n=new Promise((function(e){return t=e})),r=e.injector.get(Lm),a=e.injector.get(Gm);if(e.isLegacyDisabled(a)||e.isLegacyEnabled(a))t(!0);else if("disabled"===a.initialNavigation)r.setUpLocationChangeListener(),t(!0);else{if("enabled"!==a.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(a.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return e.initNavigation?wf(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(Gm),n=this.injector.get(jm),r=this.injector.get(Hm),a=this.injector.get(Lm),i=this.injector.get(kc);e===i.components[0]&&(this.isLegacyEnabled(t)?a.initialNavigation():this.isLegacyDisabled(t)&&a.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),a.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}},{key:"isLegacyDisabled",value:function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}]),e}()).\u0275fac=function(e){return new(e||nv)(Ot(Wo))},nv.\u0275prov=Xe({token:nv,factory:nv.\u0275fac}),nv);function av(e){return e.appInitializer.bind(e)}function iv(e){return e.bootstrapListener.bind(e)}var ov,sv=new kt("Router Initializer"),uv=[[{name:"US",date:"Jan 6 \u2013 12, 2019",hasData:!0,query:"Infinity War",value:37},{name:"CA",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:46},{name:"MX",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:24},{name:"RU",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:37},{name:"DE",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:18},{name:"TR",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:25},{name:"GB",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:23},{name:"FR",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:9},{name:"IT",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:23},{name:"ES",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:22},{name:"UA",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:19},{name:"PL",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:15},{name:"RO",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:34},{name:"IN",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:16},{name:"ID",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:18},{name:"PK",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:25},{name:"JP",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:7},{name:"PH",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:17},{name:"VN",date:"Jan 6 \u2013 12, 2019",hasData:!0,value:12}],[{name:"US",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:30},{name:"CA",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:30},{name:"MX",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:27},{name:"RU",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:38},{name:"DE",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:16},{name:"TR",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:29},{name:"GB",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:19},{name:"FR",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:9},{name:"IT",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:16},{name:"ES",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:16},{name:"UA",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:18},{name:"PL",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:16},{name:"RO",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:17},{name:"CN",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:100},{name:"IN",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:15},{name:"ID",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:15},{name:"PK",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:18},{name:"JP",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:19},{name:"PH",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:14},{name:"VN",date:"Jan 13 \u2013 19, 2019",hasData:!0,value:8}],[{name:"US",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:23},{name:"CA",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:25},{name:"MX",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:19},{name:"RU",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:34},{name:"DE",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:14},{name:"TR",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:26},{name:"GB",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:17},{name:"FR",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:9},{name:"IT",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:14},{name:"ES",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:19},{name:"UA",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:35},{name:"PL",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:11},{name:"RO",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:22},{name:"IN",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:15},{name:"ID",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:15},{name:"PK",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:29},{name:"JP",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:13},{name:"PH",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:13},{name:"VN",date:"Jan 20 \u2013 26, 2019",hasData:!0,value:8}],[{name:"US",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:21},{name:"CA",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:20},{name:"MX",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:21},{name:"RU",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:22},{name:"DE",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:15},{name:"TR",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:27},{name:"GB",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:13},{name:"FR",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:7},{name:"IT",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:11},{name:"ES",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:14},{name:"UA",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:53},{name:"PL",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:12},{name:"RO",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:18},{name:"IN",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:14},{name:"ID",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:16},{name:"PK",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:24},{name:"JP",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:11},{name:"PH",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:10},{name:"VN",date:"Jan 27 \u2013 Feb 2, 2019",hasData:!0,value:12}],[{name:"US",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:21},{name:"CA",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:21},{name:"MX",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:20},{name:"RU",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:17},{name:"DE",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:16},{name:"TR",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:20},{name:"GB",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:14},{name:"FR",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:7},{name:"IT",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:13},{name:"ES",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:16},{name:"UA",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:17},{name:"PL",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:10},{name:"RO",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:25},{name:"CN",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:77},{name:"IN",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:13},{name:"ID",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:16},{name:"PK",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:24},{name:"JP",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:20},{name:"PH",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:12},{name:"VN",date:"Feb 3 \u2013 9, 2019",hasData:!0,value:14}],[{name:"US",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:18},{name:"CA",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:17},{name:"MX",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:17},{name:"RU",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:20},{name:"DE",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:14},{name:"TR",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:16},{name:"GB",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:13},{name:"FR",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:8},{name:"IT",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:10},{name:"ES",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:13},{name:"UA",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:17},{name:"PL",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:9},{name:"RO",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:13},{name:"CN",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:45},{name:"IN",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:13},{name:"ID",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:14},{name:"PK",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:21},{name:"JP",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:9},{name:"PH",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:9},{name:"VN",date:"Feb 10 \u2013 16, 2019",hasData:!0,value:8}],[{name:"US",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:17},{name:"CA",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:18},{name:"MX",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:17},{name:"RU",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:21},{name:"DE",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:13},{name:"TR",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:16},{name:"GB",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:14},{name:"FR",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:5},{name:"IT",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:8},{name:"ES",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:13},{name:"UA",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:43},{name:"PL",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:14},{name:"RO",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:18},{name:"CN",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:35},{name:"IN",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:13},{name:"ID",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:10},{name:"PK",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:19},{name:"JP",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:12},{name:"PH",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:9},{name:"VN",date:"Feb 17 \u2013 23, 2019",hasData:!0,value:10}],[{name:"US",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:18},{name:"CA",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:16},{name:"MX",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:20},{name:"RU",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:34},{name:"DE",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:14},{name:"TR",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:18},{name:"GB",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:13},{name:"FR",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:8},{name:"IT",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:9},{name:"ES",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:16},{name:"UA",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:34},{name:"PL",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:8},{name:"RO",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:14},{name:"IN",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:13},{name:"ID",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:12},{name:"PK",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:19},{name:"JP",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:16},{name:"PH",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:9},{name:"VN",date:"Feb 24 \u2013 Mar 2, 2019",hasData:!0,value:5}],[{name:"US",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:21},{name:"CA",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:20},{name:"MX",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:19},{name:"RU",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:24},{name:"DE",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:20},{name:"TR",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:16},{name:"GB",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:13},{name:"FR",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:10},{name:"IT",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:13},{name:"ES",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:17},{name:"UA",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:19},{name:"PL",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:12},{name:"RO",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:14},{name:"IN",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:18},{name:"ID",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:29},{name:"PK",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:24},{name:"JP",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:10},{name:"PH",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:11},{name:"VN",date:"Mar 3 \u2013 9, 2019",hasData:!0,value:13}],[{name:"US",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:31},{name:"CA",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:34},{name:"MX",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:34},{name:"RU",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:23},{name:"DE",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:24},{name:"TR",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:30},{name:"GB",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:24},{name:"FR",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:15},{name:"IT",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:17},{name:"ES",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:26},{name:"UA",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:36},{name:"PL",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:15},{name:"RO",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:20},{name:"CN",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:32},{name:"IN",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:27},{name:"ID",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:32},{name:"PK",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:24},{name:"JP",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:23},{name:"PH",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:18},{name:"VN",date:"Mar 10 \u2013 16, 2019",hasData:!0,value:17}],[{name:"US",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:26},{name:"CA",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:28},{name:"MX",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:40},{name:"RU",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:35},{name:"DE",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:20},{name:"TR",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:27},{name:"GB",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:22},{name:"FR",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:15},{name:"IT",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:15},{name:"ES",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:30},{name:"UA",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:36},{name:"PL",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:16},{name:"RO",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:17},{name:"CN",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:31},{name:"IN",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:30},{name:"ID",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:28},{name:"PK",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:24},{name:"JP",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:22},{name:"PH",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:16},{name:"VN",date:"Mar 17 \u2013 23, 2019",hasData:!0,value:14}],[{name:"US",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:29},{name:"CA",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:28},{name:"MX",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:36},{name:"RU",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:54},{name:"DE",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:19},{name:"TR",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:22},{name:"GB",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:25},{name:"FR",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:13},{name:"IT",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:13},{name:"ES",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:25},{name:"UA",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:28},{name:"PL",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:17},{name:"RO",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:7},{name:"CN",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:31},{name:"IN",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:30},{name:"ID",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:25},{name:"PK",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:29},{name:"JP",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:12},{name:"PH",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:17},{name:"VN",date:"Mar 24 \u2013 30, 2019",hasData:!0,value:14}],[{name:"US",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:32},{name:"CA",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:30},{name:"MX",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:45},{name:"RU",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:30},{name:"DE",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:23},{name:"TR",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:27},{name:"GB",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:28},{name:"FR",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:17},{name:"IT",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:19},{name:"ES",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:27},{name:"UA",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:19},{name:"PL",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:20},{name:"RO",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:22},{name:"CN",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:35},{name:"IN",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:29},{name:"ID",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:24},{name:"PK",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:40},{name:"JP",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:28},{name:"PH",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:20},{name:"VN",date:"Mar 31 \u2013 Apr 6, 2019",hasData:!0,value:12}],[{name:"US",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:28},{name:"CA",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:29},{name:"MX",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:41},{name:"RU",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:24},{name:"DE",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:28},{name:"TR",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:25},{name:"GB",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:25},{name:"FR",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:23},{name:"IT",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:16},{name:"ES",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:25},{name:"UA",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:38},{name:"PL",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:15},{name:"RO",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:20},{name:"CN",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:31},{name:"IN",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:33},{name:"ID",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:18},{name:"PK",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:46},{name:"JP",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:29},{name:"PH",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:23},{name:"VN",date:"Apr 7 \u2013 13, 2019",hasData:!0,value:11}],[{name:"US",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:30},{name:"CA",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:33},{name:"MX",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:51},{name:"RU",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:27},{name:"DE",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:31},{name:"TR",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:35},{name:"GB",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:31},{name:"FR",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:22},{name:"IT",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:22},{name:"ES",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:32},{name:"UA",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:19},{name:"PL",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:17},{name:"RO",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:25},{name:"CN",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:44},{name:"IN",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:39},{name:"ID",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:26},{name:"PK",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:45},{name:"JP",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:26},{name:"PH",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:32},{name:"VN",date:"Apr 14 \u2013 20, 2019",hasData:!0,value:20}],[{name:"US",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:95},{name:"CA",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:84},{name:"MX",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:99},{name:"RU",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:59},{name:"DE",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:100},{name:"TR",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:100},{name:"GB",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:100},{name:"FR",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:100},{name:"IT",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:100},{name:"ES",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:96},{name:"UA",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:71},{name:"PL",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:97},{name:"RO",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:52},{name:"CN",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:40},{name:"IN",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:100},{name:"ID",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:71},{name:"PK",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:79},{name:"JP",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:50},{name:"PH",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:97},{name:"VN",date:"Apr 21 \u2013 27, 2019",hasData:!0,value:40}],[{name:"US",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:100},{name:"CA",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:100},{name:"MX",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:100},{name:"RU",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:100},{name:"DE",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:80},{name:"TR",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:95},{name:"GB",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:80},{name:"FR",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:77},{name:"IT",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:69},{name:"ES",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:100},{name:"UA",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:70},{name:"PL",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:100},{name:"RO",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:100},{name:"CN",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:39},{name:"IN",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:75},{name:"ID",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:100},{name:"PK",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:100},{name:"JP",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:100},{name:"PH",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:100},{name:"VN",date:"Apr 28 \u2013 May 4, 2019",hasData:!0,value:100}],[{name:"US",date:"May 5 \u2013 11, 2019",hasData:!0,value:51},{name:"CA",date:"May 5 \u2013 11, 2019",hasData:!0,value:51},{name:"MX",date:"May 5 \u2013 11, 2019",hasData:!0,value:52},{name:"RU",date:"May 5 \u2013 11, 2019",hasData:!0,value:55},{name:"DE",date:"May 5 \u2013 11, 2019",hasData:!0,value:42},{name:"TR",date:"May 5 \u2013 11, 2019",hasData:!0,value:41},{name:"GB",date:"May 5 \u2013 11, 2019",hasData:!0,value:40},{name:"FR",date:"May 5 \u2013 11, 2019",hasData:!0,value:35},{name:"IT",date:"May 5 \u2013 11, 2019",hasData:!0,value:29},{name:"ES",date:"May 5 \u2013 11, 2019",hasData:!0,value:44},{name:"UA",date:"May 5 \u2013 11, 2019",hasData:!0,value:65},{name:"PL",date:"May 5 \u2013 11, 2019",hasData:!0,value:30},{name:"RO",date:"May 5 \u2013 11, 2019",hasData:!0,value:51},{name:"CN",date:"May 5 \u2013 11, 2019",hasData:!0,value:69},{name:"IN",date:"May 5 \u2013 11, 2019",hasData:!0,value:39},{name:"ID",date:"May 5 \u2013 11, 2019",hasData:!0,value:57},{name:"PK",date:"May 5 \u2013 11, 2019",hasData:!0,value:63},{name:"JP",date:"May 5 \u2013 11, 2019",hasData:!0,value:51},{name:"PH",date:"May 5 \u2013 11, 2019",hasData:!0,value:39},{name:"VN",date:"May 5 \u2013 11, 2019",hasData:!0,value:43}],[{name:"US",date:"May 12 \u2013 18, 2019",hasData:!0,value:31},{name:"CA",date:"May 12 \u2013 18, 2019",hasData:!0,value:31},{name:"MX",date:"May 12 \u2013 18, 2019",hasData:!0,value:35},{name:"RU",date:"May 12 \u2013 18, 2019",hasData:!0,value:34},{name:"DE",date:"May 12 \u2013 18, 2019",hasData:!0,value:25},{name:"TR",date:"May 12 \u2013 18, 2019",hasData:!0,value:34},{name:"GB",date:"May 12 \u2013 18, 2019",hasData:!0,value:23},{name:"FR",date:"May 12 \u2013 18, 2019",hasData:!0,value:19},{name:"IT",date:"May 12 \u2013 18, 2019",hasData:!0,value:16},{name:"ES",date:"May 12 \u2013 18, 2019",hasData:!0,value:26},{name:"UA",date:"May 12 \u2013 18, 2019",hasData:!0,value:19},{name:"PL",date:"May 12 \u2013 18, 2019",hasData:!0,value:23},{name:"RO",date:"May 12 \u2013 18, 2019",hasData:!0,value:24},{name:"CN",date:"May 12 \u2013 18, 2019",hasData:!0,value:31},{name:"IN",date:"May 12 \u2013 18, 2019",hasData:!0,value:24},{name:"ID",date:"May 12 \u2013 18, 2019",hasData:!0,value:35},{name:"PK",date:"May 12 \u2013 18, 2019",hasData:!0,value:53},{name:"JP",date:"May 12 \u2013 18, 2019",hasData:!0,value:36},{name:"PH",date:"May 12 \u2013 18, 2019",hasData:!0,value:25},{name:"VN",date:"May 12 \u2013 18, 2019",hasData:!0,value:19}],[{name:"US",date:"May 19 \u2013 25, 2019",hasData:!0,value:21},{name:"CA",date:"May 19 \u2013 25, 2019",hasData:!0,value:23},{name:"MX",date:"May 19 \u2013 25, 2019",hasData:!0,value:25},{name:"RU",date:"May 19 \u2013 25, 2019",hasData:!0,value:33},{name:"DE",date:"May 19 \u2013 25, 2019",hasData:!0,value:21},{name:"TR",date:"May 19 \u2013 25, 2019",hasData:!0,value:28},{name:"GB",date:"May 19 \u2013 25, 2019",hasData:!0,value:15},{name:"FR",date:"May 19 \u2013 25, 2019",hasData:!0,value:10},{name:"IT",date:"May 19 \u2013 25, 2019",hasData:!0,value:12},{name:"ES",date:"May 19 \u2013 25, 2019",hasData:!0,value:16},{name:"UA",date:"May 19 \u2013 25, 2019",hasData:!0,value:38},{name:"PL",date:"May 19 \u2013 25, 2019",hasData:!0,value:17},{name:"RO",date:"May 19 \u2013 25, 2019",hasData:!0,value:19},{name:"CN",date:"May 19 \u2013 25, 2019",hasData:!0,value:31},{name:"IN",date:"May 19 \u2013 25, 2019",hasData:!0,value:19},{name:"ID",date:"May 19 \u2013 25, 2019",hasData:!0,value:19},{name:"PK",date:"May 19 \u2013 25, 2019",hasData:!0,value:27},{name:"JP",date:"May 19 \u2013 25, 2019",hasData:!0,value:17},{name:"PH",date:"May 19 \u2013 25, 2019",hasData:!0,value:17},{name:"VN",date:"May 19 \u2013 25, 2019",hasData:!0,value:13}],[{name:"US",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:18},{name:"CA",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:17},{name:"MX",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:19},{name:"RU",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:22},{name:"DE",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:13},{name:"TR",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:26},{name:"GB",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:14},{name:"FR",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:11},{name:"IT",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:8},{name:"ES",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:15},{name:"UA",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:20},{name:"PL",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:15},{name:"RO",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:13},{name:"IN",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:18},{name:"ID",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:21},{name:"PK",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:24},{name:"JP",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:10},{name:"PH",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:13},{name:"VN",date:"May 26 \u2013 Jun 1, 2019",hasData:!0,value:13}],[{name:"US",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:14},{name:"CA",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:13},{name:"MX",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:17},{name:"RU",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:24},{name:"DE",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:10},{name:"TR",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:31},{name:"GB",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:9},{name:"FR",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:7},{name:"IT",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:8},{name:"ES",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:13},{name:"UA",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:38},{name:"PL",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:13},{name:"RO",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:10},{name:"CN",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:36},{name:"IN",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:13},{name:"ID",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:17},{name:"PK",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:23},{name:"JP",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:22},{name:"PH",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:10},{name:"VN",date:"Jun 2 \u2013 8, 2019",hasData:!0,value:11}],[{name:"US",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:12},{name:"CA",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:11},{name:"MX",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:15},{name:"RU",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:29},{name:"DE",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:10},{name:"TR",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:19},{name:"GB",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:9},{name:"FR",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:8},{name:"IT",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:7},{name:"ES",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:15},{name:"UA",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:30},{name:"PL",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:10},{name:"RO",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:10},{name:"IN",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:11},{name:"ID",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:14},{name:"PK",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:14},{name:"JP",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:16},{name:"PH",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:10},{name:"VN",date:"Jun 9 \u2013 15, 2019",hasData:!0,value:9}],[{name:"US",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:11},{name:"CA",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:11},{name:"MX",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:13},{name:"RU",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:29},{name:"DE",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:8},{name:"TR",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:17},{name:"GB",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:7},{name:"FR",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:6},{name:"IT",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:7},{name:"ES",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:13},{name:"UA",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:20},{name:"PL",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:8},{name:"RO",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:11},{name:"CN",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:31},{name:"IN",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:10},{name:"ID",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:11},{name:"PK",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:15},{name:"JP",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:15},{name:"PH",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:6},{name:"VN",date:"Jun 16 \u2013 22, 2019",hasData:!0,value:6}],[{name:"US",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:11},{name:"CA",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:12},{name:"MX",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:15},{name:"RU",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:34},{name:"DE",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:6},{name:"TR",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:13},{name:"GB",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:8},{name:"FR",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:6},{name:"IT",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:6},{name:"ES",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:12},{name:"UA",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:70},{name:"PL",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:13},{name:"RO",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:8},{name:"IN",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:8},{name:"ID",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:10},{name:"PK",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:15},{name:"JP",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:14},{name:"PH",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:7},{name:"VN",date:"Jun 23 \u2013 29, 2019",hasData:!0,value:7}],[{name:"US",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:12},{name:"CA",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:12},{name:"MX",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:11},{name:"RU",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:33},{name:"DE",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:8},{name:"TR",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:15},{name:"GB",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:7},{name:"FR",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:6},{name:"IT",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:5},{name:"ES",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:13},{name:"UA",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:30},{name:"PL",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:6},{name:"RO",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:8},{name:"CN",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:32},{name:"IN",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:7},{name:"ID",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:12},{name:"PK",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:20},{name:"JP",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:8},{name:"PH",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:7},{name:"VN",date:"Jun 30 \u2013 Jul 6, 2019",hasData:!0,value:6}],[{name:"US",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:11},{name:"CA",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:13},{name:"MX",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:14},{name:"RU",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:30},{name:"DE",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:9},{name:"TR",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:16},{name:"GB",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:9},{name:"FR",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:7},{name:"IT",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:7},{name:"ES",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:9},{name:"UA",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:57},{name:"PL",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:9},{name:"RO",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:12},{name:"CN",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:64},{name:"IN",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:7},{name:"ID",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:10},{name:"PK",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:12},{name:"JP",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:13},{name:"PH",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:5},{name:"VN",date:"Jul 7 \u2013 13, 2019",hasData:!0,value:9}],[{name:"US",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:10},{name:"CA",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:11},{name:"MX",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:12},{name:"RU",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:30},{name:"DE",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:10},{name:"TR",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:16},{name:"GB",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:8},{name:"FR",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:6},{name:"IT",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:9},{name:"ES",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:13},{name:"UA",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:49},{name:"PL",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:10},{name:"RO",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:10},{name:"IN",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:9},{name:"ID",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:9},{name:"PK",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:13},{name:"JP",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:5},{name:"PH",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:6},{name:"VN",date:"Jul 14 \u2013 20, 2019",hasData:!0,value:7}],[{name:"US",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:10},{name:"CA",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:10},{name:"MX",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:10},{name:"RU",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:20},{name:"DE",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:11},{name:"TR",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:15},{name:"GB",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:9},{name:"FR",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:6},{name:"IT",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:8},{name:"ES",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:14},{name:"UA",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:96},{name:"PL",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:10},{name:"RO",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:9},{name:"IN",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:8},{name:"ID",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:9},{name:"PK",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:16},{name:"JP",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:15},{name:"PH",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:5},{name:"VN",date:"Jul 21 \u2013 27, 2019",hasData:!0,value:8}],[{name:"US",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:11},{name:"CA",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:10},{name:"MX",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:12},{name:"RU",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:33},{name:"DE",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:9},{name:"TR",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:13},{name:"GB",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:9},{name:"FR",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:8},{name:"IT",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:7},{name:"ES",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:11},{name:"UA",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:58},{name:"PL",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:10},{name:"RO",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:10},{name:"IN",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:9},{name:"ID",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:7},{name:"PK",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:19},{name:"JP",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:14},{name:"PH",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:6},{name:"VN",date:"Jul 28 \u2013 Aug 3, 2019",hasData:!0,value:9}],[{name:"US",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:10},{name:"CA",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:10},{name:"MX",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:13},{name:"RU",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:30},{name:"DE",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:9},{name:"TR",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:14},{name:"GB",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:9},{name:"FR",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:7},{name:"IT",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:7},{name:"ES",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:11},{name:"UA",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:58},{name:"PL",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:8},{name:"RO",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:12},{name:"CN",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:35},{name:"IN",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:8},{name:"ID",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:9},{name:"PK",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:16},{name:"JP",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:15},{name:"PH",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:6},{name:"VN",date:"Aug 4 \u2013 10, 2019",hasData:!0,value:9}],[{name:"US",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:11},{name:"CA",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:13},{name:"MX",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:9},{name:"RU",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:29},{name:"DE",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:10},{name:"TR",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:14},{name:"GB",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:8},{name:"FR",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:5},{name:"IT",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:7},{name:"ES",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:12},{name:"UA",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:19},{name:"PL",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:10},{name:"RO",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:12},{name:"IN",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:8},{name:"ID",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:5},{name:"PK",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:18},{name:"JP",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:8},{name:"PH",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:6},{name:"VN",date:"Aug 11 \u2013 17, 2019",hasData:!0,value:7}],[{name:"US",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:10},{name:"CA",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:13},{name:"MX",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:11},{name:"RU",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:29},{name:"DE",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:11},{name:"TR",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:12},{name:"GB",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:8},{name:"FR",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:7},{name:"IT",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:5},{name:"ES",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:15},{name:"UA",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:30},{name:"PL",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:7},{name:"RO",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:12},{name:"IN",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:7},{name:"ID",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:8},{name:"PK",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:14},{name:"JP",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:13},{name:"PH",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:7},{name:"VN",date:"Aug 18 \u2013 24, 2019",hasData:!0,value:4}],[{name:"US",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:10},{name:"CA",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:9},{name:"MX",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:7},{name:"RU",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:23},{name:"DE",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:8},{name:"TR",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:13},{name:"GB",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:9},{name:"FR",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:7},{name:"IT",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:8},{name:"ES",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:13},{name:"UA",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:100},{name:"PL",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:9},{name:"RO",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:9},{name:"IN",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:6},{name:"ID",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:6},{name:"PK",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:13},{name:"JP",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:15},{name:"PH",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:5},{name:"VN",date:"Aug 25 \u2013 31, 2019",hasData:!0,value:4}],[{name:"US",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:9},{name:"CA",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:7},{name:"MX",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:7},{name:"RU",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:12},{name:"DE",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:13},{name:"TR",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:10},{name:"GB",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:9},{name:"FR",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:5},{name:"IT",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:5},{name:"ES",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:8},{name:"UA",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:28},{name:"PL",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:5},{name:"RO",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:10},{name:"IN",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:7},{name:"ID",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:5},{name:"PK",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:14},{name:"JP",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:17},{name:"PH",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:3},{name:"VN",date:"Sep 1 \u2013 7, 2019",hasData:!0,value:5}],[{name:"US",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:7},{name:"CA",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:6},{name:"MX",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:7},{name:"RU",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:27},{name:"DE",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:9},{name:"TR",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:8},{name:"GB",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:7},{name:"FR",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:4},{name:"IT",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:5},{name:"ES",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:6},{name:"UA",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:45},{name:"PL",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:4},{name:"RO",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:6},{name:"IN",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:7},{name:"ID",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:6},{name:"PK",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:15},{name:"JP",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:10},{name:"PH",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:4},{name:"VN",date:"Sep 8 \u2013 14, 2019",hasData:!0,value:4}],[{name:"US",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:6},{name:"CA",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:7},{name:"MX",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:7},{name:"RU",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:20},{name:"DE",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:7},{name:"TR",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:10},{name:"GB",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:7},{name:"FR",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:3},{name:"IT",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:4},{name:"ES",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:7},{name:"UA",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:53},{name:"PL",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:5},{name:"RO",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:8},{name:"CN",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:33},{name:"IN",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:5},{name:"ID",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:6},{name:"PK",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:10},{name:"JP",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:5},{name:"PH",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:4},{name:"VN",date:"Sep 15 \u2013 21, 2019",hasData:!0,value:3}],[{name:"US",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:6},{name:"CA",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:7},{name:"MX",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:7},{name:"RU",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:18},{name:"DE",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:7},{name:"TR",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:7},{name:"GB",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:6},{name:"FR",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:2},{name:"IT",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:3},{name:"ES",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:5},{name:"UA",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:27},{name:"PL",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:6},{name:"RO",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:5},{name:"IN",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:6},{name:"ID",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:5},{name:"PK",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:10},{name:"JP",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:10},{name:"PH",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:3},{name:"VN",date:"Sep 22 \u2013 28, 2019",hasData:!0,value:3}],[{name:"US",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:6},{name:"CA",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:6},{name:"MX",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:7},{name:"RU",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:22},{name:"DE",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:12},{name:"TR",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:5},{name:"GB",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:5},{name:"FR",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:4},{name:"IT",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:3},{name:"ES",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:6},{name:"UA",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:35},{name:"PL",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:4},{name:"RO",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:9},{name:"IN",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:9},{name:"ID",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:6},{name:"PK",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:9},{name:"JP",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:5},{name:"PH",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:3},{name:"VN",date:"Sep 29 \u2013 Oct 5, 2019",hasData:!0,value:4}],[{name:"US",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:6},{name:"CA",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:6},{name:"MX",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:6},{name:"RU",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:14},{name:"DE",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:6},{name:"TR",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:7},{name:"GB",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:6},{name:"FR",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:3},{name:"IT",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:3},{name:"ES",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:7},{name:"UA",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:44},{name:"PL",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:4},{name:"RO",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:7},{name:"CN",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:36},{name:"IN",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:8},{name:"ID",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:5},{name:"PK",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:11},{name:"JP",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:7},{name:"PH",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:3},{name:"VN",date:"Oct 6 \u2013 12, 2019",hasData:!0,value:4}],[{name:"US",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:6},{name:"CA",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:6},{name:"MX",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:5},{name:"RU",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:34},{name:"DE",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:4},{name:"TR",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:6},{name:"GB",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:5},{name:"FR",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:3},{name:"IT",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:3},{name:"ES",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:6},{name:"UA",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:28},{name:"PL",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:4},{name:"RO",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:5},{name:"IN",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:5},{name:"ID",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:4},{name:"PK",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:9},{name:"JP",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:7},{name:"PH",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:2},{name:"VN",date:"Oct 13 \u2013 19, 2019",hasData:!0,value:4}],[{name:"US",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:5},{name:"CA",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:5},{name:"MX",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:5},{name:"RU",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:13},{name:"DE",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:5},{name:"TR",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:7},{name:"GB",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:6},{name:"FR",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:5},{name:"IT",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:4},{name:"ES",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:6},{name:"UA",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:17},{name:"PL",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:3},{name:"RO",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:4},{name:"IN",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:5},{name:"ID",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:4},{name:"PK",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:9},{name:"JP",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:12},{name:"PH",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:4},{name:"VN",date:"Oct 20 \u2013 26, 2019",hasData:!0,value:2}],[{name:"US",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:5},{name:"CA",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:7},{name:"MX",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:5},{name:"RU",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:18},{name:"DE",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:6},{name:"TR",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:8},{name:"GB",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:5},{name:"FR",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:3},{name:"IT",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:3},{name:"ES",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:6},{name:"UA",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:17},{name:"PL",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:4},{name:"RO",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:5},{name:"CN",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:35},{name:"IN",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:5},{name:"ID",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:3},{name:"PK",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:4},{name:"PH",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:2},{name:"VN",date:"Oct 27 \u2013 Nov 2, 2019",hasData:!0,value:2}],[{name:"US",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:5},{name:"CA",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:4},{name:"MX",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:6},{name:"RU",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:14},{name:"DE",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:4},{name:"TR",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:7},{name:"GB",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:4},{name:"FR",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:2},{name:"IT",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:3},{name:"ES",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:5},{name:"UA",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:33},{name:"PL",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:4},{name:"RO",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:6},{name:"CN",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:35},{name:"IN",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:4},{name:"ID",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:3},{name:"PK",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:11},{name:"JP",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:5},{name:"PH",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:4},{name:"VN",date:"Nov 3 \u2013 9, 2019",hasData:!0,value:2}],[{name:"US",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:6},{name:"CA",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:5},{name:"MX",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:5},{name:"RU",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:22},{name:"DE",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:6},{name:"TR",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:7},{name:"GB",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:4},{name:"FR",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:3},{name:"IT",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:3},{name:"ES",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:5},{name:"UA",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:34},{name:"PL",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:6},{name:"RO",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:6},{name:"CN",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:34},{name:"IN",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:5},{name:"ID",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:3},{name:"PK",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:6},{name:"JP",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:12},{name:"PH",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:3},{name:"VN",date:"Nov 10 \u2013 16, 2019",hasData:!0,value:3}],[{name:"US",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:8},{name:"CA",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:5},{name:"MX",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:6},{name:"RU",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:14},{name:"DE",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:5},{name:"TR",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:6},{name:"GB",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:4},{name:"FR",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:4},{name:"IT",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:2},{name:"ES",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:7},{name:"UA",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:41},{name:"PL",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:3},{name:"RO",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:4},{name:"IN",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:4},{name:"ID",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:3},{name:"PK",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:7},{name:"JP",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:7},{name:"PH",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:4},{name:"VN",date:"Nov 17 \u2013 23, 2019",hasData:!0,value:2}],[{name:"US",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:7},{name:"CA",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:4},{name:"MX",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:5},{name:"RU",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:17},{name:"DE",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:4},{name:"TR",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:5},{name:"GB",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:5},{name:"FR",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:3},{name:"IT",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:3},{name:"ES",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:6},{name:"UA",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:16},{name:"PL",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:2},{name:"RO",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:4},{name:"CN",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:35},{name:"IN",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:4},{name:"ID",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:3},{name:"PK",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:7},{name:"JP",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:15},{name:"PH",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:2},{name:"VN",date:"Nov 24 \u2013 30, 2019",hasData:!0,value:4}],[{name:"US",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:7},{name:"CA",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:5},{name:"MX",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:5},{name:"DE",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:7},{name:"TR",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:4},{name:"GB",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:4},{name:"FR",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:2},{name:"IT",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:3},{name:"ES",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:4},{name:"PL",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:6},{name:"RO",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:6},{name:"IN",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:4},{name:"ID",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:4},{name:"PK",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:3},{name:"JP",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:5},{name:"PH",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:4},{name:"VN",date:"Dec 1 \u2013 7, 2019",hasData:!0,value:4}],[{name:"US",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:6},{name:"CA",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:6},{name:"MX",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:4},{name:"RU",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:17},{name:"DE",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:5},{name:"TR",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:5},{name:"GB",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:5},{name:"FR",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:2},{name:"IT",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:3},{name:"ES",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:6},{name:"UA",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:32},{name:"PL",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:5},{name:"RO",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:6},{name:"IN",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:3},{name:"ID",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:4},{name:"PK",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:9},{name:"JP",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:5},{name:"PH",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:4},{name:"VN",date:"Dec 8 \u2013 14, 2019",hasData:!0,value:5}],[{name:"US",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:6},{name:"CA",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:4},{name:"MX",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:5},{name:"RU",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:21},{name:"DE",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:5},{name:"TR",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:5},{name:"GB",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:4},{name:"FR",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:3},{name:"IT",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:3},{name:"ES",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:5},{name:"UA",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:16},{name:"PL",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:4},{name:"RO",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:6},{name:"IN",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:4},{name:"ID",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:5},{name:"PK",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:8},{name:"JP",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:5},{name:"PH",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:3},{name:"VN",date:"Dec 15 \u2013 21, 2019",hasData:!0,value:3}],[{name:"US",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:7},{name:"CA",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:5},{name:"MX",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:7},{name:"RU",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:12},{name:"DE",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:8},{name:"TR",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:4},{name:"GB",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:8},{name:"FR",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:7},{name:"IT",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:5},{name:"ES",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:10},{name:"UA",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:16},{name:"PL",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:12},{name:"RO",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:34},{name:"IN",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:4},{name:"ID",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:5},{name:"PK",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:8},{name:"PH",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:3},{name:"VN",date:"Dec 22 \u2013 28, 2019",hasData:!0,value:3}],[{name:"US",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:7},{name:"CA",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:7},{name:"MX",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:8},{name:"RU",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:31},{name:"DE",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:5},{name:"TR",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:6},{name:"GB",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:8},{name:"FR",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:6},{name:"IT",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:3},{name:"ES",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:10},{name:"UA",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:26},{name:"PL",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:4},{name:"RO",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:12},{name:"CN",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:41},{name:"IN",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:5},{name:"ID",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:5},{name:"PK",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:6},{name:"JP",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:12},{name:"PH",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:4},{name:"VN",date:"Dec 29, 2019 \u2013 Jan 4, 2020",hasData:!0,value:4}]],lv={data:[{name:"US",keyword:"Infinity War",query:"Infinity War",data:[{name:"US",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:38},{name:"US",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:31},{name:"US",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:23},{name:"US",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:21},{name:"US",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:21},{name:"US",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:19},{name:"US",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:17},{name:"US",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:18},{name:"US",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:21},{name:"US",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:31},{name:"US",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:27},{name:"US",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:29},{name:"US",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:32},{name:"US",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:28},{name:"US",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:30},{name:"US",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:95},{name:"US",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:100},{name:"US",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:51},{name:"US",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:32},{name:"US",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:21},{name:"US",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:18},{name:"US",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:14},{name:"US",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:12},{name:"US",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:11},{name:"US",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:12},{name:"US",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:12},{name:"US",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:11},{name:"US",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:10},{name:"US",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:10},{name:"US",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:11},{name:"US",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:10},{name:"US",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:11},{name:"US",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:10},{name:"US",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:9},{name:"US",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:8},{name:"US",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:7},{name:"US",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:7},{name:"US",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:6},{name:"US",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:5},{name:"US",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:6},{name:"US",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:6},{name:"US",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:5},{name:"US",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:6},{name:"US",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:5},{name:"US",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:6},{name:"US",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:8},{name:"US",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:7},{name:"US",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:7},{name:"US",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:6},{name:"US",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:6},{name:"US",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:7},{name:"US",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:7}]},{name:"CA",keyword:"Infinity War",query:"Infinity War",data:[{name:"CA",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:46},{name:"CA",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:30},{name:"CA",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:25},{name:"CA",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:24},{name:"CA",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:22},{name:"CA",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:19},{name:"CA",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:20},{name:"CA",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:17},{name:"CA",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:22},{name:"CA",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:35},{name:"CA",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:29},{name:"CA",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:30},{name:"CA",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:31},{name:"CA",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:30},{name:"CA",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:34},{name:"CA",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:88},{name:"CA",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:100},{name:"CA",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:53},{name:"CA",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:31},{name:"CA",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:22},{name:"CA",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:17},{name:"CA",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:13},{name:"CA",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:12},{name:"CA",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:11},{name:"CA",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:10},{name:"CA",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:13},{name:"CA",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:14},{name:"CA",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:12},{name:"CA",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:11},{name:"CA",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:11},{name:"CA",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:10},{name:"CA",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:13},{name:"CA",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:12},{name:"CA",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:10},{name:"CA",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:8},{name:"CA",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:6},{name:"CA",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:7},{name:"CA",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:6},{name:"CA",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:5},{name:"CA",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:6},{name:"CA",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:7},{name:"CA",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:6},{name:"CA",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:7},{name:"CA",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:5},{name:"CA",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:6},{name:"CA",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:5},{name:"CA",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:5},{name:"CA",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:6},{name:"CA",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:5},{name:"CA",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:5},{name:"CA",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:6},{name:"CA",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:7}]},{name:"MX",keyword:"Infinity War",query:"Infinity War",data:[{name:"MX",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:25},{name:"MX",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:27},{name:"MX",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:20},{name:"MX",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:18},{name:"MX",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:22},{name:"MX",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:17},{name:"MX",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:18},{name:"MX",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:20},{name:"MX",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:19},{name:"MX",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:32},{name:"MX",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:40},{name:"MX",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:34},{name:"MX",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:45},{name:"MX",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:43},{name:"MX",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:50},{name:"MX",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:100},{name:"MX",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:96},{name:"MX",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:51},{name:"MX",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:35},{name:"MX",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:23},{name:"MX",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:18},{name:"MX",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:16},{name:"MX",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:16},{name:"MX",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:14},{name:"MX",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:15},{name:"MX",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:11},{name:"MX",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:14},{name:"MX",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:12},{name:"MX",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:11},{name:"MX",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:12},{name:"MX",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:13},{name:"MX",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:11},{name:"MX",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:11},{name:"MX",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:7},{name:"MX",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:7},{name:"MX",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:7},{name:"MX",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:7},{name:"MX",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:8},{name:"MX",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:7},{name:"MX",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:6},{name:"MX",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:5},{name:"MX",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:5},{name:"MX",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:4},{name:"MX",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:5},{name:"MX",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:5},{name:"MX",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:5},{name:"MX",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:5},{name:"MX",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:5},{name:"MX",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:4},{name:"MX",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:5},{name:"MX",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:6},{name:"MX",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:8}]},{name:"RU",keyword:"Infinity War",query:"Infinity War",data:[{name:"RU",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:42},{name:"RU",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:40},{name:"RU",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:17},{name:"RU",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:16},{name:"RU",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:24},{name:"RU",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:12},{name:"RU",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:21},{name:"RU",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:27},{name:"RU",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:41},{name:"RU",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:39},{name:"RU",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:42},{name:"RU",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:41},{name:"RU",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:32},{name:"RU",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:26},{name:"RU",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:29},{name:"RU",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:57},{name:"RU",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:100},{name:"RU",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:60},{name:"RU",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:36},{name:"RU",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:21},{name:"RU",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:18},{name:"RU",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:28},{name:"RU",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:25},{name:"RU",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:31},{name:"RU",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:47},{name:"RU",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:35},{name:"RU",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:32},{name:"RU",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:32},{name:"RU",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:23},{name:"RU",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:61},{name:"RU",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:42},{name:"RU",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:35},{name:"RU",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:29},{name:"RU",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:13},{name:"RU",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:15},{name:"RU",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:23},{name:"RU",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:14},{name:"RU",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:25},{name:"RU",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:20},{name:"RU",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:17},{name:"RU",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:12},{name:"RU",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:42},{name:"RU",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:17},{name:"RU",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:13},{name:"RU",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:19},{name:"RU",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:11},{name:"RU",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:16},{name:"RU",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:16},{name:"RU",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:8},{name:"RU",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:25},{name:"RU",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:14},{name:"RU",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:15}]},{name:"DE",keyword:"Infinity War",query:"Infinity War",data:[{name:"DE",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:19},{name:"DE",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:17},{name:"DE",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:13},{name:"DE",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:13},{name:"DE",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:15},{name:"DE",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:13},{name:"DE",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:14},{name:"DE",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:14},{name:"DE",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:20},{name:"DE",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:26},{name:"DE",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:19},{name:"DE",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:20},{name:"DE",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:26},{name:"DE",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:31},{name:"DE",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:36},{name:"DE",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:100},{name:"DE",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:87},{name:"DE",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:47},{name:"DE",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:28},{name:"DE",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:24},{name:"DE",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:13},{name:"DE",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:10},{name:"DE",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:11},{name:"DE",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:8},{name:"DE",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:5},{name:"DE",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:9},{name:"DE",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:9},{name:"DE",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:10},{name:"DE",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:12},{name:"DE",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:9},{name:"DE",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:8},{name:"DE",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:11},{name:"DE",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:11},{name:"DE",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:10},{name:"DE",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:13},{name:"DE",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:10},{name:"DE",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:8},{name:"DE",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:8},{name:"DE",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:12},{name:"DE",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:6},{name:"DE",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:5},{name:"DE",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:6},{name:"DE",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:6},{name:"DE",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:4},{name:"DE",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:5},{name:"DE",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:5},{name:"DE",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:6},{name:"DE",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:7},{name:"DE",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:5},{name:"DE",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:4},{name:"DE",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:8},{name:"DE",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:5}]},{name:"TR",keyword:"Infinity War",query:"Infinity War",data:[{name:"TR",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:30},{name:"TR",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:33},{name:"TR",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:29},{name:"TR",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:29},{name:"TR",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:23},{name:"TR",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:21},{name:"TR",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:15},{name:"TR",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:18},{name:"TR",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:22},{name:"TR",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:31},{name:"TR",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:29},{name:"TR",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:30},{name:"TR",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:26},{name:"TR",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:28},{name:"TR",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:38},{name:"TR",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:100},{name:"TR",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:98},{name:"TR",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:43},{name:"TR",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:35},{name:"TR",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:27},{name:"TR",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:29},{name:"TR",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:27},{name:"TR",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:26},{name:"TR",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:16},{name:"TR",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:15},{name:"TR",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:16},{name:"TR",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:18},{name:"TR",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:13},{name:"TR",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:15},{name:"TR",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:16},{name:"TR",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:14},{name:"TR",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:16},{name:"TR",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:12},{name:"TR",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:14},{name:"TR",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:14},{name:"TR",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:9},{name:"TR",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:10},{name:"TR",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:9},{name:"TR",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:8},{name:"TR",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:8},{name:"TR",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:8},{name:"TR",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:7},{name:"TR",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:7},{name:"TR",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:10},{name:"TR",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:6},{name:"TR",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:9},{name:"TR",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:6},{name:"TR",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:5},{name:"TR",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:6},{name:"TR",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:6},{name:"TR",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:5},{name:"TR",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:9}]},{name:"GB",keyword:"Infinity War",query:"Infinity War",data:[{name:"GB",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:22},{name:"GB",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:19},{name:"GB",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:17},{name:"GB",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:13},{name:"GB",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:13},{name:"GB",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:13},{name:"GB",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:13},{name:"GB",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:13},{name:"GB",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:14},{name:"GB",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:24},{name:"GB",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:22},{name:"GB",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:24},{name:"GB",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:27},{name:"GB",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:25},{name:"GB",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:31},{name:"GB",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:100},{name:"GB",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:79},{name:"GB",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:40},{name:"GB",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:23},{name:"GB",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:14},{name:"GB",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:13},{name:"GB",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:9},{name:"GB",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:10},{name:"GB",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:7},{name:"GB",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:9},{name:"GB",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:6},{name:"GB",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:8},{name:"GB",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:7},{name:"GB",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:9},{name:"GB",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:8},{name:"GB",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:8},{name:"GB",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:8},{name:"GB",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:8},{name:"GB",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:8},{name:"GB",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:8},{name:"GB",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:6},{name:"GB",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:6},{name:"GB",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:5},{name:"GB",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:4},{name:"GB",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:5},{name:"GB",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:4},{name:"GB",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:6},{name:"GB",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:4},{name:"GB",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:4},{name:"GB",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:5},{name:"GB",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:4},{name:"GB",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:4},{name:"GB",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:4},{name:"GB",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:5},{name:"GB",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:4},{name:"GB",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:8},{name:"GB",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:8}]},{name:"FR",keyword:"Infinity War",query:"Infinity War",data:[{name:"FR",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:9},{name:"FR",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:9},{name:"FR",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:7},{name:"FR",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:7},{name:"FR",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:7},{name:"FR",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:6},{name:"FR",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:5},{name:"FR",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:7},{name:"FR",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:11},{name:"FR",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:14},{name:"FR",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:14},{name:"FR",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:11},{name:"FR",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:18},{name:"FR",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:18},{name:"FR",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:21},{name:"FR",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:100},{name:"FR",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:74},{name:"FR",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:33},{name:"FR",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:19},{name:"FR",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:11},{name:"FR",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:8},{name:"FR",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:6},{name:"FR",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:6},{name:"FR",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:6},{name:"FR",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:5},{name:"FR",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:7},{name:"FR",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:6},{name:"FR",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:6},{name:"FR",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:7},{name:"FR",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:8},{name:"FR",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:6},{name:"FR",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:8},{name:"FR",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:6},{name:"FR",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:6},{name:"FR",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:5},{name:"FR",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:4},{name:"FR",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:4},{name:"FR",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:3},{name:"FR",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:4},{name:"FR",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:3},{name:"FR",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:3},{name:"FR",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:5},{name:"FR",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:3},{name:"FR",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:2},{name:"FR",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:2},{name:"FR",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:4},{name:"FR",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:3},{name:"FR",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:2},{name:"FR",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:3},{name:"FR",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:3},{name:"FR",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:8},{name:"FR",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:4}]},{name:"IT",keyword:"Infinity War",query:"Infinity War",data:[{name:"IT",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:21},{name:"IT",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:15},{name:"IT",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:12},{name:"IT",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:12},{name:"IT",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:12},{name:"IT",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:8},{name:"IT",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IT",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:8},{name:"IT",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:12},{name:"IT",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:17},{name:"IT",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:16},{name:"IT",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:14},{name:"IT",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:18},{name:"IT",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:17},{name:"IT",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:22},{name:"IT",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:100},{name:"IT",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:66},{name:"IT",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:27},{name:"IT",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:16},{name:"IT",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:11},{name:"IT",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IT",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IT",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IT",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:6},{name:"IT",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:6},{name:"IT",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:6},{name:"IT",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:8},{name:"IT",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:8},{name:"IT",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IT",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IT",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:6},{name:"IT",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IT",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:5},{name:"IT",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IT",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:6},{name:"IT",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:5},{name:"IT",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:3},{name:"IT",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:3},{name:"IT",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:3},{name:"IT",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:3},{name:"IT",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:4},{name:"IT",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:4},{name:"IT",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:3},{name:"IT",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:3},{name:"IT",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:3},{name:"IT",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:2},{name:"IT",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:3},{name:"IT",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:3},{name:"IT",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:3},{name:"IT",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:3},{name:"IT",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:4},{name:"IT",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:3}]},{name:"ES",keyword:"Infinity War",query:"Infinity War",data:[{name:"ES",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:21},{name:"ES",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:17},{name:"ES",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:19},{name:"ES",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:15},{name:"ES",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:15},{name:"ES",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:14},{name:"ES",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:11},{name:"ES",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:15},{name:"ES",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:15},{name:"ES",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:25},{name:"ES",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:29},{name:"ES",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:24},{name:"ES",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:24},{name:"ES",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:26},{name:"ES",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:30},{name:"ES",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:93},{name:"ES",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:100},{name:"ES",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:41},{name:"ES",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:25},{name:"ES",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:17},{name:"ES",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:14},{name:"ES",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:12},{name:"ES",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:15},{name:"ES",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:14},{name:"ES",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:12},{name:"ES",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:13},{name:"ES",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:10},{name:"ES",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:13},{name:"ES",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:12},{name:"ES",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:12},{name:"ES",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:9},{name:"ES",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:11},{name:"ES",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:14},{name:"ES",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:13},{name:"ES",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:8},{name:"ES",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:6},{name:"ES",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:7},{name:"ES",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:5},{name:"ES",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:6},{name:"ES",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:7},{name:"ES",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:6},{name:"ES",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:5},{name:"ES",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:6},{name:"ES",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:5},{name:"ES",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:4},{name:"ES",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:6},{name:"ES",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:6},{name:"ES",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:6},{name:"ES",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:5},{name:"ES",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:4},{name:"ES",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:9},{name:"ES",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:9}]},{name:"UA",keyword:"Infinity War",query:"Infinity War",data:[{name:"UA",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:43},{name:"UA",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:21},{name:"UA",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:26},{name:"UA",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:67},{name:"UA",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:20},{name:"UA",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:33},{name:"UA",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:33},{name:"UA",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:20},{name:"UA",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:21},{name:"UA",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:34},{name:"UA",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:41},{name:"UA",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:42},{name:"UA",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:44},{name:"UA",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:43},{name:"UA",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:43},{name:"UA",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:100},{name:"UA",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:83},{name:"UA",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:56},{name:"UA",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:44},{name:"UA",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:43},{name:"UA",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:44},{name:"UA",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:44},{name:"UA",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:34},{name:"UA",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:31},{name:"UA",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:53},{name:"UA",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:30},{name:"UA",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:66},{name:"UA",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:53},{name:"UA",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:44},{name:"UA",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:88},{name:"UA",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:37},{name:"UA",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:43},{name:"UA",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:45},{name:"UA",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:60},{name:"UA",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:50},{name:"UA",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:62},{name:"UA",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:67},{name:"UA",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:31},{name:"UA",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:40},{name:"UA",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:33},{name:"UA",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:35},{name:"UA",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:20},{name:"UA",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:30},{name:"UA",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:47},{name:"UA",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:38},{name:"UA",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:44},{name:"UA",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:28},{name:"UA",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:28},{name:"UA",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:27},{name:"UA",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:18},{name:"UA",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!1,value:0},{name:"UA",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:20}]},{name:"PL",keyword:"Infinity War",query:"Infinity War",data:[{name:"PL",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:14},{name:"PL",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:12},{name:"PL",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:8},{name:"PL",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:10},{name:"PL",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:11},{name:"PL",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:9},{name:"PL",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:12},{name:"PL",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:9},{name:"PL",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:12},{name:"PL",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:16},{name:"PL",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:15},{name:"PL",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:15},{name:"PL",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:20},{name:"PL",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:15},{name:"PL",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:18},{name:"PL",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:87},{name:"PL",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:100},{name:"PL",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:28},{name:"PL",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:23},{name:"PL",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:17},{name:"PL",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:13},{name:"PL",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:12},{name:"PL",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:9},{name:"PL",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:11},{name:"PL",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:11},{name:"PL",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:7},{name:"PL",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:11},{name:"PL",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:9},{name:"PL",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:9},{name:"PL",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:10},{name:"PL",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:9},{name:"PL",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:10},{name:"PL",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:7},{name:"PL",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:8},{name:"PL",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PL",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:5},{name:"PL",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PL",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:5},{name:"PL",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:5},{name:"PL",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PL",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:2},{name:"PL",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PL",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:5},{name:"PL",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PL",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:7},{name:"PL",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PL",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PL",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:6},{name:"PL",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PL",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:5},{name:"PL",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:10},{name:"PL",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:6}]},{name:"RO",keyword:"Infinity War",query:"Infinity War",data:[{name:"RO",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:28},{name:"RO",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:21},{name:"RO",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:24},{name:"RO",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:20},{name:"RO",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:19},{name:"RO",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:16},{name:"RO",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:14},{name:"RO",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:15},{name:"RO",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:14},{name:"RO",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:13},{name:"RO",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:23},{name:"RO",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:11},{name:"RO",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:19},{name:"RO",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:26},{name:"RO",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:26},{name:"RO",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:63},{name:"RO",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:100},{name:"RO",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:43},{name:"RO",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:23},{name:"RO",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:10},{name:"RO",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:19},{name:"RO",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:11},{name:"RO",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:12},{name:"RO",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:12},{name:"RO",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:14},{name:"RO",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:7},{name:"RO",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:16},{name:"RO",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:7},{name:"RO",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:15},{name:"RO",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:16},{name:"RO",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:13},{name:"RO",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:8},{name:"RO",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:6},{name:"RO",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:16},{name:"RO",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:8},{name:"RO",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:8},{name:"RO",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:7},{name:"RO",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:7},{name:"RO",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:8},{name:"RO",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:7},{name:"RO",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:9},{name:"RO",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:7},{name:"RO",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:5},{name:"RO",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:6},{name:"RO",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:8},{name:"RO",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:6},{name:"RO",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:3},{name:"RO",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:6},{name:"RO",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:2},{name:"RO",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:11},{name:"RO",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:33},{name:"RO",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:9}]},{name:"CN",keyword:"Infinity War",query:"Infinity War",data:[{name:"CN",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:76},{name:"CN",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:59},{name:"CN",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:52},{name:"CN",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:53},{name:"CN",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:52},{name:"CN",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:49},{name:"CN",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:100},{name:"CN",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:50},{name:"CN",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:52},{name:"CN",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:60},{name:"CN",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:53},{name:"CN",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:54},{name:"CN",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:53},{name:"CN",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:59},{name:"CN",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:61},{name:"CN",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:59},{name:"CN",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:57},{name:"CN",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:58},{name:"CN",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!1,value:0},{name:"CN",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!1,value:0}]},{name:"IN",keyword:"Infinity War",query:"Infinity War",data:[{name:"IN",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:16},{name:"IN",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:15},{name:"IN",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:15},{name:"IN",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:14},{name:"IN",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:14},{name:"IN",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:13},{name:"IN",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:13},{name:"IN",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:13},{name:"IN",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:18},{name:"IN",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:27},{name:"IN",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:29},{name:"IN",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:30},{name:"IN",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:29},{name:"IN",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:32},{name:"IN",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:40},{name:"IN",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:100},{name:"IN",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:76},{name:"IN",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:39},{name:"IN",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:24},{name:"IN",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:19},{name:"IN",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:17},{name:"IN",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:13},{name:"IN",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:11},{name:"IN",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:10},{name:"IN",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:8},{name:"IN",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IN",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IN",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:8},{name:"IN",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:8},{name:"IN",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:9},{name:"IN",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:8},{name:"IN",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:8},{name:"IN",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IN",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:6},{name:"IN",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IN",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IN",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:5},{name:"IN",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:6},{name:"IN",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:9},{name:"IN",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:7},{name:"IN",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:5},{name:"IN",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:5},{name:"IN",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:5},{name:"IN",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:5},{name:"IN",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:5},{name:"IN",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:4},{name:"IN",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:4},{name:"IN",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:4},{name:"IN",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:4},{name:"IN",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:4},{name:"IN",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:4},{name:"IN",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:4}]},{name:"ID",keyword:"Infinity War",query:"Infinity War",data:[{name:"ID",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:17},{name:"ID",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:15},{name:"ID",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:15},{name:"ID",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:18},{name:"ID",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:14},{name:"ID",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:15},{name:"ID",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:11},{name:"ID",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:11},{name:"ID",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:28},{name:"ID",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:32},{name:"ID",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:27},{name:"ID",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:25},{name:"ID",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:24},{name:"ID",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:18},{name:"ID",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:27},{name:"ID",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:72},{name:"ID",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:100},{name:"ID",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:60},{name:"ID",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:34},{name:"ID",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:20},{name:"ID",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:23},{name:"ID",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:17},{name:"ID",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:14},{name:"ID",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:11},{name:"ID",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:10},{name:"ID",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:11},{name:"ID",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:11},{name:"ID",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:9},{name:"ID",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:9},{name:"ID",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:8},{name:"ID",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:9},{name:"ID",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:5},{name:"ID",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:8},{name:"ID",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:6},{name:"ID",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:6},{name:"ID",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:5},{name:"ID",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:6},{name:"ID",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:4},{name:"ID",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:5},{name:"ID",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:5},{name:"ID",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:5},{name:"ID",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:4},{name:"ID",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:4},{name:"ID",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:4},{name:"ID",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:4},{name:"ID",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:3},{name:"ID",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:3},{name:"ID",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:4},{name:"ID",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:4},{name:"ID",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:5},{name:"ID",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:5},{name:"ID",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:6}]},{name:"PK",keyword:"Infinity War",query:"Infinity War",data:[{name:"PK",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:28},{name:"PK",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:21},{name:"PK",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:28},{name:"PK",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:24},{name:"PK",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:25},{name:"PK",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:20},{name:"PK",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:17},{name:"PK",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:20},{name:"PK",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:26},{name:"PK",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:22},{name:"PK",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:28},{name:"PK",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:29},{name:"PK",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:36},{name:"PK",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:50},{name:"PK",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:38},{name:"PK",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:80},{name:"PK",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:100},{name:"PK",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:60},{name:"PK",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:52},{name:"PK",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:31},{name:"PK",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:28},{name:"PK",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:28},{name:"PK",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:19},{name:"PK",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:13},{name:"PK",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:15},{name:"PK",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:19},{name:"PK",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:11},{name:"PK",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:14},{name:"PK",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:18},{name:"PK",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:19},{name:"PK",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:14},{name:"PK",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:18},{name:"PK",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:14},{name:"PK",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:14},{name:"PK",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:15},{name:"PK",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:15},{name:"PK",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:9},{name:"PK",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:10},{name:"PK",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:10},{name:"PK",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:10},{name:"PK",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:8},{name:"PK",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:9},{name:"PK",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:5},{name:"PK",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:12},{name:"PK",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:8},{name:"PK",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:5},{name:"PK",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:7},{name:"PK",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PK",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:12},{name:"PK",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:9},{name:"PK",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:7},{name:"PK",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:6}]},{name:"JP",keyword:"Infinity War",query:"Infinity War",data:[{name:"JP",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:8},{name:"JP",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:26},{name:"JP",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:15},{name:"JP",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:12},{name:"JP",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:24},{name:"JP",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:12},{name:"JP",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:19},{name:"JP",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:16},{name:"JP",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:14},{name:"JP",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:25},{name:"JP",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:27},{name:"JP",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:11},{name:"JP",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:31},{name:"JP",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:33},{name:"JP",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:27},{name:"JP",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:57},{name:"JP",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:100},{name:"JP",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:61},{name:"JP",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:38},{name:"JP",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:17},{name:"JP",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:9},{name:"JP",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:25},{name:"JP",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:15},{name:"JP",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:16},{name:"JP",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:18},{name:"JP",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:9},{name:"JP",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:16},{name:"JP",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:5},{name:"JP",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:16},{name:"JP",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:15},{name:"JP",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:15},{name:"JP",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:7},{name:"JP",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:11},{name:"JP",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:15},{name:"JP",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:15},{name:"JP",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:11},{name:"JP",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:9},{name:"JP",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:11},{name:"JP",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:5},{name:"JP",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:10},{name:"JP",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:8},{name:"JP",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:22},{name:"JP",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!1,value:0},{name:"JP",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:6},{name:"JP",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:8},{name:"JP",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:7},{name:"JP",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:11},{name:"JP",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:6},{name:"JP",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:5},{name:"JP",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:11},{name:"JP",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:5},{name:"JP",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:13}]},{name:"PH",keyword:"Infinity War",query:"Infinity War",data:[{name:"PH",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:18},{name:"PH",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:14},{name:"PH",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:11},{name:"PH",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:8},{name:"PH",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:11},{name:"PH",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:8},{name:"PH",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:10},{name:"PH",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:8},{name:"PH",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:11},{name:"PH",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:19},{name:"PH",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:16},{name:"PH",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:18},{name:"PH",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:20},{name:"PH",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:23},{name:"PH",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:34},{name:"PH",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:96},{name:"PH",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:100},{name:"PH",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:39},{name:"PH",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:22},{name:"PH",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:16},{name:"PH",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:13},{name:"PH",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:9},{name:"PH",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:9},{name:"PH",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:7},{name:"PH",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:5},{name:"PH",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:6},{name:"PH",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PH",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:6},{name:"PH",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:5},{name:"PH",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:6},{name:"PH",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:5},{name:"PH",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:7},{name:"PH",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:7},{name:"PH",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PH",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PH",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PH",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PH",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PH",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PH",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PH",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PH",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PH",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PH",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PH",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PH",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PH",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:2},{name:"PH",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PH",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PH",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:3},{name:"PH",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:4},{name:"PH",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:4}]},{name:"VN",keyword:"Infinity War",query:"Infinity War",data:[{name:"VN",date:"Jan 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:8},{name:"VN",date:"Jan 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:9},{name:"VN",date:"Jan 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:7},{name:"VN",date:"Jan 27 \u2013 Feb 2, 2019",query:"Infinity War",hasData:!0,value:12},{name:"VN",date:"Feb 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:14},{name:"VN",date:"Feb 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:8},{name:"VN",date:"Feb 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:8},{name:"VN",date:"Feb 24 \u2013 Mar 2, 2019",query:"Infinity War",hasData:!0,value:7},{name:"VN",date:"Mar 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:12},{name:"VN",date:"Mar 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:17},{name:"VN",date:"Mar 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:12},{name:"VN",date:"Mar 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:9},{name:"VN",date:"Mar 31 \u2013 Apr 6, 2019",query:"Infinity War",hasData:!0,value:10},{name:"VN",date:"Apr 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:12},{name:"VN",date:"Apr 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:17},{name:"VN",date:"Apr 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:48},{name:"VN",date:"Apr 28 \u2013 May 4, 2019",query:"Infinity War",hasData:!0,value:100},{name:"VN",date:"May 5 \u2013 11, 2019",query:"Infinity War",hasData:!0,value:44},{name:"VN",date:"May 12 \u2013 18, 2019",query:"Infinity War",hasData:!0,value:23},{name:"VN",date:"May 19 \u2013 25, 2019",query:"Infinity War",hasData:!0,value:15},{name:"VN",date:"May 26 \u2013 Jun 1, 2019",query:"Infinity War",hasData:!0,value:13},{name:"VN",date:"Jun 2 \u2013 8, 2019",query:"Infinity War",hasData:!0,value:10},{name:"VN",date:"Jun 9 \u2013 15, 2019",query:"Infinity War",hasData:!0,value:10},{name:"VN",date:"Jun 16 \u2013 22, 2019",query:"Infinity War",hasData:!0,value:8},{name:"VN",date:"Jun 23 \u2013 29, 2019",query:"Infinity War",hasData:!0,value:7},{name:"VN",date:"Jun 30 \u2013 Jul 6, 2019",query:"Infinity War",hasData:!0,value:7},{name:"VN",date:"Jul 7 \u2013 13, 2019",query:"Infinity War",hasData:!0,value:10},{name:"VN",date:"Jul 14 \u2013 20, 2019",query:"Infinity War",hasData:!0,value:7},{name:"VN",date:"Jul 21 \u2013 27, 2019",query:"Infinity War",hasData:!0,value:6},{name:"VN",date:"Jul 28 \u2013 Aug 3, 2019",query:"Infinity War",hasData:!0,value:5},{name:"VN",date:"Aug 4 \u2013 10, 2019",query:"Infinity War",hasData:!0,value:6},{name:"VN",date:"Aug 11 \u2013 17, 2019",query:"Infinity War",hasData:!0,value:6},{name:"VN",date:"Aug 18 \u2013 24, 2019",query:"Infinity War",hasData:!0,value:5},{name:"VN",date:"Aug 25 \u2013 31, 2019",query:"Infinity War",hasData:!0,value:5},{name:"VN",date:"Sep 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:3},{name:"VN",date:"Sep 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:4},{name:"VN",date:"Sep 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:3},{name:"VN",date:"Sep 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:3},{name:"VN",date:"Sep 29 \u2013 Oct 5, 2019",query:"Infinity War",hasData:!0,value:3},{name:"VN",date:"Oct 6 \u2013 12, 2019",query:"Infinity War",hasData:!0,value:5},{name:"VN",date:"Oct 13 \u2013 19, 2019",query:"Infinity War",hasData:!0,value:2},{name:"VN",date:"Oct 20 \u2013 26, 2019",query:"Infinity War",hasData:!0,value:4},{name:"VN",date:"Oct 27 \u2013 Nov 2, 2019",query:"Infinity War",hasData:!0,value:3},{name:"VN",date:"Nov 3 \u2013 9, 2019",query:"Infinity War",hasData:!0,value:4},{name:"VN",date:"Nov 10 \u2013 16, 2019",query:"Infinity War",hasData:!0,value:4},{name:"VN",date:"Nov 17 \u2013 23, 2019",query:"Infinity War",hasData:!0,value:3},{name:"VN",date:"Nov 24 \u2013 30, 2019",query:"Infinity War",hasData:!0,value:3},{name:"VN",date:"Dec 1 \u2013 7, 2019",query:"Infinity War",hasData:!0,value:4},{name:"VN",date:"Dec 8 \u2013 14, 2019",query:"Infinity War",hasData:!0,value:2},{name:"VN",date:"Dec 15 \u2013 21, 2019",query:"Infinity War",hasData:!0,value:5},{name:"VN",date:"Dec 22 \u2013 28, 2019",query:"Infinity War",hasData:!0,value:4},{name:"VN",date:"Dec 29, 2019 \u2013 Jan 4, 2020",query:"Infinity War",hasData:!0,value:2}]}]},cv=((ov=function(){function e(){_classCallCheck(this,e),this.originalArray=lv,this._original=new kf(this.originalArray),this.original=this._original.asObservable(),this.byDateArray=uv,this._byDate=new kf(this.byDateArray),this.byDate=this._byDate.asObservable(),this.sendData=[],this._sentData=new kf(this.sendData),this.sentData=this._sentData.asObservable(),this.Index=0,this._sliderIndex=new kf(this.Index),this.sliderIndex=this._sliderIndex.asObservable(),this._Loading=new kf(this.isLoading),this.Loading=this._Loading.asObservable()}return _createClass(e,[{key:"saveOriginal",value:function(e){this._original.next(e)}},{key:"setLoading",value:function(e){this._Loading.next(e)}},{key:"saveByDate",value:function(e){this._byDate.next(e)}},{key:"parseSendData",value:function(e){var t=[],n={name:e,series:[]};this._original.value.data.forEach((function(t){if(t.name==e)for(var r=0;r<52;r++)n.series.push({name:r.toString(),date:t.data[r].date,query:t.data[r].query,value:t.data[r].value})})),t.push(n),this._sentData.next(t)}},{key:"parseCountries",value:function(e){for(var t=[],n=function(){var n=[];e.data.forEach((function(e){e.data[r]&&"Global"!=e.data[r].name&&n.push(e.data[r])})),t.push(n)},r=0;r<e.data[0].data.length;r++)n();this._byDate.next(t)}},{key:"getCountriesData",value:function(e){this._sliderIndex.next(e)}},{key:"ngOnDestroy",value:function(){this._byDate.unsubscribe(),this._sliderIndex.unsubscribe(),this._original.unsubscribe(),this._Loading.unsubscribe(),this._sentData.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||ov)},ov.\u0275prov=Xe({token:ov,factory:ov.\u0275fac,providedIn:"root"}),ov),hv=n("xexB"),fv=function(){function e(t){_classCallCheck(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return _createClass(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,".")),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"get",value:function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(n,r[0],r[1]),r.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=_slicedToArray(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}},{key:"features",get:function(){return this.flags}}]),e}();function dv(){return mv}var pv,mv=null;function vv(){if(null==pv){var e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}pv=e}return pv}function yv(e,t){var n,r=(null==(n=vv())._tfGlobals&&(n._tfGlobals=new Map),n._tfGlobals);if(r.has(e))return r.get(e);var a=t();return r.set(e,a),r.get(e)}var gv=yv("kernelRegistry",(function(){return new Map})),_v=yv("gradRegistry",(function(){return new Map}));function bv(e,t){var n=Cv(e,t);return gv.get(n)}function xv(e){return _v.get(e)}function wv(e){for(var t=gv.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=_slicedToArray(i,2),s=o[0],u=o[1];_slicedToArray(s.split("_"),1)[0]===e&&n.push(u)}return n}function kv(e){var t=e.kernelName,n=e.backendName,r=Cv(t,n);gv.has(r)&&console.warn("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),gv.set(r,e)}function Cv(e,t){return"".concat(t,"_").concat(e)}function Sv(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function Iv(e,t,n){return Math.max(e,Math.min(t,n))}function Dv(e){return e%2==0?e:e+1}function Av(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Tv(e,t){var n=Math.random();return t*n+(1-n)*e}function Ev(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function Rv(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Ov(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Rv(Lv(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function Mv(e){Rv(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Nv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||Qv(e)&&!n)for(var r=0;r<e.length;++r)Nv(e[r],t,n);else t.push(e);return t}function Pv(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Fv(e){return 0===e.length}function Lv(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function zv(e){return e%1==0}function Bv(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Wv(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function qv(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Sv(t),t}function Vv(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Uv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function jv(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function Hv(e,t){var n=t.length;return Rv((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),Rv(e.every((function(e){return zv(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function Gv(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:Hv(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Jv(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function Xv(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Kv(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function Zv(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function Yv(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function Qv(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function $v(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function ey(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function ty(e){return"string"==typeof e||e instanceof String}function ny(e){return"boolean"==typeof e}function ry(e){return"number"==typeof e}function ay(e){return Array.isArray(e)?ay(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":ry(e)?"float32":ty(e)?"string":ny(e)?"bool":"float32"}function iy(e){return!!(e&&e.constructor&&e.call&&e.apply)}function oy(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function sy(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function uy(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Nv(e)),n&&Kv(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)0!==Math.round(e[a])&&(r[a]=1);return r}throw new Error("Unknown data type ".concat(t))}function ly(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("[".concat(e,"] does not match the input size."));return function e(t,n,r){var a=new Array;if(1===n.length)for(var i=n[0],o=0;o<i;o++)a[o]=r[t+o];else for(var s=n[0],u=n.slice(1),l=u.reduce((function(e,t){return e*t})),c=0;c<s;c++)a[c]=e(t+c*l,u,r);return a}(0,e,t)}function cy(e,t){for(var n=hy(e,t),r=0;r<n.length;r++)n[r]=1;return n}function hy(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function fy(){return dv().platform.now()}function dy(e){e.forEach((function(t){Rv(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function py(e,t){return dv().platform.fetch(e,t)}function my(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",dv().platform.encode(e,t)}function vy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",dv().platform.decode(e,t)}function yy(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function gy(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}var _y=function(){function e(t,n){_classCallCheck(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new by)}return _createClass(e,[{key:"profileKernel",value:function(e,t,n){var r,a=this,i=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(r,n.dtype,e),i.then((function(i){var o="";null!=i.getExtraProfileInfo&&(o=i.getExtraProfileInfo()),a.logger.logKernelProfile(e,n,r,i.kernelMs,t,o)}))}))})),r}}]),e}(),by=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"==typeof r?Vv("".concat(r,"ms"),9):r.error,s=Vv(e,25),u=t.rank,l=t.size,c=Vv(t.shape.toString(),14),h="";for(var f in a){var d=a[f].shape||t.shape,p=d.length;h+="".concat(f,": ").concat(p,"D ").concat(p>0?d:""," ")}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(c,"\t%c").concat(l,"\t%c").concat(h,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function xy(e,t,n){return Vv(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):ty(e)?"'".concat(e,"'"):"bool"===n?wy(e):parseFloat(e.toFixed(7)).toString(),t)}function wy(e){return 0===e?"false":"true"}function ky(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Cy=function(){function e(t,n,r){var a=this;if(_classCallCheck(this,e),this.dtype=n,this.shape=t.slice(),this.size=Pv(t),null!=r){var i=r.length;Rv(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Xv(n,this.size),this.strides=sy(t)}return _createClass(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),Rv(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r])throw new Error("Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape));r++}for(var s=t[t.length-1],u=0;u<t.length-1;++u)s+=this.strides[u]*t[u];return this.values[s]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"toTensor",value:function(){return Sy().makeTensor(this.values,this.shape,this.dtype)}},{key:"rank",get:function(){return this.shape.length}}]),e}(),Sy=null,Iy=null,Dy=function(){function e(t,n,r,a){_classCallCheck(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Pv(t),this.strides=sy(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}var t,n,r,a;return _createClass(e,[{key:"flatten",value:function(){return this.throwIfDisposed(),this.as1D()}},{key:"asScalar",value:function(){return this.throwIfDisposed(),Rv(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])}},{key:"as1D",value:function(){return this.throwIfDisposed(),this.reshape([this.size])}},{key:"as2D",value:function(e,t){return this.throwIfDisposed(),this.reshape([e,t])}},{key:"as3D",value:function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])}},{key:"as4D",value:function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])}},{key:"as5D",value:function(e,t,n,r,a){return this.throwIfDisposed(),this.reshape([e,t,n,r,a])}},{key:"asType",value:function(e){return this.throwIfDisposed(),Iy.cast(this,e)}},{key:"buffer",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Iy.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"bufferSync",value:function(){return Iy.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",ly(this.shape,t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"arraySync",value:function(){return ly(this.shape,this.dataSync())}},{key:"data",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=Sy().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return vy(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])}))),function(){return n.apply(this,arguments)})},{key:"dataSync",value:function(){this.throwIfDisposed();var e=Sy().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return vy(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,Sy().read(this.dataId);case 3:return t=e.sent,e.abrupt("return","string"===this.dtype?t:new Uint8Array(t.buffer));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dispose",value:function(){this.isDisposed||(Sy().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"toFloat",value:function(){return this.asType("float32")}},{key:"toInt",value:function(){return this.asType("int32")}},{key:"toBool",value:function(){return this.asType("bool")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Iy.print(this,e)}},{key:"reshape",value:function(e){return this.throwIfDisposed(),Iy.reshape(this,e)}},{key:"reshapeAs",value:function(e){return this.throwIfDisposed(),this.reshape(e.shape)}},{key:"expandDims",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Iy.expandDims(this,e)}},{key:"cumsum",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Iy.cumsum(this,e,t,n)}},{key:"squeeze",value:function(e){return this.throwIfDisposed(),Iy.squeeze(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),Iy.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t,n,r){var a=sy(t),i=function(e,t,n,r){var a=Pv(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?ky(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var c=l*i,h=0;h<i;h++)o[h]=Math.max(o[h],xy(u[c+h],0,n).length);return o}(e,t,n,a),o=t.length,s=function e(t,n,r,a,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s="complex64"===r?2:1,u=n[0],l=n.length;if(0===l)return"complex64"===r?[xy(ky(t)[0],0,r)]:"bool"===r?[wy(t[0])]:[t[0].toString()];if(1===l){if(u>20){var c=Array.from(t.slice(0,3*s)),h=Array.from(t.slice((u-3)*s,u*s));return"complex64"===r&&(c=ky(c),h=ky(h)),["["+c.map((function(e,t){return xy(e,i[t],r)})).join(", ")+", ..., "+h.map((function(e,t){return xy(e,i[u-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?ky(t):Array.from(t)).map((function(e,t){return xy(e,i[t],r)})).join(", ")+"]"]}var f=n.slice(1),d=a.slice(1),p=a[0]*s,m=[];if(u>20){for(var v=0;v<3;v++){var y=v*p;m.push.apply(m,_toConsumableArray(e(t.slice(y,y+p),f,r,d,i,!1)))}m.push("...");for(var g=u-3;g<u;g++){var _=g*p;m.push.apply(m,_toConsumableArray(e(t.slice(_,_+p),f,r,d,i,g===u-1)))}}else for(var b=0;b<u;b++){var x=b*p;m.push.apply(m,_toConsumableArray(e(t.slice(x,x+p),f,r,d,i,b===u-1)))}var w=2===l?",":"";m[0]="["+m[0]+w;for(var k=1;k<m.length-1;k++)m[k]=" "+m[k]+w;for(var C=",\n",S=2;S<l;S++)C+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(o?"":C),m}(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)}},{key:"gather",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.throwIfDisposed(),Iy.gather(this,e,t)}},{key:"norm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"euclidean",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.throwIfDisposed(),Iy.norm(this,e,t,n)}},{key:"slice",value:function(e,t){return this.throwIfDisposed(),Iy.slice(this,e,t)}},{key:"reverse",value:function(e){return this.throwIfDisposed(),Iy.reverse(this,e)}},{key:"stack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Iy.stack([this,e],t)}},{key:"unstack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Iy.unstack(this,e)}},{key:"all",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.throwIfDisposed(),Iy.all(this,e,t)}},{key:"any",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.throwIfDisposed(),Iy.any(this,e,t)}},{key:"logSumExp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.throwIfDisposed(),Iy.logSumExp(this,e,t)}},{key:"sum",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.throwIfDisposed(),Iy.sum(this,e,t)}},{key:"prod",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.throwIfDisposed(),Iy.prod(this,e,t)}},{key:"mean",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.throwIfDisposed(),Iy.mean(this,e,t)}},{key:"min",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.throwIfDisposed(),Iy.min(this,e,t)}},{key:"argMin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.throwIfDisposed(),Iy.argMin(this,e)}},{key:"argMax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.throwIfDisposed(),Iy.argMax(this,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),Iy.cast(this,e)}},{key:"addStrict",value:function(e){return this.throwIfDisposed(),Iy.addStrict(this,e)}},{key:"atan2",value:function(e){return this.throwIfDisposed(),Iy.atan2(this,e)}},{key:"subStrict",value:function(e){return this.throwIfDisposed(),Iy.subStrict(this,e)}},{key:"pow",value:function(e){return this.throwIfDisposed(),Iy.pow(this,e)}},{key:"powStrict",value:function(e){return this.throwIfDisposed(),Iy.powStrict(this,e)}},{key:"mul",value:function(e){return this.throwIfDisposed(),Iy.mul(this,e)}},{key:"mulStrict",value:function(e){return this.throwIfDisposed(),Iy.mulStrict(this,e)}},{key:"floorDiv",value:function(e){return this.throwIfDisposed(),Iy.floorDiv(this,e)}},{key:"divStrict",value:function(e){return this.throwIfDisposed(),Iy.divStrict(this,e)}},{key:"minimum",value:function(e){return this.throwIfDisposed(),Iy.minimum(this,e)}},{key:"minimumStrict",value:function(e){return this.throwIfDisposed(),Iy.minimumStrict(this,e)}},{key:"maximum",value:function(e){return this.throwIfDisposed(),Iy.maximum(this,e)}},{key:"maximumStrict",value:function(e){return this.throwIfDisposed(),Iy.maximumStrict(this,e)}},{key:"mod",value:function(e){return this.throwIfDisposed(),Iy.mod(this,e)}},{key:"modStrict",value:function(e){return this.throwIfDisposed(),Iy.modStrict(this,e)}},{key:"squaredDifferenceStrict",value:function(e){return this.throwIfDisposed(),Iy.squaredDifferenceStrict(this,e)}},{key:"notEqualStrict",value:function(e){return this.throwIfDisposed(),Iy.notEqualStrict(this,e)}},{key:"lessStrict",value:function(e){return this.throwIfDisposed(),Iy.lessStrict(this,e)}},{key:"equalStrict",value:function(e){return this.throwIfDisposed(),Iy.equalStrict(this,e)}},{key:"lessEqualStrict",value:function(e){return this.throwIfDisposed(),Iy.lessEqualStrict(this,e)}},{key:"greaterStrict",value:function(e){return this.throwIfDisposed(),Iy.greaterStrict(this,e)}},{key:"greaterEqualStrict",value:function(e){return this.throwIfDisposed(),Iy.greaterEqualStrict(this,e)}},{key:"logicalAnd",value:function(e){return this.throwIfDisposed(),Iy.logicalAnd(this,e)}},{key:"logicalOr",value:function(e){return this.throwIfDisposed(),Iy.logicalOr(this,e)}},{key:"logicalNot",value:function(){return this.throwIfDisposed(),Iy.logicalNot(this)}},{key:"logicalXor",value:function(e){return this.throwIfDisposed(),Iy.logicalXor(this,e)}},{key:"where",value:function(e,t){return this.throwIfDisposed(),Iy.where(e,this,t)}},{key:"neg",value:function(){return this.throwIfDisposed(),Iy.neg(this)}},{key:"ceil",value:function(){return this.throwIfDisposed(),Iy.ceil(this)}},{key:"floor",value:function(){return this.throwIfDisposed(),Iy.floor(this)}},{key:"sign",value:function(){return this.throwIfDisposed(),Iy.sign(this)}},{key:"isNaN",value:function(){return this.throwIfDisposed(),Iy.isNaN(this)}},{key:"isInf",value:function(){return this.throwIfDisposed(),Iy.isInf(this)}},{key:"isFinite",value:function(){return this.throwIfDisposed(),Iy.isFinite(this)}},{key:"exp",value:function(){return this.throwIfDisposed(),Iy.exp(this)}},{key:"expm1",value:function(){return this.throwIfDisposed(),Iy.expm1(this)}},{key:"log",value:function(){return this.throwIfDisposed(),Iy.log(this)}},{key:"log1p",value:function(){return this.throwIfDisposed(),Iy.log1p(this)}},{key:"sqrt",value:function(){return this.throwIfDisposed(),Iy.sqrt(this)}},{key:"rsqrt",value:function(){return this.throwIfDisposed(),Iy.rsqrt(this)}},{key:"square",value:function(){return this.throwIfDisposed(),Iy.square(this)}},{key:"reciprocal",value:function(){return this.throwIfDisposed(),Iy.reciprocal(this)}},{key:"abs",value:function(){return this.throwIfDisposed(),Iy.abs(this)}},{key:"clipByValue",value:function(e,t){return this.throwIfDisposed(),Iy.clipByValue(this,e,t)}},{key:"relu",value:function(){return this.throwIfDisposed(),Iy.relu(this)}},{key:"relu6",value:function(){return this.throwIfDisposed(),Iy.relu6(this)}},{key:"elu",value:function(){return this.throwIfDisposed(),Iy.elu(this)}},{key:"selu",value:function(){return this.throwIfDisposed(),Iy.selu(this)}},{key:"leakyRelu",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.2;return this.throwIfDisposed(),Iy.leakyRelu(this,e)}},{key:"prelu",value:function(e){return this.throwIfDisposed(),Iy.prelu(this,e)}},{key:"sigmoid",value:function(){return this.throwIfDisposed(),Iy.sigmoid(this)}},{key:"logSigmoid",value:function(){return this.throwIfDisposed(),Iy.logSigmoid(this)}},{key:"softplus",value:function(){return this.throwIfDisposed(),Iy.softplus(this)}},{key:"zerosLike",value:function(){return this.throwIfDisposed(),Iy.zerosLike(this)}},{key:"onesLike",value:function(){return this.throwIfDisposed(),Iy.onesLike(this)}},{key:"sin",value:function(){return this.throwIfDisposed(),Iy.sin(this)}},{key:"cos",value:function(){return this.throwIfDisposed(),Iy.cos(this)}},{key:"tan",value:function(){return this.throwIfDisposed(),Iy.tan(this)}},{key:"asin",value:function(){return this.throwIfDisposed(),Iy.asin(this)}},{key:"acos",value:function(){return this.throwIfDisposed(),Iy.acos(this)}},{key:"atan",value:function(){return this.throwIfDisposed(),Iy.atan(this)}},{key:"sinh",value:function(){return this.throwIfDisposed(),Iy.sinh(this)}},{key:"cosh",value:function(){return this.throwIfDisposed(),Iy.cosh(this)}},{key:"tanh",value:function(){return this.throwIfDisposed(),Iy.tanh(this)}},{key:"asinh",value:function(){return this.throwIfDisposed(),Iy.asinh(this)}},{key:"acosh",value:function(){return this.throwIfDisposed(),Iy.acosh(this)}},{key:"atanh",value:function(){return this.throwIfDisposed(),Iy.atanh(this)}},{key:"erf",value:function(){return this.throwIfDisposed(),Iy.erf(this)}},{key:"round",value:function(){return this.throwIfDisposed(),Iy.round(this)}},{key:"step",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.throwIfDisposed(),Iy.step(this,e)}},{key:"softmax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this.throwIfDisposed(),Iy.softmax(this,e)}},{key:"logSoftmax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this.throwIfDisposed(),Iy.logSoftmax(this,e)}},{key:"resizeBilinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.throwIfDisposed(),Iy.image.resizeBilinear(this,e,t)}},{key:"resizeNearestNeighbor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.throwIfDisposed(),Iy.image.resizeNearestNeighbor(this,e,t)}},{key:"avgPool",value:function(e,t,n,r){return this.throwIfDisposed(),Iy.avgPool(this,e,t,n,r)}},{key:"maxPool",value:function(e,t,n,r){return this.throwIfDisposed(),Iy.maxPool(this,e,t,n,r)}},{key:"pool",value:function(e,t,n,r,a){return this.throwIfDisposed(),Iy.pool(this,e,t,n,r,a)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),Sy().makeVariable(this,e,t,n)}},{key:"unsortedSegmentSum",value:function(e,t){return this.throwIfDisposed(),Iy.unsortedSegmentSum(this,e,t)}},{key:"topk",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.throwIfDisposed(),Iy.topk(this,e,t)}},{key:"stridedSlice",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return this.throwIfDisposed(),Iy.stridedSlice(this,e,t,n,r,a,i,o,s)}},{key:"fft",value:function(){return this.throwIfDisposed(),Iy.spectral.fft(this)}},{key:"ifft",value:function(){return this.throwIfDisposed(),Iy.spectral.ifft(this)}},{key:"rfft",value:function(){return this.throwIfDisposed(),Iy.spectral.rfft(this)}},{key:"irfft",value:function(){return this.throwIfDisposed(),Iy.spectral.irfft(this)}},{key:"rank",get:function(){return this.shape.length}},{key:"isDisposed",get:function(){return this.isDisposedInternal}}]),e}();Object.defineProperty(Dy,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Ay,Ty,Ey,Ry,Oy,My=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return _createClass(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Lv(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));Sy().disposeTensor(this),this.dataId=e.dataId,Sy().incRef(this,null)}},{key:"dispose",value:function(){Sy().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(Dy);Object.defineProperty(My,Symbol.hasInstance,{value:function(e){return e instanceof Dy&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Ay||(Ay={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Ty||(Ty={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Ey||(Ey={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Ry||(Ry={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Oy||(Oy={}));var Ny={float32:Ry,int32:Ty,bool:Ey,complex64:Oy};function Py(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return Ny[e][t]}function Fy(e){return Py(e,"int32")}function Ly(e,t){if(e.dtype===t.dtype)return[e,t];var n=Py(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function zy(e,t){Rv(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function By(e,t){return t.some((function(t){return t.id===e.id}))}function Wy(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof Dy)n.push(t);else if(a=t,Array.isArray(a)||"object"==typeof a){var a,i=t;for(var o in i){var s=i[o];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}var qy=function(){function e(){_classCallCheck(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return _createClass(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),Vy=function(){function e(t){_classCallCheck(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new qy}var t,n,r,a;return _createClass(e,[{key:"ready",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=17;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=14;break}return e.next=13,this.setBackend(r);case 13:return e.abrupt("return",void e.sent);case 14:n++,e.next=6;break;case 17:throw new Error("Could not initialize any backends, all backend initializations failed.");case 18:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(console.warn("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=14;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=11;break}return e.next=8,r;case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=r;case 12:if(e.t0){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",(this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new _y(this.backendInstance),!0));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setupRegisteredKernels",value:function(){var e=this;wv(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;wv(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(Promise.resolve(r)===r){var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId||(t.registry[e]=n,t.pendingBackendInit=null,0))})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(o){return console.warn("Initialization of backend ".concat(e," failed")),console.warn(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,a,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype);return this.addTapeNode(this.state.activeScope.name,{x:e},[t],(function(e){return{x:function(){return e.toFloat()}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n,r,a){return this.runKernelFunc(null,t,null,e,n,r,a)}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=r-t-a-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e,t,n,r,a,i,o){var s,u=this,l=[],c=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var h,f=this.state.numBytes,d=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var p,m=bv(r,this.backendName);if(null!=m)h=function(){var e=u.backend.numDataIds();p=m.kernelFunc({inputs:t,attrs:a,backend:u.backend});var n=Array.isArray(p)?p:[p];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n);var s=n.map((function(e){var t=e.dataId,n=e.shape,r=e.dtype;return u.makeTensorFromDataId(t,n,r)}));if(c){var h=u.getTensorsForGradient(r,t,s);if(null==h){null==o&&(o=[]);var f=s.filter((function(e,t){return o[t]}));h=(i||[]).slice().concat(f)}l=u.saveTensorsForBackwardMode(h)}return s};else{var v=function(e){c&&(l=e.map((function(e){return u.keep(u.clone(e))})))};h=function(){var t=u.backend.numDataIds();p=u.tidy((function(){return e(u.backend,v)}));var n=Array.isArray(p)?p:[p];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n),n}}return this.scopedRun((function(){return u.state.kernelDepth++}),(function(){return u.state.kernelDepth--}),(function(){s=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(r,t,(function(){return h()})):h()})),c&&this.addTapeNode(r,t,s,n,l,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-f,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-d,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShapes:s.map((function(e){return e.shape}))}),Array.isArray(p)?s:s[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=xv(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(Rv(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return null}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;var a=e;"string"===(n=n||"float32")&&ty(e[0])&&(a=e.map((function(e){return my(e)})));var i=r.write(a,t,n),o=new Dy(t,n,i,this.nextTensorId());if(this.incRef(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=ey(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new Dy(t,n=n||"float32",e,this.nextTensorId());return this.incRef(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var a=new My(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"incRef",value:function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*$v(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof My||this.track(e)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[e])}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,e.abrupt("return",(this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,_toConsumableArray(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,this.state.activeProfile));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=xv(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=hy(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=Wy(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Rv(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));Rv(i instanceof Dy,(function(){return"The result y returned by f() must be a tensor."}));var o=function(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var l in u){for(var c=u[l],h=!1,f=0;f<t.length;f++)if(r[c.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),h=!0,a[s.id]=!0;break}if(h)break}}var d={};d[n.id]=!0;for(var p={},m=e.length-1;m>=0;m--)for(var v=e[m],y=v.inputs,g=0;g<v.outputs.length;g++)if(d[v.outputs[g].id]){for(var _ in y)d[y[_].id]=!0,p[v.id]=!0;break}for(var b=[],x=0;x<e.length;x++){var w=e[x];if(a[w.id]&&p[w.id]){var k={};for(var C in w.inputs){var S=w.inputs[C];r[S.id]&&(k[C]=S)}var I=Object.assign({},w);I.inputs=k,I.outputs=w.outputs,b.push(I)}}return b}(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,a,s={};s[i.id]=null==n?(e=i.shape,a=cy(Pv(e),"float32"),Uy.makeTensor(a,e,"float32")):n,function(e,t,n){for(var a=function(n){var a=t[n],i=[];if(a.outputs.forEach((function(t){var n=e[t.id];i.push(null!=n?n:null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(a.kernelName,"."));var o=a.gradient(i),s=function(t){if(!(t in o))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(o),"."));var n=function(e){return r.tidy(e)}((function(){return o[t]()}));if("float32"!==n.dtype)throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(n.dtype,"'"));var i=a.inputs[t];if(!Lv(n.shape,i.shape))throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(n.shape,"', which does not match ")+"the shape of the input '".concat(i.shape,"'"));if(null==e[i.id])e[i.id]=n;else{var s=e[i.id];e[i.id]=s.add(n),s.dispose()}};for(var u in a.inputs)s(u)},i=t.length-1;i>=0;i--)a(i)}(s,o);var u=t.map((function(e){return s[e.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=_createForOfIteratorHelper(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:u}}))}},{key:"customGrad",value:function(e){var t=this;return Rv(iy(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;Rv(r.every((function(e){return e instanceof Dy})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};return r.forEach((function(e,t){o[t]=e})),t.runKernelFunc((function(t,n){return Rv((i=e.apply(void 0,r.concat([n]))).value instanceof Dy,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Rv(iy(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value}),o,(function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];Rv(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Rv(a.every((function(e){return e instanceof Dy})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o}))}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"time",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fy(),e.next=3,this.backend.time(t);case 3:return r=e.sent,e.abrupt("return",(r.wallMs=fy()-n,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new qy,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}}]),e}();Vy.nextTensorId=0,Vy.nextVariableId=0;var Uy=function(){var e=vv();if(null==e._tfengine){var t=new fv(e);e._tfengine=new Vy(t)}return mv=e._tfengine.ENV,Sy=function(){return e._tfengine},e._tfengine}();function jy(){if("undefined"!=typeof navigator&&null!=navigator){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function Hy(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var Gy=dv();function Jy(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function Xy(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function Ky(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,"."));n.unshift(i)}}return n}Gy.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Gy.registerFlag("IS_BROWSER",(function(){return Hy()})),Gy.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),Gy.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Gy.registerFlag("PROD",(function(){return!1})),Gy.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Gy.getBool("DEBUG")})),Gy.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Gy.registerFlag("IS_TEST",(function(){return!1}));var Zy={kernelName:"Add",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=Ky(r.shape,a.shape);return{a:function(){var t=e,n=Xy(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=Xy(a.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(a.shape)}}}};function Yy(e,t){var n=e;if(Qv(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Qv(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&dv().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||Qv(t)){Rv(n.length>0,(function(){return"Element arr[".concat(r.join("]["),"] should be a primitive, ")+"but is an array of ".concat(t.length," elements")})),Rv(t.length===n[0],(function(){return"Element arr[".concat(r.join("]["),"] should have ").concat(n[0]," ")+"elements, but has ".concat(t.length," elements")}));for(var a=n.slice(1),i=0;i<t.length;++i)e(t[i],a,r.concat(i))}else Rv(0===n.length,(function(){return"Element arr[".concat(r.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(n[0]," elements")}))}(e,r,[]),r}function Qy(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}function $y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Dy)return Qy(r,e.dtype,t,n),e;var a=ay(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Qy(r,a,t,n),null==e||!Qv(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(null==e?"null":e.constructor.name,"'"));var i=Yy(e,a);Qv(e)||Array.isArray(e)||(e=[e]);var o="string"!==a?uy(e,a,dv().getBool("DEBUG")):Nv(e,[],!0);return Uy.makeTensor(o,i,a)}function eg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return $y(e,"".concat(t,"[").concat(r,"]"),n)}),r)}function tg(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function ng(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function rg(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function ag(e,t){return ng(e,t.map((function(e){return 1})),t)}function ig(e,t,n){Rv(tg(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function og(e,t){if(tg(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function sg(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function ug(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function lg(e,t){var n=e[0].length;e.forEach((function(e,t){Rv(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),Rv(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)Rv(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function cg(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function hg(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var a=function(){Uy.startScope(n);try{var e=r.apply(void 0,arguments);return e instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Uy.endScope(e),e}catch(t){throw Uy.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var fg=hg({complex_:function(e,t){var n=$y(e,"real","complex"),r=$y(t,"imag","complex");return Ov(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex()."),Uy.runKernelFunc((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),dg=hg({real_:function(e){var t=$y(e,"input","real");return Uy.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),pg=hg({imag_:function(e){var t=$y(e,"input","imag");return Uy.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function mg(e,t,n){return vg(e,t,Yy(e,n),n)}function vg(e,t,n,r){if(null==r&&(r=ay(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Qv(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){dy(t);var a=Pv(t),i=Pv(n);Rv(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==Pv(t.slice(o));Rv(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Qv(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?uy(e,r,dv().getBool("DEBUG")):Nv(e,[],!0),Uy.makeTensor(e,t,r)}function yg(e,t){if((Qv(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Qv(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return vg(e,[],[],t)}function gg(e,t){Mv(e);var n=Yy(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return vg(e,null,n,t)}function _g(e,t,n){if(Mv(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Yy(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return vg(e,t,r,n)}function bg(e,t,n){if(Mv(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Yy(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return vg(e,t,r,n)}function xg(e,t,n){if(Mv(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Yy(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return vg(e,t,r,n)}function wg(e,t,n){if(Mv(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Yy(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return vg(e,t,r,n)}function kg(e,t,n){if(Mv(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Yy(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return vg(e,t=t||r,r,n)}function Cg(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Uy.makeVariable(e,t,n,r)}function Sg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Sg(e,"float32"),r=Ig(e,"float32");return fg(n,r)}var a=cy(Pv(e),t);return Uy.makeTensor(a,e,t)}function Ig(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Ig(e,"float32"),r=Ig(e,"float32");return fg(n,r)}var a=hy(Pv(e),t);return Uy.makeTensor(a,e,t)}function Dg(e,t,n){return Uy.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function Ag(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Uy.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})}function Tg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Ig([0],r);var a=hy(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return gg(a,r)}var Eg=hg({onesLike_:function(e){var t=$y(e,"x","onesLike");if("complex64"===t.dtype){var n=Eg(dg(t)),r=Rg(pg(t));return fg(n,r)}return Uy.runKernelFunc((function(e){return e.onesLike(t)}),{x:t},(function(e,t){return{x:function(){return Rg(e)}}}),"OnesLike")}}),Rg=hg({zerosLike_:function(e){var t=$y(e,"x","zerosLike");return Uy.runKernelFunc((function(e){return e.zerosLike(t)}),{x:t},(function(e,t){return{x:function(){return Rg(e)}}}),"ZerosLike")}}),Og=hg({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Rv(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=eg(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))}));var r=Hv(t,n[0].shape)[0],a=cg(n.map((function(e){return e.shape})),r);return 0===Pv(a)?mg([],a):1===(n=n.filter((function(e){return e.size>0}))).length?n[0]:(lg(n.map((function(e){return e.shape})),r),Uy.runKernelFunc((function(e,r){var a=Hv(t,n[0].shape)[0],i=e.concat(n,a);return r(n),i}),n,null,"Concat",{axis:t}))}});function Mg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",dy(e),new Cy(e,t,n)}function Ng(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}var Pg=hg({cast_:function(e,t){var n=$y(e,"x","cast");if(!Zv(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return Uy.runKernelFunc((function(e){return e.cast(n,t)}),{x:n},(function(e){return{x:function(){return e.clone()}}}),"Cast",{dtype:t})}}),Fg=hg({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=$y(e,"x","cumsum"),i=og([t|=0],a.rank),o=a;null!=i&&(o=a.transpose(i));var s=ug(1,a.rank)[0],u=Uy.runKernelFunc((function(e){return e.cumsum(o,s,n,r)}),{permutedX:o},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=i&&(u=u.transpose(i)),u}}),Lg=hg({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=$y(e,"x","expandDims",null);Rv(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(Rv(-(n.rank+1)<=t,(function(){return"Axis must be in the interval [".concat(-(n.rank+1),", ").concat(n.rank,"]")})),t=n.rank+t+1),r.splice(t,0,1),zg(n,r)}}),zg=hg({reshape_:function(e,t){var n=$y(e,"x","reshape",null);return t=jv(t,n.size),Rv(n.size===Pv(t),(function(){return"new shape and old shape must have the same number of elements."})),Uy.runKernelFunc((function(e){return e.reshape(n,t)}),{x:n},(function(e){return{x:function(){return e.reshape(n.shape)}}}),"Reshape",{shape:t})}}),Bg=hg({squeeze_:function(e,t){var n=$y(e,"x","squeeze");return zg(n,Gv(n.shape,t).newShape)}}),Wg=hg({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=eg(e,"tensors","stack");if(Rv(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].shape,a=n[0].dtype;Rv(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){Ov(r,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){Rv(a===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=n.map((function(e){return e.expandDims(t)}));return Og(i,t)}}),qg=hg({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=t||0;var n=$y(e,"x","unstack");return Rv(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")})),t<0&&(t+=n.shape.length),Uy.runKernelFunc((function(e){return e.unstack(n,t)}),{x:n},(function(e){return{x:function(){return Wg(e,t)}}}),"Unpack",{axis:t})}}),Vg=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l,c,h,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$y(t,"x","setdiff1d"),a=$y(n,"y","setdiff1d"),Rv(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),Rv(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),Rv(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=4,r.data();case 4:return i=e.sent,e.next=7,a.data();case 7:for(o=e.sent,s=new Set(o),u=0,l=0;l<i.length;l++)s.has(i[l])||u++;for(c=new Cy([u],r.dtype),h=new Cy([u],"int32"),f=0,d=0;f<i.length;f++)s.has(i[f])||(c.values[d]=i[f],h.values[d]=f,d++);return e.abrupt("return",[c.toTensor(),h.toTensor()]);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ug=hg({matMul_:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=$y(e,"a","matMul"),o=$y(t,"b","matMul");n=_slicedToArray(Ly(i,o),2),i=n[0],o=n[1],Rv(i.rank>=2&&o.rank>=2&&i.rank===o.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, "+"got ranks ".concat(i.rank," and ").concat(o.rank,".")}));var s=r?i.shape[i.rank-2]:i.shape[i.rank-1],u=a?o.shape[o.rank-1]:o.shape[o.rank-2],l=r?i.shape[i.rank-1]:i.shape[i.rank-2],c=a?o.shape[o.rank-2]:o.shape[o.rank-1],h=i.shape.slice(0,-2),f=o.shape.slice(0,-2),d=Pv(h),p=Pv(f);Rv(Lv(h,f),(function(){return"Error in matMul: outer dimensions (".concat(h,") and (")+"".concat(f,") of Tensors with shapes ").concat(i.shape," and ")+"".concat(o.shape," must match.")})),Rv(s===u,(function(){return"Error in matMul: inner shapes (".concat(s,") and (")+"".concat(u,") of Tensors with shapes ").concat(i.shape," and ")+"".concat(o.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var m=i.shape.slice(0,-2).concat([l,c]),v=zg(i,r?[d,s,l]:[d,l,s]),y=zg(o,a?[p,c,u]:[p,u,c]),g=Uy.runKernelFunc((function(e,t){return t([v,y]),e.batchMatMul(v,y,r,a)}),{a:v,b:y},null,"BatchMatMul",{transposeA:r,transposeB:a});return zg(g,m)}}),jg={kernelName:"BatchMatMul",inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return Ug(e,i,!1,!1)},b:function(){return Ug(e,a,!0,!1)}}:o&&!s?{a:function(){return Ug(i,e,!1,!0)},b:function(){return Ug(a,e,!1,!1)}}:{a:function(){return Ug(i,e,!0,!0)},b:function(){return Ug(e,a,!0,!0)}}:{a:function(){return Ug(e,i,!1,!0)},b:function(){return Ug(a,e,!0,!1)}}}},Hg=hg({spaceToBatchND_:function(e,t,n){var r=$y(e,"x","spaceToBatchND");return Rv(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),Rv(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),Rv(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())})),Uy.runKernelFunc((function(e){return e.spaceToBatchND(r,t,n)}),{x:r},null,"SpaceToBatchND",{blockShape:t,paddings:n})}}),Gg={kernelName:"BatchToSpaceND",gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return Hg(e,r,a)}}}};function Jg(e){return Uy.customGrad(e)}function Xg(e,t,n,r,a){return t.rank<n.rank&&(t=t.reshape(ag(t.shape,r))),e.rank<n.rank&&(e=e.reshape(ag(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==a?r:r.transpose(a)}}}var Kg=hg({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$y(e,"x","all","bool"),a=Hv(t,r.shape),i=a,o=og(i,r.rank);null!=o&&(r=r.transpose(o),i=ug(i.length,r.rank));var s=Uy.runKernelFunc((function(e){return e.all(r,i)}),{$x:r});if(n){var u=ag(s.shape,a);return s.reshape(u)}return s}}),Zg=hg({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$y(e,"x","any","bool"),a=Hv(t,r.shape),i=a,o=og(i,r.rank);null!=o&&(r=r.transpose(o),i=ug(i.length,r.rank));var s=Uy.runKernelFunc((function(e){return e.any(r,i)}),{$x:r});if(n){var u=ag(s.shape,a);return s.reshape(u)}return s}}),Yg=hg({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=$y(e,"x","argMax");null==t&&(t=0);var r=Hv(t,n.shape),a=og(r,n.rank);return null!=a&&(n=n.transpose(a),r=ug(r.length,n.rank)),Uy.runKernelFunc((function(e,t){var a=e.argMax(n,r[0]);return t([n]),a}),{x:n},(function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Rg(n)}}}),"ArgMax",{axis:r[0]},[n])}}),Qg=hg({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=$y(e,"x","argMin");null==t&&(t=0);var r=Hv(t,n.shape),a=og(r,n.rank);return null!=a&&(n=n.transpose(a),r=ug(r.length,n.rank)),Uy.runKernelFunc((function(e,t){var a=e.argMin(n,r[0]);return t([n]),a}),{$x:n},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return Rg(n)}}}))}}),$g=hg({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$y(e,"x","logSumExp"),a=Hv(t,r.shape),i=r.max(a,!0),o=r.sub(i).exp().sum(a).log(),s=i.reshape(o.shape).add(o);if(n){var u=ag(s.shape,a);return s.reshape(u)}return s}}),e_=hg({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$y(e,"x","mean"),a=Hv(t,r.shape),i=Pv(rg(r.shape,a)[1]);return Jg((function(e){var r=yg(i);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(Sg(e.shape,"float32")).div(i)}}}))(r)}}),t_=hg({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$y(e,"x","min"),a=r,i=Hv(t,r.shape),o=i,s=og(o,r.rank);null!=s&&(r=r.transpose(s),o=ug(o.length,r.rank));var u=Uy.runKernelFunc((function(e,t){var n=e.min(r,o);return t([a,n]),n}),{x:r},(function(e,t){return Xg(e,t[1],t[0],i,s)}),"Min",{axes:o},[r],[!0]);if(n){var l=ag(u.shape,i);u=u.reshape(l)}return u}}),n_=hg({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Hv(t,(e=$y(e,"x","moments")).shape),a=e.mean(r,n),i=a.shape;n||(i=ag(a.shape,r));var o=e.toFloat().sub(a.reshape(i)).square();return{mean:a,variance:o.mean(r,n)}}}),r_=hg({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$y(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var a=Hv(t,r.shape);return Jg((function(e){var t=og(a,e.rank),r=a,i=e;null!=t&&(i=e.transpose(t),r=ug(r.length,e.rank));var o=function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(Sg(e.shape,"float32"))},s=Uy.runKernelFunc((function(e){return e.sum(i,r)}),{x:i},(function(e){return{x:function(){return o(e)}}}),"Sum",{axes:r});if(n){var u=ag(s.shape,a);s=s.reshape(u)}return{value:s,gradFunc:o}}))(r)}}),a_=hg({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$y(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var a=Hv(t,r.shape),i=og(a,r.rank),o=a,s=r;null!=i&&(s=r.transpose(i),o=ug(o.length,r.rank));var u=Uy.runKernelFunc((function(e){return e.prod(s,o)}),{permutedX:s});if(n){var l=ag(u.shape,a);u=u.reshape(l)}return u}}),i_={kernelName:"BroadcastTo",gradFunc:function(e,t,n){for(var r=n.inputShape,a=n.shape,i=Array.from(a),o=r.length-1;o>=0;o--)if(r[o]===a[o])i[o]=1;else if(1!==r[o])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(a,"]."));for(var s=[],u=0;u<i.length;u++)i[u]>1&&s.push(u);return{x:function(){return r_(e,s,!0)}}}},o_=hg({split_:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=$y(e,"x","split"),i=Hv(r,a.shape)[0];return"number"==typeof t?(Rv(a.shape[i]%t==0,(function(){return"Number of splits must evenly divide the axis."})),n=new Array(t).fill(a.shape[i]/t)):(Rv(a.shape[i]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),n=t),Uy.runKernelFunc((function(e,t){return e.split(a,n,i)}),{x:a},null,"SplitV",{numOrSizeSplits:t,axis:r})}}),s_={kernelName:"Concat",saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=Hv(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return o_(e,i,a).map((function(e){return function(){return e}}))}};function u_(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=d_(t),l=_slicedToArray(u,2),c=l[0],h=l[1];if("channelsLast"===s)o=[c,h,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[c,h,e[1],e[1]]}return c_(e,o,n,r,a,i,!1,s)}function l_(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",l=p_(t),c=_slicedToArray(l,3),h=c[0],f=c[1],d=c[2];if("NDHWC"===u)s="channelsLast",o=[h,f,d,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[h,f,d,e[1],e[1]]}return h_(e,o,n,r,a,!1,s,i)}function c_(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,l=-1,c=-1,h=-1;if("channelsLast"===s){var f=_slicedToArray(e,4);u=f[0],l=f[1],c=f[2],h=f[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var d=_slicedToArray(e,4);u=d[0],h=d[1],l=d[2],c=d[3]}var p,m=_slicedToArray(t,4),v=m[0],y=m[1],g=m[3],_=d_(n),b=_slicedToArray(_,2),x=b[0],w=b[1],k=d_(r),C=_slicedToArray(k,2),S=C[0],I=C[1],D=m_(v,S),A=m_(y,I),T=function(e,t,n,r,a,i,o,s){var u,l,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=f_(e,t,n));var i=e[1],o=v_((e[0]-t+2*r)/n+1,a);Rv(zv(o),(function(){return"The output # of rows (".concat(o,") must be an integer. ")+"Change the stride and/or zero pad parameters"}));var s=v_((i-t+2*r)/n+1,a);return Rv(zv(s),(function(){return"The output # of columns (".concat(s,") must be an integer. ")+"Change the stride and/or zero pad parameters"})),[o,s]}([t,n],i,r,e,s);l=h[0],c=h[1]}else if("same"===e){l=Math.ceil(t/r),c=Math.ceil(n/a);var f=Math.max(0,(l-1)*r+i-t),d=Math.max(0,(c-1)*a+o-n),p=Math.floor(f/2),m=f-p,v=Math.floor(d/2);u={top:p,bottom:m,left:v,right:d-v,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),c=Math.ceil((n-o+1)/a)}return{padInfo:u,outHeight:l,outWidth:c}}(a,l,c,x,w,D,A,i),E=T.padInfo,R=T.outHeight,O=T.outWidth,M=o?g*h:g;return"channelsFirst"===s?p=[u,M,R,O]:"channelsLast"===s&&(p=[u,R,O,M]),{batchSize:u,dataFormat:s,inHeight:l,inWidth:c,inChannels:h,outHeight:R,outWidth:O,outChannels:M,padInfo:E,strideHeight:x,strideWidth:w,filterHeight:v,filterWidth:y,effectiveFilterHeight:D,effectiveFilterWidth:A,dilationHeight:S,dilationWidth:I,inShape:e,outShape:p,filterShape:t}}function h_(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,l=-1,c=-1,h=-1,f=-1;if("channelsLast"===o){var d=_slicedToArray(e,5);u=d[0],l=d[1],c=d[2],h=d[3],f=d[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var p=_slicedToArray(e,5);u=p[0],f=p[1],l=p[2],c=p[3],h=p[4]}var m,v=_slicedToArray(t,5),y=v[0],g=v[1],_=v[2],b=v[4],x=p_(n),w=_slicedToArray(x,3),k=w[0],C=w[1],S=w[2],I=p_(r),D=_slicedToArray(I,3),A=D[0],T=D[1],E=D[2],R=m_(y,A),O=m_(g,T),M=m_(_,E),N=function(e,t,n,r,a,i,o,s,u,l,c){var h,f,d,p;if("number"==typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,i){null==a&&(a=f_(e,t,r));var o=e[1],s=e[2],u=v_((e[0]-t+2*a)/r+1,i);Rv(zv(u),(function(){return"The output # of depths (".concat(u,") must be an integer. ")+"Change the stride and/or zero pad parameters"}));var l=v_((o-t+2*a)/r+1,i);Rv(zv(l),(function(){return"The output # of rows (".concat(l,") must be an integer. ")+"Change the stride and/or zero pad parameters"}));var c=v_((s-t+2*a)/r+1,i);return Rv(zv(c),(function(){return"The output # of columns (".concat(c,") must be an integer. ")+"Change the stride and/or zero pad parameters"})),[u,l,c,1]}([t,n,r,1],s,0,a,e,c);f=m[0],d=m[1],p=m[2]}else if("same"===e){var v=((f=Math.ceil(t/a))-1)*a+s-t,y=((d=Math.ceil(n/i))-1)*i+u-n,g=((p=Math.ceil(r/o))-1)*o+l-r,_=Math.floor(v/2),b=v-_,x=Math.floor(y/2),w=y-x,k=Math.floor(g/2);h={top:x,bottom:w,left:k,right:g-k,front:_,back:b,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/a),d=Math.ceil((n-u+1)/i),p=Math.ceil((r-l+1)/o)}return{padInfo:h,outDepth:f,outHeight:d,outWidth:p}}(a,l,c,h,k,C,S,R,O,M,s),P=N.padInfo,F=N.outDepth,L=N.outHeight,z=N.outWidth,B=i?b*f:b;return"channelsFirst"===o?m=[u,B,F,L,z]:"channelsLast"===o&&(m=[u,F,L,z,B]),{batchSize:u,dataFormat:o,inDepth:l,inHeight:c,inWidth:h,inChannels:f,outDepth:F,outHeight:L,outWidth:z,outChannels:B,padInfo:P,strideDepth:k,strideHeight:C,strideWidth:S,filterDepth:y,filterHeight:g,filterWidth:_,effectiveFilterDepth:R,effectiveFilterHeight:O,effectiveFilterWidth:M,dilationDepth:A,dilationHeight:T,dilationWidth:E,inShape:e,outShape:m,filterShape:t}}function f_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=m_(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function d_(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function p_(e){return"number"==typeof e?[e,e,e]:e}function m_(e,t){return t<=1?e:e+(e-1)*(t-1)}function v_(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function y_(e){var t=_slicedToArray(d_(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function g_(e,t){return y_(e)||y_(t)}function __(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}var b_=hg({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=zg(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=zg(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Rv(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),Rv(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),Rv(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var l="NHWC"===i?s.shape[3]:s.shape[1],c="NHWC"===i?u.shape[3]:u.shape[1];return Rv(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(l,") must ")+"match input depth in filter (".concat(n[2],".")})),Rv(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(c,") must ")+"match output depth for filter (".concat(n[3],").")})),null!=o&&Rv(zv(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(a,".")})),Uy.runKernelFunc((function(e){var t=__(i),l=c_(s.shape,n,r,1,a,o,!1,t);return e.conv2dDerFilter(s,u,l)}),{x:s,dy:u},null,"Conv2DBackpropFilter",{strides:r,pad:a,dataFormat:i,dimRoundingMode:o})}}),x_=hg({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;Rv(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,l=!1;3===t.rank&&(l=!0,u=zg(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),Rv(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),Rv(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),Rv(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var c="NHWC"===i?s[3]:s[1],h="NHWC"===i?u.shape[3]:u.shape[1];Rv(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),Rv(h===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),null!=o&&Rv(zv(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(a,".")}));var f=Uy.runKernelFunc((function(e,t){var l=__(i),c=c_(s,n.shape,r,1,a,o,!1,l),h=e.conv2dDerInput(u,n,c);return t([u,n]),h}),{dy:u,filter:n},null,"Conv2DBackpropInput",{strides:r,pad:a,dataFormat:i,dimRoundingMode:o});return l?zg(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),w_={kernelName:"Conv2D",inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,u=n.pad,l=n.dataFormat;return Rv(y_(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return x_(a.shape,e,i,s,u,l)},filter:function(){return b_(a,e,i.shape,s,u,l)}}}},k_=hg({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=$y(e,"x","conv2d"),u=$y(t,"filter","conv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=zg(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Rv(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,".")})),Rv(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),null!=o&&Rv(zv(r),(function(){return"Error in conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(r,".")}));var h="NHWC"===a?l.shape[3]:l.shape[1];Rv(h===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(h,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),Rv(g_(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}));var f=Uy.runKernelFunc((function(e,t){var s=__(a),c=c_(l.shape,u.shape,n,i,r,o,!1,s),h=e.conv2d(l,u,c);return t([l,u]),h}),{x:l,filter:u},null,"Conv2D",{strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o});return c?zg(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),C_={kernelName:"Conv2DBackpropInput",inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,u=n.dataFormat,l=n.dimRoundingMode;return{dy:function(){return k_(e,i,o,s,u,1,l)},filter:function(){return b_(e,a,i.shape,o,s,u,l)}}}},S_=hg({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=zg(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;return 4===o.rank&&(o=zg(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Rv(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),Rv(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),Rv(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),Rv(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),Rv(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")})),Uy.runKernelFunc((function(e){var t=h_(i.shape,n,r,1,a);return e.conv3dDerFilter(i,o,t)}),{x:i,y:o},null,"Conv3DBackpropFilterV2",{strides:r,pad:a})}}),I_=hg({conv3DBackpropInput_:function(e,t,n,r,a){Rv(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=zg(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],l=o.shape[4];Rv(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),Rv(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),Rv(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),Rv(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),Rv(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(l,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var c=Uy.runKernelFunc((function(e){var t=h_(i,n.shape,r,1,a);return e.conv3dDerInput(o,n,t)}),{dy:o},null,"Conv3DBackpropInputV2",{pad:a});return s?zg(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),D_={kernelName:"Conv3D",inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;Rv(y_(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=_slicedToArray(t,2),s=o[0],u=o[1];return{x:function(){return I_(s.shape,e,u,a,i)},filter:function(){return S_(s,e,u.shape,a,i)}}}},A_=hg({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r){var a=e;3===e.rank&&(a=zg(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var i=t;return 3===i.rank&&(i=zg(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Uy.runKernelFunc((function(e){return e.depthwiseConv2DDerFilter(a,i,r)}),{x:a,dy:i},null,"DepthwiseConv2dNativeBackpropFilter")}}),T_=hg({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r){var a=t,i=!1;3===t.rank&&(i=!0,a=zg(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var o=Uy.runKernelFunc((function(e){return e.depthwiseConv2DDerInput(a,n,r)}),{dy:a},null,"DepthwiseConv2dNativeBackpropInput");return i?zg(o,[o.shape[1],o.shape[2],o.shape[3]]):o}}),E_={kernelName:"DepthwiseConv2dNative",inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;Rv(y_(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var u=_slicedToArray(t,2),l=u[0],c=u[1];Rv(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")})),Rv(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,".")})),Rv(l.shape[3]===c.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],".")})),Rv(g_(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),null!=o&&Rv(zv(i),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(i,".")}));var h=c_(l.shape,c.shape,a,s,i,o,!0);return{x:function(){return T_(l.shape,e,c,h)},filter:function(){return A_(l,e,c.shape,h)}}}};function R_(e){dv().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function O_(){return Uy}function M_(){return Uy.memory()}function N_(e,t){return Uy.tidy(e,t)}function P_(e){Wy(e).forEach((function(e){return e.dispose()}))}function F_(e){return Uy.keep(e)}function L_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Uy.registerBackend(e,t,n)}var z_=hg({add_:function(e,t){var n,r=$y(e,"a","add"),a=$y(t,"b","add");return n=_slicedToArray(Ly(r,a),2),r=n[0],a=n[1],Uy.runKernelFunc((function(e,t){var n=e.add(r,a);return t([r,a]),n}),{a:r,b:a},null,"Add")}}),B_=hg({abs_:function(e){var t=$y(e,"x","abs");return"complex64"===t.dtype?Uy.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):Uy.runKernelFunc((function(e,n){var r=e.abs(t);return n([t]),r}),{x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}}),"Abs")}}),W_=hg({acos_:function(e){var t=$y(e,"x","acos");return Uy.runKernelFunc((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){var t=n.toFloat().square(),r=yg(1).sub(t).sqrt();return e.div(r).neg()}}}))}}),q_=hg({acosh_:function(e){var t=$y(e,"x","acosh");return Uy.runKernelFunc((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){var t=n.toFloat().square().sub(1).sqrt();return e.div(t)}}}))}}),V_=hg({asin_:function(e){var t=$y(e,"x","asin");return Uy.runKernelFunc((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return e.div(yg(1).sub(n.toFloat().square()).sqrt())}}}))}}),U_=hg({asinh_:function(e){var t=$y(e,"x","asinh");return Uy.runKernelFunc((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){var t=yg(1).add(n.toFloat().square()).sqrt();return e.div(t)}}}))}}),j_=hg({atan_:function(e){var t=$y(e,"x","atan");return Uy.runKernelFunc((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),H_=hg({atanh_:function(e){var t=$y(e,"x","atanh");return Uy.runKernelFunc((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return e.div(yg(1).sub(n.toFloat().square()))}}}))}}),G_=hg({ceil_:function(e){var t=$y(e,"x","ceil");return Uy.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return Rg(e)}}}))}}),J_=hg({clipByValue_:function(e,t,n){var r=$y(e,"x","clipByValue");return Rv(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")})),Uy.runKernelFunc((function(e,a){var i=e.clip(r,t,n);return a([r]),i}),{x:r},(function(e,r){var a=_slicedToArray(r,1)[0];return{x:function(){return e.where(a.greaterEqual(t).logicalAnd(a.lessEqual(n)),Rg(e))}}}),"ClipByValue",{min:t,max:n},[r])}}),X_=hg({cos_:function(e){var t=$y(e,"x","cos");return Uy.runKernelFunc((function(e,n){var r=e.cos(t);return n([t]),r}),{x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}}),"Cos",{},[t])}}),K_=hg({cosh_:function(e){var t=$y(e,"x","cosh");return Uy.runKernelFunc((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return n.toFloat().sinh().mul(e)}}}))}}),Z_=hg({erf_:function(e){var t=$y(e,"x","erf");return Rv("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),Uy.runKernelFunc((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Y_=hg({exp_:function(e){var t=$y(e,"x","exp");return Uy.runKernelFunc((function(e,n){var r=e.exp(t);return n([r]),r}),{x:t},(function(e,t){return{x:function(){return e.mul(t[0])}}}),"Exp",{},[],[!0])}}),Q_=hg({expm1_:function(e){var t=$y(e,"x","expm1");return Uy.runKernelFunc((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return e.mul(n.exp())}}}))}}),$_=hg({floor_:function(e){var t=$y(e,"x","floor");return Uy.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return Rg(e)}}}))}}),eb=hg({log_:function(e){var t=$y(e,"x","log");return Uy.runKernelFunc((function(e,n){var r=e.log(t);return n([t]),r}),{x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return e.div(n.toFloat())}}}),"Log",{},[t])}}),tb=hg({log1p_:function(e){var t=$y(e,"x","log1p");return Uy.runKernelFunc((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return e.div(n.add(1))}}}))}}),nb=hg({logSigmoid_:function(e){var t=$y(e,"x","logSigmoid");return Uy.runKernelFunc((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),rb=hg({neg_:function(e){var t=$y(e,"x","neg");return Uy.runKernelFunc((function(e){return e.neg(t)}),{x:t},(function(e){return{x:function(){return e.neg()}}}),"Neg",{},[t])}}),ab=hg({reciprocal_:function(e){var t=$y(e,"x","reciprocal");return Uy.runKernelFunc((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),ib=hg({round_:function(e){var t=$y(e,"x","round");return Uy.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return Rg(e)}}}))}}),ob=hg({rsqrt_:function(e){var t=$y(e,"x","rsqrt");return Uy.runKernelFunc((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},[t])}}),sb=hg({sigmoid_:function(e){var t=$y(e,"x","sigmoid");return Uy.runKernelFunc((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return e.mul(n.mul(yg(1).sub(n)))}}}),"Sigmoid")}}),ub=hg({sign_:function(e){var t=$y(e,"x","sign");return Uy.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return Rg(e)}}}))}}),lb=hg({isNaN_:function(e){var t=$y(e,"x","isNaN");return Uy.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return Rg(e)}}}))}}),cb=hg({isInf_:function(e){var t=$y(e,"x","isInf");return Uy.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return Rg(e)}}}))}}),hb=hg({isFinite_:function(e){var t=$y(e,"x","isFinite");return Uy.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return Rg(e)}}}))}}),fb=hg({sin_:function(e){var t=$y(e,"x","sin");return Uy.runKernelFunc((function(e,n){var r=e.sin(t);return n([t]),r}),{x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return n.toFloat().cos().mul(e)}}}),"Sin",{},[t])}}),db=hg({sinh_:function(e){var t=$y(e,"x","sinh");return Uy.runKernelFunc((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return n.toFloat().cosh().mul(e)}}}))}}),pb=hg({softplus_:function(e){var t=$y(e,"x","softplus");return Uy.runKernelFunc((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),mb=hg({sqrt_:function(e){var t=$y(e,"x","sqrt");return Uy.runKernelFunc((function(e,n){var r=e.sqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}),"Sqrt",{})}}),vb=hg({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=$y(e,"x","step");return Uy.runKernelFunc((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return Rg(e)}}}))}}),yb=hg({tan_:function(e){var t=$y(e,"x","tan");return Uy.runKernelFunc((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),gb=hg({tanh_:function(e){var t=$y(e,"x","tanh");return Uy.runKernelFunc((function(e,n){var r=e.tanh(t);return n([r]),r}),{x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return yg(1).sub(n.square()).mul(e)}}}),"Tanh",{},null,[!0])}}),_b=hg({addStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","addStrict"),r=$y(t,"b","addStrict");return Ov(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),bb=hg({atan2_:function(e,t){var n=$y(e,"a","atan2"),r=$y(t,"b","atan2"),a=_slicedToArray(Ly(n,r),2);n=a[0],r=a[1];var i=Ky(n.shape,r.shape);return Uy.runKernelFunc((function(e,t){var a=e.atan2(n,r);return t([n,r]),a}),{$a:n,$b:r},(function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1];return{$a:function(){var t=z_(r.square(),a.square()),n=e.mul(a.div(t)),o=Xy(r.shape,i);return o.length>0&&(n=n.sum(o)),n.reshape(r.shape)},$b:function(){var t=z_(r.square(),a.square()),n=rb(e.mul(r.div(t))),o=Xy(a.shape,i);return o.length>0&&(n=n.sum(o)),n.reshape(a.shape)}}}))}}),xb=hg({divStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","div"),r=$y(t,"b","div");return Ov(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),wb=hg({floorDiv_:function(e,t){var n=$y(e,"a","floorDiv"),r=$y(t,"b","floorDiv"),a=_slicedToArray(Ly(n,r),2);n=a[0],r=a[1];var i=Ky(n.shape,r.shape);return Uy.runKernelFunc((function(e,t){var a=e.floorDiv(n,r);return t([n,r]),a}),{a:n,b:r},(function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1];return{a:function(){var t=e.div(a.toFloat()),n=Xy(r.shape,i);return n.length>0?t.sum(n).reshape(r.shape):t},b:function(){var t=e.mul(r.toFloat()),n=Xy(a.shape,i);n.length>0&&(t=t.sum(n).reshape(a.shape));var o=a.square();return t.div(o.toFloat()).neg()}}}),"FloorDiv")}}),kb=hg({maximum_:function(e,t){var n,r=$y(e,"a","maximum"),a=$y(t,"b","maximum");return n=_slicedToArray(Ly(r,a),2),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),Ky(r.shape,a.shape),Uy.runKernelFunc((function(e,t){var n=e.maximum(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1];return{a:function(){return e.mul(r.greaterEqual(a).toFloat())},b:function(){return e.mul(r.less(a).toFloat())}}}),"Maximum")}}),Cb=hg({maximumStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","maximumStrict"),r=$y(t,"b","maximumStrict");return Ov(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Sb=hg({minimum_:function(e,t){var n,r=$y(e,"a","minimum"),a=$y(t,"b","minimum");return n=_slicedToArray(Ly(r,a),2),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),Ky(r.shape,a.shape),Uy.runKernelFunc((function(e,t){var n=e.minimum(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1];return{a:function(){return e.mul(r.lessEqual(a).toFloat())},b:function(){return e.mul(r.greater(a).toFloat())}}}),"Minimum")}}),Ib=hg({minimumStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","minimumStrict"),r=$y(t,"b","minimumStrict");return Ov(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Db=hg({mod_:function(e,t){var n=$y(e,"a","mod"),r=$y(t,"b","mod"),a=_slicedToArray(Ly(n,r),2);n=a[0],r=a[1];var i=Ky(n.shape,r.shape);return Uy.runKernelFunc((function(e,t){var a=e.mod(n,r);return t([n,r]),a}),{$a:n,$b:r},(function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1];return{$a:function(){var t=Xy(r.shape,i);return t.length>0?e.sum(t).reshape(r.shape):e},$b:function(){var t=e.mul(r.div(a).floor().neg()),n=Xy(a.shape,i);return n.length>0?t.sum(n).reshape(a.shape):t}}}))}}),Ab=hg({modStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","modStrict"),r=$y(t,"b","modStrict");return Ov(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Tb=hg({mul_:function(e,t){var n=$y(e,"a","mul"),r=$y(t,"b","mul"),a=_slicedToArray(Ly(n,r),2);n=a[0],r=a[1];var i=Ky(n.shape,r.shape);return Uy.runKernelFunc((function(e,t){var a=e.multiply(n,r);return t([n,r]),a}),{a:n,b:r},(function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1];return{a:function(){var t=e.mul(a.toFloat()),n=Xy(r.shape,i);return n.length>0?t.sum(n).reshape(r.shape):t},b:function(){var t=e.mul(r.toFloat()),n=Xy(a.shape,i);return n.length>0?t.sum(n).reshape(a.shape):t}}}),"Mul")}}),Eb=hg({mulStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","mul"),r=$y(t,"b","mul");return Ov(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Rb=hg({pow_:function(e,t){var n=$y(e,"base","pow"),r=$y(t,"exp","pow"),a=_slicedToArray(Ly(n,r),2);n=a[0],r=a[1];var i=Ky(n.shape,r.shape);return Uy.runKernelFunc((function(e,t){var a=e.pow(n,r);return t([n,r,a]),a}),{a:n,b:r},(function(e,t){var n=_slicedToArray(t,3),r=n[0],a=n[1],o=n[2];return{a:function(){var t=a.toFloat(),n=e.mul(t.mul(r.pow(t.sub(yg(1))))),o=Xy(r.shape,i);return o.length>0&&(n=n.sum(o)),n.reshape(r.shape)},b:function(){var t=r.greater(0),n=r.log().where(t,Rg(r)),s=e.mul(o.mul(n)),u=Xy(a.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(a.shape)}}}),"Pow",{},[n,r],[!0])}}),Ob=hg({powStrict_:function(e,t){return R_("strict variants of ops have been deprecated and will be removed in future"),Ov(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Mb=hg({squaredDifferenceStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","squaredDifferenceStrict"),r=$y(t,"b","squaredDifferenceStrict");return Ov(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Nb=hg({subStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","subStrict"),r=$y(t,"b","subStrict");return Ov(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Pb=hg({div_:function(e,t){var n,r=$y(e,"a","div"),a=$y(t,"b","div");return n=_slicedToArray(Ly(r,a),2),r=n[0],a=n[1],"int32"===r.dtype&&"int32"===a.dtype?wb(r,a):Uy.runKernelFunc((function(e,t){var n=e.realDivide(r,a);return t([r,a]),n}),{a:r,b:a},null,"Div",{})}}),Fb=hg({square_:function(e){var t=$y(e,"x","square");return Uy.runKernelFunc((function(e,n){return n([t]),e.square(t)}),{x:t},null,"Square",{},[t],[])}}),Lb={kernelName:"Div",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=Ky(r.shape,a.shape);return{a:function(){var t=Pb(e,a.toFloat()),n=Xy(r.shape,i);return n.length>0?r_(t,n).reshape(r.shape):t},b:function(){var t=Tb(e,r.toFloat()),n=Xy(a.shape,i);n.length>0&&(t=zg(r_(t,n),a.shape));var o=Fb(a);return rb(Pb(t,o.toFloat()))}}}},zb=hg({sub_:function(e,t){var n,r=$y(e,"a","sub"),a=$y(t,"b","sub");return n=_slicedToArray(Ly(r,a),2),r=n[0],a=n[1],Uy.runKernelFunc((function(e,t){var n=e.subtract(r,a);return t([r,a]),n}),{a:r,b:a},null,"Sub")}}),Bb=hg({tile_:function(e,t){var n=$y(e,"x","tile",null);return Rv(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")})),Uy.runKernelFunc((function(e,r){var a=e.tile(n,t);return r([n]),a}),{x:n},null,"Tile",{reps:t},[n])}}),Wb={kernelName:"FusedBatchNorm",inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=_slicedToArray(t,4),i=a[0],o=a[1],s=a[2],u=a[3],l=null==u?yg(1):u,c=Xy(o.shape,i.shape),h=[];if(1===o.rank){for(var f=0;f<i.shape.length-1;++f)h.push(i.shape[f]);h.push(1)}var d=zb(i,o),p=Tb(e,l),m=ob(z_(s,yg(r))),v=Tb(Tb(Tb(m,m),m),yg(-.5));return{x:function(){return zg(Tb(Tb(e,1===o.rank?Bb(m.as4D(1,1,1,o.shape[0]),h):m),l),i.shape)},mean:function(){var e=Tb(Tb(m,yg(-1)),p);return 1===o.rank&&(e=r_(e,c)),zg(e,o.shape)},variance:function(){var e=Tb(Tb(v,d),p);return 1===o.rank&&(e=r_(e,c)),zg(e,o.shape)},scale:function(){var t=Tb(d,m),n=Tb(e,t);return 1===o.rank&&(n=r_(n,c)),zg(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=r_(t,c)),zg(t,o.shape)}}}},qb={kernelName:"GreaterEqual",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1];return{a:function(){return Rg(r)},b:function(){return Rg(a)}}}},Vb=hg({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5;return Uy.runKernelFunc((function(s){return s.LRNGrad(n,e,t,r,a,i,o)}),{x:e,y:t,dy:n},null,"LRNBackprop",{depthRadius:r,bias:a,alpha:i,beta:o})}}),Ub={kernelName:"LRN",inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,u=n.alpha,l=n.beta;return{x:function(){return Vb(a,i,e,o,s,u,l)}}}},jb=hg({transpose_:function(e,t){var n=$y(e,"x","transpose");return null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Rv(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){Rv(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1?n.clone():Uy.runKernelFunc((function(e){return e.transpose(n,t)}),{x:n},null,"Transpose",{perm:t})}}),Hb={kernelName:"Max",inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=_slicedToArray(t,2),i=a[0],o=a[1],s=Hv(r,i.shape),u=og(s,i.rank),l=Xg(e,o,i,s,u);return{x:function(){var e=l.x();return null!=u&&(e=jb(e)),e}}}},Gb={kernelName:"OneHot",inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return Ig(n.shape,"float32")}}}},Jb=hg({batchToSpaceND_:function(e,t,n){var r=$y(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));return Rv(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),Rv(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),Rv(r.shape[0]%a==0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)})),Uy.runKernelFunc((function(e){return e.batchToSpaceND(r,t,n)}),{x:r},null,"BatchToSpaceND",{blockShape:t,crops:n})}}),Xb={kernelName:"SpaceToBatchND",gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return Jb(e,r,a)}}}},Kb={kernelName:"SplitV",gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return Og(e,r)}}}},Zb={kernelName:"Square",inputsToSave:["x"],gradFunc:function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Tb(e,Tb(n.toFloat(),2))}}}},Yb={kernelName:"SquaredDifference",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=yg(2);return{a:function(){return Tb(e,Tb(i,zb(r,a)))},b:function(){return Tb(e,Tb(i,zb(a,r)))}}}},Qb={kernelName:"Sub",inputsToSave:["a","b"],gradFunc:function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=Ky(r.shape,a.shape);return{a:function(){var t=e,n=Xy(r.shape,i);return n.length>0&&(t=r_(t,n)),zg(t,r.shape)},b:function(){var t=e,n=Xy(a.shape,i);return n.length>0&&(t=r_(t,n)),zg(rb(t),a.shape)}}}},$b=hg({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=$y(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return Uy.runKernelFunc((function(e,a){return a([r]),e.pad(r,t,n)}),{x:r},null,"PadV2",{paddings:t,constantValue:n})}});function ex(e,t,n){Rv(e.rank===t.length,(function(){return"Error in slice".concat(e.rank,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(e.rank,").")})),Rv(e.rank===n.length,(function(){return"Error in slice".concat(e.rank,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(e.rank,").")}));for(var r=function(r){Rv(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice".concat(e.rank,"D: begin[").concat(r,"] + size[").concat(r,"] ")+"(".concat(t[r]+n[r],") would overflow input.shape[").concat(r,"] (").concat(e.shape[r],")")}))},a=0;a<e.rank;++a)r(a)}function tx(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function nx(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function rx(e,t,n,r,a){var i=t[a];(e&1<<a||null==i)&&(i=(n[a]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var o=r[a];return i<0&&(i+=o),i=Iv(0,i,o-1)}function ax(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||null==i)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),i=o>0?Iv(0,i,s):Iv(-1,i,s-1)}function ix(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function ox(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}for(var sx,ux,lx,cx=hg({slice_:function(e,t,n){var r,a,i=$y(e,"x","slice");if(0===i.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(_toConsumableArray(new Array(i.rank-1).fill(0))):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach((function(e){Rv(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i.rank).fill(-1):"number"==typeof n?[n].concat(_toConsumableArray(new Array(i.rank-1).fill(-1))):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(Rv(-1===e,(function(){return"Negative size values should be exactly -1 but got "+"".concat(e," for the slice() size at index ").concat(t,".")})),i.shape[t]-r[t])})),ex(i,r,a);var o=i.shape;return Uy.runKernelFunc((function(e){return e.slice(i,r,a)}),{x:i},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],o[n]-r[n]-a[n]]);return{x:function(){return $b(e,t)}}}),"Slice",{begin:r,size:a})}}),hx=hg({slice1d_:function(e,t,n){var r=$y(e,"x","slice1d");return Rv(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),cx(r,[t],[n])}}),fx=hg({slice2d_:function(e,t,n){var r=$y(e,"x","slice2d");return Rv(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),cx(r,t,n)}}),dx=hg({slice3d_:function(e,t,n){var r=$y(e,"x","slice3d");return Rv(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),cx(r,t,n)}}),px=hg({slice4d_:function(e,t,n){var r=$y(e,"x","slice4d");return Rv(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),cx(r,t,n)}}),mx=0,vx=[Zy,{kernelName:"AddN",saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},jg,Gg,i_,s_,w_,C_,D_,E_,Lb,Wb,qb,{kernelName:"Identity",gradFunc:function(e){return{x:function(){return e.toFloat()}}}},Ub,Gb,{kernelName:"PadV2",inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return e.slice(a,r.shape)}}}},Kb,Hb,Xb,Zb,Yb,{kernelName:"Tile",inputsToSave:["x"],gradFunc:function(e,t,n){var r=_slicedToArray(t,1)[0],a=n.reps;return{x:function(){var t=Rg(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=z_(t,cx(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=z_(t,cx(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var l=0;l<a[2];++l)t=z_(t,cx(e,[s*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var c=0;c<a[0];++c)for(var h=0;h<a[1];++h)for(var f=0;f<a[2];++f)for(var d=0;d<a[3];++d)t=z_(t,cx(e,[c*r.shape[0],h*r.shape[1],f*r.shape[2],d*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},{kernelName:"Transpose",gradFunc:function(e,t,n){var r=sg(n.perm);return{x:function(){return jb(e,r)}}}},Qb];mx<vx.length;mx++){ux=void 0,ux=(sx=vx[mx]).kernelName,_v.has(ux)&&console.warn("Overriding the gradient for '".concat(ux,"'")),_v.set(ux,sx)}dv().get("IS_BROWSER")&&dv().setPlatform("browser",new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}())),dv().get("IS_NODE")&&dv().setPlatform("node",new(function(){function e(){_classCallCheck(this,e),this.util=n(2),this.textEncoder=new this.util.TextEncoder}return _createClass(e,[{key:"fetch",value:function(e,t){return null!=dv().global.fetch?dv().global.fetch(e,t):(null==lx&&(lx=n(1)),lx(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}()));var yx={float32:4,int32:4,uint16:2,uint8:1,bool:1};function gx(e,t){return _x.apply(this,arguments)}function _x(){return(_x=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var l=new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],l=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(l,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(l)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.t0=xx,e.next=6,Promise.all(a);case 6:return e.t1=e.sent,e.t2=(0,e.t0)(e.t1),e.t3=r,e.abrupt("return",{data:e.t2,specs:e.t3});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bx(e,t){var n,r={},a=0,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.name,u=o.dtype,l=o.shape,c=Pv(l),h=void 0;if("quantization"in o){var f=o.quantization;if("uint8"!==f.dtype&&"uint16"!==f.dtype)throw new Error("Weight ".concat(o.name," has unknown ")+"quantization dtype ".concat(f.dtype,". ")+"Supported quantization dtypes are: 'uint8' and 'uint16'.");var d=yx[f.dtype],p=e.slice(a,a+c*d),m="uint8"===f.dtype?new Uint8Array(p):new Uint16Array(p);if("float32"===u){h=new Float32Array(m.length);for(var v=0;v<m.length;v++)h[v]=m[v]*f.scale+f.min}else{if("int32"!==u)throw new Error("Unsupported dtype in weight '".concat(s,"': ").concat(u));h=new Int32Array(m.length);for(var y=0;y<m.length;y++)h[y]=Math.round(m[y]*f.scale+f.min)}a+=c*d}else if("string"===u){var g=Pv(o.shape);h=[];for(var _=0;_<g;_++){var b=new Uint32Array(e.slice(a,a+4))[0];a+=4;var x=new Uint8Array(e.slice(a,a+b));h.push(x),a+=b}}else{var w=yx[u],k=e.slice(a,a+c*w);if("float32"===u)h=new Float32Array(k);else if("int32"===u)h=new Int32Array(k);else{if("bool"!==u)throw new Error("Unsupported dtype in weight '".concat(s,"': ").concat(u));h=new Uint8Array(k)}a+=c*w}r[s]=mg(h,l,u)}}catch(C){i.e(C)}finally{i.f()}return r}function xx(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var wx="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function kx(e){return wx?Buffer.byteLength(e):new Blob([e]).size}function Cx(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Sx(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Ix(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:kx(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:kx(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var Dx=function(){function e(){_classCallCheck(this,e),this.saveRouters=[],this.loadRouters=[]}return _createClass(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),Ax=function(e){return Dx.registerSaveRouter(e)},Tx=function(e){return Dx.registerLoadRouter(e)},Ex=function(e){return Dx.getSaveHandlers(e)},Rx=function(e,t){return Dx.getLoadHandlers(e,t)},Ox=function(){function e(){_classCallCheck(this,e),this.managers={}}return _createClass(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){Rv(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith("://")&&(t=t.slice(0,t.indexOf("://"))),Rv(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Rv(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function Mx(e){if(-1===e.indexOf("://"))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(Ox.getSchemes().join(",")));return{scheme:e.split("://")[0],path:e.split("://")[1]}}function Nx(e,t){return Px.apply(this,arguments)}function Px(){return(Px=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l,c,h,f,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]&&d[2],Rv(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),Rv((a=Dx.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),Rv(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],Rv((o=Dx.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),Rv(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=Mx(t).scheme,l=Mx(t).path,c=u===Mx(t).scheme,e.next=12,i.load();case 12:if(h=e.sent,e.t0=r&&c,!e.t0){e.next=17;break}return e.next=17,Ox.getManager(u).removeModel(l);case 17:return e.next=19,s.save(h);case 19:if(f=e.sent,e.t1=r&&!c,!e.t1){e.next=24;break}return e.next=24,Ox.getManager(u).removeModel(l);case 24:return e.abrupt("return",f.modelArtifactsInfo);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fx(){return Lx.apply(this,arguments)}function Lx(){return(Lx=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ox.getSchemes(),n={},r=_createForOfIteratorHelper(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=12;break}return i=a.value,e.next=8,Ox.getManager(i).listModels();case 8:for(s in o=e.sent)n[i+"://"+s]=o[s];case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}function zx(e){return Bx.apply(this,arguments)}function Bx(){return(Bx=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Mx(t),e.abrupt("return",Ox.getManager(n.scheme).removeModel(n.path));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wx(e,t){return qx.apply(this,arguments)}function qx(){return(qx=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nx(t,n,!1));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vx(e,t){return Ux.apply(this,arguments)}function Ux(){return(Ux=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nx(t,n,!0));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jx(){if(!dv().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Hx(e){var t=e.result;t.createObjectStore("models_store",{keyPath:"modelPath"}),t.createObjectStore("model_info_store",{keyPath:"modelPath"})}var Gx=function(){function e(t){if(_classCallCheck(this,e),this.indexedDB=jx(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}var t,n;return _createClass(e,[{key:"save",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return Hx(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction("models_store","readonly"),s=o.objectStore("models_store").get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,l=Ix(t),c=i.transaction("model_info_store","readwrite"),h=c.objectStore("model_info_store"),f=h.put({modelPath:n.modelPath,modelArtifactsInfo:l});f.onsuccess=function(){var a=(u=i.transaction("models_store","readwrite")).objectStore("models_store").put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(h=c.objectStore("model_info_store")).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},f.onerror=function(e){return i.close(),r(f.error)},c.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();Gx.URL_SCHEME="indexeddb://";var Jx=function(e){return dv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Gx.URL_SCHEME)?(t=e.slice(Gx.URL_SCHEME.length),new Gx(t)):null;var t};Dx.registerSaveRouter(Jx),Dx.registerLoadRouter(Jx);var Xx=function(){function e(){_classCallCheck(this,e),this.indexedDB=jx()}var t,n;return _createClass(e,[{key:"listModels",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Hx(r)},r.onsuccess=function(){var t=r.result,a=t.transaction("model_info_store","readonly"),i=a.objectStore("model_info_store").getAll();i.onsuccess=function(){var t,n={},r=_createForOfIteratorHelper(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"removeModel",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(t=(n=t).startsWith(Gx.URL_SCHEME)?n.slice(Gx.URL_SCHEME.length):n,new Promise((function(e,n){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return Hx(a)},a.onsuccess=function(){var r,i=a.result,o=i.transaction("model_info_store","readwrite"),s=o.objectStore("model_info_store"),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),n(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(r=i.transaction("models_store","readwrite")).objectStore("models_store").delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return n(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),n(u.error)}},u.onerror=function(e){return i.close(),n(u.error)},o.oncomplete=function(){null==r?i.close():r.oncomplete=function(){return i.close()}}},a.onerror=function(e){return n(a.error)}}))));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}();if(dv().getBool("IS_BROWSER"))try{Ox.registerManager(Gx.URL_SCHEME,new Xx)}catch(s7){}var Kx="tensorflowjs_models",Zx="info",Yx="model_topology",Qx="weight_specs",$x="weight_data",ew="model_metadata";function tw(e){return{info:[Kx,e,Zx].join("/"),topology:[Kx,e,Yx].join("/"),weightSpecs:[Kx,e,Qx].join("/"),weightData:[Kx,e,$x].join("/"),modelMetadata:[Kx,e,ew].join("/")}}function nw(e){var t=e.split("/");if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join("/")}var rw=function(){function e(t){if(_classCallCheck(this,e),!dv().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=tw(this.modelPath)}var t,n;return _createClass(e,[{key:"save",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Ix(t),e.prev=3,e.abrupt("return",(this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(wx)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),{modelArtifactsInfo:a}));case 7:throw e.prev=7,e.t0=e.catch(3),this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 10:case"end":return e.stop()}}),e,this,[[3,7]])}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=8;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 8:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=12;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 12:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,n.userDefinedMetadata=o.userDefinedMetadata),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=18;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 18:return e.abrupt("return",(n.weightData=function(e){if(wx){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(s),n));case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();rw.URL_SCHEME="localstorage://";var aw=function(e){return dv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(rw.URL_SCHEME)?(t=e.slice(rw.URL_SCHEME.length),new rw(t)):null;var t};Dx.registerSaveRouter(aw),Dx.registerLoadRouter(aw);var iw=function(){function e(){_classCallCheck(this,e),Rv(dv().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Rv("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}var t,n;return _createClass(e,[{key:"listModels",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=Kx+"/",r="/"+Zx,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(t[nw(i)]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"removeModel",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=tw(t=(n=t).startsWith(rw.URL_SCHEME)?n.slice(rw.URL_SCHEME.length):n),null!=this.LS.getItem(r.info)){e.next=3;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 3:return a=JSON.parse(this.LS.getItem(r.info)),e.abrupt("return",(this.LS.removeItem(r.info),this.LS.removeItem(r.topology),this.LS.removeItem(r.weightSpecs),this.LS.removeItem(r.weightData),a));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();if(dv().getBool("IS_BROWSER"))try{Ox.registerManager(rw.URL_SCHEME,new iw)}catch(s7){}function ow(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var sw=function(){function e(t){if(_classCallCheck(this,e),!dv().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}var t;return _createClass(e,[{key:"save",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=5;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 5:return r=window.URL.createObjectURL(new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}]})],{type:"application/json"})),(a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=r,e.next=10,ow((function(){return a.dispatchEvent(new MouseEvent("click"))}));case 10:if(null==t.weightData){e.next=16;break}return(i=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,i.href=n,e.next=16,ow((function(){return i.dispatchEvent(new MouseEvent("click"))}));case 16:return e.abrupt("return",{modelArtifactsInfo:Ix(t)});case 17:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();sw.URL_SCHEME="downloads://";var uw=function(){function e(t){if(_classCallCheck(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.files=t}var t;return _createClass(e,[{key:"load",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.files[0],n=this.files.slice(1),e.abrupt("return",new Promise((function(e,a){var i=new FileReader;i.onload=function(i){var o=JSON.parse(i.target.result),s=o.modelTopology;if(null!=s){0===n.length&&e({modelTopology:s});var u=o.weightsManifest;if(null!=u){var l;try{l=r.checkManifestAndWeightFiles(u,n)}catch(s7){return void a(s7)}var c=[],h=[],f=[];u.forEach((function(e){e.paths.forEach((function(e){h.push(e),f.push(null)})),c.push.apply(c,_toConsumableArray(e.weights))})),u.forEach((function(t){t.paths.forEach((function(t){var n=new FileReader;n.onload=function(n){var r=n.target.result,a=h.indexOf(t);f[a]=r,-1===f.indexOf(null)&&e({modelTopology:s,weightSpecs:c,weightData:Cx(f),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy,userDefinedMetadata:o.userDefinedMetadata})},n.onerror=function(e){return a("Failed to weights data from file of path '".concat(t,"'."))},n.readAsArrayBuffer(l[t])}))}))}else a(new Error("weightManifest field is missing from file ".concat(t.name)))}else a(new Error("modelTopology field is missing from file ".concat(t.name)))},i.onerror=function(e){return a("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},i.readAsText(t)})));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"checkManifestAndWeightFiles",value:function(e,t){var n,r=[],a=t.map((function(e){return Sx(e.name)})),i={},o=_createForOfIteratorHelper(e);try{for(o.s();!(n=o.n()).done;){n.value.paths.forEach((function(e){var n=Sx(e);if(-1!==r.indexOf(n))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(n,"'"));if(r.push(n),-1===a.indexOf(n))throw new Error("Weight file with basename '".concat(n,"' is not provided."));i[e]=t[a.indexOf(n)]}))}}catch(s7){o.e(s7)}finally{o.f()}if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(t.length,")."));return i}}]),e}();function lw(e){return new uw(e)}function cw(e,t,n,r){!function(e){Rv(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Rv(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),Rv(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),Rv(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function hw(e,t){return fw.apply(this,arguments)}function fw(){return(fw=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?dv().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),null!=n.onProgress){e.next=9;break}return e.next=6,Promise.all(a);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,cw(a,n.onProgress,0,.5);case 11:e.t0=e.sent;case 12:if(i=e.t0.map((function(e){return e.arrayBuffer()})),null!=n.onProgress){e.next=19;break}return e.next=16,Promise.all(i);case 16:e.t1=e.sent,e.next=22;break;case 19:return e.next=21,cw(i,n.onProgress,.5,1);case 21:e.t1=e.sent;case 22:return e.abrupt("return",e.t1);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dw(e){return pw.apply(this,arguments)}function pw(){return(pw=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,a,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.abrupt("return",mw((function(e){return hw(e,{requestInit:a})}))(t,n,r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mw(e){return function(){var t=_asyncToGenerator(regeneratorRuntime.mark((function t(n){var r,a,i,o,s,u,l,c,h,f,d,p,m=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r=yx["quantization"in e?e.quantization.dtype:e.dtype]*Pv(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:r})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=r}))})),s.every((function(e){return e}))){t.next=6;break}throw l=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(l.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 6:return c=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),h=[],c.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;h.push(t)}))})),t.next=10,e(h);case 10:return f=t.sent,d={},p=0,t.abrupt("return",(c.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=f[p+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,l=0;l<t;l++){var c=new Uint8Array(f[p+l]);s.set(c,u),u+=c.byteLength}o[e].forEach((function(e){var t=bx(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]})),p+=t})),d));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}Dx.registerSaveRouter((function(e){return dv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(sw.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new sw(e)}(e.slice(sw.URL_SCHEME.length)):null}));var vw=function(){function e(t,n){if(_classCallCheck(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,null!=n.fetchFunc?(Rv("function"==typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=dv().platform.fetch,Rv(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&Rv(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}var t,n,r;return _createClass(e,[{key:"save",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n.body.append("model.json",new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:[{paths:["./model.weights.bin"],weights:t.weightSpecs}]})],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=6,this.fetch(this.path,n);case 6:if(!(r=e.sent).ok){e.next=9;break}return e.abrupt("return",{modelArtifactsInfo:Ix(t),responses:[r]});case 9:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(r.status,"."));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"load",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s,u,l,c,h,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 15:if(a=n.modelTopology,i=n.weightsManifest,o=n.generatedBy,s=n.convertedBy,u=n.format,l=n.userDefinedMetadata,null!=a||null!=i){e.next=18;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 18:if(null==i){e.next=25;break}return e.next=21,this.loadWeights(i);case 21:f=e.sent,d=_slicedToArray(f,2),c=d[0],h=d[1];case 25:return e.abrupt("return",{modelTopology:a,weightSpecs:c,weightData:h,userDefinedMetadata:l,generatedBy:o,convertedBy:s,format:u});case 26:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(){return n.apply(this,arguments)})},{key:"loadWeights",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,s,u,l,c,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,p=void 0,m=void 0,p=(d=n).lastIndexOf("/"),m=d.lastIndexOf("?"),r=[d.substring(0,p)+"/",m>p?d.substring(m):""],a=_slicedToArray(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=[],l=_createForOfIteratorHelper(t);try{for(l.s();!(c=l.n()).done;)h=c.value,u.push.apply(u,_toConsumableArray(h.weights))}catch(s7){l.e(s7)}finally{l.f()}return f=[],t.forEach((function(e){e.paths.forEach((function(e){f.push(s+e+o)}))})),e.t0=u,e.t1=Cx,e.next=9,hw(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 9:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",[e.t0,e.t3]);case 12:case"end":return e.stop()}var d,p,m}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function yw(e){return null!=e.match(vw.URL_SCHEME_REGEX)}vw.URL_SCHEME_REGEX=/^https?:\/\//;var gw=function(e,t){if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return yw(e)})):yw(e))?_w(e,t):null};function _w(e,t){return new vw(e,t)}function bw(e,t){return _w(e,t)}Dx.registerSaveRouter(gw),Dx.registerLoadRouter(gw);var xw=function(){function e(t){_classCallCheck(this,e),this.modelArtifacts=t}var t;return _createClass(e,[{key:"load",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),ww=function(){function e(t){_classCallCheck(this,e),this.saveHandler=t}var t;return _createClass(e,[{key:"save",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function kw(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new xw(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new xw({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new xw({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function Cw(e){return new ww(e)}var Sw,Iw=hg({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a=$y(e,"indices","oneHot","int32"),i=[].concat(_toConsumableArray(a.shape),[t]);return a=a.flatten(),Uy.runKernelFunc((function(e,o){return o([a]),zg(e.oneHot(a,t,n,r),i)}),{indices:a},null,"OneHot",{depth:t,onValue:n,offValue:r})}});function Dw(e,t){return Aw.apply(this,arguments)}function Aw(){return(Aw=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l,c,h,f,d,p,m,v,y,g,_,b,x,w,k,C,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$y(t,"img","toPixels"),t instanceof Dy||(r=(a=r).toInt(),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=_slicedToArray(i,2),s=o[0],u=o[1],!((l=2===r.rank?1:r.shape[2])>4||2===l)){e.next=7;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(l));case 7:return e.next=9,r.data();case 9:return c=e.sent,h=r.min(),f=r.max(),e.next=14,Promise.all([h.data(),f.data()]);case 14:if(d=e.sent,p=d[0][0],m=d[1][0],h.dispose(),f.dispose(),"float32"!==r.dtype){e.next=22;break}if(!(p<0||m>1)){e.next=20;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but got range [".concat(p," - ").concat(m,"]."));case 20:e.next=26;break;case 22:if("int32"===r.dtype){e.next=24;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 24:if(!(p<0||m>255)){e.next=26;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but got range [".concat(p," - ").concat(m,"]."));case 26:for(v="float32"===r.dtype?255:1,y=new Uint8ClampedArray(u*s*4),g=0;g<s*u;++g)_=void 0,b=void 0,x=void 0,w=void 0,1===l?(_=c[g]*v,b=c[g]*v,x=c[g]*v,w=255):3===l?(_=c[3*g]*v,b=c[3*g+1]*v,x=c[3*g+2]*v,w=255):4===l&&(_=c[4*g]*v,b=c[4*g+1]*v,x=c[4*g+2]*v,w=c[4*g+3]*v),y[(k=4*g)+0]=Math.round(_),y[k+1]=Math.round(b),y[k+2]=Math.round(x),y[k+3]=Math.round(w);return null!=n&&(n.width=u,n.height=s,C=n.getContext("2d"),S=new ImageData(y,u,s),C.putImageData(S,0,0)),e.abrupt("return",(r!==t&&r.dispose(),y));case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}hg({confusionMatrix_:function(e,t,n){var r=$y(e,"labels","confusionMatrix"),a=$y(t,"predictions","confusionMatrix");Rv(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),Rv(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),Rv(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),Rv(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),Rv(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var i=Iw(r.asType("int32"),n),o=Iw(a.asType("int32"),n);return i.transpose().matMul(o).asType("int32")}});var Tw=hg({fromPixels_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));o=!0}if(a){var s=2;if(a&&e.readyState<s)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=bv("FromPixels",Uy.backendName))return Uy.runKernel("FromPixels",{pixels:e},{numChannels:t});var u,l,c=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],h=_slicedToArray(c,2),f=h[0],d=h[1];if(o?u=e.getContext("2d").getImageData(0,0,f,d).data:r||n?u=e.data:(i||a)&&(null==Sw&&(Sw=document.createElement("canvas").getContext("2d")),Sw.canvas.width=f,Sw.canvas.height=d,Sw.drawImage(e,0,0,f,d),u=Sw.getImageData(0,0,f,d).data),4===t)l=new Int32Array(u);else{var p=f*d;l=new Int32Array(p*t);for(var m=0;m<p;m++)for(var v=0;v<t;++v)l[m*t+v]=u[4*m+v]}return bg(l,[d,f,t],"int32")}});function Ew(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[t.rank-1]," vs. ").concat(e.rank));if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var n=t.shape,r=n[n.length-1],a=1,i=0;i<n.length-1;++i)a*=n[i];var o=e.shape,s=n.slice();s.pop();for(var u=1,l=r;l<e.rank;++l)u*=o[l],s.push(o[l]);var c=[].concat(_toConsumableArray(sy(e.shape).map((function(e){return e/u}))),[1]).slice(0,r);return[s,a,u,c]}function Rw(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function Ow(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}Rw(n,t,e)}function Mw(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:Pv(t.shape)/u,sliceSize:o,strides:[].concat(_toConsumableArray(sy(n.slice(0,a))),[1]),outputSize:Pv(n)}}var Nw=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Pw=function(){function e(){_classCallCheck(this,e),this.classNameMap={}}return _createClass(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function Fw(e){Rv(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Rv("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Rv(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Pw.register(e)}var Lw=hg({addN_:function(e){Rv(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Rv(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return $y(e,"tensors".concat(t),"addN")})),n=t[0];return t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Lv(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")})),Uy.runKernelFunc((function(e,n){var r=e.addN(t);return n(t),r}),t,null,"AddN")}});function zw(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}var Bw=hg({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=$y(e,"x","batchNorm"),l=$y(t,"mean","batchNorm"),c=$y(n,"variance","batchNorm");null!=a&&(o=$y(a,"scale","batchNorm")),null!=r&&(s=$y(r,"offset","batchNorm")),Rv(l.rank===c.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Rv(null==s||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Rv(null==o||l.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var h=function(e){return 0===e.rank||1===e.rank?e.as4D(1,1,1,e.size):2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}(u),f=Uy.runKernelFunc((function(e,t){return t([h,l,c,o]),e.batchNorm(h,zw(l),zw(c),zw(s),zw(o),i)}),{x:h,scale:o,offset:s,mean:l,variance:c},null,"FusedBatchNorm",{varianceEpsilon:i});return zg(f,u.shape)}}),Ww=hg({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=$y(e,"x","batchNorm"),l=$y(t,"mean","batchNorm"),c=$y(n,"variance","batchNorm");return null!=a&&(o=$y(a,"scale","batchNorm")),null!=r&&(s=$y(r,"offset","batchNorm")),Rv(2===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),Rv(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(l.rank,".")})),Rv(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&Rv(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Rv(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),Bw(u,l,c,s,o,i)}}),qw=hg({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=$y(e,"x","batchNorm"),l=$y(t,"mean","batchNorm"),c=$y(n,"variance","batchNorm");return null!=a&&(o=$y(a,"scale","batchNorm")),null!=r&&(s=$y(r,"offset","batchNorm")),Rv(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),Rv(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(l.rank,".")})),Rv(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&Rv(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Rv(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),Bw(u,l,c,s,o,i)}}),Vw=hg({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=$y(e,"x","batchNorm"),l=$y(t,"mean","batchNorm"),c=$y(n,"variance","batchNorm");return null!=a&&(o=$y(a,"scale","batchNorm")),null!=r&&(s=$y(r,"offset","batchNorm")),Rv(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),Rv(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(l.rank,".")})),Rv(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&Rv(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Rv(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),Bw(u,l,c,s,o,i)}}),Uw=hg({clone_:function(e){var t=$y(e,"x","clone",null);return Uy.runKernelFunc((function(){return Uy.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{x:t},null,"Identity")}}),jw=hg({broadcastTo_:function(e,t){var n=$y(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=zg(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));return 0===o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length?Uw(n):Uy.runKernelFunc((function(e){return e.tile(n,o)}),{x:n},null,"BroadcastTo",{shape:t,inputShape:i})}}),Hw=hg({concat1d_:function(e){return Og(e,0)}}),Gw=hg({concat2d_:function(e,t){return Og(e,t)}}),Jw=hg({concat3d_:function(e,t){return Og(e,t)}}),Xw=hg({concat4d_:function(e,t){return Og(e,t)}}),Kw=hg({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=$y(e,"x","conv1d"),u=$y(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=zg(s,[1,s.shape[0],s.shape[1]])),Rv(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,".")})),Rv(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),null!=o&&Rv(zv(r),(function(){return"Error in conv1d: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(r,".")})),Rv(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),Rv(g_(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),Rv("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var h=zg(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=zg(l,[l.shape[0],1,l.shape[1],l.shape[2]]),d=k_(f,h,[1,n],r,"NHWC",[1,i],o);return zg(d,c?[d.shape[2],d.shape[3]]:[d.shape[0],d.shape[2],d.shape[3]])}}),Zw=hg({conv2dTranspose_:function(e,t,n,r,a,i){var o=$y(e,"x","conv2dTranspose"),s=$y(t,"filter","conv2dTranspose");return x_(n,o,s,r,a,"NHWC",i)}}),Yw=hg({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=$y(e,"x","conv3d"),s=$y(t,"filter","conv3d"),u=o,l=!1;4===o.rank&&(l=!0,u=zg(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Rv(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),Rv(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),Rv(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),Rv(g_(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),Rv("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var c=Uy.runKernelFunc((function(e,t){var a=h_(u.shape,s.shape,n,i,r),o=e.conv3d(u,s,a);return t([u,s]),o}),{x:u,filter:s},null,"Conv3D",{strides:n,pad:r,dataFormat:a,dilations:i});return l?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}}),Qw=hg({conv3dTranspose_:function(e,t,n,r,a){var i=$y(e,"x","conv3dTranspose"),o=$y(t,"filter","conv3dTranspose");return I_(n,i,o,r,a)}}),$w=hg({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=$y(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return Rv(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),Rv(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),Rv(o%(t*t)==0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)})),Uy.runKernelFunc((function(e){return e.depthToSpace(r,t,n)}),{x:r},null,"DepthToSpace",{blockSize:t,dataFormat:n})}}),ek=hg({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=$y(e,"x","depthwiseConv2d"),u=$y(t,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=zg(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Rv(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),Rv(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),Rv(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(l.shape[3],") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),null!=o&&Rv(zv(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(r,".")}));var h=Uy.runKernelFunc((function(e,t){null==i&&(i=[1,1]),Rv(g_(n,i),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(n," and dilations '").concat(i,"'")}));var a=c_(l.shape,u.shape,n,i,r,o,!0),s=e.depthwiseConv2D(l,u,a);return t([l,u]),s}),{x:l,filter:u},null,"DepthwiseConv2dNative",{strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o});return c?zg(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),tk=hg({diag_:function(e){var t=$y(e,"x","diag").flatten();return Uy.runKernelFunc((function(n){var r=n.diag(t),a=[].concat(_toConsumableArray(e.shape),_toConsumableArray(e.shape));return zg(r,a)}),{x:t},null,"Diag")}});function nk(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=Mg(e,"int32"),i=Mg([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]);i.values.set(s,o*e.length)}return i.toTensor()}var rk=hg({logicalAnd_:function(e,t){var n=$y(e,"a","logicalAnd","bool"),r=$y(t,"b","logicalAnd","bool");return Ky(n.shape,r.shape),Uy.runKernelFunc((function(e){return e.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),ak=hg({logicalNot_:function(e){var t=$y(e,"x","logicalNot","bool");return Uy.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),ik=hg({logicalOr_:function(e,t){var n=$y(e,"a","logicalOr","bool"),r=$y(t,"b","logicalOr","bool");return Ky(n.shape,r.shape),Uy.runKernelFunc((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),ok=hg({logicalXor_:function(e,t){var n=$y(e,"a","logicalXor","bool"),r=$y(t,"b","logicalXor","bool");return Ky(n.shape,r.shape),ik(e,t).logicalAnd(rk(e,t).logicalNot())}}),sk=hg({where_:function(e,t,n){var r=$y(t,"a","where"),a=$y(n,"b","where"),i=$y(e,"condition","where","bool");return Ov(r.shape,a.shape,"Error in where: "),1===i.rank?Rv(i.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):Ov(i.shape,a.shape,"Error in where: "),Uy.runKernelFunc((function(e,t){var n=e.select(i,r,a);return t([i]),n}),{$condition:i,$a:r,$b:a},(function(e,t){var n=_slicedToArray(t,1)[0];return{$condition:function(){return Rg(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),uk=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$y(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=nk(n.shape,r),e.abrupt("return",(t!==n&&n.dispose(),a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lk=hg({divNoNan_:function(e,t){var n=$y(e,"a","div"),r=$y(t,"b","div"),a=_slicedToArray(Ly(n,r),2);n=a[0],r=a[1];var i=Pb(n,r),o=Rg(i),s=r.equal(o);return sk(s,o,i)}}),ck=hg({dot_:function(e,t){var n=$y(e,"t1","dot"),r=$y(t,"t2","dot");Rv(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(Rv(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=zg(n,[1,-1]),s=zg(r,[-1,1]),u=Ug(o,s);return zg(u,[])}if(1===n.rank&&2===r.rank){var l=zg(n,[1,-1]),c=zg(r,[r.shape[0],r.shape[1]]),h=Ug(l,c);return zg(h,[h.size])}if(2===n.rank&&1===r.rank){var f=zg(r,[-1,1]),d=Ug(n,f);return zg(d,[d.size])}var p=zg(r,[r.shape[0],r.shape[1]]);return Ug(n,p)}}),hk=hg({equal_:function(e,t){var n,r=$y(e,"a","equal"),a=$y(t,"b","equal");return n=_slicedToArray(Ly(r,a),2),r=n[0],a=n[1],Ky(r.shape,a.shape),Uy.runKernelFunc((function(e){return e.equal(r,a)}),{a:r,b:a},null,"Equal")}}),fk=hg({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=Mg([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=a.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return Bb(Lg(s,0),[n[0],1,1]);if(2===n.length)return Bb(Lg(Lg(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Bb(Lg(Lg(Lg(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}}),dk=hg({greater_:function(e,t){var n,r=$y(e,"a","greater"),a=$y(t,"b","greater");return n=_slicedToArray(Ly(r,a),2),r=n[0],a=n[1],Ky(r.shape,a.shape),Uy.runKernelFunc((function(e){return e.greater(r,a)}),{a:r,b:a},null,"Greater")}}),pk=hg({greaterEqual_:function(e,t){var n,r=$y(e,"a","greaterEqual"),a=$y(t,"b","greaterEqual");return n=_slicedToArray(Ly(r,a),2),r=n[0],a=n[1],Ky(r.shape,a.shape),Uy.runKernelFunc((function(e,t){var n=e.greaterEqual(r,a);return t([r,a]),n}),{a:r,b:a},null,"GreaterEqual")}}),mk=hg({less_:function(e,t){var n,r=$y(e,"a","less"),a=$y(t,"b","less");return n=_slicedToArray(Ly(r,a),2),r=n[0],a=n[1],Ky(r.shape,a.shape),Uy.runKernelFunc((function(e){return e.less(r,a)}),{a:r,b:a},null,"Less")}}),vk=hg({lessEqual_:function(e,t){var n,r=$y(e,"a","lessEqual"),a=$y(t,"b","lessEqual");return n=_slicedToArray(Ly(r,a),2),r=n[0],a=n[1],Ky(r.shape,a.shape),Uy.runKernelFunc((function(e,t){var n=e.lessEqual(r,a);return t([r,a]),n}),{a:r,b:a},null,"LessEqual")}}),yk=hg({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=$y(e,"x","localResponseNormalization");Rv(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),Rv(zv(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=zg(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u=Uy.runKernelFunc((function(e,i){var s=e.localResponseNormalization4D(o,t,n,r,a);return i([o,s]),s}),{x:o},null,"LRN",{depthRadius:t,bias:n,alpha:r,beta:a});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),gk=hg({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$y(e,"x","max"),a=Uy.runKernelFunc((function(e,n){var a=Hv(t,r.shape),i=og(a,r.rank),o=r;null!=i&&(o=jb(r,i),a=ug(a.length,o.rank));var s=e.max(o,a);return n([r,s]),null!=i&&e.disposeData(o.dataId),s}),{x:r},null,"Max",{reductionIndices:t,keepDims:n});return n?zg(a,ag(a.shape,Hv(t,r.shape))):a}}),_k=hg({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=$y(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s=1===o?a.as2D(1,-1):a,u=Uy.runKernelFunc((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===o?u.as1D():u}}),bk=hg({notEqual_:function(e,t){var n,r=$y(e,"a","notEqual"),a=$y(t,"b","notEqual");return n=_slicedToArray(Ly(r,a),2),r=n[0],a=n[1],Ky(r.shape,a.shape),Uy.runKernelFunc((function(e){return e.notEqual(r,a)}),{a:r,b:a},null,"NotEqual")}}),xk=hg({outerProduct_:function(e,t){var n=$y(e,"v1","outerProduct"),r=$y(t,"v2","outerProduct");Rv(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=zg(n,[-1,1]),i=zg(r,[1,-1]);return Ug(a,i)}}),wk=hg({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Rv(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),$b(e,[t],n)}}),kk=hg({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Rv(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),$b(e,t,n)}}),Ck=hg({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Rv(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),$b(e,t,n)}}),Sk=hg({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Rv(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),$b(e,t,n)}}),Ik=hg({rand_:function(e,t,n){var r=Pv(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return Uy.makeTensor(a,e,n)}}),Dk=n("YSVl"),Ak=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Dk.alea(o.toString())}return _createClass(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),Tk=function(){function e(t,n,r,a){_classCallCheck(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=Dk.alea(i.toString()),this.randn=new Ak(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return _createClass(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i*=1/this.beta*this.d,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),Ek=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(_classCallCheck(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"==typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=Dk.alea(i)}return _createClass(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}(),Rk=hg({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new Tk(t,n,r,a),o=Mg(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Ok=hg({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new Ak(t,n,r,!1,a),o=Mg(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Mk=hg({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,i=Mg(e,r),o=new Ek(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),Nk=hg({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=$y(e,"x","separableConv2d"),u=$y(t,"depthwiseFilter","separableConv2d"),l=$y(n,"pointwiseFilter","separableConv2d"),c=s,h=!1;if(3===s.rank&&(h=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Rv(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),Rv(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Rv(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Rv(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],".")})),Rv(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],".")}));var f=u.shape[2],d=u.shape[3];Rv(l.shape[2]===f*d,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(f*d,", ")+"but got ".concat(l.shape[2],".")}));var p=ek(c,u,r,a,o,i),m=k_(p,l,1,"valid",o);return h?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Pk=hg({squaredDifference_:function(e,t){var n,r=$y(e,"a","squaredDifference"),a=$y(t,"b","squaredDifference");return n=_slicedToArray(Ly(r,a),2),r=n[0],a=n[1],Ky(r.shape,a.shape),Uy.runKernelFunc((function(e,t){var n=e.squaredDifference(r,a);return t([r,a]),n}),{a:r,b:a},null,"SquaredDifference",{})}}),Fk=hg({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new Ak(t,n,r,!0,a),o=Mg(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Lk=30;function zk(e){return e<=Lk?e:oy(e,Math.floor(Math.sqrt(e)))}function Bk(e,t){var n,r=!1;for(e<=Lk?(n=e,r=!0):n=oy(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=oy(e,n+1);return n}function Wk(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)r.push(i!==t?e[i]:n);return r}function qk(e,t,n){for(var r=e.shape[n],a=[],i=1,o=1,s=0;s<n;s++)a.push(e.shape[s]),i*=e.shape[s];for(var u=0;u<t.rank;u++)a.push(t.shape[u]);for(var l=n+1;l<e.rank;l++)a.push(e.shape[l]),o*=e.shape[l];return{batchSize:i,sliceSize:o,dimSize:r,outputShape:a}}function Vk(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Uk(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var jk=hg({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=$y(e,"x","gather"),a=$y(t,"indices","gather","int32");n=Hv(n,r.shape)[0];var i=qk(r,a,n);return Uy.runKernelFunc((function(e,t){var i=e.gather(r,a.flatten(),n);return t([a]),i}),{x:r,indices:a},(function(e,t){var a=_slicedToArray(t,1)[0];return{x:function(){var t=r.shape,i=a.size,o=t.slice(0,n),s=o.length,u=t.slice(n,t.length).slice(1),l=u.length,c=Vk(0,s),h=Vk(s+1,s+1+l),f=Uk([o,[i],u]),d=e.reshape(f),p=a.reshape([i]),m=Uk([[s],c,h]),v=d.transpose(m),y=Hk(v,p,r.shape[n]),g=sg(m);return y=y.transpose(g)},indices:function(){return a}}}),"Gather",{axis:n}).reshape(i.outputShape)}}),Hk=hg({unsortedSegmentSum_:function(e,t,n){var r=$y(e,"x","unsortedSegmentSum"),a=$y(t,"segmentIds","unsortedSegmentSum","int32");return Rv(zv(n),(function(){return"numSegments must be of dtype int"})),Uy.runKernelFunc((function(e,t){var i=e.unsortedSegmentSum(r,a,n);return t([a]),i}),{$x:r},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return function(e,t){for(var n=kb(t,Rg(t)),r=jk(e,n),a=pk(t,yg(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=Lg(a,o+1);a=rk(a,Sg(r.shape,"bool"));var s=Rg(r);return sk(a,r,s)}(e,n)}}}))}}),Gk=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s,u,l,c,h,f,d,p,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=$y(t,"tensor","boolMask"),i=$y(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,Rv(s>0,(function(){return"mask cannot be scalar"})),Ov(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,c=o;c<o+s;c++)l*=u[c];return h=u.slice(0,o).concat([l],u.slice(o+s)),f=a.reshape(h),d=i.reshape([-1]),e.next=9,uk(d);case 9:return p=e.sent,m=p.squeeze([1]),v=jk(f,m,o),e.abrupt("return",(t!==a&&a.dispose(),n!==i&&i.dispose(),m.dispose(),f.dispose(),d.dispose(),p.dispose(),v));case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Jk=hg({reverse_:function(e,t){var n=$y(e,"x","reverse");if(0===n.rank)return n.clone();var r=Hv(t,n.shape);return Uy.runKernelFunc((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),Xk=hg({reverse1d_:function(e){var t=$y(e,"x","reverse");return Rv(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),Jk(t,0)}}),Kk=hg({reverse2d_:function(e,t){var n=$y(e,"x","reverse");return Rv(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),Jk(n,t)}}),Zk=hg({reverse3d_:function(e,t){var n=$y(e,"x","reverse");return Rv(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),Jk(n,t)}}),Yk=hg({reverse4d_:function(e,t){var n=$y(e,"x","reverse");return Rv(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),Jk(n,t)}});function Qk(e,t,n,r,a,i){var o=$y(e,"x","maxPool"),s=o,u=!1;3===o.rank&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),null==r&&(r=[1,1]),Rv(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(s.rank,".")})),Rv(g_(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(r,"'")})),null!=i&&Rv(zv(a),(function(){return"Error in maxPool: pad must be an integer when using, "+"dimRoundingMode ".concat(i," but got pad ").concat(a,".")}));var l=u_(s.shape,t,n,r,a,i);if(1===l.filterWidth&&1===l.filterHeight&&Lv(l.inShape,l.outShape))return o.clone();var c=Uy.runKernelFunc((function(e,t){var n=e.maxPool(s,l);return t([s,n]),n}),{x:s},(function(e,i){var o=_slicedToArray(i,2),s=o[0],u=o[1];return{x:function(){return function(e,t,n,r,a,i,o,s){var u=$y(e,"dy","maxPoolBackprop"),l=$y(t,"input","maxPoolBackprop"),c=$y(n,"output","maxPoolBackprop");Rv(l.rank===u.rank,(function(){return"Rank of input (".concat(l.rank,") does not match rank of dy ")+"(".concat(u.rank,")")})),null==i&&(i=[1,1]),Rv(g_(a,i),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(i,"'")})),Rv(4===u.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),Rv(4===l.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+"".concat(l.rank,".")}));var h=u_(l.shape,r,a,i,o,void 0);return Uy.runKernelFunc((function(e){return e.maxPoolBackprop(u,l,c,h)}),{$dy:u,$input:l})}(e,s,u,t,n,r,a)}}}),"MaxPool",l,[s]);return u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function $k(e,t,n,r,a,i){var o=$y(e,"x","avgPool","float32");null==r&&(r=[1,1]),Rv(g_(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(r,"'")}));var s=o,u=!1;3===o.rank&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Rv(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(s.rank,".")})),null!=i&&Rv(zv(a),(function(){return"Error in avgPool: pad must be an integer when using, "+"dimRoundingMode ".concat(i," but got pad ").concat(a,".")}));var l=u_(s.shape,t,n,r,a,i);if(1===l.filterWidth&&1===l.filterHeight&&Lv(l.inShape,l.outShape))return o.clone();var c=Uy.runKernelFunc((function(e){return e.avgPool(s,l)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,a,i){var o=$y(e,"dy","avgPoolBackprop"),s=$y(t,"input","avgPoolBackprop");Rv(s.rank===o.rank,(function(){return"Rank of input (".concat(s.rank,") does not match rank of dy (").concat(o.rank,")")})),null==a&&(a=[1,1]),Rv(g_(r,a),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(a,"'")}));var u=s,l=o,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Rv(4===l.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+"".concat(l.rank,".")})),Rv(4===u.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+"".concat(u.rank,".")}));var h=u_(u.shape,n,r,a,i),f=Uy.runKernelFunc((function(e){return e.avgPoolBackprop(l,u,h)}),{dy4D:l,input4D:u});return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}(e,s,t,n,r,a)}}}),"AvgPool",l);return c=c.cast(o.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var eC=hg({maxPool_:function(e,t,n,r,a){return Qk(e,t,n,1,r,a)}}),tC=hg({avgPool_:function(e,t,n,r,a){return $k(e,t,n,1,r,a)}}),nC=hg({pool_:function(e,t,n,r,a,i){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var o=$y(e,"x","maxPool"),s=o,u=!1;3===o.rank&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),Rv(g_(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var l,c=u_(s.shape,t,i,a,r),h=[c.dilationHeight,c.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([c.filterHeight,c.filterWidth],h):[[0,0],[0,0]];var f=1===h[0]&&1===h[1],d=_slicedToArray(function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,o[t]]}))]}([c.inHeight,c.inWidth],h,l),2),p=d[0],m=d[1],v=f?r:"valid",y=f?s:Hg(s,h,p),g=("avg"===n?function(){return $k(y,t,i,1,v)}:function(){return Qk(y,t,i,1,v)})(),_=f?g:Jb(g,h,m);return u?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}}),rC=hg({maxPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=arguments.length>6?arguments[6]:void 0,s=$y(e,"x","maxPool3d"),u=s,l=!1;4===s.rank&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),Rv(5===u.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(u.rank,".")})),Rv("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),Rv(g_(n,o),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")})),null!=a&&Rv(zv(r),(function(){return"Error in maxPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var c=l_(u.shape,t,n,o,r,a,i),h=Uy.runKernelFunc((function(e,t){var n=e.maxPool3d(u,c);return t([u,n]),n}),{x:u},(function(e,i){var s=_slicedToArray(i,2),u=s[0],l=s[1];return{x:function(){return function(e,t,n,r,a,i,o,s){var u=$y(e,"dy","maxPool3dBackprop"),l=$y(t,"input","maxPool3dBackprop"),c=$y(n,"output","maxPool3dBackprop"),h=u,f=l,d=c,p=!1;4===l.rank&&(p=!0,h=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),f=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),d=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3])),Rv(5===h.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+"".concat(h.rank,".")})),Rv(5===f.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+"".concat(f.rank,".")})),Rv(5===d.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+"".concat(d.rank,".")})),null==i&&(i=[1,1,1]),Rv(g_(a,i),(function(){return"Error in maxPool3dBackprop: Either strides or dilations "+"must be 1. Got strides ".concat(a," and dilations '").concat(i,"'")})),null!=s&&Rv(zv(o),(function(){return"Error in maxPool3dBackprop: pad must be an integer when "+"using, dimRoundingMode ".concat(s," but got pad ").concat(o,".")}));var m=l_(f.shape,r,a,i,o,s),v=Uy.runKernelFunc((function(e){return e.maxPool3dBackprop(h,f,d,m)}),{dy5D:h,input5D:f});return p?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}(e,u,l,t,n,o,r,a)}}}));return l?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),aC=hg({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=arguments.length>6?arguments[6]:void 0,s=$y(e,"x","avgPool3d","float32"),u=s,l=!1;4===s.rank&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),Rv(5===u.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(u.rank,".")})),Rv("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),Rv(g_(n,o),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")})),null!=a&&Rv(zv(r),(function(){return"Error in avgPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var c=l_(u.shape,t,n,o,r,a,i),h=Uy.runKernelFunc((function(e){return e.avgPool3d(u,c)}),{x:u},(function(e){return{x:function(){return function(e,t,n,r,a,i,o){var s=$y(e,"dy","avgPool3dBackprop"),u=$y(t,"input","avgPool3dBackprop"),l=s,c=u,h=!1;4===u.rank&&(h=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),Rv(5===l.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),Rv(5===c.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+"".concat(c.rank,".")})),null==a&&(a=[1,1,1]),Rv(g_(r,a),(function(){return"Error in avgPool3dBackprop: Either strides or dilations "+"must be 1. Got strides ".concat(r," and dilations '").concat(a,"'")})),null!=o&&Rv(zv(i),(function(){return"Error in maxPool3dBackprop: pad must be an integer when "+"using, dimRoundingMode ".concat(o," but got pad ").concat(i,".")}));var f=l_(c.shape,n,r,a,i,o),d=Uy.runKernelFunc((function(e){return e.avgPool3dBackprop(l,c,f)}),{dy5D:l,input5D:c});return h?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}(e,u,t,n,o,r,a)}}}));return h=h.cast(u.dtype),l?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),iC=hg({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=$y(e,"x","maxPoolWithArgmax"),o=Uy.runKernel("MaxPoolWithArgmax",{x:i},{filterSize:t,strides:n,pad:r,includeBatchInIndex:a});return{result:o[0],indexes:o[1]}}}),oC=hg({equalStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","equalStrict"),r=$y(t,"b","equalStrict");return Ov(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),sC=hg({greaterEqualStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","greaterEqualStrict"),r=$y(t,"b","greaterEqualStrict");return Ov(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),uC=hg({greaterStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","greaterStrict"),r=$y(t,"b","greaterStrict");return Ov(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),lC=hg({lessEqualStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","lessEqualStrict"),r=$y(t,"b","lessEqualStrict");return Ov(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),cC=hg({lessStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","lessStrict"),r=$y(t,"b","lessStrict");return Ov(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),hC=hg({notEqualStrict_:function(e,t){R_("strict variants of ops have been deprecated and will be removed in future");var n=$y(e,"a","notEqualStrict"),r=$y(t,"b","notEqualStrict");return Ov(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}}),fC=1.7580993408473768,dC=1.0507009873554805,pC=hg({elu_:function(e){var t=$y(e,"x","elu");return Uy.runKernelFunc((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){return Uy.runKernelFunc((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),mC=hg({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=$y(e,"x","leakyRelu");return kb(yg(t).mul(n),n)}}),vC=hg({prelu_:function(e,t){var n=$y(e,"x","prelu"),r=$y(t,"alpha","prelu");return Uy.runKernelFunc((function(e,t){var a=e.prelu(n,r);return t([n,r]),a}),{x:n,alpha:r},(function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=r.greater(0);return{x:function(){return sk(i,e,e.mul(a))},alpha:function(){var t=sk(i,Rg(e),e.mul(r)),n=Xy(a.shape,e.shape);return n.length>0&&(t=t.sum(n)),t.reshape(a.shape)}}}),"Prelu")}}),yC=hg({relu_:function(e){var t=$y(e,"x","relu");return"bool"===t.dtype?t.toInt():Uy.runKernelFunc((function(e,n){var r=e.relu(t);return n([t]),r}),{x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{x:function(){return Tb(e,n.step().toFloat())}}}),"Relu")}}),gC=hg({relu6_:function(e){var t=$y(e,"x","relu6");return"bool"===t.dtype?t.toInt():Uy.runKernelFunc((function(e,n){var r=e.relu6(t);return n([t]),r}),{x:t},(function(e,t){var n=_slicedToArray(t,1)[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return Tb(e,r.toFloat())}}}),"Relu6")}}),_C=hg({selu_:function(e){var t=$y(e,"x","selu");return Uy.runKernelFunc((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=_slicedToArray(t,1)[0];return{$x:function(){var t=n.greater(yg(0)),r=yg(fC),a=yg(dC),i=e.mul(a),o=e.mul(r).mul(n.toFloat().exp());return sk(t,i,o)}}}))}}),bC=hg({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=$y(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));return Uy.runKernelFunc((function(e,r){var a=e.softmax(n,t);return r([a]),a}),{logits:n},(function(e,n){var r=_slicedToArray(n,1)[0],a=e.mul(r);return{logits:function(){return a.sub(a.sum([t],!0).mul(r))}}}),"Softmax",{dim:t},[],[!0])}}),xC=hg({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=$y(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));return Jg((function(e,n){var r=e.max(t,!0),a=e.sub(r),i=a.toFloat().sub(a.exp().sum(t,!0).log());return n([i]),{value:i,gradFunc:function(e,n){var r=_slicedToArray(n,1)[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),wC=hg({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(yg(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: ".concat(n))}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: ".concat(n))}throw new Error("Error in norm: invalid axis: ".concat(r))}(e=$y(e,"x","norm"),t,n),i=a.shape;if(r){var o=Hv(n,e.shape);i=ag(a.shape,o)}return a.reshape(i)}}),kC=hg({basicLSTMCell_:function(e,t,n,r,a,i){var o=$y(e,"forgetBias","basicLSTMCell"),s=$y(t,"lstmKernel","basicLSTMCell"),u=$y(n,"lstmBias","basicLSTMCell"),l=$y(r,"data","basicLSTMCell"),c=$y(a,"c","basicLSTMCell"),h=$y(i,"h","basicLSTMCell"),f=l.concat(h,1).matMul(s).add(u),d=f.shape[1]/4,p=[f.shape[0],d],m=f.slice([0,0],p),v=f.slice([0,d],p),y=f.slice([0,2*d],p),g=f.slice([0,3*d],p),_=m.sigmoid().mul(v.tanh()).add(c.mul(o.add(y).sigmoid())),b=_.tanh().mul(g.sigmoid());return[_,b]}}),CC=hg({multiRNNCell_:function(e,t,n,r){for(var a=$y(t,"data","multiRNNCell"),i=eg(n,"c","multiRNNCell"),o=eg(r,"h","multiRNNCell"),s=a,u=[],l=0;l<e.length;l++){var c=e[l](s,i[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}for(var h=[],f=[],d=0;d<u.length;d+=2)h.push(u[d]),f.push(u[d+1]);return[h,f]}}),SC=hg({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=$y(e,"v","movingAverage"),o=$y(t,"x","movingAverage"),s=$y(n,"decay","movingAverage");zy(i,o),Rv(Lv(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=yg(1),l=u.sub(s),c=o.sub(i).mul(l);if(a){Rv(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var h=$y(r,"step","movingAverage");c=c.div(u.sub(Rb(s,h)))}return i.add(c)}}),IC=hg({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;if(null==r&&(r=new Array(t.length)),0!==o)throw new Error("ellipsis mask is not yet supported");var l=$y(e,"x","stridedSlice"),c=tx(s),h=l.shape.slice();c.forEach((function(e){t[e]=0,n[e]=1,h.splice(e,0,1)})),l=l.reshape(h);for(var f=0;f<l.rank;f++)t[f]=rx(a,t,r,l.shape,f),n[f]=ax(i,n,r,l.shape,f),r[f]=r[f]||1;var d=tx(u);d.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var p=nx(t,n,r),m=p.filter((function(e,t){return-1===d.indexOf(t)}));return r.every((function(e){return 1===e}))?cx(l,t,p).reshape(m):Uy.runKernelFunc((function(e){return e.stridedSlice(l,t,n,r)}),{$x:l}).reshape(m)}}),DC=hg({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=$y(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i=Uy.runKernelFunc((function(e){return e.topk(r,t,n)}),{$x:r}),o=_slicedToArray(i,2),s=o[0],u=o[1];return{values:s,indices:u}}}),AC=hg({scatterND_:function(e,t,n){var r=$y(e,"indices","scatterND","int32"),a=$y(t,"updates","scatterND");return Ow(a,r,n),Uy.runKernelFunc((function(e){return e.scatterND(r,a,n)}),{indices:r,updates:a},null,"ScatterNd",{shape:n})}}),TC=hg({fft_:function(e){Rv("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t=e.shape[e.shape.length-1],n=e.as2D(e.size/t,t);return Uy.runKernelFunc((function(e){return e.fft(n)}),{input:e}).reshape(e.shape)}}),EC=hg({ifft_:function(e){Rv("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t=e.shape[e.shape.length-1],n=e.as2D(e.size/t,t);return Uy.runKernelFunc((function(e){return e.ifft(n)}),{input:e}).reshape(e.shape)}}),RC=hg({rfft_:function(e,t){Rv("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=e.slice(i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat(Ig(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),l=fg(n,u).as2D(a,r),c=TC(l),h=Math.floor(r/2)+1,f=dg(c),d=pg(c),p=f.split([h,r-h],f.shape.length-1),m=d.split([h,r-h],d.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=h,fg(p[0],m[0]).reshape(v)}}),OC=hg({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),a=EC(r);return dg(a)}var i=[n,2*(t-1)],o=dg(e).as2D(n,t),s=pg(e).as2D(n,t),u=o.slice([0,1],[n,t-2]).reverse(1),l=s.slice([0,1],[n,t-2]).reverse(1).mul(yg(-1)),c=o.concat(u,1),h=s.concat(l,1),f=fg(c,h).as2D(i[0],i[1]),d=EC(f);return dg(d)}}),MC=hg({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=$y(e,"sparseIndices","sparseToDense","int32"),i=$y(t,"sparseValues","sparseToDense"),o=$y(r,"defaultValue","sparseToDense",i.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));if(0!==t.rank&&(1!==t.rank||t.size!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o),Uy.runKernelFunc((function(e){return e.sparseToDense(a,i,n,o)}),{$sparseIndices:a,$sparseValues:i,$defaultValue:o})}}),NC=hg({gatherND_:function(e,t){var n=$y(t,"indices","gatherND","int32"),r=$y(e,"x","gatherND");return Uy.runKernelFunc((function(e){return e.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),PC=hg({dropout_:function(e,t,n,r){var a=$y(e,"x","dropout");if(Rv("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),Rv(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Dy?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(Lv(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)n.push(null==t[r]&&null!=e.shape[r]?e.shape[r]:t[r]);return n}return t}(a,n),o=1-t,s=Mk(i,0,1,"float32",r).add(o).floor().div(o);return a.mul(s)}});function FC(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return gg(a,"float32")}var LC,zC=hg({hannWindow_:function(e){return FC(e,.5,.5)}}),BC=hg({hammingWindow_:function(e){return FC(e,.54,.46)}}),WC=hg({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(cx(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Og([cx(e,i,t-s),Dg([s],a)]);o.push(u),i+=n}return 0===o.length?_g([],[0,t]):Og(o).as2D(o.length,t)}}),qC=hg({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:zC;null==r&&(r=Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2)))));for(var i=WC(e,t,n),o=Tb(i,a(t)),s=[],u=0;u<i.shape[0];u++)s.push(RC(o.slice([u,0],[1,t]),r));return Og(s)}}),VC=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l,c,h,f,d,p,m,v,y,g=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>2&&void 0!==g[2]?g[2]:1,a=$y(t,"predictions","inTopK"),i=$y(n,"targets","inTopK"),Rv(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),Rv(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),Ov(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],Rv(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=7,a.data();case 7:return s=e.sent,e.next=10,i.data();case 10:u=e.sent,l=s.length/o,c=o,h=Jv("bool",l),f=0;case 15:if(!(f<l)){e.next=30;break}for(d=f*c,p=s.subarray(d,d+c),m=[],v=0;v<p.length;v++)m.push({value:p[v],index:v});m.sort((function(e,t){return t.value-e.value})),h[f]=0,y=0;case 20:if(!(y<r)){e.next=27;break}if(m[y].index!==u[f]){e.next=24;break}return h[f]=1,e.abrupt("break",27);case 24:y++,e.next=20;break;case 27:f++,e.next=15;break;case 30:return e.abrupt("return",(t!==a&&a.dispose(),n!==i&&i.dispose(),mg(h,i.shape,"bool")));case 31:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(LC||(LC={}));var UC=hg({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:LC.SUM_BY_NONZERO_WEIGHTS,a=$y(e,"labels","absoluteDifference"),i=$y(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=$y(n,"weights","absoluteDifference")),Ov(a.shape,i.shape,"Error in absoluteDifference: ");var s=a.sub(i).abs();return jC(s,o,r)}}),jC=hg({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:LC.SUM_BY_NONZERO_WEIGHTS,r=$y(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=$y(t,"weights","computeWeightedLoss"));var i=null==a?r:r.mul(a);if(n===LC.NONE)return i;if(n===LC.SUM)return i.sum();if(n===LC.MEAN){if(null==a)return i.mean();var o=r.size/a.size,s=i.sum().div(a.sum());return o>1?s.div(yg(o)):s}if(n===LC.SUM_BY_NONZERO_WEIGHTS){if(null==a)return i.sum().div(yg(r.size));var u=a.mul(Sg(r.shape)).notEqual(yg(0)).sum().toFloat();return i.sum().div(u)}throw Error("Unknown reduction: ".concat(n))}}),HC=hg({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LC.SUM_BY_NONZERO_WEIGHTS,i=$y(e,"labels","cosineDistance"),o=$y(t,"predictions","cosineDistance"),s=null;null!=r&&(s=$y(r,"weights","cosineDistance")),Ov(i.shape,o.shape,"Error in cosineDistance: ");var u=yg(1).sub(i.mul(o).sum(n,!0));return jC(u,s,a)}}),GC=hg({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:LC.SUM_BY_NONZERO_WEIGHTS,a=$y(e,"labels","hingeLoss"),i=$y(t,"predictions","hingeLoss"),o=null;null!=n&&(o=$y(n,"weights","hingeLoss")),Ov(a.shape,i.shape,"Error in hingeLoss: ");var s=yg(1);a=yg(2).mul(a).sub(s);var u=s.sub(a.mul(i)).relu();return jC(u,o,r)}}),JC=hg({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LC.SUM_BY_NONZERO_WEIGHTS,i=$y(e,"labels","huberLoss"),o=$y(t,"predictions","huberLoss"),s=null;null!=n&&(s=$y(n,"weights","huberLoss")),Ov(i.shape,o.shape,"Error in huberLoss: ");var u=yg(r),l=o.sub(i).abs(),c=Sb(l,u),h=l.sub(c),f=yg(.5).mul(c.square()).add(u.mul(h));return jC(f,s,a)}}),XC=hg({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LC.SUM_BY_NONZERO_WEIGHTS,i=$y(e,"labels","logLoss"),o=$y(t,"predictions","logLoss"),s=null;null!=n&&(s=$y(n,"weights","logLoss")),Ov(i.shape,o.shape,"Error in logLoss: ");var u=yg(1),l=yg(r),c=i.mul(o.add(l).log()).neg().sub(u.sub(i).mul(u.sub(o).add(l).log()));return jC(c,s,a)}}),KC=hg({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:LC.SUM_BY_NONZERO_WEIGHTS,a=$y(e,"labels","meanSquaredError"),i=$y(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=$y(n,"weights","meanSquaredError")),Ov(a.shape,i.shape,"Error in meanSquaredError: ");var s=a.squaredDifference(i);return jC(s,o,r)}}),ZC=hg({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LC.SUM_BY_NONZERO_WEIGHTS,i=$y(e,"multiClassLabels","sigmoidCrossEntropy"),o=$y(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=$y(n,"weights","sigmoidCrossEntropy")),Ov(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=yg(r),l=yg(1),c=yg(.5);i=i.mul(l.sub(u)).add(c.mul(u))}var h=function(e,t){var n=$y(e,"labels","sigmoidCrossEntropyWithLogits"),r=$y(t,"logits","sigmoidCrossEntropyWithLogits");Ov(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=r.relu(),i=r.mul(n),o=r.abs().neg().exp().log1p();return a.sub(i).add(o)}(i,o);return jC(h,s,a)}}),YC=hg({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LC.SUM_BY_NONZERO_WEIGHTS,i=$y(e,"onehotLabels","softmaxCrossEntropy"),o=$y(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=$y(n,"weights","softmaxCrossEntropy")),Ov(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=yg(r),l=yg(1),c=yg(i.shape[1]);i=i.mul(l.sub(u)).add(u.div(c))}var h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));return Jg((function(e,t,r){var a=t.logSumExp([n],!0),i=t.toFloat().sub(a);return r([e,i]),{value:i.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=_slicedToArray(t,2),a=r[0],i=r[1],o=ag(e.shape,[n]);return[e.reshape(o).mul(a.toFloat().sub(i.exp())),e.reshape(o).mul(i.exp().sub(a.toFloat()))]}}}))(e,t)}(i,o);return jC(h,s,a)}});function QC(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Uy.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor."));for(var n=e.shape[0],r=e.shape[1],a=fk(n),i=e.clone(),o=_g([[1]],[1,1]),s=o.clone(),u=n>=r?r:n,l=function(e){var t,u=i,l=s,c=a;t=_slicedToArray(Uy.tidy((function(){var t=i.slice([e,e],[n-e,1]),u=t.norm(),l=i.slice([e,e],[1,1]),c=_g([[-1]]).where(l.greater(0),_g([[1]])),h=l.sub(c.mul(u)),f=t.div(h);s=1===f.shape[0]?o.clone():o.concat(f.slice([1,0],[f.shape[0]-1,f.shape[1]]),0);var d=c.matMul(h).div(u).neg(),p=i.slice([e,0],[n-e,r]),m=d.mul(s),v=s.transpose();if(0===e)i=p.sub(m.matMul(v.matMul(p)));else{var y=p.sub(m.matMul(v.matMul(p)));i=i.slice([0,0],[e,r]).concat(y,0)}var g=m.transpose(),_=a.slice([0,e],[n,a.shape[1]-e]);if(0===e)a=_.sub(_.matMul(s).matMul(g));else{var b=_.sub(_.matMul(s).matMul(g));a=a.slice([0,0],[n,e]).concat(b,1)}return[s,i,a]})),3),s=t[0],i=t[1],a=t[2],P_([u,l,c])},c=0;c<u;++c)l(c);return!t&&n>r&&(a=a.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[a,i]}))}var $C=hg({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got ".concat(t,"."));if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got ".concat(n,"."));var r=$y(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got ".concat(r.rank,"."));var a=r.shape,i=_slicedToArray(r.shape.slice(-2),2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=o),n<0&&(n=s);var u=Tg(0,o,1,"int32").reshape([-1,1]),l=Tg(0,s,1,"int32"),c=zb(u,l),h=rk(c.lessEqual(yg(+t,"int32")),c.greaterEqual(yg(-n,"int32"))),f=Ig([o,s],r.dtype);return Wg(qg(r.reshape([-1,o,s])).map((function(e){return sk(h,e,f)}))).reshape(a)}}),eS=hg({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,Rv(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Rv(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=o_(e,e.shape[0],0).map((function(e){return Bg(e,[0])}))),Rv(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(Uy.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=r_(n[a].mul(t)).mul(n[a]);t=t.sub(i)}return t.div(wC(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?Wg(n,0):n}}),tS=hg({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank));if(2===e.rank)return QC(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=qg(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach((function(e){var n=_slicedToArray(QC(e,t),2),r=n[0],o=n[1];a.push(r),i.push(o)})),[Wg(a,0).reshape(e.shape),Wg(i,0).reshape(e.shape)]}});function nS(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,i=0,o=!1;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||rS)}(e,t,n);e.splice(r<0?-(r+1):r,0,t)}function rS(e,t){return e>t?1:e<t?-1:0}function aS(e,t,n,r,a){var i=oS(e,t,n,r,a,0);return i.selectedScores.dispose(),i.numValidOutputs.dispose(),i.selectedIndices}function iS(e,t,n,r,a,i){var o=oS(e,t,n,r,a,i,!0);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function oS(e,t,n,r,a,i){arguments.length>6&&void 0!==arguments[6]&&arguments[6];for(var o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],s=Array.from(t).map((function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}})).filter((function(e){return e.score>a})).sort(lS),u=i>0?-.5/i:0,l=[],c=[];l.length<n&&s.length>0;){var h=s.pop(),f=h.score,d=h.boxIndex,p=h.suppressBeginIndex;if(f<a)break;for(var m=!1,v=l.length-1;v>=p;--v){var y=sS(e,d,l[v]);if(y>=r){m=!0;break}if(h.score=h.score*uS(r,u,y),h.score<=a)break}h.suppressBeginIndex=l.length,m||(h.score===f?(l.push(d),c.push(h.score)):h.score>a&&nS(s,h,lS))}var g=l.length;return o&&(l.fill(0,g),c.fill(0,g)),{selectedIndices:gg(l,"int32"),selectedScores:gg(c,"float32"),numValidOutputs:yg(g,"int32")}}function sS(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),h=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),d=(s-i)*(u-o),p=(h-l)*(f-c);if(d<=0||p<=0)return 0;var m=Math.max(i,l),v=Math.max(o,c),y=Math.min(s,h),g=Math.min(u,f),_=Math.max(y-m,0)*Math.max(g-v,0);return _/(d+p-_)}function uS(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function lS(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function cS(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),Rv(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),Rv(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),Rv(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),Rv(1===t.rank,(function(){return"scores must be a 1D tensor"})),Rv(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),Rv(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var hS=hg({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=$y(e,"boxes","nonMaxSuppression"),o=$y(t,"scores","nonMaxSuppression"),s=cS(i,o,n,r,a);return Uy.runKernelFunc((function(e){return e.nonMaxSuppression(i,o,n,r,a)}),{boxes:i,scores:o},null,"NonMaxSuppressionV3",{maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold})}}),fS=hg({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$y(e,"images","resizeBilinear");Rv(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(r.rank,".")})),Rv(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")}));var a=r,i=!1;3===r.rank&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=_slicedToArray(t,2),s=o[0],u=o[1],l=Uy.runKernelFunc((function(e,t){return t([a]),e.resizeBilinear(a,s,u,n)}),{x:a},(function(e,t){return{x:function(){return Uy.runKernelFunc((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:s,newWidth:u});return i?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),dS=hg({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$y(e,"images","resizeNearestNeighbor");Rv(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(r.rank,".")})),Rv(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),Rv("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var a=r,i=!1;3===r.rank&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=_slicedToArray(t,2),s=o[0],u=o[1],l=Uy.runKernelFunc((function(e,t){return t([a]),e.resizeNearestNeighbor(a,s,u,n)}),{batchImages:a},(function(e,t){return{batchImages:function(){return Uy.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return i?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),pS=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s,u,l,c,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:.5,i=h.length>4&&void 0!==h[4]?h[4]:Number.NEGATIVE_INFINITY,o=$y(t,"boxes","nonMaxSuppressionAsync"),s=$y(n,"scores","nonMaxSuppressionAsync"),u=cS(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=6,Promise.all([o.data(),s.data()]);case 6:return l=e.sent,c=aS(l[0],l[1],r,a,i),e.abrupt("return",(o!==t&&o.dispose(),s!==n&&s.dispose(),c));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),mS=hg({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=$y(e,"boxes","nonMaxSuppression"),s=$y(t,"scores","nonMaxSuppression"),u=cS(o,s,n,r,a,i),l=Uy.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},{maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma});return{selectedIndices:l[0],selectedScores:l[1]}}}),vS=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s,u,l,c,h,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:.5,i=f.length>4&&void 0!==f[4]?f[4]:Number.NEGATIVE_INFINITY,o=f.length>5&&void 0!==f[5]?f[5]:0,s=$y(t,"boxes","nonMaxSuppressionAsync"),u=$y(n,"scores","nonMaxSuppressionAsync"),l=cS(s,u,r,a,i,o),r=l.maxOutputSize,a=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma,e.next=7,Promise.all([s.data(),u.data()]);case 7:return c=e.sent,h=iS(c[0],c[1],r,a,i,o),e.abrupt("return",(s!==t&&s.dispose(),u!==n&&u.dispose(),h));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),yS=hg({cropAndResize_:function(e,t,n,r,a,i){var o=$y(e,"image","cropAndResize"),s=$y(t,"boxes","cropAndResize","float32"),u=$y(n,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var l=s.shape[0];return Rv(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Rv(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(l,",4] ")+"but had shape ".concat(s.shape,".")})),Rv(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(l,"] ")+"but had shape ".concat(s.shape,".")})),Rv(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),Rv(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),Rv("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)})),Uy.runKernelFunc((function(e,t){return e.cropAndResize(o,s,u,r,a,i)}),{images:o,boxes:s,boxInd:u},null,"CropAndResize",{method:a,extrapolationValue:i,cropSize:r})}}),gS=function(e,t){return!(e>0)||"linear"===t},_S=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation ".concat(n," has not been ")+"implemented yet.")},bS=function(e,t){var n=t,r=Xy(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},xS=function(e,t,n){if("linear"===t)return e;if("relu"===t)return yC(e);if("elu"===t)return pC(e);if("relu6"===t)return gC(e);if("prelu"===t)return vC(e,n);throw new Error("Unknown fused activation ".concat(t,"."))},wS=hg({fusedMatMul_:function(e){var t,n=e.a,r=e.b,a=e.transposeA,i=void 0!==a&&a,o=e.transposeB,s=void 0!==o&&o,u=e.bias,l=e.activation,c=void 0===l?"linear":l,h=e.preluActivationWeights;if(!1===gS(Uy.state.gradientDepth,c)){var f=Ug(n,r,i,s);return null!=u&&(f=z_(f,u)),xS(f,c,h)}var d=$y(n,"a","fused matMul"),p=$y(r,"b","fused matMul"),m=_slicedToArray(Ly(d,p),2);d=m[0],p=m[1];var v=i?d.shape[d.rank-2]:d.shape[d.rank-1],y=s?p.shape[p.rank-1]:p.shape[p.rank-2],g=i?d.shape[d.rank-1]:d.shape[d.rank-2],_=s?p.shape[p.rank-2]:p.shape[p.rank-1],b=d.shape.slice(0,-2),x=p.shape.slice(0,-2),w=Pv(b),k=Pv(x);Rv(d.rank>=2&&p.rank>=2&&d.rank===p.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least "+"2, got ranks ".concat(d.rank," and ").concat(p.rank,".")})),Rv(Lv(b,x),(function(){return"Error in fused matMul: outer dimensions (".concat(b,") and (")+"".concat(x,") of Tensors with shapes ").concat(d.shape," and ")+"".concat(p.shape," must match.")})),Rv(v===y,(function(){return"Error in fused matMul: inner shapes (".concat(v,") and (")+"".concat(y,") of Tensors with shapes ").concat(d.shape," and ")+"".concat(p.shape," and transposeA=").concat(i)+" and transposeB=".concat(s," must match.")}));var C,S,I=d.shape.slice(0,-2).concat([g,_]),D=i?d.as3D(w,v,g):d.as3D(w,g,v),A=s?p.as3D(k,_,y):p.as3D(k,y,_);null!=u&&(t=_slicedToArray(Ly(C=$y(u,"bias","fused matMul"),d),1),Ky(I,(C=t[0]).shape)),null!=h&&(S=$y(h,"prelu weights","fused matMul"));var T={a:D,b:A};return null!=u&&(T.bias=C),null!=h&&(T.preluActivationWeights=S),Uy.runKernelFunc((function(e,t){var n=e.fusedBatchMatMul({a:D,b:A,transposeA:i,transposeB:s,bias:C,activation:c,preluActivationWeights:S});return t([D,A,n]),n}),T,(function(e,t){var n=_slicedToArray(t,3),r=n[0],a=n[1],o=n[2],l=_S(e,o,c),h={};return null!=u&&(h={bias:function(){return bS(C,l)}}),Object.assign(i||s?!i&&s?{a:function(){return l.matMul(a,!1,!1)},b:function(){return l.matMul(r,!0,!1)}}:i&&!s?{a:function(){return a.matMul(l,!1,!0)},b:function(){return r.matMul(l,!1,!1)}}:{a:function(){return a.matMul(l,!0,!0)},b:function(){return l.matMul(r,!0,!0)}}:{a:function(){return l.matMul(a,!1,!0)},b:function(){return r.matMul(l,!0,!1)}},h)}),"_FusedMatMul",{transposeA:i,transposeB:s,activation:c},[D,A],[!0]).reshape(I)}}),kS=hg({fusedConv2d_:function(e){var t,n=e.x,r=e.filter,a=e.strides,i=e.pad,o=e.dataFormat,s=void 0===o?"NHWC":o,u=e.dilations,l=void 0===u?[1,1]:u,c=e.dimRoundingMode,h=e.bias,f=e.activation,d=void 0===f?"linear":f,p=e.preluActivationWeights;if(!1===gS(Uy.state.gradientDepth,d=d||"linear")){var m=k_(n,r,a,i,s,l,c);return null!=h&&(m=z_(m,h)),xS(m,d,p)}var v=$y(n,"x","conv2d"),y=$y(r,"filter","conv2d"),g=v,_=!1;3===v.rank&&(_=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),Rv(4===g.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(g.rank,".")})),Rv(4===y.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(y.rank,".")})),null!=c&&Rv(zv(i),(function(){return"Error in fused conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(c," but got pad ").concat(i,".")})),Rv(g.shape[3]===y.shape[2],(function(){return"Error in conv2d: depth of input (".concat(g.shape[3],") must match ")+"input depth for filter ".concat(y.shape[2],".")})),Rv(g_(a,l),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(l,"'")})),Rv("NHWC"===s,(function(){return"Error in conv2d: got dataFormat of ".concat(s," but only NHWC is currently supported.")}));var b,x,w=c_(g.shape,y.shape,a,l,i,c);null!=h&&(t=_slicedToArray(Ly(b=$y(h,"bias","fused conv2d"),v),1),b=t[0],Ky(w.outShape,b.shape)),null!=p&&(x=$y(p,"prelu weights","fused conv2d"));var k={x:g,filter:y};null!=h&&(k.bias=b),null!=p&&(k.preluActivationWeights=x);var C=Uy.runKernelFunc((function(e,t){var n=e.fusedConv2d({input:g,filter:y,convInfo:w,bias:b,activation:d,preluActivationWeights:x});return t([y,g,n]),n}),k,(function(e,t){var n=_slicedToArray(t,3),r=n[0],o=n[1],s=n[2],u=_S(e,s,d);Rv(y_(l),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(l,"'")}));var c={};return null!=h&&(c={bias:function(){return bS(b,u)}}),Object.assign({x:function(){return x_(o.shape,u,r,a,i)},filter:function(){return b_(o,u,r.shape,a,i)}},c)}),"FusedConv2D",{convInfo:w,activation:d},[y,g],[!0]);return _?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),CS=hg({fusedDepthwiseConv2d_:function(e){var t,n=e.x,r=e.filter,a=e.strides,i=e.pad,o=e.dataFormat,s=void 0===o?"NHWC":o,u=e.dilations,l=void 0===u?[1,1]:u,c=e.dimRoundingMode,h=e.bias,f=e.activation,d=void 0===f?"linear":f,p=e.preluActivationWeights;if(!1===gS(Uy.state.gradientDepth,d)){var m=ek(n,r,a,i,s,l,c);return null!=h&&(m=z_(m,h)),xS(m,d,p)}var v=$y(n,"x","depthwiseConv2d"),y=$y(r,"filter","depthwiseConv2d"),g=v,_=!1;3===v.rank&&(_=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),Rv(4===g.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(g.rank,".")})),Rv(4===y.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(y.rank,".")})),Rv(g.shape[3]===y.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(g.shape[3],") must match the inChannels dimension in ")+"filter ".concat(y.shape[2],".")})),null==l&&(l=[1,1]),Rv(g_(a,l),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(a," and dilations '").concat(l,"'")})),null!=c&&Rv(zv(i),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when "+"using dimRoundingMode ".concat(c," but got pad ").concat(i,".")}));var b,x,w=c_(g.shape,y.shape,a,l,i,c,!0);null!=h&&(t=_slicedToArray(Ly(b=$y(h,"bias","fused conv2d"),v),1),b=t[0],Ky(w.outShape,b.shape)),null!=p&&(x=$y(p,"prelu weights","fused depthwiseConv2d"));var k={x:g,filter:y};null!=h&&(k.bias=b),null!=p&&(k.preluActivationWeights=x);var C=Uy.runKernelFunc((function(e,t){var n=e.fusedDepthwiseConv2D({input:g,filter:y,convInfo:w,bias:b,activation:d,preluActivationWeights:x});return t([y,g,n]),n}),k,(function(e,t){Rv(y_(l),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(l,"'")}));var n=_slicedToArray(t,3),r=n[0],a=n[1],i=n[2],o=_S(e,i,d),s={};return null!=h&&(s={bias:function(){return bS(b,o)}}),Object.assign({x:function(){return T_(a.shape,o,r,w)},filter:function(){return A_(a,o,r.shape,w)}},s)}),"FusedDepthwiseConv2D",{convInfo:w,activation:d},[y,g],[!0]);return _?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),SS=function(e){_inherits(o,e);var t,n,r,a,i=_createSuper(o);function o(){return _classCallCheck(this,o),i.apply(this,arguments)}return _createClass(o,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return P_(i),t?a:(a.dispose(),null)}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return function(e,t){Rv(iy(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Rv(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof My})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Uy.registeredVariables)t.push(Uy.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;Rv((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."}));var o=Uy.gradients(e,t,null,!0),s=o.value,u=o.grads;Rv(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Rv(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=a&&a.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&P_(this.iterations_)}},{key:"saveIterations",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:yg(this.iterations_,"int32")}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getWeights",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"setWeights",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"extractIterations",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}}]),o}(Nw);Object.defineProperty(SS,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var IS=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return _classCallCheck(this,a),(n=r.call(this)).learningRate=e,n.rho=t,n.epsilon=i,n.accumulatedGrads=[],n.accumulatedUpdates=[],null==i&&(n.epsilon=Uy.backend.epsilon()),n}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Uy.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:N_((function(){return Rg(a).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:N_((function(){return Rg(a).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;N_((function(){var e=o.mul(t.rho).add(i.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(o.add(t.epsilon).sqrt()).mul(i),r=s.mul(t.rho).add(n.square().mul(1-t.rho));o.assign(e),s.assign(r);var u=n.mul(-t.learningRate).add(a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(P_(this.accumulatedGrads.map((function(e){return e.variable}))),P_(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(_toConsumableArray(this.accumulatedGrads),_toConsumableArray(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:e.t0=(t=e.sent).length,n=e.t0/2,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),a}(SS);IS.className="Adadelta",Fw(IS);var DS=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return _classCallCheck(this,a),(t=r.call(this)).learningRate=e,t.initialAccumulatorValue=n,t.accumulatedGrads=[],t}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Uy.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:N_((function(){return Dg(a.shape,t.initialAccumulatorValue).variable(!1)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;N_((function(){var e=o.add(i.square());o.assign(e);var n=i.div(e.add(Uy.backend.epsilon()).sqrt()).mul(-t.learningRate).add(a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&P_(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),a}(SS);DS.className="Adagrad",Fw(DS);var AS=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,a),(i=r.call(this)).learningRate=e,i.beta1=t,i.beta2=n,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],N_((function(){i.accBeta1=yg(t).variable(),i.accBeta2=yg(n).variable()})),null==o&&(i.epsilon=Uy.backend.epsilon()),i}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);N_((function(){var r=zb(1,t.accBeta1),a=zb(1,t.accBeta2);n.forEach((function(n,i){var o=Uy.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:N_((function(){return Rg(o).variable(!1)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:N_((function(){return Rg(o).variable(!1)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedSecondMoment[i].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),h=l.mul(t.beta2).add(s.square().mul(1-t.beta2)),f=c.div(r),d=h.div(a);u.assign(c),l.assign(h);var p=f.div(d.sqrt().add(t.epsilon)).mul(-t.learningRate).add(o);o.assign(p)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&P_(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&P_(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(_toConsumableArray(this.accumulatedFirstMoment),_toConsumableArray(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,N_((function(){r.accBeta1.assign(Rb(r.beta1,r.iterations_+1)),r.accBeta2.assign(Rb(r.beta2,r.iterations_+1))})),n=t.length/2,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),a}(SS);AS.className="Adam",Fw(AS);var TS=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return _classCallCheck(this,a),(i=r.call(this)).learningRate=e,i.beta1=t,i.beta2=n,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],N_((function(){i.iteration=yg(0).variable(),i.accBeta1=yg(t).variable()})),null==o&&(i.epsilon=Uy.backend.epsilon()),i}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);N_((function(){var r=zb(1,t.accBeta1),a=Pb(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,i){var o=Uy.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Rg(o).variable(!1)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:Rg(o).variable(!1)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedWeightedInfNorm[i].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),h=l.mul(t.beta2),f=s.abs(),d=h.maximum(f);u.assign(c),l.assign(d);var p=a.div(r).mul(c.div(d.add(t.epsilon))).add(o);o.assign(p)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&P_(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&P_(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),a}(SS);TS.className="Adamax",Fw(TS);var ES=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e){var t;return _classCallCheck(this,a),(t=r.call(this)).learningRate=e,t.setLearningRate(e),t}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=Uy.registeredVariables[n];N_((function(){var e=t.c.mul(a).add(i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=F_(yg(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(e.t0=(t=e.sent).length,0===e.t0){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),a}(SS);ES.className="SGD",Fw(ES);var RS=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,a),(n=r.call(this,e)).learningRate=e,n.momentum=t,n.useNesterov=i,n.accumulations=[],n.m=yg(n.momentum),n}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Uy.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:N_((function(){return Rg(a).variable(!1)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&N_((function(){var e,n=t.m.mul(i).add(o);e=t.useNesterov?t.c.mul(o.add(n.mul(t.m))).add(a):t.c.mul(n).add(a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&P_(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),a}(ES);RS.className="Momentum",Fw(RS);var OS=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_classCallCheck(this,a),(t=r.call(this)).learningRate=e,t.decay=n,t.momentum=i,t.epsilon=o,t.accumulatedMeanSquares=[],t.accumulatedMoments=[],t.accumulatedMeanGrads=[],t.centered=s,null==o&&(t.epsilon=Uy.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return _possibleConstructorReturn(t)}return _createClass(a,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Uy.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:N_((function(){return Rg(a).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:N_((function(){return Rg(a).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:N_((function(){return Rg(a).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;N_((function(){var e=o.mul(t.decay).add(i.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=n.mul(t.decay).add(i.mul(1-t.decay)),l=s.mul(t.momentum).add(i.mul(t.learningRate).div(e.sub(u.square().add(t.epsilon)).sqrt()));o.assign(e),n.assign(u),s.assign(l);var c=a.sub(l);a.assign(c)}else{var h=o.mul(t.decay).add(i.square().mul(1-t.decay)),f=s.mul(t.momentum).add(i.mul(t.learningRate).div(h.add(t.epsilon).sqrt()));o.assign(h),s.assign(f);var d=a.sub(f);a.assign(d)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&P_(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&P_(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&P_(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(_toConsumableArray(this.accumulatedMeanSquares),_toConsumableArray(this.accumulatedMoments)),this.centered&&t.push.apply(t,_toConsumableArray(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setWeights",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),a}(SS);OS.className="RMSProp",Fw(OS);var MS=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"sgd",value:function(e){return new ES(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new RS(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new OS(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new AS(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new IS(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new TS(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new DS(e,t)}}]),e}(),NS={sgd:MS.sgd,momentum:MS.momentum,adadelta:MS.adadelta,adagrad:MS.adagrad,rmsprop:MS.rmsprop,adamax:MS.adamax,adam:MS.adam},PS="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:function(e){return e()};function FS(){return new Promise((function(e){return PS((function(){return e()}))}))}function LS(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function zS(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2==1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function BS(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];a.push(r?e[0]/n:e[0]*n);for(var i=1;i<e.length;++i)a.push(i<=t.length?r?t[i-1]*e[i]:e[i]/t[i-1]:e[i]);return a}function WS(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function qS(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var VS=.3275911,US=.254829592,jS=-.284496736,HS=1.421413741,GS=-1.453152027,JS=1.061405429;function XS(){var e;dv().getBool("IS_TEST")||(e=console).warn.apply(e,arguments)}function KS(){var e;dv().getBool("IS_TEST")||(e=console).log.apply(e,arguments)}function ZS(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function YS(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function QS(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function $S(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function eI(e,t){return{real:e[2*t],imag:e[2*t+1]}}function tI(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function nI(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function rI(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function aI(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=Ig(e.shape),a=e.toFloat(),i=n.complex(a,r);return r.dispose(),a.dispose(),i}if(!Yv(e.dtype,t))return Uy.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var o=n.real(e),s=o.cast(t);return o.dispose(),s}if("int32"===t)return n.int(e);if("bool"===t){var u=yg(0,e.dtype),l=n.notEqual(e,u);return u.dispose(),l}throw new Error("Error in Cast: failed to cast ".concat(e.dtype," to ").concat(t))}function iI(e,t){return Uy.makeTensorFromDataId(e.dataId,t,e.dtype)}function oI(e,t,n){var r=(t-e)/(n-1),a=hy(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return gg(a,"float32")}function sI(e,t,n){var r=new Array(e.rank).fill(0),a=e.shape.slice();return t.map((function(t){var i=_toConsumableArray(a);i[n]=t;var o=e.slice(r,i);return r[n]+=t,o}))}function uI(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=Mg(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var l=e.locToIndex(s);a.values[i]=e.values[l]}return a.toTensor()}function lI(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=Jv(n,o*r),l=Jv("int32",o*r),c=0;c<o;c++){for(var h=c*s,f=e.subarray(h,h+s),d=[],p=0;p<f.length;p++)d.push({value:f[p],index:p});d.sort((function(e,t){return t.value-e.value}));for(var m=c*r,v=u.subarray(m,m+r),y=l.subarray(m,m+r),g=0;g<r;g++)v[g]=d[g].value,y[g]=d[g].index}var _=t.slice();return _[_.length-1]=r,[mg(u,_,n),mg(l,_,"int32")]}var cI,hI=function(){function e(t,n){_classCallCheck(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return _createClass(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),fI=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"time",value:function(e){return dI("time")}},{key:"read",value:function(e){return dI("read")}},{key:"readSync",value:function(e){return dI("readSync")}},{key:"numDataIds",value:function(){return dI("numDataIds")}},{key:"disposeData",value:function(e){return dI("disposeData")}},{key:"write",value:function(e,t,n){return dI("write")}},{key:"move",value:function(e,t,n,r){return dI("move")}},{key:"memory",value:function(){return dI("memory")}},{key:"floatPrecision",value:function(){return dI("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"batchMatMul",value:function(e,t,n,r){return dI("batchMatMul")}},{key:"fusedBatchMatMul",value:function(e){return _objectDestructuringEmpty(e),dI("fusedBatchMatMul")}},{key:"slice",value:function(e,t,n){return dI("slice")}},{key:"stridedSlice",value:function(e,t,n,r){return dI("stridedSlice")}},{key:"unstack",value:function(e,t){return dI("unstack")}},{key:"reverse",value:function(e,t){return dI("reverse")}},{key:"concat",value:function(e,t){return dI("concat")}},{key:"neg",value:function(e){return dI("neg")}},{key:"add",value:function(e,t){return dI("add")}},{key:"addN",value:function(e){return dI("addN")}},{key:"subtract",value:function(e,t){return dI("subtract")}},{key:"multiply",value:function(e,t){return dI("multiply")}},{key:"realDivide",value:function(e,t){return dI("realDivide")}},{key:"floorDiv",value:function(e,t){return dI("floorDiv")}},{key:"sum",value:function(e,t){return dI("sum")}},{key:"prod",value:function(e,t){return dI("prod")}},{key:"unsortedSegmentSum",value:function(e,t,n){return dI("unsortedSegmentSum")}},{key:"argMin",value:function(e,t){return dI("argMin")}},{key:"argMax",value:function(e,t){return dI("argMax")}},{key:"equal",value:function(e,t){return dI("equal")}},{key:"notEqual",value:function(e,t){return dI("notEqual")}},{key:"less",value:function(e,t){return dI("less")}},{key:"lessEqual",value:function(e,t){return dI("lessEqual")}},{key:"greater",value:function(e,t){return dI("greater")}},{key:"greaterEqual",value:function(e,t){return dI("greaterEqual")}},{key:"logicalNot",value:function(e){return dI("logicalNot")}},{key:"logicalAnd",value:function(e,t){return dI("logicalAnd")}},{key:"logicalOr",value:function(e,t){return dI("logicalOr")}},{key:"where",value:function(e){return dI("where")}},{key:"select",value:function(e,t,n){return dI("select")}},{key:"topk",value:function(e,t,n){return dI("topk")}},{key:"min",value:function(e,t){return dI("min")}},{key:"minimum",value:function(e,t){return dI("minimum")}},{key:"mod",value:function(e,t){return dI("mod")}},{key:"max",value:function(e,t){return dI("max")}},{key:"maximum",value:function(e,t){return dI("maximum")}},{key:"all",value:function(e,t){return dI("all")}},{key:"any",value:function(e,t){return dI("any")}},{key:"squaredDifference",value:function(e,t){return dI("squaredDifference")}},{key:"ceil",value:function(e){return dI("ceil")}},{key:"floor",value:function(e){return dI("floor")}},{key:"round",value:function(e){return dI("round")}},{key:"sign",value:function(e){return dI("sign")}},{key:"isNaN",value:function(e){return dI("isNaN")}},{key:"isInf",value:function(e){return dI("isInf")}},{key:"isFinite",value:function(e){return dI("isFinite")}},{key:"pow",value:function(e,t){return dI("pow")}},{key:"exp",value:function(e){return dI("exp")}},{key:"expm1",value:function(e){return dI("expm1")}},{key:"softmax",value:function(e,t){return dI("softmax")}},{key:"log",value:function(e){return dI("log")}},{key:"log1p",value:function(e){return dI("log1p")}},{key:"sqrt",value:function(e){return dI("sqrt")}},{key:"rsqrt",value:function(e){return dI("rsqrt")}},{key:"square",value:function(e){return dI("square")}},{key:"reciprocal",value:function(e){return dI("reciprocal")}},{key:"relu",value:function(e){return dI("relu")}},{key:"relu6",value:function(e){return dI("relu6")}},{key:"prelu",value:function(e,t){return dI("prelu")}},{key:"elu",value:function(e){return dI("elu")}},{key:"eluDer",value:function(e,t){return dI("eluDer")}},{key:"selu",value:function(e){return dI("selu")}},{key:"int",value:function(e){return dI("int")}},{key:"clip",value:function(e,t,n){return dI("clip")}},{key:"abs",value:function(e){return dI("abs")}},{key:"complexAbs",value:function(e){return dI("complexAbs")}},{key:"sigmoid",value:function(e){return dI("sigmoid")}},{key:"softplus",value:function(e){return dI("softplus")}},{key:"sin",value:function(e){return dI("sin")}},{key:"cos",value:function(e){return dI("cos")}},{key:"tan",value:function(e){return dI("tan")}},{key:"asin",value:function(e){return dI("asin")}},{key:"acos",value:function(e){return dI("acos")}},{key:"atan",value:function(e){return dI("atan")}},{key:"atan2",value:function(e,t){return dI("atan2")}},{key:"sinh",value:function(e){return dI("sinh")}},{key:"cosh",value:function(e){return dI("cosh")}},{key:"tanh",value:function(e){return dI("tanh")}},{key:"asinh",value:function(e){return dI("asinh")}},{key:"acosh",value:function(e){return dI("acosh")}},{key:"atanh",value:function(e){return dI("atanh")}},{key:"erf",value:function(e){return dI("erf")}},{key:"step",value:function(e,t){return dI("step")}},{key:"fusedConv2d",value:function(e){return _objectDestructuringEmpty(e),dI("fusedConv2d")}},{key:"conv2d",value:function(e,t,n){return dI("conv2d")}},{key:"conv2dDerInput",value:function(e,t,n){return dI("conv2dDerInput")}},{key:"conv2dDerFilter",value:function(e,t,n){return dI("conv2dDerFilter")}},{key:"fusedDepthwiseConv2D",value:function(e){return _objectDestructuringEmpty(e),dI("fusedDepthwiseConv2D")}},{key:"depthwiseConv2D",value:function(e,t,n){return dI("depthwiseConv2D")}},{key:"depthwiseConv2DDerInput",value:function(e,t,n){return dI("depthwiseConv2DDerInput")}},{key:"depthwiseConv2DDerFilter",value:function(e,t,n){return dI("depthwiseConv2DDerFilter")}},{key:"conv3d",value:function(e,t,n){return dI("conv3d")}},{key:"conv3dDerInput",value:function(e,t,n){return dI("conv3dDerInput")}},{key:"conv3dDerFilter",value:function(e,t,n){return dI("conv3dDerFilter")}},{key:"maxPool",value:function(e,t){return dI("maxPool")}},{key:"maxPoolBackprop",value:function(e,t,n,r){return dI("maxPoolBackprop")}},{key:"avgPool",value:function(e,t){return dI("avgPool")}},{key:"avgPoolBackprop",value:function(e,t,n){return dI("avgPoolBackprop")}},{key:"avgPool3d",value:function(e,t){return dI("avgPool3d")}},{key:"avgPool3dBackprop",value:function(e,t,n){return dI("avgPool3dBackprop")}},{key:"maxPool3d",value:function(e,t){return dI("maxPool3d")}},{key:"maxPool3dBackprop",value:function(e,t,n,r){return dI("maxPool3dBackprop")}},{key:"reshape",value:function(e,t){return dI("reshape")}},{key:"cast",value:function(e,t){return dI("cast")}},{key:"tile",value:function(e,t){return dI("tile")}},{key:"pad",value:function(e,t,n){return dI("pad")}},{key:"transpose",value:function(e,t){return dI("transpose")}},{key:"gather",value:function(e,t,n){return dI("gather")}},{key:"gatherND",value:function(e,t){return dI("gatherND")}},{key:"scatterND",value:function(e,t,n){return dI("scatterND")}},{key:"batchToSpaceND",value:function(e,t,n){return dI("batchToSpaceND")}},{key:"spaceToBatchND",value:function(e,t,n){return dI("spaceToBatchND")}},{key:"resizeBilinear",value:function(e,t,n,r){return dI("resizeBilinear")}},{key:"resizeBilinearBackprop",value:function(e,t,n){return dI("resizeBilinearBackprop")}},{key:"resizeNearestNeighbor",value:function(e,t,n,r){return dI("resizeNearestNeighbor")}},{key:"resizeNearestNeighborBackprop",value:function(e,t,n){return dI("resizeNearestNeighborBackprop")}},{key:"batchNorm",value:function(e,t,n,r,a,i){return dI("batchNorm")}},{key:"localResponseNormalization4D",value:function(e,t,n,r,a){return dI("localResponseNormalization4D")}},{key:"LRNGrad",value:function(e,t,n,r,a,i,o){return dI("LRNGrad")}},{key:"multinomial",value:function(e,t,n,r){return dI("multinomial")}},{key:"oneHot",value:function(e,t,n,r){return dI("oneHot")}},{key:"cumsum",value:function(e,t,n,r){return dI("cumsum")}},{key:"nonMaxSuppression",value:function(e,t,n,r,a){return dI("nonMaxSuppression")}},{key:"fft",value:function(e){return dI("fft")}},{key:"ifft",value:function(e){return dI("ifft")}},{key:"complex",value:function(e,t){return dI("complex")}},{key:"real",value:function(e){return dI("real")}},{key:"imag",value:function(e){return dI("imag")}},{key:"cropAndResize",value:function(e,t,n,r,a,i){return dI("cropAndResize")}},{key:"depthToSpace",value:function(e,t,n){return dI("depthToSpace")}},{key:"split",value:function(e,t,n){return dI("split")}},{key:"sparseToDense",value:function(e,t,n,r){return dI("sparseToDense")}},{key:"diag",value:function(e){return dI("diag")}},{key:"fill",value:function(e,t,n){return dI("fill")}},{key:"onesLike",value:function(e){return dI("onesLike")}},{key:"zerosLike",value:function(e){return dI("zerosLike")}},{key:"linspace",value:function(e,t,n){return dI("linspace")}},{key:"dispose",value:function(){return dI("dispose")}}]),e}();function dI(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"Did you forget to import the kernel?")}function pI(){return null==cI&&(cI=Uy.backend.epsilon()),cI}Dy.prototype.add=function(e){return this.throwIfDisposed(),z_(this,e)},Dy.prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Bw(this,e,t,n,r,a)},Dy.prototype.broadcastTo=function(e){return this.throwIfDisposed(),jw(this,e)},Dy.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Jb(this,e,t)},Dy.prototype.max=function(e,t){return this.throwIfDisposed(),gk(this,e,t)},Dy.prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Dy&&(e=[e]),Og([this].concat(_toConsumableArray(e)),t)},Dy.prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Kw(this,e,t,n,r,a,i)},Dy.prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),k_(this,e,t,n,r,a,i)},Dy.prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Zw(this,e,t,n,r,a)},Dy.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),$w(this,e,t)},Dy.prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),ek(this,e,t,n,r,a,i)},Dy.prototype.depthwiseConv2D=function(e,t,n,r,a,i){return R_("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),ek(this,e,t,n,r,a,i)},Dy.prototype.div=function(e){return this.throwIfDisposed(),Pb(this,e)},Dy.prototype.divNoNan=function(e){return this.throwIfDisposed(),lk(this,e)},Dy.prototype.dot=function(e){return this.throwIfDisposed(),ck(this,e)},Dy.prototype.equal=function(e){return this.throwIfDisposed(),hk(this,e)},Dy.prototype.greater=function(e){return this.throwIfDisposed(),dk(this,e)},Dy.prototype.greaterEqual=function(e){return this.throwIfDisposed(),pk(this,e)},Dy.prototype.less=function(e){return this.throwIfDisposed(),mk(this,e)},Dy.prototype.lessEqual=function(e){return this.throwIfDisposed(),vk(this,e)},Dy.prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),yk(this,e,t,n,r)},Dy.prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Ug(this,e,t,n)},Dy.prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),Iw(this,e,t,n)},Dy.prototype.notEqual=function(e){return this.throwIfDisposed(),bk(this,e)},Dy.prototype.pad=function(e,t){return this.throwIfDisposed(),$b(this,e,t)},Dy.prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Nk(this,e,t,n,r,a,i)},Dy.prototype.split=function(e,t){return this.throwIfDisposed(),o_(this,e,t)},Dy.prototype.squaredDifference=function(e){return this.throwIfDisposed(),Pk(this,e)},Dy.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Hg(this,e,t)},Dy.prototype.sub=function(e){return this.throwIfDisposed(),zb(this,e)},Dy.prototype.tile=function(e){return this.throwIfDisposed(),Bb(this,e)},Dy.prototype.transpose=function(e){return this.throwIfDisposed(),jb(this,e)},Iy=y;var mI=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),Object.setPrototypeOf(_assertThisInitialized(r),n.prototype),r}return n}(),vI=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),Object.setPrototypeOf(_assertThisInitialized(r),n.prototype),r}return n}(),yI=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),Object.setPrototypeOf(_assertThisInitialized(r),n.prototype),r}return n}(),gI=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),Object.setPrototypeOf(_assertThisInitialized(r),n.prototype),r}return n}(),_I=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,e),Object.setPrototypeOf(_assertThisInitialized(r),n.prototype),r}return n}();function bI(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function xI(e,t){if(!e)throw new _I(t)}function wI(e,t){var n,r=0,a=_createForOfIteratorHelper(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(s7){a.e(s7)}finally{a.f()}return r}function kI(e){return 1===e.length?e[0]:e}function CI(e){return Array.isArray(e)?e:[e]}function SI(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function II(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}Error;var DI={};function AI(e){if(null==e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function TI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"==typeof e){var i,o=e;if(o in n)i=n[o];else if(o in DI)i=DI[o];else if(null==(i=t[o]))throw new yI("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var s,u,l,c=e;if(null==c.className||null==c.config)throw new yI("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(c),".\n")+"'className' and 'config' must set.");var h,f,d=c.className;if(d in n?(h=(s=_slicedToArray(n[d],2))[0],f=s[1]):d in DI?(h=(u=_slicedToArray(DI.className,2))[0],f=u[1]):d in t&&(h=(l=_slicedToArray(t[d],2))[0],f=l[1]),null==h)throw new yI("Unknown ".concat(r,": ").concat(d,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=f){for(var p={},m=0,v=Object.keys(DI);m<v.length;m++){var y=v[m];p[y]=DI[y]}for(var g=0,_=Object.keys(n);g<_.length;g++){var b=_[g];p[b]=n[b]}c.config.customObjects=p;for(var x=Object.assign({},DI),w=0,k=Object.keys(n);w<k.length;w++){var C=k[w];DI[C]=n[C]}!function e(t){if(null!=t&&"object"==typeof t)if(Array.isArray(t))t.forEach((function(t){return e(t)}));else for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n],i=t[a];null!=i&&"object"==typeof i&&(Array.isArray(i)||"ndarray"!==i.type||"number"!=typeof i.value?e(i):t[a]=i.value)}}(c.config);var S=f(h,c.config,n,a);return DI=Object.assign({},x),S}for(var I=Object.assign({},DI),D=0,A=Object.keys(n);D<A.length;D++){var T=A[D];DI[T]=n[T]}var E=new h(c.config);return DI=Object.assign({},I),E}function EI(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function RI(e){if(null==e)return e;var t,n=[],r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(s7){r.e(s7)}finally{r.f()}return n}function OI(e){if(null==e)throw new yI("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function MI(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new yI("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function NI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return xI(n>=0),xI(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function PI(e,t){Array.isArray(e)?(r.assert(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return PI(e,"element ".concat(n+1," of ").concat(t))}))):r.assert(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(function e(t){return null===t?"null":Array.isArray(t)?"["+t.map((function(t){return e(t)})).join(",")+"]":"string"==typeof t?'"'.concat(t,'"'):"".concat(t)}(e),".")}))}function FI(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function LI(e,t){return N_((function(){return mb(r_(Tb(e,e),t,!0))}))}var zI=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getConfig",value:function(){return{}}}]),n}(l.Serializable),BI=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return _createClass(n,[{key:"apply",value:function(e){var t=this;return N_((function(){var n=LI(e,t.axis),r=J_(n,0,t.maxValue);return Tb(e,Pb(r,z_(pI(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(zI);BI.className="MaxNorm",l.registerClass(BI);var WI=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return _createClass(n,[{key:"apply",value:function(e){var t=this;return N_((function(){return Pb(e,z_(pI(),LI(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(zI);WI.className="UnitNorm",l.registerClass(WI);var qI=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return yC(e)}}]),n}(zI);qI.className="NonNeg",l.registerClass(qI);var VI=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return _createClass(n,[{key:"apply",value:function(e){var t=this;return N_((function(){var n=LI(e,t.axis),r=z_(Tb(t.rate,J_(n,t.minValue,t.maxValue)),Tb(1-t.rate,n));return Tb(e,Pb(r,z_(pI(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(zI);VI.className="MinMaxNorm",l.registerClass(VI);var UI={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function jI(e){return AI(e)}function HI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return TI(e,l.SerializationMap.getMap().classNameMap,t,"constraint")}function GI(e){return null==e?null:"string"==typeof e?HI({className:e in UI?UI[e]:e,config:{}}):e instanceof zI?e:HI(e)}var JI=["channelsFirst","channelsLast"],XI=["valid","same","causal"],KI=["max","avg"],ZI=["sum","mul","concat","ave"],YI=new Map;function QI(e){MI(JI,"DataFormat",e)}function $I(e){MI(XI,"PaddingMode",e)}function eD(e){MI(KI,"PoolMode",e)}var tD=[];function nD(e,t){tD.push(e);try{var n=t();return tD.pop(),n}catch(r){throw tD.pop(),r}}function rD(e){if(!oD(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===tD.length?"":tD.join("/")+"/")+e}function aD(e){if(!oD(e))throw new Error("Not a valid tensor name: '"+e+"'");YI.has(e)||YI.set(e,0);var t=YI.get(e);if(YI.set(e,YI.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return YI.set(n,1),n}return e}var iD=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function oD(e){return!!e.match(iD)}function sD(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function uD(e){return gg(e=Array.isArray(e)?new Float32Array(e):e)}function lD(e){return t_(uD(e)).dataSync()[0]}function cD(e){return gk(uD(e)).dataSync()[0]}function hD(e,t){if(t<e)throw new yI("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function fD(e,t){return e.asType(t)}function dD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(n)}function pD(e,t,n){return N_((function(){switch(e.rank){case 1:return hx(e,t,n);case 2:return fx(e,[t,0],[n,e.shape[1]]);case 3:return dx(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return px(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return cx(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return cx(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new yI("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function mD(e,t,n){return N_((function(){switch(e.rank){case 1:return hx(e,t,n);case 2:return fx(e,[0,t],[e.shape[0],n]);case 3:return dx(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return px(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new yI("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function vD(e,t,n,r){return N_((function(){switch(e.rank){case 1:return hx(e,t,n);case 2:switch(r){case 1:return pD(e,t,n);case 2:return mD(e,t,n);default:throw new yI("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return pD(e,t,n);case 2:return dx(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return mD(e,t,n);default:throw new yI("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return pD(e,t,n);case 2:return px(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return px(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return mD(e,t,n);default:throw new yI("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new yI("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function yD(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),Og(e,n)}function gD(e,t){switch(e.rank){case 1:return Hw([e,t]);case 2:return Gw([e,t],0);case 3:return Jw([e,t],0);case 4:return Xw([e,t],0);default:throw new yI("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function _D(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new yI("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return Bb(e,t)}function bD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return Ok(e,t,n,r,a)}function xD(e,t,n,r){if(e.rank<2||t.rank<2)throw new gI("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new gI("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank)return v.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?CD(e.rank,r,"channelsLast"):null,activation:n});var a=e.shape.slice(),i=a.pop();e=e.reshape([-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),l=[].concat(_toConsumableArray(o),[s]),c=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=t.transpose(c).reshape([u,-1]);var h=[].concat(_toConsumableArray(a),_toConsumableArray(l));return v.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?CD(e.rank,r,"channelsLast"):null,activation:n}).reshape(h)}function wD(e,t,n){return N_((function(){return t=Array.isArray(t)?gg(t,"int32"):t.toInt(),jk(e,t,n)}))}function kD(e){return Tb(e,e)}function CD(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new yI("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1,1,1]:[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,1,1,r[0]]:[1].concat(r))}else if(4===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1,1]:[1,r[2],r[0],r[1]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,1,r[0]]:[1].concat(r))}else if(3===e){if("channelsFirst"===n)return t.reshape(1===r.length?[1,r[0],1]:[1,r[1],r[0]]);if("channelsLast"===n)return t.reshape(1===r.length?[1,1,r[0]]:[1].concat(r))}else if(e<3)return t;throw new yI("Unsupported input rank by biasAdd: ".concat(t.rank))}function SD(e,t,n){return N_((function(){return null==n&&(n="channelsLast"),QI(n),e.add(CD(e.rank,t,n))}))}function ID(e,t,n,r){return N_((function(){return PC(e,t,n,r)}))}function DD(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var AD=["fanIn","fanOut","fanAvg"],TD=["normal","uniform","truncatedNormal"],ED=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(l.Serializable),RD=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e,t){return Ig(e,t)}}]),n}(ED);RD.className="Zeros",l.registerClass(RD);var OD=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e,t){return Sg(e,t)}}]),n}(ED);OD.className="Ones",l.registerClass(OD);var MD=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),r=t.call(this),"object"!=typeof e)throw new yI("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new yI("config must have value set but got ".concat(e));return r.value=e.value,_possibleConstructorReturn(r)}return _createClass(n,[{key:"apply",value:function(e,t){var n=this;return N_((function(){return Tb(yg(n.value),Sg(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(ED);MD.className="Constant",l.registerClass(MD);var ND=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return _createClass(n,[{key:"apply",value:function(e,t){return Mk(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(ED);ND.className="RandomUniform",l.registerClass(ND);var PD=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return _createClass(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gI("randomNormal does not support dType ".concat(t,"."));return bD(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(ED);PD.className="RandomNormal",l.registerClass(PD);var FD=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return _createClass(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gI("truncatedNormal does not support dType ".concat(t,"."));return Fk(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(ED);FD.className="TruncatedNormal",l.registerClass(FD);var LD=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return _createClass(n,[{key:"apply",value:function(e,t){var n=this;return N_((function(){if(2!==e.length||e[0]!==e[1])throw new yI("Identity matrix initializer can only be used for 2D square matrices.");return Tb(n.gain,fk(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(ED);LD.className="Identity",l.registerClass(LD);var zD=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,a;if(_classCallCheck(this,n),r=t.call(this),e.scale<0)throw new yI("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,MI(AD,"FanMode",r.mode),r.distribution=null==e.distribution?"normal":e.distribution,a=r.distribution,MI(TD,"Distribution",a),r.seed=e.seed,_possibleConstructorReturn(r)}return _createClass(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(QI(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=sD(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=sD(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=sD(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if(i/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,a):Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gI("".concat(this.getClassName()," does not support dType ").concat(t,"."));return Fk(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return Mk(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(ED);zD.className="VarianceScaling",l.registerClass(zD);var BD=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return _createClass(n,[{key:"getClassName",value:function(){return zD.className}}]),n}(zD);BD.className="GlorotUniform",l.registerClass(BD);var WD=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return _createClass(n,[{key:"getClassName",value:function(){return zD.className}}]),n}(zD);WD.className="GlorotNormal",l.registerClass(WD);var qD=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return _createClass(n,[{key:"getClassName",value:function(){return zD.className}}]),n}(zD);qD.className="HeNormal",l.registerClass(qD);var VD=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return _createClass(n,[{key:"getClassName",value:function(){return zD.className}}]),n}(zD);VD.className="HeUniform",l.registerClass(VD);var UD=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return _createClass(n,[{key:"getClassName",value:function(){return zD.className}}]),n}(zD);UD.className="LeCunNormal",l.registerClass(UD);var jD=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return _createClass(n,[{key:"getClassName",value:function(){return zD.className}}]),n}(zD);jD.className="LeCunNormal",l.registerClass(jD);var HD=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new gI("Random seed is not implemented for Orthogonal Initializer yet.");return _possibleConstructorReturn(r)}return _createClass(n,[{key:"apply",value:function(e,t){var n=this;return N_((function(){if(2!==e.length)throw new gI("The Orthogonal Initializer does not support non-2D shapes yet.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=bD(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=p.gramSchmidt(t);return e[0]>e[1]&&(r=r.transpose()),Tb(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(ED);HD.className="Orthogonal",l.registerClass(HD);var GD={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function JD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return TI(e,l.SerializationMap.getMap().classNameMap,t,"initializer")}function XD(e){return AI(e)}function KD(e){if("string"==typeof e){var t=e in GD?GD[e]:e;if("GlorotNormal"===t)return new WD;if("GlorotUniform"===t)return new BD;if("HeNormal"===t)return new qD;if("HeUniform"===t)return new VD;if("LeCunNormal"===t)return new UD;if("LeCunUniform"===t)return new jD;var n={};return n.className=t,n.config={},JD(n)}return e instanceof ED?e:JD(e)}var ZD=0;function YD(){return ZD++}var QD={};function $D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in QD||(QD[e]=0),QD[e]+=1,e+QD[e].toString()}function eA(e){return Array.isArray(e)&&Array.isArray(e[0])}function tA(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function nA(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new yI("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function rA(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new yI("Expected exactly 1 Shape; got ".concat(e.length))}return e}function aA(e){var t,n=0,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n+=0===a.shape.length?1:a.shape.reduce((function(e,t){return e*t}))}}catch(s7){r.e(s7)}finally{r.f()}return n}var iA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Variable",a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;_classCallCheck(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=YD(),this.originalName=rD(r=null==r?"Variable":r),this.name=aD(this.originalName),this.trainable_=a,this.constraint=i,this.val=Cg(t,this.trainable_,this.name,this.dtype)}return _createClass(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function oA(e){return e.map((function(e){return e.read()}))}function sA(e){e.forEach((function(e){e[0].write(e[1])}))}var uA,lA=function e(t){_classCallCheck(this,e),this.dtype=t.dtype,this.shape=t.shape,this.ndim=null!=t.shape?t.shape.length:t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}},cA=function e(t,n,r,a,i,o,s){_classCallCheck(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=YD(),null!=o&&(this.originalName=rD(o),this.name=aD(this.originalName)),this.rank=n.length},hA=0,fA=function(){function e(t,n){_classCallCheck(this,e),this.callArgs=n,this.id=hA++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=_createForOfIteratorHelper(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(s7){a.e(s7)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return _createClass(e,[{key:"getConfig",value:function(){var e,t=[],n=_createForOfIteratorHelper(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(null!=r?r.name:null)}}catch(s7){n.e(s7)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),dA=0,pA=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=dA++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=SI(i)+"_"+$D(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return e.initialWeights=null!=r.weights?r.weights:null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return _createClass(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new vI("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new yI("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return kI(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return kI(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=CI(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=CI(this.inputSpec);if(e.length!==t.length)throw new yI("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new yI("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new yI("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new yI("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new yI("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),l=a.axes[s],c=u>=0?o[u]:o[o.length+u];if(null!=l&&-1===[l,null].indexOf(c))throw new yI("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(l," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var h=0;h<a.shape.length;++h){var f=a.shape[h],d=r.shape[h];if(null!=f&&null!=d&&f!==d)throw new yI("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=CI(e),i=!0,o=_createForOfIteratorHelper(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof cA)){i=!1;break}}}catch(s7){o.e(s7)}finally{o.f()}var s,u=!0,l=_createForOfIteratorHelper(a);try{for(l.s();!(s=l.n()).done;){if(s.value instanceof cA){u=!1;break}}}catch(s7){l.e(s7)}finally{l.f()}if(i===u)throw new yI("Arguments to apply() must be all SymbolicTensors or all Tensors");return nD(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=_createForOfIteratorHelper(CI(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(s7){o.e(s7)}finally{o.f()}n.build(kI(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var l,c=n.call(e,t),h=[],f=_createForOfIteratorHelper(CI(c));try{for(f.s();!(l=f.n()).done;){var d=l.value;-1!==a.indexOf(d)&&(d=d.clone()),h.push(d)}}catch(s7){f.e(s7)}finally{f.f()}if(c=kI(h),null!=n.activityRegularizer)throw new gI("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}var p,m=function(e){var t,n=[],r=_createForOfIteratorHelper(e=CI(e));try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(s7){r.e(s7)}finally{r.f()}return kI(n)}(e),v=n.computeOutputShape(m);if(n.warnOnIncompatibleInputShape(Array.isArray(e)?m[0]:m),p=null!=v&&v.length>0&&Array.isArray(v[0])?v.map((function(r,a){return new cA("float32",r,n,CI(e),t,n.name,a)})):new cA("float32",v,n,CI(e),t,n.name),n.addInboundNode(e,p,null,null,m,v,t),n._refCount++,null!=n.activityRegularizer)throw new gI("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return p}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"countParams",value:function(){if(!this.built)throw new vI("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return aA(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return oA(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;N_((function(){var n=t.weights;if(n.length!==e.length)throw new yI('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var a=[],i=oA(n),o=0;o<i.length;++o){var s=i[o],u=n[o],l=e[o];if(!r.arraysEqual(s.shape,l.shape))throw new yI("Layer weight shape ".concat(s.shape," ")+"not compatible with provided weight shape ".concat(l.shape));a.push([u,l])}sA(a)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o){if(-1!==this._addedWeightNames.indexOf(e))throw new yI("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=KD("zeros"));var s=r.apply(t,n),u=new iA(s,n,e,i,o);return s.dispose(),null!=a&&this.addLoss((function(){return a.apply(u.read())})),null==i&&(i=!0),i?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=CI(e),null!=this._losses&&(t=this.losses).push.apply(t,_toConsumableArray(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=CI(e);t=CI(t),n=CI(n),r=CI(r),a=tA(a),i=tA(i);var u,l=[],c=[],h=[],f=_createForOfIteratorHelper(s);try{for(f.s();!(u=f.n()).done;){var d=u.value;l.push(d.sourceLayer),c.push(d.nodeIndex),h.push(d.tensorIndex)}}catch(s7){f.e(s7)}finally{f.f()}new fA({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:h,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new mI("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new mI("Layer ".concat(this.name)+" is not connected, no input to return.");return kI(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new mI("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new mI("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return kI(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new mI("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=_createForOfIteratorHelper(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(s7){n.e(s7)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new mI("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(l.Serializable),mA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:$D("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new yI("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new yI("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new yI("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new cA(r.dtype,r.batchInputShape,_assertThisInitialized(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new fA({outboundLayer:_assertThisInitialized(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),_possibleConstructorReturn(r)}return _createClass(n,[{key:"apply",value:function(e,t){throw new yI("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(pA);function vA(e){return yA.apply(this,arguments)}function yA(){return(yA=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!=typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=10;break}return e.next=7,Promise.all(n);case 7:for(u=e.sent,l=0;l<u.length;++l)t[r[l]]=u[l][0];P_(a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gA(e){if(null!=e)for(var t in e){var n=e[t];"number"!=typeof n&&n.dispose()}}mA.className="InputLayer",l.registerClass(mA),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(uA||(uA={}));var _A=function(){function e(){_classCallCheck(this,e),this.validationData=null}var t,n,r,a,i,o;return _createClass(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})},{key:"onEpochEnd",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"onBatchBegin",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"onBatchEnd",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"onTrainBegin",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"onTrainEnd",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"setModel",value:function(e){}}]),e}(),bA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;_classCallCheck(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}var t,n,r,a,i,o;return _createClass(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=_createForOfIteratorHelper(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(s7){n.e(s7)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=_createForOfIteratorHelper(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(s7){n.e(s7)}finally{n.f()}}},{key:"onEpochBegin",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=_createForOfIteratorHelper(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return o.apply(this,arguments)})},{key:"onEpochEnd",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=_createForOfIteratorHelper(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return i.apply(this,arguments)})},{key:"onBatchBegin",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=_createForOfIteratorHelper(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return a.apply(this,arguments)})},{key:"onBatchEnd",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=_createForOfIteratorHelper(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return r.apply(this,arguments)})},{key:"onTrainBegin",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=_createForOfIteratorHelper(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e){return n.apply(this,arguments)})},{key:"onTrainEnd",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=_createForOfIteratorHelper(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e){return t.apply(this,arguments)})}]),e}(),xA=function(e){_inherits(i,e);var t,n,r,a=_createSuper(i);function i(){return _classCallCheck(this,i),a.call(this)}return _createClass(i,[{key:"onEpochBegin",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"onBatchEnd",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"==typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=N_((function(){return z_(o.totals[e],Tb(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"onEpochEnd",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){r=_createForOfIteratorHelper(this.params.metrics);try{for(i=function(){var e=a.value;null!=o.totals[e]&&("number"==typeof o.totals[e]?n[e]=o.totals[e]/o.seen:N_((function(){var t=Tb(Pb(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),F_(n[e])})))},r.s();!(a=r.n()).done;)i()}catch(s7){r.e(s7)}finally{r.f()}}case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),i}(_A),wA=function(e){_inherits(i,e);var t,n,r,a=_createSuper(i);function i(){return _classCallCheck(this,i),a.apply(this,arguments)}return _createClass(i,[{key:"onTrainBegin",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"onEpochEnd",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"syncData",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!=typeof i[o]&&(t.push(i[o].data()),n.push(a),r.push(o));return e.next=4,Promise.all(t);case 4:for(s=e.sent,u=0;u<s.length;++u)this.history[n[u]][r[u]].dispose(),this.history[n[u]][r[u]]=s[u][0];case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(_A),kA=function(e){_inherits(c,e);var t,n,a,i,o,s,u,l=_createSuper(c);function c(e,t){var n,a,i,o,s;if(_classCallCheck(this,c),(n=l.call(this)).currentEpoch=0,n.yieldEvery=t||"auto","auto"===n.yieldEvery&&(n.yieldEvery=125),"never"===n.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return r.isNumber(n.yieldEvery)&&(n.maybeWait=(a=n.maybeWait.bind(_assertThisInitialized(n)),i=n.yieldEvery,s=r.now(),function(){var e=r.now();return e-s<i||(s=e,o=a.apply(void 0,arguments)),o})),n.trainBegin=e.onTrainBegin,n.trainEnd=e.onTrainEnd,n.epochBegin=e.onEpochBegin,n.epochEnd=e.onEpochEnd,n.batchBegin=e.onBatchBegin,n.batchEnd=e.onBatchEnd,n.yield=e.onYield,_possibleConstructorReturn(n)}return _createClass(c,[{key:"maybeWait",value:(u=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],e.t0=null!=this.yield,!e.t0){e.next=6;break}return e.next=5,vA(r);case 5:a.push(this.yield(t,n,r));case 6:return a.push(FS()),e.next=9,Promise.all(a);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return u.apply(this,arguments)})},{key:"onEpochBegin",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,e.t0=null!=this.epochBegin,!e.t0){e.next=7;break}return e.next=5,vA(n);case 5:return e.next=7,this.epochBegin(t,n);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"onEpochEnd",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],e.t0=null!=this.epochEnd,!e.t0){e.next=6;break}return e.next=5,vA(n);case 5:r.push(this.epochEnd(t,n));case 6:return"epoch"===this.yieldEvery&&r.push(FS()),e.next=9,Promise.all(r);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"onBatchBegin",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.batchBegin,!e.t0){e.next=6;break}return e.next=4,vA(n);case 4:return e.next=6,this.batchBegin(t,n);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"onBatchEnd",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],e.t0=null!=this.batchEnd,!e.t0){e.next=6;break}return e.next=5,vA(n);case 5:a.push(this.batchEnd(t,n));case 6:return"batch"===this.yieldEvery?a.push(FS()):r.isNumber(this.yieldEvery)&&a.push(this.maybeWait(this.currentEpoch,t,n)),e.next=9,Promise.all(a);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"onTrainBegin",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.trainBegin,!e.t0){e.next=6;break}return e.next=4,vA(t);case 4:return e.next=6,this.trainBegin(t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"onTrainEnd",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.trainEnd,!e.t0){e.next=6;break}return e.next=4,vA(t);case 4:return e.next=6,this.trainEnd(t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),c}(_A);function CA(e,t){return null==e&&(e={}),e instanceof _A?[e]:Array.isArray(e)&&e[0]instanceof _A?e:CI(e).map((function(e){return new kA(e,t)}))}var SA=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"registerCallbackConstructor",value:function(t,n){r.assert(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors)e.constructors[+n].forEach((function(e){if(e===t)throw new yI("Duplicate callback constructor.")}))}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,_toConsumableArray(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function IA(e,t,n,r,a,i,o,s,u){var l=new wA,c=[new xA].concat(_toConsumableArray(SA.createCallbacks(t)));null!=e&&c.push.apply(c,_toConsumableArray(e)),c.push(l);var h=new bA(c);return h.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:h,history:l}}function DA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return TI(e,l.SerializationMap.getMap().classNameMap,t,"layer",n)}function AA(e,t){return N_((function(){"float32"!==e.dtype&&(e=e.asType("float32"));var n=r_(kD(e),t,!0),r=Dg(n.shape,pI()),a=mb(kb(n,r));return Pb(e,a)}))}function TA(e,t){return N_((function(){return e_(kD(zb(t,e)),-1)}))}function EA(e,t){return N_((function(){return e_(B_(zb(t,e)),-1)}))}function RA(e,t){return N_((function(){var n=zb(e,t),r=J_(B_(e),pI(),Number.MAX_VALUE),a=B_(Pb(n,r));return Tb(100,e_(a,-1))}))}function OA(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return N_((function(){if(n)t=bC(t);else{var r=r_(t,t.shape.length-1,!0);t=Pb(t,r)}return t=J_(t,pI(),1-pI()),rb(r_(Tb(e.toFloat(),eb(t)),t.shape.length-1))}))}function MA(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return N_((function(){var r,a,i=$_((r=e,a=[sD(r.shape)],r.reshape(a))).toInt(),o=(t=J_(t,pI(),1-pI())).shape;return OA(Iw(i,o[o.length-1]).reshape(o),t,n)}))}function NA(e,t){return N_((function(){var n;return n=J_(t,pI(),1-pI()),n=eb(Pb(n,zb(1,n))),e_(function(e,t){if(!r.arraysEqual(e.shape,t.shape))throw new yI("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return N_((function(){var n=t.relu(),r=t.abs().neg();return n.sub(t.mul(e)).add(r.exp().log1p())}))}(e,n),-1)}))}function PA(e,t){return N_((function(){var n=AA(e,-1),r=AA(t,-1),a=Tb(n,r);return rb(r_(a,-1))}))}SA.constructors={};var FA={meanSquaredError:TA,meanAbsoluteError:EA,meanAbsolutePercentageError:RA,meanSquaredLogarithmicError:function(e,t){return N_((function(){var n=J_(t,pI(),Number.MAX_VALUE),r=eb(z_(1,n)),a=J_(e,pI(),Number.MAX_VALUE),i=eb(z_(1,a));return e_(kD(zb(r,i)),-1)}))},squaredHinge:function(e,t){return N_((function(){var n=kb(0,zb(1,Tb(e,t)));return e_(kD(n),-1)}))},hinge:function(e,t){return N_((function(){var n=kb(0,zb(1,Tb(e,t)));return e_(n,-1)}))},categoricalHinge:function(e,t){return N_((function(){var n=r_(Tb(e,t),-1),r=gk(Tb(zb(1,e),t),-1);return kb(0,z_(1,zb(r,n)))}))},logcosh:function(e,t){return N_((function(){var n=Math.log(2),r=zb(t,e),a=zb(z_(r,pb(Tb(-2,r))),n);return e_(a,-1)}))},categoricalCrossentropy:OA,sparseCategoricalCrossentropy:MA,binaryCrossentropy:NA,kullbackLeiblerDivergence:function(e,t){return N_((function(){var n=J_(e,pI(),1),r=J_(t,pI(),1);return r_(Tb(e,eb(Pb(n,r))),-1)}))},poisson:function(e,t){return N_((function(){var n=eb(z_(pI(),t));return e_(zb(t,Tb(e,n)),-1)}))},cosineProximity:PA};function LA(e){if("string"==typeof e){if(e in FA)return FA[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new yI(t)}return e}function zA(e,t){return N_((function(){var n=Tb(.5,Eg(t)),r=fD(dk(t,n),e.dtype);return e_(hk(e,r),-1)}))}function BA(e,t){return N_((function(){return fD(hk(Yg(e,-1),Yg(t,-1)),"float32")}))}function WA(e,t){return NA(e,t)}function qA(e,t){return e.rank===t.rank&&(e=e.squeeze([e.rank-1])),(t=t.argMax(-1)).dtype!==e.dtype&&(t=t.asType(e.dtype)),hk(e,t).asType("float32")}var VA=OA,UA=MA,jA={binaryAccuracy:zA,categoricalAccuracy:BA,precision:function(e,t){return N_((function(){var n=function(e,t){return N_((function(){return rk(e.equal(1),t.equal(1)).sum().cast("float32")}))}(e,t),r=function(e,t){return N_((function(){return rk(e.equal(0),t.equal(1)).sum().cast("float32")}))}(e,t),a=n.add(r);return sk(dk(a,0),n.div(a),0).cast("float32")}))},categoricalCrossentropy:VA,sparseCategoricalCrossentropy:UA,mse:TA,MSE:TA,mae:EA,MAE:EA,mape:RA,MAPE:RA,cosine:PA};function HA(e){if("string"==typeof e&&e in jA)return jA[e];if("string"!=typeof e&&null!=e)return e;throw new yI("Unknown metric ".concat(e))}function GA(e){if(xI(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"==typeof e)return e;for(var t,n=0,r=Object.keys(FA);n<r.length;n++){var a=r[n];if(FA[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(jA);i<o.length;i++){var s=o[i];if(jA[s]===e){t=s;break}}return void 0!==t?t:e.name}function JA(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!function e(t){if(null===t)return!0;if("object"==typeof t){if(Object.getPrototypeOf(t)===Object.prototype){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];if("string"!=typeof a)return!1;if(!e(t[a]))return!1}return!0}if(Array.isArray(t)){var i,o=_createForOfIteratorHelper(t);try{for(o.s();!(i=o.n()).done;){if(!e(i.value))return!1}}catch(s7){o.e(s7)}finally{o.f()}return!0}return!1}var s=typeof t;return"string"===s||"number"===s||"boolean"===s}(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>1048576&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.")}}function XA(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function KA(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(s7){r="multiple"}XA(["".concat(e.name," (").concat(e.getClassName(),")"),r,e.countParams().toString()],t,n)}function ZA(e,t,n,r){var a;try{a=JSON.stringify(e.outputShape)}catch(s7){a="multiple"}var i,o=[],s=_createForOfIteratorHelper(e.inboundNodes);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(var l=0;l<u.inboundLayers.length;++l)o.push("".concat(u.inboundLayers[l].name,"[").concat(u.nodeIndices[l],"][").concat(u.tensorIndices[l],"]"))}}catch(s7){s.e(s7)}finally{s.f()}var c=e.name,h=e.getClassName(),f=0===o.length?"":o[0];XA(["".concat(c," (").concat(h,")"),a,e.countParams().toString(),f],t,r);for(var d=1;d<o.length;++d)XA(["","","",o[d]],t,r)}function YA(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function QA(e,t){if(null===e)return null;if("string"==typeof e)return II(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];YA(t,a,i)?n.push(i):n.push(QA(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l];if("name"===l&&"string"==typeof c)o[l]=c;else{var h=II(l);o[h]=QA(c,h)}}return o}var $A=function(){function e(t){if(_classCallCheck(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(s7){a.e(s7)}finally{a.f()}}}return _createClass(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new yI("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Pg(t,e.dtype)}catch(s7){throw new yI("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof cA){if(null==this.id2Value[e.id])throw new yI("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new yI("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof cA){if(null==this.id2Value[e.id])throw new yI("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new yI("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&P_(this.id2Mask)}}]),e}(),eT={},tT={};function nT(e,t,n,a){var i,o=null!=n&&n.training,s=Array.isArray(e),u=s?e:[e],l=u.map((function(e){return e.name})),c=[],h=t.names(),f=_createForOfIteratorHelper(l);try{for(f.s();!(i=f.n()).done;){var d=i.value;-1!==h.indexOf(d)?c.push(t.getValue(d)):c.push(null)}}catch(s7){f.e(s7)}finally{f.f()}null!=a&&(a.maxNumTensors=-1/0,a.minNumTensors=1/0);var p,m,v=l.join(",")+"|"+t.names().join(",");if(null==eT[v]){var y=function(e,t){r.assert(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],a={};if(1===e.length){var i=aT(e[0],t);n=i.sorted,a=i.recipientMap}else{var o,s=new Set,u=_createForOfIteratorHelper(e);try{for(u.s();!(o=u.n()).done;){var l,c=aT(o.value,t),h=c.sorted,f=c.recipientMap,d=_createForOfIteratorHelper(h);try{for(d.s();!(l=d.n()).done;){var p=l.value;s.has(p.name)||(n.push(p),s.add(p.name))}}catch(s7){d.e(s7)}finally{d.f()}var m=function(e){null==a[e]&&(a[e]=new Set),f[e].forEach((function(t){return a[e].add(t)}))};for(var v in f)m(v)}}catch(s7){u.e(s7)}finally{u.f()}}return{sorted:n,recipientCounts:rT(a)}}(u,t);p=y.sorted,m=y.recipientCounts,eT[v]=p,tT[v]=m}p=eT[v],m={},o||Object.assign(m,tT[v]);for(var g=new $A(t),_=0;_<p.length;++_){if(null!=a){var b=M_().numTensors;b>a.maxNumTensors&&(a.maxNumTensors=b),b<a.minNumTensors&&(a.minNumTensors=b)}var x=p[_],w=x.sourceLayer;if(!(w instanceof mA)){var k,C=[],S=[],I=[],D=!1,A=_createForOfIteratorHelper(x.inputs);try{for(A.s();!(k=A.n()).done;){var T=k.value,E=g.getValue(T),R=g.getMask(T);C.push(E),S.push(R),null!=R&&(D=!0),o||(m[T.name]--,0!==m[T.name]||t.hasKey(T)||-1!==l.indexOf(T.name)||E.isDisposed||!0===T.sourceLayer.stateful||I.push(E))}}catch(s7){A.e(s7)}finally{A.f()}D&&((n=n||{}).mask=S[0]);var O=CI(w.apply(C,n)),M=null;w.supportsMasking&&(M=w.computeMask(C,S));for(var N=iT(x),P=Array.isArray(N)?N:[N],F=0;F<P.length;++F){g.hasKey(P[F])||g.add(P[F],O[F],Array.isArray(M)?M[0]:M);var L=l.indexOf(P[F].name);-1!==L&&(c[L]=O[F])}o||P_(I)}}return g.disposeMasks(),s?c:c[0]}function rT(e){var t={};for(var n in e)t[n]=e[n].size;return t}function aT(e,t){var n,r=new Set,a=[],i={},o=_createForOfIteratorHelper(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(s7){o.e(s7)}finally{o.f()}var u=[],l=[];for(u.push(e);u.length>0;){var c=u[u.length-1];if(r.has(c.name))u.pop();else{var h=l[l.length-1]===u.length-1;if(0===c.inputs.length||h)u.pop(),a.push(c),r.add(c.name),h&&l.pop();else{l.push(u.length-1);var f,d=_createForOfIteratorHelper(c.inputs);try{for(d.s();!(f=d.n()).done;){var p=f.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(c.name),r.has(p.name)||u.push(p)}}catch(s7){d.e(s7)}finally{d.f()}}}}return{sorted:a,recipientMap:i}}function iT(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=_createForOfIteratorHelper(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(s7){i.e(s7)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function oT(e,t){return function(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided classWeight is an array of ".concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){a.push(t in e?e[t]:null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so classWeight must be either an array with "+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided classWeight not understood: ".concat(JSON.stringify(e)))}(e,t)}function sT(e,t,n,r){return uT.apply(this,arguments)}function uT(){return(uT=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r,a){var i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=12;break}return i=N_((function(){if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1)return t.argMax(1);if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),P_(i),s=[],e.abrupt("return",(o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),gg(s,"float32")));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lT(e,t){return Tb(e,t)}function cT(e,t){var n,a;n=t.xs,a=t.ys,r.assert(null!=n&&null!=a,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=hT("input",e.inputNames,n),o=hT("output",e.outputNames,a),s=i[0].shape[0];r.assert(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),r.assert(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){r.assert(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},l=0;l<i.length;l++)u(l);for(var c=function(t){r.assert(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},h=0;h<o.length;h++)c(h);return{xs:i,ys:o}}function hT(e,t,n){if(n instanceof Dy)return[n];if(Array.isArray(n))return r.assert(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var a,i=[],o=_createForOfIteratorHelper(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(null==n[s])throw new yI("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(s,"'."));i.push(n[s])}}catch(s7){o.e(s7)}finally{o.f()}return i}function fT(e){return"function"==typeof e.iterator}function dT(e){r.assert(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function pT(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return pD(e,t,n-t)})):pD(e,t,n-t)}function mT(e,t){return N_((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return mT(e,t)})):wD(e,"int32"===t.dtype?t:t.toInt())}))}function vT(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function yT(e){var t=[];e instanceof Dy&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(dD(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function gT(e,t){if(null!=e){var n=[];if(t instanceof Dy)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t)n.push(t[r].id);var a=[];if(e instanceof Dy)-1===n.indexOf(e.id)&&a.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&a.push(e)}));else if(null!=e)for(var i in e){var o=e[i];-1===n.indexOf(o.id)&&a.push(o)}a.forEach((function(e){e.isDisposed||e.dispose()}))}}function _T(e){return Array.isArray(e)}function bT(e){return!function(e){return e instanceof Dy}(e)&&!_T(e)}function xT(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(_T(e)&&e.length>0)o=!0;else if(bT(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new yI("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(bT(e)){e=e,r=[];var u,l=_createForOfIteratorHelper(t);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(null==e[c])throw new yI('No data provided for "'.concat(c,'". Need data for each key in: ')+"".concat(t));r.push(e[c])}}catch(s7){l.e(s7)}finally{l.f()}}else if(_T(e)){if((e=e).length!==t.length)throw new yI("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(e=e,t.length>1)throw new yI("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=yT(r),null!=n)for(var h=0;h<t.length;++h)if(null!=n[h]){var f=r[h];if(f.shape.length!==n[h].length)throw new yI("Error when checking ".concat(i,": expected ").concat(t[h]," ")+"to have ".concat(n[h].length," dimension(s). but got array with ")+"shape ".concat(f.shape));for(var d=0;d<n[h].length;++d)if(0!==d||a){var p=f.shape[d],m=n[h][d];if(null!=m&&m>=0&&p!==m)throw new yI("Error when checking ".concat(i,": expected ").concat(t[h]," ")+"to have shape [".concat(n[h],"], but got array with shape ")+"[".concat(f.shape,"]."))}}return r}function wT(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new yI("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new yI("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new yI("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var l=s.shape[u],c=n[o][u];if(null!=c&&c!==l)throw new yI("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var kT=function(e){_inherits(c,e);var t,n,a,i,o,u,l=_createSuper(c);function c(e){var t;return _classCallCheck(this,c),(t=l.call(this,e)).isTraining=!1,t}return _createClass(c,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new yI("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=function(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,_toConsumableArray(s))}if(t){var u,l=_createForOfIteratorHelper(e.layers);try{for(l.s();!(u=l.n()).done;){var c,h=u.value,f=!1,d=_createForOfIteratorHelper(h.inboundNodes);try{for(d.s();!(c=d.n()).done;){var p=c.value;if(-1!==r.indexOf(p)){if(f){t=!1;break}f=!0}}}catch(s7){d.e(s7)}finally{d.f()}if(!t)break}}catch(s7){l.e(s7)}finally{l.f()}}return t}(e),o=["Layer (type)","Output shape","Param #"];if(i?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,_toConsumableArray(e.nodesByDepth[s]))}a("_".repeat(t)),XA(o,n,a),a("=".repeat(t));for(var l=e.layers,c=0;c<l.length;++c)i?KA(l[c],n,a):ZA(l[c],n,r,a),a((c===l.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var h=function(e){return aA(null!=e.collectedTrainableWeights?e.collectedTrainableWeights:e.trainableWeights)}(e),f=aA(e.nonTrainableWeights);a("Total params: ".concat(h+f)),a("Trainable params: ".concat(h)),a("Non-trainable params: ".concat(f)),a("_".repeat(t))}(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return NS.adagrad(.01)},Adadelta:function(){return NS.adadelta(1,.95,pI())},Adam:function(){return NS.adam(.001,.9,.999,pI())},Adamax:function(){return NS.adamax(.002,.9,.999,pI(),0)},RMSProp:function(){return NS.rmsprop(.001,.9,0,pI())},SGD:function(){return NS.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new yI("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof SS))throw new yI("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new yI("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));n=e.loss.map((function(e){return LA(e)}))}else{var r=LA(e.loss);this.outputs.forEach((function(e){n.push(r)}))}else{for(var a in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(a))throw new yI('Unknown entry in loss dictionary: "'.concat(a,'". ')+"Only expected the following keys: ".concat(this.outputNames));var i,o=_createForOfIteratorHelper(this.outputNames);try{for(o.s();!(i=o.n()).done;){var s=i.value;null==e.loss[s]&&console.warn('Output "'.concat(s,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(s," during training")),n.push(LA(e.loss[s]))}}catch(s7){o.e(s7)}finally{o.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var u=0;u<this.outputs.length;++u){var l=this.internalOutputShapes[u];this.feedOutputNames.push(this.outputNames[u]),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[u])}var c=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],nD("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===c.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var h=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(s7){i.e(s7)}finally{i.f()}return a}(e.metrics,this.outputNames),f=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};nD("metric",(function(){for(var e=function(e){-1===c.indexOf(e)&&function(n){var r,a,i,o,s=_createForOfIteratorHelper(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if("string"==typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var l=t.internalOutputShapes[e],c=void 0;1===l[l.length-1]||t.lossFunctions[e]===NA?-1!==["accuracy","acc"].indexOf(u)?a=zA:-1!==["crossentropy","ce"].indexOf(u)&&(a=WA):t.lossFunctions[e]===MA?-1!==["accuracy","acc"].indexOf(u)?a=qA:-1!==["crossentropy","ce"].indexOf(u)&&(a=UA):-1!==["accuracy","acc"].indexOf(u)?a=BA:-1!==["crossentropy","ce"].indexOf(u)&&(a=VA),-1!==["accuracy","acc"].indexOf(u)?c="acc":-1!==["crossentropy","ce"].indexOf(u)&&(c="ce"),i=a,r=""+c}else{var h=HA(u);i=h,r=""+GA(u)}var d=void 0;nD(r,(function(){d=i})),f(e,r,d)}}catch(s7){s.e(s7)}finally{s.f()}}(h[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;dT(r);var a=this.standardizeUserDataXY(e,t,!0,r);try{var i=a[0].concat(a[1]);return this.makeTestFunction(),kI(this.testLoop(this.testFunction,i,r,n.verbose,n.steps))}finally{gT(a[0],e),gT(a[1],t)}}},{key:"evaluateDataset",value:(u=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.makeTestFunction(),function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,a){var i,o,s,u,l,c,h,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!=(a=a||{}).batches,o=t.testFunction,s=[],!(a.verbose>0)){e.next=4;break}throw new gI("Verbose mode is not implemented yet.");case 4:if(r.assert(!i||a.batches>0&&Number.isInteger(a.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(a.batches))})),"function"!=typeof n.next){e.next=9;break}e.t0=n,e.next=12;break;case 9:return e.next=11,n.iterator();case 11:e.t0=e.sent;case 12:u=e.t0,l=0,c=0,h=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.next();case 2:if(n=e.sent,s=N_((function(){return n.value&&function(){var e=cT(t,n.value),r=e.xs,a=e.ys,i=r.concat(a),u=N_((function(){return o(i)}));if(P_(i),0===c)for(var h=0;h<u.length;++h)s.push(yg(0));for(var f=i[0].shape[0],d=function(e){var t=u[e],n=s[e];s[e]=N_((function(){return z_(s[e],Tb(f,t))})),c>0&&P_(n)},p=0;p<u.length;++p)d(p);P_(u),l+=f,++c}(),s})),!n.done){e.next=6;break}return i&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(a.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 6:case"end":return e.stop()}}),e)}));case 15:if(i&&!(c<a.batches)){e.next=22;break}return e.delegateYield(h(),"t1",17);case 17:if("break"!==e.t1){e.next=20;break}return e.abrupt("break",22);case 20:e.next=15;break;case 22:for(f=0;f<s.length;++f)d=s[f],s[f]=Pb(s[f],l),P_(d);return e.abrupt("return",kI(s));case 24:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this,t,n)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new yI("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new yI("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new yI("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=this.retrieveSymbolicTensors(n?t:[t]),a=new $A;if(e instanceof Dy&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new yI("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var i=0;i<this.inputs.length;++i)a.add(this.inputs[i],e[i])}else{var o,s=_createForOfIteratorHelper(this.inputs);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=e[u.name];if(null==l)throw new yI("No value is provided for the model's input ".concat(u.name));a.add(u,l)}}catch(s7){s.e(s7)}finally{s.f()}}var c=nT(r,a);return n?c:c[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=bI(null,e.length),r=e.length,a=_createForOfIteratorHelper(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var l=s.indexOf(e[u]);if(-1!==l&&(n[u]=o[l],r--),0===r)break}if(0===r)break}}catch(s7){a.e(s7)}finally{a.f()}if(r>0){var c=[];throw n.forEach((function(t,n){null==t&&c.push(e[n])})),new yI("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(c)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return N_((function(){var a=t.checkNumSamples(e);if(r)throw new gI("Verbose predictLoop() is not implemented yet.");for(var i=vT(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){N_((function(){var r=pT(e,i[n][0],i[n][1]),a=[];if(Array.isArray(r))for(var o=0;o<r.length;++o)a.push({key:t.inputs[o],value:r[o]});else a.push({key:t.inputs[0],value:r});var s=new $A(a);return nT(t.outputs,s)})).forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return kI(o.map((function(e){return Og(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=yT(e);wT(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return dT(r),this.predictLoop(n,r)}finally{gT(n,e)}}},{key:"predictOnBatch",value:function(e){wT(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new vI("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var a=[],i=0;i<this.feedOutputShapes.length;++i){var o=this.feedOutputShapes[i];a.push(this.feedLossFns[i]===MA?o.slice(0,o.length-1).concat([1]):o)}if(function(e,t,n){var a=RI(e.map((function(e){return e.shape[0]})));a.sort();var i=RI(t.map((function(e){return e.shape[0]})));if(i.sort(),a.length>1)throw new yI("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(i.length>1)throw new yI("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(a.length>0&&i.length>0&&!r.arraysEqual(a,i))throw new yI("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(a[0]," input sample(s) and ").concat(i[0]," target ")+"sample(s).")}(e=xT(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=xT(t,this.feedOutputNames,a,!1,"target")),function(e,t,n){for(var r=[TA,NA,OA],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===OA&&1===i.shape[i.shape.length-1])throw new yI("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var h=u[c],f=l[c];if(null!=f&&h!==f)throw new yI("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!=0)throw new yI("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r,a){var i,o,s,u,l,c,h,f,d,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(p.length>4&&void 0!==p[4])||p[4],o=p.length>5?p[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),u=_slicedToArray(s,2),l=u[0],c=u[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(h=null,null==a){e.next=19;break}f=oT(a,this.outputNames),h=[],d=0;case 10:if(!(d<f.length)){e.next=19;break}return e.t0=h,e.next=14,sT(c[d],null,f[d]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++d,e.next=10;break;case 19:return e.abrupt("return",[l,c,h]);case 20:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return o.apply(this,arguments)})},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return N_((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new gI("Verbose mode is not implemented yet.");if(null!=i)throw new gI("steps mode in testLoop() is not implemented yet");for(var u=vT(o,n),l=gg(hD(0,o)),c=0;c<u.length;++c){var h=u[c][0],f=u[c][1],d=pD(l,h,f-h),p=mT(t,d),m=e(p);if(0===c)for(var v=0;v<m.length;++v)s.push(yg(0));for(var y=0;y<m.length;++y)s[y]=z_(s[y],Tb(f-h,m[y]))}for(var g=0;g<s.length;++g)s[g]=Pb(s[g],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;wI(e,r)>1&&(a+="_".concat(wI(e.slice(0,n),r))),t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,l=new $A(t),c=nT(e.outputs,l,{training:!0}),h=0;h<e.lossFunctions.length;++h){var f=(0,e.lossFunctions[h])(a[h],c[h]);null!=i[h]&&(f=lT(f,i[h]));var d=e_(f);n.push(d),u=0===h?f:z_(u,f)}for(var p=0;p<e.metricsTensors.length;++p){var m=void 0;if(e.outputs.length>1&&p<e.outputs.length)m=n[p];else{var v=e.metricsTensors[p][1];m=e_((0,e.metricsTensors[p][0])(a[v],c[v]))}F_(m),o.push(m)}return u=e_(u),e.calculateLosses().forEach((function(e){u=z_(u,e)})),u}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return N_((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new $A(o),l=nT(e.outputs,u),c=0;c<e.lossFunctions.length;++c){var h=e_((0,e.lossFunctions[c])(i[c],l[c]));n=0===c?h:z_(n,h),r.push(n)}for(var f=0;f<e.metricsTensors.length;++f){var d=e.metricsTensors[f][1],p=e_((0,e.metricsTensors[f][0])(i[d],l[d]));r.push(p)}return r}))}}},{key:"fit",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var a,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:{},e.abrupt("return",function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,a){var i,o,s,u,l,c,h,f,d,p,m,v,y,g,_,b,x,w,k,C,S,I,D,A=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=A.length>3&&void 0!==A[3]?A[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,dT(d=null==i.batchSize?32:i.batchSize),p=!1,e.next=10,t.standardizeUserData(n,a,i.sampleWeight,i.classWeight,p,d);case 10:if(m=e.sent,o=m[0],s=m[1],f=m[2],y=!1,!(null!=i.validationData&&i.validationData.length>0)){e.next=24;break}if(y=!0,2===i.validationData.length){e.next=16;break}throw 3===i.validationData.length?new gI("validationData including sample weights is not supported yet."):new yI("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(i.validationData," is invalid."));case 16:return u=i.validationData[0],l=i.validationData[1],g=!0,e.next=20,t.standardizeUserData(u,l,null,null,g,d);case 20:_=e.sent,c=_[0],h=_[1],v=c.concat(h),e.next=25;break;case 24:null!=i.validationSplit&&i.validationSplit>0&&i.validationSplit<1?(y=!0,b=Math.floor(o[0].shape[0]*(1-i.validationSplit)),x=o[0].shape[0],c=pT(o,b,x),o=pT(o,0,b),h=pT(s,b,x),s=pT(s,0,b),v=c.concat(h)):null!=i.validationSteps&&(y=!0);case 25:return w=o.concat(s).concat(f),t.checkTrainableWeightsConsistency(),k=t.makeTrainFunction(),C=t.getDedupedMetricsNames(),y?(t.makeTestFunction(),S=t.testFunction,I=C.slice().concat(C.map((function(e){return"val_"+e})))):(S=null,v=[],I=C.slice()),D=CA(i.callbacks,i.yieldEvery),e.next=32,function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,a,i,o,s,u,l,c,h,f,d,p,m,v){var y,g,_,b,x,w,k,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==o&&(o=32),null==s&&(s=1),null==f&&(f=!0),null==p&&(p=0),y=!1,null!=c&&null!=h&&(y=!0),null!=(g=t.checkNumSamples(a,o,null,"steps_per_epoch"))&&(_=hD(0,g)),null==u&&(u=1),b=IA(l,u,s,p,g,null,o,y,d),x=b.callbackList,w=b.history,x.setModel(t),t.history=w,e.next=10,x.onTrainBegin();case 10:t.stopTraining_=!1,k=regeneratorRuntime.mark((function e(s){var u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(s);case 2:return u={},e.delegateYield(regeneratorRuntime.mark((function e(){var s,l,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==f){e.next=2;break}throw new gI("batch shuffling is not implemneted yet");case 2:f&&r.shuffle(_),s=gg(_),l=vT(g,o),d=regeneratorRuntime.mark((function e(r){var f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f={},e.next=3,x.onBatchBegin(r,f);case 3:return N_((function(){var e=l[r][0],d=l[r][1],p=pD(s,e,d-e);f.batch=r,f.size=d-e;for(var m=mT(a,p),v=n(m),g=0;g<i.length;++g){var _=v[g];f[i[g]]=_,F_(_)}if(r===l.length-1&&y)for(var b=t.testLoop(c,h,o),x=0;x<i.length;++x){var w=i[x],k=b[x];F_(k),u["val_"+w]=k}})),e.next=6,x.onBatchEnd(r,f);case 6:if(gA(f),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),p=0;case 6:if(!(p<l.length)){e.next=14;break}return e.delegateYield(d(p),"t0",8);case 8:if("break"!==e.t0){e.next=11;break}return e.abrupt("break",14);case 11:++p,e.next=6;break;case 14:s.dispose();case 15:case"end":return e.stop()}}),e)}))(),"t0",4);case 4:return e.next=6,x.onEpochEnd(s,u);case 6:if(!t.stopTraining_){e.next=8;break}return e.abrupt("return","break");case 8:case"end":return e.stop()}}),e)})),C=p;case 13:if(!(C<s)){e.next=21;break}return e.delegateYield(k(C),"t0",15);case 15:if("break"!==e.t0){e.next=18;break}return e.abrupt("break",21);case 18:++C,e.next=13;break;case 21:return e.next=23,x.onTrainEnd();case 23:return e.next=25,t.history.syncData();case 25:return e.abrupt("return",t.history);case 26:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i,o,s,u,l,c,h,f,d,p,m){return e.apply(this,arguments)}}()(t,k,w,C,d,i.epochs,i.verbose,D,S,v,i.shuffle,I,i.initialEpoch);case 32:return e.abrupt("return",e.sent);case 33:return e.prev=33,t.isTraining=!1,gT(o,n),gT(s,a),gT(c,u),gT(h,l),null!=f&&P_(f),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[4,,33,36]])})));return function(t,n,r){return e.apply(this,arguments)}}()(this,t,n,a));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"fitDataset",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,a){var i,o,s,u,l,c,h,f,d,p,m,v,y,g,_,b,x,w,k,C,S,I,D,A,T,E,R,O,M,N,P,F;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!=a.batchesPerEpoch,r.assert(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),r.assert(null!=a,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),r.assert(null!=a.epochs&&a.epochs>0&&Number.isInteger(a.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(a.epochs)})),r.assert(!i||a.batchesPerEpoch>0&&Number.isInteger(a.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(a.batchesPerEpoch)})),r.assert(null==a.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,(o=null!=a.validationData)&&(fT(a.validationData)?r.assert(null==a.validationBatches||a.validationBatches>0&&Number.isInteger(a.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(a.validationBatches)})):(l=function(e){if(3===e.length)throw new gI("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(a.validationData),s=l.xs,u=l.ys)),c=t.makeTrainFunction(),h=t.getDedupedMetricsNames(),f=o?h.slice().concat(h.map((function(e){return"val_"+e}))):h.slice(),d=CA(a.callbacks,a.yieldEvery),p=null==a.verbose?1:a.verbose,m=IA(d,p,a.epochs,null,null,function(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}(n,a),null,o,f),v=m.callbackList,y=m.history,v.setModel(t),t.history=y,e.next=14,v.onTrainBegin();case 14:return t.stopTraining_=!1,g=null==a.initialEpoch?0:a.initialEpoch,e.next=18,n.iterator();case 18:_=e.sent;case 19:if(!(g<a.epochs)){e.next=89;break}return b={},e.next=23,v.onEpochBegin(g);case 23:if(x=0,w=0,e.t0=i,e.t0){e.next=29;break}return e.next=28,n.iterator();case 28:_=e.sent;case 29:if(i&&!(x<a.batchesPerEpoch)){e.next=82;break}return e.next=32,_.next();case 32:if(k=e.sent,!i||!k.done){e.next=36;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(a.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(x," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(a.batchesPerEpoch*a.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",82);case 36:if(null==k.value){e.next=63;break}return C=cT(t,k.value),S=C.xs,I=C.ys,(D={}).batch=w,D.size=S[0].shape[0],e.next=42,v.onBatchBegin(w,D);case 42:if(A=[],null==a.classWeight){e.next=55;break}T=oT(a.classWeight,t.outputNames),E=0;case 46:if(!(E<T.length)){e.next=55;break}return e.t1=A,e.next=50,sT(I[E],null,T[E]);case 50:e.t2=e.sent,e.t1.push.call(e.t1,e.t2);case 52:++E,e.next=46;break;case 55:for(R=S.concat(I).concat(A),O=c(R),P_(R),M=0;M<h.length;++M)N=O[M],D[h[M]]=N,F_(N);return e.next=60,v.onBatchEnd(w,D);case 60:gA(D),w++,x++;case 63:if(!(i?x>=a.batchesPerEpoch:k.done)){e.next=78;break}if(!o){e.next=77;break}if(P=void 0,!fT(a.validationData)){e.next=74;break}return e.t4=CI,e.next=70,t.evaluateDataset(a.validationData,{batches:a.validationBatches});case 70:e.t5=e.sent,e.t3=(0,e.t4)(e.t5),e.next=75;break;case 74:e.t3=CI(t.evaluate(s,u,{batchSize:null==a.validationBatchSize?32:a.validationBatchSize,verbose:0}));case 75:for(P=e.t3,F=0;F<t.metricsNames.length;++F)b["val_".concat(t.metricsNames[F])]=P[F];case 77:return e.abrupt("break",82);case 78:if(!t.stopTraining_){e.next=80;break}return e.abrupt("break",82);case 80:e.next=29;break;case 82:return e.next=84,v.onEpochEnd(g,b);case 84:if(g++,!t.stopTraining_){e.next=87;break}return e.abrupt("break",89);case 87:e.next=19;break;case 89:return e.next=91,v.onTrainEnd();case 91:return e.next=93,t.history.syncData();case 93:return e.abrupt("return",t.history);case 94:return e.prev=94,t.isTraining=!1,e.finish(94);case 97:case"end":return e.stop()}}),e,null,[[4,,94,97]])})));return function(t,n,r){return e.apply(this,arguments)}}()(this,t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"trainOnBatch",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l,c,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction()(a.concat(i)),s=[],u=_createForOfIteratorHelper(o),e.prev=8,u.s();case 10:if((l=u.n()).done){e.next=18;break}return c=l.value,e.next=14,c.data();case 14:h=e.sent,s.push(h[0]);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),u.e(e.t0);case 23:return e.prev=23,u.f(),e.finish(23);case 26:return e.abrupt("return",(P_(o),kI(s)));case 27:case"end":return e.stop()}}),e,this,[[8,20,23,26]])}))),function(e,t){return n.apply(this,arguments)})},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"dispose",value:function(){var e=_get(_getPrototypeOf(c.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=M_().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-M_().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"==typeof this.loss)e=SI(this.loss);else if(Array.isArray(this.loss)){var t,n=_createForOfIteratorHelper(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!=typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(s7){n.e(s7)}finally{n.f()}e=this.loss.map((function(e){return SI(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!=typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=SI(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[SI(GA(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return SI(GA(e))}));var e={};for(var t in this.metrics)e[t]=SI(GA(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=DA(QA(e.optimizer_config));if("string"==typeof e.loss)t=II(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return II(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=II(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return II(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=II(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,u,l,c,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=7;break}if(0!==(r=s.getSaveHandlers(t)).length){e.next=4;break}throw new yI("Cannot find any save handlers for URL '".concat(t,"'"));case 4:if(!(r.length>1)){e.next=6;break}throw new yI("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 6:t=r[0];case 7:if(null!=t.save){e.next=9;break}throw new yI("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 9:return e.next=11,s.encodeWeights(this.getNamedWeights(n));case 11:if(a=e.sent,i={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v2.0.0",convertedBy:null},null==n||!n.includeOptimizer||null==this.optimizer){e.next=27;break}return i.trainingConfig=this.getTrainingConfig(),u="optimizer",e.t0=s,e.next=19,this.optimizer.getWeights();case 19:return e.t1=e.sent,e.t2=u,e.next=23,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 23:l=e.sent,c=l.data,h=l.specs,(o=a.specs).push.apply(o,_toConsumableArray(h)),a.data=s.concatenateArrayBuffers([a.data,c]);case 27:return e.abrupt("return",(null!=this.userDefinedMetadata&&(JA(this.userDefinedMetadata,this.name,!0),i.userDefinedMetadata=this.userDefinedMetadata),i.weightData=a.data,i.weightSpecs=a.specs,t.save(i)));case 28:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"setUserDefinedMetadata",value:function(e){JA(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}},{key:"stopTraining",set:function(e){this.stopTraining_=e},get:function(){return this.stopTraining_}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}}]),c}(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=$D(a)}if(r.supportsMasking=!1,r.trainable_=!0,r.inputs=Array.isArray(e.inputs)?e.inputs.slice():[e.inputs],r.outputs=Array.isArray(e.outputs)?e.outputs.slice():[e.outputs],RI(r.inputs).length!==r.inputs.length)throw new yI("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));RI(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=_createForOfIteratorHelper(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.nodeIndex,l=s.tensorIndex;r.outputLayers.push(s.sourceLayer),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(l)}}catch(s7){o.e(s7)}finally{o.f()}var c,h=_createForOfIteratorHelper(r.inputs);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=f.sourceLayer,p=f.nodeIndex,m=f.tensorIndex;xI(0===p,"input layer has >1 nodes"),xI(0===m,"input layer has >1 tensors"),r.inputLayers.push(d),r.inputLayersNodeIndices.push(p),r.inputLayersTensorIndices.push(m)}}catch(s7){h.e(s7)}finally{h.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var v=0;v<r.inputLayers.length;v++){var y=r.inputLayers[v];if(!(y instanceof mA))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(v," (0-based) originates ")+"from layer type ".concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var g,_=_createForOfIteratorHelper(r.outputLayers);try{for(_.s();!(g=_.n()).done;){var b=g.value;r.outputNames.push(b.name)}}catch(s7){_.e(s7)}finally{_.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var x,w={},k={},C={},S={},I={},D=[],A=function e(t,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var l=o.inboundNodes[s];if(-1!==i.indexOf(l))throw new vI("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(l)){r.containerNodes.add(n.nodeKey(o,s)),o.id in I||(I[o.id]=Object.keys(I).length),-1===i.indexOf(l)&&i.push(l);for(var c=l.inboundLayers.length,h=0;h<c;h++)e(l.inputTensors[h],a,i,l.inboundLayers[h],l.nodeIndices[h],l.tensorIndices[h]);for(a.push(l);i.indexOf(l)>=0;)i.splice(i.indexOf(l),1);D.push(l)}},T=[],E=[],R=_createForOfIteratorHelper(r.outputs);try{for(R.s();!(x=R.n()).done;){A(x.value,T,E)}}catch(s7){R.e(s7)}finally{R.f()}var O,M=_createForOfIteratorHelper(D.slice().reverse());try{for(M.s();!(O=M.n()).done;){var N=O.value;k[N.id]=N,N.id in w||(w[N.id]=0);var P=w[N.id];P=Math.max(P,null==C[N.outboundLayer.id]?0:C[N.outboundLayer.id]),C[N.outboundLayer.id]=P,S[N.outboundLayer.id]=N.outboundLayer,w[N.id]=P;for(var F=0;F<N.inboundLayers.length;F++){var L=N.inboundLayers[F].inboundNodes[N.nodeIndices[F]];w[L.id]=Math.max(P+1,null==w[L.id]?0:w[L.id]),k[L.id]=L}}}catch(s7){M.e(s7)}finally{M.f()}var z={};for(var B in w){var W=w[B];W in z||(z[W]=[]),z[W].push(k[B])}var q={};for(var V in C){var U=C[V];U in q||(q[U]=[]),q[U].push(S[V])}var j=Object.keys(q).map((function(e){return parseInt(e,10)})).sort(EI);r.layers=[];var H,G=_createForOfIteratorHelper(j);try{for(G.s();!(H=G.n()).done;){var J=q[H.value];J.sort((function(e,t){var n=I[e.id],r=I[t.id];return n<r?-1:n>r?1:0}));var X,K=_createForOfIteratorHelper(J);try{for(K.s();!(X=K.n()).done;){var Z=X.value;Z instanceof n&&r.internalContainerRefs.push(Z),r.layers.push(Z)}}catch(s7){K.e(s7)}finally{K.f()}}}catch(s7){G.e(s7)}finally{G.f()}r.layersByDepth=q,j=Object.keys(z).map((function(e){return parseInt(e,10)})).sort(EI);var Y,Q=r.inputs.slice(),$=[],ee=_createForOfIteratorHelper(j);try{for(ee.s();!(Y=ee.n()).done;){var te,ne=_createForOfIteratorHelper(z[Y.value]);try{for(ne.s();!(te=ne.n()).done;){var re=te.value,ae=re.outboundLayer;if(null!=ae){var ie,oe=_createForOfIteratorHelper(re.inputTensors);try{for(oe.s();!(ie=oe.n()).done;){var se=ie.value;if(-1===Q.indexOf(se))throw new vI("Graph disconnected: cannot obtain value for tensor ".concat(se)+' at layer "'.concat(ae.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat($))}}catch(s7){oe.e(s7)}finally{oe.f()}var ue,le=_createForOfIteratorHelper(re.outputTensors);try{for(le.s();!(ue=le.n()).done;){var ce=ue.value;Q.push(ce)}}catch(s7){le.e(s7)}finally{le.f()}$.push(ae.name)}}}catch(s7){ne.e(s7)}finally{ne.f()}}}catch(s7){ee.e(s7)}finally{ee.f()}r.nodesByDepth=z;var he,fe=r.layers.map((function(e){return e.name})),de=_createForOfIteratorHelper(fe);try{var pe=function(){var e=he.value,t=fe.filter((function(t){return t===e})).length;if(1!==t)throw new vI('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(fe))};for(de.s();!(he=de.n()).done;)pe()}catch(s7){de.e(s7)}finally{de.f()}return r.outboundNodes=[],r.inboundNodes=[],new fA({outboundLayer:_assertThisInitialized(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,_possibleConstructorReturn(r)}return _createClass(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){var t,n=_createForOfIteratorHelper(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(s7){n.e(s7)}finally{n.f()}var a,i=_createForOfIteratorHelper(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(s7){i.e(s7)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=_createForOfIteratorHelper(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,u=_createForOfIteratorHelper(s.weights);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(null!=r[l.originalName])throw new yI("Duplicate weight name: ".concat(l.originalName));r[l.originalName]=l,a++}}catch(s7){u.e(s7)}finally{u.f()}}}catch(s7){i.e(s7)}finally{i.f()}var c=[];for(var h in e){if(null!=r[h])c.push([r[h],e[h]]);else if(n)throw new yI("Provided weight data has no target variable: ".concat(h));delete r[h]}if(n){var f=[];for(var d in r)f.push(d);if(f.length>0)throw new yI("".concat(f.length," of ").concat(a," weights are not set: ")+"".concat(f))}sA(c)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers 2.0.0",t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function e(t,n){if(null==t)return null;if("string"==typeof t)return SI(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){for(var r=[],a=t.length,i=0;i<a;++i){var o=t[i];YA(n,i,o)?r.push(o):r.push(e(o,n))}return r}for(var s={},u=0,l=Object.keys(t);u<l.length;u++){var c=l[u],h=t[c];s[SI(c)]="name"!==c&&"className"!==c||"string"!=typeof h?e(h,c):h}return s}(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return N_((function(){e=CI(e);for(var r=new $A,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return nT(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return N_((function(){var r;return e=CI(e),r=null==t?bI(null,e.length):CI(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=tA(e);if(t.length!==this.inputLayers.length)throw new yI("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++)n[this.inputLayers[r].name+"_0_0"]=t[r];var a=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(EI);if(a.length>1){var i,o=_createForOfIteratorHelper(a);try{for(o.s();!(i=o.n()).done;){var s,u=i.value,l=_createForOfIteratorHelper(this.nodesByDepth[u]);try{for(l.s();!(s=l.n()).done;){var c=s.value,h=c.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(h.id)){for(var f=[],d=0;d<c.inboundLayers.length;d++)f.push(n["".concat(c.inboundLayers[d].name,"_").concat(c.nodeIndices[d],"_").concat(c.tensorIndices[d])]);for(var p=tA(h.computeOutputShape(kI(f))),m=h.inboundNodes.indexOf(c),v=0;v<p.length;v++)n["".concat(h.name,"_").concat(m,"_").concat(v)]=p[v]}}}catch(s7){l.e(s7)}finally{l.f()}}}catch(s7){o.e(s7)}finally{o.f()}}for(var y=[],g=[],_=0;_<this.outputLayers.length;_++)g.push("".concat(this.outputLayers[_].name,"_").concat(this.outputLayersNodeIndices[_],"_").concat(this.outputLayersTensorIndices[_]));for(var b=0;b<g.length;b++){var x=g[b];xI(x in n),y.push(n[x])}return kI(y)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=bI(null,e.length));for(var n={},r=0;r<this.inputs.length;++r)n[this.inputs[r].id]=[e[r],t[r]];var a,i=_createForOfIteratorHelper(Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(EI));try{for(i.s();!(a=i.n()).done;){var o,s=a.value,u=_createForOfIteratorHelper(this.nodesByDepth[s]);try{for(u.s();!(o=u.n()).done;){var l,c=o.value,h=c.outboundLayer,f=c.inputTensors,d=c.outputTensors,p=new Array,m=_createForOfIteratorHelper(f);try{for(m.s();!(l=m.n()).done;){var v=l.value;v.id in n&&p.push(n[v.id])}}catch(s7){m.e(s7)}finally{m.f()}if(p.length===f.length){var y=void 0,g=void 0,_=void 0,b=void 0,x={};if(null!=c.callArgs&&(x=c.callArgs),1===p.length){var w=_slicedToArray(p[0],2),k=w[0],C=w[1];null==x.mask&&(x.mask=C),_=CI(h.call(k,x)),b=CI(h.computeMask(k,C)),y=[k],g=[C]}else y=p.map((function(e){return e[0]})),g=p.map((function(e){return e[1]})),null==x.mask&&(x.mask=g),_=CI(h.call(y,x)),b=CI(h.computeMask(y,g));if(h.activityRegularizer)throw new gI("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var S=0;S<d.length;++S)n[d[S].id]=[_[S],b[S]]}}}catch(s7){u.e(s7)}finally{u.f()}}}catch(s7){i.e(s7)}finally{i.f()}var I,D=[],A=[],T=[],E=_createForOfIteratorHelper(this.outputs);try{for(E.s();!(I=E.n()).done;){var R=I.value;xI(R.id in n,"Could not compute output ".concat(R.name," : ").concat(R.id));var O=_slicedToArray(n[R.id],2),M=O[0],N=O[1];T.push(M.shape),D.push(M),A.push(N)}}catch(s7){E.e(s7)}finally{E.f()}return[D,A,T]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=_createForOfIteratorHelper(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(s7){i.e(s7)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new yI("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new yI("Provide either a layer name or layer index");var n,r=_createForOfIteratorHelper(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(s7){r.e(s7)}finally{r.f()}throw new yI("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return N_((function(){var t,r=[],a=_createForOfIteratorHelper(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,_toConsumableArray(i.calculateLosses()))}}catch(s7){a.e(s7)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=_createForOfIteratorHelper(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),l=[],c=0;c<o.inboundNodes.length;c++){var h=o.inboundNodes[c],f=n.nodeKey(o,c),d={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),d=h.callArgs}catch(s7){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(h.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),d={}}if(h.inboundLayers.length>0){for(var p=[],m=0;m<h.inboundLayers.length;m++){var v=h.inboundLayers[m],y=h.tensorIndices[m],g=r[n.nodeKey(v,h.nodeIndices[m])];null==g&&(g=0),p.push([v.name,g,y,d])}l.push(p)}}}var _={};_.name=o.name,_.className=s,_.config=u,_.inboundNodes=l,a.push(_)}}catch(s7){i.e(s7)}finally{i.f()}t.layers=a;for(var b=[],x=0;x<this.inputLayers.length;x++){var w=this.inputLayers[x],k=n.nodeKey(w,this.inputLayersNodeIndices[x]);if(this.containerNodes.has(k)){var C=r[k];null==C&&(C=0),b.push([w.name,C,this.inputLayersTensorIndices[x]])}}t.inputLayers=b;for(var S=[],I=0;I<this.outputLayers.length;I++){var D=this.outputLayers[I],A=n.nodeKey(D,this.outputLayersNodeIndices[I]);if(this.containerNodes.has(A)){var T=r[A];null==T&&(T=0),S.push([D.name,T,this.outputLayersTensorIndices[I]])}}return t.outputLayers=S,t}},{key:"resetStates",value:function(){var e=this;N_((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new yI("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=_createForOfIteratorHelper(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(s7){n.e(s7)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=_createForOfIteratorHelper(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,_toConsumableArray(r.nonTrainableWeights))}}catch(s7){n.e(s7)}finally{n.f()}if(!this.trainable){var a,i=[],o=_createForOfIteratorHelper(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,_toConsumableArray(s.trainableWeights))}}catch(s7){o.e(s7)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){if(this._stateful)throw new yI("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=_createForOfIteratorHelper(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(s7){t.e(s7)}finally{t.f()}return!1}}],[{key:"fromConfig",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=_createForOfIteratorHelper(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=u[0],c=u[1],h=u[2];if(n=null==u[3]?{}:u[3],!(l in r))return void i(e,t);var f=r[l];if(f.inboundNodes.length<=c)return void i(e,t);o.push(f.inboundNodes[c].outputTensors[h])}}catch(s7){s.e(s7)}finally{s.f()}o.length>0&&e.apply(kI(o),n)}function s(e){var a=e.name,o=DA(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new yI("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,l=t.name,c=t.layers,h=_createForOfIteratorHelper(c);try{for(h.s();!(u=h.n()).done;){var f=u.value;s(f)}}catch(s7){h.e(s7)}finally{h.f()}for(;!OI(a);){var d,p=_createForOfIteratorHelper(c);try{for(p.s();!(d=p.n()).done;){var m=d.value,v=r[m.name];if(v.name in a){var y=a[v.name];delete a[v.name];var g,_=_createForOfIteratorHelper(y);try{for(_.s();!(g=_.n()).done;){var b=g.value;o(v,b)}}catch(s7){_.e(s7)}finally{_.f()}}}}catch(s7){p.e(s7)}finally{p.f()}}var x,w=[],k=[],C=t.inputLayers,S=_createForOfIteratorHelper(C);try{for(S.s();!(x=S.n()).done;){var I=x.value,D=I[0],A=I[1],T=I[2];xI(D in r),w.push(r[D].inboundNodes[A].outputTensors[T])}}catch(s7){S.e(s7)}finally{S.f()}var E,R=t.outputLayers,O=_createForOfIteratorHelper(R);try{for(O.s();!(E=O.n()).done;){var M=E.value,N=M[0],P=M[1],F=M[2];xI(N in r),k.push(r[N].inboundNodes[P].outputTensors[F])}}catch(s7){O.e(s7)}finally{O.f()}return new e({inputs:w,outputs:k,name:l})}}]),n}(pA));kT.className="Model",l.registerClass(kT);var CT=function(e){_inherits(s,e);var t,n,a,i,o=_createSuper(s);function s(e){var t;if(_classCallCheck(this,s),e=e||{},(t=o.call(this,{inputs:[],outputs:[]})).trainable=!0,t.built=!1,t.name=null!=e.name?e.name:$D("sequential_"),null!=e.layers){var n,r=_createForOfIteratorHelper(e.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;t.add(a)}}catch(s7){r.e(s7)}finally{r.f()}}return _possibleConstructorReturn(t)}return _createClass(s,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new yI("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,n=e instanceof s||e instanceof kT;if(n){if(1!==(t=e).outputs.length)throw new yI("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new yI("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new yI("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var r=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new yI("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new mA({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(r)}if(n)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new yI("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new yI("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=function e(t,n,r){if((null==n||null!=r&&r>0)&&(n=t.sourceLayer,r=t.nodeIndex),0===n.inboundNodes.length)return[t];var a=n.inboundNodes[r];if(0===a.inboundLayers.length)return a.inputTensors;for(var i=[],o=0;o<a.inboundLayers.length;o++){var s,u=_createForOfIteratorHelper(e(a.inputTensors[o],a.inboundLayers[o],a.nodeIndices[o]));try{for(u.s();!(s=u.n()).done;){var l=s.value;-1===i.indexOf(l)&&i.push(l)}}catch(s7){u.e(s7)}finally{u.f()}}return i}(this.outputs[0])}this.inboundNodes=[],new fA({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:bI(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var a=e.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(rA(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new kT({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),_get(_getPrototypeOf(s.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),_get(_getPrototypeOf(s.prototype),"summary",this).call(this,e,t,n)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new vI("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new vI("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"fit",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new vI("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"fitDataset",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new vI("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"trainOnBatch",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getConfig",value:function(){var e,t=[],n=_createForOfIteratorHelper(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(s7){n.e(s7)}finally{n.f()}return{name:this.name,layers:t}}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"stopTraining",set:function(e){if(null==this.model)throw new yI("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e},get:function(){if(null==this.model)throw new yI("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}}],[{key:"fromConfig",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new yI("Legacy serialization format not supported yet.");n=t}else r.assert(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),n=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof s))throw new gI("Sequential.fromConfig called on non-Sequential input: ".concat(o));var u,l=_createForOfIteratorHelper(n);try{for(l.s();!(u=l.n()).done;){var c=u.value,h=DA(c,void 0,a);a&&h.setFastWeightInitDuringBuild(!0),o.add(h)}}catch(s7){l.e(s7)}finally{l.f()}return o}}]),s}(kT);CT.className="Sequential",l.registerClass(CT);var ST=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getConfig",value:function(){return{}}}]),n}(l.Serializable),IT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new gI("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return pC(e)}(e,t)}}]),n}(ST);IT.className="elu",l.registerClass(IT);var DT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return _C(e)}}]),n}(ST);DT.className="selu",l.registerClass(DT);var AT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return yC(e)}}]),n}(ST);AT.className="relu",l.registerClass(AT);var TT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return N_((function(){return Sb(6,yC(e))}))}}]),n}(ST);TT.className="relu6",l.registerClass(TT);var ET=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return e}}]),n}(ST);ET.className="linear",l.registerClass(ET);var RT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return sb(e)}}]),n}(ST);RT.className="sigmoid",l.registerClass(RT);var OT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return function(e){return N_((function(){var t=z_(.5,Tb(.2,e));return J_(t,0,1)}))}(e)}}]),n}(ST);OT.className="hardSigmoid",l.registerClass(OT);var MT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return pb(e)}}]),n}(ST);MT.className="softplus",l.registerClass(MT);var NT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return function(e){return N_((function(){return Pb(e,B_(e).add(1))}))}(e)}}]),n}(ST);NT.className="softsign",l.registerClass(NT);var PT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){return gb(e)}}]),n}(ST);PT.className="tanh",l.registerClass(PT);var FT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return bC(e,t)}}]),n}(ST);FT.className="softmax",l.registerClass(FT);var LT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return xC(e,t)}}]),n}(ST);function zT(e){return e.getClassName()}function BT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return TI(e,l.SerializationMap.getMap().classNameMap,t,"activation")}function WT(e){if(null==e)return BT({className:"linear",config:{}});if("string"==typeof e){var t={};return t.className=e,t.config={},BT(t)}return e instanceof ST?e:BT(e)}LT.className="logSoftmax",l.registerClass(LT);var qT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(l.Serializable),VT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this),function(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return _createClass(n,[{key:"apply",value:function(e){var t=this;return N_((function(){var n=Ig([1]);return t.hasL1&&(n=z_(n,r_(Tb(t.l1,B_(e))))),t.hasL2&&(n=z_(n,r_(Tb(t.l2,kD(e))))),n.asScalar()}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(qT);VT.className="L1L2",l.registerClass(VT);var UT={l1l2:"L1L2"};function jT(e){return AI(e)}function HT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return TI(e,l.SerializationMap.getMap().classNameMap,t,"regularizer")}function GT(e){return null==e?null:"string"==typeof e?HT({className:e in UT?UT[e]:e,config:{}}):e instanceof qT?e:HT(e)}var JT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return _createClass(n,[{key:"call",value:function(e,t){e=nA(e);var n=yC(e);return null!=this.maxValue&&(n=J_(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);JT.className="ReLU",l.registerClass(JT);var XT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return _createClass(n,[{key:"call",value:function(e,t){var n=nA(e);return mC(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);XT.className="LeakyReLU",l.registerClass(XT);var KT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=KD(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=GT(e.alphaRegularizer),r.alphaConstraint=GI(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new yI("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return _possibleConstructorReturn(r)}return _createClass(n,[{key:"build",value:function(e){var t=(e=rA(e)).slice(1);if(null!=this.sharedAxes){var n,r=_createForOfIteratorHelper(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(s7){r.e(s7)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new lA({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=nA(e),vC(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:XD(this.alphaInitializer),alphaRegularizer:jT(this.alphaRegularizer),alphaConstraint:jI(this.alphaConstraint),sharedAxes:this.sharedAxes},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);KT.className="PReLU",l.registerClass(KT);var ZT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new gI("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,_possibleConstructorReturn(r)}return _createClass(n,[{key:"call",value:function(e,t){var n=nA(e);return pC(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);ZT.className="ELU",l.registerClass(ZT);var YT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return _createClass(n,[{key:"call",value:function(e,t){var n=nA(e);return n.mul(fD(n.greater(this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);YT.className="ThresholdedReLU",l.registerClass(YT);var QT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new FT).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return _createClass(n,[{key:"call",value:function(e,t){var n=nA(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);function $T(e,t,n){if("number"==typeof e)return bI(e,t);if(e.length!==t)throw new yI("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((i=a)!==parseInt(i.toString(),10))throw new yI("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var i}function eE(e,t,n,r){var a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return null==e?e:(a="same"===n?e:e-(t+(t-1)*(i-1))+1,Math.floor((a+r-1)/r))}function tE(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+cD([n-t,0]);else{if("same"!==r)throw new yI("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function nE(e,t){return N_((function(){return QI(t),"channelsFirst"===t?jb(e,[0,2,3,1]):e}))}function rE(e,t){return N_((function(){return QI(t),"channelsFirst"===t?jb(e,[0,2,3,4,1]):e}))}function aE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return N_((function(){if(null==i&&(i="channelsLast"),QI(i),3!==e.rank&&4!==e.rank)throw new yI("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new yI("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=nE(e,i);if("causal"===a)throw new gI("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=v.conv2d({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=jb(u,[0,3,1,2])),u}))}QT.className="Softmax",l.registerClass(QT);var iE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;if(_classCallCheck(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,PI(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new gI("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=$T(r.kernelSize,e,"kernelSize"),a.strides=$T(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,$I(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,QI(a.dataFormat),a.activation=WT(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=KD(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=GI(r.biasConstraint),a.biasRegularizer=GT(r.biasRegularizer),a.activityRegularizer=GT(r.activityRegularizer),a.dilationRate=$T(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new yI("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new yI("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new yI("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return _possibleConstructorReturn(a)}return _createClass(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:zT(this.activation),useBias:this.useBias,biasInitializer:XD(this.biasInitializer),biasRegularizer:jT(this.biasRegularizer),activityRegularizer:jT(this.activityRegularizer),biasConstraint:jI(this.biasConstraint)},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(xI("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!NI(e.kernelSize,"number",1,3))throw new yI("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(pA),oE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,PI(a.filters,"filters"),a.kernelInitializer=KD(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=GI(r.kernelConstraint),a.kernelRegularizer=GT(r.kernelRegularizer),a}return _createClass(n,[{key:"build",value:function(e){e=rA(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new yI("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:_defineProperty({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return N_((function(){var t;e=nA(e);var r=null==n.bias?null:n.bias.read(),a=FI(n.activation.getClassName());if(null!=a&&2===n.rank)t=aE(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return N_((function(){if(null==i&&(i="channelsLast"),QI(i),3!==e.shape.length)throw new yI("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new yI("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new yI("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=jb(e,[0,2,1])),"causal"===a)throw new gI("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=Kw(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=SD(s,n)),s}))}(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=aE(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new gI("convolutions greater than 3D are not implemented yet.");t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return N_((function(){if(null==i&&(i="channelsLast"),QI(i),4!==e.rank&&5!==e.rank)throw new yI("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new yI("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=rE(e,i);if("causal"===a)throw new gI("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=Yw(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=SD(s,n)),"channelsFirst"===i&&(s=jb(s,[0,4,1,2,3])),s}))}(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=rA(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=eE(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:XD(this.kernelInitializer),kernelRegularizer:jT(this.kernelRegularizer),kernelConstraint:jI(this.kernelConstraint)},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new yI("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(iE),sE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return _createClass(n,[{key:"getConfig",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&!NI(e.kernelSize,"number",1,2))throw new yI("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(oE);sE.className="Conv2D",l.registerClass(sE);var uE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return _createClass(n,[{key:"getConfig",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new yI("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(oE);uE.className="Conv3D",l.registerClass(uE);var lE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,e)).inputSpec=[new lA({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new yI("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return _possibleConstructorReturn(r)}return _createClass(n,[{key:"build",value:function(e){if(4!==(e=rA(e)).length)throw new yI("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new yI("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new lA({ndim:4,axes:_defineProperty({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return N_((function(){var t=nA(e);if(4!==t.shape.length)throw new yI("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape;"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var o=i[a],s=n.kernelSize[1],u=n.strides[1],l=[i[0],tE(i[r],n.strides[0],n.kernelSize[0],n.padding),tE(o,u,s,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=jb(t,[0,2,3,1]));var c=Zw(t,n.kernel.read(),l,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(c=jb(c,[0,3,1,2])),null!=n.bias&&(c=SD(c,n.bias.read(),n.dataFormat)),null!=n.activation&&(c=n.activation.apply(c)),c}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=rA(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=tE(a[n],s,i,this.padding),a[r]=tE(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(sE);lE.className="Conv2DTranspose",l.registerClass(lE);var cE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;if(_classCallCheck(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new yI("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new yI("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new yI("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=KD(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=GT(r.depthwiseRegularizer),a.depthwiseConstraint=GI(r.depthwiseConstraint),a.pointwiseInitializer=KD(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=GT(r.pointwiseRegularizer),a.pointwiseConstraint=GI(r.pointwiseConstraint),_possibleConstructorReturn(a)}return _createClass(n,[{key:"build",value:function(e){if((e=rA(e)).length<this.rank+2)throw new yI("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new yI("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.inputSpec=[new lA({ndim:this.rank+2,axes:_defineProperty({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return N_((function(){var t;if(e=nA(e),1===n.rank)throw new gI("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=jb(e,[0,2,3,1])),t=Nk(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=SD(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=jb(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=XD(this.depthwiseInitializer),e.pointwiseInitializer=XD(this.pointwiseInitializer),e.depthwiseRegularizer=jT(this.depthwiseRegularizer),e.pointwiseRegularizer=jT(this.pointwiseRegularizer),e.depthwiseConstraint=jI(this.depthwiseConstraint),e.pointwiseConstraint=jI(this.pointwiseConstraint),e}}]),n}(oE);cE.className="SeparableConv";var hE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,2,e)}return n}(cE);hE.className="SeparableConv2D",l.registerClass(hE);var fE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return _createClass(n,[{key:"getConfig",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&!NI(e.kernelSize,"number",1,1))throw new yI("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(oE);fE.className="Conv1D",l.registerClass(fE);var dE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).cropping="number"==typeof e.cropping?[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return N_((function(){if(e=nA(e),"channelsLast"===n.dataFormat){var t=vD(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return vD(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=vD(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return vD(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);dE.className="Cropping2D",l.registerClass(dE);var pE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],null==e[2]?null:this.size[0]*e[2],null==e[3]?null:this.size[1]*e[3]]:[e[0],null==e[1]?null:this.size[0]*e[1],null==e[2]?null:this.size[1]*e[2],e[3]]}},{key:"call",value:function(e,t){var n=this;return N_((function(){var t=nA(e),r=t.shape;if("channelsFirst"===n.dataFormat){var a=(t=jb(t,[0,2,3,1])).resizeNearestNeighbor([n.size[0]*r[2],n.size[1]*r[3]]);return jb(a,[0,3,1,2])}return t.resizeNearestNeighbor([n.size[0]*r[1],n.size[1]*r[2]])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);pE.className="UpSampling2D",l.registerClass(pE);var mE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=KD(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=GI(e.depthwiseConstraint),r.depthwiseRegularizer=GT(e.depthwiseRegularizer),r}return _createClass(n,[{key:"build",value:function(e){if((e=rA(e)).length<4)throw new yI("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new yI("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return N_((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return N_((function(){null==a&&(a="channelsLast"),QI(a);var o=nE(e,a);if(4!==e.rank)throw new yI("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new yI("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=ek(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=jb(o,[0,3,1,2])),o}))}(e=nA(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=SD(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=rA(e);var t="channelsFirst"===this.dataFormat?e[3]:e[2],n="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=eE("channelsFirst"===this.dataFormat?e[2]:e[1],this.kernelSize[0],this.padding,this.strides[0]),a=eE(t,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],n,r,a]:[e[0],r,a,n]}},{key:"getConfig",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=XD(this.depthwiseInitializer),e.depthwiseRegularizer=jT(this.depthwiseRegularizer),e.depthwiseConstraint=jI(this.depthwiseRegularizer),e}}]),n}(iE);mE.className="DepthwiseConv2D",l.registerClass(mE);var vE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return _createClass(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return N_((function(){n.invokeCallHook(e,t);var r=nA(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return DD((function(){return ID(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return _get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(pA);vE.className="Dropout",l.registerClass(vE);var yE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return _createClass(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(vE);yE.className="SpatialDropout1D",l.registerClass(yE);var gE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,PI(r.units,"units"),r.activation=WT(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=KD(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=KD(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=GI(e.kernelConstraint),r.biasConstraint=GI(e.biasConstraint),r.kernelRegularizer=GT(e.kernelRegularizer),r.biasRegularizer=GT(e.biasRegularizer),r.activityRegularizer=GT(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],_possibleConstructorReturn(r)}return _createClass(n,[{key:"build",value:function(e){var t=(e=rA(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:_defineProperty({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=rA(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return N_((function(){n.invokeCallHook(e,t);var r,a=nA(e),i=FI(n.activation.getClassName());return null!=i?r=xD(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=xD(a,n.kernel.read()),null!=n.bias&&(r=SD(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:zT(this.activation),useBias:this.useBias,kernelInitializer:XD(this.kernelInitializer),biasInitializer:XD(this.biasInitializer),kernelRegularizer:jT(this.kernelRegularizer),biasRegularizer:jT(this.biasRegularizer),activityRegularizer:jT(this.activityRegularizer),kernelConstraint:jI(this.kernelConstraint),biasConstraint:jI(this.biasConstraint)},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);gE.className="Dense",l.registerClass(gE);var _E=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e=e||{})).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return _createClass(n,[{key:"computeOutputShape",value:function(e){var t,n=_createForOfIteratorHelper((e=rA(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new yI('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(s7){n.e(s7)}finally{n.f()}return[e[0],sD(e,1)]}},{key:"call",value:function(e,t){var n=this;return N_((function(){n.invokeCallHook(e,t);var r=nA(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=r.transpose(a)}return function(e){if(e.rank<=1)throw new yI("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],sD(e.shape,1)];return e.reshape(t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);_E.className="Flatten",l.registerClass(_E);var bE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=WT(e.activation),r}return _createClass(n,[{key:"call",value:function(e,t){var n=this;return N_((function(){n.invokeCallHook(e,t);var r=nA(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:zT(this.activation)},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);bE.className="Activation",l.registerClass(bE);var xE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return N_((function(){return e=nA(e),t=e,r=n.n,N_((function(){if(2!==t.shape.length)throw new yI("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return _D(dD(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);xE.className="RepeatVector",l.registerClass(xE);var wE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return _createClass(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new yI("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=sD(e);if(null!==i){if(0===a||u%a!=0)throw new yI(n);r[i]=u/a}else if(u!==a)throw new yI(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return N_((function(){n.invokeCallHook(e,t);var r=nA(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return r.reshape(i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);wE.className="Reshape",l.registerClass(wE);var kE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var a;if(_classCallCheck(this,n),a=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var i=hD(1,e.dims.length+1);if(!r.arraysEqual(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return a.dims=e.dims,a.dimsIncludingBatch=[0].concat(a.dims),a.inputSpec=[new lA({ndim:a.dims.length+1})],_possibleConstructorReturn(a)}return _createClass(n,[{key:"computeOutputShape",value:function(e){var t=(e=rA(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return jb(nA(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);kE.className="Permute",l.registerClass(kE);var CE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=nA(e);return Zg(bk(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return N_((function(){n.invokeCallHook(e,t);var r=nA(e),a=Zg(bk(r,n.maskValue),-1,!0);return r.mul(a.asType(r.dtype))}))}}]),n}(pA);CE.className="Masking",l.registerClass(CE);var SE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=null==e.inputLength?[a,null]:[a].concat(CI(e.inputLength))}return r.inputDim=e.inputDim,PI(r.inputDim,"inputDim"),r.outputDim=e.outputDim,PI(r.outputDim,"outputDim"),r.embeddingsInitializer=KD(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=GT(e.embeddingsRegularizer),r.activityRegularizer=GT(e.activityRegularizer),r.embeddingsConstraint=GI(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,_possibleConstructorReturn(r)}return _createClass(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return N_((function(){return n.maskZero?(e=nA(e),bk(e,Rg(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=rA(e),null==this.inputLength)return[].concat(_toConsumableArray(e),[this.outputDim]);var t=CI(this.inputLength);if(t.length!==e.length-1)throw new yI('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new yI('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat(_toConsumableArray(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return N_((function(){n.invokeCallHook(e,t);var r=nA(e);return"int32"!==r.dtype&&(r=fD(r,"int32")),wD(n.embeddings.read(),r.as1D()).reshape(rA(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:XD(this.embeddingsInitializer),embeddingsRegularizer:jT(this.embeddingsRegularizer),activityRegularizer:jT(this.activityRegularizer),embeddingsConstraint:jI(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);SE.className="Embedding",l.registerClass(SE);var IE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return _createClass(n,[{key:"mergeFunction",value:function(e){throw new gI}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new yI("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[rA(e)]),(e=e).length<2)throw new yI("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(s7){r.e(s7)}finally{r.f()}if((n=RI(n)).length>1)throw new yI("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));this.reshapeRequired=-1!==e.indexOf(null)||1!==RI(u).length}},{key:"call",value:function(e,t){var n=this;return N_((function(){if(e=e,n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=cD(r),o=_createForOfIteratorHelper(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,l=0;l<i-u;++l)s=dD(s,1);t.push(s)}}catch(s7){o.e(s7)}finally{o.f()}return n.mergeFunction(t)}var c,h=!1,f=_createForOfIteratorHelper(e);try{for(f.s();!(c=f.n()).done;){var d=c.value,p=d.rank;if(null==p){var m=d.shape,v=m[0],y=m.slice(1).concat([v]),g=d.reshape([v].concat(sD(m.slice(1))));g=(g=jb(g,[1,0])).reshape(y),t.push(g),h=!0}else if(p>1){var _=hD(1,p).concat([0]);t.push(jb(d,_)),h=!0}else t.push(d)}}catch(s7){f.e(s7)}finally{f.f()}var b=n.mergeFunction(t),x=b.rank;if(h)if(null==x){var w=b.shape,k=w[w.length-1],C=[k].concat(w.slice(0,w.length-1));b=jb(b.reshape([-1,k]),[1,0]).reshape(C)}else if(x>1){var S=[x-1].concat(hD(0,x-1));b=jb(b,S)}return b}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==(e=e)[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=_createForOfIteratorHelper(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(s7){o.e(s7)}finally{o.f()}return t=1===(i=RI(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return N_((function(){if(null==t)return null;if(!Array.isArray(t))throw new yI("`mask` should be an Array");if(!Array.isArray(e))throw new yI("`inputs` should be an Array");if(t.length!==e.length)throw new yI("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:Lg(e,0)})))[0],r=1;r<t.length-1;++r)n=rk(n,t[r]);return n}))}}]),n}(pA),DE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"mergeFunction",value:function(e){return N_((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=z_(t,e[n]);return t}))}}]),n}(IE);DE.className="Add",l.registerClass(DE);var AE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"mergeFunction",value:function(e){return N_((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Tb(t,e[n]);return t}))}}]),n}(IE);AE.className="Multiply",l.registerClass(AE);var TE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"mergeFunction",value:function(e){return N_((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=z_(t,e[n]);return Tb(1/e.length,t)}))}}]),n}(IE);TE.className="Average",l.registerClass(TE);var EE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"mergeFunction",value:function(e){return N_((function(){for(var t=e[0],n=1;n<e.length;++n)t=kb(t,e[n]);return t}))}}]),n}(IE);EE.className="Maximum",l.registerClass(EE);var RE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"mergeFunction",value:function(e){return N_((function(){for(var t=e[0],n=1;n<e.length;++n)t=Sb(t,e[n]);return t}))}}]),n}(IE);RE.className="Minimum",l.registerClass(RE);var OE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return _createClass(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new yI("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,a=_createForOfIteratorHelper(e=e);try{for(a.s();!(t=a.n()).done;){if(null!=t.value){n=!1;break}}}catch(s7){a.e(s7)}finally{a.f()}if(!n){for(var i=[],o=0;o<e.length;++o){var s=e[o].slice();s.splice(this.axis,1);var u,l=!1,c=_createForOfIteratorHelper(i);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(r.arraysEqual(h,s)){l=!0;break}}}catch(s7){c.e(s7)}finally{c.f()}l||i.push(s)}if(i.length>1)throw new yI("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return N_((function(){return yD(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new yI("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=_createForOfIteratorHelper(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(s7){i.e(s7)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new yI("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new yI("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new yI("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return N_((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)a.push(null==t[i]?Eg(e[i]).asType("bool"):t[i].rank<e[i].rank?Lg(t[i],-1):t[i]);var o=Og(a,n.axis);return Kg(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(IE);function ME(e,t){for(;e<0;)e+=t;return e}OE.className="Concatenate",l.registerClass(OE);var NE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return _createClass(n,[{key:"build",value:function(e){r.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new gI("Dot layer does not support tensors of 4D or higher rank yet.");var a=this.interpretAxes(t,n);if(t[a[0]]!==n[a[1]])throw new yI("Dimension incompatibility: "+"".concat(t[a[0]]," !== ").concat(n[a[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new yI("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],a=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return ME(t,e[n].shape.length)})):[ME(this.axes,n.shape.length),ME(this.axes,a.shape.length)],this.normalize&&(n=AA(n,t[0]),a=AA(a,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new gI("batchDot is not implemented for tensors of 4D or higher rank yet");if(r.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),r.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new gI("batchDot is not implemented for complex64-type Tensors yet.");var a=e.shape.length,i=t.shape.length;null==n&&(n=[a-1,i-2]);var o=n;return N_((function(){var n,r;if(a>i){n=a-i;for(var s=[],u=0;u<n;++u)s.push(1);t=t.reshape(t.shape.concat(s))}else if(i>a){n=i-a;for(var l=[],c=0;c<n;++c)l.push(1);e=e.reshape(e.shape.concat(l))}else n=0;if(r=2===e.shape.length&&2===t.shape.length?o[0]===o[1]?e.mul(t).sum(o[0]):e.transpose([1,0]).mul(t).sum(o[1]):e.matMul(t,o[0]!==e.shape.length-1,o[1]===t.shape.length-1),n>0){for(var h,f=[],d=h=a>i?a+i-3:a-1;d<h+n;++d)f.push(d);r=r.squeeze(f)}return 1===r.shape.length&&(r=r.expandDims(1)),r}))}(n,a,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[ME(this.axes,e.length),ME(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){r.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new gI("Dot layer does not support tensors of 4D or higher rank yet.");var a=this.interpretAxes(t,n);t.splice(a[0],1),n.splice(a[1],1),n.splice(0,1);var i=t.concat(n);return 1===i.length&&i.push(1),i}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(IE);NE.className="Dot",l.registerClass(NE);var PE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return N_((function(){n.invokeCallHook(e,t);var r=nA(e);return DD((function(){return bD(r.shape,0,n.stddev).add(r)}),(function(){return r}),t.training||!1)}))}}]),n}(pA);PE.className="GaussianNoise",l.registerClass(PE);var FE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return N_((function(){n.invokeCallHook(e,t);var r=nA(e);return n.rate>0&&n.rate<1?DD((function(){var e=Math.sqrt(n.rate/(1-n.rate));return r.mul(bD(r.shape,1,e))}),(function(){return r}),t.training||!1):r}))}}]),n}(pA);FE.className="GaussianDropout",l.registerClass(FE);var LE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return _createClass(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||nA(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return N_((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return DD((function(){var t=nA(e),a=-1.7580993408473766,i=pk(Mk(r),n.rate);i=fD(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate;return t.mul(i).add(i.add(-1).mul(a)).mul(o).add(s)}),(function(){return nA(e)}),t.training||!1)}return e}))}}]),n}(pA);function zE(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=Ww(e,t,n,r,a,o);else if(3===e.rank)i=qw(e,t,n,r,a,o);else{if(4!==e.rank)throw new gI("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=Vw(e,t,n,r,a,o)}return i}LE.className="AlphaDropout",l.registerClass(LE);var BE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=KD(e.betaInitializer||"zeros"),r.gammaInitializer=KD(e.gammaInitializer||"ones"),r.movingMeanInitializer=KD(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=KD(e.movingVarianceInitializer||"ones"),r.betaConstraint=GI(e.betaConstraint),r.gammaConstraint=GI(e.gammaConstraint),r.betaRegularizer=GT(e.betaRegularizer),r.gammaRegularizer=GT(e.gammaRegularizer),r}return _createClass(n,[{key:"build",value:function(e){e=rA(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new yI("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new lA({ndim:e.length,axes:_defineProperty({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return N_((function(){var a=null!=t.training&&t.training,i=nA(e),o=i.shape,s=o.length,u=hD(0,s),l=n.axis>=0?n.axis:n.axis+s;u.splice(l,1);var c=bI(1,s);c[l]=o[l];var h=u.slice();h.sort();var f=!r.arraysEqual(h,hD(0,s).slice(0,s-1));if(!a)return function(){if(f){var e=n.movingMean.read().reshape(c),t=n.movingVariance.read().reshape(c),r=n.center?n.beta.read().reshape(c):null,a=n.scale?n.gamma.read().reshape(c):null;return zE(i,e,t,r,a,n.epsilon)}return zE(i,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var d=_slicedToArray(function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return r.arraysEqual(a.slice().sort(),hD(0,e.rank-1))?function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return N_((function(){var i=n_(e,r),o=i.mean,s=i.variance;return[zE(e,o,s,n,t,a),o,s]}))}(e,t,n,a,i):function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return N_((function(){var i,o=n_(e,r),s=o.mean,u=o.variance,l=[],c=_createForOfIteratorHelper(hD(0,e.rank));try{for(c.s();!(i=c.n()).done;){var h=i.value;-1!==r.indexOf(h)?l.push(1):l.push(e.shape[h])}}catch(s7){c.e(s7)}finally{c.f()}var f=s.reshape(l),d=u.reshape(l),p=null==t?null:t.reshape(l),m=null==n?null:n.reshape(l);return[zE(e,f,d,m,p,a),s,u]}))}(e,t,n,a,i)}(i,n.gamma.read(),n.beta.read(),u,n.epsilon),3),p=d[0],m=d[1],v=d[2],y=function(e,t,n){N_((function(){var r=1-n,a=e.read(),i=a.sub(t).mul(r);e.write(a.sub(i))}))};return y(n.movingMean,m,n.momentum),y(n.movingVariance,v,n.momentum),p}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:XD(this.betaInitializer),gammaInitializer:XD(this.gammaInitializer),movingMeanInitializer:XD(this.movingMeanInitializer),movingVarianceInitializer:XD(this.movingVarianceInitializer),betaRegularizer:jT(this.betaRegularizer),gammaRegularizer:jT(this.gammaRegularizer),betaConstraint:jI(this.betaConstraint),gammaConstraint:jI(this.gammaConstraint)},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);BE.className="BatchNormalization",l.registerClass(BE);var WE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"==typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=_createForOfIteratorHelper(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(s7){i.e(s7)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=KD(e.betaInitializer||"zeros"),r.gammaInitializer=KD(e.gammaInitializer||"ones"),r.betaRegularizer=GT(e.betaRegularizer),r.gammaRegularizer=GT(e.gammaRegularizer),r.supportsMasking=!0,_possibleConstructorReturn(r)}return _createClass(n,[{key:"build",value:function(e){var t=(e=rA(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=_createForOfIteratorHelper(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(s7){a.e(s7)}finally{a.f()}if(this.axis.length!==RI(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.gamma=this.scale?this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,!0):null,this.beta=this.center?this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,!0):null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=nA(e),a=r.shape,i=a.length;return N_((function(){var e,t=n_(r,n.axis,!0),o=t.mean,s=t.variance,u=bI(1,i),l=_createForOfIteratorHelper(n.axis);try{for(l.s();!(e=l.n()).done;){var c=e.value;u[c]=a[c]}}catch(s7){l.e(s7)}finally{l.f()}for(var h=function(e){return null!=e&&e.shape.length!==i&&n.axis!==[i-1]?e.reshape(u):e},f=h(n.gamma.read()),d=h(n.beta.read()),p=[],m=[],v=0;v<i;++v)-1!==n.axis.indexOf(v)?(p.push(a[v]),m.push(1)):(p.push(1),m.push(a[v]));return o=o.tile(p),s=s.tile(p),f=f.tile(m),d=d.tile(m),zE(r,o,s,d,f,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:XD(this.betaInitializer),gammaInitializer:XD(this.gammaInitializer),betaRegularizer:jT(this.betaRegularizer),gammaRegularizer:jT(this.gammaRegularizer)},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);WE.className="LayerNormalization",l.registerClass(WE);var qE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new yI("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"==typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new yI("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new yI("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new lA({ndim:4})],_possibleConstructorReturn(r)}return _createClass(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=rA(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return N_((function(){return t=nA(e),r=n.padding,a=n.dataFormat,N_((function(){if(4!==t.rank)throw new yI("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new yI("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new yI("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],$b(t,e)}));var t,r,a}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA);function VE(e,t,n,r,a,i){return N_((function(){var o;QI(a),eD(i),$I(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=nE(e,a);var s="same"===r?"same":"valid";return o="max"===i?eC(e,t,n,s):tC(e,t,n,s),"channelsFirst"===a&&(o=jb(o,[0,3,1,2])),o}))}function UE(e,t,n,r,a,i){return N_((function(){var o;QI(a),eD(i),$I(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=rE(e,a);var s="same"===r?"same":"valid";return o="max"===i?rC(e,t,n,s):aC(e,t,n,s),"channelsFirst"===a&&(o=jb(o,[0,4,1,2,3])),o}))}qE.className="ZeroPadding2D",l.registerClass(qE);var jE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"==typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new yI("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(PI(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"==typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new yI("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return PI(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,$I(r.padding),r.inputSpec=[new lA({ndim:3})],_possibleConstructorReturn(r)}return _createClass(n,[{key:"computeOutputShape",value:function(e){var t=eE((e=rA(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return N_((function(){n.invokeCallHook(e,t),e=dD(nA(e),2);var r=n.poolingFunction(nA(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Bg(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA),HE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return QI(a),$I(r),VE(e,t,n,r,a,"max")}}]),n}(jE);HE.className="MaxPooling1D",l.registerClass(HE);var GE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return QI(a),$I(r),VE(e,t,n,r,a,"avg")}}]),n}(jE);GE.className="AveragePooling1D",l.registerClass(GE);var JE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new yI("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return PI(r.poolSize,"poolSize"),PI(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,QI(r.dataFormat),$I(r.padding),r.inputSpec=[new lA({ndim:4})],_possibleConstructorReturn(r)}return _createClass(n,[{key:"computeOutputShape",value:function(e){e=rA(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=eE(t,this.poolSize[0],this.padding,this.strides[0]),n=eE(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return N_((function(){return n.invokeCallHook(e,t),n.poolingFunction(nA(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA),XE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return QI(a),$I(r),VE(e,t,n,r,a,"max")}}]),n}(JE);XE.className="MaxPooling2D",l.registerClass(XE);var KE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return QI(a),$I(r),VE(e,t,n,r,a,"avg")}}]),n}(JE);KE.className="AveragePooling2D",l.registerClass(KE);var ZE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new yI("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return PI(r.poolSize,"poolSize"),PI(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,QI(r.dataFormat),$I(r.padding),r.inputSpec=[new lA({ndim:5})],_possibleConstructorReturn(r)}return _createClass(n,[{key:"computeOutputShape",value:function(e){e=rA(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=eE(t,this.poolSize[0],this.padding,this.strides[0]),n=eE(n,this.poolSize[1],this.padding,this.strides[1]),r=eE(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return N_((function(){return n.invokeCallHook(e,t),n.poolingFunction(nA(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA),YE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return QI(a),$I(r),UE(e,t,n,r,a,"max")}}]),n}(ZE);YE.className="MaxPooling3D",l.registerClass(YE);var QE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return QI(a),$I(r),UE(e,t,n,r,a,"avg")}}]),n}(ZE);QE.className="AveragePooling3D",l.registerClass(QE);var $E=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).inputSpec=[new lA({ndim:3})],r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new gI}}]),n}(pA),eR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e||{})}return _createClass(n,[{key:"call",value:function(e,t){return N_((function(){var t=nA(e);return e_(t,1)}))}}]),n}($E);eR.className="GlobalAveragePooling1D",l.registerClass(eR);var tR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e||{})}return _createClass(n,[{key:"call",value:function(e,t){return N_((function(){var t=nA(e);return gk(t,1)}))}}]),n}($E);tR.className="GlobalMaxPooling1D",l.registerClass(tR);var nR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,QI(r.dataFormat),r.inputSpec=[new lA({ndim:4})],r}return _createClass(n,[{key:"computeOutputShape",value:function(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new gI}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(pA),rR=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"call",value:function(e,t){var n=this;return N_((function(){var t=nA(e);return e_(t,"channelsLast"===n.dataFormat?[1,2]:[2,3])}))}}]),n}(nR);rR.className="GlobalAveragePooling2D",l.registerClass(rR);var aR=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"call",value:function(e,t){var n=this;return N_((function(){var t=nA(e);return gk(t,"channelsLast"===n.dataFormat?[1,2]:[2,3])}))}}]),n}(nR);function iR(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new yI("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function oR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return N_((function(){var u=t.shape.length;if(u<3)throw new yI("Input should be at least 3D, but is ".concat(u,"D."));var l=[1,0].concat(hD(2,u));if(t=jb(t,l),null!=i)throw new gI("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=a.asType("bool").asType("float32")).rank===u-1&&(a=Lg(a,-1)),a=jb(a,l)),r&&(t=Jk(t,0),null!=a&&(a=Jk(a,0)));var c,h,f,d=[],p=n,m=t.shape[0],v=qg(t);null!=a&&(h=qg(a));for(var y=function(t){var n=v[t],r=N_((function(){return e(n,p)}));if(null==a)c=r[0],p=r[1];else{var i=N_((function(){var e=h[t],n=Eg(e).sub(e);return{output:r[0].mul(e).add(p[0].mul(n)),newStates:p.map((function(t,a){return r[1][a].mul(e).add(t.mul(n))}))}}));c=i.output,p=i.newStates}s&&d.push(c)},g=0;g<m;++g)y(g);return s&&(f=Wg(d,1)),[c,f,p]}))}aR.className="GlobalMaxPooling2D",l.registerClass(aR);var sR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,a;if(_classCallCheck(this,n),r=t.call(this,e),null==e.cell)throw new yI("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new mR({cells:e.cell}):e.cell).stateSize)throw new yI("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new lA({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],_possibleConstructorReturn(r)}return _createClass(n,[{key:"getStates",value:function(){return null==this.states_?hD(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){eA(e)&&(e=e[0]),e=e;var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=_createForOfIteratorHelper(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(s7){o.e(s7)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return N_((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"build",value:function(e){if(null!=this.numConstants)throw new gI("Constants support is not implemented in RNN yet.");eA(e)&&(e=e[0]),e=e,this.inputSpec[0]=new lA({shape:[this.stateful?e[0]:null,null,e[e.length-1]]});var t,n=[e[0]].concat(e.slice(2));if(this.cell.build(n),t=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!r.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),t))throw new yI("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=t.map((function(e){return new lA({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];N_((function(){if(!t.stateful)throw new mI("Cannot call resetStates() on an RNN Layer that is not stateful.");var a=t.inputSpec[0].shape[0];if(null==a)throw new yI("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)t.states_=Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return Ig([a,e])})):[Ig([a,t.cell.stateSize])];else if(null==e)P_(t.states_),null!=t.keptStates&&(P_(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Ig([a,e])})):t.states_[0]=Ig([a,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new yI("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):P_(t.states_);for(var i=0;i<t.states_.length;++i){var o=e[i],s=Array.isArray(t.cell.stateSize)?t.cell.stateSize[i]:t.cell.stateSize,u=[a,s];if(!r.arraysEqual(o.shape,u))throw new yI("State ".concat(i," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(o.shape));t.states_[i]=o}}t.states_=t.states_.map((function(e){return F_(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=iR(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,l=_createForOfIteratorHelper(r);try{for(l.s();!(u=l.n()).done;){var c=u.value;this.stateSpec.push(new lA({shape:c.shape}))}}catch(s7){l.e(s7)}finally{l.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof cA){var h=[e].concat(o),f=this.inputSpec.concat(s),d=this.inputSpec;this.inputSpec=f;var p=_get(_getPrototypeOf(n.prototype),"apply",this).call(this,h,t);return this.inputSpec=d,p}return _get(_getPrototypeOf(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return N_((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=nA(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new yI("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=oR((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),l=u[0],c=u[1],h=u[2];n.stateful&&n.resetStates(h,a);var f=n.returnSequences?c:l;return n.returnState?[f].concat(h):f}))}},{key:"getInitialState",value:function(e){var t=this;return N_((function(){var n=Ig(e.shape);return n=dD(n=r_(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?_D(n,[1,e]):n})):t.cell.stateSize>1?[_D(n,[1,t.cell.stateSize])]:[n]}))}},{key:"setFastWeightInitDuringBuild",value:function(e){_get(_getPrototypeOf(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e.numConstants=this.numConstants);var t=this.cell.getConfig();e.cell={className:this.cell.getClassName(),config:t};var r=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,r),e}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=DA(t.cell,n);return new e(Object.assign(t,{cell:r}))}}]),n}(pA);sR.className="RNN",l.registerClass(sR);var uR=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(pA),lR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,PI(r.units,"units"),r.activation=WT(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=KD(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=KD(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=KD(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=GT(e.kernelRegularizer),r.recurrentRegularizer=GT(e.recurrentRegularizer),r.biasRegularizer=GT(e.biasRegularizer),r.kernelConstraint=GI(e.kernelConstraint),r.recurrentConstraint=GI(e.recurrentConstraint),r.biasConstraint=GI(e.biasConstraint),r.dropout=lD([1,cD([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=lD([1,cD([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return _createClass(n,[{key:"build",value:function(e){e=rA(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return N_((function(){if(2!==(e=e).length)throw new yI("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=vR((function(){return Eg(e)}),n.dropout,i)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=vR((function(){return Eg(r)}),n.recurrentDropout,i));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=xD(null!=o?Tb(e,o):e,n.kernel.read()),null!=n.bias&&(a=SD(a,n.bias.read())),null!=s&&(r=Tb(r,s));var u=z_(a,xD(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:zT(this.activation),useBias:this.useBias,kernelInitializer:XD(this.kernelInitializer),recurrentInitializer:XD(this.recurrentInitializer),biasInitializer:XD(this.biasInitializer),kernelRegularizer:jT(this.kernelRegularizer),recurrentRegularizer:jT(this.recurrentRegularizer),biasRegularizer:jT(this.biasRegularizer),activityRegularizer:jT(this.activityRegularizer),kernelConstraint:jI(this.kernelConstraint),recurrentConstraint:jI(this.recurrentConstraint),biasConstraint:jI(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(uR);lR.className="SimpleRNNCell",l.registerClass(lR);var cR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),e.cell=new lR(e),t.call(this,e)}return _createClass(n,[{key:"call",value:function(e,t){var r=this;return N_((function(){return null!=r.cell.dropoutMask&&(P_(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(P_(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),_get(_getPrototypeOf(n.prototype),"call",r).call(r,e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:zT(this.activation),useBias:this.useBias,kernelInitializer:XD(this.kernelInitializer),recurrentInitializer:XD(this.recurrentInitializer),biasInitializer:XD(this.biasInitializer),kernelRegularizer:jT(this.kernelRegularizer),recurrentRegularizer:jT(this.recurrentRegularizer),biasRegularizer:jT(this.biasRegularizer),activityRegularizer:jT(this.activityRegularizer),kernelConstraint:jI(this.kernelConstraint),recurrentConstraint:jI(this.recurrentConstraint),biasConstraint:jI(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete t.cell,Object.assign(e,t),e}},{key:"units",get:function(){return this.cell.units}},{key:"activation",get:function(){return this.cell.activation}},{key:"useBias",get:function(){return this.cell.useBias}},{key:"kernelInitializer",get:function(){return this.cell.kernelInitializer}},{key:"recurrentInitializer",get:function(){return this.cell.recurrentInitializer}},{key:"biasInitializer",get:function(){return this.cell.biasInitializer}},{key:"kernelRegularizer",get:function(){return this.cell.kernelRegularizer}},{key:"recurrentRegularizer",get:function(){return this.cell.recurrentRegularizer}},{key:"biasRegularizer",get:function(){return this.cell.biasRegularizer}},{key:"kernelConstraint",get:function(){return this.cell.kernelConstraint}},{key:"recurrentConstraint",get:function(){return this.cell.recurrentConstraint}},{key:"biasConstraint",get:function(){return this.cell.biasConstraint}},{key:"dropout",get:function(){return this.cell.dropout}},{key:"recurrentDropout",get:function(){return this.cell.recurrentDropout}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(sR);cR.className="SimpleRNN",l.registerClass(cR);var hR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,PI(r.units,"units"),r.activation=WT(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=WT(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=KD(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=KD(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=KD(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=GT(e.kernelRegularizer),r.recurrentRegularizer=GT(e.recurrentRegularizer),r.biasRegularizer=GT(e.biasRegularizer),r.kernelConstraint=GI(e.kernelConstraint),r.recurrentConstraint=GI(e.recurrentConstraint),r.biasConstraint=GI(e.biasConstraint),r.dropout=lD([1,cD([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=lD([1,cD([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return _createClass(n,[{key:"build",value:function(e){e=rA(e),this.kernel=this.addWeight("kernel",[e[e.length-1],3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return N_((function(){if(2!==(e=e).length)throw new yI("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=vR((function(){return Eg(e)}),n.dropout,r,3)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=vR((function(){return Eg(a)}),n.recurrentDropout,r,3));var i,o,s,u=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=Tb(e,n.dropoutMask[0]));var l=xD(e,n.kernel.read());n.useBias&&(l=SD(l,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=Tb(a,u[0]));var c=n.recurrentKernel.read(),h=_slicedToArray(o_(c,[2*n.units,n.units],c.rank-1),2),f=h[0],d=h[1],p=xD(a,f),m=_slicedToArray(o_(l,3,l.rank-1),3),v=m[0],y=m[1],g=m[2],_=_slicedToArray(o_(p,2,p.rank-1),2),b=_[0],x=_[1];i=n.recurrentActivation.apply(z_(v,b)),o=n.recurrentActivation.apply(z_(y,x));var w=xD(Tb(o,a),d);s=n.activation.apply(z_(g,w));var k=z_(Tb(i,a),Tb(z_(1,rb(i)),s));return[k,k]}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:zT(this.activation),recurrentActivation:zT(this.recurrentActivation),useBias:this.useBias,kernelInitializer:XD(this.kernelInitializer),recurrentInitializer:XD(this.recurrentInitializer),biasInitializer:XD(this.biasInitializer),kernelRegularizer:jT(this.kernelRegularizer),recurrentRegularizer:jT(this.recurrentRegularizer),biasRegularizer:jT(this.biasRegularizer),activityRegularizer:jT(this.activityRegularizer),kernelConstraint:jI(this.kernelConstraint),recurrentConstraint:jI(this.recurrentConstraint),biasConstraint:jI(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(uR);hR.className="GRUCell",l.registerClass(hR);var fR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new hR(e),t.call(this,e)}return _createClass(n,[{key:"call",value:function(e,t){var r=this;return N_((function(){return null!=r.cell.dropoutMask&&(P_(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(P_(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),_get(_getPrototypeOf(n.prototype),"call",r).call(r,e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:zT(this.activation),recurrentActivation:zT(this.recurrentActivation),useBias:this.useBias,kernelInitializer:XD(this.kernelInitializer),recurrentInitializer:XD(this.recurrentInitializer),biasInitializer:XD(this.biasInitializer),kernelRegularizer:jT(this.kernelRegularizer),recurrentRegularizer:jT(this.recurrentRegularizer),biasRegularizer:jT(this.biasRegularizer),activityRegularizer:jT(this.activityRegularizer),kernelConstraint:jI(this.kernelConstraint),recurrentConstraint:jI(this.recurrentConstraint),biasConstraint:jI(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete t.cell,Object.assign(e,t),e}},{key:"units",get:function(){return this.cell.units}},{key:"activation",get:function(){return this.cell.activation}},{key:"recurrentActivation",get:function(){return this.cell.recurrentActivation}},{key:"useBias",get:function(){return this.cell.useBias}},{key:"kernelInitializer",get:function(){return this.cell.kernelInitializer}},{key:"recurrentInitializer",get:function(){return this.cell.recurrentInitializer}},{key:"biasInitializer",get:function(){return this.cell.biasInitializer}},{key:"kernelRegularizer",get:function(){return this.cell.kernelRegularizer}},{key:"recurrentRegularizer",get:function(){return this.cell.recurrentRegularizer}},{key:"biasRegularizer",get:function(){return this.cell.biasRegularizer}},{key:"kernelConstraint",get:function(){return this.cell.kernelConstraint}},{key:"recurrentConstraint",get:function(){return this.cell.recurrentConstraint}},{key:"biasConstraint",get:function(){return this.cell.biasConstraint}},{key:"dropout",get:function(){return this.cell.dropout}},{key:"recurrentDropout",get:function(){return this.cell.recurrentDropout}},{key:"implementation",get:function(){return this.cell.implementation}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(sR);fR.className="GRU",l.registerClass(fR);var dR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,PI(r.units,"units"),r.activation=WT(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=WT(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=KD(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=KD(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=KD(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=GT(e.kernelRegularizer),r.recurrentRegularizer=GT(e.recurrentRegularizer),r.biasRegularizer=GT(e.biasRegularizer),r.kernelConstraint=GI(e.kernelConstraint),r.recurrentConstraint=GI(e.recurrentConstraint),r.biasConstraint=GI(e.biasConstraint),r.dropout=lD([1,cD([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=lD([1,cD([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return _createClass(n,[{key:"build",value:function(e){var t,n;if(e=rA(e),this.kernel=this.addWeight("kernel",[e[e.length-1],4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var r=this.biasInitializer,a=this.units;n=new((t=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"apply",value:function(e,t){var n=r.apply([a]),i=(new OD).apply([a]),o=r.apply([2*a]);return gD(gD(n,i),o)}}]),n}(ED)).className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return N_((function(){var r=null!=t.training&&t.training;if(3!==(e=e).length)throw new yI("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=vR((function(){return Eg(e)}),n.dropout,r,4)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=vR((function(){return Eg(a)}),n.recurrentDropout,r,4));var o,s,u,l,c=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=Tb(e,n.dropoutMask[0]));var h=xD(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=Tb(a,c[0])),h=z_(h,xD(a,n.recurrentKernel.read())),n.useBias&&(h=SD(h,n.bias.read()));var f=_slicedToArray(o_(h,4,h.rank-1),4),d=f[0],p=f[1],m=f[2],v=f[3];o=n.recurrentActivation.apply(d),s=n.recurrentActivation.apply(p),u=z_(Tb(s,i),Tb(o,n.activation.apply(m))),l=n.recurrentActivation.apply(v);var y=Tb(l,n.activation.apply(u));return[y,y,u]}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:zT(this.activation),recurrentActivation:zT(this.recurrentActivation),useBias:this.useBias,kernelInitializer:XD(this.kernelInitializer),recurrentInitializer:XD(this.recurrentInitializer),biasInitializer:XD(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:jT(this.kernelRegularizer),recurrentRegularizer:jT(this.recurrentRegularizer),biasRegularizer:jT(this.biasRegularizer),activityRegularizer:jT(this.activityRegularizer),kernelConstraint:jI(this.kernelConstraint),recurrentConstraint:jI(this.recurrentConstraint),biasConstraint:jI(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(uR);dR.className="LSTMCell",l.registerClass(dR);var pR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new dR(e),t.call(this,e)}return _createClass(n,[{key:"call",value:function(e,t){var r=this;return N_((function(){return null!=r.cell.dropoutMask&&(P_(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(P_(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),_get(_getPrototypeOf(n.prototype),"call",r).call(r,e,{mask:null==t?null:t.mask,training:null==t?null:t.training,initialState:null==t?null:t.initialState})}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:zT(this.activation),recurrentActivation:zT(this.recurrentActivation),useBias:this.useBias,kernelInitializer:XD(this.kernelInitializer),recurrentInitializer:XD(this.recurrentInitializer),biasInitializer:XD(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:jT(this.kernelRegularizer),recurrentRegularizer:jT(this.recurrentRegularizer),biasRegularizer:jT(this.biasRegularizer),activityRegularizer:jT(this.activityRegularizer),kernelConstraint:jI(this.kernelConstraint),recurrentConstraint:jI(this.recurrentConstraint),biasConstraint:jI(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return delete t.cell,Object.assign(e,t),e}},{key:"units",get:function(){return this.cell.units}},{key:"activation",get:function(){return this.cell.activation}},{key:"recurrentActivation",get:function(){return this.cell.recurrentActivation}},{key:"useBias",get:function(){return this.cell.useBias}},{key:"kernelInitializer",get:function(){return this.cell.kernelInitializer}},{key:"recurrentInitializer",get:function(){return this.cell.recurrentInitializer}},{key:"biasInitializer",get:function(){return this.cell.biasInitializer}},{key:"unitForgetBias",get:function(){return this.cell.unitForgetBias}},{key:"kernelRegularizer",get:function(){return this.cell.kernelRegularizer}},{key:"recurrentRegularizer",get:function(){return this.cell.recurrentRegularizer}},{key:"biasRegularizer",get:function(){return this.cell.biasRegularizer}},{key:"kernelConstraint",get:function(){return this.cell.kernelConstraint}},{key:"recurrentConstraint",get:function(){return this.cell.recurrentConstraint}},{key:"biasConstraint",get:function(){return this.cell.biasConstraint}},{key:"dropout",get:function(){return this.cell.dropout}},{key:"recurrentDropout",get:function(){return this.cell.recurrentDropout}},{key:"implementation",get:function(){return this.cell.implementation}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(sR);pR.className="LSTM",l.registerClass(pR);var mR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).cells=e.cells,r}return _createClass(n,[{key:"call",value:function(e,t){var n=this;return N_((function(){var r,a=(e=e).slice(1),i=[],o=_createForOfIteratorHelper(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(s7){o.e(s7)}finally{o.f()}i.reverse();for(var u,l=[],c=0;c<n.cells.length;++c){var h=n.cells[c];a=i[c],u=0===c?[e[0]].concat(a):[u[0]].concat(a),u=h.call(u,t),l.push(u.slice(1))}a=[];var f,d=_createForOfIteratorHelper(l.slice().reverse());try{for(d.s();!(f=d.n()).done;){var p,m=f.value;(p=a).push.apply(p,_toConsumableArray(m))}}catch(s7){d.e(s7)}finally{d.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;eA(e)&&(e=e[0]),e=e,this.cells.forEach((function(n,r){nD("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e,t=[],r=_createForOfIteratorHelper(this.cells);try{for(r.s();!(e=r.n()).done;){var a=e.value;t.push({className:a.getClassName(),config:a.getConfig()})}}catch(s7){r.e(s7)}finally{r.f()}var i={cells:t},o=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(i,o),i}},{key:"getWeights",value:function(){var e,t=[],n=_createForOfIteratorHelper(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,_toConsumableArray(r.weights))}}catch(s7){n.e(s7)}finally{n.f()}return oA(t)}},{key:"setWeights",value:function(e){var t,n=[],r=_createForOfIteratorHelper(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=e.splice(a.weights.length),o=0;o<a.weights.length;++o)n.push([a.weights[o],i[o]])}catch(s7){r.e(s7)}finally{r.f()}sA(n)}},{key:"stateSize",get:function(){var e,t=[],n=_createForOfIteratorHelper(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,_toConsumableArray(r.stateSize)):t.push(r.stateSize)}}catch(s7){n.e(s7)}finally{n.f()}return t}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=_createForOfIteratorHelper(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,_toConsumableArray(r.trainableWeights))}}catch(s7){n.e(s7)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=_createForOfIteratorHelper(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,_toConsumableArray(r.nonTrainableWeights))}}catch(s7){n.e(s7)}finally{n.f()}if(!this.trainable){var a,i=[],o=_createForOfIteratorHelper(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,_toConsumableArray(s.trainableWeights))}}catch(s7){o.e(s7)}finally{o.f()}return i.concat(t)}return t}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=_createForOfIteratorHelper(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(DA(o,r))}}catch(s7){i.e(s7)}finally{i.f()}return new e({cells:a})}}]),n}(uR);function vR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;function a(){return ID(e(),t)}if(r>1){for(var i=[],o=0;o<r;o++)i.push(DD(a,e,n));return i.map((function(e){return F_(e.clone())}))}return F_(DD(a,e,n).clone())}mR.className="StackedRNNCells",l.registerClass(mR);var yR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).layer=e.layer,r}return _createClass(n,[{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){_get(_getPrototypeOf(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=DA(t.layer,n);delete t.layer;var a={layer:r};return Object.assign(a,t),new e(a)}}]),n}(pA),gR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return _createClass(n,[{key:"build",value:function(e){if((e=rA(e)).length<3)throw new yI("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),_get(_getPrototypeOf(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=rA(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t);return[n[0],e[1]].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return N_((function(){return oR((function(e,r){return[nA(n.layer.call(e,t)),[]]}),e=nA(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(yR);gR.className="TimeDistributed",l.registerClass(gR);var _R,bR,xR=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;_classCallCheck(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=DA(i),a.goBackwards=!0!==a.goBackwards;var o={};if(o.className=e.layer.getClassName(),o.config=a,r.backwardLayer=DA(o),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,MI(ZI,"BidirectionalMergeMode",r.mergeMode),e.weights)throw new gI("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return _createClass(n,[{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=Math.floor(e.length/2);this.forwardLayer.setWeights(e.slice(0,t)),this.backwardLayer.setWeights(e.slice(t))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState?(r=a.slice(1),t=a[0]):t=a[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):kI(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=iR(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return _get(_getPrototypeOf(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new yI("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,_toConsumableArray(r));var l=r.map((function(e){return new lA({shape:e.shape})}));this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,_toConsumableArray(l))}if(null!=a)throw new gI("Support for constants in Bidirectional layers is not implemented yet.");for(var c=o[0]instanceof cA,h=0,f=o;h<f.length;h++){if(f[h]instanceof cA!==c)throw new yI("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(c){var d=[e].concat(o),p=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=p;var v=_get(_getPrototypeOf(n.prototype),"apply",this).call(this,d,t);return this.inputSpec=m,v}return _get(_getPrototypeOf(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return N_((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=Jk(a,1)),"concat"===n.mergeMode?o=yD([r,a]):"sum"===n.mergeMode?o=z_(r,a):"ave"===n.mergeMode?o=Tb(.5,z_(r,a)):"mul"===n.mergeMode?o=Tb(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;nD(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),nD(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"setFastWeightInitDuringBuild",value:function(e){_get(_getPrototypeOf(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=_get(_getPrototypeOf(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}}],[{key:"fromConfig",value:function(e,t){var n=DA(t.layer);if(delete t.layer,null!=t.numConstants)throw new gI("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(yR);xR.className="Bidirectional",l.registerClass(xR),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(_R||(_R={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(bR||(bR={}));var wR=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],kR=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],CR=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}],SR=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}],IR=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],DR=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],AR=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}],TR=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],ER=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],RR=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],OR=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],MR=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],NR=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}],PR=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],FR=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],LR=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}];function zR(e){return null===e?null:BR(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function BR(e){return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof Dy))}function WR(e){return e instanceof Dy?{value:e.clone(),recurse:!1}:BR(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}(function(){function e(t,n,r,a,i,o,s){_classCallCheck(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=e.nextId++}return _createClass(e,[{key:"clearAndClose",value:function(){this.tensors.forEach((function(e){return e.tensor.dispose()})),this.tensors=[],this.closed_=!0}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),this.assertShapesMatchAllowUndefinedSize(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n&&n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n&&n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return mg([],[0].concat(this.elementShape));var r=this.readMany(e);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Wg(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return mg([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),Og(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,_toConsumableArray(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,qg(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];N_((function(){t=t.reshape([1,r,i]);for(var s=0;s<e.length;++s)o[s]=cx(t,[0,0===s?0:a[s-1],0],[1,e[s],i]).reshape(n.elementShape);return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}},{key:"assertShapesMatchAllowUndefinedSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";r.assert(this.shapesEqualAllowUndefinedSize(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}},{key:"shapesEqualAllowUndefinedSize",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(-1!==e[n]&&-1!==t[n]&&e[n]!==t[n])return!1;return!0}},{key:"closed",get:function(){return this.closed_}}]),e}()).nextId=0;var qR=function(){function e(t){if(_classCallCheck(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return _createClass(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(s7){n.e(s7)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),VR=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,n.INITIAL_CAPACITY)}return _createClass(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){_get(_getPrototypeOf(n.prototype),"isFull",this).call(this)&&this.expand(),_get(_getPrototypeOf(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){_get(_getPrototypeOf(n.prototype),"isFull",this).call(this)&&this.expand(),_get(_getPrototypeOf(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(qR);VR.INITIAL_CAPACITY=32;var UR,jR=function(){function e(){_classCallCheck(this,e)}var t,n,r,a,i,o;return _createClass(e,[{key:"toArray",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent;case 9:e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"toArrayForTest",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=3,t.next();case 3:r=e.sent;case 4:if(r.done){e.next=11;break}return n.push(r.value),e.next=8,t.next();case 8:r=e.sent;case 9:e.next=4;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"resolveFully",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent;case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"resolveWhile",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value);case 9:e.next=4;break;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"handleErrors",value:function(e){return new $R(this,e)}},{key:"filter",value:function(e){return new YR(this,e)}},{key:"map",value:function(e){return new QR(this,e)}},{key:"mapAsync",value:function(e){return new eO(this,e)}},{key:"serialMapAsync",value:function(e){return new eO(this,e).serial()}},{key:"flatmap",value:function(e){return new tO(this,e)}},{key:"forEachAsync",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"serialForEach",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new ZR(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zR;return this.rowMajorBatch(e,t).map((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zR;return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,a=t[0];if(r.has(a))throw new Error("Circular references are not supported.");var i=n(t);if(i.recurse&&null!==i.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(BR(a)){var o=Array.isArray(a)?[]:{};r.add(a);var s=function(a){var i=e(t.map((function(e){return e[a]})),n,r);o[a]=i};for(var u in a)s(u);return r.delete(a),o}throw new Error("Can't recurse into non-iterable type: ".concat(a))}return i.value}(e,t)}(e,n)}))}},{key:"concatenate",value:function(e,t){return new nO(new HR([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new KR(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new XR(this,e)}},{key:"prefetch",value:function(e){return new rO(this,e)}},{key:"shuffle",value:function(e,t){return new aO(this,e,t)}},{key:"serial",value:function(){return new JR(this)}}]),e}(),HR=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e){var t;return _classCallCheck(this,r),(t=n.call(this)).items=e,t.trav=0,t}return _createClass(r,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],e.abrupt("return",(this.trav++,{value:(n=t,function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==t)return null;if(a.has(t))throw new Error("Circular references are not supported.");if(r.has(t))return r.get(t);var i=n(t);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(BR(t)){var o=Array.isArray(t)?[]:{};for(var s in a.add(t),t){var u=e(t[s],n,r,a);o[s]=u}return a.delete(t),o}throw new Error("Can't recurse into non-iterable type: ".concat(t))}return r.set(t,i.value),i.value}(n,WR)),done:!1}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(jR),GR=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e){var t;return _classCallCheck(this,r),(t=n.call(this)).nextFn=e,t}return _createClass(r,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 7:case"end":return e.stop()}}),e,this,[[0,4]])}))),function(){return t.apply(this,arguments)})}]),r}(jR),JR=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e){var t;return _classCallCheck(this,a),(t=r.call(this)).upstream=e,t.lastRead=Promise.resolve({value:null,done:!1}),t}return _createClass(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(jR),XR=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n;return _classCallCheck(this,a),(n=r.call(this)).upstream=e,n.maxCount=t,n.count=0,n.lastRead=Promise.resolve({value:null,done:!1}),n}return _createClass(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:P_(t.value);case 7:e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(jR),KR=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t){var a;return _classCallCheck(this,r),(a=n.call(this)).upstream=e,a.maxCount=t,a.count=0,a}return _createClass(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(jR),ZR=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return _classCallCheck(this,a),(n=r.call(this)).upstream=e,n.batchSize=t,n.enableSmallLastBatch=i,n.lastRead=Promise.resolve({value:null,done:!1}),n}return _createClass(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=10;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=7;break}return e.abrupt("return",this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0});case 7:t.push(n.value);case 8:e.next=1;break;case 10:return e.abrupt("return",{value:t,done:!1});case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(jR),YR=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n;return _classCallCheck(this,a),(n=r.call(this)).upstream=e,n.predicate=t,n.lastRead=Promise.resolve({value:null,done:!1}),n}return _createClass(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=5;break}return e.abrupt("return",t);case 5:P_(t.value);case 6:e.next=0;break;case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(jR),QR=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t){var a;return _classCallCheck(this,r),(a=n.call(this)).upstream=e,a.transform=t,a}return _createClass(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=a.getTensorsInContainer(t.value),r=this.transform(t.value),i=a.getTensorsInContainer(r),o=_createForOfIteratorHelper(n);try{for(o.s();!(s=o.n()).done;)u=s.value,a.isTensorInList(u,i)||u.dispose()}catch(s7){o.e(s7)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(jR),$R=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n;return _classCallCheck(this,a),(n=r.call(this)).upstream=e,n.handler=t,n.count=0,n.lastRead=Promise.resolve({value:null,done:!1}),n}return _createClass(a,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.upstream.next();case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),this.handler(e.t0)){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:e.next=0;break;case 12:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return t.apply(this,arguments)})}]),a}(jR),eO=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t){var a;return _classCallCheck(this,r),(a=n.call(this)).upstream=e,a.transform=t,a}return _createClass(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=a.getTensorsInContainer(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,i=a.getTensorsInContainer(r),o=_createForOfIteratorHelper(n);try{for(o.s();!(s=o.n()).done;)u=s.value,a.isTensorInList(u,i)||u.dispose()}catch(s7){o.e(s7)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(jR),tO=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t){var a;return _classCallCheck(this,r),(a=n.call(this)).upstream=e,a.transform=t,a}return _createClass(r,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=a.getTensorsInContainer(t.value),r=this.transform(t.value),i=a.getTensorsInContainer(r),this.outputQueue.pushAll(r),o=_createForOfIteratorHelper(n);try{for(o.s();!(s=o.n()).done;)u=s.value,a.isTensorInList(u,i)||u.dispose()}catch(s7){o.e(s7)}finally{o.f()}return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(){var e;return _classCallCheck(this,a),(e=r.call(this)).outputQueue=new VR,e.lastRead=Promise.resolve({value:null,done:!1}),e}return _createClass(a,[{key:"next",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"serialNext",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(jR)),nO=function(e){_inherits(a,e);var t,n,r=_createSuper(a);function a(e,t){var n;return _classCallCheck(this,a),(n=r.call(this)).baseErrorHandler=t,n.lastRead=null,n.iterator=null,n.moreIterators=e,n}return _createClass(a,[{key:"summary",value:function(){return"TODO: fill in upstream of chained summaries -> Chained"}},{key:"next",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.readFromChain(this.lastRead),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"readFromChain",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=9;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 9:return e.next=11,this.iterator.next();case 11:return r=e.sent,e.abrupt("return",r.done?(this.iterator=null,this.readFromChain(t)):r);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),a}(jR);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(UR||(UR={}));var rO=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new qR(r),a}return _createClass(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(jR),aO=function(e){_inherits(i,e);var t,n,a=_createSuper(i);function i(e,t,n){var o;return _classCallCheck(this,i),(o=a.call(this,e,t)).upstream=e,o.windowSize=t,o.upstreamExhausted=!1,o.random=Dk.alea(n||r.now().toString()),o.lastRead=Promise.resolve({value:null,done:!1}),o}return _createClass(i,[{key:"next",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=11;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if((n=e.sent).done){e.next=8;break}return e.abrupt("return",(this.refill(),n));case 8:this.upstreamExhausted=!0;case 9:e.next=1;break;case 11:return e.abrupt("return",{value:null,done:!0});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(rO),iO=function(){function e(){_classCallCheck(this,e),this.size=null}var t,n,a;return _createClass(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this;return r.assert(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),oO(_asyncToGenerator(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,sO));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,oO(_asyncToGenerator(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,oO(_asyncToGenerator(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return N_((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"map",value:function(e){var t=this;return oO(_asyncToGenerator(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return N_((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return oO(_asyncToGenerator(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return oO(_asyncToGenerator(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,oO(_asyncToGenerator(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(r=(a=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.t1=!1,e.abrupt("return",{value:e.t0,done:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),new GR(a)).take(e),new nO(r,void 0)));case 1:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,oO(_asyncToGenerator(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var a=this,i=Dk.alea(t||r.now().toString());return oO(_asyncToGenerator(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.int32(),n&&(r+=i.int32()),t.next=4,a.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,r.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,oO(_asyncToGenerator(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"toArrayForTest",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function oO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){_inherits(i,n);var r,a=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=a.apply(this,arguments)).size=t,e}return _createClass(i,[{key:"iterator",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})}]),i}(iO))}function sO(e){return null===e?null:null==(t=e[0])||null===(n=t)||"object"!=typeof n&&"function"!=typeof n||Array.isArray(t)||"object"==typeof t&&t instanceof Dy||r.isTypedArray(t)?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Dy?Wg(e):mg(e)}(e),recurse:!1}:{value:null,recurse:!0};var t,n}function uO(e,t,n,a){for(var i=r.getTypedArrayFromDType(a,r.sizeFromShape(n)),o=0;o<i.length;++o){for(var s=o*t,u=e[s],l=0;l<t;++l){var c=e[s+l];c>u&&(u=c)}i[o]=u}return i}function lO(e,t,n,a,i){for(var o=t.length,s=r.sizeFromShape(t),u=r.computeStrides(t),l=r.computeStrides(i),c=r.getTypedArrayFromDType(n,r.sizeFromShape(i)),h=0;h<s;++h){for(var f=r.indexToLoc(h,o,u),d=new Array(f.length),p=0;p<d.length;p++)d[p]=f[a[p]];c[r.locToIndex(d,o,l)]=e[h]}return c}function cO(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&r.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}function hO(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,h=a.effectiveFilterWidth,f=a.padInfo.top,d=a.padInfo.left,p="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Mg(a.outShape,n),v=m.values,y=a.outShape[1]*a.outShape[2]*a.outShape[3],g=a.outShape[2]*a.outShape[3],_=a.outShape[3],b=0;b<a.batchSize;++b)for(var x=b*y,w=b*r[0],k=0;k<a.inChannels;++k)for(var C=0;C<a.outHeight;++C)for(var S=C*o-f,I=Math.max(0,S),D=Math.min(a.inHeight,c+S),A=x+C*g,T=0;T<a.outWidth;++T){for(var E=T*s-d,R=Math.max(0,E),O=Math.min(a.inWidth,h+E),M=p,N=0,P=0,F=I;F<D;F+=u){for(var L=w+F*r[1],z=R;z<O;z+=l){var B=e[L+z*r[2]+k];"max"===i&&B>M?M=B:"avg"===i&&(N+=B,P++)}if(isNaN(M))break}v[A+T*_+k]="avg"===i?N/P:M}return m}function fO(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Mg(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,m=Mg(t,n,e),v=0;v<r.batchSize;++v)for(var y=0;y<r.inChannels;++y)for(var g=0;g<r.outHeight;++g){for(var _=g*s-d,b=_;b<0;)b+=l;for(var x=Math.min(r.inHeight,h+_),w=0;w<r.outWidth;++w){for(var k=w*u-p,C=k;C<0;)C+=c;for(var S=Math.min(r.inWidth,f+k),I=Number.NEGATIVE_INFINITY,D=-1,A=b;A<x;A+=l)for(var T=A-_,E=C;E<S;E+=c){var R=E-k,O=m.get(v,A,E,y);O>I&&(I=O,D=a?i?((v*r.inHeight+A)*r.inWidth+E)*r.inChannels+y:(A*r.inWidth+E)*r.inChannels+y:T*f+R)}o.set(D,v,g,w,y)}}return o}iO.MAX_BUFFER_SIZE=1e4,Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");var dO=_.nonMaxSuppressionV3,pO=_.split,mO=_.tile,vO=_.topkImpl,yO=_.whereImpl;function gO(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}var _O=function(e){_inherits(i,e);var t,n,a=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=a.call(this)).blockSize=48,e.firstUse=!0,e.data=new hI(_assertThisInitialized(e),O_()),e}return _createClass(i,[{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,dv().get("IS_NODE")&&g.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r}},{key:"move",value:function(e,t,n,r){this.data.set(e,{values:t,dtype:r})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;if("complex64"===n){var a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return g.mergeRealAndImagArrays(a,i)}return this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return r.decodeString(e)}))}catch(a){throw new Error("Failed to decode encoded string bytes into utf-8")}return Mg(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return O_().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}}},{key:"time",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.now(),e.abrupt("return",(t(),{kernelMs:r.now()-n}));case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"complex",value:function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:O_().keep(e.clone()),imag:O_().keep(t.clone())},n}},{key:"real",value:function(e){return this.data.get(e.dataId).complexTensors.real.clone()}},{key:"imag",value:function(e){return this.data.get(e.dataId).complexTensors.imag.clone()}},{key:"slice",value:function(e,t,n){if(cO(e,"slice"),o.isSliceContinous(e.shape,t,n)){var a=o.computeFlatOffset(t,e.strides),i=r.sizeFromShape(n);return mg(this.readSync(e.dataId).subarray(a,a+i),n,e.dtype)}for(var s=Mg(n,e.dtype),u=this.bufferSync(e),l=0;l<s.size;++l){var c=s.indexToLoc(l).map((function(e,n){return e+t[n]}));s.values[l]=u.get.apply(u,_toConsumableArray(c))}return s.toTensor()}},{key:"stridedSlice",value:function(e,t,n,r){cO(e,"stridedSlice");var a=o.computeOutShape(t,n,r);if(a.some((function(e){return 0===e})))return mg([],a);for(var i=Mg(a,e.dtype),s=this.bufferSync(e),u=0;u<i.size;u++){for(var l=i.indexToLoc(u),c=new Array(l.length),h=0;h<c.length;h++)c[h]=l[h]*r[h]+t[h];i.set.apply(i,[s.get.apply(s,c)].concat(_toConsumableArray(l)))}return i.toTensor()}},{key:"diag",value:function(e){for(var t=this.readSync(e.dataId),n=Mg([e.size,e.size],e.dtype),r=n.values,a=0;a<t.length;a++)r[a*e.size+a]=t[a];return n.toTensor()}},{key:"unstack",value:function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,i=0;i<e.rank;i++)i!==t&&(r[a++]=e.shape[i]);var o=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;for(var u=new Array(n),l=0;l<u.length;l++)o[t]=l,u[l]=this.slice(e,o,s).reshape(r);return u}},{key:"reverse",value:function(e,t){cO(e,"reverse");for(var n=Mg(e.shape,e.dtype),r=this.bufferSync(e),a=function(a){var i=n.indexToLoc(a),o=i.slice();t.forEach((function(t){return o[t]=e.shape[t]-1-o[t]})),n.set.apply(n,[r.get.apply(r,_toConsumableArray(o))].concat(_toConsumableArray(i)))},i=0;i<n.size;i++)a(i);return n.toTensor()}},{key:"concat",value:function(e,t){var n=this;if("complex64"===e[0].dtype){var a=e.map((function(e){return dg(e)})),i=e.map((function(e){return pg(e)}));return fg(this.concat(a,t),this.concat(i,t))}var o=e.map((function(e){var n=r.sizeFromShape(e.shape.slice(t));return e.as2D(-1,n)})),s=g.computeOutShape(o.map((function(e){return e.shape})),1),u=Mg(s,e[0].dtype).values;if(1===o[0].shape[0]){var l=0;o.forEach((function(e){u.set(n.readSync(e.dataId),l),l+=e.size}))}else{var c=0;o.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,a=0;a<e.shape[0];++a)for(var i=a*s[1]+c,o=0;o<e.shape[1];++o)u[i+o]=t[r++];c+=e.shape[1]}))}var h=g.computeOutShape(e.map((function(e){return e.shape})),t);return mg(u,h,e[0].dtype)}},{key:"neg",value:function(e){return cO(e,"neg"),this.multiply(yg(-1),e)}},{key:"add",value:function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,Py(e.dtype,t.dtype),(function(e,t){return e+t}))}},{key:"addN",value:function(e){var t=this;cO(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=Mg(e[0].shape,e[0].dtype),a=r.values,i=0;i<e.length;i++)for(var o=n[i],s=0;s<a.length;s++)a[s]+=o[s];return r.toTensor()}},{key:"softmax",value:function(e,t){var n=r.parseAxisParam([t],e.shape),a=gk(e,n),i=g.expandShapeToKeepDim(a.shape,n),o=this.subtract(e,a.reshape(i)),s=this.exp(o),u=this.sum(s,n).reshape(i);return Pb(s,u)}},{key:"subtract",value:function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,Py(e.dtype,t.dtype),(function(e,t){return e-t}))}},{key:"pow",value:function(e,t){return cO([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))}},{key:"batchMatMul",value:function(e,t,n,r){cO([e,t],"matMul");for(var a=n?e.shape[1]:e.shape[2],i=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],s=e.shape[0],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=_slicedToArray(n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],3),h=c[0],f=c[1],d=c[2],p=_slicedToArray(r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],3),m=p[0],v=p[1],y=p[2],g=i*o,_=Mg([s,i,o],e.dtype),b=_.values,x=this.blockSize,w=0;w<s;w++)for(var k=0;k<i;k+=x)for(var C=0;C<o;C+=x)for(var S=0;S<a;S+=x)for(var I=Math.min(k+x,i),D=Math.min(C+x,o),A=Math.min(S+x,a),T=k;T<I;T++)for(var E=C;E<D;E++){for(var R=0,O=S;O<A;O++)R+=u[w*h+T*f+O*d]*l[O*m+E*v+w*y];b[w*g+(T*o+E)]+=R}return _.toTensor()}},{key:"fusedBatchMatMul",value:function(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.bias,o=e.activation,s=e.preluActivationWeights,u=this.batchMatMul(t,n,r,a);return i&&(u=this.add(u,i)),o&&(u=gO(this,u,o,s)),u}},{key:"multiply",value:function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,Py(e.dtype,t.dtype),(function(e,t){return e*t}))}},{key:"floorDiv",value:function(e,t){return cO([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))}},{key:"sum",value:function(e,t){cO(e,"sum"),g.assertAxesAreInnerMostDims("sum",t,e.rank);for(var n=_slicedToArray(g.computeOutAndReduceShapes(e.shape,t),2),a=n[0],i=n[1],o=Ig(a,Py(e.dtype,"int32")),s=r.sizeFromShape(i),u=this.readSync(o.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var h=c*s,f=0,d=0;d<s;++d)f+=l[h+d];u[c]=f}return o}},{key:"prod",value:function(e,t){cO(e,"sum");for(var n=_slicedToArray(g.computeOutAndReduceShapes(e.shape,t),2),a=n[0],i=n[1],o=Ig(a,Py(e.dtype,"int32")),s=r.sizeFromShape(i),u=this.readSync(o.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var h=c*s,f=1,d=0;d<s;++d)f*=l[h+d];u[c]=f}return o}},{key:"unsortedSegmentSum",value:function(e,t,n){cO(e,"unsortedSegmentSum");for(var r=[],a=e.rank-t.rank,i=0;i<a;++i)t=t.expandDims(i+1);for(var o=0;o<n;++o){var s=yg(o,"int32"),u=hk(s,t).asType("float32").mul(e).sum(0);r.push(u)}return Wg(r)}},{key:"argMin",value:function(e,t){cO(e,"argMin");var n=[t];g.assertAxesAreInnerMostDims("argMin",n,e.rank);for(var a=_slicedToArray(g.computeOutAndReduceShapes(e.shape,n),2),i=a[0],o=a[1],s=Ig(i,"int32"),u=r.sizeFromShape(o),l=this.readSync(s.dataId),c=this.readSync(e.dataId),h=0;h<l.length;++h){for(var f=h*u,d=c[f],p=0,m=0;m<u;++m){var v=c[f+m];v<d&&(d=v,p=m)}l[h]=p}return s}},{key:"argMax",value:function(e,t){cO(e,"argMax");var n=[t];g.assertAxesAreInnerMostDims("argMax",n,e.rank);for(var a=_slicedToArray(g.computeOutAndReduceShapes(e.shape,n),2),i=a[0],o=a[1],s=Ig(i,"int32"),u=r.sizeFromShape(o),l=this.readSync(s.dataId),c=this.readSync(e.dataId),h=0;h<l.length;++h){for(var f=h*u,d=c[f],p=0,m=0;m<u;++m){var v=c[f+m];v>d&&(d=v,p=m)}l[h]=p}return s}},{key:"cumsum",value:function(e,t,n,r){if(cO(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis=".concat(e.rank-1," ")+"but got axis=".concat(t));for(var a=Py(e.dtype,"int32"),i=Ig(e.shape,a),o=this.readSync(i.dataId),s=this.readSync(e.dataId),u=e.shape[e.rank-1],l=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=u)for(var h=0;h<u;h++){var f=l(c,h);if(0===h)o[f]=n?0:s[f];else{var d=l(c,h-1);o[f]=n?s[d]+o[d]:s[f]+o[d]}}return i}},{key:"equal",value:function(e,t){return cO([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))}},{key:"notEqual",value:function(e,t){return cO([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))}},{key:"less",value:function(e,t){return cO([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))}},{key:"lessEqual",value:function(e,t){return cO([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))}},{key:"greater",value:function(e,t){return cO([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))}},{key:"greaterEqual",value:function(e,t){return cO([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))}},{key:"logicalNot",value:function(e){cO(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")}},{key:"logicalAnd",value:function(e,t){return cO([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))}},{key:"logicalOr",value:function(e,t){return cO([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))}},{key:"select",value:function(e,t,n){cO([e,t,n],"select");for(var a=this.readSync(e.dataId),i=this.readSync(t.dataId),o=this.readSync(n.dataId),s=Ig(t.shape,Py(t.dtype,n.dtype)),u=this.readSync(s.dataId),l=0,c=0===e.rank||e.rank>1||1===t.rank?1:r.sizeFromShape(t.shape.slice(1)),h=0;h<a.length;h++)for(var f=0;f<c;f++)u[l++]=1===a[h]?i[h]:o[h];return s}},{key:"where",value:function(e){cO([e],"where");var t=this.readSync(e.dataId);return yO(e.shape,t)}},{key:"topk",value:function(e,t,n){cO(e,"topk");var r=this.readSync(e.dataId);return vO(r,e.shape,e.dtype,t,n)}},{key:"min",value:function(e,t){cO(e,"min"),g.assertAxesAreInnerMostDims("min",t,e.rank);for(var n=_slicedToArray(g.computeOutAndReduceShapes(e.shape,t),2),a=n[0],i=n[1],o=Ig(a,e.dtype),s=r.sizeFromShape(i),u=this.readSync(o.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var h=c*s,f=l[h],d=0;d<s;++d){var p=l[h+d];p<f&&(f=p)}u[c]=f}return o}},{key:"minimum",value:function(e,t){return cO([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))}},{key:"mod",value:function(e,t){return cO([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))}},{key:"maximum",value:function(e,t){return cO([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))}},{key:"all",value:function(e,t){cO(e,"all"),g.assertAxesAreInnerMostDims("all",t,e.rank);for(var n=_slicedToArray(g.computeOutAndReduceShapes(e.shape,t),2),a=n[0],i=n[1],o=Ig(a,e.dtype),s=r.sizeFromShape(i),u=this.readSync(o.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var h=c*s,f=l[h],d=0;d<s;++d){var p=l[h+d];f=f&&p}u[c]=f}return o}},{key:"any",value:function(e,t){cO(e,"any"),g.assertAxesAreInnerMostDims("any",t,e.rank);for(var n=_slicedToArray(g.computeOutAndReduceShapes(e.shape,t),2),a=n[0],i=n[1],o=Ig(a,e.dtype),s=r.sizeFromShape(i),u=this.readSync(o.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var h=c*s,f=l[h],d=0;d<s;++d){var p=l[h+d];f=f||p}u[c]=f}return o}},{key:"squaredDifference",value:function(e,t){return cO([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))}},{key:"ceil",value:function(e){cO(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")}},{key:"floor",value:function(e){cO(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")}},{key:"sign",value:function(e){cO(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=t[r]<0?-1:t[r]>0?1:0;return this.makeOutput(n,e.shape,"float32")}},{key:"isNaN",value:function(e){cO(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")}},{key:"isInf",value:function(e){cO(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")}},{key:"isFinite",value:function(e){cO(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")}},{key:"round",value:function(e){cO(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=Math.floor(t[r]);n[r]=t[r]-a<.5?Math.floor(t[r]):t[r]-a>.5?Math.ceil(t[r]):a%2==0?a:a+1}return this.makeOutput(n,e.shape,"float32")}},{key:"exp",value:function(e){cO(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")}},{key:"expm1",value:function(e){cO(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")}},{key:"log",value:function(e){cO(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.log(t[r]);return this.makeOutput(n,e.shape,"float32")}},{key:"log1p",value:function(e){cO(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.log1p(t[r]);return this.makeOutput(n,e.shape,"float32")}},{key:"sqrt",value:function(e){cO(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.sqrt(t[r]);return this.makeOutput(n,e.shape,"float32")}},{key:"rsqrt",value:function(e){cO(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/Math.sqrt(t[r]);return this.makeOutput(n,e.shape,"float32")}},{key:"reciprocal",value:function(e){cO(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")}},{key:"linear",value:function(e){return e}},{key:"relu",value:function(e){cO(e,"relu");for(var t=Ig(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.max(0,r[a]);return t}},{key:"relu6",value:function(e){cO(e,"relu");for(var t=Ig(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.min(Math.max(0,r[a]),6);return t}},{key:"prelu",value:function(e,t){return cO([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))}},{key:"elu",value:function(e){cO(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=n[r];t[r]=a>=0?a:Math.exp(a)-1}return this.makeOutput(t,e.shape,"float32")}},{key:"eluDer",value:function(e,t){cO([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),a=this.readSync(e.dataId),i=0;i<r.length;++i){var o=r[i];n[i]=o>=1?a[i]:a[i]*(o+1)}return this.makeOutput(n,t.shape,"float32")}},{key:"selu",value:function(e){cO(e,"selu");for(var t=g.SELU_SCALEALPHA,n=g.SELU_SCALE,r=new Float32Array(e.size),a=this.readSync(e.dataId),i=0;i<a.length;++i){var o=a[i];r[i]=o>=0?n*o:t*(Math.exp(o)-1)}return this.makeOutput(r,e.shape,"float32")}},{key:"clip",value:function(e,t,n){cO(e,"clip");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),i=0;i<a.length;++i){var o=a[i];r[i]=o>n?n:o<t?t:o}return this.makeOutput(r,e.shape,"float32")}},{key:"abs",value:function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")}},{key:"complexAbs",value:function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r)t[r]=Math.hypot(n[2*r],n[2*r+1]);return this.makeOutput(t,e.shape,"float32")}},{key:"int",value:function(e){cO(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")}},{key:"sigmoid",value:function(e){cO(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")}},{key:"softplus",value:function(e){cO(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var i,o=r[a]>-t,s=r[a]<t,u=Math.exp(r[a]);i=s?u:o?r[a]:Math.log(1+u),n[a]=i}return this.makeOutput(n,e.shape,"float32")}},{key:"sin",value:function(e){cO(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")}},{key:"cos",value:function(e){cO(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")}},{key:"tan",value:function(e){cO(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")}},{key:"asin",value:function(e){cO(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")}},{key:"acos",value:function(e){cO(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")}},{key:"atan",value:function(e){cO(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")}},{key:"atan2",value:function(e,t){return cO([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))}},{key:"sinh",value:function(e){cO(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")}},{key:"cosh",value:function(e){cO(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")}},{key:"tanh",value:function(e){cO(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),a=0;a<n.length;++a)t[a]=r.tanh(n[a]);return this.makeOutput(t,e.shape,"float32")}},{key:"asinh",value:function(e){cO(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")}},{key:"acosh",value:function(e){cO(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")}},{key:"atanh",value:function(e){cO(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")}},{key:"erf",value:function(e){cO(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=g.ERF_P,a=g.ERF_A1,i=g.ERF_A2,o=g.ERF_A3,s=g.ERF_A4,u=g.ERF_A5,l=0;l<n.length;++l){var c=Math.sign(n[l]),h=Math.abs(n[l]),f=1/(1+r*h);t[l]=c*(1-((((u*f+s)*f+o)*f+i)*f+a)*f*Math.exp(-h*h))}return this.makeOutput(t,e.shape,"float32")}},{key:"step",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;cO(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var i=r[a];n[a]=isNaN(i)?NaN:i>0?1:t}return this.makeOutput(n,e.shape,"float32")}},{key:"fusedConv2d",value:function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights,s=this.conv2d(t,n,r);return a&&(s=this.add(s,a)),i&&(s=gO(this,s,i,o)),s}},{key:"conv2d",value:function(e,t,n){cO([e,t],"conv2d");for(var r=n.filterHeight,a=n.filterWidth,i=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l="channelsLast"===n.dataFormat,c=Mg(n.outShape,e.dtype),h=e.strides[0],f=l?e.strides[1]:e.strides[2],d=l?e.strides[2]:1,p=l?1:e.strides[1],m=c.strides[0],v=l?c.strides[1]:c.strides[2],y=l?c.strides[2]:1,g=l?1:c.strides[1],_=this.readSync(e.dataId),b=this.readSync(t.dataId),x=c.values,w=0;w<n.batchSize;++w)for(var k=w*h,C=w*m,S=0;S<n.outHeight;++S)for(var I=C+S*v,D=S*n.strideHeight-u,A=0;A<r;A++){var T=D+A*i;if(!(T<0||T>=n.inHeight))for(var E=A*t.strides[0],R=k+T*f,O=0;O<n.outWidth;++O)for(var M=I+O*y,N=O*n.strideWidth-s,P=0;P<a;P++){var F=N+P*o;if(!(F<0||F>=n.inWidth))for(var L=R+F*d,z=E+P*t.strides[1],B=0;B<n.inChannels;++B){for(var W=_[L+B*p],q=0;q<n.outChannels;++q)x[M+q*g]+=W*b[z+q];z+=n.outChannels}}}return c.toTensor()}},{key:"conv3d",value:function(e,t,n){for(var r=n.filterDepth,a=n.filterHeight,i=n.filterWidth,o=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,l=n.padInfo.front,c=n.padInfo.left,h=n.padInfo.top,f=Mg(n.outShape,e.dtype),d=this.readSync(e.dataId),p=this.readSync(t.dataId),m=f.values,v=0;v<n.batchSize;++v)for(var y=v*e.strides[0],g=v*f.strides[0],_=0;_<n.outDepth;++_)for(var b=g+_*f.strides[1],x=_*n.strideDepth-l,w=0;w<r;w++){var k=x+w*o;if(!(k<0||k>=n.inDepth))for(var C=w*t.strides[0],S=y+k*e.strides[1],I=0;I<n.outHeight;++I)for(var D=b+I*f.strides[2],A=I*n.strideHeight-h,T=0;T<a;T++){var E=A+T*s;if(!(E<0||E>=n.inHeight))for(var R=C+T*t.strides[1],O=S+E*e.strides[2],M=0;M<n.outWidth;++M)for(var N=D+M*n.outChannels,P=M*n.strideWidth-c,F=0;F<i;F++){var L=P+F*u;if(!(L<0||L>=n.inWidth))for(var z=O+L*n.inChannels,B=R+F*t.strides[2],W=0;W<n.inChannels;++W){for(var q=d[z+W],V=0;V<n.outChannels;++V)m[N+V]+=q*p[B+V];B+=n.outChannels}}}}return f.toTensor()}},{key:"conv2dDerInput",value:function(e,t,n){cO([e,t],"conv2dDerInput");for(var r=Mg(n.inShape,"float32"),a=r.values,i=this.readSync(e.dataId),o=this.readSync(t.dataId),s=_slicedToArray(t.strides,3),u=s[0],l=s[1],c=s[2],h=n.batchSize,f=n.filterHeight,d=n.filterWidth,p=n.inChannels,m=n.inHeight,v=n.inWidth,y=n.outChannels,g=n.outHeight,_=n.outWidth,b=n.strideHeight,x=n.strideWidth,w=n.dataFormat,k=f-1-n.padInfo.top,C=d-1-n.padInfo.left,S="channelsLast"===w,I=r.strides[0],D=S?r.strides[1]:r.strides[2],A=S?r.strides[2]:1,T=S?1:r.strides[1],E=e.strides[0],R=S?e.strides[1]:e.strides[2],O=S?e.strides[2]:1,M=S?1:e.strides[1],N=0;N<h;++N)for(var P=0;P<p;++P)for(var F=0;F<m;++F)for(var L=F-k,z=Math.max(0,Math.ceil(L/b)),B=Math.min(g,(f+L)/b),W=0;W<v;++W){for(var q=W-C,V=Math.max(0,Math.ceil(q/x)),U=Math.min(_,(d+q)/x),j=0,H=z;H<B;++H)for(var G=H*b-L,J=V;J<U;++J)for(var X=E*N+R*H+O*J,K=u*(f-1-G)+l*(d-1-(J*x-q))+c*P,Z=0;Z<y;++Z)j+=i[X+M*Z]*o[K+Z];a[I*N+D*F+A*W+T*P]=j}return r.toTensor()}},{key:"conv3dDerInput",value:function(e,t,n){for(var r=Mg(n.inShape,"float32"),a=r.values,i=_slicedToArray(r.strides,4),o=i[0],s=i[1],u=i[2],l=i[3],c=this.readSync(e.dataId),h=_slicedToArray(e.strides,4),f=h[0],d=h[1],p=h[2],m=h[3],v=this.readSync(t.dataId),y=_slicedToArray(t.strides,4),g=y[0],_=y[1],b=y[2],x=y[3],w=n.batchSize,k=n.filterDepth,C=n.filterHeight,S=n.filterWidth,I=n.inChannels,D=n.inDepth,A=n.inHeight,T=n.inWidth,E=n.outChannels,R=n.outDepth,O=n.outHeight,M=n.outWidth,N=n.strideDepth,P=n.strideHeight,F=n.strideWidth,L=k-1-n.padInfo.front,z=C-1-n.padInfo.top,B=S-1-n.padInfo.left,W=0;W<w;++W)for(var q=0;q<I;++q)for(var V=0;V<D;++V)for(var U=V-L,j=Math.max(0,Math.ceil(U/N)),H=Math.min(R,(k+U)/N),G=0;G<A;++G)for(var J=G-z,X=Math.max(0,Math.ceil(J/P)),K=Math.min(O,(C+J)/P),Z=0;Z<T;++Z){for(var Y=Z-B,Q=Math.max(0,Math.ceil(Y/F)),$=Math.min(M,(S+Y)/F),ee=0,te=j;te<H;++te)for(var ne=te*N-U,re=X;re<K;++re)for(var ae=re*P-J,ie=Q;ie<$;++ie)for(var oe=f*W+d*te+p*re+m*ie,se=g*(k-1-ne)+_*(C-1-ae)+b*(S-1-(ie*F-Y))+x*q,ue=0;ue<E;++ue)ee+=c[oe+ue]*v[se+ue];a[o*W+s*V+u*G+l*Z+q]=ee}return r.toTensor()}},{key:"conv2dDerFilter",value:function(e,t,n){cO([e,t],"conv2dDerFilter");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s="channelsLast"===n.dataFormat,u=Mg(n.filterShape,"float32"),l=n.padInfo.left,c=n.padInfo.top,h=this.bufferSync(e),f=this.bufferSync(t),d=0;d<i;++d)for(var p=Math.max(0,Math.ceil((c-d)/r)),m=Math.min(n.outHeight,(n.inHeight+c-d)/r),v=0;v<o;++v)for(var y=Math.max(0,Math.ceil((l-v)/a)),g=Math.min(n.outWidth,(n.inWidth+l-v)/a),_=0;_<n.inChannels;++_)for(var b=0;b<n.outChannels;++b){for(var x=0,w=0;w<n.batchSize;++w)for(var k=p;k<m;++k)for(var C=d+k*r-c,S=y;S<g;++S){var I=v+S*a-l;x+=s?h.get(w,C,I,_)*f.get(w,k,S,b):h.get(w,_,C,I)*f.get(w,b,k,S)}u.set(x,d,v,_,b)}return u.toTensor()}},{key:"conv3dDerFilter",value:function(e,t,n){for(var r=n.strideDepth,a=n.strideHeight,i=n.strideWidth,o=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=Mg(n.filterShape,"float32"),c=l.values,h=_slicedToArray(l.strides,4),f=h[0],d=h[1],p=h[2],m=h[3],v=this.readSync(t.dataId),y=_slicedToArray(t.strides,4),g=y[0],_=y[1],b=y[2],x=y[3],w=this.readSync(e.dataId),k=_slicedToArray(e.strides,4),C=k[0],S=k[1],I=k[2],D=k[3],A=n.padInfo.front,T=n.padInfo.left,E=n.padInfo.top,R=0;R<o;++R)for(var O=Math.max(0,Math.ceil((A-R)/r)),M=Math.min(n.outDepth,(n.inDepth+A-R)/r),N=R*f,P=0;P<s;++P)for(var F=Math.max(0,Math.ceil((E-P)/a)),L=Math.min(n.outHeight,(n.inHeight+E-P)/a),z=P*d+N,B=0;B<u;++B)for(var W=Math.max(0,Math.ceil((T-B)/i)),q=Math.min(n.outWidth,(n.inWidth+T-B)/i),V=B*p+z,U=0;U<n.inChannels;++U)for(var j=U*m+V,H=0;H<n.outChannels;++H){for(var G=0,J=0;J<n.batchSize;++J)for(var X=J*C,K=J*g,Z=O;Z<M;++Z)for(var Y=(R+Z*r-A)*S+X,Q=Z*_+K,$=F;$<L;++$)for(var ee=(P+$*a-E)*I+Y,te=$*b+Q,ne=W;ne<q;++ne)G+=w[(B+ne*i-T)*D+ee+U]*v[ne*x+te+H];c[j+H]=G}return l.toTensor()}},{key:"fusedDepthwiseConv2D",value:function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights,s=this.depthwiseConv2D(t,n,r);return a&&(s=this.add(s,a)),i&&(s=gO(this,s,i,o)),s}},{key:"depthwiseConv2D",value:function(e,t,n){cO([e,t],"depthwiseConv2D");for(var r=n.filterHeight,a=n.filterWidth,i=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=Mg(n.outShape,e.dtype),h=this.readSync(e.dataId),f=this.readSync(t.dataId),d=c.values,p=0;p<n.batchSize;++p)for(var m=p*e.strides[0],v=p*c.strides[0],y=0;y<n.outHeight;++y)for(var g=v+y*c.strides[1],_=y*n.strideHeight-s,b=0;b<r;++b){var x=_+b*i;if(!(x<0||x>=n.inHeight))for(var w=b*t.strides[0],k=m+x*e.strides[1],C=0;C<n.outWidth;++C)for(var S=g+C*c.strides[2],I=C*n.strideWidth-u,D=0;D<a;++D){var A=I+D*o;if(!(A<0||A>=n.inWidth))for(var T=k+A*n.inChannels,E=S,R=w+D*t.strides[1],O=0;O<n.inChannels;++O){for(var M=h[T+O],N=0;N<l;++N)d[E+N]+=M*f[R+N];E+=l,R+=l}}}return c.toTensor()}},{key:"depthwiseConv2DDerInput",value:function(e,t,n){cO([e,t],"depthwiseConv2DDerInput");for(var r=Mg(n.inShape,"float32"),a=r.values,i=_slicedToArray(r.strides,3),o=i[0],s=i[1],u=i[2],l=this.readSync(e.dataId),c=_slicedToArray(e.strides,3),h=c[0],f=c[1],d=c[2],p=this.readSync(t.dataId),m=_slicedToArray(t.strides,3),v=m[0],y=m[1],g=m[2],_=n.batchSize,b=n.filterHeight,x=n.filterWidth,w=n.inChannels,k=n.inHeight,C=n.inWidth,S=n.outChannels,I=n.outHeight,D=n.outWidth,A=n.strideHeight,T=n.strideWidth,E=b-1-n.padInfo.top,R=x-1-n.padInfo.left,O=S/w,M=0;M<_;++M)for(var N=0;N<w;++N)for(var P=0;P<k;++P)for(var F=P-E,L=Math.max(0,Math.ceil(F/A)),z=Math.min(I,(b+F)/A),B=0;B<C;++B){for(var W=B-R,q=Math.max(0,Math.ceil(W/T)),V=Math.min(D,(x+W)/T),U=0,j=L;j<z;++j)for(var H=j*A-F,G=q;G<V;++G)for(var J=h*M+f*j+d*G,X=v*(b-1-H)+y*(x-1-(G*T-W))+g*N,K=0;K<O;++K)U+=l[J+(N*O+K)]*p[X+K];a[o*M+s*P+u*B+N]=U}return r.toTensor()}},{key:"depthwiseConv2DDerFilter",value:function(e,t,n){cO([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s=Mg(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,h=this.bufferSync(e),f=this.bufferSync(t),d=0;d<i;++d)for(var p=Math.max(0,Math.ceil((l-d)/r)),m=Math.min(n.outHeight,(n.inHeight+l-d)/r),v=0;v<o;++v)for(var y=Math.max(0,Math.ceil((u-v)/a)),g=Math.min(n.outWidth,(n.inWidth+u-v)/a),_=0;_<n.outChannels;++_){for(var b=Math.trunc(_/c),x=_%c,w=0,k=0;k<n.batchSize;++k)for(var C=p;C<m;++C)for(var S=d+C*r-l,I=y;I<g;++I)w+=h.get(k,S,v+I*a-u,b)*f.get(k,C,I,_);s.set(w,d,v,b,x)}return s.toTensor()}},{key:"tile",value:function(e,t){return cO(e,"tile"),mO(this.bufferSync(e),t)}},{key:"pad",value:function(e,t,n){cO(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),a=t.map((function(e){return e[0]})),i=this.bufferSync(e),o=Mg(r,e.dtype);0!==n&&o.values.fill(n);for(var s=0;s<e.size;s++){var u=i.indexToLoc(s),l=u.map((function(e,t){return e+a[t]}));o.set.apply(o,[i.get.apply(i,_toConsumableArray(u))].concat(_toConsumableArray(l)))}return o.toTensor()}},{key:"gather",value:function(e,t,n){cO([e,t],"gather");var r=e.shape.slice(),a=this.readSync(t.dataId);r[n]=a.length;for(var i=Mg(r,e.dtype),o=this.bufferSync(e),s=0;s<i.size;++s){var u=i.indexToLoc(s),l=u.slice();l[n]=a[u[n]];var c=o.locToIndex(l);i.values[s]=o.values[c]}return i.toTensor()}},{key:"batchToSpaceND",value:function(e,t,n){cO([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),a=g.getReshaped(e.shape,t,r),i=g.getPermuted(a.length,t.length),o=g.getReshapedPermuted(e.shape,t,r),s=g.getSliceBeginCoords(n,t.length),u=g.getSliceSize(o,n,t.length);return jb(e.reshape(a),i).reshape(o).slice(s,u)}},{key:"spaceToBatchND",value:function(e,t,n){cO([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,_toConsumableArray(n));for(var i=1+t.length;i<e.shape.length;++i)a.push([0,0]);var o=e.pad(a),s=g.getReshaped(o.shape,t,r,!1),u=g.getPermuted(s.length,t.length,!1),l=g.getReshapedPermuted(o.shape,t,r,!1);return jb(o.reshape(s),u).reshape(l)}},{key:"maxPool",value:function(e,t){return cO(e,"maxPool"),hO(this.readSync(e.dataId),0,e.dtype,e.strides,t,"max").toTensor()}},{key:"maxPoolBackprop",value:function(e,t,n,r){cO([t,n],"maxPoolBackprop");for(var a=this.readSync(t.dataId),i=Mg(r.outShape,t.dtype,fO(a,t.shape,t.dtype,r).values),o=r.strideHeight,s=r.strideWidth,u=r.dilationHeight,l=r.dilationWidth,c=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=h-1-r.padInfo.left,d=c-1-r.padInfo.top,p=Mg(t.shape,"float32"),m=this.bufferSync(e),v=0;v<r.batchSize;++v)for(var y=0;y<r.inChannels;++y)for(var g=0;g<r.inHeight;++g)for(var _=0;_<r.inWidth;++_){for(var b=g-d,x=_-f,w=0,k=0;k<c;k+=u){var C=(b+k)/o;if(!(C<0||C>=r.outHeight||Math.floor(C)!==C))for(var S=0;S<h;S+=l){var I=(x+S)/s;if(!(I<0||I>=r.outWidth||Math.floor(I)!==I)){var D=c*h-1-i.get(v,C,I,y)===k*h+S?1:0;0!==D&&(w+=m.get(v,C,I,y)*D)}}}p.set(w,v,g,_,y)}return p.toTensor()}},{key:"avgPoolBackprop",value:function(e,t,n){cO([e,t],"avgPoolBackprop");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,h=c-1-n.padInfo.left,f=l-1-n.padInfo.top,d=Mg(t.shape,"float32"),p=1/(i*o),m=this.bufferSync(e),v=0;v<n.batchSize;++v)for(var y=0;y<n.inChannels;++y)for(var g=0;g<n.inHeight;++g)for(var _=0;_<n.inWidth;++_){for(var b=g-f,x=_-h,w=0,k=0;k<l;k+=s){var C=(b+k)/r;if(!(C<0||C>=n.outHeight||Math.floor(C)!==C))for(var S=0;S<c;S+=u){var I=(x+S)/a;I<0||I>=n.outWidth||Math.floor(I)!==I||(w+=m.get(v,C,I,y))}}d.set(w*p,v,g,_,y)}return d.toTensor()}},{key:"pool3d",value:function(e,t,n){cO(e,"pool3d");for(var r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.front,d=t.padInfo.top,p=t.padInfo.left,m="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(e.dataId),y=Mg(t.outShape,e.dtype),g=y.values,_=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],b=t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[3]*t.outShape[4],w=t.outShape[4],k=0;k<t.batchSize;++k)for(var C=k*_,S=k*e.strides[0],I=0;I<t.inChannels;++I)for(var D=0;D<t.outDepth;++D){for(var A=D*r-f,T=A;T<0;)T+=o;for(var E=Math.min(t.inDepth,l+A),R=C+D*b,O=0;O<t.outHeight;++O){for(var M=O*a-d,N=M;N<0;)N+=s;for(var P=Math.min(t.inHeight,c+M),F=R+O*x,L=0;L<t.outWidth;++L){for(var z=L*i-p,B=z;B<0;)B+=u;for(var W=Math.min(t.inWidth,h+z),q=F+L*w,V=m,U=0,j=0,H=T;H<E;H+=o){for(var G=S+H*e.strides[1],J=N;J<P;J+=s){for(var X=G+J*e.strides[2],K=B;K<W;K+=u){var Z=v[X+K*e.strides[3]+I];if("max"===n&&Z>V?V=Z:"avg"===n&&(U+=Z,j++),isNaN(V))break}if(isNaN(V))break}if(isNaN(V))break}g[q+I]="avg"===n?U/j:V}}}return y.toTensor()}},{key:"avgPool3d",value:function(e,t){return cO(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()}},{key:"avgPool3dBackprop",value:function(e,t,n){cO([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,a=n.strideHeight,i=n.strideWidth,o=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=n.dilationDepth,c=n.dilationHeight,h=n.dilationWidth,f=n.effectiveFilterDepth,d=n.effectiveFilterHeight,p=n.effectiveFilterWidth,m=f-1-n.padInfo.front,v=p-1-n.padInfo.left,y=d-1-n.padInfo.top,g=Mg(t.shape,"float32"),_=1/(o*s*u),b=this.bufferSync(e),x=0;x<n.batchSize;++x)for(var w=0;w<n.inChannels;++w)for(var k=0;k<n.inDepth;++k)for(var C=0;C<n.inHeight;++C)for(var S=0;S<n.inWidth;++S){for(var I=k-m,D=C-y,A=S-v,T=0,E=0;E<f;E+=l){var R=(I+E)/r;if(!(R<0||R>=n.outDepth||Math.floor(R)!==R))for(var O=0;O<d;O+=c){var M=(D+O)/a;if(!(M<0||M>=n.outHeight||Math.floor(M)!==M))for(var N=0;N<p;N+=h){var P=(A+N)/i;P<0||P>=n.outWidth||Math.floor(P)!==P||(T+=b.get(x,R,M,P,w))}}}g.set(T*_,x,k,C,S,w)}return g.toTensor()}},{key:"maxPool3d",value:function(e,t){return cO(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()}},{key:"maxPool3dPositions",value:function(e,t){for(var n=Mg(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.front,d=t.padInfo.top,p=t.padInfo.left,m=this.bufferSync(e),v=0;v<t.batchSize;++v)for(var y=0;y<t.inChannels;++y)for(var g=0;g<t.outDepth;++g){for(var _=g*r-f,b=_;b<0;)b+=o;for(var x=Math.min(t.inDepth,l+_),w=0;w<t.outHeight;++w){for(var k=w*a-d,C=k;C<0;)C+=s;for(var S=Math.min(t.inHeight,c+k),I=0;I<t.outWidth;++I){for(var D=I*i-p,A=D;A<0;)A+=u;for(var T=Math.min(t.inWidth,h+D),E=Number.NEGATIVE_INFINITY,R=-1,O=b;O<x;O+=o)for(var M=O-_,N=C;N<S;N+=s)for(var P=N-k,F=A;F<T;F+=u){var L=F-D,z=m.get(v,O,N,F,y);z>=E&&(E=z,R=M*c*h+P*c+L)}n.set(R,v,g,w,I,y)}}}return n.toTensor()}},{key:"maxPool3dBackprop",value:function(e,t,n,r){cO([t,n],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(t,r),i=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterDepth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=h-1-r.padInfo.front,m=d-1-r.padInfo.left,v=f-1-r.padInfo.top,y=Mg(t.shape,"float32"),g=this.bufferSync(a),_=this.bufferSync(e),b=0;b<r.batchSize;++b)for(var x=0;x<r.inChannels;++x)for(var w=0;w<r.inDepth;++w)for(var k=0;k<r.inHeight;++k)for(var C=0;C<r.inWidth;++C){for(var S=w-p,I=k-v,D=C-m,A=0,T=0;T<h;T+=u){var E=(S+T)/i;if(!(E<0||E>=r.outDepth||Math.floor(E)!==E))for(var R=0;R<f;R+=l){var O=(I+R)/o;if(!(O<0||O>=r.outHeight||Math.floor(O)!==O))for(var M=0;M<d;M+=c){var N=(D+M)/s;if(!(N<0||N>=r.outWidth||Math.floor(N)!==N)){var P=h*f*d-1-g.get(b,E,O,N,x)===T*f*d+R*d+M?1:0;0!==P&&(A+=_.get(b,E,O,N,x)*P)}}}}y.set(A,b,w,k,C,x)}return y.toTensor()}},{key:"cast",value:function(e,t){return g.castTensor(e,t,this)}},{key:"reshape",value:function(e,t){return g.reshapeTensor(e,t)}},{key:"avgPool",value:function(e,t){return cO(e,"avgPool"),cO(e,"maxPool"),hO(this.readSync(e.dataId),0,e.dtype,e.strides,t,"avg").toTensor().toFloat()}},{key:"resizeBilinear",value:function(e,t,n,a){cO(e,"resizeBilinear");for(var i=_slicedToArray(e.shape,4),o=i[0],s=i[1],u=i[2],l=i[3],c=this.readSync(e.dataId),h=new Float32Array(r.sizeFromShape([o,t,n,l])),f=[a&&t>1?s-1:s,a&&n>1?u-1:u],d=[a&&t>1?t-1:t,a&&n>1?n-1:n],p=0,m=f[0]/d[0],v=f[1]/d[1],y=0;y<o;y++)for(var g=0;g<t;g++)for(var _=m*g,b=Math.floor(_),x=_-b,w=Math.min(s-1,Math.ceil(_)),k=y*e.strides[0]+b*e.strides[1],C=y*e.strides[0]+w*e.strides[1],S=0;S<n;S++)for(var I=v*S,D=Math.floor(I),A=I-D,T=Math.min(u-1,Math.ceil(I)),E=k+D*e.strides[2],R=C+D*e.strides[2],O=k+T*e.strides[2],M=C+T*e.strides[2],N=0;N<l;N++){var P=c[E+N],F=c[R+N],L=P+(c[O+N]-P)*A;h[p++]=L+(F+(c[M+N]-F)*A-L)*x}return mg(h,[o,t,n,l])}},{key:"resizeBilinearBackprop",value:function(e,t,n){cO([e,t],"resizeBilinearBackprop");for(var r=_slicedToArray(t.shape,4),a=r[0],i=r[1],o=r[2],s=r[3],u=_slicedToArray(e.shape,3),l=u[1],c=u[2],h=new Float32Array(a*i*o*s),f=[n&&l>1?i-1:i,n&&c>1?o-1:o],d=[n&&l>1?l-1:l,n&&c>1?c-1:c],p=f[0]/d[0],m=f[1]/d[1],v=this.readSync(e.dataId),y=0,g=0;g<a;g++)for(var _=g*t.strides[0],b=0;b<l;b++)for(var x=b*p,w=Math.floor(x),k=Math.min(Math.ceil(x),i-1),C=_+w*t.strides[1],S=_+k*t.strides[1],I=x-w,D=1-I,A=0;A<c;A++)for(var T=A*m,E=Math.floor(T),R=Math.min(Math.ceil(T),o-1),O=T-E,M=1-O,N=C+E*t.strides[2],P=C+R*t.strides[2],F=S+E*t.strides[2],L=S+R*t.strides[2],z=D*M,B=D*O,W=I*M,q=I*O,V=0;V<s;V++){var U=v[y++];h[N+V]+=U*z,h[P+V]+=U*B,h[F+V]+=U*W,h[L+V]+=U*q}return xg(h,[a,o,i,s],t.dtype)}},{key:"resizeNearestNeighbor",value:function(e,t,n,r){cO(e,"resizeNearestNeighbor");for(var a=_slicedToArray(e.shape,4),i=a[0],o=a[1],s=a[2],u=a[3],l=this.readSync(e.dataId),c=new Float32Array(i*t*n*u),h=[r&&t>1?o-1:o,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=h[0]/f[0],p=h[1]/f[1],m=0,v=0;v<i;v++)for(var y=v*e.strides[0],g=0;g<t;g++)for(var _=d*g,b=y+Math.min(o-1,r?Math.round(_):Math.floor(_))*e.strides[1],x=0;x<n;x++)for(var w=p*x,k=b+Math.min(s-1,r?Math.round(w):Math.floor(w))*e.strides[2],C=0;C<u;C++)c[m++]=l[k+C];return mg(c,[i,t,n,u],e.dtype)}},{key:"resizeNearestNeighborBackprop",value:function(e,t,n){cO([e,t],"resizeNearestNeighborBackprop");for(var r=_slicedToArray(t.shape,4),a=r[0],i=r[1],o=r[2],s=r[3],u=_slicedToArray(e.shape,3),l=u[1],c=u[2],h=new Float32Array(a*i*o*s),f=this.readSync(e.dataId),d=[n&&l>1?i-1:i,n&&c>1?o-1:o],p=[n&&l>1?l-1:l,n&&c>1?c-1:c],m=d[0]/p[0],v=d[1]/p[1],y=1/m,g=1/v,_=2*Math.ceil(y)+2,b=2*Math.ceil(g)+2,x=0;x<a;x++)for(var w=x*t.strides[0],k=0;k<i;k++)for(var C=w+k*t.strides[1],S=Math.floor(k*y),I=Math.floor(S-_/2),D=0;D<o;D++)for(var A=C+D*t.strides[2],T=Math.floor(D*g),E=Math.floor(T-b/2),R=0;R<s;R++){for(var O=0,M=0;M<_;M++){var N=M+I;if(!(N<0||N>=l)){var P=w+N*e.strides[1],F=N*m;if(k===Math.min(i-1,n?Math.round(F):Math.floor(F)))for(var L=0;L<b;L++){var z=L+E;if(!(z<0||z>=c)){var B=P+z*e.strides[2],W=z*v;D===Math.min(o-1,n?Math.round(W):Math.floor(W))&&(O+=f[B+R])}}}}h[A+R]=O}return xg(h,t.shape,t.dtype)}},{key:"batchNorm",value:function(e,t,n,r,a,i){cO([e,t,n,a,r],"batchNorm");for(var o=this.readSync(e.dataId),s=this.readSync(t.dataId),u=this.readSync(n.dataId),l=a?this.readSync(a.dataId):new Float32Array([1]),c=r?this.readSync(r.dataId):new Float32Array([0]),h=new Float32Array(o.length),f=c.length,d=l.length,p=u.length,m=s.length,v=0,y=0,g=0,_=0,b=0;b<o.length;++b)h[b]=c[v++]+(o[b]-s[y++])*l[g++]/Math.sqrt(u[_++]+i),v>=f&&(v=0),y>=m&&(y=0),g>=d&&(g=0),_>=p&&(_=0);return xg(h,e.shape)}},{key:"localResponseNormalization4D",value:function(e,t,n,r,a){cO(e,"localResponseNormalization4D");var i=e.shape[3],o=i-1,s=this.readSync(e.dataId),u=e.size,l=new Float32Array(u);function c(e){for(var n=e%i,r=e-n+Math.max(0,n-t),a=e-n+Math.min(n+t,o),u=0;r<=a;r++){var l=s[r];u+=l*l}return u}for(var h=0;h<u;h++){var f=c(h),d=s[h]*Math.pow(n+r*f,-a);l[h]=d}return xg(l,e.shape)}},{key:"LRNGrad",value:function(e,t,n,r,a,i,o){cO(e,"LRNGrad");for(var s=e.shape[3],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=this.readSync(n.dataId),h=new Float32Array(e.size),f=e.size,d=0;d<f;d++){for(var p=d%s,m=d-p+Math.max(0,p-r),v=d-p+Math.min(s,p+r+1),y=0,g=m;g<v;g++)y+=Math.pow(l[g],2);y=i*y+a;for(var _=m;_<v;_++){var b=-2*i*o*l[_]*c[d]/y;d===_&&(b+=Math.pow(y,-o)),b*=u[d],h[_]+=b}}return xg(h,e.shape)}},{key:"multinomial",value:function(e,t,n,r){cO(e,"multinomial");for(var a=t?e:bC(e),i=a.shape[0],o=a.shape[1],s=Ig([i,n],"int32"),u=this.readSync(s.dataId),l=this.readSync(a.dataId),c=0;c<i;++c){var h=c*o,f=new Float32Array(o-1);f[0]=l[h];for(var d=1;d<f.length;++d)f[d]=f[d-1]+l[h+d];for(var p=Dk.alea(r.toString()),m=c*n,v=0;v<n;++v){var y=p();u[m+v]=f.length;for(var g=0;g<f.length;g++)if(y<f[g]){u[m+v]=g;break}}}return s}},{key:"oneHot",value:function(e,t,n,r){cO(e,"oneHot");var a=new Float32Array(e.size*t);a.fill(r);for(var i=this.readSync(e.dataId),o=0;o<e.size;++o)i[o]>=0&&i[o]<t&&(a[o*t+i[o]]=n);return _g(a,[e.size,t],"int32")}},{key:"nonMaxSuppression",value:function(e,t,n,r,a){cO(e,"nonMaxSuppression");var i=this.readSync(e.dataId),o=this.readSync(t.dataId);return dO(i,o,n,r,a)}},{key:"fft",value:function(e){return this.fftBatch(e,!1)}},{key:"ifft",value:function(e){return this.fftBatch(e,!0)}},{key:"fftBatch",value:function(e,t){for(var n=e.shape[0],r=e.shape[1],a=Mg(e.shape,"float32"),i=Mg(e.shape,"float32"),o=dg(e).as2D(n,r),s=pg(e).as2D(n,r),u=0;u<n;u++)for(var l=o.slice([u,0],[1,r]),c=s.slice([u,0],[1,r]),h=fg(l,c),f=this.readSync(this.fftImpl(h,t).dataId),d=0;d<r;d++){var p=g.getComplexWithIndex(f,d);a.values[u*r+d]=p.real,i.values[u*r+d]=p.imag}return fg(a.toTensor(),i.toTensor()).as2D(n,r)}},{key:"fftImpl",value:function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var a=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(a=fg(dg(a).div(yg(r)),pg(a).div(yg(r)))),a}var i=this.readSync(e.dataId),o=this.fourierTransformByMatmul(i,r,t),s=g.splitRealAndImagArrays(o);return fg(s.real,s.imag).as2D(e.shape[0],e.shape[1])}},{key:"isExponentOf2",value:function(e){return 0==(e&e-1)}},{key:"fftRadix2",value:function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),a=t/2,i=g.complexWithEvenIndex(r),o=fg(i.real,i.imag).as1D(),s=g.complexWithOddIndex(r),u=fg(s.real,s.imag).as1D();o=this.fftRadix2(o,a,n),u=this.fftRadix2(u,a,n);var l=g.exponents(t,n),c=fg(l.real,l.imag).mul(u),h=o.add(c),f=o.sub(c),d=dg(h).concat(dg(f)),p=pg(h).concat(pg(f));return fg(d,p).as1D()}},{key:"fourierTransformByMatmul",value:function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=g.exponent(a*s,t,n),l=g.getComplexWithIndex(e,s);i+=l.real*u.real-l.imag*u.imag,o+=l.real*u.imag+l.imag*u.real}n&&(i/=t,o/=t),g.assignToTypedArray(r,i,o,a)}return r}},{key:"depthToSpace",value:function(e,t,n){r.assert("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(n)})),r.assert(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)}));for(var a=e.shape[0],i=e.shape[1],o=e.shape[2],s=e.shape[3],u=i*t,l=o*t,c=s/(t*t),h=this.readSync(e.dataId),f=new Float32Array(a*u*l*c),d=0,p=0;p<a;++p)for(var m=0;m<u;++m)for(var v=Math.floor(m/t),y=m%t,g=0;g<l;++g)for(var _=Math.floor(g/t),b=(y*t+g%t)*c,x=0;x<c;++x)f[d++]=h[x+b+s*(_+o*(v+i*p))];return xg(f,[a,u,l,c])}},{key:"broadcastedBinaryOp",value:function(e,t,n,r){var a=g.assertAndGetBroadcastShape(e.shape,t.shape),i=Mg(a,n),o=this.readSync(e.dataId),s=this.readSync(t.dataId),u=g.getBroadcastDims(e.shape,a),l=g.getBroadcastDims(t.shape,a),c=i.values;if(u.length+l.length===0)for(var h=0;h<c.length;++h)c[h]=r(o[h%o.length],s[h%s.length]);else for(var f=this.bufferSync(e),d=this.bufferSync(t),p=function(n){var a=i.indexToLoc(n),h=a.slice(-e.rank);u.forEach((function(e){return h[e]=0}));var p=f.locToIndex(h),m=a.slice(-t.rank);l.forEach((function(e){return m[e]=0}));var v=d.locToIndex(m);c[n]=r(o[p],s[v])},m=0;m<c.length;++m)p(m);return i.toTensor()}},{key:"broadcastedBinaryComplexOp",value:function(e,t,n){var r=g.assertAndGetBroadcastShape(e.shape,t.shape),a=Mg(r,"float32"),i=Mg(r,"float32"),o=this.readSync(e.dataId),s=this.readSync(t.dataId),u=g.getBroadcastDims(e.shape,r),l=g.getBroadcastDims(t.shape,r),c=a.values,h=i.values;if(u.length+l.length===0)for(var f=0;f<c.length;f++){var d=f%o.length,p=f%s.length,m=n(o[2*d],o[2*d+1],s[2*p],s[2*p+1]);c[f]=m.real,h[f]=m.imag}else for(var v=this.bufferSync(this.data.get(e.dataId).complexTensors.real),y=this.bufferSync(this.data.get(t.dataId).complexTensors.real),_=function(r){var i=a.indexToLoc(r),f=i.slice(-e.rank);u.forEach((function(e){return f[e]=0}));var d=v.locToIndex(f),p=i.slice(-t.rank);l.forEach((function(e){return p[e]=0}));var m=y.locToIndex(p),g=n(o[2*d],o[2*d+1],s[2*m],s[2*m+1]);c[r]=g.real,h[r]=g.imag},b=0;b<c.length;b++)_(b);return this.complex(a.toTensor(),i.toTensor())}},{key:"split",value:function(e,t,n){return pO(e,t,n)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return _get(_getPrototypeOf(i.prototype),"epsilon",this).call(this)}},{key:"cropAndResize",value:function(e,t,n,r,a,i){for(var o=_slicedToArray(e.shape,4),s=o[0],u=o[1],l=o[2],c=o[3],h=t.shape[0],f=_slicedToArray(r,2),d=f[0],p=f[1],m=Mg([h,d,p,c],"float32"),v=this.readSync(t.dataId),y=this.readSync(n.dataId),g=this.readSync(e.dataId),_=e.strides,b=m.strides,x=0;x<h;x++){var w=4*x,k=v[w],C=v[w+1],S=v[w+2],I=v[w+3],D=y[x];if(!(D>=s))for(var A=d>1?(S-k)*(u-1)/(d-1):0,T=p>1?(I-C)*(l-1)/(p-1):0,E=0;E<d;E++){var R=d>1?k*(u-1)+E*A:.5*(k+S)*(u-1);if(R<0||R>u-1)for(var O=0;O<p;O++)for(var M=0;M<c;M++)m.values[M+O*b[2]+E*b[1]+x*b[0]]=i;else if("bilinear"===a)for(var N=Math.floor(R),P=Math.ceil(R),F=R-N,L=0;L<p;L++){var z=p>1?C*(l-1)+L*T:.5*(C+I)*(l-1);if(z<0||z>l-1)for(var B=0;B<c;B++)m.values[B+L*b[2]+E*b[1]+x*b[0]]=i;else for(var W=Math.floor(z),q=Math.ceil(z),V=z-W,U=0;U<c;U++){var j=U+W*_[2]+N*_[1]+D*_[0],H=g[j],G=g[j=U+q*_[2]+N*_[1]+D*_[0]],J=g[j=U+W*_[2]+P*_[1]+D*_[0]],X=g[j=U+q*_[2]+P*_[1]+D*_[0]],K=H+(G-H)*V;j=U+L*b[2]+E*b[1]+x*b[0],m.values[j]=K+(J+(X-J)*V-K)*F}}else for(var Z=0;Z<p;++Z){var Y=p>1?C*(l-1)+Z*T:.5*(C+I)*(l-1);if(Y<0||Y>l-1)for(var Q=0;Q<c;Q++)m.values[Q+Z*b[2]+E*b[1]+x*b[0]]=i;else for(var $=Math.round(Y),ee=Math.round(R),te=0;te<c;te++)m.values[te+Z*b[2]+E*b[1]+x*b[0]]=g[te+$*_[2]+ee*_[1]+D*_[0]]}}}return m.toTensor()}},{key:"sparseToDense",value:function(e,t,n,r){var a=g.calculateShapes(t,e,n),i=a.sliceRank,o=a.numUpdates,s=a.sliceSize,u=a.strides,l=a.outputSize;return this.scatter(e,t,n,l,s,o,i,u,r,!1)}},{key:"gatherND",value:function(e,t){var n=t.shape,r=n[n.length-1],a=_slicedToArray(g.prepareAndValidate(e,t),4),i=a[0],o=a[1],s=a[2],u=a[3];if(0===o)return mg([],i,e.dtype);for(var l=new Cy([o,s],e.dtype),c=this.readSync(t.dataId),h=this.readSync(e.dataId),f=0;f<o;f++){for(var d=[],p=0,m=0;m<r;m++){var v=c[f*r+m];p+=v*u[m],d.push(v)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(e.shape));for(var y=0;y<s;y++)l.values[f*s+y]=h[p*s+y]}return l.toTensor().reshape(i)}},{key:"scatterND",value:function(e,t,n){var r=g.calculateShapes(t,e,n),a=r.sliceRank,i=r.numUpdates,o=r.sliceSize,s=r.strides,u=r.outputSize,l=yg(0);return this.scatter(e,t,n,u,o,i,a,s,l,!0)}},{key:"fill",value:function(e,t,n){n=n||r.inferDtype(t);var a=r.getArrayFromDType(n,r.sizeFromShape(e));return a.fill(t),O_().makeTensor(a,e,n,this)}},{key:"onesLike",value:function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)}},{key:"zerosLike",value:function(e){var t=r.getArrayFromDType(e.dtype,r.sizeFromShape(e.shape));return this.makeOutput(t,e.shape,e.dtype)}},{key:"linspace",value:function(e,t,n){return g.linspaceImpl(e,t,n)}},{key:"scatter",value:function(e,t,n,r,a,i,o,s,u,l){var c=[r/a,a],h=this.readSync(e.dataId),f=this.readSync(t.dataId);if(0===r)return mg([],n,t.dtype);var d=new Cy(c,t.dtype);d.values.fill(this.readSync(u.dataId)[0]);for(var p=0;p<i;p++){for(var m=[],v=0,y=0;y<o;y++){var g=h[p*o+y];m.push(g),v+=g*s[y]}if(v<0||v>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var _=0;_<a;_++)l?d.values[v*a+_]+=f[p*a+_]:d.values[v*a+_]=0===t.rank?f[0]:f[p*a+_]}return d.toTensor().reshape(n)}}]),i}(fI);function bO(e,t){return{kernelName:e,backendName:"cpu",kernelFunc:function(n){var r=n.inputs,a=n.backend,i=r.a,o=r.b,s=a;cO([i,o],e);var u=s.data.get(i.dataId).values,l=s.data.get(o.dataId).values,c=_slicedToArray(t(i.shape,o.shape,u,l,i.dtype),2),h=c[0],f=c[1];return{dataId:s.write(h,f,i.dtype),shape:f,dtype:i.dtype}}}}function xO(e){return function(t,n,a,i,o){var s=g.assertAndGetBroadcastShape(t,n),u=s.length,l=r.computeStrides(s),c=r.sizeFromShape(s),h=r.getTypedArrayFromDType(o,c),f=t.length,d=n.length,p=r.computeStrides(t),m=r.computeStrides(n),v=g.getBroadcastDims(t,s),y=g.getBroadcastDims(n,s);if(v.length+y.length===0)for(var _=0;_<h.length;++_)h[_]=e(a[_%a.length],i[_%i.length]);else for(var b=function(t){var n=r.indexToLoc(t,u,l),o=n.slice(-f);v.forEach((function(e){return o[e]=0}));var s=r.locToIndex(o,f,p),c=n.slice(-d);y.forEach((function(e){return c[e]=0}));var g=r.locToIndex(c,d,m);h[t]=e(a[s],i[g])},x=0;x<h.length;++x)b(x);return[h,s]}}for(var wO=bO("Div",xO((function(e,t){return e/t}))),kO={kernelName:"Max",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,i=t.x,o=n.reductionIndices,s=a,u=i.shape,l=u.length,c=r.parseAxisParam(o,u),h=g.getAxesPermutation(c,l),f=s.data.get(i.dataId).values;if(null!=h){for(var d=new Array(l),p=0;p<d.length;p++)d[p]=u[h[p]];f=lO(f,u,i.dtype,h,d),c=g.getInnerMostAxes(c.length,l),u=d}cO(i,"max"),g.assertAxesAreInnerMostDims("max",c,l);var m=_slicedToArray(g.computeOutAndReduceShapes(u,c),2),v=m[0],y=m[1],_=uO(f,r.sizeFromShape(y),v,i.dtype);return{dataId:s.write(_,v,i.dtype),shape:v,dtype:i.dtype}}},CO={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,i=t.x,o=n.filterSize,s=n.strides,u=n.pad,l=n.includeBatchInIndex,c=a;cO(i,"MaxPoolWithArgmax");var h=c.data.get(i.dataId).values,f=g.computePool2DInfo(i.shape,o,s,[1,1],u),d=_slicedToArray(function(e,t,n,a,i){var o=hO(e,0,n,r.computeStrides(t),i,"max"),s=fO(e,t,n,i,!0,a);return[o.values,s.values]}(h,i.shape,i.dtype,l,f),2),p=d[0],m=d[1],v=c.write(p,f.outShape,i.dtype),y=c.write(m,f.outShape,i.dtype);return[{dataId:v,shape:f.outShape,dtype:i.dtype},{dataId:y,shape:f.outShape,dtype:"int32"}]}},SO=_.nonMaxSuppressionV5,IO=0,DO=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma,c=n;cO(a,"NonMaxSuppressionWithScore");var h=c.data.get(a.dataId).values,f=c.data.get(i.dataId).values,d=SO(h,f,o,s,u,l);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;cO(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},bO("SquaredDifference",xO((function(e,t){var n=e-t;return n*n}))),wO,{kernelName:"Transpose",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm,o=r;cO(a,"transpose");for(var s=new Array(a.shape.length),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var l=lO(o.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:o.write(l,s,a.dtype),shape:s,dtype:a.dtype}}},CO,kO];IO<DO.length;IO++){kv(DO[IO])}L_("cpu",(function(){return new _O}),1);var AO,TO,EO,RO={},OO={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function MO(e){e in RO||(RO[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete RO[e]}),!1),1===e?t.getContext("webgl",OO)||t.getContext("experimental-webgl",OO):t.getContext("webgl2",OO)}(e));var t=RO[e];return t.isContextLost()?(delete RO[e],MO(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),RO[e])}function NO(e,t){return[t,e]}function PO(e){var t=r.sizeFromShape(e),n=Math.ceil(t/4);return r.sizeToSquarishShape(n)}function FO(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function LO(e,t){var n,r,a,i,o,s,u,l,c,h=e;return 2===dv().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,a=h.RGBA16F,i=h.RGBA32F,o=h.RED,s=4,u=1,l=h.HALF_FLOAT,c=h.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=h.RGBA,o=e.RGBA,s=4,u=4,l=null!=t?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function zO(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),r}function BO(e){return!!(dv().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function WO(e,t,n){return KO(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(AO||(AO={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(TO||(TO={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(EO||(EO={}));var qO,VO,UO=/ERROR: [0-9]+:([0-9]+):/g;function jO(e,t,n){if(zO(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function HO(e,t,n,r,a,i,o,s){var u=e.getAttribLocation(n,r);return-1!==u&&(zO(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,a)})),zO(e,t,(function(){return e.vertexAttribPointer(u,i,e.FLOAT,!1,o,s)})),zO(e,t,(function(){return e.enableVertexAttribArray(u)})),!0)}function GO(e,t,n,r){zO(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),zO(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function JO(e,t,n){zO(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),zO(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function XO(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function KO(e,t,n,r){var a=zO(e,t,(function(){return n()}));if(null==a)throw new Error(r);return a}function ZO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return r.sizeFromShape(e.slice(0,e.length-t))}function YO(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function QO(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[ZO(e)].concat(_toConsumableArray(YO(e)))),t}function $O(e){return e%2==0}function eM(e,t){if(e=e.slice(-2),t=t.slice(-2),r.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],a=t.slice(-1)[0];if(n===a)return!0;if($O(n)&&$O(a)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&$O(e[0])&&$O(t[0])}function tM(e,t){return null!=e.getExtension(t)}function nM(e){try{if(null!=MO(e))return!0}catch(t){return!1}return!1}function rM(e){var t=LO(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}var aM=dv();aM.registerFlag("HAS_WEBGL",(function(){return aM.getNumber("WEBGL_VERSION")>0})),aM.registerFlag("WEBGL_VERSION",(function(){return nM(2)?2:nM(1)?1:0})),aM.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===aM.get("WEBGL_VERSION")})),aM.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),aM.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),aM.registerFlag("WEBGL_PACK",(function(){return aM.getBool("HAS_WEBGL")})),aM.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return aM.getBool("WEBGL_PACK")})),aM.registerFlag("WEBGL_PACK_CLIP",(function(){return aM.getBool("WEBGL_PACK")})),aM.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),aM.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return aM.getBool("WEBGL_PACK")})),aM.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return aM.getBool("WEBGL_PACK")})),aM.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return aM.getBool("WEBGL_PACK")})),aM.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return aM.getBool("WEBGL_PACK")})),aM.registerFlag("WEBGL_PACK_REDUCE",(function(){return aM.getBool("WEBGL_PACK")})),aM.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return aM.getBool("WEBGL_PACK")})),aM.registerFlag("WEBGL_CONV_IM2COL",(function(){return aM.getBool("WEBGL_PACK")})),aM.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==qO){var t=MO(e);qO=t.getParameter(t.MAX_TEXTURE_SIZE)}return qO}(aM.getNumber("WEBGL_VERSION"))})),aM.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==VO){var t=MO(e);VO=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,VO)}(aM.getNumber("WEBGL_VERSION"))})),aM.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=aM.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=MO(e);return tM(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:tM(t,"EXT_disjoint_timer_query")?1:0}(e)})),aM.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return aM.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!i.isMobile()})),aM.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=MO(e);if(1===e){if(!tM(t,"OES_texture_float"))return!1}else if(!tM(t,"EXT_color_buffer_float"))return!1;return rM(t)}(aM.getNumber("WEBGL_VERSION"))})),aM.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!aM.getBool("WEBGL_FORCE_F16_TEXTURES")&&aM.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),aM.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return function(e){if(0===e)return!1;var t=MO(e);if(1!==e){if(tM(t,"EXT_color_buffer_float"))return rM(t);if(tM(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=LO(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),i}(t,n)}return!1}return!!tM(t,"OES_texture_float")&&!!tM(t,"WEBGL_color_buffer_float")&&rM(t)}(aM.getNumber("WEBGL_VERSION"))})),aM.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=aM.getNumber("WEBGL_VERSION"))&&null!=MO(e).fenceSync;var e})),aM.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return aM.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}));var iM=function e(t,n){_classCallCheck(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},oM=function e(t,n){_classCallCheck(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},sM=function e(t,n,r){_classCallCheck(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=Math.ceil(t.inSize/a);r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));",";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat("max"===n?">":"<"," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")};function uM(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function lM(e,t){return 1===t?[e]:uM(e,t)}function cM(){var e,t,n,r,a,i,o,s,u,l;return 2===dv().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function hM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",a=r.computeStrides(t);return a.map((function(t,r){return"".concat("int ".concat(e[r]," = ").concat(n," / ").concat(t),"; ",r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(t):"index -= ".concat(e[r]," * ").concat(t),";")})).join("")}function fM(e){var t=r.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}var dM="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",pM=g.getBroadcastDims,mM="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",vM="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",yM="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",gM="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function _M(e){return"offset".concat(e)}function bM(e){var t=e.name,n=r.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function xM(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function wM(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function kM(e,t){return t.map((function(t){return e[t]})).join(", ")}var CM=function e(t,n,a,i){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,r.assert(t.length>2,(function(){return"Packed arg".concat(a.charAt(0).toUpperCase()+a.slice(1)," supports only inputs with rank above 2.")}));var o=Math.ceil(t[t.length-1]/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");var s,u,l=this.outputShape,c=l.length,h=xM(c),f=lM("coords",c);if(1===o){var d=xM(u=c+1);s="\n        ".concat(d," sourceLocR = ").concat(d,"(").concat(f.join(),", 0);\n        ++").concat(f[c-1],";\n        ").concat(d," sourceLocG = ").concat(d,"(").concat(f.join(),", 0);\n        ++").concat(f[c-2],";\n        ").concat(d," sourceLocA = ").concat(d,"(").concat(f.join(),", 0);\n        --").concat(f[c-1],";\n        ").concat(d," sourceLocB = ").concat(d,"(").concat(f.join(),", 0);\n        --").concat(f[c-2],";")}else u=c,s="\n        ".concat(h," sourceLocR = coords;\n        ++").concat(f[c-1],";\n        ").concat(h," sourceLocG = coords;\n        ++").concat(f[c-2],";\n        ").concat(h," sourceLocA = coords;\n        --").concat(f[c-1],";\n        ").concat(h," sourceLocB = coords;\n        --").concat(f[c-2],";");var p=["x","y","z","w","u","v"].slice(0,u),m="."+p[u-1],v=p.map((function(e){return"int "+e})),y=lM("sourceLocR",u-1).concat("inIdx.r"),g=lM("sourceLocG",u-1).concat("inIdx.g"),_=lM("sourceLocB",u-1).concat("inIdx.b"),b=lM("sourceLocA",u-1).concat("inIdx.a"),x="max"===a?"greaterThan":"lessThan",w=i?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(_.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),")));"),k="vec4(\n            getAChannel(".concat(y.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(_.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(b.join(),") : 0.)"),C=i?"":"\n      float getBestIndicesAChannel(".concat(v.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(v.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(C,"\n      void main() {\n        ").concat(h," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[c-1]," < ").concat(l[c-1]-1,";\n        bool hasNextRow = ").concat(f[c-2]," < ").concat(l[c-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(k,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(k,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(x,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")},SM=function e(t){_classCallCheck(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2(".concat(n-1-t.padInfo.top,", ").concat(r-1-t.padInfo.left,");\n      const float avgMultiplier = float(").concat(1/(t.filterHeight*t.filterWidth),");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,";\n            wR += ").concat(t.dilationHeight,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(r,";\n            wC+= ").concat(t.dilationWidth,") {\n            float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},IM=function e(t){_classCallCheck(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.effectiveFilterDepth,r=t.effectiveFilterHeight,a=t.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3(".concat(n-1-t.padInfo.front,", ").concat(r-1-t.padInfo.top,", ").concat(a-1-t.padInfo.left,");\n      const float avgMultiplier = float(").concat(1/(t.filterDepth*t.filterHeight*t.filterWidth),");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(n,";\n            wD += ").concat(t.dilationDepth,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t.strideDepth,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(r,";\n              wR += ").concat(t.dilationHeight,") {\n            float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(a,";\n                wC += ").concat(t.dilationWidth,") {\n              float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},DM=function e(t,n,r,a,i,o){_classCallCheck(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],g.assertAndGetBroadcastShape(t,n),g.assertAndGetBroadcastShape(t,r);var s="0.0";null!=a&&(g.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(g.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")},AM=function e(t,n,r,a,i,o){_classCallCheck(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],g.assertAndGetBroadcastShape(t,n),g.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";null!=a&&(g.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(g.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")},TM=function e(t,n,r){_classCallCheck(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=g.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")},EM="return a + b;",RM="return a - b;",OM="return a * b;",MM="return (a < 0.) ? b * a : a;",NM=function e(t,n,r){_classCallCheck(this,e),this.variableNames=["A","B"],this.outputShape=g.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")},PM="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",FM=function e(t,n,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=g.assertAndGetBroadcastShape(n,a);var o=this.outputShape.length,s="";if(i)if(0===o||1===r.sizeFromShape(this.outputShape))s="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(s="\n          ".concat(xM(o)," coords = getOutputCoords();\n        "),1===o)s+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=lM("coords",o);s+="\n            bool nextRowOutOfBounds =\n              (".concat(u[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(s,"\n\n        setOutput(result);\n      }\n    ")},LM=function(){function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}}}]),e}(),zM=function(){function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}}}]),e}(),BM=function e(t){_classCallCheck(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},WM=function e(t){_classCallCheck(this,e),this.outputShape=[],this.outputShape=g.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++)a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(n[i-1],"));"));a.push("else setOutput(getT".concat(n.length,"(yR, yC-").concat(n[n.length-1],"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")},qM=function e(t,n){_classCallCheck(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=g.computeOutShape(t,n);var r=this.outputShape,a=r.length,i=xM(a),o=lM("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var l=1;l<u.length;l++)u[l]=u[l-1]+t[l][n];for(var c=s[n],h=s.slice(-2),f=s.join(),d="if (".concat(c," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(h.join(),"));\n        }"),p=1;p<u.length;p++){var m=u[p-1];d+="\n        if (".concat(c," < ").concat(u[p],"  && ").concat(c," >= ").concat(u[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(VM(s,c,m),"),\n            vec2(").concat(VM(h,c,m),"));\n        }")}var v=u[u.length-1];d+="\n        return getChannel(\n          getT".concat(u.length,"(").concat(VM(s,c,v),"),\n          vec2(").concat(VM(h,c,v),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")};function VM(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}var UM=function e(t){_classCallCheck(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t.strideHeight," - ").concat(t.padInfo.top,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(t.strideWidth," - ").concat(t.padInfo.left,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat("channelsLast"===t.dataFormat,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},jM=function e(t){_classCallCheck(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a="channelsLast"===t.dataFormat;this.userCode="\n      const ivec2 pads = ivec2(".concat(n-1-t.padInfo.top,", ").concat(r-1-t.padInfo.left,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(a?3:1,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(a?1:2,"], coords[").concat(a?2:3,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(a,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},HM=function e(t){_classCallCheck(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t.strideDepth," - ").concat(t.padInfo.front,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(t.strideHeight," - ").concat(t.padInfo.top,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(t.strideWidth," - ").concat(t.padInfo.left,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},GM=function e(t){_classCallCheck(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth;this.userCode="\n      const ivec3 pads = ivec3(".concat(n-1-t.padInfo.front,", ").concat(r-1-t.padInfo.top,", ").concat(a-1-t.padInfo.left,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(t.strideDepth,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},JM=function e(t){_classCallCheck(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(t.outChannels/t.inChannels," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t.strideHeight," - ").concat(t.padInfo.top,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(t.strideWidth," - ").concat(t.padInfo.left,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},XM=function e(t){_classCallCheck(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(n-1-t.padInfo.top,", ").concat(r-1-t.padInfo.left,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(a,"; dm++) {\n              int d2 = d1 * ").concat(a," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},KM=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,o=t.padInfo.left,s=t.strideHeight,u=t.strideWidth,l=t.dilationHeight,c=t.dilationWidth,h=t.filterHeight,f=t.filterWidth,d=4*Math.floor(t.inChannels/4),p=t.inChannels%4,m="channelsLast"===t.dataFormat,v=m?1:2,y=m?2:3,g=m?3:1,_="",b="";r&&(_=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),b="result = activation(result);");var x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      ".concat(_,"\n\n      const ivec2 strides = ivec2(").concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(g,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(v,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(f,"; wC++) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(d,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===p,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(d,") *\n                    getW(wR, wC, ").concat(d,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(d,", xR, xC) *\n                    getW(wR, wC, ").concat(d,", d2);\n              }\n\n            } else if (").concat(2===p,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(d,", d2),\n                getW(wR, wC, ").concat(d," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(d,"),\n                  getX(batch, xR, xC, ").concat(d," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(d,", xR, xC),\n                  getX(batch, ").concat(d," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===p,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(d,", d2),\n                getW(wR, wC, ").concat(d," + 1, d2),\n                getW(wR, wC, ").concat(d," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(d,"),\n                  getX(batch, xR, xC, ").concat(d," + 1),\n                  getX(batch, xR, xC, ").concat(d," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(d,", xR, xC),\n                  getX(batch, ").concat(d," + 1, xR, xC),\n                  getX(batch, ").concat(d," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(x,"\n        ").concat(b,"\n        setOutput(result);\n      }\n    ")},ZM=function e(t){_classCallCheck(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,h=t.filterDepth,f=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(h,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},YM=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,o=t.inWidth,s=t.padInfo.top,u=t.padInfo.left,l=t.strideHeight,c=t.strideWidth,h=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,p=t.filterWidth,m=t.outChannels/t.inChannels,v="",y="";r&&(v=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),y="result = activation(result);");var g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      ".concat(v,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(m,";\n        int q = d2 - d1 * ").concat(m,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(h,";\n\n          if (xR < 0 || xR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(o,") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(g,"\n        ").concat(y,"\n        setOutput(result);\n      }\n    ")},QM=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var o=t.inHeight,s=t.inWidth,u=t.padInfo.top,l=t.padInfo.left,c=t.strideHeight,h=t.strideWidth,f=t.dilationHeight,d=t.dilationWidth,p=t.filterHeight,m=t.filterWidth,v=m,y="int xR; int xC; int xCOffset;",g=0;g<p;g++)for(var _=0;_<m;_++)y+="\n          vec4 xTexelR".concat(g,"C").concat(2*_," = vec4(0.);\n          vec4 wR").concat(g,"C").concat(_," = vec4(0.);\n          vec4 xR").concat(g,"C").concat(_," = vec4(0.);");for(var b=0;b<p;b++)for(var x=0;x<v;x++){var w=2*x;if(y+="\n          xR = xRCorner + ".concat(b*f,";\n          xC = xCCorner + ").concat(w*d,";\n        "),1===h){if(w<m&&(y+=l%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ".concat(o," && xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(b,"C").concat(w," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(s,") {\n                    xTexelR").concat(b,"C").concat(w,".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR").concat(b,"C").concat(w," = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ").concat(o," && xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(s,") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR").concat(b,"C").concat(w," = vec4(previous.zw, xTexelR").concat(b,"C").concat(w,".xy);\n                } else {\n                  xR").concat(b,"C").concat(w," = vec4(0, 0, xTexelR").concat(b,"C").concat(w,".xy);\n                }\n              "):"\n                if(xR >= 0 && xR < ".concat(o," && xC >= 0 && xC < ").concat(s,") {\n                  xTexelR").concat(b,"C").concat(w," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(b,"C").concat(w," = vec4(0.);\n                }\n\n                xR").concat(b,"C").concat(w," = xTexelR").concat(b,"C").concat(w,";\n              "),w+1<m)){var k=l%2==0?r.nearestLargerEven(d):d;d%2==0&&l%2==1||d%2!=0&&l%2!=1?(y+="\n                  xCOffset = xC + ".concat(l%2," + ").concat(k,";\n\n                  if(xR >= 0 && xR < ").concat(o," &&\n                    xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    xTexelR").concat(b,"C").concat(w+2," = getX(batch, xR, xCOffset, d1);\n                  }\n                "),d>1&&(y+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ".concat(o," &&\n                      xCOffset >= 0 && xCOffset < ").concat(s,") {\n                      xTexelR").concat(b,"C").concat(w," = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR").concat(b,"C").concat(w," = vec4(0.);\n                    }\n                  ")),y+="\n                  xR".concat(b,"C").concat(w+1," = vec4(\n                    xTexelR").concat(b,"C").concat(w,".zw, xTexelR").concat(b,"C").concat(w+2,".xy);\n                ")):y+="\n                  xCOffset = xC + ".concat(k,";\n\n                  if(xR >= 0 && xR < ").concat(o," &&\n                    xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    xTexelR").concat(b,"C").concat(w+2," = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR").concat(b,"C").concat(w+1," = xTexelR").concat(b,"C").concat(w+2,";\n                ")}}else w<m&&(y+="\n              if(xR >= 0 && xR < ".concat(o,") {\n            "),l%2==1?(y+="\n                xCOffset = xC + 1 - ".concat(h,";\n                if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(b,"C").concat(w," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(b,"C").concat(w," = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ").concat(s,") {\n                  xTexelR").concat(b,"C").concat(w+2," = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR").concat(b,"C").concat(w+2," = vec4(0.);\n                }\n\n                xR").concat(b,"C").concat(w," = vec4(\n                  xTexelR").concat(b,"C").concat(w,".zw, xTexelR").concat(b,"C").concat(w+2,".zw);\n              "),w+1<m&&(y+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ".concat(h,";\n                  if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR").concat(b,"C").concat(w+1," = vec4(xTexelR").concat(b,"C").concat(w+2,".xy, final.xy);\n                "))):(y+="\n                if(xC >= 0 && xC < ".concat(s,") {\n                  xTexelR").concat(b,"C").concat(w," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(b,"C").concat(w," = vec4(0.);\n                }\n\n                xCOffset = xC + ").concat(h,";\n                if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(b,"C").concat(w+2," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(b,"C").concat(w+2," = vec4(0.);\n                }\n\n                xR").concat(b,"C").concat(w," = vec4(\n                  xTexelR").concat(b,"C").concat(w,".xy, xTexelR").concat(b,"C").concat(w+2,".xy);\n              "),w+1<m&&(y+="\n                  xR".concat(b,"C").concat(w+1," = vec4(\n                    xTexelR").concat(b,"C").concat(w,".zw, xTexelR").concat(b,"C").concat(w+2,".zw);\n                "))),y+="}");w<m&&(y+="\n            vec4 wTexelR".concat(b,"C").concat(w," = getW(").concat(b,", ").concat(w,", d1, q);\n            wR").concat(b,"C").concat(w," = vec4(wTexelR").concat(b,"C").concat(w,".xz, wTexelR").concat(b,"C").concat(w,".xz);\n          "),w+1<m&&(y+="\n              vec4 wTexelR".concat(b,"C").concat(w+1," = getW(").concat(b,", ").concat(w+1,", d1, q);\n              wR").concat(b,"C").concat(w+1," =\n                vec4(wTexelR").concat(b,"C").concat(w+1,".xz, wTexelR").concat(b,"C").concat(w+1,".xz);")))}for(var C=0;C<p;C++)for(var S=0;S<m;S++)y+="dotProd += xR".concat(C,"C").concat(S," * wR").concat(C,"C").concat(S,";");var I="",D="";a&&(I=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(a,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(a,"\n        }"),D="result = activation(result);");var A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      ".concat(I,"\n\n      const ivec2 strides = ivec2(").concat(c,", ").concat(h,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(l,");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ").concat(y,"\n\n        vec4 result = dotProd;\n        ").concat(A,"\n        ").concat(D,"\n        setOutput(result);\n      }\n    ")},$M=function e(t,n,r,a,i){_classCallCheck(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=_slicedToArray(t,4),s=o[0],u=o[1],l=o[2],c=o[3],h=_slicedToArray(n,1)[0],f=_slicedToArray(r,2),d=f[0],p=f[1];this.outputShape=[h,d,p,c];var m="bilinear"===a?1:0,v="".concat(u-1,".0"),y="".concat(l-1,".0"),g=_slicedToArray(d>1?["".concat((u-1)/(d-1)),"(y2-y1) * height_ratio","y1*".concat(v," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(v)],3),_=g[0],b=g[1],x=g[2],w=_slicedToArray(p>1?["".concat((l-1)/(p-1)),"(x2-x1) * width_ratio","x1*".concat(y," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(y)],3),k=w[0],C=w[1],S=w[2];this.userCode="\n      const float height_ratio = float(".concat(_,");\n      const float width_ratio = float(").concat(k,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(b,";\n        float width_scale = ").concat(C,";\n\n        float in_y = ").concat(x,";\n        if( in_y < 0.0 || in_y > ").concat(v," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(S,";\n        if( in_x < 0.0 || in_x > ").concat(y," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")},eN=function e(t,n,r){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=t;var a=t.length,i=t[t.length-1],o=r?"<":">";this.userCode="\n      int getIndex(int i) {\n        ".concat(r?"return ".concat(i," -i - 1;"):"return i;","\n      }\n\n      void main() {\n        ").concat(xM(a)," coords = getOutputCoords();\n        int end = ").concat(tN(a,"coords"),";\n        float val = 0.0;\n        for (int i = ").concat(i," - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx ").concat(o," end) {\n            continue;\n          }\n          if (idx == end && ").concat(n,") {\n            continue;\n          }\n          ").concat(tN(a,"coords")," = idx;\n          val += getX(").concat(function(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")};function tN(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}var nN=function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=AO.DENSE;var n=PO(t),r=cM();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(hM(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},rN=function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=AO.DENSE;var n=PO(t),r=cM();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(hM(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},aN=function(){function e(t,n,r){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return _createClass(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}(),iN=function e(t){_classCallCheck(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},oN=function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.outTexUsage=TO.DOWNLOAD;var n=cM();this.outputShape=t,this.userCode="\n      ".concat(dM,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},sN=function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=TO.DOWNLOAD;var n=cM();this.outputShape=t,this.userCode="\n      ".concat(dM,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},uN=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.variableNames=["A"];var a=cM(),i=_slicedToArray(n,2),o=i[0],s=i[1];this.outputShape=t;var u="result";r&&(u="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(fM(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / ").concat(s,";\n        int c = imod(flatIndex, ").concat(s,");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n        vec4 values = ").concat(a.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(a.output," = vec4(").concat(u,", 0., 0., 0.);\n      }\n    ")},lN=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var a=cM(),i=_slicedToArray(n,2),o=i[0],s=i[1];this.outputShape=t;var u="",l="result";r&&(l="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var h=0;h<=1;h++){var f=2*c+h;u+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(h," < ").concat(t[2],") {\n            localCoords[2] += ").concat(h,";\n            if(localCoords[1] + ").concat(c," < ").concat(t[1],") {\n              localCoords[1] += ").concat(c,";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ").concat(s,";\n              c = imod(flatIndex, ").concat(s,");\n              uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n              values = ").concat(a.texture2D,"(A, uv);\n\n              if(offset == 0) {\n                result[").concat(f,"] = values[0];\n              } else if(offset == 1) {\n                result[").concat(f,"] = values[1];\n              } else if(offset == 2) {\n                result[").concat(f,"] = values[2];\n              } else {\n                result[").concat(f,"] = values[3];\n              }\n            }\n          }\n        ")}this.userCode="\n      ".concat(fM(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ").concat(u,"\n\n        ").concat(a.output," = ").concat(l,";\n      }\n    ")},cN=function e(t,n,r){_classCallCheck(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI);this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(t,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(r?"".concat(a,".0"):"1.0",";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")},hN=function(){function e(t,n){_classCallCheck(this,e),this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}}}]),e}(),fN=function e(t,n,r){_classCallCheck(this,e),this.variableNames=["A","indices"];var a=t.slice();a[r]=n,this.outputShape=a,this.rank=a.length;var i=xM(this.rank),o=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank ".concat(n," is not yet supported"));if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],i=0;i<e.length;i++)a.push(i===t?"int(getIndices(".concat(r[i],"))"):"".concat(r[i]));return a.join()}(t,r);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")},dN=function e(t,n,r){_classCallCheck(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=xM(n.length),i=xM(r.length);this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(this.sliceDim>1?"strides[j]":"strides",";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")};function pN(e,t,n,r,a,i,o){!function(e,t){var n=dv().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error("Requested texture size "+"[".concat(e,"x").concat(t,"]")+" is invalid.");if(e>n||t>n)throw new Error("Requested texture size "+"[".concat(e,"x").concat(t,"]")+" greater than WebGL maximum on this browser / GPU "+"[".concat(n,"x").concat(n,"]")+".")}(n,r);var s=function(e,t){return KO(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e,t),u=e.TEXTURE_2D;return zO(e,t,(function(){return e.bindTexture(u,s)})),zO(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),zO(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),zO(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)})),zO(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)})),zO(e,t,(function(){return e.texImage2D(u,0,a,n,r,0,i,o,null)})),zO(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}var mN=function(){function e(t){_classCallCheck(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=dv().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){RO[e]=t}(n,t)):this.gl=MO(n);var r="WEBGL_color_buffer_float";if(1===dv().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=WO(this.gl,this.debug,"OES_texture_float"),tM(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=WO(this.gl,this.debug,"OES_texture_half_float");else if(dv().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),tM(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=WO(this.gl,this.debug,"EXT_color_buffer_half_float");else if(dv().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",tM(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!tM(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=function(e,t){return function(e,t,n){var r=KO(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return zO(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),zO(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl,this.debug),this.indexBuffer=function(e,t){return function(e,t,n){var r=KO(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return zO(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),zO(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}(e,t,new Uint16Array([0,1,2,2,1,3]))}(this.gl,this.debug),this.framebuffer=function(e,t){return KO(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl,this.debug),this.textureConfig=LO(this.gl,this.textureHalfFloatExtension)}var t;return _createClass(e,[{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;zO(t,this.debug,(function(){return t.finish()})),zO(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),zO(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),zO(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),zO(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),zO(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r,a){var i=_slicedToArray(NO(n,r),2);return pN(e,t,i[0],i[1],a.internalFormatFloat,a.textureFormatFloat,e.FLOAT)}(this.gl,this.debug,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r,a){var i=_slicedToArray(NO(n,r),2);return pN(e,t,i[0],i[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}(this.gl,this.debug,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r,a){var i=_slicedToArray(NO(n,r),2);return pN(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}(this.gl,this.debug,e,t)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n,r){zO(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?zO(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):zO(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),zO(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,this.debug,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i,o){var s,u,l;zO(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),i instanceof Uint8Array?(s=new Uint8Array(r*a*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*a*4),u=e.FLOAT,l=o.internalFormatPackedFloat),s.set(i),zO(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,a,0,e.RGBA,u,s)})),zO(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,this.debug,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r,a){var i=_slicedToArray(FO(n,r),2);return pN(e,t,i[0],i[1],a.internalFormatPackedHalfFloat,e.RGBA,a.textureTypeHalfFloat)}(this.gl,this.debug,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r,a){var i=_slicedToArray(FO(n,r),2);return pN(e,t,i[0],i[1],a.internalFormatPackedFloat,e.RGBA,e.FLOAT)}(this.gl,this.debug,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(JO(this.gl,this.debug,this.framebuffer),this.outputTexture=null),zO(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r,a){var i=_slicedToArray(NO(n,r),2),o=i[0],s=i[1],u=new Uint8Array(n*r*4);return zO(e,t,(function(){return e.readPixels(0,0,o,s,a.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}(r.gl,r.debug,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return function(e,t,n,r,a,i,o,s){var u=e,l=new Float32Array(function(e,t){var n=_slicedToArray(FO(e,t),2);return n[0]*n[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}(this.gl,e,0,0,0,a,i)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r,a){var i=e.createBuffer();zO(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)}));var o=16*n*r;return zO(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),zO(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),zO(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),i}(this.gl,this.debug,t,n);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(dv().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=new Float32Array(n*r*4);return zO(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,a)})),a}(r.gl,r.debug,t,n)}))}},{key:"createProgram",value:function(e){this.throwIfDisposed();var t=this.gl,n=function(e,t,n){var a=KO(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(zO(e,t,(function(){return e.shaderSource(a,n)})),zO(e,t,(function(){return e.compileShader(a)})),!1===e.getShaderParameter(a,e.COMPILE_STATUS))throw function(e,t){var n=UO.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var a=+n[1],i=e.split("\n"),o=i.length.toString().length+2,s=i.map((function(e,t){return r.rightPad((t+1).toString(),o)+e})),u=0,l=0;l<s.length;l++)u=Math.max(s[l].length,u);var c=s.slice(0,a-1),h=s.slice(a-1,a),f=s.slice(a);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(r.rightPad(h[0],u)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(n,e.getShaderInfoLog(a)),new Error("Failed to compile fragment shader.");return a}(t,this.debug,e),a=function(e,t){var n=cM();return function(e,t,n){var r=KO(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(zO(e,t,(function(){return e.shaderSource(r,n)})),zO(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}(e,t,"".concat(n.version,"\n    precision highp float;\n    ").concat(n.attribute," vec3 clipSpacePos;\n    ").concat(n.attribute," vec2 uv;\n    ").concat(n.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}(t,this.debug),i=function(e,t){return KO(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(t,this.debug);return zO(t,this.debug,(function(){return t.attachShader(i,a)})),zO(t,this.debug,(function(){return t.attachShader(i,n)})),function(e,t,n){if(zO(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}(t,this.debug,i),this.debug&&jO(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=function(e,t,n,r){return zO(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),HO(e,t,n,"clipSpacePos",r,3,20,0)&&HO(e,t,n,"uv",r,2,20,12)}(t,this.debug,this.program,this.vertexBuffer)),i}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&zO(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&jO(this.gl,this.debug,this.program),zO(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n,r){return KO(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}(this.gl,this.debug,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),zO(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),function(e,t,n,r,a,i){zO(e,t,(function(){return function(e,t,n,r){(function(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in ".concat("[gl.TEXTURE0, gl.TEXTURE".concat(n,"]"),"."))})(e,r),zO(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),zO(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}(e,t,r,i)})),zO(e,t,(function(){return e.uniform1i(a,i)}))}(this.gl,this.debug,0,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=_slicedToArray(FO(t,n),2),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&jO(this.gl,this.debug,this.program),XO(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),zO(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),zO(this.gl,this.debug,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=WO(this.gl,this.debug,2===dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||r.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),GO(this.gl,this.debug,e,this.framebuffer),this.debug&&XO(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(GO(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&XO(this.gl)):JO(this.gl,this.debug,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;GO(r,this.debug,e,this.framebuffer),this.debug&&XO(r),this.outputTexture=e,zO(r,this.debug,(function(){return r.viewport(0,0,t,n)})),zO(r,this.debug,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),zO(this.gl,this.debug,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}},{key:"debug",get:function(){return dv().getBool("DEBUG")}}]),e}();function vN(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var a=e.logicalShape,i=t[n],o=i.shape;if(!r.arraysEqual(a,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(a," and ").concat(o," must match"));if(!e.isUniform||!i.isUniform){var s=e.texShape,u=i.isUniform?null:i.texData.texShape;if(!r.arraysEqual(s,u))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(s," and ").concat(u," must match"))}}))}var yN=function e(t,n,r){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var a=r.filterWidth,i=r.inChannels,o=r.strideWidth,s=r.strideHeight,u=r.padInfo,l=r.outWidth,c=r.dilationWidth,h=r.dilationHeight,f=r.dataFormat,d=u.left,p=u.top,m=i*a,v=cM(),y="channelsLast"===f,g=y?0:1,_=y?1:2,b="",x=0;x<=1;x++)for(var w=0;w<=1;w++)b+="\n          blockIndex = rc.y + ".concat(w,";\n          pos = rc.x + ").concat(x,";\n\n          if(blockIndex < ").concat(t[1]," && pos < ").concat(t[0],") {\n            offsetY = int(blockIndex / (").concat(l,")) * ").concat(s," - ").concat(p,";\n            d0 = offsetY + ").concat(h," * (pos / ").concat(m,");\n\n            if(d0 < ").concat(n[g]," && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ").concat(l,".) * ").concat(o,". - ").concat(d,".);\n              d1 = offsetX + ").concat(c," * (int(mod(float(pos), ").concat(m,".) / ").concat(i,".));\n\n              if(d1 < ").concat(n[_]," && d1 >= 0) {\n\n                ch = int(mod(float(pos), ").concat(i,".));\n\n                if (").concat(y,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*x+w,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*x+w,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(b,"\n\n        ").concat(v.output," = result;\n      }\n    ")},gN=function e(t,n,r,a,i){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var l="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(l,")"):1===i?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")},_N=function e(t,n,r,a,i){_classCallCheck(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")},bN=function e(t,n,r,a,i){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var l="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(l,")"):1===i?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")},xN=function e(t){_classCallCheck(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2(".concat(n-1-t.padInfo.top,", ").concat(r-1-t.padInfo.left,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,";\n          wR += ").concat(t.dilationHeight,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(n*r-1," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(r," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},wN=function e(t){_classCallCheck(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.effectiveFilterDepth,r=t.effectiveFilterHeight,a=t.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3(".concat(n-1-t.padInfo.front,", ").concat(r-1-t.padInfo.top,", ").concat(a-1-t.padInfo.left,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(n,";\n           wD += ").concat(t.dilationDepth,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t.strideDepth,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(r,";\n              wR += ").concat(t.dilationHeight,") {\n            float dyR = float(dyRCorner + wR) / ").concat(t.strideHeight,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(a,";\n                wC += ").concat(t.dilationWidth,") {\n              float dyC = float(dyCCorner + wC) / ").concat(t.strideWidth,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(n*r*a-1," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(r," * ").concat(a," +\n                  wR * ").concat(a," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},kN=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];_classCallCheck(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var u=Math.ceil((r?t[1]:t[2])/2),l=r?"i * 2, rc.y":"rc.y, i * 2",c=a?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",p="";o&&(d=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(o,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(o,"\n        }"),p="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      ".concat(d,"\n\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(rc.x, ").concat(l,");\n          vec4 b = getMatrixB(rc.x, ").concat(c,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(f[0],");\n          result += (").concat(h[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(m,"\n\n        ").concat(p,"\n\n        setOutput(result);\n      }\n    ")},CN=function(){function e(t,n,r){_classCallCheck(this,e),this.variableNames=["probs"],this.outputShape=[t,r],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}}}]),e}(),SN=function e(t,n,r,a){_classCallCheck(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")},IN=function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(0===n)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var r=lM("rc",n),a=xM(n),i=function(e,t,n){if(1===e)return"rc > ".concat(t[0]);for(var r="",a=e-2;a<e;a++)r+="".concat(n[a]," >= ").concat(t[a]),a<e-1&&(r+="||");return r}(n,t,r),o=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = ".concat(a[0],";\n    int c = ").concat(a[1],";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ").concat(t,";\n    bool rEdge = rp1 >= ").concat(n,";\n  ")}(n,t[t.length-1],t[t.length-2],r),s=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var i="".concat(0===r?"r":"rp1",", ").concat(0===a?"c":"cp1"),o=2;o<e;o++)i="".concat(t[t.length-1-o],",")+i;n.push(i)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= ".concat(e[0]," ? 0. : getA(rc + 1),\n            0, 0"):"getA(".concat(r[0],"),\n          cEdge ? 0. : getA(").concat(r[1],"),\n          rEdge ? 0. : getA(").concat(r[2],"),\n          rEdge || cEdge ? 0. : getA(").concat(r[3],")")}(t,r);this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n\n          if(").concat(i,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(o,"\n\n            setOutput(vec4(").concat(s,"));\n          }\n        }\n      ")}},DN=function e(t,n,r){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=xM(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(").concat(r,"));\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(").concat(r,"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")},AN=function e(t,n,r){_classCallCheck(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=xM(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=lM("rc",a),l=lM("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),h=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),f=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(c,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(c,") {")],d=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",m=0,v=1===a?2:4;m<v;m++)p+="\n        ".concat(f[m],"\n        if (").concat(d,") {\n          result[").concat(m,"] = float(").concat(r,");\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(l.join(),"), ").concat(h,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")},TN=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_classCallCheck(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,l=t.dilationHeight,c=t.dilationWidth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,v="0.0";if(m||(v="-1.0 / 1e-20"),r)this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?"((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"):"(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"):"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ");else{var y="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(y="avgValue / count");var g=4*Math.floor(o/4),_=o%4,b="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float initializationValue = ").concat(v,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(v,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(g,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(b,"\n          }\n\n          int xC = xCCorner + ").concat(g,";\n          if (").concat(1===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(b,"\n          } else if (").concat(2===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(b,"\n          } else if (").concat(3===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(b,"\n          }\n        }\n        setOutput(").concat(y,");\n      }\n    ")}},EN=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_classCallCheck(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,l=t.strideWidth,c=t.dilationDepth,h=t.dilationHeight,f=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,m=t.effectiveFilterWidth,v=t.padInfo.front,y=t.padInfo.top,g=t.padInfo.left;this.outputShape=t.outShape;var _="avg"===n,b="0.0";if(_||(b="-1.0 / 1e-20"),r)this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(v,", ").concat(y,", ").concat(g,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(h,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ");else{var x="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(x="avgValue / count");var w=4*Math.floor(o/4),k=o%4,C="\n      if (".concat(_,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(v,", ").concat(y,", ").concat(g,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(h,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(C,"\n            }\n\n            int xC = xCCorner + ").concat(w,";\n            if (").concat(1===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(2===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(3===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(C,"\n            }\n          }\n          setOutput(").concat(x,");\n        }\n      }\n    ")}},RN=function e(t,n){_classCallCheck(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=Math.ceil(i/r);this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var l="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?l="sumValue":"prod"===n?l="prodValue":"all"===n?l="allValue":"any"===n&&(l="anyValue");var c=4*Math.floor(r/4),h=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n      }\n    "),d="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===h,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===h,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===h,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")},ON=function e(t,n){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r,a="",i=0;i<4;i++){var o="thisRC = rc;";i%2==1&&(o+="thisRC.z += 1;"),i>1&&(o+="thisRC.y += 1;"),a+="\n        ".concat(o,"\n        ").concat(i>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(i,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(i>0?"}":"","\n      ")}this.userCode="\n      ".concat((r=n,"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(hM(["r","c","d"],r),"\n      return ivec3(r, c, d);\n    }\n  ")),"\n      ").concat(fM(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(t[1],";\n        int cols = ").concat(t[2],";\n\n        ").concat(a,"\n\n        setOutput(result);\n      }\n    ")},MN=function e(t,n,r){_classCallCheck(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var a=_slicedToArray(n.shape,3),i=a[1],o=a[2],s=_slicedToArray(t.shape,3),u=s[1],l=s[2],c=[r&&u>1?i-1:i,r&&l>1?o-1:o],h=[r&&u>1?u-1:u,r&&l>1?l-1:l],f=c[0]/h[0],d=c[1]/h[1],p=1/f,m=1/d,v=2*Math.ceil(p)+2,y=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")},NN=function e(t,n,r,a){_classCallCheck(this,e),this.variableNames=["A"],this.outputShape=[];var i=_slicedToArray(t,4),o=i[0],s=i[1],u=i[2],l=i[3];this.outputShape=[o,n,r,l];var c=[a&&n>1?s-1:s,a&&r>1?u-1:u],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/h[0],",\n          ").concat(c[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(u,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")},PN=function e(t,n,r,a){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=_slicedToArray(t,4),o=i[0],s=i[1],u=i[2],l=i[3];this.outputShape=[o,n,r,l];var c=[a&&n>1?s-1:s,a&&r>1?u-1:u],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/h[0],",\n          ").concat(c[1]/h[1],",\n          ").concat(c[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(u,".0,\n                                     ").concat(u,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")},FN=function e(t,n,r){_classCallCheck(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var a=_slicedToArray(n.shape,3),i=a[1],o=a[2],s=_slicedToArray(t.shape,3),u=s[1],l=s[2],c=[r&&u>1?i-1:i,r&&l>1?o-1:o],h=[r&&u>1?u-1:u,r&&l>1?l-1:l],f=c[0]/h[0],d=c[1]/h[1],p=1/f,m=1/d,v=2*Math.ceil(p)+2,y=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(c[0],") *\n                (float(dyR) / float(").concat(h[0],"));\n\n            float sourceFracCol =\n                float(").concat(c[1],") *\n                  (float(dyC) / float(").concat(h[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")},LN=function e(t,n,r,a){_classCallCheck(this,e),this.variableNames=["A"],this.outputShape=[];var i=_slicedToArray(t,4),o=i[0],s=i[1],u=i[2],l=i[3];this.outputShape=[o,n,r,l];var c=[a&&n>1?s-1:s,a&&r>1?u-1:u],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/h[0],",\n          ").concat(c[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(u,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(a?"0.5":"0.0",")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")},zN=function e(t,n){_classCallCheck(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=xM(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")},BN=function e(t,n){_classCallCheck(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=lM("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=xM(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)}));return"getChannel(getX(".concat(r.join(","),"), vec2(").concat(r.slice(-2).join(","),"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")},WN=function e(t,n,r,a,i,o){!(arguments.length>6&&void 0!==arguments[6])||arguments[6];_classCallCheck(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=xM(i.length),u=xM(o.length),l="";1===r?l="i":2===r&&(l="i, j");var c="";1===a?c="i":2===a&&(c="i, coords[1]"),this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(","getIndices(".concat(l,")"),");\n              flattenedIndex += index * ").concat(n>1?"strides[j]":"strides",";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ","getUpdates(".concat(c,")"),";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")},qN=function e(t,n){_classCallCheck(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),l=r%4,c="\n        sumValue += dot(values, segFilter);\n    ",h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ".concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")},VN=function e(t,n,r){var a,i;if(_classCallCheck(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],l=0;l<n.length;l++)u.push("".concat(o[l])),l<t&&s.push("".concat(o[l]));a=s.join(),i=u.join()}var c=xM(r);this.userCode="\n      void main() {\n        ".concat(c," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")},UN=function(){function e(t){_classCallCheck(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=xM(this.rank),a="uniform int start[".concat(this.rank,"];"),i=function(e){if(1===e)return"sourceLoc";if(e<=6)return jN.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);n="\n        ".concat(r," sourceLoc;\n        ").concat(r," coords = getOutputCoords();\n        ").concat(t.map((function(e,t){return"sourceLoc.".concat(jN[t]," = start[").concat(t,"] + coords.").concat(jN[t],";")})).join("\n"),"\n      "),this.userCode="\n      ".concat(a,"\n      void main() {\n        ").concat(n,"\n        setOutput(getSource(").concat(i,"));\n      }\n    ")}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;if(e.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the ")+"length of start (".concat(e.length,")"));return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}}}]),e}(),jN=["x","y","z","w","u","v"],HN=function(){function e(t){_classCallCheck(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=xM(this.rank),r=lM("coords",this.rank),a=lM("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      uniform int start[".concat(this.rank,"];\n      void main() {\n        ").concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}return _createClass(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;if(e.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the ")+"length of start (".concat(e.length,")"));return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}}}]),e}(),GN=function e(t,n,r){_classCallCheck(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=xM(r.length),o=xM(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")},JN=function(){function e(t){_classCallCheck(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return _createClass(e,[{key:"acquireTexture",value:function(e,t,n){var r,a=XN(t,n),i=KN(e,a,n);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var o=this.freeTextures[i].shift();return this.usedTextures[i].push(o),o}return this.numUsedTextures++,this.log(),a===EO.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===EO.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===EO.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===EO.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===EO.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(r),r}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=KN(t,XN(n,r),r);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[a],o=i.indexOf(e);if(o<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(o,1),this.log()}}},{key:"log",value:function(){this.logEnabled&&console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(this.numFreeTextures+this.numUsedTextures,")"))}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}}}]),e}();function XN(e,t){if(e===TO.UPLOAD)return EO.PACKED_2X2_FLOAT32;if(e===TO.RENDER||null==e)return function(e){return dv().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?EO.PACKED_2X2_FLOAT32:EO.UNPACKED_FLOAT32:e?EO.PACKED_2X2_FLOAT16:EO.UNPACKED_FLOAT16}(t);if(e===TO.DOWNLOAD||e===TO.PIXELS)return EO.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function KN(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var ZN=function e(t,n){_classCallCheck(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=xM(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")},YN=function e(t,n){_classCallCheck(this,e),this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},QN="return abs(x);",$N="if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",eP="if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",tP="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(g.SELU_SCALEALPHA,";\n  float scale = ").concat(g.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n"),nP="return -x;",rP="return ceil(x);",aP="return floor(x);",iP="return exp(x);",oP="return exp(x) - 1.0;",sP='\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(g.ERF_P,";\n  float a1 = ").concat(g.ERF_A1,";\n  float a2 = ").concat(g.ERF_A2,";\n  float a3 = ").concat(g.ERF_A3,";\n  float a4 = ").concat(g.ERF_A4,";\n  float a5 = ").concat(g.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n"),uP="return x;",lP="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cP="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",hP="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",fP=function e(t,n){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},dP=function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,r=lM("rc",n),a=xM(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")},pP=g.segment_util,mP=_.split,vP=_.tile,yP=_.topkImpl,gP=_.whereImpl,_P={};function bP(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?lP:$N;if("elu"===e)return t?hP:"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?cP:eP;if("prelu"===e)return t?PM:MM;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var xP,wP=function(e){_inherits(s,e);var t,n,a,i=_createSuper(s);function s(e){var t,n;if(_classCallCheck(this,s),(t=i.call(this)).pendingRead=new WeakMap,t.pendingDisposal=new WeakSet,t.dataRefCount=new WeakMap,t.numBytesInGPU=0,t.uploadWaitMs=0,t.downloadWaitMs=0,t.warnedAboutMemory=!1,t.pendingDeletes=0,t.disposed=!1,!dv().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var r=MO(dv().getNumber("WEBGL_VERSION"));t.binaryCache=((n=dv().getNumber("WEBGL_VERSION"))in _P||(_P[n]={}),_P[n]),t.gpgpu=new mN(r),t.canvas=r.canvas,t.gpgpuCreatedLocally=!0}else t.gpgpu=e,t.binaryCache={},t.gpgpuCreatedLocally=!1,t.canvas=e.gl.canvas;return t.textureManager=new JN(t.gpgpu),t.numMBBeforeWarning=null==dv().global.screen?1024:dv().global.screen.height*dv().global.screen.width*window.devicePixelRatio*600/1024/1024,t.texData=new hI(_assertThisInitialized(t),O_()),_possibleConstructorReturn(t)}return _createClass(s,[{key:"numDataIds",value:function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}},{key:"write",value:function(e,t,n){if(dv().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:TO.UPLOAD}),r}},{key:"move",value:function(e,t,n,r){if(dv().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:TO.UPLOAD})}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,a=t.dtype,i=t.complexTensors,o=t.slice,s=t.shape,u=t.isPacked;if(null!=o){var l;l=u?new fP(s,uP):new YN(s,uP);var c=this.runWebGLProgram(l,[{dataId:e,shape:s,dtype:a}],a),h=this.readSync(c.dataId);return this.disposeData(c.dataId),h}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===a)return n;var f,d,p=null!=this.activeTimers;if(p&&(f=r.now()),"complex64"===a){var m=i.real.dataSync(),v=i.imag.dataSync();d=g.mergeRealAndImagArrays(m,v)}else d=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=r.now()-f),this.convertAndCacheOnCPU(e,d)}},{key:"read",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,a,i,o,s,u,l,c,h,f,d,p,m,v,y,_,b,x,w,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(a=this.texData.get(t),i=a.values,o=a.shape,s=a.slice,u=a.dtype,l=a.complexTensors,c=a.isPacked,null==s){e.next=8;break}return h=c?new fP(o,uP):new YN(o,uP),f=this.runWebGLProgram(h,[{dataId:t,shape:o,dtype:u}],u),d=this.read(f.dataId),e.abrupt("return",(this.disposeData(f.dataId),d));case 8:if(null==i){e.next=10;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 10:if(dv().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==dv().getNumber("WEBGL_VERSION")){e.next=12;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 12:if(v=null,"complex64"!==u&&dv().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),_=this.texData.get(p.dataId),v=(y=this.gpgpu).createBufferFromTexture.apply(y,[_.texture].concat(_toConsumableArray(PO(o))))),this.pendingRead.set(t,[]),e.t0="complex64"!==u,!e.t0){e.next=19;break}return e.next=19,this.gpgpu.createAndWaitForFence();case 19:if("complex64"!==u){e.next=26;break}return e.next=22,Promise.all([l.real.data(),l.imag.data()]);case 22:b=e.sent,m=g.mergeRealAndImagArrays(b[0],b[1]),e.next=27;break;case 26:null==v?m=this.getValuesFromTexture(t):(x=r.sizeFromShape(o),m=this.gpgpu.downloadFloat32MatrixFromBuffer(v,x));case 27:return null!=p&&this.disposeData(p.dataId),w=this.convertAndCacheOnCPU(t,m),k=this.pendingRead.get(t),e.abrupt("return",(this.pendingRead.delete(t),k.forEach((function(e){return e(w)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),w));case 30:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!BO(n)){if(dv().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,a=t.dtype,i=t.isPacked,o=r.sizeFromShape(n);if(dv().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s,u=this.decode(e),l=this.texData.get(u.dataId),c=(s=this.gpgpu).downloadMatrixFromPackedTexture.apply(s,[l.texture].concat(_toConsumableArray(PO(n)))).subarray(0,o);return this.disposeData(u.dataId),c}var h=dv().getBool("WEBGL_PACK")&&!0===i,f=h?QO(n):n,d=h?new sN(f):new oN(f),p=this.runWebGLProgram(d,[{shape:f,dtype:a,dataId:e}],"float32"),m=this.texData.get(p.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,o);return this.disposeData(p.dataId),v}},{key:"time",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,a,i,o,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.activeTimers,a=[],i=!1,null==this.programTimersStack?(this.programTimersStack=a,i=!0):this.activeTimers.push(a),this.activeTimers=a,t(),o=r.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),s=r.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,i&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},!(dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=13;break}return e.next=9,Promise.all(o);case 9:l=e.sent,u.kernelMs=r.sum(l),u.getExtraProfileInfo=function(){return l.map((function(e,t){return{name:s[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=14;break;case 13:u.kernelMs={error:"WebGL query timers are not supported in this environment."};case 14:return e.abrupt("return",(this.uploadWaitMs=0,this.downloadWaitMs=0,u));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}}},{key:"startTimer",value:function(){return dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:r.now(),endMs:null}}},{key:"endTimer",value:function(e){return dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=r.now(),e)}},{key:"getQueryTime",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.waitForQueryAndGetTime(t):t.endMs-t.startMs);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"disposeData",value:function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"getCPUBackend",value:function(){return dv().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=O_().findBackend("cpu")),this.cpuBackend):null}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128;return null!=this.getCPUBackend()&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&r.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"complex",value:function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:O_().keep(e.clone()),imag:O_().keep(t.clone())},n}},{key:"real",value:function(e){return this.texData.get(e.dataId).complexTensors.real.clone()}},{key:"imag",value:function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()}},{key:"slice",value:function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===r.sizeFromShape(n))return mg([],n,e.dtype);var a=this.texData.get(e.dataId).isPacked,i=o.isSliceContinous(e.shape,t,n);if(a||!i){var s=dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new HN(n):new UN(n),u=s.getCustomSetupFunc(t);return this.compileAndRun(s,[e],null,u)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)}},{key:"shallowSlice",value:function(e,t,n){var r=this.texData.get(e.dataId),a=this.makeOutput(n,e.dtype),i=this.texData.get(a.dataId);Object.assign(i,r),i.shape=n,i.dtype=e.dtype;var s=o.computeFlatOffset(t,e.strides);r.slice&&(s+=r.slice.flatOffset),i.slice={flatOffset:s,origDataId:r.slice&&r.slice.origDataId||e.dataId};var u=this.dataRefCount.get(i.slice.origDataId)||1;return this.dataRefCount.set(i.slice.origDataId,u+1),a}},{key:"stridedSlice",value:function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var a=o.computeOutShape(t,n,r);if(a.some((function(e){return 0===e})))return mg([],a);var i=new GN(t,r,a);return this.compileAndRun(i,[e])}},{key:"reverse",value:function(e,t){var n=dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new BN(e.shape,t):new zN(e.shape,t);return this.compileAndRun(n,[e])}},{key:"concat",value:function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return dg(e)})),a=e.map((function(e){return pg(e)}));return fg(this.concat(n,t),this.concat(a,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>dv().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(e.length/2),o=this.concat(e.slice(0,i),t),s=this.concat(e.slice(i),t);return this.concat([o,s],t)}if(dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var u=new qM(e.map((function(e){return e.shape})),t);return this.compileAndRun(u,e)}var l=g.computeOutShape(e.map((function(e){return e.shape})),t),c=e.map((function(e){return e.as2D(-1,r.sizeFromShape(e.shape.slice(t)))})),h=new WM(c.map((function(e){return e.shape})));return this.compileAndRun(h,c).reshape(l)}},{key:"neg",value:function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(dv().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,nP,e.dtype);var t=new YN(e.shape,nP);return this.compileAndRun(t,[e])}},{key:"batchMatMul",value:function(e,t,n,r){var a=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],o=n?e.shape[1]:e.shape[2],s=_slicedToArray(e.shape,2)[0];if((1===a||1===i)&&o>1e3){n&&(e=jb(e,[0,2,1])),r&&(t=jb(t,[0,2,1]));var u=1===i?e:e.as3D(s,o,1),l=1===i?2:1,c=1===i?t.as3D(s,1,o):t;return this.multiply(u,c).sum(l,!0)}var h=Py(e.dtype,t.dtype),f=new kN(e.shape,[s,a,i],n,r);return this.compileAndRun(f,[e,t],h)}},{key:"fusedBatchMatMul",value:function(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.bias,o=e.activation,s=e.preluActivationWeights,u=r?t.shape[2]:t.shape[1],l=a?n.shape[1]:n.shape[2],c=_slicedToArray(t.shape,2)[0],h=Py(t.dtype,n.dtype),f=null!=i,d=null!=s,p=o?bP(o,!0):null,m=new kN(t.shape,[c,u,l],r,a,f,p,d),v=[t,n];return i&&v.push(i),s&&v.push(s),this.compileAndRun(m,v,h)}},{key:"multiply",value:function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),a=new TM("return areal * breal - aimag * bimag;",e.shape,t.shape),i=new TM("return areal * bimag + aimag * breal;",e.shape,t.shape),o=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],s=this.compileAndRun(a,o),u=this.compileAndRun(i,o),l=this.complex(s,u);return s.dispose(),u.dispose(),l}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,OM,e.dtype);var c=new NM(OM,e.shape,t.shape);return this.compileAndRun(c,[e,t],e.dtype)}},{key:"batchNorm",value:function(e,t,n,r,a,i){var o=[e,t,n],s=null;null!=r&&(s=r.shape,o.push(r));var u=null;if(null!=a&&(u=a.shape,o.push(a)),dv().getBool("WEBGL_PACK_NORMALIZATION")){var l=new AM(e.shape,t.shape,n.shape,s,u,i);return this.compileAndRun(l,o)}var c=new DM(e.shape,t.shape,n.shape,s,u,i);return this.compileAndRun(c,o)}},{key:"localResponseNormalization4D",value:function(e,t,n,r,a){var i=dv().getBool("WEBGL_PACK_NORMALIZATION")?new bN(e.shape,t,n,r,a):new gN(e.shape,t,n,r,a);return this.compileAndRun(i,[e])}},{key:"LRNGrad",value:function(e,t,n,r,a,i,o){var s=new _N(t.shape,r,a,i,o);return this.compileAndRun(s,[t,n,e])}},{key:"tile",value:function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return r.decodeString(e)})),a=Mg(e.shape,e.dtype,n);return vP(a,t)}var i=new ZN(e.shape,t);return this.compileAndRun(i,[e])}},{key:"pad",value:function(e,t,n){var r=dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new AN(e.shape,t,n):new DN(e.shape,t,n);return this.compileAndRun(r,[e])}},{key:"gather",value:function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new fN(e.shape,t.size,n);return this.compileAndRun(r,[e,t])}},{key:"batchToSpaceND",value:function(e,t,n){r.assert(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var a=t.reduce((function(e,t){return e*t})),i=g.getReshaped(e.shape,t,a),o=g.getPermuted(i.length,t.length),s=g.getReshapedPermuted(e.shape,t,a),u=g.getSliceBeginCoords(n,t.length),l=g.getSliceSize(s,n,t.length);return jb(e.reshape(i),o).reshape(s).slice(u,l)}},{key:"spaceToBatchND",value:function(e,t,n){r.assert(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var a=t.reduce((function(e,t){return e*t})),i=[[0,0]];i.push.apply(i,_toConsumableArray(n));for(var o=1+t.length;o<e.shape.length;++o)i.push([0,0]);var s=e.pad(i),u=g.getReshaped(s.shape,t,a,!1),l=g.getPermuted(u.length,t.length,!1),c=g.getReshapedPermuted(s.shape,t,a,!1);return jb(s.reshape(u),l).reshape(c)}},{key:"reduce",value:function(e,t,n){var r=e.shape[0],a=e.shape[1],i=g.computeOptimalWindowSize(a),o=new RN({windowSize:i,inSize:a,batchSize:r},t),s=this.compileAndRun(o,[e],n);return 1===s.shape[1]?s:this.reduce(s,t,n)}},{key:"argReduce",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.shape[0],a=e.shape[1];null!=n&&(r=n.shape[0],a=n.shape[1]);var i=g.computeOptimalWindowSize(a),o=new sM({windowSize:i,inSize:a,batchSize:r},t,null==n),s=[e];null!=n&&s.push(n);var u=this.compileAndRun(o,s,"int32");return 1===u.shape[1]?u:this.argReduce(e,t,u)}},{key:"argReducePacked",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null!=n?n.shape:e.shape,a=g.computeOptimalWindowSize(r[r.length-1]),i=new CM(r,a,t,null==n),o=this.compileAndRun(i,null==n?[e]:[e,n],"int32");return o.rank===e.rank?this.argReducePacked(e,t,o):o}},{key:"sum",value:function(e,t){g.assertAxesAreInnerMostDims("sum",t,e.rank);var n=_slicedToArray(g.computeOutAndReduceShapes(e.shape,t),2),a=n[0],i=n[1],o=r.sizeFromShape(i),s=e.as2D(-1,o),u=Fy(e.dtype);return this.reduce(s,"sum",u).reshape(a)}},{key:"prod",value:function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=_slicedToArray(g.computeOutAndReduceShapes(e.shape,t),2),a=n[0],i=n[1],o=r.sizeFromShape(i),s=e.as2D(-1,o),u=Fy(e.dtype);return this.reduce(s,"prod",u).reshape(a)}},{key:"unsortedSegmentSum",value:function(e,t,n){var a=0,i=g.getAxesPermutation([a],e.rank),o=e;null!=i&&(o=jb(e,i),a=g.getInnerMostAxes(1,e.rank)[0]);var s=pP.computeOutShape(o.shape,a,n),u=r.sizeFromShape([o.shape[a]]),l=o.as2D(-1,u),c=Fy(e.dtype),h=this.segOpCompute(l,"unsortedSegmentSum",t,c,n).reshape(s);return null!=i&&(h=jb(h,g.getUndoAxesPermutation(i))),h}},{key:"segOpCompute",value:function(e,t,n,r,a){var i=e.shape[0],o=e.shape[1],s=pP.segOpComputeOptimalWindowSize(o,a),u=new qN({windowSize:s,inSize:o,batchSize:i,numSegments:a},t),l=this.compileAndRun(u,[e,n],r);return l.shape[1]===a?l:(n=Tg(0,a).tile([o/s]),this.segOpCompute(l,t,n,r,a))}},{key:"argMinMaxReduce",value:function(e,t,n){var a=[t];if(g.assertAxesAreInnerMostDims("arg"+n.charAt(0).toUpperCase()+n.slice(1),a,e.rank),!dv().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var i=_slicedToArray(g.computeOutAndReduceShapes(e.shape,a),2),o=i[0],s=i[1],u=r.sizeFromShape(s),l=e.as2D(-1,u);return this.argReduce(l,n).reshape(o)}return this.argReducePacked(e,n)}},{key:"argMin",value:function(e,t){return this.argMinMaxReduce(e,t,"min")}},{key:"argMax",value:function(e,t){return this.argMinMaxReduce(e,t,"max")}},{key:"cumsum",value:function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(e.rank-1," ")+"but got axis=".concat(t));var a=new eN(e.shape,n,r);return this.compileAndRun(a,[e])}},{key:"equal",value:function(e,t){if(dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new NM("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")}},{key:"notEqual",value:function(e,t){if(dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new NM("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")}},{key:"less",value:function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new NM("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")}},{key:"lessEqual",value:function(e,t){if(dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new NM("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")}},{key:"greater",value:function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new NM("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")}},{key:"greaterEqual",value:function(e,t){if(dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new NM("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")}},{key:"logicalNot",value:function(e){var t=new YN(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])}},{key:"logicalAnd",value:function(e,t){if(dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new NM("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")}},{key:"logicalOr",value:function(e,t){if(dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new NM("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")}},{key:"select",value:function(e,t,n){var r=new VN(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],Py(t.dtype,n.dtype))}},{key:"where",value:function(e){g.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return gP(e.shape,t)}},{key:"topk",value:function(e,t,n){var r=e.dataSync();return yP(r,e.shape,e.dtype,t,n)}},{key:"min",value:function(e,t){g.assertAxesAreInnerMostDims("min",t,e.rank);var n=_slicedToArray(g.computeOutAndReduceShapes(e.shape,t),2),a=n[0],i=n[1],o=r.sizeFromShape(i),s=e.as2D(-1,o);return this.reduce(s,"min",s.dtype).reshape(a)}},{key:"minimum",value:function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new FM("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new NM("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])}},{key:"mod",value:function(e,t){var n=dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new FM("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new NM("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])}},{key:"maximum",value:function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new FM("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new NM("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])}},{key:"all",value:function(e,t){g.assertAxesAreInnerMostDims("all",t,e.rank);var n=_slicedToArray(g.computeOutAndReduceShapes(e.shape,t),2),a=n[0],i=n[1],o=r.sizeFromShape(i),s=e.as2D(-1,o);return this.reduce(s,"all",s.dtype).reshape(a)}},{key:"any",value:function(e,t){g.assertAxesAreInnerMostDims("any",t,e.rank);var n=_slicedToArray(g.computeOutAndReduceShapes(e.shape,t),2),a=n[0],i=n[1],o=r.sizeFromShape(i),s=e.as2D(-1,o);return this.reduce(s,"any",s.dtype).reshape(a)}},{key:"floorDiv",value:function(e,t){if(dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new NM("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")}},{key:"add",value:function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,EM);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=Py(e.dtype,t.dtype);if(dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,EM,n);var r=new NM(EM,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new fP(e.shape,t);return this.compileAndRun(r,[e],n)}},{key:"packedBinaryOp",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=new FM(n,e.shape,t.shape,a);return this.compileAndRun(i,[e,t],r)}},{key:"complexSeparableBinaryOp",value:function(e,t,n){var r=this,a=this.texData.get(e.dataId),i=this.texData.get(t.dataId),o=[[a.complexTensors.real,i.complexTensors.real],[a.complexTensors.imag,i.complexTensors.imag]].map((function(a){var i=_slicedToArray(a,2),o=i[0],s=i[1],u=r.makeComplexComponentTensorInfo(e,o),l=r.makeComplexComponentTensorInfo(t,s),c=new NM(n,e.shape,t.shape);return r.compileAndRun(c,[u,l],Py(o.dtype,s.dtype))})),s=_slicedToArray(o,2),u=s[0],l=s[1],c=this.complex(u,l);return u.dispose(),l.dispose(),c}},{key:"makeComplexComponentTensorInfo",value:function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}},{key:"addN",value:function(e){if(1===e.length)return e[0];if(e.length>dv().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var a=e.map((function(e){return e.dtype})).reduce((function(e,t){return Py(e,t)})),i=e.map((function(e){return e.shape})),o=dv().getBool("WEBGL_PACK")?new oM(e[0].shape,i):new iM(e[0].shape,i);return this.compileAndRun(o,e,a)}},{key:"subtract",value:function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,RM);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=Py(e.dtype,t.dtype);if(dv().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,RM,e.dtype);var r=new NM(RM,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)}},{key:"pow",value:function(e,t){var n=dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new FM("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new NM("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=Py(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)}},{key:"ceil",value:function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(dv().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,rP,e.dtype);var t=new YN(e.shape,rP);return this.compileAndRun(t,[e])}},{key:"floor",value:function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(dv().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,aP,e.dtype);var t=new YN(e.shape,aP);return this.compileAndRun(t,[e])}},{key:"sign",value:function(e){var t=new YN(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])}},{key:"isNaN",value:function(e){var t=new YN(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")}},{key:"isInf",value:function(e){var t=new YN(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")}},{key:"isFinite",value:function(e){var t=new YN(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")}},{key:"round",value:function(e){var t=new YN(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])}},{key:"exp",value:function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(dv().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,iP,e.dtype);var t=new YN(e.shape,iP);return this.compileAndRun(t,[e])}},{key:"expm1",value:function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(dv().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,oP,e.dtype);var t=new YN(e.shape,oP);return this.compileAndRun(t,[e])}},{key:"softmax",value:function(e,t){var n=r.parseAxisParam([t],e.shape),a=gk(e,n),i=g.expandShapeToKeepDim(a.shape,n),o=this.subtract(e,a.reshape(i)),s=this.exp(o),u=this.sum(s,n).reshape(i);return Pb(s,u)}},{key:"log",value:function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(dv().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new YN(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])}},{key:"log1p",value:function(e){var t=new YN(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])}},{key:"sqrt",value:function(e){var t=new YN(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])}},{key:"rsqrt",value:function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new YN(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])}},{key:"reciprocal",value:function(e){var t=new YN(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])}},{key:"relu",value:function(e){var t;return t=dv().getBool("WEBGL_PACK")?new fP(e.shape,lP):new YN(e.shape,$N),this.compileAndRun(t,[e])}},{key:"relu6",value:function(e){var t;return t=dv().getBool("WEBGL_PACK")?new fP(e.shape,cP):new YN(e.shape,eP),this.compileAndRun(t,[e])}},{key:"prelu",value:function(e,t){var n=dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new FM(PM,e.shape,t.shape):new NM(MM,e.shape,t.shape);return this.compileAndRun(n,[e,t])}},{key:"elu",value:function(e){if(dv().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,hP,e.dtype);var t=new YN(e.shape,"return (x >= 0.0) ? x : (exp(x) - 1.0);");return this.compileAndRun(t,[e])}},{key:"eluDer",value:function(e,t){var n=dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new FM("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new NM("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])}},{key:"selu",value:function(e){var t=new YN(e.shape,tP);return this.compileAndRun(t,[e])}},{key:"int",value:function(e){var t=new YN(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")}},{key:"clip",value:function(e,t,n){var r,a=(r=dv().getBool("WEBGL_PACK_CLIP")?new zM(e.shape):new LM(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(dv().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,QN,e.dtype);var t=new YN(e.shape,QN);return this.compileAndRun(t,[e])}},{key:"complexAbs",value:function(e){var t=this.texData.get(e.dataId),n=new BM(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)}},{key:"sigmoid",value:function(e){var t=new YN(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])}},{key:"softplus",value:function(e){var t=new YN(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])}},{key:"sin",value:function(e){var t=new YN(e.shape,"if (isnan(x)) return x;\n  return sin(x);\n");return this.compileAndRun(t,[e])}},{key:"cos",value:function(e){var t=new YN(e.shape,"if (isnan(x)) return x;\n  return cos(x);\n");return this.compileAndRun(t,[e])}},{key:"tan",value:function(e){var t=new YN(e.shape,"return tan(x);");return this.compileAndRun(t,[e])}},{key:"asin",value:function(e){var t=new YN(e.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n");return this.compileAndRun(t,[e])}},{key:"acos",value:function(e){var t=new YN(e.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n");return this.compileAndRun(t,[e])}},{key:"atan",value:function(e){var t=new YN(e.shape,"if (isnan(x)) return x;\n  return atan(x);\n");return this.compileAndRun(t,[e])}},{key:"atan2",value:function(e,t){var n=dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new FM("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new NM("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])}},{key:"sinh",value:function(e){var t=new YN(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])}},{key:"cosh",value:function(e){var t=new YN(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])}},{key:"tanh",value:function(e){var t=new YN(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])}},{key:"asinh",value:function(e){var t=new YN(e.shape,"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(t,[e])}},{key:"acosh",value:function(e){var t=new YN(e.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));");return this.compileAndRun(t,[e])}},{key:"atanh",value:function(e){var t=new YN(e.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;");return this.compileAndRun(t,[e])}},{key:"erf",value:function(e){var t=new YN(e.shape,sP);return this.compileAndRun(t,[e])}},{key:"step",value:function(e,t){var n=new YN(e.shape,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"if (isnan(x)) return x;"+"\n    return x > 0.0 ? 1.0 : float(".concat(e,");\n  ")}(t));return this.compileAndRun(n,[e])}},{key:"conv2dByMatMul",value:function(e,t,n,a,i,o){var s=e.shape,u=this.texData.get(e.dataId),l="channelsLast"===n.dataFormat,c=s[2]%2!=0&&!!u.isPacked;if((1==s[0]*s[1]*s[2]||1===n.outChannels)&&n.inChannels>1e3||!dv().getBool("WEBGL_LAZILY_UNPACK")||!dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!c){var h=this.reshape(e,[1,l?s[0]*s[1]*s[2]:s[0]*s[2]*s[3],n.inChannels]),f=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:h,b:f,transposeA:!1,transposeB:!1,bias:a,activation:i,preluActivationWeights:o}),n.outShape)}var d={dataId:e.dataId,shape:[1,l?s[0]*s[1]*(s[2]+1):s[0]*s[2]*(s[3]+1),n.inChannels],dtype:e.dtype},p=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,r.assert(eM(u.shape,d.shape),(function(){return"packed reshape ".concat(u.shape," to ").concat(d.shape," isn't free")}));var m=this.reshape(t,[1,n.inChannels,n.outChannels]),v=this.fusedBatchMatMul({a:d,b:m,transposeA:!1,transposeB:!1,bias:a,activation:i,preluActivationWeights:o}),y=this.texData.get(v.dataId);return r.assert(y.isPacked,(function(){return"batchMatMul result is expected to be packed"})),u.shape=p,y.shape=n.outShape,O_().makeTensorFromDataId(v.dataId,n.outShape,v.dtype)}},{key:"conv2dWithIm2Row",value:function(e,t,n,r,a,i){var o=n.filterWidth,s=n.filterHeight,u=n.inChannels,l=n.outWidth,c=n.outHeight,h="channelsLast"===n.dataFormat,f=o*s*u,d=c*l,p=[f,d],m=e.squeeze([0]),v=t.reshape([1,f,-1]),y=new yN(p,m.shape,n),g=this.compileAndRun(y,[m]).reshape([1,p[0],p[1]]),_=null!=r,b=null!=i,x=a?bP(a,!0):null,w=new kN(g.shape,[1,d,n.outChannels],!0,!1,_,x,b),k=[g,v];return r&&k.push(r),b&&k.push(i),this.compileAndRun(w,k).reshape(h?[1,c,l,n.outChannels]:[1,n.outChannels,c,l])}},{key:"fusedConv2d",value:function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,a,i,o);if(dv().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,a,i,o);var s=null!=a,u=null!=o,l=i?bP(i,!1):null,c=new KM(r,s,l,u),h=[t,n];return a&&h.push(a),o&&h.push(o),this.compileAndRun(c,h)}},{key:"conv2d",value:function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(dv().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new KM(n);return this.compileAndRun(r,[e,t])}},{key:"conv2dDerInput",value:function(e,t,n){var r=new jM(n);return this.compileAndRun(r,[e,t])}},{key:"conv2dDerFilter",value:function(e,t,n){var r=new UM(n);return this.compileAndRun(r,[e,t])}},{key:"fusedDepthwiseConv2D",value:function(e){var t,n=e.input,r=e.filter,a=e.convInfo,i=e.bias,o=e.activation,s=e.preluActivationWeights,u=dv().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,l=o?bP(o,u):null,c=[n,r],h=null!=i,f=null!=s;return h&&c.push(i),f&&c.push(s),u?(t=new QM(a,h,l,f),this.compileAndRun(t,c)):(t=new YM(a,h,l,f),this.compileAndRun(t,c))}},{key:"depthwiseConv2D",value:function(e,t,n){var r;return dv().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new QM(n),this.compileAndRun(r,[e,t])):(r=new YM(n),this.compileAndRun(r,[e,t]))}},{key:"depthwiseConv2DDerInput",value:function(e,t,n){var r=new XM(n);return this.compileAndRun(r,[e,t])}},{key:"depthwiseConv2DDerFilter",value:function(e,t,n){var r=new JM(n);return this.compileAndRun(r,[e,t])}},{key:"conv3d",value:function(e,t,n){var r=new ZM(n);return this.compileAndRun(r,[e,t])}},{key:"conv3dDerInput",value:function(e,t,n){var r=new GM(n);return this.compileAndRun(r,[e,t])}},{key:"conv3dDerFilter",value:function(e,t,n){var r=new HM(n);return this.compileAndRun(r,[e,t])}},{key:"maxPool",value:function(e,t){var n=new TN(t,"max",!1);return this.compileAndRun(n,[e])}},{key:"avgPool",value:function(e,t){var n=new TN(t,"avg",!1);return this.compileAndRun(n,[e],"float32")}},{key:"maxPoolBackprop",value:function(e,t,n,r){var a=new TN(r,"max",!0),i=this.compileAndRun(a,[t]),o=new xN(r),s=this.compileAndRun(o,[e,i],t.dtype);return i.dispose(),s}},{key:"avgPoolBackprop",value:function(e,t,n){var r=new SM(n);return this.compileAndRun(r,[e],t.dtype)}},{key:"cast",value:function(e,t){return g.castTensor(e,t,this)}},{key:"unstack",value:function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,i=0;i<e.rank;i++)i!==t&&(r[a++]=e.shape[i]);var o=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;for(var u=new Array(n),l=0;l<u.length;l++)o[t]=l,u[l]=this.slice(e,o,s).reshape(r);return u}},{key:"avgPool3d",value:function(e,t){var n=new EN(t,"avg",!1);return this.compileAndRun(n,[e],"float32")}},{key:"avgPool3dBackprop",value:function(e,t,n){var r=new IM(n);return this.compileAndRun(r,[e],t.dtype)}},{key:"maxPool3d",value:function(e,t){var n=new EN(t,"max",!1);return this.compileAndRun(n,[e],"float32")}},{key:"maxPool3dBackprop",value:function(e,t,n,r){var a=new EN(r,"max",!0),i=this.compileAndRun(a,[t]),o=new wN(r),s=this.compileAndRun(o,[e,i],t.dtype);return i.dispose(),s}},{key:"reshape",value:function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!eM(e.shape,t)&&(null===n.texture||!eM(n.shape,t))){var r=this.packedReshape(e,t);return O_().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return g.reshapeTensor(e,t)}},{key:"resizeBilinear",value:function(e,t,n,r){var a=dv().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new PN(e.shape,t,n,r):new NN(e.shape,t,n,r);return this.compileAndRun(a,[e],"float32")}},{key:"resizeBilinearBackprop",value:function(e,t,n){var r=new MN(e,t,n);return this.compileAndRun(r,[e])}},{key:"resizeNearestNeighbor",value:function(e,t,n,r){var a=new LN(e.shape,t,n,r);return this.compileAndRun(a,[e])}},{key:"resizeNearestNeighborBackprop",value:function(e,t,n){var r=new FN(e,t,n);return this.compileAndRun(r,[e])}},{key:"multinomial",value:function(e,t,n,r){var a=t?e:bC(e),i=new CN(a.shape[0],a.shape[1],n),o=i.getCustomSetupFunc(r);return this.compileAndRun(i,[a],"int32",o)}},{key:"oneHot",value:function(e,t,n,r){var a=new SN(e.size,t,n,r);return this.compileAndRun(a,[e])}},{key:"diag",value:function(e){var t=new iN(e.size);return this.compileAndRun(t,[e])}},{key:"cropAndResize",value:function(e,t,n,r,a,i){var o=new $M(e.shape,t.shape,r,a,i);return this.compileAndRun(o,[e,t,n],"float32")}},{key:"depthToSpace",value:function(e,t,n){r.assert(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)}));var a=e.shape[0],i=("NHWC"===n?e.shape[1]:e.shape[2])*t,o=("NHWC"===n?e.shape[2]:e.shape[3])*t,s=("NHWC"===n?e.shape[3]:e.shape[1])/(t*t),u=new aN("NHWC"===n?[a,i,o,s]:[a,s,i,o],t,n);return this.compileAndRun(u,[e])}},{key:"split",value:function(e,t,n){return mP(e,t,n)}},{key:"scatterND",value:function(e,t,n){var r=g.calculateShapes(t,e,n),a=r.sliceRank,i=r.numUpdates,o=r.sliceSize,s=r.strides,u=r.outputSize,l=[u/o,o],c=e.reshape([i,a]),h=t.reshape([i,o]);if(0===u)return g.reshapeTensor(mg([]),n);var f=yg(0),d=new WN(i,a,c.rank,h.rank,s,l);return this.compileAndRun(d,[h,c,f]).reshape(n)}},{key:"sparseToDense",value:function(e,t,n,r){var a=g.calculateShapes(t,e,n),i=a.sliceRank,o=a.numUpdates,s=a.strides,u=a.outputSize,l=new WN(o,i,e.rank,t.rank,s,[u,1],!1);return this.compileAndRun(l,[t,e,r]).reshape(n)}},{key:"fft",value:function(e){return this.fftImpl(e,!1)}},{key:"ifft",value:function(e){return this.fftImpl(e,!0)}},{key:"fftImpl",value:function(e,t){var n=this.texData.get(e.dataId),r=new cN("return real * expR - imag * expI;",e.shape,t),a=new cN("return real * expI + imag * expR;",e.shape,t),i=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],o=this.compileAndRun(r,i),s=this.compileAndRun(a,i),u=this.complex(o,s).as2D(e.shape[0],e.shape[1]);return o.dispose(),s.dispose(),u}},{key:"gatherND",value:function(e,t){var n=t.shape,r=n[n.length-1],a=_slicedToArray(g.prepareAndValidate(e,t),4),i=a[0],o=a[1],s=a[2],u=a[3],l=t.reshape([o,r]),c=e.reshape([e.size/s,s]),h=new dN(r,u,[o,s]);return this.compileAndRun(h,[c,l]).reshape(i)}},{key:"fill",value:function(e,t,n){if("string"===(n=n||r.inferDtype(t))){var a=r.getArrayFromDType(n,r.sizeFromShape(e));return a.fill(t),O_().makeTensor(a,e,n,this)}var i=new hN(e,t),o=i.getCustomSetupFunc(t);return this.compileAndRun(i,[],n,o)}},{key:"onesLike",value:function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)}},{key:"zerosLike",value:function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)}},{key:"linspace",value:function(e,t,n){return g.linspaceImpl(e,t,n)}},{key:"makeTensorInfo",value:function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t){var n=this.makeTensorInfo(e,t).dataId;return O_().makeTensorFromDataId(n,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new dP(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new IN(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[ZO(e.shape)].concat(_toConsumableArray(YO(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[ZO(t)].concat(_toConsumableArray(YO(t))),i=new ON(a,n),o=this.runWebGLProgram(i,[r],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}},{key:"decode",value:function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype,o=QO(a);return t=r?new rN(o):new nN(o),{dtype:i,shape:a,dataId:this.runWebGLProgram(t,[{shape:o,dtype:i,dataId:e}],i,null,!0).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,a){var i=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===AO.DENSE){var l=PO(e.outputShape);u.texShape=l.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===r.sizeFromShape(s.shape))return u.values=r.getTypedArrayFromDType(s.dtype,0),s;var c=[],h=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&r.sizeFromShape(t.shape)<=dv().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?i.unpackTensor(t):i.packTensor(t),c.push(t),n=i.texData.get(t.dataId);else if(n.isPacked&&!eM(n.shape,t.shape)){var a=t,o=t.shape;t.shape=n.shape,t=i.packedReshape(t,o),c.push(t),n=i.texData.get(t.dataId),a.shape=o}return i.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var f,d={shape:s.shape,texData:u,isUniform:!1},p=function(e,t,n){var r="";t.concat(n).forEach((function(e){r+="".concat(e.shape,"_").concat(e.isUniform?"uniform":e.texData.texShape,"_").concat(null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0)}));var a=e.constructor.name;return a+="_"+r+"_"+e.userCode}(e,h,d),m=this.getAndSaveBinary(p,(function(){return function(e,t,n,a){var i=t.userCode,o=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),s=o.map((function(e){return e.shapeInfo})),u={logicalShape:a.shape,texShape:a.texData.texShape,isUniform:!1,isPacked:a.texData.isPacked,flatOffset:null},l=function(e,t,n,a){var i=[];e.forEach((function(e){var t=r.sizeFromShape(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?i.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(i.push("uniform sampler2D ".concat(e.name,";")),i.push("uniform int offset".concat(e.name,";")))}));var o,s,u=i.join("\n"),l=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a="";return a+=n?function e(t){switch(t.shapeInfo.logicalShape.length){case 0:return n=t.name,"\n    vec4 ".concat("get"+n.charAt(0).toUpperCase()+n.slice(1),"() {\n      return ").concat(cM().texture2D,"(").concat(n,", halfCR);\n    }\n  ");case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=cM();return"\n    vec4 ".concat(n,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(a[0],", ").concat(a[1],", index);\n      return ").concat(i.texture2D,"(").concat(t,", uv);\n    }\n  ")}(t);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=cM();if(null!=i&&r.arraysEqual(t,i))return"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(n,", uv);\n      }\n    ");var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(Math.ceil(t[1]/2),", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(n,", uv);\n    }\n  ")}(t);case 3:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=wM(t,n.slice(1));return"\n        ".concat(e(s),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(kM(["b","row","col"],[1,2]),");\n        }\n      ")}var u=o[0],l=o[1],c=Math.ceil(n[2]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(u,", ").concat(l,", ").concat(c*Math.ceil(n[1]/2),", ").concat(c,", b, row, col);\n      return ").concat(cM().texture2D,"(").concat(r,", uv);\n    }\n  ")}(t);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],s=o[0],u=o[1],l=Math.ceil(t[n-1]/2),c=l*Math.ceil(t[n-2]/2),h="int b, int row, int col",f="b * ".concat(c," + (row / 2) * ").concat(l," + (col / 2)"),d=2;d<n-1;d++)h="int b".concat(d,", ")+h,c*=t[n-d-1],f="b".concat(d," * ").concat(c," + ")+f;return"\n    vec4 ".concat(a,"(").concat(h,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(s,");\n      return ").concat(cM().texture2D,"(").concat(r,", uv);\n    }\n  ")}(t)}var n}(e):function e(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(n,"() {return ").concat(t,";}");var r=_slicedToArray(e.shapeInfo.texShape,2),a=r[0],i=r[1];if(1===a&&1===i)return"\n      float ".concat(n,"() {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var o=_slicedToArray(e.shapeInfo.texShape,2),s=o[0],u=o[1];return"\n    float ".concat(n,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(u,", ").concat(_M(t),");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(t);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(n,"(int index) {\n        ").concat(bM(e),"\n      }\n    ");var r=e.shapeInfo.texShape,a=r[0],i=r[1];if(1===i&&1===a)return"\n      float ".concat(n,"(int index) {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var o=_M(t);return 1===i?"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / ").concat(a,".0);\n        return sampleTexture(").concat(t,", uv);\n      }\n    "):1===a?"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(t,", uv);\n      }\n    "):"\n    float ".concat(n,"(int index) {\n      vec2 uv = uvFromFlat(").concat(a,", ").concat(i,", index + ").concat(o,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(t);case 2:return function(t){var n=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=t.shapeInfo.texShape;if(null!=o&&r.arraysEqual(n,o))return"\n    float ".concat(i,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o[1],".0, ").concat(o[0],".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ");var s=r.squeezeShape(n),u=s.newShape,l=s.keptDims;if(u.length<n.length){var c=wM(t,u);return"\n      ".concat(e(c),"\n      float ").concat(i,"(int row, int col) {\n        return ").concat(i,"(").concat(kM(["row","col"],l),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(bM(t),"\n      }\n    ");var h=o[0],f=o[1],d=_M(a);return 1===f?"\n    float ".concat(i,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(h,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  "):1===h?"\n    float ".concat(i,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(d,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(f,".0, 0.5);\n      return sampleTexture(").concat(a,", uv);\n    }\n  "):"\n  float ".concat(i,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(d,";\n    vec2 uv = uvFromFlat(").concat(h,", ").concat(f,", index);\n    return sampleTexture(").concat(a,", uv);\n  }\n")}(t);case 3:return function(t){var n=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n[1]*n[2],s=n[2],u=r.squeezeShape(n),l=u.newShape,c=u.keptDims;if(l.length<n.length){var h=wM(t,l);return"\n        ".concat(e(h),"\n        float ").concat(i,"(int row, int col, int depth) {\n          return ").concat(i,"(").concat(kM(["row","col","depth"],c),");\n        }\n      ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(s,", 1)));\n        ").concat(bM(t),"\n      }\n    ");var f=t.shapeInfo.texShape,d=f[0],p=f[1],m=t.shapeInfo.flatOffset;return p===o&&null==m?"\n        float ".concat(i,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(s,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(d,".0);\n          return sampleTexture(").concat(a,", uv);\n        }\n      "):p===s&&null==m?"\n    float ".concat(i,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(d,".0);\n      return sampleTexture(").concat(a,", uv);\n    }\n  "):"\n      float ".concat(i,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(s," + depth + ").concat(_M(a),";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n        return sampleTexture(").concat(a,", uv);\n      }\n  ")}(t);case 4:return function(t){var n=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n[3],s=n[2]*o,u=n[1]*s,l=r.squeezeShape(n),c=l.newShape,h=l.keptDims;if(c.length<n.length){var f=wM(t,c);return"\n      ".concat(e(f),"\n      float ").concat(i,"(int row, int col, int depth, int depth2) {\n        return ").concat(i,"(").concat(kM(["row","col","depth","depth2"],h),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(u,", ").concat(s,", ").concat(o,", 1)));\n        ").concat(bM(t),"\n      }\n    ");var d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,m=p[0],v=p[1];return v===u&&null==d?"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(s,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):v===o&&null==d?"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(s," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index + ").concat(_M(a),");\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}(t);case 5:return function(t){var n=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n[4],s=n[3]*o,u=n[2]*s,l=n[1]*u,c=r.squeezeShape(n),h=c.newShape,f=c.keptDims;if(h.length<n.length){var d=wM(t,h);return"\n      ".concat(e(d),"\n      float ").concat(i,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(i,"(").concat(kM(["row","col","depth","depth2","depth3"],f),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(l,", ").concat(u,", ").concat(s,", ").concat(o,")) +\n          depth3;\n        ").concat(bM(t),"\n      }\n    ");var p=t.shapeInfo.flatOffset,m=t.shapeInfo.texShape,v=m[0],y=m[1];return y===l&&null==p?"\n      float ".concat(i,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(u,", ").concat(s,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(y,".0, ").concat(v,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):y===o&&null==p?"\n      float ".concat(i,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(n[1]*n[2]*n[3],",\n               ").concat(n[2]*n[3],", ").concat(n[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(y,".0, ").concat(v,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(l," + col * ").concat(u," + depth * ").concat(s," +\n          depth2 * ").concat(o," + depth3 + ").concat(_M(a),";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(y,", index);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}(t);case 6:return function(t){var n=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r.squeezeShape(n),s=o.newShape,u=o.keptDims;if(s.length<n.length){var l=wM(t,s);return"\n      ".concat(e(l),"\n      float ").concat(i,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(i,"(").concat(kM(["row","col","depth","depth2","depth3","depth4"],u),");\n      }\n    ")}var c=n[5],h=n[4]*c,f=n[3]*h,d=n[2]*f,p=n[1]*d;if(t.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(p,", ").concat(d,", ").concat(f,", ").concat(h,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(c,", 1)));\n        ").concat(bM(t),"\n      }\n    ");var m=t.shapeInfo.flatOffset,v=t.shapeInfo.texShape,y=v[0],g=v[1];return g===p&&null==m?"\n      float ".concat(i,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(d,", ").concat(f,", ").concat(h,", ").concat(c,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(y,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):g===c&&null==m?"\n      float ".concat(i,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(n[1]*n[2]*n[3]*n[4],",\n               ").concat(n[2]*n[3]*n[4],",\n               ").concat(n[3]*n[4],",\n               ").concat(n[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(y,".0);\n        return sampleTexture(").concat(a,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(p," + col * ").concat(d," + depth * ").concat(f," +\n          depth2 * ").concat(h," + depth3 * ").concat(c," + depth4 + ").concat(_M(a),";\n      vec2 uv = uvFromFlat(").concat(y,", ").concat(g,", index);\n      return sampleTexture(").concat(a,", uv);\n    }\n  ")}(t);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}(e),e.shapeInfo.logicalShape.length<=t.logicalShape.length&&(a+=n?function(e,t){var n,a=e.name,i=a.charAt(0).toUpperCase()+a.slice(1),o="get"+i+"AtOutCoords",s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length,l=pM(e.shapeInfo.logicalShape,t.logicalShape),c=xM(u),h=u-s,f=["x","y","z","w","u","v"];n=0===s?"":u<2&&l.length>=1?"coords = 0;":l.map((function(e){return"coords.".concat(f[e+h]," = 0;")})).join("\n");var d;d=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+h])})).join(", ");var p="return outputValue;",m=1===r.sizeFromShape(e.shapeInfo.logicalShape),v=1===r.sizeFromShape(t.logicalShape);if(1!==s||m||v){if(m&&!v)p=1===u?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){var y=s-2,g=s-1;l.indexOf(y)>-1&&l.indexOf(g)>-1?p="return vec4(outputValue.x);":l.indexOf(y)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(g)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(i,"(").concat(d,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){var n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===s&&null==e.shapeInfo.flatOffset&&r.arraysEqual(e.shapeInfo.texShape,t.texShape))return"\n      float ".concat(i,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var u,l=xM(s),c=pM(e.shapeInfo.logicalShape,t.logicalShape),h=s-o,f=["x","y","z","w","u","v"];u=0===o?"":s<2&&c.length>=1?"coords = 0;":c.map((function(e){return"coords.".concat(f[e+h]," = 0;")})).join("\n");var d;return d=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+h])})).join(", "),"\n    float ".concat(i,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(u,"\n      return get").concat(a,"(").concat(d,");\n    }\n  ")}(e,t)),a}(e,t,a)})).join("\n"),c=t.texShape,h=cM(),f=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(h),d=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(mM,"\n    ").concat(vM,"\n    ").concat(yM,"\n  ")}(h);return t.isPacked?(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return n=t,1===(a=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)])[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(a[1],".0);\n      }\n    "):1===a[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(a[0],".0);\n      }\n    "):"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(a[0],", ").concat(a[1],"));\n      return 2 * (resTexRC.x * ").concat(a[1]," + resTexRC.y);\n    }\n  ");case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(r.arraysEqual(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(n[0],", ").concat(n[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),a=r*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t);default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),i=a,o="",s="b, r, c",u=2;u<e.length-1;u++)i*=e[e.length-u-1],o="\n      int b".concat(u," = index / ").concat(i,";\n      index -= b").concat(u," * ").concat(i,";\n    ")+o,s="b".concat(u,", ")+s;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      ").concat(o,"\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(e.length,"(").concat(s,");\n    }\n  ")}(e,t)}var n,a}(t.logicalShape,c),s=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(h)):(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return 1===(n=t)[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(n[1],".0);\n      }\n    "):1===n[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(n[0],".0);\n      }\n    "):"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      return resTexRC.x * ").concat(n[1]," + resTexRC.y;\n    }\n  ");case 2:return function(e,t){return r.arraysEqual(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    "):1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=hM(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t);case 4:return function(e,t){var n=hM(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t);case 5:return function(e,t){var n=hM(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=hM(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}var n}(t.logicalShape,c),s=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(h)),a&&(d+=gM),[d,f,s,u,o,l,n].join("\n")}(o,u,i,t.packedInputs),c=e.createProgram(l),h=null,f=e.getUniformLocation(c,"NAN",!1);1===dv().getNumber("WEBGL_VERSION")&&(h=e.getUniformLocation(c,"INFINITY",!1));for(var d={},p=0;p<t.variableNames.length;p++){var m=t.variableNames[p];d[m]=e.getUniformLocation(c,m,!1),d["offset".concat(m)]=e.getUniformLocation(c,"offset".concat(m),!1)}return{program:t,source:l,webGLProgram:c,uniformLocations:d,inShapeInfos:s,outShapeInfo:u,infLoc:h,nanLoc:f}}(i.gpgpu,e,h,d)})),v=null!=this.activeTimers;if(v&&(f=this.startTimer()),function(e,t,n,a,i){vN(t.inShapeInfos,n),vN([t.outShapeInfo],[a]);var o=a.texData.texture,s=a.texData.texShape;a.texData.isPacked?e.setOutputPackedMatrixTexture(o,s[0],s[1]):e.setOutputMatrixTexture(o,s[0],s[1]),e.setProgram(t.webGLProgram),1===dv().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,a){var i=t.program.variableNames[a],o=t.uniformLocations[i],s=t.uniformLocations["offset".concat(i)];if(null!=o)if(n.isUniform)if(r.sizeFromShape(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var u=n.uniformValues;u instanceof Float32Array||(u=new Float32Array(u)),e.gl.uniform1fv(o,u)}else null!=n.texData.slice&&null!=s&&e.gl.uniform1i(s,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,a)})),null!=i&&i(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,m,h,d,a),c.forEach((function(e){return i.disposeData(e.dataId)})),v&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)})),!dv().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===o){var y=this.unpackTensor(s);return this.disposeData(s.dataId),y}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this.runWebGLProgram(e,t,n=n||t[0].dtype,r,a);return O_().makeTensorFromDataId(i.dataId,i.shape,i.dtype)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;this.disposed||(dv().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=N_((function(){if(!dv().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=dv().getBool("DEBUG");dv().set("DEBUG",!1);var n=e.abs(yg(1e-8)).dataSync()[0];if(dv().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,a=t.dtype,i=t.values,o=t.texture,s=t.usage,u=t.isPacked;if(null==o){var l,c=null!=this.activeTimers;c&&(l=r.now());var h=t.texShape;if(null==h&&(h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=dv().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?r.nearestLargerEven(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=r.squeezeShape(e);e=a.newShape}var i=r.sizeFromShape(e);if(e.length<=1&&i<=n)return[1,i];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var o,s=ZO(e),u=2,l=2;return e.length&&(u=(o=_slicedToArray(YO(e),2))[0],l=o[1]),i=s*(u/2)*(l/2),r.sizeToSquarishShape(i).map((function(e){return 2*e}))}return r.sizeToSquarishShape(i)}(n,u),t.texShape=h),null!=i){var f,d,p=QO(n),m=h[1],v=h[0],y=i instanceof Uint8Array;u?(m=(f=_slicedToArray(FO(h[0],h[1]),2))[0],v=f[1],d=new lN(p,[v,m],y)):d=new uN(p,[v,m],y);var g=this.makeTensorInfo([v,m],a);this.texData.get(g.dataId).usage=y?TO.PIXELS:TO.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),m,v,i);var _=this.runWebGLProgram(d,[g],a,null,!0),b=this.texData.get(_.dataId);t.texture=b.texture,t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,this.disposeData(g.dataId),this.texData.delete(_.dataId),t.values=null,c&&(this.uploadWaitMs+=r.now()-l)}else{var x=this.acquireTexture(h,s,a,u);t.texture=x}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*r.bytesPerElement(t)}}]),s}(fI),kP={kernelName:"Div",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return function(e,t,n){var r=new NM("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(r=new FM("\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",e.shape,t.shape,!0)),n.runWebGLProgram(r,[e,t],"float32")}(t.a,t.b,n)}},CP=function e(t){_classCallCheck(this,e),this.variableNames=["A"];var n=cM(),r=_slicedToArray(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")},SP=function e(t){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=cM(),r=_slicedToArray(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},IP={kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u=_slicedToArray(o?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),l=u[0],c=u[1],h=[c,l],f=[c,l,i];(s||o)&&(null==xP&&(xP=document.createElement("canvas").getContext("2d")),xP.canvas.width=l,xP.canvas.height=c,xP.drawImage(a,0,0,l,c),a=xP.canvas);var d=n.makeTensorInfo(h,"int32");n.texData.get(d.dataId).usage=TO.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);var p=dv().getBool("WEBGL_PACK")?new SP(f):new CP(f),m=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),m}},DP=F.maxImpl,AP=F.transposeImpl;function TP(e,t,n){var r=n.texData.get(e.dataId);return!r.isPacked||eM(e.shape,t)||null!==r.texture&&eM(r.shape,t)?{dataId:e.dataId,shape:t,dtype:e.dtype}:function(e,t,n){var r=[ZO(e.shape)].concat(_toConsumableArray(YO(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[ZO(t)].concat(_toConsumableArray(YO(t))),o=new ON(i,r),s=n.runWebGLProgram(o,[a],e.dtype,null,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}(e,t,n)}var EP=function e(t,n){_classCallCheck(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=xM(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")},RP=function e(t,n){_classCallCheck(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=xM(this.rank),o=uM("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var l="vec2(".concat(s.slice(-2).join(),")"),c="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),h="getChannel(getA(".concat(s.join(),"), ").concat(l,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(h,";\n      if(").concat(c,") {\n        result[1] = ").concat(h,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(h,";\n        if(").concat(c,") {\n          result[3] = ").concat(h,";\n        }\n      }\n      setOutput(result);\n    }\n    ")};function OP(e,t,n){var r=dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new RP(e.shape,t):new EP(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}for(var MP={kernelName:"NonMaxSuppressionV3",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;g.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=n,c=l.readSync(a.dataId),h=l.readSync(i.dataId);return _.nonMaxSuppressionV3(c,h,o,s,u)}},NP=_.nonMaxSuppressionV5,PP=0,FP=[{kernelName:"Max",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,i=t.x,o=n.reductionIndices,s=a,u=i.shape.length,l=r.parseAxisParam(o,i.shape),c=g.getAxesPermutation(l,u),h=null!=c,f=s.shouldExecuteOnCPU([i]),d=i;if(h){if(f){for(var p=s.texData.get(d.dataId).values,m=new Array(u),v=0;v<m.length;v++)m[v]=i.shape[c[v]];var y=AP(p,i.shape,i.dtype,c,m);d=s.makeTensorInfo(m,i.dtype),s.texData.get(d.dataId).values=y}else d=OP(i,c,s);l=g.getInnerMostAxes(l.length,u)}g.assertAxesAreInnerMostDims("max",l,u);var _,b=_slicedToArray(g.computeOutAndReduceShapes(d.shape,l),2),x=b[0],w=b[1];if(f){var k=s.texData.get(d.dataId),C=DP(k.values,r.sizeFromShape(w),x,i.dtype);_=s.makeTensorInfo(x,i.dtype),s.texData.get(_.dataId).values=C}else _=function(e,t,n,a){var i=r.sizeFromShape(t),o=TP(e,[r.sizeFromShape(e.shape)/i,i],a),s=function e(t,n,r,a){var i=_slicedToArray(t.shape,2),o=i[0],s=i[1],u=g.computeOptimalWindowSize(s),l=new RN({windowSize:u,inSize:s,batchSize:o},r),c=a.runWebGLProgram(l,[t],n);return 1===c.shape[1]?c:e(c,n,r,a)}(o,e.dtype,"max",a);return o.dataId!==e.dataId&&a.disposeData(o.dataId),TP(s,n,a)}(d,w,x,s);return h&&s.disposeData(d.dataId),_}},IP,kP,MP,{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;g.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma,c=n,h=c.readSync(a.dataId),f=c.readSync(i.dataId),d=NP(h,f,o,s,u,l);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n,i=new YN(r.shape,"return x * x;");return a.runWebGLProgram(i,[r],r.dtype)}},{kernelName:"SquaredDifference",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.a,a=t.b,i=n,o=dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new FM("return (a - b) * (a - b);",r.shape,a.shape):new NM("return (a - b) * (a - b);",r.shape,a.shape);return i.compileAndRun(o,[r,a])}},{kernelName:"Transpose",backendName:"webgl",kernelFunc:function(e){for(var t,n=e.inputs,r=e.attrs,a=e.backend,i=n.x,o=r.perm,s=a,u=new Array(i.shape.length),l=0;l<u.length;l++)u[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var c=s.texData.get(i.dataId),h=AP(c.values,i.shape,i.dtype,o,u);t=s.makeTensorInfo(u,i.dtype),s.texData.get(t.dataId).values=h}else t=OP(i,o,s);return t}},{kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,a=e.backend,i=t.x,o=n.filterSize,s=n.strides,u=n.pad,l=n.includeBatchInIndex,c=a;r.assert(4===i.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(i.shape.length,".")}));var h=[1,1];r.assert(g.eitherStridesOrDilationsAreOne(s,h),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(h,"'")}));var f=g.computePool2DInfo(i.shape,o,s,h,u),d=_slicedToArray(function(e,t,n,r){var a=new TN(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new TN(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(i,l,f,c),2);return[d[0],d[1]]}}];PP<FP.length;PP++){kv(FP[PP])}i.isBrowser()&&L_("webgl",(function(){return new wP}),2);var LP=function e(){_classCallCheck(this,e)},zP=function e(){_classCallCheck(this,e)},BP=function(){function e(t){var n=this;_classCallCheck(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){n.headers=new Map,t.split("\n").forEach((function(e){var t=e.indexOf(":");if(t>0){var r=e.slice(0,t),a=r.toLowerCase(),i=e.slice(t+1).trim();n.maybeSetNormalizedName(r,a),n.headers.has(a)?n.headers.get(a).push(i):n.headers.set(a,[i])}}))}:function(){n.headers=new Map,Object.keys(t).forEach((function(e){var r=t[e],a=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(a,r),n.maybeSetNormalizedName(e,a))}))}:this.headers=new Map}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(e){return t.applyUpdate(e)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach((function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))}))}},{key:"clone",value:function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,_toConsumableArray(n)),this.headers.set(t,r);break;case"d":var a=e.value;if(a){var i=this.headers.get(t);if(!i)return;0===(i=i.filter((function(e){return-1===a.indexOf(e)}))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,i)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return e(t.normalizedNames.get(n),t.headers.get(n))}))}}]),e}(),WP=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"encodeKey",value:function(e){return qP(e)}},{key:"encodeValue",value:function(e){return qP(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function qP(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var VP=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new WP,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){var n=new Map;return e.length>0&&e.split("&").forEach((function(e){var r=e.indexOf("="),a=_slicedToArray(-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],2),i=a[0],o=a[1],s=n.get(i)||[];s.push(o),n.set(i,s)})),n}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach((function(e){var r=n.fromObject[e];t.map.set(e,Array.isArray(r)?r:[r])}))):this.map=null}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map((function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map((function(t){return n+"="+e.encoder.encodeValue(t)})).join("&")})).filter((function(e){return""!==e})).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(t){return e.map.set(t,e.cloneFrom.map.get(t))})),this.updates.forEach((function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],a=r.indexOf(t.value);-1!==a&&r.splice(a,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}})),this.cloneFrom=this.updates=null)}}]),e}();function UP(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function jP(e){return"undefined"!=typeof Blob&&e instanceof Blob}function HP(e){return"undefined"!=typeof FormData&&e instanceof FormData}var GP=function(){function e(t,n,r,a){var i;if(_classCallCheck(this,e),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==r?r:null,i=a):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new BP),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+o}}else this.params=new VP,this.urlWithParams=n}return _createClass(e,[{key:"serializeBody",value:function(){return null===this.body?null:UP(this.body)||jP(this.body)||HP(this.body)||"string"==typeof this.body?this.body:this.body instanceof VP?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||HP(this.body)?null:jP(this.body)?this.body.type||null:UP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof VP?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.method||this.method,r=t.url||this.url,a=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((function(e,n){return e.set(n,t.setHeaders[n])}),u)),t.setParams&&(l=Object.keys(t.setParams).reduce((function(e,n){return e.set(n,t.setParams[n])}),l)),new e(n,r,i,{params:l,headers:u,reportProgress:s,responseType:a,withCredentials:o})}}]),e}(),JP=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}(),XP=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";_classCallCheck(this,e),this.headers=t.headers||new BP,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300},KP=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(e=t.call(this,r)).type=JP.ResponseHeader,e}return _createClass(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(XP),ZP=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(e=t.call(this,r)).type=JP.Response,e.body=void 0!==r.body?r.body:null,e}return _createClass(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(XP),YP=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for ".concat(e.url||"(unknown url)"):"Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),r.error=e.error||null,r}return n}(XP);function QP(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var $P,eF,tF,nF,rF,aF,iF,oF,sF,uF,lF,cF,hF=(($P=function(){function e(t){_classCallCheck(this,e),this.handler=t}return _createClass(e,[{key:"request",value:function(e,t){var n,r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof GP)n=e;else{var i=void 0;i=a.headers instanceof BP?a.headers:new BP(a.headers);var o=void 0;a.params&&(o=a.params instanceof VP?a.params:new VP({fromObject:a.params})),n=new GP(e,t,void 0!==a.body?a.body:null,{headers:i,params:o,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}var s=wf(n).pipe(cd((function(e){return r.handler.handle(e)})));if(e instanceof GP||"events"===a.observe)return s;var u=s.pipe(Of((function(e){return e instanceof ZP})));switch(a.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(be((function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body})));case"blob":return u.pipe(be((function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body})));case"text":return u.pipe(be((function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body})));case"json":default:return u.pipe(be((function(e){return e.body})))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(a.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new VP).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,QP(n,t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,QP(n,t))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,QP(n,t))}}]),e}()).\u0275fac=function(e){return new(e||$P)(Ot(LP))},$P.\u0275prov=Xe({token:$P,factory:$P.\u0275fac}),$P),fF=function(){function e(t,n){_classCallCheck(this,e),this.next=t,this.interceptor=n}return _createClass(e,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),e}(),dF=new kt("HTTP_INTERCEPTORS"),pF=((eF=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"intercept",value:function(e,t){return t.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||eF)},eF.\u0275prov=Xe({token:eF,factory:eF.\u0275fac}),eF),mF=/^\)\]\}',?\n/,vF=function e(){_classCallCheck(this,e)},yF=((nF=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}()).\u0275fac=function(e){return new(e||nF)},nF.\u0275prov=Xe({token:nF,factory:nF.\u0275fac}),nF),gF=((tF=function(){function e(t){_classCallCheck(this,e),this.xhrFactory=t}return _createClass(e,[{key:"handle",value:function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new re((function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((function(e,t){return r.setRequestHeader(e,t.join(","))})),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var a=e.detectContentTypeHeader();null!==a&&r.setRequestHeader("Content-Type",a)}if(e.responseType){var i=e.responseType.toLowerCase();r.responseType="json"!==i?i:"text"}var o=e.serializeBody(),s=null,u=function(){if(null!==s)return s;var t=1223===r.status?204:r.status,n=r.statusText||"OK",a=new BP(r.getAllResponseHeaders()),i=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return s=new KP({headers:a,status:t,statusText:n,url:i})},l=function(){var t=u(),a=t.headers,i=t.status,o=t.statusText,s=t.url,l=null;204!==i&&(l=void 0===r.response?r.responseText:r.response),0===i&&(i=l?200:0);var c=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof l){var h=l;l=l.replace(mF,"");try{l=""!==l?JSON.parse(l):null}catch(f){l=h,c&&(c=!1,l={error:f,text:l})}}c?(n.next(new ZP({body:l,headers:a,status:i,statusText:o,url:s||void 0})),n.complete()):n.error(new YP({error:l,headers:a,status:i,statusText:o,url:s||void 0}))},c=function(e){var t=u().url,a=new YP({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error",url:t||void 0});n.error(a)},h=!1,f=function(t){h||(n.next(u()),h=!0);var a={type:JP.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(a.total=t.total),"text"===e.responseType&&r.responseText&&(a.partialText=r.responseText),n.next(a)},d=function(e){var t={type:JP.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",l),r.addEventListener("error",c),e.reportProgress&&(r.addEventListener("progress",f),null!==o&&r.upload&&r.upload.addEventListener("progress",d)),r.send(o),n.next({type:JP.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("load",l),e.reportProgress&&(r.removeEventListener("progress",f),null!==o&&r.upload&&r.upload.removeEventListener("progress",d)),r.abort()}}))}}]),e}()).\u0275fac=function(e){return new(e||tF)(Ot(vF))},tF.\u0275prov=Xe({token:tF,factory:tF.\u0275fac}),tF),_F=new kt("XSRF_COOKIE_NAME"),bF=new kt("XSRF_HEADER_NAME"),xF=function e(){_classCallCheck(this,e)},wF=((cF=function(){function e(t,n,r){_classCallCheck(this,e),this.doc=t,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return _createClass(e,[{key:"getToken",value:function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=lh(e,this.cookieName),this.lastCookieString=e),this.lastToken}}]),e}()).\u0275fac=function(e){return new(e||cF)(Ot(Fc),Ot(ql),Ot(_F))},cF.\u0275prov=Xe({token:cF,factory:cF.\u0275fac}),cF),kF=((lF=function(){function e(t,n){_classCallCheck(this,e),this.tokenService=t,this.headerName=n}return _createClass(e,[{key:"intercept",value:function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||lF)(Ot(xF),Ot(bF))},lF.\u0275prov=Xe({token:lF,factory:lF.\u0275fac}),lF),CF=((uF=function(){function e(t,n){_classCallCheck(this,e),this.backend=t,this.injector=n,this.chain=null}return _createClass(e,[{key:"handle",value:function(e){if(null===this.chain){var t=this.injector.get(dF,[]);this.chain=t.reduceRight((function(e,t){return new fF(e,t)}),this.backend)}return this.chain.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||uF)(Ot(zP),Ot(Wo))},uF.\u0275prov=Xe({token:uF,factory:uF.\u0275fac}),uF),SF=((sF=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"disable",value:function(){return{ngModule:e,providers:[{provide:kF,useClass:pF}]}}},{key:"withOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.cookieName?{provide:_F,useValue:t.cookieName}:[],t.headerName?{provide:bF,useValue:t.headerName}:[]]}}}]),e}()).\u0275mod=tn({type:sF}),sF.\u0275inj=Ke({factory:function(e){return new(e||sF)},providers:[kF,{provide:dF,useExisting:kF,multi:!0},{provide:xF,useClass:wF},{provide:_F,useValue:"XSRF-TOKEN"},{provide:bF,useValue:"X-XSRF-TOKEN"}]}),sF),IF=((oF=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:oF}),oF.\u0275inj=Ke({factory:function(e){return new(e||oF)},providers:[hF,{provide:LP,useClass:CF},gF,{provide:zP,useExisting:gF},yF,{provide:vF,useExisting:yF}],imports:[[SF.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),oF),DF=((iF=function(){function e(t){_classCallCheck(this,e),this.http=t,this._receivedData=new kf(""),this.receivedData=this._receivedData.asObservable()}return _createClass(e,[{key:"getData",value:function(e){var t=this;return new Promise((function(n,r){t.http.get("http:www.envisionai.tech/search",{params:e}).subscribe((function(e){t._receivedData.next(e),n(e)}),(function(e){r(e)}))}))}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||iF)(Ot(hF))},iF.\u0275prov=Xe({token:iF,factory:iF.\u0275fac,providedIn:"root"}),iF),AF=((aF=function(){function e(t){_classCallCheck(this,e),this.TrendsapiService=t,this.epochs=27,this.split=Math.floor(52),this.windowSize=4,this.batchSize=3,this.receivedData_sub=this.TrendsapiService.receivedData.subscribe((function(e){}))}return _createClass(e,[{key:"inputValues",value:function(e){var t=this;return new Promise((function(n,r){t.selectedData=[],e[0].series.forEach((function(e){t.selectedData.push(e.value)})),n(t.selectedData)}))}},{key:"loadModel",value:function(){var e,t,n=this;(e={strict:!1},null==e&&(e={}),(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!=typeof t){e.next=9;break}if(0!==(r=s.getLoadHandlers(t,n)).length){e.next=6;break}r.push(s.browserHTTPRequest(t,n)),e.next=8;break;case 6:if(!(r.length>1)){e.next=8;break}throw new yI("Found more than one (".concat(r.length,") load handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:return e.abrupt("return",function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,u,l,c,h,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=2;break}throw new yI("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 2:return e.next=4,t.load();case 4:if(a=e.sent,null!=(i=a.modelTopology).model_config&&(i=i.model_config),o=null==r.strict||r.strict,u=null!=a.weightData&&null!=a.weightSpecs&&o,l=DA(QA(i),void 0,u),null!=(c=a.trainingConfig)&&l.loadTrainingConfig(c),null!=a.userDefinedMetadata&&l.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=19;break}if(null!=a.weightSpecs){e.next=11;break}throw new yI("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 11:if(h=function(e,t){var n=s.decodeWeights(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}(a.weightData,a.weightSpecs),f=h.modelWeights,d=h.optimizerWeights,l.loadWeights(f,o),e.t0=null!=l.optimizer&&d.length>0,!e.t0){e.next=17;break}return e.next=17,l.optimizer.setWeights(d);case 17:P_(f),P_(d.map((function(e){return e.tensor})));case 19:return e.abrupt("return",l);case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(t,0,n));case 10:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})("http:www.envisionai.tech/Tfmodel/model.json",e)).then((function(e){console.log("model imported successfully"),n.Model=e})).catch((function(e){console.log(e)}))}},{key:"selectCountry",value:function(e){var t=this;if(this.Model&&this.presentData){var n=[];this.presentData.data.forEach((function(r){r.country==e&&(t.presentData.data[t.presentData.data.indexOf(r)].data.forEach((function(e){n.push(e.value)})),t.selectedData=n)}))}}},{key:"sliceArr",value:function(e){var t=this;return new Promise((function(n,r){for(var a=[],i=[],o=0;o<e.length;o++){if(o+t.windowSize>e.length){n({inputs:a,targets:i});break}var s=e.slice(o,o+t.windowSize-1),u=[e[o+t.windowSize]];a.push(s),i.push(u)}n({inputs:a,targets:i})}))}},{key:"createDataset",value:function(){var e=this;return new Promise((function(t,n){if(e.selectedData){var r=e.selectedData.slice(0,e.split);e.selectedData.slice(e.split),e.sliceArr(r).then((function(n){var r=[];n.inputs.forEach((function(e){r=r.concat(e)}));var a=[];n.targets.forEach((function(e){a=a.concat(e)})),e.inputSet=_g(r,[r.length/(e.windowSize-1),e.windowSize-1],"int32"),e.targetSet=_g(a,[a.length,1],"int32"),t()}))}else console.log("bruh"),n()}))}},{key:"train",value:function(){var e=this;this.Model&&(this.Model.compile({optimizer:NS.adam(.001),loss:d.huberLoss,metrics:["mse"]}),console.log("model compiled"),hv("body").find("*").attr("disabled","disabled"),hv("body").find("a").click((function(e){e.preventDefault()})),this.Model.fit(this.inputSet,this.targetSet,{epochs:this.epochs,batchSize:this.batchSize,callbacks:[],validationSplit:.6}).then((function(t){return hv("body").find("*").removeAttr("disabled"),hv("body").find("a").unbind("click"),console.log(t),console.log("training complete: mae:",t.history.mse.slice(-1)),e.predict()})).catch((function(e){hv("body").find("*").removeAttr("disabled"),hv("body").find("a").unbind("click"),console.log(e)})))}},{key:"predict",value:function(){for(var e=this.selectedData.slice(-1)[0],t=[],n=0;n<6;n++){var r=this.Model.predict(mg(e,[1,1])),a=r.toString().substring(14,r.toString().length-4);t.push(parseFloat(a)),e=parseFloat(a)}return console.log(t),t}},{key:"ngOnDestroy",value:function(){this.receivedData_sub.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||aF)(Ot(DF))},aF.\u0275prov=Xe({token:aF,factory:aF.\u0275fac,providedIn:"root"}),aF);try{rF="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(u7){rF=!1}var TF,EF,RF,OF,MF,NF,PF=((RF=function e(t){_classCallCheck(this,e),this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!rF)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}).\u0275fac=function(e){return new(e||RF)(Ot(ql,8))},RF.\u0275prov=Xe({factory:function(){return new RF(Ot(ql,8))},token:RF,providedIn:"root"}),RF),FF=((EF=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:EF}),EF.\u0275inj=Ke({factory:function(e){return new(e||EF)}}),EF),LF=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function zF(){if(TF)return TF;if("object"!=typeof document||!document)return TF=new Set(LF);var e=document.createElement("input");return TF=new Set(LF.filter((function(t){return e.setAttribute("type",t),e.type===t})))}function BF(e){return function(){if(null==OF&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return OF=!0}}))}finally{OF=OF||!1}return OF}()?e:!!e.capture}function WF(){if("object"!=typeof document||!document)return 0;if(null==MF){var e=document.createElement("div"),t=e.style;e.dir="rtl",t.height="1px",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";var n=document.createElement("div"),r=n.style;r.width="2px",r.height="1px",e.appendChild(n),document.body.appendChild(e),MF=0,0===e.scrollLeft&&(e.scrollLeft=1,MF=0===e.scrollLeft?1:2),e.parentNode.removeChild(e)}return MF}function qF(e){if(function(){if(null==NF){var e="undefined"!=typeof document?document.head:null;NF=!(!e||!e.createShadowRoot&&!e.attachShadow)}return NF}()){var t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function VF(e){return null!=e&&"false"!=="".concat(e)}function UF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function jF(e){return Array.isArray(e)?e:[e]}function HF(e){return null==e?"":"string"==typeof e?e:"".concat(e,"px")}function GF(e){return e instanceof bu?e.nativeElement:e}function JF(e,t,n,r){return L(n)&&(r=n,n=void 0),r?JF(e,t,n).pipe(be((function(e){return V(e)?r.apply(void 0,_toConsumableArray(e)):r(e)}))):new re((function(r){!function e(t,n,r,a,i){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,i),o=function(){return s.removeEventListener(n,r,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var u=t;t.on(n,r),o=function(){return u.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var l=t;t.addListener(n,r),o=function(){return l.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var c=0,h=t.length;c<h;c++)e(t[c],n,r,a,i)}a.add(o)}(e,t,(function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),r,n)}))}var XF=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,r)).scheduler=e,a.work=r,a.pending=!1,a}return _createClass(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(a){n=!0,r=!!a&&a||new Error(a)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this)}return _createClass(n,[{key:"schedule",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this}}]),n}(J)),KF=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;_classCallCheck(this,e),this.SchedulerAction=t,this.now=n}return _createClass(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),ZF=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KF.now;return _classCallCheck(this,n),(r=t.call(this,e,(function(){return n.delegate&&n.delegate!==_assertThisInitialized(r)?n.delegate.now():a()}))).actions=[],r.active=!1,r.scheduled=void 0,r}return _createClass(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,r):_get(_getPrototypeOf(n.prototype),"schedule",this).call(this,e,t,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(KF);function YF(e,t){return function(n){return n.lift(new QF(e,t))}}var QF=function(){function e(t,n){_classCallCheck(this,e),this.compare=t,this.keySelector=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new $F(e,this.compare,this.keySelector))}}]),e}(),$F=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).keySelector=a,i.hasKey=!1,"function"==typeof r&&(i.compare=r),i}return _createClass(n,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(s7){return this.destination.error(s7)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(s7){return this.destination.error(s7)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}]),n}(Z),eL=new ZF(XF),tL=function(){function e(t){_classCallCheck(this,e),this.durationSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new nL(e,this.durationSelector))}}]),e}(),nL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).durationSelector=r,a.hasValue=!1,a}return _createClass(n,[{key:"_next",value:function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t;try{t=(0,this.durationSelector)(e)}catch(s7){return this.destination.error(s7)}var n=ge(this,t);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var e=this.value,t=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}},{key:"notifyNext",value:function(e,t,n,r){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(_e);function rL(e){return!V(e)&&e-parseFloat(e)+1>=0}function aL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return rL(t)?r=Number(t)<1?1:Number(t):he(t)&&(n=t),he(n)||(n=eL),new re((function(t){var a=rL(e)?e:+e-n.now();return n.schedule(iL,a,{index:0,period:r,subscriber:t})}))}function iL(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function oL(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eL;return t=function(){return aL(e,n)},function(e){return e.lift(new tL(t))}}function sL(e){return function(t){return t.lift(new mL(e))}}var uL,lL,cL,hL,fL,dL,pL,mL=function(){function e(t){_classCallCheck(this,e),this.notifier=t}return _createClass(e,[{key:"call",value:function(e,t){var n=new vL(e),r=ge(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}]),e}(),vL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).seenValue=!1,r}return _createClass(n,[{key:"notifyNext",value:function(e,t,n,r,a){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(_e),yL=new kt("cdk-dir-doc",{providedIn:"root",factory:function(){return Mt(Fc)}}),gL=((lL=function(){function e(t){if(_classCallCheck(this,e),this.value="ltr",this.change=new fl,t){var n=t.documentElement?t.documentElement.dir:null,r=(t.body?t.body.dir:null)||n;this.value="ltr"===r||"rtl"===r?r:"ltr"}}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),e}()).\u0275fac=function(e){return new(e||lL)(Ot(yL,8))},lL.\u0275prov=Xe({factory:function(){return new lL(Ot(yL,8))},token:lL,providedIn:"root"}),lL),_L=((uL=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:uL}),uL.\u0275inj=Ke({factory:function(e){return new(e||uL)}}),uL),bL=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_classCallCheck(this,e),this._multiple=n,this._emitChanges=a,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new le,r&&r.length&&(n?r.forEach((function(e){return t._markSelected(e)})):this._markSelected(r[0]),this._selectedToEmit.length=0)}return _createClass(e,[{key:"select",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._verifyValueAssignment(n),n.forEach((function(t){return e._markSelected(t)})),this._emitChangeEvent()}},{key:"deselect",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._verifyValueAssignment(n),n.forEach((function(t){return e._unmarkSelected(t)})),this._emitChangeEvent()}},{key:"toggle",value:function(e){this.isSelected(e)?this.deselect(e):this.select(e)}},{key:"clear",value:function(){this._unmarkAll(),this._emitChangeEvent()}},{key:"isSelected",value:function(e){return this._selection.has(e)}},{key:"isEmpty",value:function(){return 0===this._selection.size}},{key:"hasValue",value:function(){return!this.isEmpty()}},{key:"sort",value:function(e){this._multiple&&this.selected&&this._selected.sort(e)}},{key:"isMultipleSelection",value:function(){return this._multiple}},{key:"_emitChangeEvent",value:function(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}},{key:"_markSelected",value:function(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}},{key:"_unmarkSelected",value:function(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}},{key:"_unmarkAll",value:function(){var e=this;this.isEmpty()||this._selection.forEach((function(t){return e._unmarkSelected(t)}))}},{key:"_verifyValueAssignment",value:function(e){if(e.length>1&&!this._multiple)throw Error("Cannot pass multiple values into SelectionModel with single-value mode.")}},{key:"selected",get:function(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}}]),e}(),xL=((pL=function(){function e(t,n,r){_classCallCheck(this,e),this._ngZone=t,this._platform=n,this._scrolled=new le,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}return _createClass(e,[{key:"register",value:function(e){var t=this;this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe((function(){return t._scrolled.next(e)})))}},{key:"deregister",value:function(e){var t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}},{key:"scrolled",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new re((function(n){e._globalSubscription||e._addGlobalListener();var r=t>0?e._scrolled.pipe(oL(t)).subscribe(n):e._scrolled.subscribe(n);return e._scrolledCount++,function(){r.unsubscribe(),e._scrolledCount--,e._scrolledCount||e._removeGlobalListener()}})):wf()}},{key:"ngOnDestroy",value:function(){var e=this;this._removeGlobalListener(),this.scrollContainers.forEach((function(t,n){return e.deregister(n)})),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(e,t){var n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Of((function(e){return!e||n.indexOf(e)>-1})))}},{key:"getAncestorScrollContainers",value:function(e){var t=this,n=[];return this.scrollContainers.forEach((function(r,a){t._scrollableContainsElement(a,e)&&n.push(a)})),n}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_scrollableContainsElement",value:function(e,t){var n=t.nativeElement,r=e.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var e=this;this._globalSubscription=this._ngZone.runOutsideAngular((function(){return JF(e._getWindow().document,"scroll").subscribe((function(){return e._scrolled.next()}))}))}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),e}()).\u0275fac=function(e){return new(e||pL)(Ot(rc),Ot(PF),Ot(Fc,8))},pL.\u0275prov=Xe({factory:function(){return new pL(Ot(rc),Ot(PF),Ot(Fc,8))},token:pL,providedIn:"root"}),pL),wL=((dL=function(){function e(t,n,r,a){var i=this;_classCallCheck(this,e),this.elementRef=t,this.scrollDispatcher=n,this.ngZone=r,this.dir=a,this._destroyed=new le,this._elementScrolled=new re((function(e){return i.ngZone.runOutsideAngular((function(){return JF(i.elementRef.nativeElement,"scroll").pipe(sL(i._destroyed)).subscribe(e)}))}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.scrollDispatcher.register(this)}},{key:"ngOnDestroy",value:function(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}},{key:"elementScrolled",value:function(){return this._elementScrolled}},{key:"getElementRef",value:function(){return this.elementRef}},{key:"scrollTo",value:function(e){var t=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=n?e.end:e.start),null==e.right&&(e.right=n?e.start:e.end),null!=e.bottom&&(e.top=t.scrollHeight-t.clientHeight-e.bottom),n&&0!=WF()?(null!=e.left&&(e.right=t.scrollWidth-t.clientWidth-e.left),2==WF()?e.left=e.right:1==WF()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=t.scrollWidth-t.clientWidth-e.right),this._applyScrollToOptions(e)}},{key:"_applyScrollToOptions",value:function(e){var t=this.elementRef.nativeElement;"object"==typeof document&&"scrollBehavior"in document.documentElement.style?t.scrollTo(e):(null!=e.top&&(t.scrollTop=e.top),null!=e.left&&(t.scrollLeft=e.left))}},{key:"measureScrollOffset",value:function(e){var t=this.elementRef.nativeElement;if("top"==e)return t.scrollTop;if("bottom"==e)return t.scrollHeight-t.clientHeight-t.scrollTop;var n=this.dir&&"rtl"==this.dir.value;return"start"==e?e=n?"right":"left":"end"==e&&(e=n?"left":"right"),n&&2==WF()?"left"==e?t.scrollWidth-t.clientWidth-t.scrollLeft:t.scrollLeft:n&&1==WF()?"left"==e?t.scrollLeft+t.scrollWidth-t.clientWidth:-t.scrollLeft:"left"==e?t.scrollLeft:t.scrollWidth-t.clientWidth-t.scrollLeft}}]),e}()).\u0275fac=function(e){return new(e||dL)(as(bu),as(xL),as(rc),as(gL,8))},dL.\u0275dir=rn({type:dL,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),dL),kL=((fL=function(){function e(t,n,r){var a=this;_classCallCheck(this,e),this._platform=t,this._document=r,n.runOutsideAngular((function(){var e=a._getWindow();a._change=t.isBrowser?Ee(JF(e,"resize"),JF(e,"orientationchange")):wf(),a._invalidateCache=a.change().subscribe((function(){return a._updateViewportSize()}))}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._invalidateCache.unsubscribe()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}},{key:"getViewportRect",value:function(){var e=this.getViewportScrollPosition(),t=this.getViewportSize(),n=t.width,r=t.height;return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=this._getDocument(),t=this._getWindow(),n=e.documentElement,r=n.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-r.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}},{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return e>0?this._change.pipe(oL(e)):this._change}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_updateViewportSize",value:function(){var e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}]),e}()).\u0275fac=function(e){return new(e||fL)(Ot(PF),Ot(rc),Ot(Fc,8))},fL.\u0275prov=Xe({factory:function(){return new fL(Ot(PF),Ot(rc),Ot(Fc,8))},token:fL,providedIn:"root"}),fL),CL=((hL=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:hL}),hL.\u0275inj=Ke({factory:function(e){return new(e||hL)}}),hL),SL=((cL=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:cL}),cL.\u0275inj=Ke({factory:function(e){return new(e||cL)},imports:[[_L,FF,CL],_L,CL]}),cL);function IL(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?n.some((function(t){return e[t]})):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function DL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eL;return function(n){return n.lift(new AL(e,t))}}var AL=function(){function e(t,n){_classCallCheck(this,e),this.dueTime=t,this.scheduler=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new TL(e,this.dueTime,this.scheduler))}}]),e}(),TL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).dueTime=r,i.scheduler=a,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return _createClass(n,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(EL,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),n}(Z);function EL(e){e.debouncedNext()}var RL,OL,ML,NL,PL,FL=((NL=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"create",value:function(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}]),e}()).\u0275fac=function(e){return new(e||NL)},NL.\u0275prov=Xe({factory:function(){return new NL},token:NL,providedIn:"root"}),NL),LL=((ML=function(){function e(t){_classCallCheck(this,e),this._mutationObserverFactory=t,this._observedElements=new Map}return _createClass(e,[{key:"ngOnDestroy",value:function(){var e=this;this._observedElements.forEach((function(t,n){return e._cleanupObserver(n)}))}},{key:"observe",value:function(e){var t=this,n=GF(e);return new re((function(e){var r=t._observeElement(n).subscribe(e);return function(){r.unsubscribe(),t._unobserveElement(n)}}))}},{key:"_observeElement",value:function(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{var t=new le,n=this._mutationObserverFactory.create((function(e){return t.next(e)}));n&&n.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:n,stream:t,count:1})}return this._observedElements.get(e).stream}},{key:"_unobserveElement",value:function(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}},{key:"_cleanupObserver",value:function(e){if(this._observedElements.has(e)){var t=this._observedElements.get(e),n=t.observer,r=t.stream;n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}}]),e}()).\u0275fac=function(e){return new(e||ML)(Ot(FL))},ML.\u0275prov=Xe({factory:function(){return new ML(Ot(FL))},token:ML,providedIn:"root"}),ML),zL=((OL=function(){function e(t,n,r){_classCallCheck(this,e),this._contentObserver=t,this._elementRef=n,this._ngZone=r,this.event=new fl,this._disabled=!1,this._currentSubscription=null}return _createClass(e,[{key:"ngAfterContentInit",value:function(){this._currentSubscription||this.disabled||this._subscribe()}},{key:"ngOnDestroy",value:function(){this._unsubscribe()}},{key:"_subscribe",value:function(){var e=this;this._unsubscribe();var t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular((function(){e._currentSubscription=(e.debounce?t.pipe(DL(e.debounce)):t).subscribe(e.event)}))}},{key:"_unsubscribe",value:function(){this._currentSubscription&&this._currentSubscription.unsubscribe()}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=VF(e),this._disabled?this._unsubscribe():this._subscribe()}},{key:"debounce",get:function(){return this._debounce},set:function(e){this._debounce=UF(e),this._subscribe()}}]),e}()).\u0275fac=function(e){return new(e||OL)(as(LL),as(bu),as(rc))},OL.\u0275dir=rn({type:OL,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),OL),BL=((RL=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:RL}),RL.\u0275inj=Ke({factory:function(e){return new(e||RL)},providers:[FL]}),RL),WL=function(){function e(t){var n=this;_classCallCheck(this,e),this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new le,this._typeaheadSubscription=J.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._skipPredicateFn=function(e){return e.disabled},this._pressedLetters=[],this.tabOut=new le,this.change=new le,t instanceof pl&&t.changes.subscribe((function(e){if(n._activeItem){var t=e.toArray().indexOf(n._activeItem);t>-1&&t!==n._activeItemIndex&&(n._activeItemIndex=t)}}))}return _createClass(e,[{key:"skipPredicate",value:function(e){return this._skipPredicateFn=e,this}},{key:"withWrap",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._wrap=e,this}},{key:"withVerticalOrientation",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._vertical=e,this}},{key:"withHorizontalOrientation",value:function(e){return this._horizontal=e,this}},{key:"withAllowedModifierKeys",value:function(e){return this._allowedModifierKeys=e,this}},{key:"withTypeAhead",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;if(this._items.length&&this._items.some((function(e){return"function"!=typeof e.getLabel})))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(fd((function(t){return e._pressedLetters.push(t)})),DL(t),Of((function(){return e._pressedLetters.length>0})),be((function(){return e._pressedLetters.join("")}))).subscribe((function(t){for(var n=e._getItemsArray(),r=1;r<n.length+1;r++){var a=(e._activeItemIndex+r)%n.length,i=n[a];if(!e._skipPredicateFn(i)&&0===i.getLabel().toUpperCase().trim().indexOf(t)){e.setActiveItem(a);break}}e._pressedLetters=[]})),this}},{key:"setActiveItem",value:function(e){var t=this._activeItemIndex;this.updateActiveItem(e),this._activeItemIndex!==t&&this.change.next(this._activeItemIndex)}},{key:"onKeydown",value:function(e){var t=this,n=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every((function(n){return!e[n]||t._allowedModifierKeys.indexOf(n)>-1}));switch(n){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;default:return void((r||IL(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))))}this._pressedLetters=[],e.preventDefault()}},{key:"isTyping",value:function(){return this._pressedLetters.length>0}},{key:"setFirstItemActive",value:function(){this._setActiveItemByIndex(0,1)}},{key:"setLastItemActive",value:function(){this._setActiveItemByIndex(this._items.length-1,-1)}},{key:"setNextItemActive",value:function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}},{key:"setPreviousItemActive",value:function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}},{key:"updateActiveItem",value:function(e){var t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e),r=t[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}},{key:"_setActiveItemByDelta",value:function(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}},{key:"_setActiveInWrapMode",value:function(e){for(var t=this._getItemsArray(),n=1;n<=t.length;n++){var r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}},{key:"_setActiveInDefaultMode",value:function(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}},{key:"_setActiveItemByIndex",value:function(e,t){var n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}},{key:"_getItemsArray",value:function(){return this._items instanceof pl?this._items.toArray():this._items}},{key:"activeItemIndex",get:function(){return this._activeItemIndex}},{key:"activeItem",get:function(){return this._activeItem}}]),e}(),qL=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"setActiveItem",value:function(e){this.activeItem&&this.activeItem.setInactiveStyles(),_get(_getPrototypeOf(n.prototype),"setActiveItem",this).call(this,e),this.activeItem&&this.activeItem.setActiveStyles()}}]),n}(WL),VL=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments))._origin="program",e}return _createClass(n,[{key:"setFocusOrigin",value:function(e){return this._origin=e,this}},{key:"setActiveItem",value:function(e){_get(_getPrototypeOf(n.prototype),"setActiveItem",this).call(this,e),this.activeItem&&this.activeItem.focus(this._origin)}}]),n}(WL),UL=((PL=function(){function e(t){_classCallCheck(this,e),this._platform=t}return _createClass(e,[{key:"isDisabled",value:function(e){return e.hasAttribute("disabled")}},{key:"isVisible",value:function(e){return function(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}},{key:"isTabbable",value:function(e){if(!this._platform.isBrowser)return!1;var t,n=function(e){try{return e.frameElement}catch(u7){return null}}((t=e).ownerDocument&&t.ownerDocument.defaultView||window);if(n){var r=n&&n.nodeName.toLowerCase();if(-1===HL(n))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===r)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(n))return!1}var a=e.nodeName.toLowerCase(),i=HL(e);if(e.hasAttribute("contenteditable"))return-1!==i;if("iframe"===a)return!1;if("audio"===a){if(!e.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===a){if(!e.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==a||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(e){var t=e.nodeName.toLowerCase(),n="input"===t&&e.type;return"text"===n||"password"===n||"select"===t||"textarea"===t}(e))&&e.tabIndex>=0}},{key:"isFocusable",value:function(e){return function(e){return!function(e){return function(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function(e){var t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(e)||function(e){return function(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||jL(e))}(e)&&!this.isDisabled(e)&&this.isVisible(e)}}]),e}()).\u0275fac=function(e){return new(e||PL)(Ot(PF))},PL.\u0275prov=Xe({factory:function(){return new PL(Ot(PF))},token:PL,providedIn:"root"}),PL);function jL(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;var t=e.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function HL(e){if(!jL(e))return null;var t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}var GL,JL=function(){function e(t,n,r,a){var i=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,e),this._element=t,this._checker=n,this._ngZone=r,this._document=a,this._hasAttached=!1,this.startAnchorListener=function(){return i.focusLastTabbableElement()},this.endAnchorListener=function(){return i.focusFirstTabbableElement()},this._enabled=!0,o||this.attachAnchors()}return _createClass(e,[{key:"destroy",value:function(){var e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null}},{key:"attachAnchors",value:function(){var e=this;return!!this._hasAttached||(this._ngZone.runOutsideAngular((function(){e._startAnchor||(e._startAnchor=e._createAnchor(),e._startAnchor.addEventListener("focus",e.startAnchorListener)),e._endAnchor||(e._endAnchor=e._createAnchor(),e._endAnchor.addEventListener("focus",e.endAnchorListener))})),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}},{key:"focusInitialElementWhenReady",value:function(){var e=this;return new Promise((function(t){e._executeOnStable((function(){return t(e.focusInitialElement())}))}))}},{key:"focusFirstTabbableElementWhenReady",value:function(){var e=this;return new Promise((function(t){e._executeOnStable((function(){return t(e.focusFirstTabbableElement())}))}))}},{key:"focusLastTabbableElementWhenReady",value:function(){var e=this;return new Promise((function(t){e._executeOnStable((function(){return t(e.focusLastTabbableElement())}))}))}},{key:"_getRegionBoundary",value:function(e){for(var t=this._element.querySelectorAll("[cdk-focus-region-".concat(e,"], ")+"[cdkFocusRegion".concat(e,"], ")+"[cdk-focus-".concat(e,"]")),n=0;n<t.length;n++)t[n].hasAttribute("cdk-focus-".concat(e))?console.warn("Found use of deprecated attribute 'cdk-focus-".concat(e,"', ")+"use 'cdkFocusRegion".concat(e,"' instead. The deprecated ")+"attribute will be removed in 8.0.0.",t[n]):t[n].hasAttribute("cdk-focus-region-".concat(e))&&console.warn("Found use of deprecated attribute 'cdk-focus-region-".concat(e,"', ")+"use 'cdkFocusRegion".concat(e,"' instead. The deprecated attribute ")+"will be removed in 8.0.0.",t[n]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}},{key:"focusInitialElement",value:function(){var e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return e?(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),ra()&&!this._checker.isFocusable(e)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",e),e.focus(),!0):this.focusFirstTabbableElement()}},{key:"focusFirstTabbableElement",value:function(){var e=this._getRegionBoundary("start");return e&&e.focus(),!!e}},{key:"focusLastTabbableElement",value:function(){var e=this._getRegionBoundary("end");return e&&e.focus(),!!e}},{key:"hasAttached",value:function(){return this._hasAttached}},{key:"_getFirstTabbableElement",value:function(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;for(var t=e.children||e.childNodes,n=0;n<t.length;n++){var r=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(r)return r}return null}},{key:"_getLastTabbableElement",value:function(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;for(var t=e.children||e.childNodes,n=t.length-1;n>=0;n--){var r=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(r)return r}return null}},{key:"_createAnchor",value:function(){var e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}},{key:"_toggleAnchorTabIndex",value:function(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}},{key:"toggleAnchors",value:function(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}},{key:"_executeOnStable",value:function(e){this._ngZone.isStable?e():this._ngZone.onStable.asObservable().pipe(Zf(1)).subscribe(e)}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}}]),e}(),XL=((GL=function(){function e(t,n,r){_classCallCheck(this,e),this._checker=t,this._ngZone=n,this._document=r}return _createClass(e,[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new JL(e,this._checker,this._ngZone,this._document,t)}}]),e}()).\u0275fac=function(e){return new(e||GL)(Ot(UL),Ot(rc),Ot(Fc))},GL.\u0275prov=Xe({factory:function(){return new GL(Ot(UL),Ot(rc),Ot(Fc))},token:GL,providedIn:"root"}),GL);"undefined"!=typeof Element&&Element;var KL,ZL=new kt("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),YL=new kt("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),QL=((KL=function(){function e(t,n,r,a){_classCallCheck(this,e),this._ngZone=n,this._defaultOptions=a,this._document=r,this._liveElement=t||this._createLiveElement()}return _createClass(e,[{key:"announce",value:function(e){for(var t,n,r,a=this,i=this._defaultOptions,o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return 1===s.length&&"number"==typeof s[0]?r=s[0]:(n=(t=_slicedToArray(s,2))[0],r=t[1]),this.clear(),clearTimeout(this._previousTimeout),n||(n=i&&i.politeness?i.politeness:"polite"),null==r&&i&&(r=i.duration),this._liveElement.setAttribute("aria-live",n),this._ngZone.runOutsideAngular((function(){return new Promise((function(t){clearTimeout(a._previousTimeout),a._previousTimeout=setTimeout((function(){a._liveElement.textContent=e,t(),"number"==typeof r&&(a._previousTimeout=setTimeout((function(){return a.clear()}),r))}),100)}))}))}},{key:"clear",value:function(){this._liveElement&&(this._liveElement.textContent="")}},{key:"ngOnDestroy",value:function(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}},{key:"_createLiveElement",value:function(){for(var e=this._document.getElementsByClassName("cdk-live-announcer-element"),t=this._document.createElement("div"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);return t.classList.add("cdk-live-announcer-element"),t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t}}]),e}()).\u0275fac=function(e){return new(e||KL)(Ot(ZL,8),Ot(rc),Ot(Fc),Ot(YL,8))},KL.\u0275prov=Xe({factory:function(){return new KL(Ot(ZL,8),Ot(rc),Ot(Fc),Ot(YL,8))},token:KL,providedIn:"root"}),KL);function $L(e){return 0===e.buttons}var ez,tz=new kt("cdk-focus-monitor-default-options"),nz=BF({passive:!0,capture:!0}),rz=((ez=function(){function e(t,n,r,a){var i=this;_classCallCheck(this,e),this._ngZone=t,this._platform=n,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=function(){i._lastTouchTarget=null,i._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=function(e){if(!i._lastTouchTarget){var t=$L(e)?"keyboard":"mouse";i._setOriginForCurrentEventQueue(t)}},this._documentTouchstartListener=function(e){null!=i._touchTimeoutId&&clearTimeout(i._touchTimeoutId),i._lastTouchTarget=az(e),i._touchTimeoutId=setTimeout((function(){return i._lastTouchTarget=null}),650)},this._windowFocusListener=function(){i._windowFocused=!0,i._windowFocusTimeoutId=setTimeout((function(){return i._windowFocused=!1}))},this._rootNodeFocusAndBlurListener=function(e){for(var t=az(e),n="focus"===e.type?i._onFocus:i._onBlur,r=t;r;r=r.parentElement)n.call(i,e,r)},this._document=r,this._detectionMode=(null==a?void 0:a.detectionMode)||0}return _createClass(e,[{key:"monitor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._platform.isBrowser)return wf(null);var n=GF(e),r=qF(n)||this._getDocument(),a=this._elementInfo.get(n);if(a)return t&&(a.checkChildren=!0),a.subject.asObservable();var i={checkChildren:t,subject:new le,rootNode:r};return this._elementInfo.set(n,i),this._registerGlobalListeners(i),i.subject.asObservable()}},{key:"stopMonitoring",value:function(e){var t=GF(e),n=this._elementInfo.get(t);n&&(n.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._removeGlobalListeners(n))}},{key:"focusVia",value:function(e,t,n){var r=GF(e);this._setOriginForCurrentEventQueue(t),"function"==typeof r.focus&&r.focus(n)}},{key:"ngOnDestroy",value:function(){var e=this;this._elementInfo.forEach((function(t,n){return e.stopMonitoring(n)}))}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_toggleClass",value:function(e,t,n){n?e.classList.add(t):e.classList.remove(t)}},{key:"_getFocusOrigin",value:function(e){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"}},{key:"_setClasses",value:function(e,t){this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t)}},{key:"_setOriginForCurrentEventQueue",value:function(e){var t=this;this._ngZone.runOutsideAngular((function(){t._origin=e,0===t._detectionMode&&(t._originTimeoutId=setTimeout((function(){return t._origin=null}),1))}))}},{key:"_wasCausedByTouch",value:function(e){var t=az(e);return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}},{key:"_onFocus",value:function(e,t){var n=this._elementInfo.get(t);if(n&&(n.checkChildren||t===az(e))){var r=this._getFocusOrigin(e);this._setClasses(t,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}}},{key:"_onBlur",value:function(e,t){var n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))}},{key:"_emitOrigin",value:function(e,t){this._ngZone.run((function(){return e.next(t)}))}},{key:"_registerGlobalListeners",value:function(e){var t=this;if(this._platform.isBrowser){var n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular((function(){n.addEventListener("focus",t._rootNodeFocusAndBlurListener,nz),n.addEventListener("blur",t._rootNodeFocusAndBlurListener,nz)})),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular((function(){var e=t._getDocument(),n=t._getWindow();e.addEventListener("keydown",t._documentKeydownListener,nz),e.addEventListener("mousedown",t._documentMousedownListener,nz),e.addEventListener("touchstart",t._documentTouchstartListener,nz),n.addEventListener("focus",t._windowFocusListener)}))}}},{key:"_removeGlobalListeners",value:function(e){var t=e.rootNode;if(this._rootNodeFocusListenerCount.has(t)){var n=this._rootNodeFocusListenerCount.get(t);n>1?this._rootNodeFocusListenerCount.set(t,n-1):(t.removeEventListener("focus",this._rootNodeFocusAndBlurListener,nz),t.removeEventListener("blur",this._rootNodeFocusAndBlurListener,nz),this._rootNodeFocusListenerCount.delete(t))}if(!--this._monitoredElementCount){var r=this._getDocument(),a=this._getWindow();r.removeEventListener("keydown",this._documentKeydownListener,nz),r.removeEventListener("mousedown",this._documentMousedownListener,nz),r.removeEventListener("touchstart",this._documentTouchstartListener,nz),a.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}]),e}()).\u0275fac=function(e){return new(e||ez)(Ot(rc),Ot(PF),Ot(Fc,8),Ot(tz,8))},ez.\u0275prov=Xe({factory:function(){return new ez(Ot(rc),Ot(PF),Ot(Fc,8),Ot(tz,8))},token:ez,providedIn:"root"}),ez);function az(e){return e.composedPath?e.composedPath()[0]:e.target}var iz,oz,sz,uz=((sz=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._elementRef=t,this._focusMonitor=n,this.cdkFocusChange=new fl,this._monitorSubscription=this._focusMonitor.monitor(this._elementRef,this._elementRef.nativeElement.hasAttribute("cdkMonitorSubtreeFocus")).subscribe((function(e){return r.cdkFocusChange.emit(e)}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||sz)(as(bu),as(rz))},sz.\u0275dir=rn({type:sz,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),sz),lz=((oz=function(){function e(t,n){_classCallCheck(this,e),this._platform=t,this._document=n}return _createClass(e,[{key:"getHighContrastMode",value:function(){if(!this._platform.isBrowser)return 0;var e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);var t=this._document.defaultView||window,n=t&&t.getComputedStyle?t.getComputedStyle(e):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}},{key:"_applyBodyHighContrastModeCssClasses",value:function(){if(this._platform.isBrowser&&this._document.body){var e=this._document.body.classList;e.remove("cdk-high-contrast-active"),e.remove("cdk-high-contrast-black-on-white"),e.remove("cdk-high-contrast-white-on-black");var t=this.getHighContrastMode();1===t?(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-black-on-white")):2===t&&(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-white-on-black"))}}}]),e}()).\u0275fac=function(e){return new(e||oz)(Ot(PF),Ot(Fc))},oz.\u0275prov=Xe({factory:function(){return new oz(Ot(PF),Ot(Fc))},token:oz,providedIn:"root"}),oz),cz=((iz=function e(t){_classCallCheck(this,e),t._applyBodyHighContrastModeCssClasses()}).\u0275mod=tn({type:iz}),iz.\u0275inj=Ke({factory:function(e){return new(e||iz)(Ot(lz))},imports:[[FF,BL]]}),iz),hz=new Du("9.2.4"),fz=function e(){_classCallCheck(this,e)};function dz(e,t){return{type:7,name:e,definitions:t,options:{}}}function pz(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:t,timings:e}}function mz(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:e,options:t}}function vz(e){return{type:6,styles:e,offset:null}}function yz(e,t,n){return{type:0,name:e,styles:t,options:n}}function gz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:e,animation:t,options:n}}function _z(e){Promise.resolve(null).then(e)}var bz=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+n}return _createClass(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var e=this;_z((function(){return e._onFinish()}))}},{key:"_onStart",value:function(){this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(e){}},{key:"getPosition",value:function(){return 0}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}}]),e}(),xz=function(){function e(t){var n=this;_classCallCheck(this,e),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var r=0,a=0,i=0,o=this.players.length;0==o?_z((function(){return n._onFinish()})):this.players.forEach((function(e){e.onDone((function(){++r==o&&n._onFinish()})),e.onDestroy((function(){++a==o&&n._onDestroy()})),e.onStart((function(){++i==o&&n._onStart()}))})),this.totalTime=this.players.reduce((function(e,t){return Math.max(e,t.totalTime)}),0)}return _createClass(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach((function(e){return e.init()}))}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[])}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach((function(e){return e.play()}))}},{key:"pause",value:function(){this.players.forEach((function(e){return e.pause()}))}},{key:"restart",value:function(){this.players.forEach((function(e){return e.restart()}))}},{key:"finish",value:function(){this._onFinish(),this.players.forEach((function(e){return e.finish()}))}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach((function(e){return e.destroy()})),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach((function(e){return e.reset()})),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(e){var t=e*this.totalTime;this.players.forEach((function(e){var n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)}))}},{key:"getPosition",value:function(){var e=0;return this.players.forEach((function(t){var n=t.getPosition();e=Math.min(n,e)})),e}},{key:"beforeDestroy",value:function(){this.players.forEach((function(e){e.beforeDestroy&&e.beforeDestroy()}))}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}}]),e}();function wz(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function kz(e){switch(e.length){case 0:return new bz;case 1:return e[0];default:return new xz(e)}}function Cz(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=[],s=[],u=-1,l=null;if(r.forEach((function(e){var n=e.offset,r=n==u,c=r&&l||{};Object.keys(e).forEach((function(n){var r=n,s=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,o),s){case"!":s=a[n];break;case"*":s=i[n];break;default:s=t.normalizeStyleValue(n,r,s,o)}c[r]=s})),r||s.push(c),l=c,u=n})),o.length){var c="\n - ";throw new Error("Unable to animate due to the following errors:".concat(c).concat(o.join(c)))}return s}function Sz(e,t,n,r){switch(t){case"start":e.onStart((function(){return r(n&&Iz(n,"start",e))}));break;case"done":e.onDone((function(){return r(n&&Iz(n,"done",e))}));break;case"destroy":e.onDestroy((function(){return r(n&&Iz(n,"destroy",e))}))}}function Iz(e,t,n){var r=n.totalTime,a=Dz(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),i=e._data;return null!=i&&(a._data=i),a}function Dz(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6?arguments[6]:void 0;return{element:e,triggerName:t,fromState:n,toState:r,phaseName:a,totalTime:i,disabled:!!o}}function Az(e,t,n){var r;return e instanceof Map?(r=e.get(t))||e.set(t,r=n):(r=e[t])||(r=e[t]=n),r}function Tz(e){var t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}var Ez=function(e,t){return!1},Rz=function(e,t){return!1},Oz=function(e,t,n){return[]},Mz=wz();(Mz||"undefined"!=typeof Element)&&(Ez=function(e,t){return e.contains(t)},Rz=function(){if(Mz||Element.prototype.matches)return function(e,t){return e.matches(t)};var e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?function(e,n){return t.apply(e,[n])}:Rz}(),Oz=function(e,t,n){var r=[];if(n)r.push.apply(r,_toConsumableArray(e.querySelectorAll(t)));else{var a=e.querySelector(t);a&&r.push(a)}return r});var Nz=null,Pz=!1;function Fz(e){Nz||(Nz=("undefined"!=typeof document?document.body:null)||{},Pz=!!Nz.style&&"WebkitAppearance"in Nz.style);var t=!0;return Nz.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(!(t=e in Nz.style)&&Pz)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in Nz.style),t}var Lz=Rz,zz=Ez,Bz=Oz;function Wz(e){var t={};return Object.keys(e).forEach((function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]})),t}var qz,Vz=((qz=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"validateStyleProperty",value:function(e){return Fz(e)}},{key:"matchesElement",value:function(e,t){return Lz(e,t)}},{key:"containsElement",value:function(e,t){return zz(e,t)}},{key:"query",value:function(e,t,n){return Bz(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return n||""}},{key:"animate",value:function(e,t,n,r,a){return arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&arguments[6],new bz(n,r)}}]),e}()).\u0275fac=function(e){return new(e||qz)},qz.\u0275prov=Xe({token:qz,factory:qz.\u0275fac}),qz),Uz=function(){var e=function e(){_classCallCheck(this,e)};return e.NOOP=new Vz,e}();function jz(e){if("number"==typeof e)return e;var t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Hz(parseFloat(t[1]),t[2])}function Hz(e,t){switch(t){case"s":return 1e3*e;default:return e}}function Gz(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){var r,a=0,i="";if("string"==typeof e){var o=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===o)return t.push('The provided timing value "'.concat(e,'" is invalid.')),{duration:0,delay:0,easing:""};r=Hz(parseFloat(o[1]),o[2]);var s=o[3];null!=s&&(a=Hz(parseFloat(s),o[4]));var u=o[5];u&&(i=u)}else r=e;if(!n){var l=!1,c=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),l=!0),a<0&&(t.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&t.splice(c,0,'The provided timing value "'.concat(e,'" is invalid.'))}return{duration:r,delay:a,easing:i}}(e,t,n)}function Jz(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).forEach((function(n){t[n]=e[n]})),t}function Xz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t)for(var r in e)n[r]=e[r];else Jz(e,n);return n}function Kz(e,t,n){return n?t+":"+n+";":""}function Zz(e){for(var t="",n=0;n<e.style.length;n++){var r=e.style.item(n);t+=Kz(0,r,e.style.getPropertyValue(r))}for(var a in e.style)e.style.hasOwnProperty(a)&&!a.startsWith("_")&&(t+=Kz(0,a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[a]));e.setAttribute("style",t)}function Yz(e,t,n){e.style&&(Object.keys(t).forEach((function(r){var a=iB(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[a]),e.style[a]=t[r]})),wz()&&Zz(e))}function Qz(e,t){e.style&&(Object.keys(t).forEach((function(t){var n=iB(t);e.style[n]=""})),wz()&&Zz(e))}function $z(e){return Array.isArray(e)?1==e.length?e[0]:mz(e):e}var eB=new RegExp("{{\\s*(.+?)\\s*}}","g");function tB(e){var t=[];if("string"==typeof e){for(var n;n=eB.exec(e);)t.push(n[1]);eB.lastIndex=0}return t}function nB(e,t,n){var r=e.toString(),a=r.replace(eB,(function(e,r){var a=t[r];return t.hasOwnProperty(r)||(n.push("Please provide a value for the animation param ".concat(r)),a=""),a.toString()}));return a==r?e:a}function rB(e){for(var t=[],n=e.next();!n.done;)t.push(n.value),n=e.next();return t}var aB=/-+([a-z0-9])/g;function iB(e){return e.replace(aB,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[1].toUpperCase()}))}function oB(e,t){return 0===e||0===t}function sB(e,t,n){var r=Object.keys(n);if(r.length&&t.length){var a=t[0],i=[];if(r.forEach((function(e){a.hasOwnProperty(e)||i.push(e),a[e]=n[e]})),i.length)for(var o=function(){var n=t[s];i.forEach((function(t){n[t]=lB(e,t)}))},s=1;s<t.length;s++)o()}return t}function uB(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error("Unable to resolve animation metadata node #".concat(t.type))}}function lB(e,t){return window.getComputedStyle(e)[t]}var cB=new Set(["true","1"]),hB=new Set(["false","0"]);function fB(e,t){var n=cB.has(e)||hB.has(e),r=cB.has(t)||hB.has(t);return function(a,i){var o="*"==e||e==a,s="*"==t||t==i;return!o&&n&&"boolean"==typeof a&&(o=a?cB.has(e):hB.has(e)),!s&&r&&"boolean"==typeof i&&(s=i?cB.has(t):hB.has(t)),o&&s}}var dB=new RegExp("s*:selfs*,?","g");function pB(e,t,n){return new mB(e).build(t,n)}var mB=function(){function e(t){_classCallCheck(this,e),this._driver=t}return _createClass(e,[{key:"build",value:function(e,t){var n=new vB(t);return this._resetContextStyleTimingState(n),uB(this,$z(e),n)}},{key:"_resetContextStyleTimingState",value:function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}},{key:"visitTrigger",value:function(e,t){var n=this,r=t.queryCount=0,a=t.depCount=0,i=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach((function(e){if(n._resetContextStyleTimingState(t),0==e.type){var s=e,u=s.name;u.toString().split(/\s*,\s*/).forEach((function(e){s.name=e,i.push(n.visitState(s,t))})),s.name=u}else if(1==e.type){var l=n.visitTransition(e,t);r+=l.queryCount,a+=l.depCount,o.push(l)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")})),{type:7,name:e.name,states:i,transitions:o,queryCount:r,depCount:a,options:null}}},{key:"visitState",value:function(e,t){var n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){var a=new Set,i=r||{};if(n.styles.forEach((function(e){if(yB(e)){var t=e;Object.keys(t).forEach((function(e){tB(t[e]).forEach((function(e){i.hasOwnProperty(e)||a.add(e)}))}))}})),a.size){var o=rB(a.values());t.errors.push('state("'.concat(e.name,'", ...) must define default values for all the following style substitutions: ').concat(o.join(", ")))}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}},{key:"visitTransition",value:function(e,t){t.queryCount=0,t.depCount=0;var n,r,a,i=uB(this,$z(e.animation),t);return{type:1,matchers:(n=e.expr,r=t.errors,a=[],"string"==typeof n?n.split(/\s*,\s*/).forEach((function(e){return function(e,t,n){if(":"==e[0]){var r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,t){return parseFloat(t)>parseFloat(e)};case":decrement":return function(e,t){return parseFloat(t)<parseFloat(e)};default:return t.push('The transition alias value "'.concat(e,'" is not supported')),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}var a=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==a||a.length<4)return n.push('The provided transition expression "'.concat(e,'" is not supported')),t;var i=a[1],o=a[2],s=a[3];t.push(fB(i,s)),"<"!=o[0]||"*"==i&&"*"==s||t.push(fB(s,i))}(e,a,r)})):a.push(n),a),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:gB(e.options)}}},{key:"visitSequence",value:function(e,t){var n=this;return{type:2,steps:e.steps.map((function(e){return uB(n,e,t)})),options:gB(e.options)}}},{key:"visitGroup",value:function(e,t){var n=this,r=t.currentTime,a=0,i=e.steps.map((function(e){t.currentTime=r;var i=uB(n,e,t);return a=Math.max(a,t.currentTime),i}));return t.currentTime=a,{type:3,steps:i,options:gB(e.options)}}},{key:"visitAnimate",value:function(e,t){var n,r=function(e,t){var n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return _B(Gz(e,t).duration,0,"");var r=e;if(r.split(/\s+/).some((function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)}))){var a=_B(0,0,"");return a.dynamic=!0,a.strValue=r,a}return _B((n=n||Gz(r,t)).duration,n.delay,n.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;var a=e.styles?e.styles:vz({});if(5==a.type)n=this.visitKeyframes(a,t);else{var i=e.styles,o=!1;if(!i){o=!0;var s={};r.easing&&(s.easing=r.easing),i=vz(s)}t.currentTime+=r.duration+r.delay;var u=this.visitStyle(i,t);u.isEmptyStep=o,n=u}return t.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}}},{key:"visitStyle",value:function(e,t){var n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}},{key:"_makeStyleAst",value:function(e,t){var n=[];Array.isArray(e.styles)?e.styles.forEach((function(e){"string"==typeof e?"*"==e?n.push(e):t.errors.push("The provided style string value ".concat(e," is not allowed.")):n.push(e)})):n.push(e.styles);var r=!1,a=null;return n.forEach((function(e){if(yB(e)){var t=e,n=t.easing;if(n&&(a=n,delete t.easing),!r)for(var i in t)if(t[i].toString().indexOf("{{")>=0){r=!0;break}}})),{type:6,styles:n,easing:a,offset:e.offset,containsDynamicStyles:r,options:null}}},{key:"_validateStyleAst",value:function(e,t){var n=this,r=t.currentAnimateTimings,a=t.currentTime,i=t.currentTime;r&&i>0&&(i-=r.duration+r.delay),e.styles.forEach((function(e){"string"!=typeof e&&Object.keys(e).forEach((function(r){if(n._driver.validateStyleProperty(r)){var o,s,u,l,c,h=t.collectedStyles[t.currentQuerySelector],f=h[r],d=!0;f&&(i!=a&&i>=f.startTime&&a<=f.endTime&&(t.errors.push('The CSS property "'.concat(r,'" that exists between the times of "').concat(f.startTime,'ms" and "').concat(f.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(i,'ms" and "').concat(a,'ms"')),d=!1),i=f.startTime),d&&(h[r]={startTime:i,endTime:a}),t.options&&(o=e[r],s=t.options,u=t.errors,l=s.params||{},(c=tB(o)).length&&c.forEach((function(e){l.hasOwnProperty(e)||u.push("Unable to resolve the local animation param ".concat(e," in the given list of values"))})))}else t.errors.push('The provided animation property "'.concat(r,'" is not a supported CSS property for animations'))}))}))}},{key:"visitKeyframes",value:function(e,t){var n=this,r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;var a=0,i=[],o=!1,s=!1,u=0,l=e.steps.map((function(e){var r=n._makeStyleAst(e,t),l=null!=r.offset?r.offset:function(e){if("string"==typeof e)return null;var t=null;if(Array.isArray(e))e.forEach((function(e){if(yB(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}}));else if(yB(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}return t}(r.styles),c=0;return null!=l&&(a++,c=r.offset=l),s=s||c<0||c>1,o=o||c<u,u=c,i.push(c),r}));s&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&t.errors.push("Please ensure that all keyframe offsets are in order");var c=e.steps.length,h=0;a>0&&a<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==a&&(h=1/(c-1));var f=c-1,d=t.currentTime,p=t.currentAnimateTimings,m=p.duration;return l.forEach((function(e,a){var o=h>0?a==f?1:h*a:i[a],s=o*m;t.currentTime=d+p.delay+s,p.duration=s,n._validateStyleAst(e,t),e.offset=o,r.styles.push(e)})),r}},{key:"visitReference",value:function(e,t){return{type:8,animation:uB(this,$z(e.animation),t),options:gB(e.options)}}},{key:"visitAnimateChild",value:function(e,t){return t.depCount++,{type:9,options:gB(e.options)}}},{key:"visitAnimateRef",value:function(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:gB(e.options)}}},{key:"visitQuery",value:function(e,t){var n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;var a=_slicedToArray(function(e){var t=!!e.split(/\s*,\s*/).find((function(e){return":self"==e}));return t&&(e=e.replace(dB,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,(function(e){return".ng-trigger-"+e.substr(1)})).replace(/:animating/g,".ng-animating"),t]}(e.selector),2),i=a[0],o=a[1];t.currentQuerySelector=n.length?n+" "+i:i,Az(t.collectedStyles,t.currentQuerySelector,{});var s=uB(this,$z(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:e.selector,options:gB(e.options)}}},{key:"visitStagger",value:function(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");var n="full"===e.timings?{duration:0,delay:0,easing:"full"}:Gz(e.timings,t.errors,!0);return{type:12,animation:uB(this,$z(e.animation),t),timings:n,options:null}}}]),e}(),vB=function e(t){_classCallCheck(this,e),this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function yB(e){return!Array.isArray(e)&&"object"==typeof e}function gB(e){var t;return e?(e=Jz(e)).params&&(e.params=(t=e.params)?Jz(t):null):e={},e}function _B(e,t,n){return{duration:e,delay:t,easing:n}}function bB(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:a,delay:i,totalTime:a+i,easing:o,subTimeline:s}}var xB=function(){function e(){_classCallCheck(this,e),this._map=new Map}return _createClass(e,[{key:"consume",value:function(e){var t=this._map.get(e);return t?this._map.delete(e):t=[],t}},{key:"append",value:function(e,t){var n,r=this._map.get(e);r||this._map.set(e,r=[]),(n=r).push.apply(n,_toConsumableArray(t))}},{key:"has",value:function(e){return this._map.has(e)}},{key:"clear",value:function(){this._map.clear()}}]),e}(),wB=new RegExp(":enter","g"),kB=new RegExp(":leave","g");function CB(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new SB).buildKeyframes(e,t,n,r,a,i,o,s,u,l)}var SB=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"buildKeyframes",value:function(e,t,n,r,a,i,o,s,u){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new xB;var c=new DB(e,t,u,r,a,l,[]);c.options=s,c.currentTimeline.setStyles([i],null,c.errors,s),uB(this,n,c);var h=c.timelines.filter((function(e){return e.containsAnimation()}));if(h.length&&Object.keys(o).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([o],null,c.errors,s)}return h.length?h.map((function(e){return e.buildKeyframes()})):[bB(t,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(e,t){}},{key:"visitState",value:function(e,t){}},{key:"visitTransition",value:function(e,t){}},{key:"visitAnimateChild",value:function(e,t){var n=t.subInstructions.consume(t.element);if(n){var r=t.createSubContext(e.options),a=t.currentTimeline.currentTime,i=this._visitSubInstructions(n,r,r.options);a!=i&&t.transformIntoNewTimeline(i)}t.previousNode=e}},{key:"visitAnimateRef",value:function(e,t){var n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}},{key:"_visitSubInstructions",value:function(e,t,n){var r=t.currentTimeline.currentTime,a=null!=n.duration?jz(n.duration):null,i=null!=n.delay?jz(n.delay):null;return 0!==a&&e.forEach((function(e){var n=t.appendInstructionToTimeline(e,a,i);r=Math.max(r,n.duration+n.delay)})),r}},{key:"visitReference",value:function(e,t){t.updateOptions(e.options,!0),uB(this,e.animation,t),t.previousNode=e}},{key:"visitSequence",value:function(e,t){var n=this,r=t.subContextCount,a=t,i=e.options;if(i&&(i.params||i.delay)&&((a=t.createSubContext(i)).transformIntoNewTimeline(),null!=i.delay)){6==a.previousNode.type&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=IB);var o=jz(i.delay);a.delayNextStep(o)}e.steps.length&&(e.steps.forEach((function(e){return uB(n,e,a)})),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>r&&a.transformIntoNewTimeline()),t.previousNode=e}},{key:"visitGroup",value:function(e,t){var n=this,r=[],a=t.currentTimeline.currentTime,i=e.options&&e.options.delay?jz(e.options.delay):0;e.steps.forEach((function(o){var s=t.createSubContext(e.options);i&&s.delayNextStep(i),uB(n,o,s),a=Math.max(a,s.currentTimeline.currentTime),r.push(s.currentTimeline)})),r.forEach((function(e){return t.currentTimeline.mergeTimelineCollectedStyles(e)})),t.transformIntoNewTimeline(a),t.previousNode=e}},{key:"_visitTiming",value:function(e,t){if(e.dynamic){var n=e.strValue;return Gz(t.params?nB(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}},{key:"visitAnimate",value:function(e,t){var n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());var a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(n.duration),this.visitStyle(a,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}},{key:"visitStyle",value:function(e,t){var n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var a=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(a):n.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}},{key:"visitKeyframes",value:function(e,t){var n=t.currentAnimateTimings,r=t.currentTimeline.duration,a=n.duration,i=t.createSubContext().currentTimeline;i.easing=n.easing,e.styles.forEach((function(e){i.forwardTime((e.offset||0)*a),i.setStyles(e.styles,e.easing,t.errors,t.options),i.applyStylesToKeyframe()})),t.currentTimeline.mergeTimelineCollectedStyles(i),t.transformIntoNewTimeline(r+a),t.previousNode=e}},{key:"visitQuery",value:function(e,t){var n=this,r=t.currentTimeline.currentTime,a=e.options||{},i=a.delay?jz(a.delay):0;i&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=IB);var o=r,s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!a.optional,t.errors);t.currentQueryTotal=s.length;var u=null;s.forEach((function(r,a){t.currentQueryIndex=a;var s=t.createSubContext(e.options,r);i&&s.delayNextStep(i),r===t.element&&(u=s.currentTimeline),uB(n,e.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)})),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}},{key:"visitStagger",value:function(e,t){var n=t.parentContext,r=t.currentTimeline,a=e.timings,i=Math.abs(a.duration),o=i*(t.currentQueryTotal-1),s=i*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":s=o-s;break;case"full":s=n.currentStaggerTime}var u=t.currentTimeline;s&&u.delayNextStep(s);var l=u.currentTime;uB(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)}}]),e}(),IB={},DB=function(){function e(t,n,r,a,i,o,s,u){_classCallCheck(this,e),this._driver=t,this.element=n,this.subInstructions=r,this._enterClassName=a,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=IB,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new AB(this._driver,n,0),s.push(this.currentTimeline)}return _createClass(e,[{key:"updateOptions",value:function(e,t){var n=this;if(e){var r=e,a=this.options;null!=r.duration&&(a.duration=jz(r.duration)),null!=r.delay&&(a.delay=jz(r.delay));var i=r.params;if(i){var o=a.params;o||(o=this.options.params={}),Object.keys(i).forEach((function(e){t&&o.hasOwnProperty(e)||(o[e]=nB(i[e],o,n.errors))}))}}}},{key:"_copyOptions",value:function(){var e={};if(this.options){var t=this.options.params;if(t){var n=e.params={};Object.keys(t).forEach((function(e){n[e]=t[e]}))}}return e}},{key:"createSubContext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=n||this.element,i=new e(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,r||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}},{key:"transformIntoNewTimeline",value:function(e){return this.previousNode=IB,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(e,t,n){var r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},a=new TB(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(a),r}},{key:"incrementTime",value:function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}},{key:"delayNextStep",value:function(e){e>0&&this.currentTimeline.delayNextStep(e)}},{key:"invokeQuery",value:function(e,t,n,r,a,i){var o=[];if(r&&o.push(this.element),e.length>0){e=(e=e.replace(wB,"."+this._enterClassName)).replace(kB,"."+this._leaveClassName);var s=this._driver.query(this.element,e,1!=n);0!==n&&(s=n<0?s.slice(s.length+n,s.length):s.slice(0,n)),o.push.apply(o,_toConsumableArray(s))}return a||0!=o.length||i.push('`query("'.concat(t,'")` returned zero elements. (Use `query("').concat(t,'", { optional: true })` if you wish to allow this.)')),o}},{key:"params",get:function(){return this.options.params}}]),e}(),AB=function(){function e(t,n,r,a){_classCallCheck(this,e),this._driver=t,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=a,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return _createClass(e,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"delayNextStep",value:function(e){var t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}},{key:"fork",value:function(t,n){return this.applyStylesToKeyframe(),new e(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}},{key:"_updateStyle",value:function(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(e){var t=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach((function(e){t._backFill[e]=t._globalTimelineStyles[e]||"*",t._currentKeyframe[e]="*"})),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(e,t,n,r){var a=this;t&&(this._previousKeyframe.easing=t);var i=r&&r.params||{},o=function(e,t){var n,r={};return e.forEach((function(e){"*"===e?(n=n||Object.keys(t)).forEach((function(e){r[e]="*"})):Xz(e,!1,r)})),r}(e,this._globalTimelineStyles);Object.keys(o).forEach((function(e){var t=nB(o[e],i,n);a._pendingStyles[e]=t,a._localTimelineStyles.hasOwnProperty(e)||(a._backFill[e]=a._globalTimelineStyles.hasOwnProperty(e)?a._globalTimelineStyles[e]:"*"),a._updateStyle(e,t)}))}},{key:"applyStylesToKeyframe",value:function(){var e=this,t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach((function(n){e._currentKeyframe[n]=t[n]})),Object.keys(this._localTimelineStyles).forEach((function(t){e._currentKeyframe.hasOwnProperty(t)||(e._currentKeyframe[t]=e._localTimelineStyles[t])})))}},{key:"snapshotCurrentStyles",value:function(){var e=this;Object.keys(this._localTimelineStyles).forEach((function(t){var n=e._localTimelineStyles[t];e._pendingStyles[t]=n,e._updateStyle(t,n)}))}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"mergeTimelineCollectedStyles",value:function(e){var t=this;Object.keys(e._styleSummary).forEach((function(n){var r=t._styleSummary[n],a=e._styleSummary[n];(!r||a.time>r.time)&&t._updateStyle(n,a.value)}))}},{key:"buildKeyframes",value:function(){var e=this;this.applyStylesToKeyframe();var t=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,a=[];this._keyframes.forEach((function(i,o){var s=Xz(i,!0);Object.keys(s).forEach((function(e){var r=s[e];"!"==r?t.add(e):"*"==r&&n.add(e)})),r||(s.offset=o/e.duration),a.push(s)}));var i=t.size?rB(t.values()):[],o=n.size?rB(n.values()):[];if(r){var s=a[0],u=Jz(s);s.offset=0,u.offset=1,a=[s,u]}return bB(this.element,a,i,o,this.duration,this.startTime,this.easing,!1)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"properties",get:function(){var e=[];for(var t in this._currentKeyframe)e.push(t);return e}}]),e}(),TB=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o,s){var u,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return _classCallCheck(this,n),(u=t.call(this,e,r,s.delay)).element=r,u.keyframes=a,u.preStyleProps=i,u.postStyleProps=o,u._stretchStartingKeyframe=l,u.timings={duration:s.duration,delay:s.delay,easing:s.easing},u}return _createClass(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var e=this.keyframes,t=this.timings,n=t.delay,r=t.duration,a=t.easing;if(this._stretchStartingKeyframe&&n){var i=[],o=r+n,s=n/o,u=Xz(e[0],!1);u.offset=0,i.push(u);var l=Xz(e[0],!1);l.offset=EB(s),i.push(l);for(var c=e.length-1,h=1;h<=c;h++){var f=Xz(e[h],!1);f.offset=EB((n+f.offset*r)/o),i.push(f)}r=o,n=0,a="",e=i}return bB(this.element,e,this.preStyleProps,this.postStyleProps,r,n,a,!0)}}]),n}(AB);function EB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,t-1);return Math.round(e*n)/n}var RB=function e(){_classCallCheck(this,e)},OB=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"normalizePropertyName",value:function(e,t){return iB(e)}},{key:"normalizeStyleValue",value:function(e,t,n,r){var a="",i=n.toString().trim();if(MB[t]&&0!==n&&"0"!==n)if("number"==typeof n)a="px";else{var o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&r.push("Please provide a CSS unit value for ".concat(e,":").concat(n))}return i+a}}]),n}(RB),MB=function(e){var t={};return e.forEach((function(e){return t[e]=!0})),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function NB(e,t,n,r,a,i,o,s,u,l,c,h,f){return{type:0,element:e,triggerName:t,isRemovalTransition:a,fromState:n,fromStyles:i,toState:r,toStyles:o,timelines:s,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:h,errors:f}}var PB={},FB=function(){function e(t,n,r){_classCallCheck(this,e),this._triggerName=t,this.ast=n,this._stateStyles=r}return _createClass(e,[{key:"match",value:function(e,t,n,r){return function(e,t,n,r,a){return e.some((function(e){return e(t,n,r,a)}))}(this.ast.matchers,e,t,n,r)}},{key:"buildStyles",value:function(e,t,n){var r=this._stateStyles["*"],a=this._stateStyles[e],i=r?r.buildStyles(t,n):{};return a?a.buildStyles(t,n):i}},{key:"build",value:function(e,t,n,r,a,i,o,s,u,l){var c=[],h=this.ast.options&&this.ast.options.params||PB,f=this.buildStyles(n,o&&o.params||PB,c),d=s&&s.params||PB,p=this.buildStyles(r,d,c),m=new Set,v=new Map,y=new Map,g="void"===r,_={params:Object.assign(Object.assign({},h),d)},b=l?[]:CB(e,t,this.ast.animation,a,i,f,p,_,u,c),x=0;if(b.forEach((function(e){x=Math.max(e.duration+e.delay,x)})),c.length)return NB(t,this._triggerName,n,r,g,f,p,[],[],v,y,x,c);b.forEach((function(e){var n=e.element,r=Az(v,n,{});e.preStyleProps.forEach((function(e){return r[e]=!0}));var a=Az(y,n,{});e.postStyleProps.forEach((function(e){return a[e]=!0})),n!==t&&m.add(n)}));var w=rB(m.values());return NB(t,this._triggerName,n,r,g,f,p,b,w,v,y,x)}}]),e}(),LB=function(){function e(t,n){_classCallCheck(this,e),this.styles=t,this.defaultParams=n}return _createClass(e,[{key:"buildStyles",value:function(e,t){var n={},r=Jz(this.defaultParams);return Object.keys(e).forEach((function(t){var n=e[t];null!=n&&(r[t]=n)})),this.styles.styles.forEach((function(e){if("string"!=typeof e){var a=e;Object.keys(a).forEach((function(e){var i=a[e];i.length>1&&(i=nB(i,r,t)),n[e]=i}))}})),n}}]),e}(),zB=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.name=t,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach((function(e){r.states[e.name]=new LB(e.style,e.options&&e.options.params||{})})),BB(this.states,"true","1"),BB(this.states,"false","0"),n.transitions.forEach((function(e){r.transitionFactories.push(new FB(t,e,r.states))})),this.fallbackTransition=new FB(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,t){return!0}],options:null,queryCount:0,depCount:0},this.states)}return _createClass(e,[{key:"matchTransition",value:function(e,t,n,r){return this.transitionFactories.find((function(a){return a.match(e,t,n,r)}))||null}},{key:"matchStyles",value:function(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}},{key:"containsQueries",get:function(){return this.ast.queryCount>0}}]),e}();function BB(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}var WB=new xB,qB=function(){function e(t,n,r){_classCallCheck(this,e),this.bodyNode=t,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return _createClass(e,[{key:"register",value:function(e,t){var n=[],r=pB(this._driver,t,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: ".concat(n.join("\n")));this._animations[e]=r}},{key:"_buildPlayer",value:function(e,t,n){var r=e.element,a=Cz(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,a,e.duration,e.delay,e.easing,[],!0)}},{key:"create",value:function(e,t){var n,r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[],o=this._animations[e],s=new Map;if(o?(n=CB(this._driver,t,o,"ng-enter","ng-leave",{},{},a,WB,i)).forEach((function(e){var t=Az(s,e.element,{});e.postStyleProps.forEach((function(e){return t[e]=null}))})):(i.push("The requested animation doesn't exist or has already been destroyed"),n=[]),i.length)throw new Error("Unable to create the animation due to the following errors: ".concat(i.join("\n")));s.forEach((function(e,t){Object.keys(e).forEach((function(n){e[n]=r._driver.computeStyle(t,n,"*")}))}));var u=kz(n.map((function(e){var t=s.get(e.element);return r._buildPlayer(e,{},t)})));return this._playersById[e]=u,u.onDestroy((function(){return r.destroy(e)})),this.players.push(u),u}},{key:"destroy",value:function(e){var t=this._getPlayer(e);t.destroy(),delete this._playersById[e];var n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(e){var t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by ".concat(e));return t}},{key:"listen",value:function(e,t,n,r){var a=Dz(t,"","","");return Sz(this._getPlayer(e),n,a,r),function(){}}},{key:"command",value:function(e,t,n,r){if("register"!=n)if("create"!=n){var a=this._getPlayer(e);switch(n){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}else this.create(e,t,r[0]||{});else this.register(e,r[0])}}]),e}(),VB=[],UB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},jB={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},HB=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck(this,e),this.namespaceId=n;var r,a=t&&t.hasOwnProperty("value");if(this.value=null!=(r=a?t.value:t)?r:null,a){var i=Jz(t);delete i.value,this.options=i}else this.options={};this.options.params||(this.options.params={})}return _createClass(e,[{key:"absorbOptions",value:function(e){var t=e.params;if(t){var n=this.options.params;Object.keys(t).forEach((function(e){null==n[e]&&(n[e]=t[e])}))}}},{key:"params",get:function(){return this.options.params}}]),e}(),GB=new HB("void"),JB=function(){function e(t,n,r){_classCallCheck(this,e),this.id=t,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,eW(n,this._hostClassName)}return _createClass(e,[{key:"listen",value:function(e,t,n,r){var a,i=this;if(!this._triggers.hasOwnProperty(t))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(t,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(t,'" because the provided event is undefined!'));if("start"!=(a=n)&&"done"!=a)throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(t,'" is not supported!'));var o=Az(this._elementListeners,e,[]),s={name:t,phase:n,callback:r};o.push(s);var u=Az(this._engine.statesByElement,e,{});return u.hasOwnProperty(t)||(eW(e,"ng-trigger"),eW(e,"ng-trigger-"+t),u[t]=GB),function(){i._engine.afterFlush((function(){var e=o.indexOf(s);e>=0&&o.splice(e,1),i._triggers[t]||delete u[t]}))}}},{key:"register",value:function(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}},{key:"_getTrigger",value:function(e){var t=this._triggers[e];if(!t)throw new Error('The provided animation trigger "'.concat(e,'" has not been registered!'));return t}},{key:"trigger",value:function(e,t,n){var r=this,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=this._getTrigger(t),o=new KB(this.id,t,e),s=this._engine.statesByElement.get(e);s||(eW(e,"ng-trigger"),eW(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,s={}));var u=s[t],l=new HB(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),s[t]=l,u||(u=GB),"void"===l.value||u.value!==l.value){var c=Az(this._engine.playersByElement,e,[]);c.forEach((function(e){e.namespaceId==r.id&&e.triggerName==t&&e.queued&&e.destroy()}));var h=i.matchTransition(u.value,l.value,e,l.params),f=!1;if(!h){if(!a)return;h=i.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:u,toState:l,player:o,isFallbackTransition:f}),f||(eW(e,"ng-animate-queued"),o.onStart((function(){tW(e,"ng-animate-queued")}))),o.onDone((function(){var t=r.players.indexOf(o);t>=0&&r.players.splice(t,1);var n=r._engine.playersByElement.get(e);if(n){var a=n.indexOf(o);a>=0&&n.splice(a,1)}})),this.players.push(o),c.push(o),o}if(!function(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(var a=0;a<n.length;a++){var i=n[a];if(!t.hasOwnProperty(i)||e[i]!==t[i])return!1}return!0}(u.params,l.params)){var d=[],p=i.matchStyles(u.value,u.params,d),m=i.matchStyles(l.value,l.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush((function(){Qz(e,p),Yz(e,m)}))}}},{key:"deregister",value:function(e){var t=this;delete this._triggers[e],this._engine.statesByElement.forEach((function(t,n){delete t[e]})),this._elementListeners.forEach((function(n,r){t._elementListeners.set(r,n.filter((function(t){return t.name!=e})))}))}},{key:"clearElementCache",value:function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var t=this._engine.playersByElement.get(e);t&&(t.forEach((function(e){return e.destroy()})),this._engine.playersByElement.delete(e))}},{key:"_signalRemovalForInnerTriggers",value:function(e,t){var n=this,r=this._engine.driver.query(e,".ng-trigger",!0);r.forEach((function(e){if(!e.__ng_removed){var r=n._engine.fetchNamespacesByElement(e);r.size?r.forEach((function(n){return n.triggerLeaveAnimation(e,t,!1,!0)})):n.clearElementCache(e)}})),this._engine.afterFlushAnimationsDone((function(){return r.forEach((function(e){return n.clearElementCache(e)}))}))}},{key:"triggerLeaveAnimation",value:function(e,t,n,r){var a=this,i=this._engine.statesByElement.get(e);if(i){var o=[];if(Object.keys(i).forEach((function(t){if(a._triggers[t]){var n=a.trigger(e,t,"void",r);n&&o.push(n)}})),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&kz(o).onDone((function(){return a._engine.processLeaveNode(e)})),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(e){var t=this,n=this._elementListeners.get(e);if(n){var r=new Set;n.forEach((function(n){var a=n.name;if(!r.has(a)){r.add(a);var i=t._triggers[a].fallbackTransition,o=t._engine.statesByElement.get(e)[a]||GB,s=new HB("void"),u=new KB(t.id,a,e);t._engine.totalQueuedPlayers++,t._queue.push({element:e,triggerName:a,transition:i,fromState:o,toState:s,player:u,isFallbackTransition:!0})}}))}}},{key:"removeNode",value:function(e,t){var n=this,r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),!this.triggerLeaveAnimation(e,t,!0)){var a=!1;if(r.totalAnimations){var i=r.players.length?r.playersByQueriedElement.get(e):[];if(i&&i.length)a=!0;else for(var o=e;o=o.parentNode;)if(r.statesByElement.get(o)){a=!0;break}}if(this.prepareLeaveAnimationListeners(e),a)r.markElementAsRemoved(this.id,e,!1,t);else{var s=e.__ng_removed;s&&s!==UB||(r.afterFlush((function(){return n.clearElementCache(e)})),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}}},{key:"insertNode",value:function(e,t){eW(e,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(e){var t=this,n=[];return this._queue.forEach((function(r){var a=r.player;if(!a.destroyed){var i=r.element,o=t._elementListeners.get(i);o&&o.forEach((function(t){if(t.name==r.triggerName){var n=Dz(i,r.triggerName,r.fromState.value,r.toState.value);n._data=e,Sz(r.player,t.phase,n,t.callback)}})),a.markedForDestroy?t._engine.afterFlush((function(){a.destroy()})):n.push(r)}})),this._queue=[],n.sort((function(e,n){var r=e.transition.ast.depCount,a=n.transition.ast.depCount;return 0==r||0==a?r-a:t._engine.driver.containsElement(e.element,n.element)?1:-1}))}},{key:"destroy",value:function(e){this.players.forEach((function(e){return e.destroy()})),this._signalRemovalForInnerTriggers(this.hostElement,e)}},{key:"elementContainsData",value:function(e){var t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find((function(t){return t.element===e}))||t}}]),e}(),XB=function(){function e(t,n,r){_classCallCheck(this,e),this.bodyNode=t,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,t){}}return _createClass(e,[{key:"_onRemovalComplete",value:function(e,t){this.onRemovalComplete(e,t)}},{key:"createNamespace",value:function(e,t){var n=new JB(e,t,this);return t.parentNode?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}},{key:"_balanceNamespaceList",value:function(e,t){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,a=n;a>=0;a--)if(this.driver.containsElement(this._namespaceList[a].hostElement,t)){this._namespaceList.splice(a+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}},{key:"register",value:function(e,t){var n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}},{key:"registerTrigger",value:function(e,t,n){var r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}},{key:"destroy",value:function(e,t){var n=this;if(e){var r=this._fetchNamespace(e);this.afterFlush((function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[e];var t=n._namespaceList.indexOf(r);t>=0&&n._namespaceList.splice(t,1)})),this.afterFlushAnimationsDone((function(){return r.destroy(t)}))}}},{key:"_fetchNamespace",value:function(e){return this._namespaceLookup[e]}},{key:"fetchNamespacesByElement",value:function(e){var t=new Set,n=this.statesByElement.get(e);if(n)for(var r=Object.keys(n),a=0;a<r.length;a++){var i=n[r[a]].namespaceId;if(i){var o=this._fetchNamespace(i);o&&t.add(o)}}return t}},{key:"trigger",value:function(e,t,n,r){if(ZB(t)){var a=this._fetchNamespace(e);if(a)return a.trigger(t,n,r),!0}return!1}},{key:"insertNode",value:function(e,t,n,r){if(ZB(t)){var a=t.__ng_removed;if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;var i=this.collectedLeaveElements.indexOf(t);i>=0&&this.collectedLeaveElements.splice(i,1)}if(e){var o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}}},{key:"collectEnterElement",value:function(e){this.collectedEnterElements.push(e)}},{key:"markElementAsDisabled",value:function(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),eW(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),tW(e,"ng-animate-disabled"))}},{key:"removeNode",value:function(e,t,n,r){if(ZB(t)){var a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){var i=this.namespacesByHostElement.get(t);i&&i.id!==e&&i.removeNode(t,r)}}else this._onRemovalComplete(t,r)}},{key:"markElementAsRemoved",value:function(e,t,n,r){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(e,t,n,r,a){return ZB(t)?this._fetchNamespace(e).listen(t,n,r,a):function(){}}},{key:"_buildInstruction",value:function(e,t,n,r,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,a)}},{key:"destroyInnerAnimations",value:function(e){var t=this,n=this.driver.query(e,".ng-trigger",!0);n.forEach((function(e){return t.destroyActiveAnimationsForElement(e)})),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,".ng-animating",!0)).forEach((function(e){return t.finishActiveQueriedAnimationOnElement(e)}))}},{key:"destroyActiveAnimationsForElement",value:function(e){var t=this.playersByElement.get(e);t&&t.forEach((function(e){e.queued?e.markedForDestroy=!0:e.destroy()}))}},{key:"finishActiveQueriedAnimationOnElement",value:function(e){var t=this.playersByQueriedElement.get(e);t&&t.forEach((function(e){return e.finish()}))}},{key:"whenRenderingDone",value:function(){var e=this;return new Promise((function(t){if(e.players.length)return kz(e.players).onDone((function(){return t()}));t()}))}},{key:"processLeaveNode",value:function(e){var t=this,n=e.__ng_removed;if(n&&n.setForRemoval){if(e.__ng_removed=UB,n.namespaceId){this.destroyInnerAnimations(e);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach((function(e){t.markElementAsDisabled(e,!1)}))}},{key:"flush",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((function(t,n){return e._balanceNamespaceList(t,n)})),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)eW(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var a=[];try{n=this._flushAnimations(a,t)}finally{for(var i=0;i<a.length;i++)a[i]()}}else for(var o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach((function(e){return e()})),this._flushFns=[],this._whenQuietFns.length){var s=this._whenQuietFns;this._whenQuietFns=[],n.length?kz(n).onDone((function(){s.forEach((function(e){return e()}))})):s.forEach((function(e){return e()}))}}},{key:"reportError",value:function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(e.join("\n")))}},{key:"_flushAnimations",value:function(e,t){var n=this,r=new xB,a=[],i=new Map,o=[],s=new Map,u=new Map,l=new Map,c=new Set;this.disabledNodes.forEach((function(e){c.add(e);for(var t=n.driver.query(e,".ng-animate-queued",!0),r=0;r<t.length;r++)c.add(t[r])}));var h=this.bodyNode,f=Array.from(this.statesByElement.keys()),d=$B(f,this.collectedEnterElements),p=new Map,m=0;d.forEach((function(e,t){var n="ng-enter"+m++;p.set(t,n),e.forEach((function(e){return eW(e,n)}))}));for(var v=[],y=new Set,g=new Set,_=0;_<this.collectedLeaveElements.length;_++){var b=this.collectedLeaveElements[_],x=b.__ng_removed;x&&x.setForRemoval&&(v.push(b),y.add(b),x.hasAnimation?this.driver.query(b,".ng-star-inserted",!0).forEach((function(e){return y.add(e)})):g.add(b))}var w=new Map,k=$B(f,Array.from(y));k.forEach((function(e,t){var n="ng-leave"+m++;w.set(t,n),e.forEach((function(e){return eW(e,n)}))})),e.push((function(){d.forEach((function(e,t){var n=p.get(t);e.forEach((function(e){return tW(e,n)}))})),k.forEach((function(e,t){var n=w.get(t);e.forEach((function(e){return tW(e,n)}))})),v.forEach((function(e){n.processLeaveNode(e)}))}));for(var C=[],S=[],I=this._namespaceList.length-1;I>=0;I--)this._namespaceList[I].drainQueuedTransitions(t).forEach((function(e){var t=e.player,i=e.element;if(C.push(t),n.collectedEnterElements.length){var c=i.__ng_removed;if(c&&c.setForMove)return void t.destroy()}var f=!h||!n.driver.containsElement(h,i),d=w.get(i),m=p.get(i),v=n._buildInstruction(e,r,m,d,f);if(!v.errors||!v.errors.length)return f||e.isFallbackTransition?(t.onStart((function(){return Qz(i,v.fromStyles)})),t.onDestroy((function(){return Yz(i,v.toStyles)})),void a.push(t)):(v.timelines.forEach((function(e){return e.stretchStartingKeyframe=!0})),r.append(i,v.timelines),o.push({instruction:v,player:t,element:i}),v.queriedElements.forEach((function(e){return Az(s,e,[]).push(t)})),v.preStyleProps.forEach((function(e,t){var n=Object.keys(e);if(n.length){var r=u.get(t);r||u.set(t,r=new Set),n.forEach((function(e){return r.add(e)}))}})),void v.postStyleProps.forEach((function(e,t){var n=Object.keys(e),r=l.get(t);r||l.set(t,r=new Set),n.forEach((function(e){return r.add(e)}))})));S.push(v)}));if(S.length){var D=[];S.forEach((function(e){D.push("@".concat(e.triggerName," has failed due to:\n")),e.errors.forEach((function(e){return D.push("- ".concat(e,"\n"))}))})),C.forEach((function(e){return e.destroy()})),this.reportError(D)}var A=new Map,T=new Map;o.forEach((function(e){var t=e.element;r.has(t)&&(T.set(t,t),n._beforeAnimationBuild(e.player.namespaceId,e.instruction,A))})),a.forEach((function(e){var t=e.element;n._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach((function(e){Az(A,t,[]).push(e),e.destroy()}))}));var E=v.filter((function(e){return rW(e,u,l)})),R=new Map;QB(R,this.driver,g,l,"*").forEach((function(e){rW(e,u,l)&&E.push(e)}));var O=new Map;d.forEach((function(e,t){QB(O,n.driver,new Set(e),u,"!")})),E.forEach((function(e){var t=R.get(e),n=O.get(e);R.set(e,Object.assign(Object.assign({},t),n))}));var M=[],N=[],P={};o.forEach((function(e){var t=e.element,o=e.player,s=e.instruction;if(r.has(t)){if(c.has(t))return o.onDestroy((function(){return Yz(t,s.toStyles)})),o.disabled=!0,o.overrideTotalTime(s.totalTime),void a.push(o);var u=P;if(T.size>1){for(var l=t,h=[];l=l.parentNode;){var f=T.get(l);if(f){u=f;break}h.push(l)}h.forEach((function(e){return T.set(e,u)}))}var d=n._buildAnimation(o.namespaceId,s,A,i,O,R);if(o.setRealPlayer(d),u===P)M.push(o);else{var p=n.playersByElement.get(u);p&&p.length&&(o.parentPlayer=kz(p)),a.push(o)}}else Qz(t,s.fromStyles),o.onDestroy((function(){return Yz(t,s.toStyles)})),N.push(o),c.has(t)&&a.push(o)})),N.forEach((function(e){var t=i.get(e.element);if(t&&t.length){var n=kz(t);e.setRealPlayer(n)}})),a.forEach((function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()}));for(var F=0;F<v.length;F++){var L=v[F],z=L.__ng_removed;if(tW(L,"ng-leave"),!z||!z.hasAnimation){var B=[];if(s.size){var W=s.get(L);W&&W.length&&B.push.apply(B,_toConsumableArray(W));for(var q=this.driver.query(L,".ng-animating",!0),V=0;V<q.length;V++){var U=s.get(q[V]);U&&U.length&&B.push.apply(B,_toConsumableArray(U))}}var j=B.filter((function(e){return!e.destroyed}));j.length?nW(this,L,j):this.processLeaveNode(L)}}return v.length=0,M.forEach((function(e){n.players.push(e),e.onDone((function(){e.destroy();var t=n.players.indexOf(e);n.players.splice(t,1)})),e.play()})),M}},{key:"elementContainsData",value:function(e,t){var n=!1,r=t.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}},{key:"afterFlush",value:function(e){this._flushFns.push(e)}},{key:"afterFlushAnimationsDone",value:function(e){this._whenQuietFns.push(e)}},{key:"_getPreviousPlayers",value:function(e,t,n,r,a){var i=[];if(t){var o=this.playersByQueriedElement.get(e);o&&(i=o)}else{var s=this.playersByElement.get(e);if(s){var u=!a||"void"==a;s.forEach((function(e){e.queued||(u||e.triggerName==r)&&i.push(e)}))}}return(n||r)&&(i=i.filter((function(e){return!(n&&n!=e.namespaceId||r&&r!=e.triggerName)}))),i}},{key:"_beforeAnimationBuild",value:function(e,t,n){var r,a=this,i=t.element,o=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:t.triggerName,u=_createForOfIteratorHelper(t.timelines);try{var l=function(){var e=r.value.element,u=e!==i,l=Az(n,e,[]);a._getPreviousPlayers(e,u,o,s,t.toState).forEach((function(e){var t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)}))};for(u.s();!(r=u.n()).done;)l()}catch(s7){u.e(s7)}finally{u.f()}Qz(i,t.fromStyles)}},{key:"_buildAnimation",value:function(e,t,n,r,a,i){var o=this,s=t.triggerName,u=t.element,l=[],c=new Set,h=new Set,f=t.timelines.map((function(t){var f=t.element;c.add(f);var d=f.__ng_removed;if(d&&d.removedBeforeQueried)return new bz(t.duration,t.delay);var p,m,v=f!==u,y=(p=(n.get(f)||VB).map((function(e){return e.getRealPlayer()})),m=[],function e(t,n){for(var r=0;r<t.length;r++){var a=t[r];a instanceof xz?e(a.players,n):n.push(a)}}(p,m),m).filter((function(e){return!!e.element&&e.element===f})),g=a.get(f),_=i.get(f),b=Cz(0,o._normalizer,0,t.keyframes,g,_),x=o._buildPlayer(t,b,y);if(t.subTimeline&&r&&h.add(f),v){var w=new KB(e,s,f);w.setRealPlayer(x),l.push(w)}return x}));l.forEach((function(e){Az(o.playersByQueriedElement,e.element,[]).push(e),e.onDone((function(){return function(e,t,n){var r;if(e instanceof Map){if(r=e.get(t)){if(r.length){var a=r.indexOf(n);r.splice(a,1)}0==r.length&&e.delete(t)}}else if(r=e[t]){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&delete e[t]}return r}(o.playersByQueriedElement,e.element,e)}))})),c.forEach((function(e){return eW(e,"ng-animating")}));var d=kz(f);return d.onDestroy((function(){c.forEach((function(e){return tW(e,"ng-animating")})),Yz(u,t.toStyles)})),h.forEach((function(e){Az(r,e,[]).push(d)})),d}},{key:"_buildPlayer",value:function(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new bz(e.duration,e.delay)}},{key:"queuedPlayers",get:function(){var e=[];return this._namespaceList.forEach((function(t){t.players.forEach((function(t){t.queued&&e.push(t)}))})),e}}]),e}(),KB=function(){function e(t,n,r){_classCallCheck(this,e),this.namespaceId=t,this.triggerName=n,this.element=r,this._player=new bz,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return _createClass(e,[{key:"setRealPlayer",value:function(e){var t=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach((function(n){t._queuedCallbacks[n].forEach((function(t){return Sz(e,n,void 0,t)}))})),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(e){this.totalTime=e}},{key:"syncPlayerEvents",value:function(e){var t=this,n=this._player;n.triggerCallback&&e.onStart((function(){return n.triggerCallback("start")})),e.onDone((function(){return t.finish()})),e.onDestroy((function(){return t.destroy()}))}},{key:"_queueEvent",value:function(e,t){Az(this._queuedCallbacks,e,[]).push(t)}},{key:"onDone",value:function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}},{key:"onStart",value:function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}},{key:"onDestroy",value:function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(e){this.queued||this._player.setPosition(e)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(e){var t=this._player;t.triggerCallback&&t.triggerCallback(e)}}]),e}();function ZB(e){return e&&1===e.nodeType}function YB(e,t){var n=e.style.display;return e.style.display=null!=t?t:"none",n}function QB(e,t,n,r,a){var i=[];n.forEach((function(e){return i.push(YB(e))}));var o=[];r.forEach((function(n,r){var i={};n.forEach((function(e){var n=i[e]=t.computeStyle(r,e,a);n&&0!=n.length||(r.__ng_removed=jB,o.push(r))})),e.set(r,i)}));var s=0;return n.forEach((function(e){return YB(e,i[s++])})),o}function $B(e,t){var n=new Map;if(e.forEach((function(e){return n.set(e,[])})),0==t.length)return n;var r=new Set(t),a=new Map;return t.forEach((function(e){var t=function e(t){if(!t)return 1;var i=a.get(t);if(i)return i;var o=t.parentNode;return i=n.has(o)?o:r.has(o)?1:e(o),a.set(t,i),i}(e);1!==t&&n.get(t).push(e)})),n}function eW(e,t){if(e.classList)e.classList.add(t);else{var n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function tW(e,t){if(e.classList)e.classList.remove(t);else{var n=e.$$classes;n&&delete n[t]}}function nW(e,t,n){kz(n).onDone((function(){return e.processLeaveNode(t)}))}function rW(e,t,n){var r=n.get(e);if(!r)return!1;var a=t.get(e);return a?r.forEach((function(e){return a.add(e)})):t.set(e,r),n.delete(e),!0}var aW=function(){function e(t,n,r){var a=this;_classCallCheck(this,e),this.bodyNode=t,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(e,t){},this._transitionEngine=new XB(t,n,r),this._timelineEngine=new qB(t,n,r),this._transitionEngine.onRemovalComplete=function(e,t){return a.onRemovalComplete(e,t)}}return _createClass(e,[{key:"registerTrigger",value:function(e,t,n,r,a){var i=e+"-"+r,o=this._triggerCache[i];if(!o){var s=[],u=pB(this._driver,a,s);if(s.length)throw new Error('The animation trigger "'.concat(r,'" has failed to build due to the following errors:\n - ').concat(s.join("\n - ")));o=function(e,t){return new zB(e,t)}(r,u),this._triggerCache[i]=o}this._transitionEngine.registerTrigger(t,r,o)}},{key:"register",value:function(e,t){this._transitionEngine.register(e,t)}},{key:"destroy",value:function(e,t){this._transitionEngine.destroy(e,t)}},{key:"onInsert",value:function(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}},{key:"onRemove",value:function(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}},{key:"disableAnimations",value:function(e,t){this._transitionEngine.markElementAsDisabled(e,t)}},{key:"process",value:function(e,t,n,r){if("@"==n.charAt(0)){var a=_slicedToArray(Tz(n),2),i=a[0],o=a[1];this._timelineEngine.command(i,t,o,r)}else this._transitionEngine.trigger(e,t,n,r)}},{key:"listen",value:function(e,t,n,r,a){if("@"==n.charAt(0)){var i=_slicedToArray(Tz(n),2),o=i[0],s=i[1];return this._timelineEngine.listen(o,t,s,a)}return this._transitionEngine.listen(e,t,n,r,a)}},{key:"flush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(e)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}}]),e}();function iW(e,t){var n=null,r=null;return Array.isArray(t)&&t.length?(n=sW(t[0]),t.length>1&&(r=sW(t[t.length-1]))):t&&(n=sW(t)),n||r?new oW(e,n,r):null}var oW=function(){var e=function(){function e(t,n,r){_classCallCheck(this,e),this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;var a=e.initialStylesByElement.get(t);a||e.initialStylesByElement.set(t,a={}),this._initialStyles=a}return _createClass(e,[{key:"start",value:function(){this._state<1&&(this._startStyles&&Yz(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(Yz(this._element,this._initialStyles),this._endStyles&&(Yz(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Qz(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Qz(this._element,this._endStyles),this._endStyles=null),Yz(this._element,this._initialStyles),this._state=3)}}]),e}();return e.initialStylesByElement=new WeakMap,e}();function sW(e){for(var t=null,n=Object.keys(e),r=0;r<n.length;r++){var a=n[r];uW(a)&&((t=t||{})[a]=e[a])}return t}function uW(e){return"display"===e||"position"===e}var lW=function(){function e(t,n,r,a,i,o,s){var u=this;_classCallCheck(this,e),this._element=t,this._name=n,this._duration=r,this._delay=a,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(e){return u._handleCallback(e)}}return _createClass(e,[{key:"apply",value:function(){var e,t,n;e=this._element,t="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(n=mW(e,"").trim()).length&&(function(e,t){for(var n=0;n<e.length;n++)e.charAt(n)}(n),t="".concat(n,", ").concat(t)),pW(e,"",t),dW(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){cW(this._element,this._name,"paused")}},{key:"resume",value:function(){cW(this._element,this._name,"running")}},{key:"setPosition",value:function(e){var t=hW(this._element,this._name);this._position=e*this._duration,pW(this._element,"Delay","-".concat(this._position,"ms"),t)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(e){var t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),dW(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){var e,t,n,r;this._destroyed||(this._destroyed=!0,this.finish(),e=this._element,t=this._name,n=mW(e,"").split(","),(r=fW(n,t))>=0&&(n.splice(r,1),pW(e,"",n.join(","))))}}]),e}();function cW(e,t,n){pW(e,"PlayState",n,hW(e,t))}function hW(e,t){var n=mW(e,"");return n.indexOf(",")>0?fW(n.split(","),t):fW([n],t)}function fW(e,t){for(var n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function dW(e,t,n){n?e.removeEventListener("animationend",t):e.addEventListener("animationend",t)}function pW(e,t,n,r){var a="animation"+t;if(null!=r){var i=e.style[a];if(i.length){var o=i.split(",");o[r]=n,n=o.join(",")}}e.style[a]=n}function mW(e,t){return e.style["animation"+t]}var vW=function(){function e(t,n,r,a,i,o,s,u){_classCallCheck(this,e),this.element=t,this.keyframes=n,this.animationName=r,this._duration=a,this._delay=i,this._finalStyles=s,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=a+i,this._buildStyler()}return _createClass(e,[{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(e){this._styler.setPosition(e)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var e=this;this._styler=new lW(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",(function(){return e.finish()}))}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}},{key:"beforeDestroy",value:function(){var e=this;this.init();var t={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach((function(r){"offset"!=r&&(t[r]=n?e._finalStyles[r]:lB(e.element,r))}))}this.currentSnapshot=t}}]),e}(),yW=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).element=e,a._startingStyles={},a.__initialized=!1,a._styles=Wz(r),a}return _createClass(n,[{key:"init",value:function(){var e=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach((function(t){e._startingStyles[t]=e.element.style[t]})),_get(_getPrototypeOf(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var e=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach((function(t){return e.element.style.setProperty(t,e._styles[t])})),_get(_getPrototypeOf(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var e=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach((function(t){var n=e._startingStyles[t];n?e.element.style.setProperty(t,n):e.element.style.removeProperty(t)})),this._startingStyles=null,_get(_getPrototypeOf(n.prototype),"destroy",this).call(this))}}]),n}(bz),gW=function(){function e(){_classCallCheck(this,e),this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return _createClass(e,[{key:"validateStyleProperty",value:function(e){return Fz(e)}},{key:"matchesElement",value:function(e,t){return Lz(e,t)}},{key:"containsElement",value:function(e,t){return zz(e,t)}},{key:"query",value:function(e,t,n){return Bz(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"buildKeyframeElement",value:function(e,t,n){n=n.map((function(e){return Wz(e)}));var r="@keyframes ".concat(t," {\n"),a="";n.forEach((function(e){a=" ";var t=parseFloat(e.offset);r+="".concat(a).concat(100*t,"% {\n"),a+=" ",Object.keys(e).forEach((function(t){var n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+="".concat(a,"animation-timing-function: ").concat(n,";\n")));default:return void(r+="".concat(a).concat(t,": ").concat(n,";\n"))}})),r+="".concat(a,"}\n")})),r+="}\n";var i=document.createElement("style");return i.innerHTML=r,i}},{key:"animate",value:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6?arguments[6]:void 0;o&&this._notifyFaultyScrubber();var s=i.filter((function(e){return e instanceof vW})),u={};oB(n,r)&&s.forEach((function(e){var t=e.currentSnapshot;Object.keys(t).forEach((function(e){return u[e]=t[e]}))}));var l=function(e){var t={};return e&&(Array.isArray(e)?e:[e]).forEach((function(e){Object.keys(e).forEach((function(n){"offset"!=n&&"easing"!=n&&(t[n]=e[n])}))})),t}(t=sB(e,t,u));if(0==n)return new yW(e,l);var c="gen_css_kf_".concat(this._count++),h=this.buildKeyframeElement(e,c,t);document.querySelector("head").appendChild(h);var f=iW(e,t),d=new vW(e,t,c,n,r,a,l,f);return d.onDestroy((function(){var e;(e=h).parentNode.removeChild(e)})),d}},{key:"_notifyFaultyScrubber",value:function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}]),e}(),_W=function(){function e(t,n,r,a){_classCallCheck(this,e),this.element=t,this.keyframes=n,this.options=r,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return _createClass(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var e=this;if(!this._initialized){this._initialized=!0;var t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",(function(){return e._onFinish()}))}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(e,t,n){return e.animate(t,n)}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"setPosition",value:function(e){this.domPlayer.currentTime=e*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"beforeDestroy",value:function(){var e=this,t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach((function(n){"offset"!=n&&(t[n]=e._finished?e._finalKeyframe[n]:lB(e.element,n))})),this.currentSnapshot=t}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}},{key:"totalTime",get:function(){return this._delay+this._duration}}]),e}(),bW=function(){function e(){_classCallCheck(this,e),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(xW().toString()),this._cssKeyframesDriver=new gW}return _createClass(e,[{key:"validateStyleProperty",value:function(e){return Fz(e)}},{key:"matchesElement",value:function(e,t){return Lz(e,t)}},{key:"containsElement",value:function(e,t){return zz(e,t)}},{key:"query",value:function(e,t,n){return Bz(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"overrideWebAnimationsSupport",value:function(e){this._isNativeImpl=e}},{key:"animate",value:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6?arguments[6]:void 0;if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,a,i);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};a&&(s.easing=a);var u={},l=i.filter((function(e){return e instanceof _W}));oB(n,r)&&l.forEach((function(e){var t=e.currentSnapshot;Object.keys(t).forEach((function(e){return u[e]=t[e]}))}));var c=iW(e,t=sB(e,t=t.map((function(e){return Xz(e,!1)})),u));return new _W(e,t,s,c)}}]),e}();function xW(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var wW,kW=((wW=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this))._nextAnimationId=0,a._renderer=e.createRenderer(r.body,{id:"0",encapsulation:Jt.None,styles:[],data:{animation:[]}}),a}return _createClass(n,[{key:"build",value:function(e){var t=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(e)?mz(e):e;return IW(this._renderer,null,t,"register",[n]),new CW(t,this._renderer)}}]),n}(fz)).\u0275fac=function(e){return new(e||wW)(Ot(wu),Ot(Fc))},wW.\u0275prov=Xe({token:wW,factory:wW.\u0275fac}),wW),CW=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this))._id=e,a._renderer=r,a}return _createClass(n,[{key:"create",value:function(e,t){return new SW(this._id,e,t||{},this._renderer)}}]),n}(function(){return function e(){_classCallCheck(this,e)}}()),SW=function(){function e(t,n,r,a){_classCallCheck(this,e),this.id=t,this.element=n,this._renderer=a,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return _createClass(e,[{key:"_listen",value:function(e,t){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(e),t)}},{key:"_command",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return IW(this._renderer,this.element,this.id,e,n)}},{key:"onDone",value:function(e){this._listen("done",e)}},{key:"onStart",value:function(e){this._listen("start",e)}},{key:"onDestroy",value:function(e){this._listen("destroy",e)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(e){this._command("setPosition",e)}},{key:"getPosition",value:function(){return 0}}]),e}();function IW(e,t,n,r,a){return e.setProperty(t,"@@".concat(n,":").concat(r),a)}var DW,AW,TW,EW=((DW=function(){function e(t,n,r){_classCallCheck(this,e),this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(e,t){t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}return _createClass(e,[{key:"createRenderer",value:function(e,t){var n=this,r=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){var a=this._rendererCache.get(r);return a||(a=new RW("",r,this.engine),this._rendererCache.set(r,a)),a}var i=t.id,o=t.id+"-"+this._currentId;return this._currentId++,this.engine.register(o,e),t.data.animation.forEach((function t(r){Array.isArray(r)?r.forEach(t):n.engine.registerTrigger(i,o,e,r.name,r)})),new OW(this,o,r,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var e=this;this.promise.then((function(){e._microtaskId++}))}},{key:"scheduleListenerCallback",value:function(e,t,n){var r=this;e>=0&&e<this._microtaskId?this._zone.run((function(){return t(n)})):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then((function(){r._zone.run((function(){r._animationCallbacksBuffer.forEach((function(e){var t=_slicedToArray(e,2);(0,t[0])(t[1])})),r._animationCallbacksBuffer=[]}))})),this._animationCallbacksBuffer.push([t,n]))}},{key:"end",value:function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular((function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)})),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),e}()).\u0275fac=function(e){return new(e||DW)(Ot(wu),Ot(aW),Ot(rc))},DW.\u0275prov=Xe({token:DW,factory:DW.\u0275fac}),DW),RW=function(){function e(t,n,r){_classCallCheck(this,e),this.namespaceId=t,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(e){return n.destroyNode(e)}:null}return _createClass(e,[{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(e,t){return this.delegate.createElement(e,t)}},{key:"createComment",value:function(e){return this.delegate.createComment(e)}},{key:"createText",value:function(e){return this.delegate.createText(e)}},{key:"appendChild",value:function(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}},{key:"insertBefore",value:function(e,t,n){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,!0)}},{key:"removeChild",value:function(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}},{key:"selectRootElement",value:function(e,t){return this.delegate.selectRootElement(e,t)}},{key:"parentNode",value:function(e){return this.delegate.parentNode(e)}},{key:"nextSibling",value:function(e){return this.delegate.nextSibling(e)}},{key:"setAttribute",value:function(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}},{key:"removeAttribute",value:function(e,t,n){this.delegate.removeAttribute(e,t,n)}},{key:"addClass",value:function(e,t){this.delegate.addClass(e,t)}},{key:"removeClass",value:function(e,t){this.delegate.removeClass(e,t)}},{key:"setStyle",value:function(e,t,n,r){this.delegate.setStyle(e,t,n,r)}},{key:"removeStyle",value:function(e,t,n){this.delegate.removeStyle(e,t,n)}},{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)&&"@.disabled"==t?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}},{key:"setValue",value:function(e,t){this.delegate.setValue(e,t)}},{key:"listen",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"disableAnimations",value:function(e,t){this.engine.disableAnimations(e,t)}},{key:"data",get:function(){return this.delegate.data}}]),e}(),OW=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,r,a,i)).factory=e,o.namespaceId=r,o}return _createClass(n,[{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&"@.disabled"==t?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}},{key:"listen",value:function(e,t,n){var r,a,i=this;if("@"==t.charAt(0)){var o,s=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),u=t.substr(1),l="";return"@"!=u.charAt(0)&&(a=(r=u).indexOf("."),u=(o=_slicedToArray([r.substring(0,a),r.substr(a+1)],2))[0],l=o[1]),this.engine.listen(this.namespaceId,s,u,l,(function(e){i.factory.scheduleListenerCallback(e._data||-1,n,e)}))}return this.delegate.listen(e,t,n)}}]),n}(RW),MW=((AW=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){return _classCallCheck(this,n),t.call(this,e.body,r,a)}return n}(aW)).\u0275fac=function(e){return new(e||AW)(Ot(Fc),Ot(Uz),Ot(RB))},AW.\u0275prov=Xe({token:AW,factory:AW.\u0275fac}),AW),NW=new kt("AnimationModuleType"),PW=[{provide:Uz,useFactory:function(){return"function"==typeof xW()?new bW:new gW}},{provide:NW,useValue:"BrowserAnimations"},{provide:fz,useClass:kW},{provide:RB,useFactory:function(){return new OB}},{provide:aW,useClass:MW},{provide:wu,useFactory:function(e,t,n){return new EW(e,t,n)},deps:[sf,aW,rc]}],FW=((TW=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:TW}),TW.\u0275inj=Ke({factory:function(e){return new(e||TW)},providers:PW,imports:[xf]}),TW),LW=["*",[["mat-option"],["ng-container"]]],zW=["*","mat-option, ng-container"];function BW(e,t){if(1&e&&hs(0,"mat-pseudo-checkbox",3),2&e){var n=ws();ss("state",n.selected?"checked":"unchecked")("disabled",n.disabled)}}var WW,qW=["*"],VW=new Du("9.2.4"),UW=new kt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),jW=((WW=function(){function e(t,n,r){_classCallCheck(this,e),this._hasDoneGlobalChecks=!1,this._document=r,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=n,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}return _createClass(e,[{key:"_getDocument",value:function(){var e=this._document||document;return"object"==typeof e&&e?e:null}},{key:"_getWindow",value:function(){var e=this._getDocument(),t=(null==e?void 0:e.defaultView)||window;return"object"==typeof t&&t?t:null}},{key:"_checksAreEnabled",value:function(){return ra()&&!this._isTestEnv()}},{key:"_isTestEnv",value:function(){var e=this._getWindow();return e&&(e.__karma__||e.jasmine)}},{key:"_checkDoctypeIsDefined",value:function(){var e=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),t=this._getDocument();e&&t&&!t.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}},{key:"_checkThemeIsPresent",value:function(){var e=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,t=this._getDocument();if(!e&&t&&t.body&&"function"==typeof getComputedStyle){var n=t.createElement("div");n.classList.add("mat-theme-loaded-marker"),t.body.appendChild(n);var r=getComputedStyle(n);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),t.body.removeChild(n)}}},{key:"_checkCdkVersionMatch",value:function(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&VW.full!==hz.full&&console.warn("The Angular Material version ("+VW.full+") does not match the Angular CDK version ("+hz.full+").\nPlease ensure the versions of these two packages exactly match.")}}]),e}()).\u0275mod=tn({type:WW}),WW.\u0275inj=Ke({factory:function(e){return new(e||WW)(Ot(lz),Ot(UW,8),Ot(Fc,8))},imports:[[_L],_L]}),WW);function HW(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._disabled=!1,e}return _createClass(n,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=VF(e)}}]),n}(e)}function GW(e,t){return function(e){_inherits(r,e);var n=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).color=t,e}return _createClass(r,[{key:"color",get:function(){return this._color},set:function(e){var n=e||t;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-".concat(this._color)),n&&this._elementRef.nativeElement.classList.add("mat-".concat(n)),this._color=n)}}]),r}(e)}function JW(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._disableRipple=!1,e}return _createClass(n,[{key:"disableRipple",get:function(){return this._disableRipple},set:function(e){this._disableRipple=VF(e)}}]),n}(e)}function XW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e){_inherits(r,e);var n=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i)))._tabIndex=t,e}return _createClass(r,[{key:"tabIndex",get:function(){return this.disabled?-1:this._tabIndex},set:function(e){this._tabIndex=null!=e?e:t}}]),r}(e)}function KW(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).errorState=!1,e.stateChanges=new le,e}return _createClass(n,[{key:"updateErrorState",value:function(){var e=this.errorState,t=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);t!==e&&(this.errorState=t,this.stateChanges.next())}}]),n}(e)}var ZW,YW=new kt("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return Mt(jl)}}),QW=function(){function e(){_classCallCheck(this,e),this._localeChanges=new le}return _createClass(e,[{key:"deserialize",value:function(e){return null==e||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}},{key:"setLocale",value:function(e){this.locale=e,this._localeChanges.next()}},{key:"compareDate",value:function(e,t){return this.getYear(e)-this.getYear(t)||this.getMonth(e)-this.getMonth(t)||this.getDate(e)-this.getDate(t)}},{key:"sameDate",value:function(e,t){if(e&&t){var n=this.isValid(e),r=this.isValid(t);return n&&r?!this.compareDate(e,t):n==r}return e==t}},{key:"clampDate",value:function(e,t,n){return t&&this.compareDate(e,t)<0?t:n&&this.compareDate(e,n)>0?n:e}},{key:"localeChanges",get:function(){return this._localeChanges}}]),e}(),$W=new kt("mat-date-formats");try{ZW="undefined"!=typeof Intl}catch(u7){ZW=!1}var eq={long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"]},tq=aq(31,(function(e){return String(e+1)})),nq={long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"]},rq=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function aq(e,t){for(var n=Array(e),r=0;r<e;r++)n[r]=t(r);return n}var iq,oq,sq,uq,lq,cq,hq,fq,dq,pq,mq,vq=((oq=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a,i;return _classCallCheck(this,n),(i=t.call(this)).useUtcForDisplay=!0,_get((a=_assertThisInitialized(i),_getPrototypeOf(n.prototype)),"setLocale",a).call(a,e),i.useUtcForDisplay=!r.TRIDENT,i._clampDate=r.TRIDENT||r.EDGE,i}return _createClass(n,[{key:"getYear",value:function(e){return e.getFullYear()}},{key:"getMonth",value:function(e){return e.getMonth()}},{key:"getDate",value:function(e){return e.getDate()}},{key:"getDayOfWeek",value:function(e){return e.getDay()}},{key:"getMonthNames",value:function(e){var t=this;if(ZW){var n=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return aq(12,(function(e){return t._stripDirectionalityCharacters(t._format(n,new Date(2017,e,1)))}))}return eq[e]}},{key:"getDateNames",value:function(){var e=this;if(ZW){var t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return aq(31,(function(n){return e._stripDirectionalityCharacters(e._format(t,new Date(2017,0,n+1)))}))}return tq}},{key:"getDayOfWeekNames",value:function(e){var t=this;if(ZW){var n=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return aq(7,(function(e){return t._stripDirectionalityCharacters(t._format(n,new Date(2017,0,e+1)))}))}return nq[e]}},{key:"getYearName",value:function(e){if(ZW){var t=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._stripDirectionalityCharacters(this._format(t,e))}return String(this.getYear(e))}},{key:"getFirstDayOfWeek",value:function(){return 0}},{key:"getNumDaysInMonth",value:function(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}},{key:"clone",value:function(e){return new Date(e.getTime())}},{key:"createDate",value:function(e,t,n){if(t<0||t>11)throw Error('Invalid month index "'.concat(t,'". Month index has to be between 0 and 11.'));if(n<1)throw Error('Invalid date "'.concat(n,'". Date has to be greater than 0.'));var r=this._createDateWithOverflow(e,t,n);if(r.getMonth()!=t)throw Error('Invalid date "'.concat(n,'" for month with index "').concat(t,'".'));return r}},{key:"today",value:function(){return new Date}},{key:"parse",value:function(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}},{key:"format",value:function(e,t){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");if(ZW){this._clampDate&&(e.getFullYear()<1||e.getFullYear()>9999)&&(e=this.clone(e)).setFullYear(Math.max(1,Math.min(9999,e.getFullYear()))),t=Object.assign(Object.assign({},t),{timeZone:"utc"});var n=new Intl.DateTimeFormat(this.locale,t);return this._stripDirectionalityCharacters(this._format(n,e))}return this._stripDirectionalityCharacters(e.toDateString())}},{key:"addCalendarYears",value:function(e,t){return this.addCalendarMonths(e,12*t)}},{key:"addCalendarMonths",value:function(e,t){var n=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+t,this.getDate(e));return this.getMonth(n)!=((this.getMonth(e)+t)%12+12)%12&&(n=this._createDateWithOverflow(this.getYear(n),this.getMonth(n),0)),n}},{key:"addCalendarDays",value:function(e,t){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+t)}},{key:"toIso8601",value:function(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}},{key:"deserialize",value:function(e){if("string"==typeof e){if(!e)return null;if(rq.test(e)){var t=new Date(e);if(this.isValid(t))return t}}return _get(_getPrototypeOf(n.prototype),"deserialize",this).call(this,e)}},{key:"isDateInstance",value:function(e){return e instanceof Date}},{key:"isValid",value:function(e){return!isNaN(e.getTime())}},{key:"invalid",value:function(){return new Date(NaN)}},{key:"_createDateWithOverflow",value:function(e,t,n){var r=new Date(e,t,n);return e>=0&&e<100&&r.setFullYear(this.getYear(r)-1900),r}},{key:"_2digit",value:function(e){return("00"+e).slice(-2)}},{key:"_stripDirectionalityCharacters",value:function(e){return e.replace(/[\u200e\u200f]/g,"")}},{key:"_format",value:function(e,t){var n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.format(n)}}]),n}(QW)).\u0275fac=function(e){return new(e||oq)(Ot(YW,8),Ot(PF))},oq.\u0275prov=Xe({token:oq,factory:oq.\u0275fac}),oq),yq=((iq=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:iq}),iq.\u0275inj=Ke({factory:function(e){return new(e||iq)},providers:[{provide:QW,useClass:vq}],imports:[[FF]]}),iq),gq={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}},_q=((lq=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:lq}),lq.\u0275inj=Ke({factory:function(e){return new(e||lq)},providers:[{provide:$W,useValue:gq}],imports:[[yq]]}),lq),bq=((uq=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isErrorState",value:function(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}}]),e}()).\u0275fac=function(e){return new(e||uq)},uq.\u0275prov=Xe({factory:function(){return new uq},token:uq,providedIn:"root"}),uq),xq=((sq=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:sq}),sq.\u0275inj=Ke({factory:function(e){return new(e||sq)},imports:[[jW],jW]}),sq),wq=function(){function e(t,n,r){_classCallCheck(this,e),this._renderer=t,this.element=n,this.config=r,this.state=3}return _createClass(e,[{key:"fadeOut",value:function(){this._renderer.fadeOutRipple(this)}}]),e}(),kq={enterDuration:450,exitDuration:400},Cq=BF({passive:!0}),Sq=["mousedown","touchstart"],Iq=["mouseup","mouseleave","touchend","touchcancel"],Dq=function(){function e(t,n,r,a){_classCallCheck(this,e),this._target=t,this._ngZone=n,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,a.isBrowser&&(this._containerElement=GF(r))}return _createClass(e,[{key:"fadeInRipple",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},kq),r.animation);r.centered&&(e=a.left+a.width/2,t=a.top+a.height/2);var o=r.radius||function(e,t,n){var r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),a=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+a*a)}(e,t,a),s=e-a.left,u=t-a.top,l=i.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left="".concat(s-o,"px"),c.style.top="".concat(u-o,"px"),c.style.height="".concat(2*o,"px"),c.style.width="".concat(2*o,"px"),null!=r.color&&(c.style.backgroundColor=r.color),c.style.transitionDuration="".concat(l,"ms"),this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";var h=new wq(this,c,r);return h.state=0,this._activeRipples.add(h),r.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone((function(){var e=h===n._mostRecentTransientRipple;h.state=1,r.persistent||e&&n._isPointerDown||h.fadeOut()}),l),h}},{key:"fadeOutRipple",value:function(e){var t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),t){var n=e.element,r=Object.assign(Object.assign({},kq),e.config.animation);n.style.transitionDuration="".concat(r.exitDuration,"ms"),n.style.opacity="0",e.state=2,this._runTimeoutOutsideZone((function(){e.state=3,n.parentNode.removeChild(n)}),r.exitDuration)}}},{key:"fadeOutAll",value:function(){this._activeRipples.forEach((function(e){return e.fadeOut()}))}},{key:"setupTriggerEvents",value:function(e){var t=GF(e);t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(Sq))}},{key:"handleEvent",value:function(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Iq),this._pointerUpEventsRegistered=!0)}},{key:"_onMousedown",value:function(e){var t=$L(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||t||n||(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}},{key:"_onTouchStart",value:function(e){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;for(var t=e.changedTouches,n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}},{key:"_onPointerUp",value:function(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach((function(e){!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()})))}},{key:"_runTimeoutOutsideZone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._ngZone.runOutsideAngular((function(){return setTimeout(e,t)}))}},{key:"_registerEvents",value:function(e){var t=this;this._ngZone.runOutsideAngular((function(){e.forEach((function(e){t._triggerElement.addEventListener(e,t,Cq)}))}))}},{key:"_removeTriggerEvents",value:function(){var e=this;this._triggerElement&&(Sq.forEach((function(t){e._triggerElement.removeEventListener(t,e,Cq)})),this._pointerUpEventsRegistered&&Iq.forEach((function(t){e._triggerElement.removeEventListener(t,e,Cq)})))}}]),e}(),Aq=new kt("mat-ripple-global-options"),Tq=((dq=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new Dq(this,n,t,r)}return _createClass(e,[{key:"ngOnInit",value:function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}},{key:"ngOnDestroy",value:function(){this._rippleRenderer._removeTriggerEvents()}},{key:"fadeOutAll",value:function(){this._rippleRenderer.fadeOutAll()}},{key:"_setupTriggerEventsIfEnabled",value:function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}},{key:"launch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this._setupTriggerEventsIfEnabled()}},{key:"trigger",get:function(){return this._trigger||this._elementRef.nativeElement},set:function(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}},{key:"rippleConfig",get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}},{key:"rippleDisabled",get:function(){return this.disabled||!!this._globalOptions.disabled}}]),e}()).\u0275fac=function(e){return new(e||dq)(as(bu),as(rc),as(PF),as(Aq,8),as(NW,8))},dq.\u0275dir=rn({type:dq,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,t){2&e&&Ns("mat-ripple-unbounded",t.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),dq),Eq=((fq=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:fq}),fq.\u0275inj=Ke({factory:function(e){return new(e||fq)},imports:[[jW,FF],jW]}),fq),Rq=((hq=function e(t){_classCallCheck(this,e),this._animationMode=t,this.state="unchecked",this.disabled=!1}).\u0275fac=function(e){return new(e||hq)(as(NW,8))},hq.\u0275cmp=Yt({type:hq,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,t){2&e&&Ns("mat-pseudo-checkbox-indeterminate","indeterminate"===t.state)("mat-pseudo-checkbox-checked","checked"===t.state)("mat-pseudo-checkbox-disabled",t.disabled)("_mat-animation-noopable","NoopAnimations"===t._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,t){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),hq),Oq=((cq=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:cq}),cq.\u0275inj=Ke({factory:function(e){return new(e||cq)}}),cq),Mq=HW((function e(){_classCallCheck(this,e)})),Nq=0,Pq=((pq=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments))._labelId="mat-optgroup-label-".concat(Nq++),e}return n}(Mq)).\u0275fac=function(e){return Fq(e||pq)},pq.\u0275cmp=Yt({type:pq,selectors:[["mat-optgroup"]],hostAttrs:["role","group",1,"mat-optgroup"],hostVars:4,hostBindings:function(e,t){2&e&&(es("aria-disabled",t.disabled.toString())("aria-labelledby",t._labelId),Ns("mat-optgroup-disabled",t.disabled))},inputs:{disabled:"disabled",label:"label"},exportAs:["matOptgroup"],features:[eu],ngContentSelectors:zW,decls:4,vars:2,consts:[[1,"mat-optgroup-label",3,"id"]],template:function(e,t){1&e&&(Cs(LW),ls(0,"label",0),Gs(1),Ss(2),cs(),Ss(3,1)),2&e&&(ss("id",t._labelId),Ka(1),Xs("",t.label," "))},styles:[".mat-optgroup-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup-label[disabled]{cursor:default}[dir=rtl] .mat-optgroup-label{text-align:right}.mat-optgroup-label .mat-icon{margin-right:16px;vertical-align:middle}.mat-optgroup-label .mat-icon svg{vertical-align:top}[dir=rtl] .mat-optgroup-label .mat-icon{margin-left:16px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),pq),Fq=qr(Pq),Lq=0,zq=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,e),this.source=t,this.isUserInput=n},Bq=new kt("MAT_OPTION_PARENT_COMPONENT"),Wq=((mq=function(){function e(t,n,r,a){_classCallCheck(this,e),this._element=t,this._changeDetectorRef=n,this._parent=r,this.group=a,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-".concat(Lq++),this.onSelectionChange=new fl,this._stateChanges=new le}return _createClass(e,[{key:"select",value:function(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}},{key:"deselect",value:function(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}},{key:"focus",value:function(e,t){var n=this._getHostElement();"function"==typeof n.focus&&n.focus(t)}},{key:"setActiveStyles",value:function(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}},{key:"setInactiveStyles",value:function(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}},{key:"getLabel",value:function(){return this.viewValue}},{key:"_handleKeydown",value:function(e){13!==e.keyCode&&32!==e.keyCode||IL(e)||(this._selectViaInteraction(),e.preventDefault())}},{key:"_selectViaInteraction",value:function(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}},{key:"_getAriaSelected",value:function(){return this.selected||!this.multiple&&null}},{key:"_getTabIndex",value:function(){return this.disabled?"-1":"0"}},{key:"_getHostElement",value:function(){return this._element.nativeElement}},{key:"ngAfterViewChecked",value:function(){if(this._selected){var e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"_emitSelectionChangeEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.onSelectionChange.emit(new zq(this,e))}},{key:"multiple",get:function(){return this._parent&&this._parent.multiple}},{key:"selected",get:function(){return this._selected}},{key:"disabled",get:function(){return this.group&&this.group.disabled||this._disabled},set:function(e){this._disabled=VF(e)}},{key:"disableRipple",get:function(){return this._parent&&this._parent.disableRipple}},{key:"active",get:function(){return this._active}},{key:"viewValue",get:function(){return(this._getHostElement().textContent||"").trim()}}]),e}()).\u0275fac=function(e){return new(e||mq)(as(bu),as(Co),as(Bq,8),as(Pq,8))},mq.\u0275cmp=Yt({type:mq,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,t){1&e&&ys("click",(function(){return t._selectViaInteraction()}))("keydown",(function(e){return t._handleKeydown(e)})),2&e&&(Ys("id",t.id),es("tabindex",t._getTabIndex())("aria-selected",t._getAriaSelected())("aria-disabled",t.disabled.toString()),Ns("mat-selected",t.selected)("mat-option-multiple",t.multiple)("mat-active",t.active)("mat-option-disabled",t.disabled))},inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:qW,decls:4,vars:3,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"]],template:function(e,t){1&e&&(Cs(),ns(0,BW,1,2,"mat-pseudo-checkbox",0),ls(1,"span",1),Ss(2),cs(),hs(3,"div",2)),2&e&&(ss("ngIf",t.multiple),Ka(3),ss("matRippleTrigger",t._getHostElement())("matRippleDisabled",t.disabled||t.disableRipple))},directives:[yh,Tq,Rq],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.cdk-high-contrast-active .mat-option .mat-option-ripple{opacity:.5}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),mq);function qq(e,t,n){if(n.length){for(var r=t.toArray(),a=n.toArray(),i=0,o=0;o<e+1;o++)r[o].group&&r[o].group===a[i]&&i++;return i}return 0}var Vq,Uq=((Vq=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:Vq}),Vq.\u0275inj=Ke({factory:function(e){return new(e||Vq)},imports:[[Eq,Lh,Oq]]}),Vq),jq=new kt("mat-label-global-options"),Hq=["*"];function Gq(e,t){if(1&e){var n=ps();ls(0,"div",2),ys("click",(function(){return Mn(n),ws()._onBackdropClicked()})),cs()}2&e&&Ns("mat-drawer-shown",ws()._isShowingBackdrop())}function Jq(e,t){1&e&&(ls(0,"mat-drawer-content"),Ss(1,2),cs())}var Xq=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Kq=["mat-drawer","mat-drawer-content","*"],Zq={transformDrawer:dz("transform",[yz("open, open-instant",vz({transform:"none",visibility:"visible"})),yz("void",vz({"box-shadow":"none",visibility:"hidden"})),gz("void => open-instant",pz("0ms")),gz("void <=> open, open-instant => void",pz("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};function Yq(e){throw Error("A drawer was already declared for 'position=\"".concat(e,"\"'"))}var Qq,$q,eV,tV,nV,rV,aV,iV=new kt("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),oV=new kt("MAT_DRAWER_CONTAINER"),sV=((tV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o){var s;return _classCallCheck(this,n),(s=t.call(this,a,i,o))._changeDetectorRef=e,s._container=r,s}return _createClass(n,[{key:"ngAfterContentInit",value:function(){var e=this;this._container._contentMarginChanges.subscribe((function(){e._changeDetectorRef.markForCheck()}))}}]),n}(wL)).\u0275fac=function(e){return new(e||tV)(as(Co),as(st((function(){return lV}))),as(bu),as(xL),as(rc))},tV.\u0275cmp=Yt({type:tV,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,t){2&e&&Ms("margin-left",t._container._contentMargins.left,"px")("margin-right",t._container._contentMargins.right,"px")},features:[eu],ngContentSelectors:Hq,decls:1,vars:0,template:function(e,t){1&e&&(Cs(),Ss(0))},encapsulation:2,changeDetection:0}),tV),uV=((eV=function(){function e(t,n,r,a,i,o,s){var u=this;_classCallCheck(this,e),this._elementRef=t,this._focusTrapFactory=n,this._focusMonitor=r,this._platform=a,this._ngZone=i,this._doc=o,this._container=s,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new le,this._animationEnd=new le,this._animationState="void",this.openedChange=new fl(!0),this._destroyed=new le,this.onPositionChanged=new fl,this._modeChanged=new le,this.openedChange.subscribe((function(e){e?(u._doc&&(u._elementFocusedBeforeDrawerWasOpened=u._doc.activeElement),u._takeFocus()):u._restoreFocus()})),this._ngZone.runOutsideAngular((function(){JF(u._elementRef.nativeElement,"keydown").pipe(Of((function(e){return 27===e.keyCode&&!u.disableClose&&!IL(e)})),sL(u._destroyed)).subscribe((function(e){return u._ngZone.run((function(){u.close(),e.stopPropagation(),e.preventDefault()}))}))})),this._animationEnd.pipe(YF((function(e,t){return e.fromState===t.fromState&&e.toState===t.toState}))).subscribe((function(e){var t=e.fromState,n=e.toState;(0===n.indexOf("open")&&"void"===t||"void"===n&&0===t.indexOf("open"))&&u.openedChange.emit(u._opened)}))}return _createClass(e,[{key:"_takeFocus",value:function(){var e=this;this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then((function(t){t||"function"!=typeof e._elementRef.nativeElement.focus||e._elementRef.nativeElement.focus()}))}},{key:"_restoreFocus",value:function(){if(this.autoFocus){var e=this._doc&&this._doc.activeElement;e&&this._elementRef.nativeElement.contains(e)&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur()),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null}}},{key:"ngAfterContentInit",value:function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}},{key:"ngAfterContentChecked",value:function(){this._platform.isBrowser&&(this._enableAnimations=!0)}},{key:"ngOnDestroy",value:function(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(e){return this.toggle(!0,e)}},{key:"close",value:function(){return this.toggle(!1)}},{key:"toggle",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.opened,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"program";return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=n):(this._animationState="void",this._restoreFocus()),this._updateFocusTrapState(),new Promise((function(t){e.openedChange.pipe(Zf(1)).subscribe((function(e){return t(e?"open":"close")}))}))}},{key:"_updateFocusTrapState",value:function(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}},{key:"_animationStartListener",value:function(e){this._animationStarted.next(e)}},{key:"_animationDoneListener",value:function(e){this._animationEnd.next(e)}},{key:"position",get:function(){return this._position},set:function(e){(e="end"===e?"end":"start")!=this._position&&(this._position=e,this.onPositionChanged.emit())}},{key:"mode",get:function(){return this._mode},set:function(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}},{key:"disableClose",get:function(){return this._disableClose},set:function(e){this._disableClose=VF(e)}},{key:"autoFocus",get:function(){var e=this._autoFocus;return null==e?"side"!==this.mode:e},set:function(e){this._autoFocus=VF(e)}},{key:"opened",get:function(){return this._opened},set:function(e){this.toggle(VF(e))}},{key:"_openedStream",get:function(){return this.openedChange.pipe(Of((function(e){return e})),be((function(){})))}},{key:"openedStart",get:function(){return this._animationStarted.pipe(Of((function(e){return e.fromState!==e.toState&&0===e.toState.indexOf("open")})),be((function(){})))}},{key:"_closedStream",get:function(){return this.openedChange.pipe(Of((function(e){return!e})),be((function(){})))}},{key:"closedStart",get:function(){return this._animationStarted.pipe(Of((function(e){return e.fromState!==e.toState&&"void"===e.toState})),be((function(){})))}},{key:"_width",get:function(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}}]),e}()).\u0275fac=function(e){return new(e||eV)(as(bu),as(XL),as(rz),as(PF),as(rc),as(Fc,8),as(oV,8))},eV.\u0275cmp=Yt({type:eV,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,t){1&e&&gs("@transform.start",(function(e){return t._animationStartListener(e)}))("@transform.done",(function(e){return t._animationDoneListener(e)})),2&e&&(es("align",null),Qs("@transform",t._animationState),Ns("mat-drawer-end","end"===t.position)("mat-drawer-over","over"===t.mode)("mat-drawer-push","push"===t.mode)("mat-drawer-side","side"===t.mode)("mat-drawer-opened",t.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",onPositionChanged:"positionChanged",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart"},exportAs:["matDrawer"],ngContentSelectors:Hq,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(e,t){1&e&&(Cs(),ls(0,"div",0),Ss(1),cs())},encapsulation:2,data:{animation:[Zq.transformDrawer]},changeDetection:0}),eV),lV=(($q=function(){function e(t,n,r,a,i){var o=this,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6?arguments[6]:void 0;_classCallCheck(this,e),this._dir=t,this._element=n,this._ngZone=r,this._changeDetectorRef=a,this._animationMode=u,this._drawers=new pl,this.backdropClick=new fl,this._destroyed=new le,this._doCheckSubject=new le,this._contentMargins={left:null,right:null},this._contentMarginChanges=new le,t&&t.change.pipe(sL(this._destroyed)).subscribe((function(){o._validateDrawers(),o.updateContentMargins()})),i.change().pipe(sL(this._destroyed)).subscribe((function(){return o.updateContentMargins()})),this._autosize=s}return _createClass(e,[{key:"ngAfterContentInit",value:function(){var e=this;this._allDrawers.changes.pipe(od(this._allDrawers),sL(this._destroyed)).subscribe((function(t){e._drawers.reset(t.filter((function(t){return!t._container||t._container===e}))),e._drawers.notifyOnChanges()})),this._drawers.changes.pipe(od(null)).subscribe((function(){e._validateDrawers(),e._drawers.forEach((function(t){e._watchDrawerToggle(t),e._watchDrawerPosition(t),e._watchDrawerMode(t)})),(!e._drawers.length||e._isDrawerOpen(e._start)||e._isDrawerOpen(e._end))&&e.updateContentMargins(),e._changeDetectorRef.markForCheck()})),this._doCheckSubject.pipe(DL(10),sL(this._destroyed)).subscribe((function(){return e.updateContentMargins()}))}},{key:"ngOnDestroy",value:function(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(){this._drawers.forEach((function(e){return e.open()}))}},{key:"close",value:function(){this._drawers.forEach((function(e){return e.close()}))}},{key:"updateContentMargins",value:function(){var e=this,t=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._width;else if("push"==this._left.mode){var r=this._left._width;t+=r,n-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._width;else if("push"==this._right.mode){var a=this._right._width;n+=a,t-=a}n=n||null,(t=t||null)===this._contentMargins.left&&n===this._contentMargins.right||(this._contentMargins={left:t,right:n},this._ngZone.run((function(){return e._contentMarginChanges.next(e._contentMargins)})))}},{key:"ngDoCheck",value:function(){var e=this;this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular((function(){return e._doCheckSubject.next()}))}},{key:"_watchDrawerToggle",value:function(e){var t=this;e._animationStarted.pipe(Of((function(e){return e.fromState!==e.toState})),sL(this._drawers.changes)).subscribe((function(e){"open-instant"!==e.toState&&"NoopAnimations"!==t._animationMode&&t._element.nativeElement.classList.add("mat-drawer-transition"),t.updateContentMargins(),t._changeDetectorRef.markForCheck()})),"side"!==e.mode&&e.openedChange.pipe(sL(this._drawers.changes)).subscribe((function(){return t._setContainerClass(e.opened)}))}},{key:"_watchDrawerPosition",value:function(e){var t=this;e&&e.onPositionChanged.pipe(sL(this._drawers.changes)).subscribe((function(){t._ngZone.onMicrotaskEmpty.asObservable().pipe(Zf(1)).subscribe((function(){t._validateDrawers()}))}))}},{key:"_watchDrawerMode",value:function(e){var t=this;e&&e._modeChanged.pipe(sL(Ee(this._drawers.changes,this._destroyed))).subscribe((function(){t.updateContentMargins(),t._changeDetectorRef.markForCheck()}))}},{key:"_setContainerClass",value:function(e){var t=this._element.nativeElement.classList,n="mat-drawer-container-has-open";e?t.add(n):t.remove(n)}},{key:"_validateDrawers",value:function(){var e=this;this._start=this._end=null,this._drawers.forEach((function(t){"end"==t.position?(null!=e._end&&Yq("end"),e._end=t):(null!=e._start&&Yq("start"),e._start=t)})),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}},{key:"_isPushed",value:function(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}},{key:"_onBackdropClicked",value:function(){this.backdropClick.emit(),this._closeModalDrawer()}},{key:"_closeModalDrawer",value:function(){var e=this;[this._start,this._end].filter((function(t){return t&&!t.disableClose&&e._canHaveBackdrop(t)})).forEach((function(e){return e.close()}))}},{key:"_isShowingBackdrop",value:function(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}},{key:"_canHaveBackdrop",value:function(e){return"side"!==e.mode||!!this._backdropOverride}},{key:"_isDrawerOpen",value:function(e){return null!=e&&e.opened}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"autosize",get:function(){return this._autosize},set:function(e){this._autosize=VF(e)}},{key:"hasBackdrop",get:function(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride},set:function(e){this._backdropOverride=null==e?null:VF(e)}},{key:"scrollable",get:function(){return this._userContent||this._content}}]),e}()).\u0275fac=function(e){return new(e||$q)(as(gL,8),as(bu),as(rc),as(Co),as(kL),as(iV),as(NW,8))},$q.\u0275cmp=Yt({type:$q,selectors:[["mat-drawer-container"]],contentQueries:function(e,t,n){var r;1&e&&(Dl(n,sV,!0),Dl(n,uV,!0)),2&e&&(kl(r=El())&&(t._content=r.first),kl(r=El())&&(t._allDrawers=r))},viewQuery:function(e,t){var n;1&e&&Sl(sV,!0),2&e&&kl(n=El())&&(t._userContent=n.first)},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,t){2&e&&Ns("mat-drawer-container-explicit-backdrop",t._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[vu([{provide:oV,useExisting:$q}])],ngContentSelectors:Kq,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,t){1&e&&(Cs(Xq),ns(0,Gq,1,2,"div",0),Ss(1),Ss(2,1),ns(3,Jq,2,0,"mat-drawer-content",1)),2&e&&(ss("ngIf",t.hasBackdrop),Ka(3),ss("ngIf",!t._content))},directives:[yh,sV],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),$q),cV=((Qq=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments))._fixedInViewport=!1,e._fixedTopGap=0,e._fixedBottomGap=0,e}return _createClass(n,[{key:"fixedInViewport",get:function(){return this._fixedInViewport},set:function(e){this._fixedInViewport=VF(e)}},{key:"fixedTopGap",get:function(){return this._fixedTopGap},set:function(e){this._fixedTopGap=UF(e)}},{key:"fixedBottomGap",get:function(){return this._fixedBottomGap},set:function(e){this._fixedBottomGap=UF(e)}}]),n}(uV)).\u0275fac=function(e){return hV(e||Qq)},Qq.\u0275cmp=Yt({type:Qq,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(e,t){2&e&&(es("align",null),Ms("top",t.fixedInViewport?t.fixedTopGap:null,"px")("bottom",t.fixedInViewport?t.fixedBottomGap:null,"px"),Ns("mat-drawer-end","end"===t.position)("mat-drawer-over","over"===t.mode)("mat-drawer-push","push"===t.mode)("mat-drawer-side","side"===t.mode)("mat-drawer-opened",t.opened)("mat-sidenav-fixed",t.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[eu],ngContentSelectors:Hq,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(e,t){1&e&&(Cs(),ls(0,"div",0),Ss(1),cs())},encapsulation:2,data:{animation:[Zq.transformDrawer]},changeDetection:0}),Qq),hV=qr(cV),fV=((nV=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:nV}),nV.\u0275inj=Ke({factory:function(e){return new(e||nV)},imports:[[Lh,jW,FF,CL],CL,jW]}),nV),dV=["mat-button",""],pV=["*"],mV=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],vV=GW(HW(JW((function e(t){_classCallCheck(this,e),this._elementRef=t})))),yV=((aV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;_classCallCheck(this,n),(i=t.call(this,e))._focusMonitor=r,i._animationMode=a,i.isRoundButton=i._hasHostAttributes("mat-fab","mat-mini-fab"),i.isIconButton=i._hasHostAttributes("mat-icon-button");var o,s=_createForOfIteratorHelper(mV);try{for(s.s();!(o=s.n()).done;){var u=o.value;i._hasHostAttributes(u)&&i._getHostElement().classList.add(u)}}catch(s7){s.e(s7)}finally{s.f()}return e.nativeElement.classList.add("mat-button-base"),i._focusMonitor.monitor(i._elementRef,!0),i.isRoundButton&&(i.color="accent"),i}return _createClass(n,[{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",t=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._getHostElement(),e,t)}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_hasHostAttributes",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.some((function(t){return e._getHostElement().hasAttribute(t)}))}}]),n}(vV)).\u0275fac=function(e){return new(e||aV)(as(bu),as(rz),as(NW,8))},aV.\u0275cmp=Yt({type:aV,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,t){var n;1&e&&Sl(Tq,!0),2&e&&kl(n=El())&&(t.ripple=n.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:3,hostBindings:function(e,t){2&e&&(es("disabled",t.disabled||null),Ns("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[eu],attrs:dV,ngContentSelectors:pV,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,t){1&e&&(Cs(),ls(0,"span",0),Ss(1),cs(),hs(2,"div",1),hs(3,"div",2)),2&e&&(Ka(2),Ns("mat-button-ripple-round",t.isRoundButton||t.isIconButton),ss("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",t.isIconButton)("matRippleTrigger",t._getHostElement()))},directives:[Tq],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled],.mat-flat-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.cdk-high-contrast-active .mat-button-focus-overlay{background-color:#fff}.cdk-high-contrast-black-on-white .mat-button-focus-overlay{background-color:#000}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}\n"],encapsulation:2,changeDetection:0}),aV),gV=((rV=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:rV}),rV.\u0275inj=Ke({factory:function(e){return new(e||rV)},imports:[[Eq,jW],jW]}),rV);function _V(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if(V(r))return bV(r,null);if(U(r)&&Object.getPrototypeOf(r)===Object.prototype){var a=Object.keys(r);return bV(a.map((function(e){return r[e]})),a)}}if("function"==typeof t[t.length-1]){var i=t.pop();return bV(t=1===t.length&&V(t[0])?t[0]:t,null).pipe(be((function(e){return i.apply(void 0,_toConsumableArray(e))})))}return bV(t,null)}function bV(e,t){return new re((function(n){var r=e.length;if(0!==r)for(var a=new Array(r),i=0,o=0,s=function(s){var u=Ce(e[s]),l=!1;n.add(u.subscribe({next:function(e){l||(l=!0,o++),a[s]=e},error:function(e){return n.error(e)},complete:function(){++i!==r&&l||(o===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=a[n],e}),{}):a),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()}))}var xV,wV,kV,CV,SV=new kt("NgValueAccessor"),IV={provide:SV,useExisting:st((function(){return DV})),multi:!0},DV=((xV=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||xV)(as(Cu),as(bu))},xV.\u0275dir=rn({type:xV,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&ys("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[vu([IV])]}),xV),AV={provide:SV,useExisting:st((function(){return EV})),multi:!0},TV=new kt("CompositionEventMode"),EV=((CV=function(){function e(t,n,r){var a;_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._compositionMode=r,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(a=Nc()?Nc().getUserAgent():"",!/android (\d+)/.test(a.toLowerCase())))}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),e}()).\u0275fac=function(e){return new(e||CV)(as(Cu),as(bu),as(TV,8))},CV.\u0275dir=rn({type:CV,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&ys("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[vu([AV])]}),CV),RV=((kV=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}}]),e}()).\u0275fac=function(e){return new(e||kV)},kV.\u0275dir=rn({type:kV}),kV),OV=((wV=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(RV)).\u0275fac=function(e){return MV(e||wV)},wV.\u0275dir=rn({type:wV,features:[eu]}),wV),MV=qr(OV);function NV(){throw new Error("unimplemented")}var PV,FV,LV=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return _createClass(n,[{key:"validator",get:function(){return NV()}},{key:"asyncValidator",get:function(){return NV()}}]),n}(RV),zV=function(){function e(t){_classCallCheck(this,e),this._cd=t}return _createClass(e,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),e}(),BV=((FV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return n}(zV)).\u0275fac=function(e){return new(e||FV)(as(LV,2))},FV.\u0275dir=rn({type:FV,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&Ns("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[eu]}),FV),WV=((PV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return n}(zV)).\u0275fac=function(e){return new(e||PV)(as(OV,2))},PV.\u0275dir=rn({type:PV,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&Ns("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[eu]}),PV);function qV(e){return null==e||0===e.length}var VV=new kt("NgValidators"),UV=new kt("NgAsyncValidators"),jV=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,HV=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"min",value:function(e){return function(t){if(qV(t.value)||qV(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}},{key:"max",value:function(e){return function(t){if(qV(t.value)||qV(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}},{key:"required",value:function(e){return qV(e.value)?{required:!0}:null}},{key:"requiredTrue",value:function(e){return!0===e.value?null:{required:!0}}},{key:"email",value:function(e){return qV(e.value)||jV.test(e.value)?null:{email:!0}}},{key:"minLength",value:function(e){return function(t){if(qV(t.value))return null;var n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}},{key:"maxLength",value:function(e){return function(t){var n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}},{key:"pattern",value:function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(qV(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){if(!e)return null;var t=e.filter(GV);return 0==t.length?null:function(e){return XV(function(e,t){return t.map((function(t){return t(e)}))}(e,t))}}},{key:"composeAsync",value:function(e){if(!e)return null;var t=e.filter(GV);return 0==t.length?null:function(e){return _V(function(e,t){return t.map((function(t){return t(e)}))}(e,t).map(JV)).pipe(be(XV))}}}]),e}();function GV(e){return null!=e}function JV(e){var t=ms(e)?Ce(e):e;if(!vs(t))throw new Error("Expected validator to return Promise or Observable.");return t}function XV(e){var t={};return e.forEach((function(e){t=null!=e?Object.assign(Object.assign({},t),e):t})),0===Object.keys(t).length?null:t}function KV(e){return e.validate?function(t){return e.validate(t)}:e}function ZV(e){return e.validate?function(t){return e.validate(t)}:e}var YV,QV,$V,eU,tU,nU,rU={provide:SV,useExisting:st((function(){return aU})),multi:!0},aU=((YV=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||YV)(as(Cu),as(bu))},YV.\u0275dir=rn({type:YV,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&ys("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[vu([rU])]}),YV),iU={provide:SV,useExisting:st((function(){return sU})),multi:!0},oU=(($V=function(){function e(){_classCallCheck(this,e),this._accessors=[]}return _createClass(e,[{key:"add",value:function(e,t){this._accessors.push([e,t])}},{key:"remove",value:function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}},{key:"select",value:function(e){var t=this;this._accessors.forEach((function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)}))}},{key:"_isSameGroup",value:function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}]),e}()).\u0275fac=function(e){return new(e||$V)},$V.\u0275prov=Xe({token:$V,factory:$V.\u0275fac}),$V),sU=((QV=function(){function e(t,n,r,a){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._registry=r,this._injector=a,this.onChange=function(){},this.onTouched=function(){}}return _createClass(e,[{key:"ngOnInit",value:function(){this._control=this._injector.get(LV),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}}},{key:"fireUncheck",value:function(e){this.writeValue(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),e}()).\u0275fac=function(e){return new(e||QV)(as(Cu),as(bu),as(oU),as(Wo))},QV.\u0275dir=rn({type:QV,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&ys("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[vu([iU])]}),QV),uU={provide:SV,useExisting:st((function(){return lU})),multi:!0},lU=((eU=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||eU)(as(Cu),as(bu))},eU.\u0275dir=rn({type:eU,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&ys("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[vu([uU])]}),eU),cU='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',hU='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',fU=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"controlParentException",value:function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(cU))}},{key:"ngModelGroupException",value:function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '.concat(hU,'\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        \n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>'))}},{key:"missingFormException",value:function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ".concat(cU))}},{key:"groupParentException",value:function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(hU))}},{key:"arrayParentException",value:function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}},{key:"disabledAttrWarning",value:function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}},{key:"ngModelWarning",value:function(e){console.warn("\n    It looks like you're using ngModel on the same form field as ".concat(e,". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/").concat("formControl"===e?"FormControlDirective":"FormControlName","#use-with-ngmodel\n    "))}}]),e}(),dU={provide:SV,useExisting:st((function(){return pU})),multi:!0},pU=((tU=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Xo}return _createClass(e,[{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(e,t){return null==e?"".concat(t):(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r),e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(e)));this._compareWith=e}}]),e}()).\u0275fac=function(e){return new(e||tU)(as(Cu),as(bu))},tU.\u0275dir=rn({type:tU,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&ys("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[vu([dU])]}),tU),mU={provide:SV,useExisting:st((function(){return vU})),multi:!0},vU=((nU=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Xo}return _createClass(e,[{key:"writeValue",value:function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map((function(e){return n._getOptionId(e)}));t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var a=n.selectedOptions,i=0;i<a.length;i++){var o=a.item(i),s=t._getOptionValue(o.value);r.push(s)}else for(var u=n.options,l=0;l<u.length;l++){var c=u.item(l);if(c.selected){var h=t._getOptionValue(c.value);r.push(h)}}t.value=r,e(r)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r)._value,e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(e)));this._compareWith=e}}]),e}()).\u0275fac=function(e){return new(e||nU)(as(Cu),as(bu))},nU.\u0275dir=rn({type:nU,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&ys("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[vu([mU])]}),nU);function yU(e,t){return[].concat(_toConsumableArray(t.path),[e])}function gU(e,t){e||wU(t,"Cannot find control with"),t.valueAccessor||wU(t,"No value accessor for form control with"),e.validator=HV.compose([e.validator,t.validator]),e.asyncValidator=HV.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange((function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&_U(e,t)}))}(e,t),function(e,t){e.registerOnChange((function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)}))}(e,t),function(e,t){t.valueAccessor.registerOnTouched((function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&_U(e,t),"submit"!==e.updateOn&&e.markAsTouched()}))}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange((function(e){t.valueAccessor.setDisabledState(e)})),t._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))})),t._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))}))}function _U(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function bU(e,t){null==e&&wU(t,"Cannot find control with"),e.validator=HV.compose([e.validator,t.validator]),e.asyncValidator=HV.composeAsync([e.asyncValidator,t.asyncValidator])}function xU(e){return wU(e,"There is no FormControl instance attached to form control element with")}function wU(e,t){var n;throw n=e.path.length>1?"path: '".concat(e.path.join(" -> "),"'"):e.path[0]?"name: '".concat(e.path,"'"):"unspecified name attribute",new Error("".concat(t," ").concat(n))}function kU(e){return null!=e?HV.compose(e.map(KV)):null}function CU(e){return null!=e?HV.composeAsync(e.map(ZV)):null}var SU=[DV,lU,aU,pU,vU,sU];function IU(e,t){e._syncPendingControls(),t.forEach((function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}))}function DU(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function AU(e){var t=EU(e)?e.validators:e;return Array.isArray(t)?kU(t):t||null}function TU(e,t){var n=EU(t)?t.asyncValidators:e;return Array.isArray(n)?CU(n):n||null}function EU(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var RU,OU,MU,NU,PU,FU,LU=function(){function e(t,n){_classCallCheck(this,e),this.validator=t,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(e,[{key:"setValidators",value:function(e){this.validator=AU(e)}},{key:"setAsyncValidators",value:function(e){this.asyncValidator=TU(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(e){return e.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(e){e.markAsUntouched({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(e){e.markAsPristine({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!0)}))}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild((function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!1)}))}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(t){return t._updateTreeValidity(e)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var n=JV(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return t.setErrors(n,{emitEvent:e})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var r=e;return t.forEach((function(e){r=r instanceof BU?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof WU&&r.at(e)||null})),r}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new fl,this.statusChanges=new fl}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls((function(t){return t.status===e}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(e){return e.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(e){return e.touched}))}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){EU(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}}]),e}(),zU=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,n),(e=t.call(this,AU(a),TU(i,a)))._onChange=[],e._applyFormState(r),e._setUpdateStrategy(a),e.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),e._initObservables(),e}return _createClass(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(e){return e(t.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(LU),BU=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,AU(r),TU(a,r))).controls=e,i._initObservables(),i._setUpdateStrategy(r),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return _createClass(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach((function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach((function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(e,t,n){return e[n]=t instanceof zU?t.value:t.getRawValue(),e}))}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,(function(e,t){return!!t._syncPendingControls()||e}));return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach((function(n){return e(t.controls[n],n)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){var t=this,n=!1;return this._forEachChild((function(r,a){n=n||t.contains(a)&&e(r)})),n}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},(function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t}))}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild((function(e,r){n=t(n,e,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),n}(LU),WU=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,AU(r),TU(a,r))).controls=e,i._initObservables(),i._setUpdateStrategy(r),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return _createClass(n,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}},{key:"removeAt",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),this.updateValueAndValidity()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach((function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map((function(e){return e instanceof zU?e.value:e.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(e){return e._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce((function(e,t){return!!t._syncPendingControls()||e}),!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach((function(t,n){e(t,n)}))}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter((function(t){return t.enabled||e.disabled})).map((function(e){return e.value}))}},{key:"_anyControls",value:function(e){return this.controls.some((function(t){return t.enabled&&e(t)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){return e._registerControl(t)}))}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var e,t=_createForOfIteratorHelper(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(s7){t.e(s7)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),n}(LU),qU={provide:OV,useExisting:st((function(){return UU}))},VU=Promise.resolve(null),UU=((OU=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this)).submitted=!1,a._directives=[],a.ngSubmit=new fl,a.form=new BU({},kU(e),CU(r)),a}return _createClass(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"addControl",value:function(e){var t=this;VU.then((function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),gU(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)}))}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;VU.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name),DU(t._directives,e)}))}},{key:"addFormGroup",value:function(e){var t=this;VU.then((function(){var n=t._findContainer(e.path),r=new BU({});bU(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(e){var t=this;VU.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)}))}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var n=this;VU.then((function(){n.form.get(e.path).setValue(t)}))}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,IU(this.form,this._directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}}]),n}(OV)).\u0275fac=function(e){return new(e||OU)(as(VV,10),as(UV,10))},OU.\u0275dir=rn({type:OU,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&ys("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vu([qU]),eu]}),OU),jU=((RU=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"_checkParentType",value:function(){}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return yU(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return kU(this._validators)}},{key:"asyncValidator",get:function(){return CU(this._asyncValidators)}}]),n}(OV)).\u0275fac=function(e){return HU(e||RU)},RU.\u0275dir=rn({type:RU,features:[eu]}),RU),HU=qr(jU),GU=((MU=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||MU)},MU.\u0275dir=rn({type:MU,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),MU),JU=new kt("NgModelWithFormControlWarning"),XU={provide:OV,useExisting:st((function(){return KU}))},KU=((NU=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this))._validators=e,a._asyncValidators=r,a.submitted=!1,a.directives=[],a.form=null,a.ngSubmit=new fl,a}return _createClass(n,[{key:"ngOnChanges",value:function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}},{key:"addControl",value:function(e){var t=this.form.get(e.path);return gU(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){DU(this.directives,e)}},{key:"addFormGroup",value:function(e){var t=this.form.get(e.path);bU(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormGroup",value:function(e){}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"addFormArray",value:function(e){var t=this.form.get(e.path);bU(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormArray",value:function(e){}},{key:"getFormArray",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){this.form.get(e.path).setValue(t)}},{key:"onSubmit",value:function(e){return this.submitted=!0,IU(this.form,this.directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_updateDomValue",value:function(){var e=this;this.directives.forEach((function(t){var n=e.form.get(t.path);t.control!==n&&(function(e,t){t.valueAccessor.registerOnChange((function(){return xU(t)})),t.valueAccessor.registerOnTouched((function(){return xU(t)})),t._rawValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)})),t._rawAsyncValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)})),e&&e._clearChangeFns()}(t.control,t),n&&gU(n,t),t.control=n)})),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_updateRegistrations",value:function(){var e=this;this.form._registerOnCollectionChange((function(){return e._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){})),this._oldForm=this.form}},{key:"_updateValidators",value:function(){var e=kU(this._validators);this.form.validator=HV.compose([this.form.validator,e]);var t=CU(this._asyncValidators);this.form.asyncValidator=HV.composeAsync([this.form.asyncValidator,t])}},{key:"_checkFormPresent",value:function(){this.form||fU.missingFormException()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}}]),n}(OV)).\u0275fac=function(e){return new(e||NU)(as(VV,10),as(UV,10))},NU.\u0275dir=rn({type:NU,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&ys("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vu([XU]),eu,ou]}),NU),ZU={provide:OV,useExisting:st((function(){return YU}))},YU=((PU=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this))._parent=e,i._validators=r,i._asyncValidators=a,i}return _createClass(n,[{key:"_checkParentType",value:function(){ej(this._parent)&&fU.groupParentException()}}]),n}(jU)).\u0275fac=function(e){return new(e||PU)(as(OV,13),as(VV,10),as(UV,10))},PU.\u0275dir=rn({type:PU,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[vu([ZU]),eu]}),PU),QU={provide:OV,useExisting:st((function(){return $U}))},$U=((FU=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this))._parent=e,i._validators=r,i._asyncValidators=a,i}return _createClass(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormArray(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormArray(this)}},{key:"_checkParentType",value:function(){ej(this._parent)&&fU.arrayParentException()}},{key:"control",get:function(){return this.formDirective.getFormArray(this)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"path",get:function(){return yU(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"validator",get:function(){return kU(this._validators)}},{key:"asyncValidator",get:function(){return CU(this._asyncValidators)}}]),n}(OV)).\u0275fac=function(e){return new(e||FU)(as(OV,13),as(VV,10),as(UV,10))},FU.\u0275dir=rn({type:FU,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[vu([QU]),eu]}),FU);function ej(e){return!(e instanceof YU||e instanceof KU||e instanceof $U)}var tj,nj,rj,aj,ij={provide:LV,useExisting:st((function(){return oj}))},oj=((aj=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o){var s;return _classCallCheck(this,n),(s=t.call(this))._ngModelWarningConfig=o,s._added=!1,s.update=new fl,s._ngModelWarningSent=!1,s._parent=e,s._rawValidators=r||[],s._rawAsyncValidators=a||[],s.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||wU(e,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,a=void 0;return t.forEach((function(t){var i;t.constructor===EV?n=t:(i=t,SU.some((function(e){return i.constructor===e}))?(r&&wU(e,"More than one built-in value accessor matches form control with"),r=t):(a&&wU(e,"More than one custom value accessor matches form control with"),a=t))})),a||r||n||(wU(e,"No valid value accessor for form control with"),null)}(_assertThisInitialized(s),i),s}return _createClass(n,[{key:"ngOnChanges",value:function(e){var t,r;this._added||this._setUpControl(),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Xo(t,n.currentValue)}(e,this.viewModel)&&(t=n,r=this._ngModelWarningConfig,ra()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(fU.ngModelWarning("formControlName"),t._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_checkParentType",value:function(){!(this._parent instanceof YU)&&this._parent instanceof jU?fU.ngModelGroupException():this._parent instanceof YU||this._parent instanceof KU||this._parent instanceof $U||fU.controlParentException()}},{key:"_setUpControl",value:function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}},{key:"isDisabled",set:function(e){fU.disabledAttrWarning()}},{key:"path",get:function(){return yU(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return kU(this._rawValidators)}},{key:"asyncValidator",get:function(){return CU(this._rawAsyncValidators)}}]),n}(LV)).\u0275fac=function(e){return new(e||aj)(as(OV,13),as(VV,10),as(UV,10),as(SV,10),as(JU,8))},aj.\u0275dir=rn({type:aj,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[vu([ij]),eu,ou]}),aj._ngModelWarningSentOnce=!1,aj),sj=((rj=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:rj}),rj.\u0275inj=Ke({factory:function(e){return new(e||rj)}}),rj),uj=((nj=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"group",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._reduceControls(e),r=null,a=null,i=void 0;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(r=null!=t.validators?t.validators:null,a=null!=t.asyncValidators?t.asyncValidators:null,i=null!=t.updateOn?t.updateOn:void 0):(r=null!=t.validator?t.validator:null,a=null!=t.asyncValidator?t.asyncValidator:null)),new BU(n,{asyncValidators:a,updateOn:i,validators:r})}},{key:"control",value:function(e,t,n){return new zU(e,t,n)}},{key:"array",value:function(e,t,n){var r=this,a=e.map((function(e){return r._createControl(e)}));return new WU(a,t,n)}},{key:"_reduceControls",value:function(e){var t=this,n={};return Object.keys(e).forEach((function(r){n[r]=t._createControl(e[r])})),n}},{key:"_createControl",value:function(e){return e instanceof zU||e instanceof BU||e instanceof WU?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}]),e}()).\u0275fac=function(e){return new(e||nj)},nj.\u0275prov=Xe({token:nj,factory:nj.\u0275fac}),nj),lj=((tj=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:[{provide:JU,useValue:t.warnOnNgModelWithFormControl}]}}}]),e}()).\u0275mod=tn({type:tj}),tj.\u0275inj=Ke({factory:function(e){return new(e||tj)},providers:[uj,oU],imports:[sj]}),tj),cj=["underline"],hj=["connectionContainer"],fj=["inputContainer"],dj=["label"];function pj(e,t){1&e&&(fs(0),ls(1,"div",14),hs(2,"div",15),hs(3,"div",16),hs(4,"div",17),cs(),ls(5,"div",18),hs(6,"div",15),hs(7,"div",16),hs(8,"div",17),cs(),ds())}function mj(e,t){1&e&&(ls(0,"div",19),Ss(1,1),cs())}function vj(e,t){if(1&e&&(fs(0),Ss(1,2),ls(2,"span"),Gs(3),cs(),ds()),2&e){var n=ws(2);Ka(3),Js(n._control.placeholder)}}function yj(e,t){1&e&&Ss(0,3,["*ngSwitchCase","true"])}function gj(e,t){1&e&&(ls(0,"span",23),Gs(1," *"),cs())}function _j(e,t){if(1&e){var n=ps();ls(0,"label",20,21),ys("cdkObserveContent",(function(){return Mn(n),ws().updateOutlineGap()})),ns(2,vj,4,1,"ng-container",12),ns(3,yj,1,0,void 0,12),ns(4,gj,2,0,"span",22),cs()}if(2&e){var r=ws();Ns("mat-empty",r._control.empty&&!r._shouldAlwaysFloat)("mat-form-field-empty",r._control.empty&&!r._shouldAlwaysFloat)("mat-accent","accent"==r.color)("mat-warn","warn"==r.color),ss("cdkObserveContentDisabled","outline"!=r.appearance)("id",r._labelId)("ngSwitch",r._hasLabel()),es("for",r._control.id)("aria-owns",r._control.id),Ka(2),ss("ngSwitchCase",!1),Ka(1),ss("ngSwitchCase",!0),Ka(1),ss("ngIf",!r.hideRequiredMarker&&r._control.required&&!r._control.disabled)}}function bj(e,t){1&e&&(ls(0,"div",24),Ss(1,4),cs())}function xj(e,t){if(1&e&&(ls(0,"div",25,26),hs(2,"span",27),cs()),2&e){var n=ws();Ka(2),Ns("mat-accent","accent"==n.color)("mat-warn","warn"==n.color)}}function wj(e,t){1&e&&(ls(0,"div"),Ss(1,5),cs()),2&e&&ss("@transitionMessages",ws()._subscriptAnimationState)}function kj(e,t){if(1&e&&(ls(0,"div",31),Gs(1),cs()),2&e){var n=ws(2);ss("id",n._hintLabelId),Ka(1),Js(n.hintLabel)}}function Cj(e,t){if(1&e&&(ls(0,"div",28),ns(1,kj,2,2,"div",29),Ss(2,6),hs(3,"div",30),Ss(4,7),cs()),2&e){var n=ws();ss("@transitionMessages",n._subscriptAnimationState),Ka(1),ss("ngIf",n.hintLabel)}}var Sj,Ij,Dj=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Aj=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Tj=0,Ej=((Sj=function e(){_classCallCheck(this,e),this.id="mat-error-".concat(Tj++)}).\u0275fac=function(e){return new(e||Sj)},Sj.\u0275dir=rn({type:Sj,selectors:[["mat-error"]],hostAttrs:["role","alert",1,"mat-error"],hostVars:1,hostBindings:function(e,t){2&e&&es("id",t.id)},inputs:{id:"id"}}),Sj),Rj={transitionMessages:dz("transitionMessages",[yz("enter",vz({opacity:1,transform:"translateY(0%)"})),gz("void => enter",[vz({opacity:0,transform:"translateY(-100%)"}),pz("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Oj=((Ij=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Ij)},Ij.\u0275dir=rn({type:Ij}),Ij);function Mj(e){return Error("A hint was already declared for 'align=\"".concat(e,"\"'."))}var Nj,Pj,Fj,Lj,zj,Bj,Wj,qj,Vj,Uj,jj,Hj=0,Gj=((zj=function e(){_classCallCheck(this,e),this.align="start",this.id="mat-hint-".concat(Hj++)}).\u0275fac=function(e){return new(e||zj)},zj.\u0275dir=rn({type:zj,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(e,t){2&e&&(es("id",t.id)("align",null),Ns("mat-right","end"==t.align))},inputs:{align:"align",id:"id"}}),zj),Jj=((Lj=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Lj)},Lj.\u0275dir=rn({type:Lj,selectors:[["mat-label"]]}),Lj),Xj=((Fj=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Fj)},Fj.\u0275dir=rn({type:Fj,selectors:[["mat-placeholder"]]}),Fj),Kj=((Pj=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Pj)},Pj.\u0275dir=rn({type:Pj,selectors:[["","matPrefix",""]]}),Pj),Zj=((Nj=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Nj)},Nj.\u0275dir=rn({type:Nj,selectors:[["","matSuffix",""]]}),Nj),Yj=0,Qj=GW((function e(t){_classCallCheck(this,e),this._elementRef=t}),"primary"),$j=new kt("MAT_FORM_FIELD_DEFAULT_OPTIONS"),eH=new kt("MatFormField"),tH=((Wj=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o,s,u,l){var c;return _classCallCheck(this,n),(c=t.call(this,e))._elementRef=e,c._changeDetectorRef=r,c._dir=i,c._defaults=o,c._platform=s,c._ngZone=u,c._outlineGapCalculationNeededImmediately=!1,c._outlineGapCalculationNeededOnStable=!1,c._destroyed=new le,c._showAlwaysAnimate=!1,c._subscriptAnimationState="",c._hintLabel="",c._hintLabelId="mat-hint-".concat(Yj++),c._labelId="mat-form-field-label-".concat(Yj++),c._labelOptions=a||{},c.floatLabel=c._getDefaultFloatLabelState(),c._animationsEnabled="NoopAnimations"!==l,c.appearance=o&&o.appearance?o.appearance:"legacy",c._hideRequiredMarker=!(!o||null==o.hideRequiredMarker)&&o.hideRequiredMarker,c}return _createClass(n,[{key:"getConnectedOverlayOrigin",value:function(){return this._connectionContainerRef||this._elementRef}},{key:"ngAfterContentInit",value:function(){var e=this;this._validateControlChild();var t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-".concat(t.controlType)),t.stateChanges.pipe(od(null)).subscribe((function(){e._validatePlaceholders(),e._syncDescribedByIds(),e._changeDetectorRef.markForCheck()})),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(sL(this._destroyed)).subscribe((function(){return e._changeDetectorRef.markForCheck()})),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.asObservable().pipe(sL(e._destroyed)).subscribe((function(){e._outlineGapCalculationNeededOnStable&&e.updateOutlineGap()}))})),Ee(this._prefixChildren.changes,this._suffixChildren.changes).subscribe((function(){e._outlineGapCalculationNeededOnStable=!0,e._changeDetectorRef.markForCheck()})),this._hintChildren.changes.pipe(od(null)).subscribe((function(){e._processHints(),e._changeDetectorRef.markForCheck()})),this._errorChildren.changes.pipe(od(null)).subscribe((function(){e._syncDescribedByIds(),e._changeDetectorRef.markForCheck()})),this._dir&&this._dir.change.pipe(sL(this._destroyed)).subscribe((function(){"function"==typeof requestAnimationFrame?e._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){return e.updateOutlineGap()}))})):e.updateOutlineGap()}))}},{key:"ngAfterContentChecked",value:function(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}},{key:"ngAfterViewInit",value:function(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_shouldForward",value:function(e){var t=this._control?this._control.ngControl:null;return t&&t[e]}},{key:"_hasPlaceholder",value:function(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}},{key:"_hasLabel",value:function(){return!!this._labelChild}},{key:"_shouldLabelFloat",value:function(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)}},{key:"_hideControlPlaceholder",value:function(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}},{key:"_hasFloatingLabel",value:function(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}},{key:"_getDisplayedMessages",value:function(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}},{key:"_animateAndLockLabel",value:function(){var e=this;this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,JF(this._label.nativeElement,"transitionend").pipe(Zf(1)).subscribe((function(){e._showAlwaysAnimate=!1}))),this.floatLabel="always",this._changeDetectorRef.markForCheck())}},{key:"_validatePlaceholders",value:function(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}},{key:"_processHints",value:function(){this._validateHints(),this._syncDescribedByIds()}},{key:"_validateHints",value:function(){var e,t,n=this;this._hintChildren&&this._hintChildren.forEach((function(r){if("start"===r.align){if(e||n.hintLabel)throw Mj("start");e=r}else if("end"===r.align){if(t)throw Mj("end");t=r}}))}},{key:"_getDefaultFloatLabelState",value:function(){return this._defaults&&this._defaults.floatLabel||this._labelOptions.float||"auto"}},{key:"_syncDescribedByIds",value:function(){if(this._control){var e=[];if("hint"===this._getDisplayedMessages()){var t=this._hintChildren?this._hintChildren.find((function(e){return"start"===e.align})):null,n=this._hintChildren?this._hintChildren.find((function(e){return"end"===e.align})):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),n&&e.push(n.id)}else this._errorChildren&&(e=this._errorChildren.map((function(e){return e.id})));this._control.setDescribedByIds(e)}}},{key:"_validateControlChild",value:function(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}},{key:"updateOutlineGap",value:function(){var e=this._label?this._label.nativeElement:null;if("outline"===this.appearance&&e&&e.children.length&&e.textContent.trim()&&this._platform.isBrowser)if(this._isAttachedToDOM()){var t=0,n=0,r=this._connectionContainerRef.nativeElement,a=r.querySelectorAll(".mat-form-field-outline-start"),i=r.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){var o=r.getBoundingClientRect();if(0===o.width&&0===o.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);var s,u=this._getStartEnd(o),l=this._getStartEnd(e.children[0].getBoundingClientRect()),c=0,h=_createForOfIteratorHelper(e.children);try{for(h.s();!(s=h.n()).done;)c+=s.value.offsetWidth}catch(s7){h.e(s7)}finally{h.f()}t=Math.abs(l-u)-5,n=c>0?.75*c+10:0}for(var f=0;f<a.length;f++)a[f].style.width="".concat(t,"px");for(var d=0;d<i.length;d++)i[d].style.width="".concat(n,"px");this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}else this._outlineGapCalculationNeededImmediately=!0}},{key:"_getStartEnd",value:function(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}},{key:"_isAttachedToDOM",value:function(){var e=this._elementRef.nativeElement;if(e.getRootNode){var t=e.getRootNode();return t&&t!==e}return document.documentElement.contains(e)}},{key:"appearance",get:function(){return this._appearance},set:function(e){var t=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&t!==e&&(this._outlineGapCalculationNeededOnStable=!0)}},{key:"hideRequiredMarker",get:function(){return this._hideRequiredMarker},set:function(e){this._hideRequiredMarker=VF(e)}},{key:"_shouldAlwaysFloat",get:function(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}},{key:"_canLabelFloat",get:function(){return"never"!==this.floatLabel}},{key:"hintLabel",get:function(){return this._hintLabel},set:function(e){this._hintLabel=e,this._processHints()}},{key:"floatLabel",get:function(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel},set:function(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}},{key:"_control",get:function(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic},set:function(e){this._explicitFormFieldControl=e}},{key:"_labelChild",get:function(){return this._labelChildNonStatic||this._labelChildStatic}}]),n}(Qj)).\u0275fac=function(e){return new(e||Wj)(as(bu),as(Co),as(jq,8),as(gL,8),as($j,8),as(PF),as(rc),as(NW,8))},Wj.\u0275cmp=Yt({type:Wj,selectors:[["mat-form-field"]],contentQueries:function(e,t,n){var r;1&e&&(Dl(n,Oj,!0),Al(n,Oj,!0),Dl(n,Jj,!0),Al(n,Jj,!0),Dl(n,Xj,!0),Dl(n,Ej,!0),Dl(n,Gj,!0),Dl(n,Kj,!0),Dl(n,Zj,!0)),2&e&&(kl(r=El())&&(t._controlNonStatic=r.first),kl(r=El())&&(t._controlStatic=r.first),kl(r=El())&&(t._labelChildNonStatic=r.first),kl(r=El())&&(t._labelChildStatic=r.first),kl(r=El())&&(t._placeholderChild=r.first),kl(r=El())&&(t._errorChildren=r),kl(r=El())&&(t._hintChildren=r),kl(r=El())&&(t._prefixChildren=r),kl(r=El())&&(t._suffixChildren=r))},viewQuery:function(e,t){var n;1&e&&(Sl(cj,!0),Cl(hj,!0),Sl(fj,!0),Sl(dj,!0)),2&e&&(kl(n=El())&&(t.underlineRef=n.first),kl(n=El())&&(t._connectionContainerRef=n.first),kl(n=El())&&(t._inputContainerRef=n.first),kl(n=El())&&(t._label=n.first))},hostAttrs:[1,"mat-form-field"],hostVars:44,hostBindings:function(e,t){2&e&&Ns("mat-form-field-appearance-standard","standard"==t.appearance)("mat-form-field-appearance-fill","fill"==t.appearance)("mat-form-field-appearance-outline","outline"==t.appearance)("mat-form-field-appearance-legacy","legacy"==t.appearance)("mat-form-field-invalid",t._control.errorState)("mat-form-field-can-float",t._canLabelFloat)("mat-form-field-should-float",t._shouldLabelFloat())("mat-form-field-has-label",t._hasFloatingLabel())("mat-form-field-hide-placeholder",t._hideControlPlaceholder())("mat-form-field-disabled",t._control.disabled)("mat-form-field-autofilled",t._control.autofilled)("mat-focused",t._control.focused)("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)("ng-untouched",t._shouldForward("untouched"))("ng-touched",t._shouldForward("touched"))("ng-pristine",t._shouldForward("pristine"))("ng-dirty",t._shouldForward("dirty"))("ng-valid",t._shouldForward("valid"))("ng-invalid",t._shouldForward("invalid"))("ng-pending",t._shouldForward("pending"))("_mat-animation-noopable",!t._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[vu([{provide:eH,useExisting:Wj}]),eu],ngContentSelectors:Aj,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,t){1&e&&(Cs(Dj),ls(0,"div",0),ls(1,"div",1,2),ys("click",(function(e){return t._control.onContainerClick&&t._control.onContainerClick(e)})),ns(3,pj,9,0,"ng-container",3),ns(4,mj,2,0,"div",4),ls(5,"div",5,6),Ss(7),ls(8,"span",7),ns(9,_j,5,16,"label",8),cs(),cs(),ns(10,bj,2,0,"div",9),cs(),ns(11,xj,3,4,"div",10),ls(12,"div",11),ns(13,wj,2,1,"div",12),ns(14,Cj,5,2,"div",13),cs(),cs()),2&e&&(Ka(3),ss("ngIf","outline"==t.appearance),Ka(1),ss("ngIf",t._prefixChildren.length),Ka(5),ss("ngIf",t._hasFloatingLabel()),Ka(1),ss("ngIf",t._suffixChildren.length),Ka(1),ss("ngIf","outline"!=t.appearance),Ka(1),ss("ngSwitch",t._getDisplayedMessages()),Ka(1),ss("ngSwitchCase","error"),Ka(1),ss("ngSwitchCase","hint"))},directives:[yh,Oh,Mh,zL],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Rj.transitionMessages]},changeDetection:0}),Wj),nH=((Bj=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:Bj}),Bj.\u0275inj=Ke({factory:function(e){return new(e||Bj)},imports:[[Lh,jW,BL],jW]}),Bj),rH=BF({passive:!0}),aH=((Vj=function(){function e(t,n){_classCallCheck(this,e),this._platform=t,this._ngZone=n,this._monitoredElements=new Map}return _createClass(e,[{key:"monitor",value:function(e){var t=this;if(!this._platform.isBrowser)return Af;var n=GF(e),r=this._monitoredElements.get(n);if(r)return r.subject.asObservable();var a=new le,i="cdk-text-field-autofilled",o=function(e){"cdk-text-field-autofill-start"!==e.animationName||n.classList.contains(i)?"cdk-text-field-autofill-end"===e.animationName&&n.classList.contains(i)&&(n.classList.remove(i),t._ngZone.run((function(){return a.next({target:e.target,isAutofilled:!1})}))):(n.classList.add(i),t._ngZone.run((function(){return a.next({target:e.target,isAutofilled:!0})})))};return this._ngZone.runOutsideAngular((function(){n.addEventListener("animationstart",o,rH),n.classList.add("cdk-text-field-autofill-monitored")})),this._monitoredElements.set(n,{subject:a,unlisten:function(){n.removeEventListener("animationstart",o,rH)}}),a.asObservable()}},{key:"stopMonitoring",value:function(e){var t=GF(e),n=this._monitoredElements.get(t);n&&(n.unlisten(),n.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}},{key:"ngOnDestroy",value:function(){var e=this;this._monitoredElements.forEach((function(t,n){return e.stopMonitoring(n)}))}}]),e}()).\u0275fac=function(e){return new(e||Vj)(Ot(PF),Ot(rc))},Vj.\u0275prov=Xe({factory:function(){return new Vj(Ot(PF),Ot(rc))},token:Vj,providedIn:"root"}),Vj),iH=((qj=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:qj}),qj.\u0275inj=Ke({factory:function(e){return new(e||qj)},imports:[[FF]]}),qj),oH=new kt("MAT_INPUT_VALUE_ACCESSOR"),sH=["button","checkbox","file","hidden","image","radio","range","reset","submit"],uH=0,lH=KW((function e(t,n,r,a){_classCallCheck(this,e),this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=r,this.ngControl=a})),cH=((jj=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o,s,u,l,c){var h;_classCallCheck(this,n),(h=t.call(this,s,i,o,a))._elementRef=e,h._platform=r,h.ngControl=a,h._autofillMonitor=l,h._uid="mat-input-".concat(uH++),h.focused=!1,h.stateChanges=new le,h.controlType="mat-input",h.autofilled=!1,h._disabled=!1,h._required=!1,h._type="text",h._readonly=!1,h._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter((function(e){return zF().has(e)}));var f=h._elementRef.nativeElement,d=f.nodeName.toLowerCase();return h._inputValueAccessor=u||f,h._previousNativeValue=h.value,h.id=h.id,r.IOS&&c.runOutsideAngular((function(){e.nativeElement.addEventListener("keyup",(function(e){var t=e.target;t.value||t.selectionStart||t.selectionEnd||(t.setSelectionRange(1,1),t.setSelectionRange(0,0))}))})),h._isServer=!h._platform.isBrowser,h._isNativeSelect="select"===d,h._isTextarea="textarea"===d,h._isNativeSelect&&(h.controlType=f.multiple?"mat-native-select-multiple":"mat-native-select"),h}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe((function(t){e.autofilled=t.isAutofilled,e.stateChanges.next()}))}},{key:"ngOnChanges",value:function(){this.stateChanges.next()}},{key:"ngOnDestroy",value:function(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}},{key:"ngDoCheck",value:function(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()}},{key:"focus",value:function(e){this._elementRef.nativeElement.focus(e)}},{key:"_focusChanged",value:function(e){e===this.focused||this.readonly&&e||(this.focused=e,this.stateChanges.next())}},{key:"_onInput",value:function(){}},{key:"_dirtyCheckNativeValue",value:function(){var e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}},{key:"_validateType",value:function(){if(sH.indexOf(this._type)>-1)throw Error('Input type "'.concat(this._type,"\" isn't supported by matInput."))}},{key:"_isNeverEmpty",value:function(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}},{key:"_isBadInput",value:function(){var e=this._elementRef.nativeElement.validity;return e&&e.badInput}},{key:"setDescribedByIds",value:function(e){this._ariaDescribedby=e.join(" ")}},{key:"onContainerClick",value:function(){this.focused||this.focus()}},{key:"disabled",get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=VF(e),this.focused&&(this.focused=!1,this.stateChanges.next())}},{key:"id",get:function(){return this._id},set:function(e){this._id=e||this._uid}},{key:"required",get:function(){return this._required},set:function(e){this._required=VF(e)}},{key:"type",get:function(){return this._type},set:function(e){this._type=e||"text",this._validateType(),!this._isTextarea&&zF().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}},{key:"value",get:function(){return this._inputValueAccessor.value},set:function(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}},{key:"readonly",get:function(){return this._readonly},set:function(e){this._readonly=VF(e)}},{key:"empty",get:function(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}},{key:"shouldLabelFloat",get:function(){if(this._isNativeSelect){var e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}return this.focused||!this.empty}}]),n}(lH)).\u0275fac=function(e){return new(e||jj)(as(bu),as(PF),as(LV,10),as(UU,8),as(KU,8),as(bq),as(oH,10),as(aH),as(rc))},jj.\u0275dir=rn({type:jj,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:10,hostBindings:function(e,t){1&e&&ys("focus",(function(){return t._focusChanged(!0)}))("blur",(function(){return t._focusChanged(!1)}))("input",(function(){return t._onInput()})),2&e&&(Ys("disabled",t.disabled)("required",t.required),es("id",t.id)("placeholder",t.placeholder)("readonly",t.readonly&&!t._isNativeSelect||null)("aria-describedby",t._ariaDescribedby||null)("aria-invalid",t.errorState)("aria-required",t.required.toString()),Ns("mat-input-server",t._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher"},exportAs:["matInput"],features:[vu([{provide:Oj,useExisting:jj}]),eu,ou]}),jj),hH=((Uj=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:Uj}),Uj.\u0275inj=Ke({factory:function(e){return new(e||Uj)},providers:[bq],imports:[[iH,nH],iH,nH]}),Uj);function fH(){throw Error("Host already has a portal attached")}var dH,pH,mH,vH,yH=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"attach",value:function(e){return null==e&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),e.hasAttached()&&fH(),this._attachedHost=e,e.attach(this)}},{key:"detach",value:function(){var e=this._attachedHost;null==e?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,e.detach())}},{key:"setAttachedHost",value:function(e){this._attachedHost=e}},{key:"isAttached",get:function(){return null!=this._attachedHost}}]),e}(),gH=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this)).component=e,o.viewContainerRef=r,o.injector=a,o.componentFactoryResolver=i,o}return n}(yH),_H=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this)).templateRef=e,i.viewContainerRef=r,i.context=a,i}return _createClass(n,[{key:"attach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;return this.context=t,_get(_getPrototypeOf(n.prototype),"attach",this).call(this,e)}},{key:"detach",value:function(){return this.context=void 0,_get(_getPrototypeOf(n.prototype),"detach",this).call(this)}},{key:"origin",get:function(){return this.templateRef.elementRef}}]),n}(yH),bH=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).element=e instanceof bu?e.nativeElement:e,r}return n}(yH),xH=function(){function e(){_classCallCheck(this,e),this._isDisposed=!1,this.attachDomPortal=null}return _createClass(e,[{key:"hasAttached",value:function(){return!!this._attachedPortal}},{key:"attach",value:function(e){return e||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&fH(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),e instanceof gH?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof _H?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof bH?(this._attachedPortal=e,this.attachDomPortal(e)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}},{key:"detach",value:function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}},{key:"dispose",value:function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}},{key:"setDisposeFn",value:function(e){this._disposeFn=e}},{key:"_invokeDisposeFn",value:function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}]),e}(),wH=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o){var s,u;return _classCallCheck(this,n),(u=t.call(this)).outletElement=e,u._componentFactoryResolver=r,u._appRef=a,u._defaultInjector=i,u.attachDomPortal=function(e){if(!u._document)throw Error("Cannot attach DOM portal without _document constructor parameter");var t=e.element;if(!t.parentNode)throw Error("DOM portal content must be attached to a parent node.");var r=u._document.createComment("dom-portal");t.parentNode.insertBefore(r,t),u.outletElement.appendChild(t),_get((s=_assertThisInitialized(u),_getPrototypeOf(n.prototype)),"setDisposeFn",s).call(s,(function(){r.parentNode&&r.parentNode.replaceChild(t,r)}))},u._document=o,u}return _createClass(n,[{key:"attachComponentPortal",value:function(e){var t,n=this,r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);return e.viewContainerRef?(t=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn((function(){return t.destroy()}))):(t=r.create(e.injector||this._defaultInjector),this._appRef.attachView(t.hostView),this.setDisposeFn((function(){n._appRef.detachView(t.hostView),t.destroy()}))),this.outletElement.appendChild(this._getComponentRootNode(t)),t}},{key:"attachTemplatePortal",value:function(e){var t=this,n=e.viewContainerRef,r=n.createEmbeddedView(e.templateRef,e.context);return r.detectChanges(),r.rootNodes.forEach((function(e){return t.outletElement.appendChild(e)})),this.setDisposeFn((function(){var e=n.indexOf(r);-1!==e&&n.remove(e)})),r}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}},{key:"_getComponentRootNode",value:function(e){return e.hostView.rootNodes[0]}}]),n}(xH),kH=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(wH),CH=((mH=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this,e,r)}return n}(_H)).\u0275fac=function(e){return new(e||mH)(as(ju),as(Gu))},mH.\u0275dir=rn({type:mH,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[eu]}),mH),SH=((pH=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i,o;return _classCallCheck(this,n),(o=t.call(this))._componentFactoryResolver=e,o._viewContainerRef=r,o._isInitialized=!1,o.attached=new fl,o.attachDomPortal=function(e){if(!o._document)throw Error("Cannot attach DOM portal without _document constructor parameter");var t=e.element;if(!t.parentNode)throw Error("DOM portal content must be attached to a parent node.");var r=o._document.createComment("dom-portal");e.setAttachedHost(_assertThisInitialized(o)),t.parentNode.insertBefore(r,t),o._getRootNode().appendChild(t),_get((i=_assertThisInitialized(o),_getPrototypeOf(n.prototype)),"setDisposeFn",i).call(i,(function(){r.parentNode&&r.parentNode.replaceChild(t,r)}))},o._document=a,o}return _createClass(n,[{key:"ngOnInit",value:function(){this._isInitialized=!0}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this._attachedPortal=null,this._attachedRef=null}},{key:"attachComponentPortal",value:function(e){e.setAttachedHost(this);var t=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),a=t.createComponent(r,t.length,e.injector||t.injector);return t!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),_get(_getPrototypeOf(n.prototype),"setDisposeFn",this).call(this,(function(){return a.destroy()})),this._attachedPortal=e,this._attachedRef=a,this.attached.emit(a),a}},{key:"attachTemplatePortal",value:function(e){var t=this;e.setAttachedHost(this);var r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return _get(_getPrototypeOf(n.prototype),"setDisposeFn",this).call(this,(function(){return t._viewContainerRef.clear()})),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}},{key:"_getRootNode",value:function(){var e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}},{key:"portal",get:function(){return this._attachedPortal},set:function(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&_get(_getPrototypeOf(n.prototype),"detach",this).call(this),e&&_get(_getPrototypeOf(n.prototype),"attach",this).call(this,e),this._attachedPortal=e)}},{key:"attachedRef",get:function(){return this._attachedRef}}]),n}(xH)).\u0275fac=function(e){return new(e||pH)(as(_u),as(Gu),as(Fc))},pH.\u0275dir=rn({type:pH,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[eu]}),pH),IH=((dH=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(SH)).\u0275fac=function(e){return DH(e||dH)},dH.\u0275dir=rn({type:dH,selectors:[["","cdkPortalHost",""],["","portalHost",""]],inputs:{portal:["cdkPortalHost","portal"]},exportAs:["cdkPortalHost"],features:[vu([{provide:SH,useExisting:dH}]),eu]}),dH),DH=qr(IH),AH=((vH=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:vH}),vH.\u0275inj=Ke({factory:function(e){return new(e||vH)}}),vH),TH=function(){function e(t,n){_classCallCheck(this,e),this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}return _createClass(e,[{key:"attach",value:function(){}},{key:"enable",value:function(){if(this._canBeEnabled()){var e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=HF(-this._previousScrollPosition.left),e.style.top=HF(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}},{key:"disable",value:function(){if(this._isEnabled){var e=this._document.documentElement,t=e.style,n=this._document.body.style,r=t.scrollBehavior||"",a=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),t.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t.scrollBehavior=r,n.scrollBehavior=a}}},{key:"_canBeEnabled",value:function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}]),e}();function EH(){return Error("Scroll strategy has already been attached.")}var RH=function(){function e(t,n,r,a){var i=this;_classCallCheck(this,e),this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=r,this._config=a,this._scrollSubscription=null,this._detach=function(){i.disable(),i._overlayRef.hasAttached()&&i._ngZone.run((function(){return i._overlayRef.detach()}))}}return _createClass(e,[{key:"attach",value:function(e){if(this._overlayRef)throw EH();this._overlayRef=e}},{key:"enable",value:function(){var e=this;if(!this._scrollSubscription){var t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe((function(){var t=e._viewportRuler.getViewportScrollPosition().top;Math.abs(t-e._initialScrollPosition)>e._config.threshold?e._detach():e._overlayRef.updatePosition()}))):this._scrollSubscription=t.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),e}(),OH=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"attach",value:function(){}}]),e}();function MH(e,t){return t.some((function(t){return e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right}))}function NH(e,t){return t.some((function(t){return e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right}))}var PH,FH=function(){function e(t,n,r,a){_classCallCheck(this,e),this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this._config=a,this._scrollSubscription=null}return _createClass(e,[{key:"attach",value:function(e){if(this._overlayRef)throw EH();this._overlayRef=e}},{key:"enable",value:function(){var e=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe((function(){if(e._overlayRef.updatePosition(),e._config&&e._config.autoClose){var t=e._overlayRef.overlayElement.getBoundingClientRect(),n=e._viewportRuler.getViewportSize(),r=n.width,a=n.height;MH(t,[{width:r,height:a,bottom:a,right:r,top:0,left:0}])&&(e.disable(),e._ngZone.run((function(){return e._overlayRef.detach()})))}})))}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),e}(),LH=((PH=function e(t,n,r,a){var i=this;_classCallCheck(this,e),this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=function(){return new OH},this.close=function(e){return new RH(i._scrollDispatcher,i._ngZone,i._viewportRuler,e)},this.block=function(){return new TH(i._viewportRuler,i._document)},this.reposition=function(e){return new FH(i._scrollDispatcher,i._viewportRuler,i._ngZone,e)},this._document=a}).\u0275fac=function(e){return new(e||PH)(Ot(xL),Ot(kL),Ot(rc),Ot(Fc))},PH.\u0275prov=Xe({factory:function(){return new PH(Ot(xL),Ot(kL),Ot(rc),Ot(Fc))},token:PH,providedIn:"root"}),PH),zH=function e(t){if(_classCallCheck(this,e),this.scrollStrategy=new OH,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t)for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];void 0!==t[a]&&(this[a]=t[a])}},BH=function e(t,n,r,a,i){_classCallCheck(this,e),this.offsetX=r,this.offsetY=a,this.panelClass=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY},WH=function e(t,n){_classCallCheck(this,e),this.connectionPair=t,this.scrollableViewProperties=n};function qH(e,t){if("top"!==t&&"bottom"!==t&&"center"!==t)throw Error("ConnectedPosition: Invalid ".concat(e,' "').concat(t,'". ')+'Expected "top", "bottom" or "center".')}function VH(e,t){if("start"!==t&&"end"!==t&&"center"!==t)throw Error("ConnectedPosition: Invalid ".concat(e,' "').concat(t,'". ')+'Expected "start", "end" or "center".')}var UH,jH,HH=((UH=function(){function e(t){var n=this;_classCallCheck(this,e),this._attachedOverlays=[],this._keydownListener=function(e){for(var t=n._attachedOverlays,r=t.length-1;r>-1;r--)if(t[r]._keydownEvents.observers.length>0){t[r]._keydownEvents.next(e);break}},this._document=t}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._detach()}},{key:"add",value:function(e){this.remove(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(e)}},{key:"remove",value:function(e){var t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this._detach()}},{key:"_detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}]),e}()).\u0275fac=function(e){return new(e||UH)(Ot(Fc))},UH.\u0275prov=Xe({factory:function(){return new UH(Ot(Fc))},token:UH,providedIn:"root"}),UH),GH=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine),JH=((jH=function(){function e(t,n){_classCallCheck(this,e),this._platform=n,this._document=t}return _createClass(e,[{key:"ngOnDestroy",value:function(){var e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){var e=this._platform?this._platform.isBrowser:"undefined"!=typeof window;if(e||GH)for(var t=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]'),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);var r=this._document.createElement("div");r.classList.add("cdk-overlay-container"),GH?r.setAttribute("platform","test"):e||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}]),e}()).\u0275fac=function(e){return new(e||jH)(Ot(Fc),Ot(PF))},jH.\u0275prov=Xe({factory:function(){return new jH(Ot(Fc),Ot(PF))},token:jH,providedIn:"root"}),jH),XH=function(){function e(t,n,r,a,i,o,s,u){var l=this;_classCallCheck(this,e),this._portalOutlet=t,this._host=n,this._pane=r,this._config=a,this._ngZone=i,this._keyboardDispatcher=o,this._document=s,this._location=u,this._backdropElement=null,this._backdropClick=new le,this._attachments=new le,this._detachments=new le,this._locationChanges=J.EMPTY,this._backdropClickHandler=function(e){return l._backdropClick.next(e)},this._keydownEvents=new le,a.scrollStrategy&&(this._scrollStrategy=a.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=a.positionStrategy}return _createClass(e,[{key:"attach",value:function(e){var t=this,n=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(Zf(1)).subscribe((function(){t.hasAttached()&&t.updatePosition()})),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe((function(){return t.dispose()}))),n}},{key:"detach",value:function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();var e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),e}}},{key:"dispose",value:function(){var e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}},{key:"hasAttached",value:function(){return this._portalOutlet.hasAttached()}},{key:"backdropClick",value:function(){return this._backdropClick.asObservable()}},{key:"attachments",value:function(){return this._attachments.asObservable()}},{key:"detachments",value:function(){return this._detachments.asObservable()}},{key:"keydownEvents",value:function(){return this._keydownEvents.asObservable()}},{key:"getConfig",value:function(){return this._config}},{key:"updatePosition",value:function(){this._positionStrategy&&this._positionStrategy.apply()}},{key:"updatePositionStrategy",value:function(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}},{key:"updateSize",value:function(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}},{key:"setDirection",value:function(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}},{key:"addPanelClass",value:function(e){this._pane&&this._toggleClasses(this._pane,e,!0)}},{key:"removePanelClass",value:function(e){this._pane&&this._toggleClasses(this._pane,e,!1)}},{key:"getDirection",value:function(){var e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}},{key:"updateScrollStrategy",value:function(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}},{key:"_updateElementDirection",value:function(){this._host.setAttribute("dir",this.getDirection())}},{key:"_updateElementSize",value:function(){if(this._pane){var e=this._pane.style;e.width=HF(this._config.width),e.height=HF(this._config.height),e.minWidth=HF(this._config.minWidth),e.minHeight=HF(this._config.minHeight),e.maxWidth=HF(this._config.maxWidth),e.maxHeight=HF(this._config.maxHeight)}}},{key:"_togglePointerEvents",value:function(e){this._pane.style.pointerEvents=e?"auto":"none"}},{key:"_attachBackdrop",value:function(){var e=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){e._backdropElement&&e._backdropElement.classList.add("cdk-overlay-backdrop-showing")}))})):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}},{key:"_updateStackingOrder",value:function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}},{key:"detachBackdrop",value:function(){var e,t=this,n=this._backdropElement;if(n){var r=function r(){n&&(n.removeEventListener("click",t._backdropClickHandler),n.removeEventListener("transitionend",r),n.parentNode&&n.parentNode.removeChild(n)),t._backdropElement==n&&(t._backdropElement=null),t._config.backdropClass&&t._toggleClasses(n,t._config.backdropClass,!1),clearTimeout(e)};n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular((function(){n.addEventListener("transitionend",r)})),n.style.pointerEvents="none",e=this._ngZone.runOutsideAngular((function(){return setTimeout(r,500)}))}}},{key:"_toggleClasses",value:function(e,t,n){var r=e.classList;jF(t).forEach((function(e){e&&(n?r.add(e):r.remove(e))}))}},{key:"_detachContentWhenStable",value:function(){var e=this;this._ngZone.runOutsideAngular((function(){var t=e._ngZone.onStable.asObservable().pipe(sL(Ee(e._attachments,e._detachments))).subscribe((function(){e._pane&&e._host&&0!==e._pane.children.length||(e._pane&&e._config.panelClass&&e._toggleClasses(e._pane,e._config.panelClass,!1),e._host&&e._host.parentElement&&(e._previousHostParent=e._host.parentElement,e._previousHostParent.removeChild(e._host)),t.unsubscribe())}))}))}},{key:"_disposeScrollStrategy",value:function(){var e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}},{key:"overlayElement",get:function(){return this._pane}},{key:"backdropElement",get:function(){return this._backdropElement}},{key:"hostElement",get:function(){return this._host}}]),e}(),KH=/([A-Za-z%]+)$/,ZH=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this._viewportRuler=n,this._document=r,this._platform=a,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new le,this._resizeSubscription=J.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(t)}return _createClass(e,[{key:"attach",value:function(e){var t=this;if(this._overlayRef&&e!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),e.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe((function(){t._isInitialRender=!0,t.apply()}))}},{key:"apply",value:function(){if(!this._isDisposed&&this._platform.isBrowser)if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)this.reapplyLastPosition();else{this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();var e,t,n=this._originRect,r=this._overlayRect,a=this._viewportRect,i=[],o=_createForOfIteratorHelper(this._preferredPositions);try{for(o.s();!(t=o.n()).done;){var s=t.value,u=this._getOriginPoint(n,s),l=this._getOverlayPoint(u,r,s),c=this._getOverlayFit(l,r,a,s);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,u);this._canFitWithFlexibleDimensions(c,l,a)?i.push({position:s,origin:u,overlayRect:r,boundingBoxRect:this._calculateBoundingBoxRect(u,s)}):(!e||e.overlayFit.visibleArea<c.visibleArea)&&(e={overlayFit:c,overlayPoint:l,originPoint:u,position:s,overlayRect:r})}}catch(s7){o.e(s7)}finally{o.f()}if(i.length){var h,f=null,d=-1,p=_createForOfIteratorHelper(i);try{for(p.s();!(h=p.n()).done;){var m=h.value,v=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);v>d&&(d=v,f=m)}}catch(s7){p.e(s7)}finally{p.f()}return this._isPushed=!1,void this._applyPosition(f.position,f.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(e.position,e.originPoint);this._applyPosition(e.position,e.originPoint)}}},{key:"detach",value:function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}},{key:"dispose",value:function(){this._isDisposed||(this._boundingBox&&YH(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}},{key:"reapplyLastPosition",value:function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}},{key:"withScrollableContainers",value:function(e){return this._scrollables=e,this}},{key:"withPositions",value:function(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}},{key:"withViewportMargin",value:function(e){return this._viewportMargin=e,this}},{key:"withFlexibleDimensions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hasFlexibleDimensions=e,this}},{key:"withGrowAfterOpen",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._growAfterOpen=e,this}},{key:"withPush",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._canPush=e,this}},{key:"withLockedPosition",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._positionLocked=e,this}},{key:"setOrigin",value:function(e){return this._origin=e,this}},{key:"withDefaultOffsetX",value:function(e){return this._offsetX=e,this}},{key:"withDefaultOffsetY",value:function(e){return this._offsetY=e,this}},{key:"withTransformOriginOn",value:function(e){return this._transformOriginSelector=e,this}},{key:"_getOriginPoint",value:function(e,t){var n;if("center"==t.originX)n=e.left+e.width/2;else{var r=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;n="start"==t.originX?r:a}return{x:n,y:"center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom}}},{key:"_getOverlayPoint",value:function(e,t,n){var r,a;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,a="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+a}}},{key:"_getOverlayFit",value:function(e,t,n,r){var a=e.x,i=e.y,o=this._getOffset(r,"x"),s=this._getOffset(r,"y");o&&(a+=o),s&&(i+=s);var u=0-i,l=i+t.height-n.height,c=this._subtractOverflows(t.width,0-a,a+t.width-n.width),h=this._subtractOverflows(t.height,u,l),f=c*h;return{visibleArea:f,isCompletelyWithinViewport:t.width*t.height===f,fitsInViewportVertically:h===t.height,fitsInViewportHorizontally:c==t.width}}},{key:"_canFitWithFlexibleDimensions",value:function(e,t,n){if(this._hasFlexibleDimensions){var r=n.bottom-t.y,a=n.right-t.x,i=QH(this._overlayRef.getConfig().minHeight),o=QH(this._overlayRef.getConfig().minWidth),s=e.fitsInViewportHorizontally||null!=o&&o<=a;return(e.fitsInViewportVertically||null!=i&&i<=r)&&s}return!1}},{key:"_pushOverlayOnScreen",value:function(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};var r,a,i=this._viewportRect,o=Math.max(e.x+t.width-i.right,0),s=Math.max(e.y+t.height-i.bottom,0),u=Math.max(i.top-n.top-e.y,0),l=Math.max(i.left-n.left-e.x,0);return r=t.width<=i.width?l||-o:e.x<this._viewportMargin?i.left-n.left-e.x:0,a=t.height<=i.height?u||-s:e.y<this._viewportMargin?i.top-n.top-e.y:0,this._previousPushAmount={x:r,y:a},{x:e.x+r,y:e.y+a}}},{key:"_applyPosition",value:function(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){var n=this._getScrollVisibility(),r=new WH(e,n);this._positionChanges.next(r)}this._isInitialRender=!1}},{key:"_setTransformOrigin",value:function(e){if(this._transformOriginSelector){var t,n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r=e.overlayY;t="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(var a=0;a<n.length;a++)n[a].style.transformOrigin="".concat(t," ").concat(r)}}},{key:"_calculateBoundingBoxRect",value:function(e,t){var n,r,a,i,o,s,u=this._viewportRect,l=this._isRtl();if("top"===t.overlayY)r=e.y,n=u.height-r+this._viewportMargin;else if("bottom"===t.overlayY)a=u.height-e.y+2*this._viewportMargin,n=u.height-a+this._viewportMargin;else{var c=Math.min(u.bottom-e.y+u.top,e.y),h=this._lastBoundingBoxSize.height;n=2*c,r=e.y-c,n>h&&!this._isInitialRender&&!this._growAfterOpen&&(r=e.y-h/2)}if("end"===t.overlayX&&!l||"start"===t.overlayX&&l)s=u.width-e.x+this._viewportMargin,i=e.x-this._viewportMargin;else if("start"===t.overlayX&&!l||"end"===t.overlayX&&l)o=e.x,i=u.right-e.x;else{var f=Math.min(u.right-e.x+u.left,e.x),d=this._lastBoundingBoxSize.width;i=2*f,o=e.x-f,i>d&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.x-d/2)}return{top:r,left:o,bottom:a,right:s,width:i,height:n}}},{key:"_setBoundingBoxStyles",value:function(e,t){var n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));var r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{var a=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=HF(n.height),r.top=HF(n.top),r.bottom=HF(n.bottom),r.width=HF(n.width),r.left=HF(n.left),r.right=HF(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",a&&(r.maxHeight=HF(a)),i&&(r.maxWidth=HF(i))}this._lastBoundingBoxSize=n,YH(this._boundingBox.style,r)}},{key:"_resetBoundingBoxStyles",value:function(){YH(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}},{key:"_resetOverlayElementStyles",value:function(){YH(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}},{key:"_setOverlayElementStyles",value:function(e,t){var n={},r=this._hasExactPosition(),a=this._hasFlexibleDimensions,i=this._overlayRef.getConfig();if(r){var o=this._viewportRuler.getViewportScrollPosition();YH(n,this._getExactOverlayY(t,e,o)),YH(n,this._getExactOverlayX(t,e,o))}else n.position="static";var s="",u=this._getOffset(t,"x"),l=this._getOffset(t,"y");u&&(s+="translateX(".concat(u,"px) ")),l&&(s+="translateY(".concat(l,"px)")),n.transform=s.trim(),i.maxHeight&&(r?n.maxHeight=HF(i.maxHeight):a&&(n.maxHeight="")),i.maxWidth&&(r?n.maxWidth=HF(i.maxWidth):a&&(n.maxWidth="")),YH(this._pane.style,n)}},{key:"_getExactOverlayY",value:function(e,t,n){var r={top:"",bottom:""},a=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,n));var i=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return a.y-=i,"bottom"===e.overlayY?r.bottom="".concat(this._document.documentElement.clientHeight-(a.y+this._overlayRect.height),"px"):r.top=HF(a.y),r}},{key:"_getExactOverlayX",value:function(e,t,n){var r={left:"",right:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,n)),"right"===(this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left")?r.right="".concat(this._document.documentElement.clientWidth-(a.x+this._overlayRect.width),"px"):r.left=HF(a.x),r}},{key:"_getScrollVisibility",value:function(){var e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map((function(e){return e.getElementRef().nativeElement.getBoundingClientRect()}));return{isOriginClipped:NH(e,n),isOriginOutsideView:MH(e,n),isOverlayClipped:NH(t,n),isOverlayOutsideView:MH(t,n)}}},{key:"_subtractOverflows",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return e-Math.max(t,0)}),e)}},{key:"_getNarrowedViewportRect",value:function(){var e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}},{key:"_isRtl",value:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"_hasExactPosition",value:function(){return!this._hasFlexibleDimensions||this._isPushed}},{key:"_getOffset",value:function(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}},{key:"_validatePositions",value:function(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach((function(e){VH("originX",e.originX),qH("originY",e.originY),VH("overlayX",e.overlayX),qH("overlayY",e.overlayY)}))}},{key:"_addPanelClasses",value:function(e){var t=this;this._pane&&jF(e).forEach((function(e){""!==e&&-1===t._appliedPanelClasses.indexOf(e)&&(t._appliedPanelClasses.push(e),t._pane.classList.add(e))}))}},{key:"_clearPanelClasses",value:function(){var e=this;this._pane&&(this._appliedPanelClasses.forEach((function(t){e._pane.classList.remove(t)})),this._appliedPanelClasses=[])}},{key:"_getOriginRect",value:function(){var e=this._origin;if(e instanceof bu)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();var t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}},{key:"positions",get:function(){return this._preferredPositions}}]),e}();function YH(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function QH(e){if("number"!=typeof e&&null!=e){var t=_slicedToArray(e.split(KH),2),n=t[0],r=t[1];return r&&"px"!==r?null:parseFloat(n)}return e||null}var $H,eG,tG,nG,rG,aG=function(){function e(t,n,r,a,i,o,s){_classCallCheck(this,e),this._preferredPositions=[],this._positionStrategy=new ZH(r,a,i,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,n)}return _createClass(e,[{key:"attach",value:function(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}},{key:"dispose",value:function(){this._positionStrategy.dispose()}},{key:"detach",value:function(){this._positionStrategy.detach()}},{key:"apply",value:function(){this._positionStrategy.apply()}},{key:"recalculateLastPosition",value:function(){this._positionStrategy.reapplyLastPosition()}},{key:"withScrollableContainers",value:function(e){this._positionStrategy.withScrollableContainers(e)}},{key:"withFallbackPosition",value:function(e,t,n,r){var a=new BH(e,t,n,r);return this._preferredPositions.push(a),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"withDirection",value:function(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}},{key:"withOffsetX",value:function(e){return this._positionStrategy.withDefaultOffsetX(e),this}},{key:"withOffsetY",value:function(e){return this._positionStrategy.withDefaultOffsetY(e),this}},{key:"withLockedPosition",value:function(e){return this._positionStrategy.withLockedPosition(e),this}},{key:"withPositions",value:function(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"setOrigin",value:function(e){return this._positionStrategy.setOrigin(e),this}},{key:"_isRtl",get:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"onPositionChange",get:function(){return this._positionStrategy.positionChanges}},{key:"positions",get:function(){return this._preferredPositions}}]),e}(),iG=function(){function e(){_classCallCheck(this,e),this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return _createClass(e,[{key:"attach",value:function(e){var t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}},{key:"top",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}},{key:"left",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}},{key:"bottom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}},{key:"right",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}},{key:"width",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}},{key:"height",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}},{key:"centerHorizontally",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.left(e),this._justifyContent="center",this}},{key:"centerVertically",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.top(e),this._alignItems="center",this}},{key:"apply",value:function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),r=n.width,a=n.height,i=n.maxWidth,o=n.maxHeight,s=!("100%"!==r&&"100vw"!==r||i&&"100%"!==i&&"100vw"!==i),u=!("100%"!==a&&"100vh"!==a||o&&"100%"!==o&&"100vh"!==o);e.position=this._cssPosition,e.marginLeft=s?"0":this._leftOffset,e.marginTop=u?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,s?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=u?"flex-start":this._alignItems}}},{key:"dispose",value:function(){if(!this._isDisposed&&this._overlayRef){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}}]),e}(),oG=((eG=function(){function e(t,n,r,a){_classCallCheck(this,e),this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=a}return _createClass(e,[{key:"global",value:function(){return new iG}},{key:"connectedTo",value:function(e,t,n){return new aG(t,n,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}},{key:"flexibleConnectedTo",value:function(e){return new ZH(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}]),e}()).\u0275fac=function(e){return new(e||eG)(Ot(kL),Ot(Fc),Ot(PF),Ot(JH))},eG.\u0275prov=Xe({factory:function(){return new eG(Ot(kL),Ot(Fc),Ot(PF),Ot(JH))},token:eG,providedIn:"root"}),eG),sG=0,uG=(($H=function(){function e(t,n,r,a,i,o,s,u,l,c){_classCallCheck(this,e),this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=a,this._keyboardDispatcher=i,this._injector=o,this._ngZone=s,this._document=u,this._directionality=l,this._location=c}return _createClass(e,[{key:"create",value:function(e){var t=this._createHostElement(),n=this._createPaneElement(t),r=this._createPortalOutlet(n),a=new zH(e);return a.direction=a.direction||this._directionality.value,new XH(r,t,n,a,this._ngZone,this._keyboardDispatcher,this._document,this._location)}},{key:"position",value:function(){return this._positionBuilder}},{key:"_createPaneElement",value:function(e){var t=this._document.createElement("div");return t.id="cdk-overlay-".concat(sG++),t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}},{key:"_createHostElement",value:function(){var e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}},{key:"_createPortalOutlet",value:function(e){return this._appRef||(this._appRef=this._injector.get(kc)),new wH(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}]),e}()).\u0275fac=function(e){return new(e||$H)(Ot(LH),Ot(JH),Ot(_u),Ot(oG),Ot(HH),Ot(Wo),Ot(rc),Ot(Fc),Ot(gL),Ot(nh,8))},$H.\u0275prov=Xe({token:$H,factory:$H.\u0275fac}),$H),lG=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],cG=new kt("cdk-connected-overlay-scroll-strategy"),hG=((nG=function e(t){_classCallCheck(this,e),this.elementRef=t}).\u0275fac=function(e){return new(e||nG)(as(bu))},nG.\u0275dir=rn({type:nG,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),nG),fG=((tG=function(){function e(t,n,r,a,i){_classCallCheck(this,e),this._overlay=t,this._dir=i,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=J.EMPTY,this.viewportMargin=0,this.open=!1,this.backdropClick=new fl,this.positionChange=new fl,this.attach=new fl,this.detach=new fl,this.overlayKeydown=new fl,this._templatePortal=new _H(n,r),this._scrollStrategyFactory=a,this.scrollStrategy=this._scrollStrategyFactory()}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._overlayRef&&this._overlayRef.dispose(),this._backdropSubscription.unsubscribe()}},{key:"ngOnChanges",value:function(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}},{key:"_createOverlay",value:function(){var e=this;this.positions&&this.positions.length||(this.positions=lG),this._overlayRef=this._overlay.create(this._buildConfig()),this._overlayRef.keydownEvents().subscribe((function(t){e.overlayKeydown.next(t),27!==t.keyCode||IL(t)||(t.preventDefault(),e._detachOverlay())}))}},{key:"_buildConfig",value:function(){var e=this._position=this.positionStrategy||this._createPositionStrategy(),t=new zH({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(t.width=this.width),(this.height||0===this.height)&&(t.height=this.height),(this.minWidth||0===this.minWidth)&&(t.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),this.panelClass&&(t.panelClass=this.panelClass),t}},{key:"_updatePositionStrategy",value:function(e){var t=this,n=this.positions.map((function(e){return{originX:e.originX,originY:e.originY,overlayX:e.overlayX,overlayY:e.overlayY,offsetX:e.offsetX||t.offsetX,offsetY:e.offsetY||t.offsetY,panelClass:e.panelClass||void 0}}));return e.setOrigin(this.origin.elementRef).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}},{key:"_createPositionStrategy",value:function(){var e=this,t=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(t),t.positionChanges.subscribe((function(t){return e.positionChange.emit(t)})),t}},{key:"_attachOverlay",value:function(){var e=this;this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||(this._overlayRef.attach(this._templatePortal),this.attach.emit()),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe((function(t){e.backdropClick.emit(t)})):this._backdropSubscription.unsubscribe()}},{key:"_detachOverlay",value:function(){this._overlayRef&&(this._overlayRef.detach(),this.detach.emit()),this._backdropSubscription.unsubscribe()}},{key:"offsetX",get:function(){return this._offsetX},set:function(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}},{key:"offsetY",get:function(){return this._offsetY},set:function(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}},{key:"hasBackdrop",get:function(){return this._hasBackdrop},set:function(e){this._hasBackdrop=VF(e)}},{key:"lockPosition",get:function(){return this._lockPosition},set:function(e){this._lockPosition=VF(e)}},{key:"flexibleDimensions",get:function(){return this._flexibleDimensions},set:function(e){this._flexibleDimensions=VF(e)}},{key:"growAfterOpen",get:function(){return this._growAfterOpen},set:function(e){this._growAfterOpen=VF(e)}},{key:"push",get:function(){return this._push},set:function(e){this._push=VF(e)}},{key:"overlayRef",get:function(){return this._overlayRef}},{key:"dir",get:function(){return this._dir?this._dir.value:"ltr"}}]),e}()).\u0275fac=function(e){return new(e||tG)(as(uG),as(ju),as(Gu),as(cG),as(gL,8))},tG.\u0275dir=rn({type:tG,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown"},exportAs:["cdkConnectedOverlay"],features:[ou]}),tG),dG={provide:cG,deps:[uG],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},pG=((rG=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:rG}),rG.\u0275inj=Ke({factory:function(e){return new(e||rG)},providers:[uG,dG],imports:[[_L,AH,SL],SL]}),rG),mG=["trigger"],vG=["panel"];function yG(e,t){if(1&e&&(ls(0,"span",8),Gs(1),cs()),2&e){var n=ws();Ka(1),Js(n.placeholder||"\xa0")}}function gG(e,t){if(1&e&&(ls(0,"span"),Gs(1),cs()),2&e){var n=ws(2);Ka(1),Js(n.triggerValue||"\xa0")}}function _G(e,t){1&e&&Ss(0,0,["*ngSwitchCase","true"])}function bG(e,t){1&e&&(ls(0,"span",9),ns(1,gG,2,1,"span",10),ns(2,_G,1,0,void 0,11),cs()),2&e&&(ss("ngSwitch",!!ws().customTrigger),Ka(2),ss("ngSwitchCase",!0))}function xG(e,t){if(1&e){var n=ps();ls(0,"div",12),ls(1,"div",13,14),ys("@transformPanel.done",(function(e){return Mn(n),ws()._panelDoneAnimatingStream.next(e.toState)}))("keydown",(function(e){return Mn(n),ws()._handleKeydown(e)})),Ss(3,1),cs(),cs()}if(2&e){var r=ws();ss("@transformPanelWrap",void 0),Ka(1),Zs("mat-select-panel ",r._getPanelTheme(),""),Ms("transform-origin",r._transformOrigin)("font-size",r._triggerFontSize,"px"),ss("ngClass",r.panelClass)("@transformPanel",r.multiple?"showing-multiple":"showing"),es("id",r.id+"-panel")}}var wG,kG,CG,SG=[[["mat-select-trigger"]],"*"],IG=["mat-select-trigger","*"],DG={transformPanelWrap:dz("transformPanelWrap",[gz("* => void",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:11,selector:e,animation:t,options:n}}("@transformPanel",[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:9,options:e}}()],{optional:!0}))]),transformPanel:dz("transformPanel",[yz("void",vz({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),yz("showing",vz({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),yz("showing-multiple",vz({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),gz("void => *",pz("120ms cubic-bezier(0, 0, 0.2, 1)")),gz("* => void",pz("100ms 25ms linear",vz({opacity:0})))])},AG=0,TG=new kt("mat-select-scroll-strategy"),EG=new kt("MAT_SELECT_CONFIG"),RG={provide:TG,deps:[uG],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},OG=function e(t,n){_classCallCheck(this,e),this.source=t,this.value=n},MG=JW(XW(HW(KW((function e(t,n,r,a,i){_classCallCheck(this,e),this._elementRef=t,this._defaultErrorStateMatcher=n,this._parentForm=r,this._parentFormGroup=a,this.ngControl=i}))))),NG=((CG=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||CG)},CG.\u0275dir=rn({type:CG,selectors:[["mat-select-trigger"]]}),CG),PG=((kG=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o,s,u,l,c,h,f,d,p,m){var v;return _classCallCheck(this,n),(v=t.call(this,o,i,u,l,h))._viewportRuler=e,v._changeDetectorRef=r,v._ngZone=a,v._dir=s,v._parentFormField=c,v.ngControl=h,v._liveAnnouncer=p,v._panelOpen=!1,v._required=!1,v._scrollTop=0,v._multiple=!1,v._compareWith=function(e,t){return e===t},v._uid="mat-select-".concat(AG++),v._destroy=new le,v._triggerFontSize=0,v._onChange=function(){},v._onTouched=function(){},v._optionIds="",v._transformOrigin="top",v._panelDoneAnimatingStream=new le,v._offsetY=0,v._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],v._disableOptionCentering=!1,v._focused=!1,v.controlType="mat-select",v.ariaLabel="",v.optionSelectionChanges=Ef((function(){var e=v.options;return e?e.changes.pipe(od(e),nd((function(){return Ee.apply(void 0,_toConsumableArray(e.map((function(e){return e.onSelectionChange}))))}))):v._ngZone.onStable.asObservable().pipe(Zf(1),nd((function(){return v.optionSelectionChanges})))})),v.openedChange=new fl,v._openedStream=v.openedChange.pipe(Of((function(e){return e})),be((function(){}))),v._closedStream=v.openedChange.pipe(Of((function(e){return!e})),be((function(){}))),v.selectionChange=new fl,v.valueChange=new fl,v.ngControl&&(v.ngControl.valueAccessor=_assertThisInitialized(v)),v._scrollStrategyFactory=d,v._scrollStrategy=v._scrollStrategyFactory(),v.tabIndex=parseInt(f)||0,v.id=v.id,m&&(null!=m.disableOptionCentering&&(v.disableOptionCentering=m.disableOptionCentering),null!=m.typeaheadDebounceInterval&&(v.typeaheadDebounceInterval=m.typeaheadDebounceInterval)),v}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this._selectionModel=new bL(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(YF(),sL(this._destroy)).subscribe((function(){e.panelOpen?(e._scrollTop=0,e.openedChange.emit(!0)):(e.openedChange.emit(!1),e.overlayDir.offsetX=0,e._changeDetectorRef.markForCheck())})),this._viewportRuler.change().pipe(sL(this._destroy)).subscribe((function(){e._panelOpen&&(e._triggerRect=e.trigger.nativeElement.getBoundingClientRect(),e._changeDetectorRef.markForCheck())}))}},{key:"ngAfterContentInit",value:function(){var e=this;this._initKeyManager(),this._selectionModel.changed.pipe(sL(this._destroy)).subscribe((function(e){e.added.forEach((function(e){return e.select()})),e.removed.forEach((function(e){return e.deselect()}))})),this.options.changes.pipe(od(null),sL(this._destroy)).subscribe((function(){e._resetOptions(),e._initializeSelection()}))}},{key:"ngDoCheck",value:function(){this.ngControl&&this.updateErrorState()}},{key:"ngOnChanges",value:function(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}},{key:"ngOnDestroy",value:function(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}},{key:"toggle",value:function(){this.panelOpen?this.close():this.open()}},{key:"open",value:function(){var e=this;!this.disabled&&this.options&&this.options.length&&!this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._calculateOverlayPosition(),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this._ngZone.onStable.asObservable().pipe(Zf(1)).subscribe((function(){e._triggerFontSize&&e.overlayDir.overlayRef&&e.overlayDir.overlayRef.overlayElement&&(e.overlayDir.overlayRef.overlayElement.style.fontSize="".concat(e._triggerFontSize,"px"))})))}},{key:"close",value:function(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}},{key:"writeValue",value:function(e){this.options&&this._setSelectionByValue(e)}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}},{key:"_isRtl",value:function(){return!!this._dir&&"rtl"===this._dir.value}},{key:"_handleKeydown",value:function(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}},{key:"_handleClosedKeydown",value:function(e){var t=e.keyCode,n=40===t||38===t||37===t||39===t,r=13===t||32===t,a=this._keyManager;if(!a.isTyping()&&r&&!IL(e)||(this.multiple||e.altKey)&&n)e.preventDefault(),this.open();else if(!this.multiple){var i=this.selected;36===t||35===t?(36===t?a.setFirstItemActive():a.setLastItemActive(),e.preventDefault()):a.onKeydown(e);var o=this.selected;o&&i!==o&&this._liveAnnouncer.announce(o.viewValue,1e4)}}},{key:"_handleOpenKeydown",value:function(e){var t=this._keyManager,n=e.keyCode,r=40===n||38===n,a=t.isTyping();if(36===n||35===n)e.preventDefault(),36===n?t.setFirstItemActive():t.setLastItemActive();else if(r&&e.altKey)e.preventDefault(),this.close();else if(a||13!==n&&32!==n||!t.activeItem||IL(e))if(!a&&this._multiple&&65===n&&e.ctrlKey){e.preventDefault();var i=this.options.some((function(e){return!e.disabled&&!e.selected}));this.options.forEach((function(e){e.disabled||(i?e.select():e.deselect())}))}else{var o=t.activeItemIndex;t.onKeydown(e),this._multiple&&r&&e.shiftKey&&t.activeItem&&t.activeItemIndex!==o&&t.activeItem._selectViaInteraction()}else e.preventDefault(),t.activeItem._selectViaInteraction()}},{key:"_onFocus",value:function(){this.disabled||(this._focused=!0,this.stateChanges.next())}},{key:"_onBlur",value:function(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}},{key:"_onAttached",value:function(){var e=this;this.overlayDir.positionChange.pipe(Zf(1)).subscribe((function(){e._changeDetectorRef.detectChanges(),e._calculateOverlayOffsetX(),e.panel.nativeElement.scrollTop=e._scrollTop}))}},{key:"_getPanelTheme",value:function(){return this._parentFormField?"mat-".concat(this._parentFormField.color):""}},{key:"_initializeSelection",value:function(){var e=this;Promise.resolve().then((function(){e._setSelectionByValue(e.ngControl?e.ngControl.value:e._value),e.stateChanges.next()}))}},{key:"_setSelectionByValue",value:function(e){var t=this;if(this.multiple&&e){if(!Array.isArray(e))throw Error("Value must be an array in multiple-selection mode.");this._selectionModel.clear(),e.forEach((function(e){return t._selectValue(e)})),this._sortValues()}else{this._selectionModel.clear();var n=this._selectValue(e);n?this._keyManager.setActiveItem(n):this.panelOpen||this._keyManager.setActiveItem(-1)}this._changeDetectorRef.markForCheck()}},{key:"_selectValue",value:function(e){var t=this,n=this.options.find((function(n){try{return null!=n.value&&t._compareWith(n.value,e)}catch(r){return ra()&&console.warn(r),!1}}));return n&&this._selectionModel.select(n),n}},{key:"_initKeyManager",value:function(){var e=this;this._keyManager=new qL(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(sL(this._destroy)).subscribe((function(){e.panelOpen&&(!e.multiple&&e._keyManager.activeItem&&e._keyManager.activeItem._selectViaInteraction(),e.focus(),e.close())})),this._keyManager.change.pipe(sL(this._destroy)).subscribe((function(){e._panelOpen&&e.panel?e._scrollActiveOptionIntoView():e._panelOpen||e.multiple||!e._keyManager.activeItem||e._keyManager.activeItem._selectViaInteraction()}))}},{key:"_resetOptions",value:function(){var e=this,t=Ee(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(sL(t)).subscribe((function(t){e._onSelect(t.source,t.isUserInput),t.isUserInput&&!e.multiple&&e._panelOpen&&(e.close(),e.focus())})),Ee.apply(void 0,_toConsumableArray(this.options.map((function(e){return e._stateChanges})))).pipe(sL(t)).subscribe((function(){e._changeDetectorRef.markForCheck(),e.stateChanges.next()})),this._setOptionIds()}},{key:"_onSelect",value:function(e,t){var n=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(n!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())):(e.deselect(),this._selectionModel.clear(),this._propagateChanges(e.value)),n!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}},{key:"_sortValues",value:function(){var e=this;if(this.multiple){var t=this.options.toArray();this._selectionModel.sort((function(n,r){return e.sortComparator?e.sortComparator(n,r,t):t.indexOf(n)-t.indexOf(r)})),this.stateChanges.next()}}},{key:"_propagateChanges",value:function(e){var t;t=this.multiple?this.selected.map((function(e){return e.value})):this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(new OG(this,t)),this._changeDetectorRef.markForCheck()}},{key:"_setOptionIds",value:function(){this._optionIds=this.options.map((function(e){return e.id})).join(" ")}},{key:"_highlightCorrectOption",value:function(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}},{key:"_scrollActiveOptionIntoView",value:function(){var e,t,n,r,a=this._keyManager.activeItemIndex||0,i=qq(a,this.options,this.optionGroups);this.panel.nativeElement.scrollTop=(e=a+i,t=this._getItemHeight(),n=this.panel.nativeElement.scrollTop,(r=e*t)<n?r:r+t>n+256?Math.max(0,r-256+t):n)}},{key:"focus",value:function(e){this._elementRef.nativeElement.focus(e)}},{key:"_getOptionIndex",value:function(e){return this.options.reduce((function(t,n,r){return void 0!==t?t:e===n?r:void 0}),void 0)}},{key:"_calculateOverlayPosition",value:function(){var e=this._getItemHeight(),t=this._getItemCount(),n=Math.min(t*e,256),r=t*e-n,a=this.empty?0:this._getOptionIndex(this._selectionModel.selected[0]);a+=qq(a,this.options,this.optionGroups);var i=n/2;this._scrollTop=this._calculateOverlayScroll(a,i,r),this._offsetY=this._calculateOverlayOffsetY(a,i,r),this._checkOverlayWithinViewport(r)}},{key:"_calculateOverlayScroll",value:function(e,t,n){var r=this._getItemHeight();return Math.min(Math.max(0,r*e-t+r/2),n)}},{key:"_getAriaLabel",value:function(){return this.ariaLabelledby?null:this.ariaLabel||this.placeholder}},{key:"_getAriaLabelledby",value:function(){return this.ariaLabelledby?this.ariaLabelledby:this._parentFormField&&this._parentFormField._hasFloatingLabel()&&!this._getAriaLabel()&&this._parentFormField._labelId||null}},{key:"_getAriaActiveDescendant",value:function(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}},{key:"_calculateOverlayOffsetX",value:function(){var e,t=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),r=this._isRtl(),a=this.multiple?56:32;if(this.multiple)e=40;else{var i=this._selectionModel.selected[0]||this.options.first;e=i&&i.group?32:16}r||(e*=-1);var o=0-(t.left+e-(r?a:0)),s=t.right+e-n.width+(r?0:a);o>0?e+=o+8:s>0&&(e-=s+8),this.overlayDir.offsetX=Math.round(e),this.overlayDir.overlayRef.updatePosition()}},{key:"_calculateOverlayOffsetY",value:function(e,t,n){var r,a=this._getItemHeight(),i=(a-this._triggerRect.height)/2,o=Math.floor(256/a);return this._disableOptionCentering?0:(r=0===this._scrollTop?e*a:this._scrollTop===n?(e-(this._getItemCount()-o))*a+(a-(this._getItemCount()*a-256)%a):t-a/2,Math.round(-1*r-i))}},{key:"_checkOverlayWithinViewport",value:function(e){var t=this._getItemHeight(),n=this._viewportRuler.getViewportSize(),r=this._triggerRect.top-8,a=n.height-this._triggerRect.bottom-8,i=Math.abs(this._offsetY),o=Math.min(this._getItemCount()*t,256)-i-this._triggerRect.height;o>a?this._adjustPanelUp(o,a):i>r?this._adjustPanelDown(i,r,e):this._transformOrigin=this._getOriginBasedOnOption()}},{key:"_adjustPanelUp",value:function(e,t){var n=Math.round(e-t);this._scrollTop-=n,this._offsetY-=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}},{key:"_adjustPanelDown",value:function(e,t,n){var r=Math.round(e-t);if(this._scrollTop+=r,this._offsetY+=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=n)return this._scrollTop=n,this._offsetY=0,void(this._transformOrigin="50% top 0px")}},{key:"_getOriginBasedOnOption",value:function(){var e=this._getItemHeight(),t=(e-this._triggerRect.height)/2;return"50% ".concat(Math.abs(this._offsetY)-t+e/2,"px 0px")}},{key:"_getItemCount",value:function(){return this.options.length+this.optionGroups.length}},{key:"_getItemHeight",value:function(){return 3*this._triggerFontSize}},{key:"setDescribedByIds",value:function(e){this._ariaDescribedby=e.join(" ")}},{key:"onContainerClick",value:function(){this.focus(),this.open()}},{key:"focused",get:function(){return this._focused||this._panelOpen}},{key:"placeholder",get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()}},{key:"required",get:function(){return this._required},set:function(e){this._required=VF(e),this.stateChanges.next()}},{key:"multiple",get:function(){return this._multiple},set:function(e){if(this._selectionModel)throw Error("Cannot change `multiple` mode of select after initialization.");this._multiple=VF(e)}},{key:"disableOptionCentering",get:function(){return this._disableOptionCentering},set:function(e){this._disableOptionCentering=VF(e)}},{key:"compareWith",get:function(){return this._compareWith},set:function(e){if("function"!=typeof e)throw Error("`compareWith` must be a function.");this._compareWith=e,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(e){e!==this._value&&(this.writeValue(e),this._value=e)}},{key:"typeaheadDebounceInterval",get:function(){return this._typeaheadDebounceInterval},set:function(e){this._typeaheadDebounceInterval=UF(e)}},{key:"id",get:function(){return this._id},set:function(e){this._id=e||this._uid,this.stateChanges.next()}},{key:"panelOpen",get:function(){return this._panelOpen}},{key:"selected",get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}},{key:"triggerValue",get:function(){if(this.empty)return"";if(this._multiple){var e=this._selectionModel.selected.map((function(e){return e.viewValue}));return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}},{key:"empty",get:function(){return!this._selectionModel||this._selectionModel.isEmpty()}},{key:"shouldLabelFloat",get:function(){return this._panelOpen||!this.empty}}]),n}(MG)).\u0275fac=function(e){return new(e||kG)(as(kL),as(Co),as(rc),as(bq),as(bu),as(gL,8),as(UU,8),as(KU,8),as(eH,8),as(LV,10),is("tabindex"),as(TG),as(QL),as(EG,8))},kG.\u0275cmp=Yt({type:kG,selectors:[["mat-select"]],contentQueries:function(e,t,n){var r;1&e&&(Dl(n,NG,!0),Dl(n,Wq,!0),Dl(n,Pq,!0)),2&e&&(kl(r=El())&&(t.customTrigger=r.first),kl(r=El())&&(t.options=r),kl(r=El())&&(t.optionGroups=r))},viewQuery:function(e,t){var n;1&e&&(Sl(mG,!0),Sl(vG,!0),Sl(fG,!0)),2&e&&(kl(n=El())&&(t.trigger=n.first),kl(n=El())&&(t.panel=n.first),kl(n=El())&&(t.overlayDir=n.first))},hostAttrs:["role","listbox",1,"mat-select"],hostVars:19,hostBindings:function(e,t){1&e&&ys("keydown",(function(e){return t._handleKeydown(e)}))("focus",(function(){return t._onFocus()}))("blur",(function(){return t._onBlur()})),2&e&&(es("id",t.id)("tabindex",t.tabIndex)("aria-label",t._getAriaLabel())("aria-labelledby",t._getAriaLabelledby())("aria-required",t.required.toString())("aria-disabled",t.disabled.toString())("aria-invalid",t.errorState)("aria-owns",t.panelOpen?t._optionIds:null)("aria-multiselectable",t.multiple)("aria-describedby",t._ariaDescribedby||null)("aria-activedescendant",t._getAriaActiveDescendant()),Ns("mat-select-disabled",t.disabled)("mat-select-invalid",t.errorState)("mat-select-required",t.required)("mat-select-empty",t.empty))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],id:"id",disableOptionCentering:"disableOptionCentering",typeaheadDebounceInterval:"typeaheadDebounceInterval",placeholder:"placeholder",required:"required",multiple:"multiple",compareWith:"compareWith",value:"value",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[vu([{provide:Oj,useExisting:kG},{provide:Bq,useExisting:kG}]),eu,ou],ngContentSelectors:IG,decls:9,vars:9,consts:[["cdk-overlay-origin","","aria-hidden","true",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder"],[1,"mat-select-value-text",3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-panel-wrap"],[3,"ngClass","keydown"],["panel",""]],template:function(e,t){if(1&e&&(Cs(SG),ls(0,"div",0,1),ys("click",(function(){return t.toggle()})),ls(3,"div",2),ns(4,yG,2,1,"span",3),ns(5,bG,3,2,"span",4),cs(),ls(6,"div",5),hs(7,"div",6),cs(),cs(),ns(8,xG,4,11,"ng-template",7),ys("backdropClick",(function(){return t.close()}))("attach",(function(){return t._onAttached()}))("detach",(function(){return t.close()}))),2&e){var n=rs(1);Ka(3),ss("ngSwitch",t.empty),Ka(1),ss("ngSwitchCase",!0),Ka(1),ss("ngSwitchCase",!1),Ka(3),ss("cdkConnectedOverlayScrollStrategy",t._scrollStrategy)("cdkConnectedOverlayOrigin",n)("cdkConnectedOverlayOpen",t.panelOpen)("cdkConnectedOverlayPositions",t._positions)("cdkConnectedOverlayMinWidth",null==t._triggerRect?null:t._triggerRect.width)("cdkConnectedOverlayOffsetY",t._offsetY)}},directives:[hG,Oh,Mh,fG,Nh,dh],styles:[".mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}\n"],encapsulation:2,data:{animation:[DG.transformPanelWrap,DG.transformPanel]},changeDetection:0}),kG),FG=((wG=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:wG}),wG.\u0275inj=Ke({factory:function(e){return new(e||wG)},providers:[RG],imports:[[Lh,pG,Uq,jW],CL,nH,Uq,jW]}),wG),LG=["*"];function zG(e){return Error('Unable to find icon with the name "'.concat(e,'"'))}function BG(e){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL "+"via Angular's DomSanitizer. Attempted URL was \"".concat(e,'".'))}function WG(e){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by "+"Angular's DomSanitizer. Attempted literal was \"".concat(e,'".'))}var qG,VG=function e(t,n){_classCallCheck(this,e),this.options=n,t.nodeName?this.svgElement=t:this.url=t},UG=((qG=function(){function e(t,n,r,a){_classCallCheck(this,e),this._httpClient=t,this._sanitizer=n,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=r}return _createClass(e,[{key:"addSvgIcon",value:function(e,t,n){return this.addSvgIconInNamespace("",e,t,n)}},{key:"addSvgIconLiteral",value:function(e,t,n){return this.addSvgIconLiteralInNamespace("",e,t,n)}},{key:"addSvgIconInNamespace",value:function(e,t,n,r){return this._addSvgIconConfig(e,t,new VG(n,r))}},{key:"addSvgIconLiteralInNamespace",value:function(e,t,n,r){var a=this._sanitizer.sanitize(Ia.HTML,n);if(!a)throw WG(n);var i=this._createSvgElementForSingleIcon(a,r);return this._addSvgIconConfig(e,t,new VG(i,r))}},{key:"addSvgIconSet",value:function(e,t){return this.addSvgIconSetInNamespace("",e,t)}},{key:"addSvgIconSetLiteral",value:function(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}},{key:"addSvgIconSetInNamespace",value:function(e,t,n){return this._addSvgIconSetConfig(e,new VG(t,n))}},{key:"addSvgIconSetLiteralInNamespace",value:function(e,t,n){var r=this._sanitizer.sanitize(Ia.HTML,t);if(!r)throw WG(t);var a=this._svgElementFromString(r);return this._addSvgIconSetConfig(e,new VG(a,n))}},{key:"registerFontClassAlias",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this._fontCssClassesByAlias.set(e,t),this}},{key:"classNameForFontAlias",value:function(e){return this._fontCssClassesByAlias.get(e)||e}},{key:"setDefaultFontSetClass",value:function(e){return this._defaultFontSetClass=e,this}},{key:"getDefaultFontSetClass",value:function(){return this._defaultFontSetClass}},{key:"getSvgIconFromUrl",value:function(e){var t=this,n=this._sanitizer.sanitize(Ia.RESOURCE_URL,e);if(!n)throw BG(e);var r=this._cachedIconsByUrl.get(n);return r?wf(jG(r)):this._loadSvgIconFromConfig(new VG(e)).pipe(fd((function(e){return t._cachedIconsByUrl.set(n,e)})),be((function(e){return jG(e)})))}},{key:"getNamedSvgIcon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=HG(t,e),r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);var a,i=this._iconSetConfigs.get(t);return i?this._getSvgFromIconSetConfigs(e,i):(a=zG(n),new re((function(e){return e.error(a)})))}},{key:"ngOnDestroy",value:function(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}},{key:"_getSvgFromConfig",value:function(e){return e.svgElement?wf(jG(e.svgElement)):this._loadSvgIconFromConfig(e).pipe(fd((function(t){return e.svgElement=t})),be((function(e){return jG(e)})))}},{key:"_getSvgFromIconSetConfigs",value:function(e,t){var n=this,r=this._extractIconWithNameFromAnySet(e,t);return r?wf(r):_V(t.filter((function(e){return!e.svgElement})).map((function(e){return n._loadSvgIconSetFromConfig(e).pipe(Jf((function(t){var r="Loading icon set URL: ".concat(n._sanitizer.sanitize(Ia.RESOURCE_URL,e.url)," failed: ").concat(t.message);return n._errorHandler?n._errorHandler.handleError(new Error(r)):console.error(r),wf(null)})))}))).pipe(be((function(){var r=n._extractIconWithNameFromAnySet(e,t);if(!r)throw zG(e);return r})))}},{key:"_extractIconWithNameFromAnySet",value:function(e,t){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.svgElement){var a=this._extractSvgIconFromSet(r.svgElement,e,r.options);if(a)return a}}return null}},{key:"_loadSvgIconFromConfig",value:function(e){var t=this;return this._fetchUrl(e.url).pipe(be((function(n){return t._createSvgElementForSingleIcon(n,e.options)})))}},{key:"_loadSvgIconSetFromConfig",value:function(e){var t=this;return e.svgElement?wf(e.svgElement):this._fetchUrl(e.url).pipe(be((function(n){return e.svgElement||(e.svgElement=t._svgElementFromString(n)),e.svgElement})))}},{key:"_createSvgElementForSingleIcon",value:function(e,t){var n=this._svgElementFromString(e);return this._setSvgAttributes(n,t),n}},{key:"_extractSvgIconFromSet",value:function(e,t,n){var r=e.querySelector('[id="'.concat(t,'"]'));if(!r)return null;var a=r.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,n);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),n);var i=this._svgElementFromString("<svg></svg>");return i.appendChild(a),this._setSvgAttributes(i,n)}},{key:"_svgElementFromString",value:function(e){var t=this._document.createElement("DIV");t.innerHTML=e;var n=t.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}},{key:"_toSvgElement",value:function(e){for(var t=this._svgElementFromString("<svg></svg>"),n=e.attributes,r=0;r<n.length;r++){var a=n[r],i=a.name,o=a.value;"id"!==i&&t.setAttribute(i,o)}for(var s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[s].cloneNode(!0));return t}},{key:"_setSvgAttributes",value:function(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}},{key:"_fetchUrl",value:function(e){var t=this;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==e)throw Error('Cannot fetch icon from URL "'.concat(e,'".'));var n=this._sanitizer.sanitize(Ia.RESOURCE_URL,e);if(!n)throw BG(e);var r=this._inProgressUrlFetches.get(n);if(r)return r;var a=this._httpClient.get(n,{responseType:"text"}).pipe(md((function(){return t._inProgressUrlFetches.delete(n)})),ze());return this._inProgressUrlFetches.set(n,a),a}},{key:"_addSvgIconConfig",value:function(e,t,n){return this._svgIconConfigs.set(HG(e,t),n),this}},{key:"_addSvgIconSetConfig",value:function(e,t){var n=this._iconSetConfigs.get(e);return n?n.push(t):this._iconSetConfigs.set(e,[t]),this}}]),e}()).\u0275fac=function(e){return new(e||qG)(Ot(hF,8),Ot(yf),Ot(Fc,8),Ot(Hr,8))},qG.\u0275prov=Xe({factory:function(){return new qG(Ot(hF,8),Ot(yf),Ot(Fc,8),Ot(Hr,8))},token:qG,providedIn:"root"}),qG);function jG(e){return e.cloneNode(!0)}function HG(e,t){return e+":"+t}var GG,JG,XG=GW((function e(t){_classCallCheck(this,e),this._elementRef=t})),KG=new kt("mat-icon-location",{providedIn:"root",factory:function(){var e=Mt(Fc),t=e?e.location:null;return{getPathname:function(){return t?t.pathname+t.search:""}}}}),ZG=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],YG=ZG.map((function(e){return"[".concat(e,"]")})).join(", "),QG=/^url\(['"]?#(.*?)['"]?\)$/,$G=((JG=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o){var s;return _classCallCheck(this,n),(s=t.call(this,e))._iconRegistry=r,s._location=i,s._errorHandler=o,s._inline=!1,s._currentIconFetch=J.EMPTY,a||e.nativeElement.setAttribute("aria-hidden","true"),s}return _createClass(n,[{key:"_splitIconName",value:function(e){if(!e)return["",""];var t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error('Invalid icon name: "'.concat(e,'"'))}}},{key:"ngOnChanges",value:function(e){var t=this,n=e.svgIcon;if(n)if(this._currentIconFetch.unsubscribe(),this.svgIcon){var r=_slicedToArray(this._splitIconName(this.svgIcon),2),a=r[0],i=r[1];this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,a).pipe(Zf(1)).subscribe((function(e){return t._setSvgElement(e)}),(function(e){var n="Error retrieving icon ".concat(a,":").concat(i,"! ").concat(e.message);t._errorHandler?t._errorHandler.handleError(new Error(n)):console.error(n)}))}else n.previousValue&&this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()}},{key:"ngOnInit",value:function(){this._usingFontIcon()&&this._updateFontIconClasses()}},{key:"ngAfterViewChecked",value:function(){var e=this._elementsWithExternalReferences;if(e&&this._location&&e.size){var t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}},{key:"ngOnDestroy",value:function(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}},{key:"_usingFontIcon",value:function(){return!this.svgIcon}},{key:"_setSvgElement",value:function(e){this._clearSvgElement();for(var t=e.querySelectorAll("style"),n=0;n<t.length;n++)t[n].textContent+=" ";if(this._location){var r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r)}this._elementRef.nativeElement.appendChild(e)}},{key:"_clearSvgElement",value:function(){var e=this._elementRef.nativeElement,t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){var n=e.childNodes[t];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||e.removeChild(n)}}},{key:"_updateFontIconClasses",value:function(){if(this._usingFontIcon()){var e=this._elementRef.nativeElement,t=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();t!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),t&&e.classList.add(t),this._previousFontSetClass=t),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}}},{key:"_cleanupFontValue",value:function(e){return"string"==typeof e?e.trim().split(" ")[0]:e}},{key:"_prependPathToReferences",value:function(e){var t=this._elementsWithExternalReferences;t&&t.forEach((function(t,n){t.forEach((function(t){n.setAttribute(t.name,"url('".concat(e,"#").concat(t.value,"')"))}))}))}},{key:"_cacheChildrenWithExternalReferences",value:function(e){for(var t=e.querySelectorAll(YG),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map,r=function(e){ZG.forEach((function(r){var a=t[e],i=a.getAttribute(r),o=i?i.match(QG):null;if(o){var s=n.get(a);s||(s=[],n.set(a,s)),s.push({name:r,value:o[1]})}}))},a=0;a<t.length;a++)r(a)}},{key:"inline",get:function(){return this._inline},set:function(e){this._inline=VF(e)}},{key:"fontSet",get:function(){return this._fontSet},set:function(e){this._fontSet=this._cleanupFontValue(e)}},{key:"fontIcon",get:function(){return this._fontIcon},set:function(e){this._fontIcon=this._cleanupFontValue(e)}}]),n}(XG)).\u0275fac=function(e){return new(e||JG)(as(bu),as(UG),is("aria-hidden"),as(KG,8),as(Hr,8))},JG.\u0275cmp=Yt({type:JG,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:4,hostBindings:function(e,t){2&e&&Ns("mat-icon-inline",t.inline)("mat-icon-no-color","primary"!==t.color&&"accent"!==t.color&&"warn"!==t.color)},inputs:{color:"color",inline:"inline",fontSet:"fontSet",fontIcon:"fontIcon",svgIcon:"svgIcon"},exportAs:["matIcon"],features:[eu,ou],ngContentSelectors:LG,decls:1,vars:0,template:function(e,t){1&e&&(Cs(),Ss(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),JG),eJ=((GG=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:GG}),GG.\u0275inj=Ke({factory:function(e){return new(e||GG)},imports:[[jW],jW]}),GG);function tJ(e,t){1&e&&(ls(0,"small",28),Gs(1,"Must Envision a trend!"),cs())}function nJ(e,t){1&e&&(ls(0,"small",29),Gs(1,"Must Envision a year!"),cs())}var rJ,aJ=((rJ=function(){function e(t,n){_classCallCheck(this,e),this.trendsapiService=t,this.sidebarService=n,this.clicked=!1,this.loading=!1,this.byDate=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.searchForm=new BU({keyword:new zU(null,HV.required),year:new zU(null,HV.required)})}},{key:"ngOnDestroy",value:function(){this.arraybyDate.unsubscribe()}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.clicked=!0,this.searchForm.valid?(this.sidebarService.setLoading(!0),this.loading=!0,this.trendsapiService.getData({keyword:this.searchForm.get("keyword").value,year:this.searchForm.get("year").value}).then((function(e){t.sidebarService.saveOriginal(e),t.arraybyDate=t.sidebarService.byDate.subscribe((function(e){return t.byDate=e})),t.sidebarService.parseCountries(e),t.sidebarService.setLoading(!1),t.loading=!1})).catch((function(e){console.log(e)}))):(this.searchForm.get("year"),this.searchForm.get("keyword"))}}]),e}()).\u0275fac=function(e){return new(e||rJ)(as(DF),as(cv))},rJ.\u0275cmp=Yt({type:rJ,selectors:[["app-searchbar"]],decls:50,vars:4,consts:[["id","form","autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-6"],[1,""],["matInput","","formControlName","keyword","id","seachInput","type","text","placeholder","ex: #BLM","aria-placeholder","ex: #BLM",1,""],["id","passwordHelpBlock","class","text-danger",4,"ngIf"],[1,"col-4"],["formControlName","year"],["value","2020"],["value","2019"],["value","2018"],["value","2017"],["value","2016"],["value","2015"],["value","2014"],["value","2013"],["value","2012"],["value","2011"],["value","2010"],["value","2009"],["value","2008"],["value","2007"],["value","2006"],["value","2005"],["value","2004"],["id","passwordHelpBlock","height","12","class","text-danger",4,"ngIf"],[1,"col-2"],["mat-button","","type","button","mat-icon-button","",3,"disabled","click"],["id","passwordHelpBlock",1,"text-danger"],["id","passwordHelpBlock","height","12",1,"text-danger"]],template:function(e,t){1&e&&(ls(0,"form",0),ys("ngSubmit",(function(e){return t.onSubmit(e)})),ls(1,"div",1),ls(2,"mat-form-field",2),ls(3,"mat-label",3),Gs(4,"Search for a trend"),cs(),hs(5,"input",4),ns(6,tJ,2,0,"small",5),cs(),ls(7,"mat-form-field",6),ls(8,"mat-label",3),Gs(9,"Select a year"),cs(),ls(10,"mat-select",7),ls(11,"mat-option",8),Gs(12,"2020"),cs(),ls(13,"mat-option",9),Gs(14,"2019"),cs(),ls(15,"mat-option",10),Gs(16,"2018"),cs(),ls(17,"mat-option",11),Gs(18,"2017"),cs(),ls(19,"mat-option",12),Gs(20,"2016"),cs(),ls(21,"mat-option",13),Gs(22,"2015"),cs(),ls(23,"mat-option",14),Gs(24,"2014"),cs(),ls(25,"mat-option",15),Gs(26,"2013"),cs(),ls(27,"mat-option",16),Gs(28,"2012"),cs(),ls(29,"mat-option",17),Gs(30,"2011"),cs(),ls(31,"mat-option",18),Gs(32,"2010"),cs(),ls(33,"mat-option",19),Gs(34,"2009"),cs(),ls(35,"mat-option",20),Gs(36,"2008"),cs(),ls(37,"mat-option",21),Gs(38,"2007"),cs(),ls(39,"mat-option",22),Gs(40,"2006"),cs(),ls(41,"mat-option",23),Gs(42,"2005"),cs(),ls(43,"mat-option",24),Gs(44,"2004"),cs(),cs(),ns(45,nJ,2,0,"small",25),cs(),ls(46,"div",26),ls(47,"button",27),ys("click",(function(e){return t.onSubmit(e)})),ls(48,"mat-icon"),Gs(49,"search"),cs(),cs(),cs(),cs(),cs()),2&e&&(ss("formGroup",t.searchForm),Ka(6),ss("ngIf",!t.searchForm.get("keyword").valid&&t.clicked),Ka(39),ss("ngIf",!t.searchForm.get("year").valid&&t.clicked),Ka(2),ss("disabled",t.loading))},directives:[GU,WV,KU,tH,Jj,cH,EV,BV,oj,yh,PG,Wq,yV,$G],styles:["mat-form-field[_ngcontent-%COMP%]{width:80%}#form[_ngcontent-%COMP%]{margin-top:5%}"]}),rJ);function iJ(e,t){1&e&&Ss(0)}var oJ=["*"];function sJ(e,t){}var uJ=function(e){return{animationDuration:e}},lJ=function(e,t){return{value:e,params:t}},cJ=["tabBodyWrapper"],hJ=["tabHeader"];function fJ(e,t){}function dJ(e,t){1&e&&ns(0,fJ,0,0,"ng-template",9),2&e&&ss("cdkPortalOutlet",ws().$implicit.templateLabel)}function pJ(e,t){1&e&&Gs(0),2&e&&Js(ws().$implicit.textLabel)}function mJ(e,t){if(1&e){var n=ps();ls(0,"div",6),ys("click",(function(){Mn(n);var e=t.$implicit,r=t.index,a=ws(),i=rs(1);return a._handleClick(e,i,r)})),ls(1,"div",7),ns(2,dJ,1,1,"ng-template",8),ns(3,pJ,1,1,"ng-template",8),cs(),cs()}if(2&e){var r=t.$implicit,a=t.index,i=ws();Ns("mat-tab-label-active",i.selectedIndex==a),ss("id",i._getTabLabelId(a))("disabled",r.disabled)("matRippleDisabled",r.disabled||i.disableRipple),es("tabIndex",i._getTabIndex(r,a))("aria-posinset",a+1)("aria-setsize",i._tabs.length)("aria-controls",i._getTabContentId(a))("aria-selected",i.selectedIndex==a)("aria-label",r.ariaLabel||null)("aria-labelledby",!r.ariaLabel&&r.ariaLabelledby?r.ariaLabelledby:null),Ka(2),ss("ngIf",r.templateLabel),Ka(1),ss("ngIf",!r.templateLabel)}}function vJ(e,t){if(1&e){var n=ps();ls(0,"mat-tab-body",10),ys("_onCentered",(function(){return Mn(n),ws()._removeTabBodyWrapperHeight()}))("_onCentering",(function(e){return Mn(n),ws()._setTabBodyWrapperHeight(e)})),cs()}if(2&e){var r=t.$implicit,a=t.index,i=ws();Ns("mat-tab-body-active",i.selectedIndex==a),ss("id",i._getTabContentId(a))("content",r.content)("position",r.position)("origin",r.origin)("animationDuration",i.animationDuration),es("aria-labelledby",i._getTabLabelId(a))}}var yJ,gJ,_J,bJ,xJ,wJ,kJ,CJ,SJ,IJ,DJ,AJ,TJ,EJ,RJ,OJ=["tabListContainer"],MJ=["tabList"],NJ=["nextPaginator"],PJ=["previousPaginator"],FJ=new kt("MatInkBarPositioner",{providedIn:"root",factory:function(){return function(e){return{left:e?(e.offsetLeft||0)+"px":"0",width:e?(e.offsetWidth||0)+"px":"0"}}}}),LJ=((_J=function(){function e(t,n,r,a){_classCallCheck(this,e),this._elementRef=t,this._ngZone=n,this._inkBarPositioner=r,this._animationMode=a}return _createClass(e,[{key:"alignToElement",value:function(e){var t=this;this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){return t._setStyles(e)}))})):this._setStyles(e)}},{key:"show",value:function(){this._elementRef.nativeElement.style.visibility="visible"}},{key:"hide",value:function(){this._elementRef.nativeElement.style.visibility="hidden"}},{key:"_setStyles",value:function(e){var t=this._inkBarPositioner(e),n=this._elementRef.nativeElement;n.style.left=t.left,n.style.width=t.width}}]),e}()).\u0275fac=function(e){return new(e||_J)(as(bu),as(rc),as(FJ),as(NW,8))},_J.\u0275dir=rn({type:_J,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(e,t){2&e&&Ns("_mat-animation-noopable","NoopAnimations"===t._animationMode)}}),_J),zJ=((gJ=function e(t){_classCallCheck(this,e),this.template=t}).\u0275fac=function(e){return new(e||gJ)(as(ju))},gJ.\u0275dir=rn({type:gJ,selectors:[["","matTabContent",""]]}),gJ),BJ=((yJ=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}(CH)).\u0275fac=function(e){return WJ(e||yJ)},yJ.\u0275dir=rn({type:yJ,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[eu]}),yJ),WJ=qr(BJ),qJ=HW((function e(){_classCallCheck(this,e)})),VJ=new kt("MAT_TAB_GROUP"),UJ=((bJ=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var a;return _classCallCheck(this,n),(a=t.call(this))._viewContainerRef=e,a._closestTabGroup=r,a.textLabel="",a._contentPortal=null,a._stateChanges=new le,a.position=null,a.origin=null,a.isActive=!1,a}return _createClass(n,[{key:"ngOnChanges",value:function(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"ngOnInit",value:function(){this._contentPortal=new _H(this._explicitContent||this._implicitContent,this._viewContainerRef)}},{key:"templateLabel",get:function(){return this._templateLabel},set:function(e){e&&(this._templateLabel=e)}},{key:"content",get:function(){return this._contentPortal}}]),n}(qJ)).\u0275fac=function(e){return new(e||bJ)(as(Gu),as(VJ,8))},bJ.\u0275cmp=Yt({type:bJ,selectors:[["mat-tab"]],contentQueries:function(e,t,n){var r;1&e&&(Dl(n,BJ,!0),Al(n,zJ,!0,ju)),2&e&&(kl(r=El())&&(t.templateLabel=r.first),kl(r=El())&&(t._explicitContent=r.first))},viewQuery:function(e,t){var n;1&e&&Cl(ju,!0),2&e&&kl(n=El())&&(t._implicitContent=n.first)},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[eu,ou],ngContentSelectors:oJ,decls:1,vars:0,template:function(e,t){1&e&&(Cs(),ns(0,iJ,1,0,"ng-template"))},encapsulation:2}),bJ),jJ={translateTab:dz("translateTab",[yz("center, void, left-origin-center, right-origin-center",vz({transform:"none"})),yz("left",vz({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),yz("right",vz({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),gz("* => left, * => right, left => center, right => center",pz("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),gz("void => left-origin-center",[vz({transform:"translate3d(-100%, 0, 0)"}),pz("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),gz("void => right-origin-center",[vz({transform:"translate3d(100%, 0, 0)"}),pz("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},HJ=((kJ=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e,r,i))._host=a,o._centeringSub=J.EMPTY,o._leavingSub=J.EMPTY,o}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this._centeringSub=this._host._beforeCentering.pipe(od(this._host._isCenterPosition(this._host._position))).subscribe((function(t){t&&!e.hasAttached()&&e.attach(e._host._content)})),this._leavingSub=this._host._afterLeavingCenter.subscribe((function(){e.detach()}))}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}]),n}(SH)).\u0275fac=function(e){return new(e||kJ)(as(_u),as(Gu),as(st((function(){return JJ}))),as(Fc))},kJ.\u0275dir=rn({type:kJ,selectors:[["","matTabBodyHost",""]],features:[eu]}),kJ),GJ=((wJ=function(){function e(t,n,r){var a=this;_classCallCheck(this,e),this._elementRef=t,this._dir=n,this._dirChangeSubscription=J.EMPTY,this._translateTabComplete=new le,this._onCentering=new fl,this._beforeCentering=new fl,this._afterLeavingCenter=new fl,this._onCentered=new fl(!0),this.animationDuration="500ms",n&&(this._dirChangeSubscription=n.change.subscribe((function(e){a._computePositionAnimationState(e),r.markForCheck()}))),this._translateTabComplete.pipe(YF((function(e,t){return e.fromState===t.fromState&&e.toState===t.toState}))).subscribe((function(e){a._isCenterPosition(e.toState)&&a._isCenterPosition(a._position)&&a._onCentered.emit(),a._isCenterPosition(e.fromState)&&!a._isCenterPosition(a._position)&&a._afterLeavingCenter.emit()}))}return _createClass(e,[{key:"ngOnInit",value:function(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}},{key:"ngOnDestroy",value:function(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}},{key:"_onTranslateTabStarted",value:function(e){var t=this._isCenterPosition(e.toState);this._beforeCentering.emit(t),t&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}},{key:"_getLayoutDirection",value:function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}},{key:"_isCenterPosition",value:function(e){return"center"==e||"left-origin-center"==e||"right-origin-center"==e}},{key:"_computePositionAnimationState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._getLayoutDirection();this._position=this._positionIndex<0?"ltr"==e?"left":"right":this._positionIndex>0?"ltr"==e?"right":"left":"center"}},{key:"_computePositionFromOrigin",value:function(e){var t=this._getLayoutDirection();return"ltr"==t&&e<=0||"rtl"==t&&e>0?"left-origin-center":"right-origin-center"}},{key:"position",set:function(e){this._positionIndex=e,this._computePositionAnimationState()}}]),e}()).\u0275fac=function(e){return new(e||wJ)(as(bu),as(gL,8),as(Co))},wJ.\u0275dir=rn({type:wJ,inputs:{animationDuration:"animationDuration",position:"position",_content:["content","_content"],origin:"origin"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),wJ),JJ=((xJ=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){return _classCallCheck(this,n),t.call(this,e,r,a)}return n}(GJ)).\u0275fac=function(e){return new(e||xJ)(as(bu),as(gL,8),as(Co))},xJ.\u0275cmp=Yt({type:xJ,selectors:[["mat-tab-body"]],viewQuery:function(e,t){var n;1&e&&Sl(IH,!0),2&e&&kl(n=El())&&(t._portalHost=n.first)},hostAttrs:[1,"mat-tab-body"],features:[eu],decls:3,vars:6,consts:[[1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(e,t){1&e&&(ls(0,"div",0,1),ys("@translateTab.start",(function(e){return t._onTranslateTabStarted(e)}))("@translateTab.done",(function(e){return t._translateTabComplete.next(e)})),ns(2,sJ,0,0,"ng-template",2),cs()),2&e&&ss("@translateTab",cl(3,lJ,t._position,ll(1,uJ,t.animationDuration)))},directives:[HJ],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[jJ.translateTab]}}),xJ),XJ=new kt("MAT_TABS_CONFIG"),KJ=0,ZJ=function e(){_classCallCheck(this,e)},YJ=GW(JW((function e(t){_classCallCheck(this,e),this._elementRef=t})),"primary"),QJ=((SJ=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){var o;return _classCallCheck(this,n),(o=t.call(this,e))._changeDetectorRef=r,o._animationMode=i,o._tabs=new pl,o._indexToSelect=0,o._tabBodyWrapperHeight=0,o._tabsSubscription=J.EMPTY,o._tabLabelSubscription=J.EMPTY,o._dynamicHeight=!1,o._selectedIndex=null,o.headerPosition="above",o.selectedIndexChange=new fl,o.focusChange=new fl,o.animationDone=new fl,o.selectedTabChange=new fl(!0),o._groupId=KJ++,o.animationDuration=a&&a.animationDuration?a.animationDuration:"500ms",o.disablePagination=!(!a||null==a.disablePagination)&&a.disablePagination,o}return _createClass(n,[{key:"ngAfterContentChecked",value:function(){var e=this,t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){var n=null==this._selectedIndex;n||this.selectedTabChange.emit(this._createChangeEvent(t)),Promise.resolve().then((function(){e._tabs.forEach((function(e,n){return e.isActive=n===t})),n||e.selectedIndexChange.emit(t)}))}this._tabs.forEach((function(n,r){n.position=r-t,null==e._selectedIndex||0!=n.position||n.origin||(n.origin=t-e._selectedIndex)})),this._selectedIndex!==t&&(this._selectedIndex=t,this._changeDetectorRef.markForCheck())}},{key:"ngAfterContentInit",value:function(){var e=this;this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe((function(){if(e._clampTabIndex(e._indexToSelect)===e._selectedIndex)for(var t=e._tabs.toArray(),n=0;n<t.length;n++)if(t[n].isActive){e._indexToSelect=e._selectedIndex=n;break}e._changeDetectorRef.markForCheck()}))}},{key:"_subscribeToAllTabChanges",value:function(){var e=this;this._allTabs.changes.pipe(od(this._allTabs)).subscribe((function(t){e._tabs.reset(t.filter((function(t){return!t._closestTabGroup||t._closestTabGroup===e}))),e._tabs.notifyOnChanges()}))}},{key:"ngOnDestroy",value:function(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}},{key:"realignInkBar",value:function(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}},{key:"_focusChanged",value:function(e){this.focusChange.emit(this._createChangeEvent(e))}},{key:"_createChangeEvent",value:function(e){var t=new ZJ;return t.index=e,this._tabs&&this._tabs.length&&(t.tab=this._tabs.toArray()[e]),t}},{key:"_subscribeToTabLabels",value:function(){var e=this;this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=Ee.apply(void 0,_toConsumableArray(this._tabs.map((function(e){return e._stateChanges})))).subscribe((function(){return e._changeDetectorRef.markForCheck()}))}},{key:"_clampTabIndex",value:function(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}},{key:"_getTabLabelId",value:function(e){return"mat-tab-label-".concat(this._groupId,"-").concat(e)}},{key:"_getTabContentId",value:function(e){return"mat-tab-content-".concat(this._groupId,"-").concat(e)}},{key:"_setTabBodyWrapperHeight",value:function(e){if(this._dynamicHeight&&this._tabBodyWrapperHeight){var t=this._tabBodyWrapper.nativeElement;t.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(t.style.height=e+"px")}}},{key:"_removeTabBodyWrapperHeight",value:function(){var e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this.animationDone.emit()}},{key:"_handleClick",value:function(e,t,n){e.disabled||(this.selectedIndex=t.focusIndex=n)}},{key:"_getTabIndex",value:function(e,t){return e.disabled?null:this.selectedIndex===t?0:-1}},{key:"dynamicHeight",get:function(){return this._dynamicHeight},set:function(e){this._dynamicHeight=VF(e)}},{key:"selectedIndex",get:function(){return this._selectedIndex},set:function(e){this._indexToSelect=UF(e,null)}},{key:"animationDuration",get:function(){return this._animationDuration},set:function(e){this._animationDuration=/^\d+$/.test(e)?e+"ms":e}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){var t=this._elementRef.nativeElement;t.classList.remove("mat-background-".concat(this.backgroundColor)),e&&t.classList.add("mat-background-".concat(e)),this._backgroundColor=e}}]),n}(YJ)).\u0275fac=function(e){return new(e||SJ)(as(bu),as(Co),as(XJ,8),as(NW,8))},SJ.\u0275dir=rn({type:SJ,inputs:{headerPosition:"headerPosition",animationDuration:"animationDuration",disablePagination:"disablePagination",dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[eu]}),SJ),$J=((CJ=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i){return _classCallCheck(this,n),t.call(this,e,r,a,i)}return n}(QJ)).\u0275fac=function(e){return new(e||CJ)(as(bu),as(Co),as(XJ,8),as(NW,8))},CJ.\u0275cmp=Yt({type:CJ,selectors:[["mat-tab-group"]],contentQueries:function(e,t,n){var r;1&e&&Dl(n,UJ,!0),2&e&&kl(r=El())&&(t._allTabs=r)},viewQuery:function(e,t){var n;1&e&&(Sl(cJ,!0),Sl(hJ,!0)),2&e&&(kl(n=El())&&(t._tabBodyWrapper=n.first),kl(n=El())&&(t._tabHeader=n.first))},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(e,t){2&e&&Ns("mat-tab-group-dynamic-height",t.dynamicHeight)("mat-tab-group-inverted-header","below"===t.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[vu([{provide:VJ,useExisting:CJ}]),eu],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(e,t){1&e&&(ls(0,"mat-tab-header",0,1),ys("indexFocused",(function(e){return t._focusChanged(e)}))("selectFocusedIndex",(function(e){return t.selectedIndex=e})),ns(2,mJ,4,14,"div",2),cs(),ls(3,"div",3,4),ns(5,vJ,1,8,"mat-tab-body",5),cs()),2&e&&(ss("selectedIndex",t.selectedIndex||0)("disableRipple",t.disableRipple)("disablePagination",t.disablePagination),Ka(2),ss("ngForOf",t._tabs),Ka(1),Ns("_mat-animation-noopable","NoopAnimations"===t._animationMode),Ka(2),ss("ngForOf",t._tabs))},directives:function(){return[iX,mh,tX,Tq,uz,yh,SH,JJ]},styles:[".mat-tab-group{display:flex;flex-direction:column}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),CJ),eX=HW((function e(){_classCallCheck(this,e)})),tX=((IJ=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).elementRef=e,r}return _createClass(n,[{key:"focus",value:function(){this.elementRef.nativeElement.focus()}},{key:"getOffsetLeft",value:function(){return this.elementRef.nativeElement.offsetLeft}},{key:"getOffsetWidth",value:function(){return this.elementRef.nativeElement.offsetWidth}}]),n}(eX)).\u0275fac=function(e){return new(e||IJ)(as(bu))},IJ.\u0275dir=rn({type:IJ,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(e,t){2&e&&(es("aria-disabled",!!t.disabled),Ns("mat-tab-disabled",t.disabled))},inputs:{disabled:"disabled"},features:[eu]}),IJ),nX=BF({passive:!0}),rX=((EJ=function(){function e(t,n,r,a,i,o,s){var u=this;_classCallCheck(this,e),this._elementRef=t,this._changeDetectorRef=n,this._viewportRuler=r,this._dir=a,this._ngZone=i,this._platform=o,this._animationMode=s,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new le,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new le,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new fl,this.indexFocused=new fl,i.runOutsideAngular((function(){JF(t.nativeElement,"mouseleave").pipe(sL(u._destroyed)).subscribe((function(){u._stopInterval()}))}))}return _createClass(e,[{key:"ngAfterViewInit",value:function(){var e=this;JF(this._previousPaginator.nativeElement,"touchstart",nX).pipe(sL(this._destroyed)).subscribe((function(){e._handlePaginatorPress("before")})),JF(this._nextPaginator.nativeElement,"touchstart",nX).pipe(sL(this._destroyed)).subscribe((function(){e._handlePaginatorPress("after")}))}},{key:"ngAfterContentInit",value:function(){var e=this,t=this._dir?this._dir.change:wf(null),n=this._viewportRuler.change(150),r=function(){e.updatePagination(),e._alignInkBarToSelectedTab()};this._keyManager=new VL(this._items).withHorizontalOrientation(this._getLayoutDirection()).withWrap(),this._keyManager.updateActiveItem(0),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(r):r(),Ee(t,n,this._items.changes).pipe(sL(this._destroyed)).subscribe((function(){Promise.resolve().then(r),e._keyManager.withHorizontalOrientation(e._getLayoutDirection())})),this._keyManager.change.pipe(sL(this._destroyed)).subscribe((function(t){e.indexFocused.emit(t),e._setTabFocus(t)}))}},{key:"ngAfterContentChecked",value:function(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}},{key:"_handleKeydown",value:function(e){if(!IL(e))switch(e.keyCode){case 36:this._keyManager.setFirstItemActive(),e.preventDefault();break;case 35:this._keyManager.setLastItemActive(),e.preventDefault();break;case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e));break;default:this._keyManager.onKeydown(e)}}},{key:"_onContentChanges",value:function(){var e=this,t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run((function(){e.updatePagination(),e._alignInkBarToSelectedTab(),e._changeDetectorRef.markForCheck()})))}},{key:"updatePagination",value:function(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}},{key:"_isValidIndex",value:function(e){if(!this._items)return!0;var t=this._items?this._items.toArray()[e]:null;return!!t&&!t.disabled}},{key:"_setTabFocus",value:function(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();var t=this._tabListContainer.nativeElement,n=this._getLayoutDirection();t.scrollLeft="ltr"==n?0:t.scrollWidth-t.offsetWidth}}},{key:"_getLayoutDirection",value:function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}},{key:"_updateTabScrollPosition",value:function(){if(!this.disablePagination){var e=this.scrollDistance,t=this._platform,n="ltr"===this._getLayoutDirection()?-e:e;this._tabList.nativeElement.style.transform="translateX(".concat(Math.round(n),"px)"),t&&(t.TRIDENT||t.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}}},{key:"_scrollHeader",value:function(e){return this._scrollTo(this._scrollDistance+("before"==e?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}},{key:"_handlePaginatorClick",value:function(e){this._stopInterval(),this._scrollHeader(e)}},{key:"_scrollToLabel",value:function(e){if(!this.disablePagination){var t=this._items?this._items.toArray()[e]:null;if(t){var n,r,a=this._tabListContainer.nativeElement.offsetWidth,i=t.elementRef.nativeElement,o=i.offsetLeft,s=i.offsetWidth;"ltr"==this._getLayoutDirection()?r=(n=o)+s:n=(r=this._tabList.nativeElement.offsetWidth-o)-s;var u=this.scrollDistance,l=this.scrollDistance+a;n<u?this.scrollDistance-=u-n+60:r>l&&(this.scrollDistance+=r-l+60)}}}},{key:"_checkPaginationEnabled",value:function(){if(this.disablePagination)this._showPaginationControls=!1;else{var e=this._tabList.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;e||(this.scrollDistance=0),e!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=e}}},{key:"_checkScrollingControls",value:function(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}},{key:"_getMaxScrollDistance",value:function(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}},{key:"_alignInkBarToSelectedTab",value:function(){var e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,t=e?e.elementRef.nativeElement:null;t?this._inkBar.alignToElement(t):this._inkBar.hide()}},{key:"_stopInterval",value:function(){this._stopScrolling.next()}},{key:"_handlePaginatorPress",value:function(e,t){var n=this;t&&null!=t.button&&0!==t.button||(this._stopInterval(),aL(650,100).pipe(sL(Ee(this._stopScrolling,this._destroyed))).subscribe((function(){var t=n._scrollHeader(e),r=t.maxScrollDistance,a=t.distance;(0===a||a>=r)&&n._stopInterval()})))}},{key:"_scrollTo",value:function(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};var t=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(t,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:t,distance:this._scrollDistance}}},{key:"selectedIndex",get:function(){return this._selectedIndex},set:function(e){e=UF(e),this._selectedIndex!=e&&(this._selectedIndexChanged=!0,this._selectedIndex=e,this._keyManager&&this._keyManager.updateActiveItem(e))}},{key:"focusIndex",get:function(){return this._keyManager?this._keyManager.activeItemIndex:0},set:function(e){this._isValidIndex(e)&&this.focusIndex!==e&&this._keyManager&&this._keyManager.setActiveItem(e)}},{key:"scrollDistance",get:function(){return this._scrollDistance},set:function(e){this._scrollTo(e)}}]),e}()).\u0275fac=function(e){return new(e||EJ)(as(bu),as(Co),as(kL),as(gL,8),as(rc),as(PF),as(NW,8))},EJ.\u0275dir=rn({type:EJ,inputs:{disablePagination:"disablePagination"}}),EJ),aX=((TJ=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o,s,u){var l;return _classCallCheck(this,n),(l=t.call(this,e,r,a,i,o,s,u))._disableRipple=!1,l}return _createClass(n,[{key:"_itemSelected",value:function(e){e.preventDefault()}},{key:"disableRipple",get:function(){return this._disableRipple},set:function(e){this._disableRipple=VF(e)}}]),n}(rX)).\u0275fac=function(e){return new(e||TJ)(as(bu),as(Co),as(kL),as(gL,8),as(rc),as(PF),as(NW,8))},TJ.\u0275dir=rn({type:TJ,inputs:{disableRipple:"disableRipple"},features:[eu]}),TJ),iX=((AJ=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o,s,u){return _classCallCheck(this,n),t.call(this,e,r,a,i,o,s,u)}return n}(aX)).\u0275fac=function(e){return new(e||AJ)(as(bu),as(Co),as(kL),as(gL,8),as(rc),as(PF),as(NW,8))},AJ.\u0275cmp=Yt({type:AJ,selectors:[["mat-tab-header"]],contentQueries:function(e,t,n){var r;1&e&&Dl(n,tX,!1),2&e&&kl(r=El())&&(t._items=r)},viewQuery:function(e,t){var n;1&e&&(Cl(LJ,!0),Cl(OJ,!0),Cl(MJ,!0),Sl(NJ,!0),Sl(PJ,!0)),2&e&&(kl(n=El())&&(t._inkBar=n.first),kl(n=El())&&(t._tabListContainer=n.first),kl(n=El())&&(t._tabList=n.first),kl(n=El())&&(t._nextPaginator=n.first),kl(n=El())&&(t._previousPaginator=n.first))},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(e,t){2&e&&Ns("mat-tab-header-pagination-controls-enabled",t._showPaginationControls)("mat-tab-header-rtl","rtl"==t._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[eu],ngContentSelectors:oJ,decls:13,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(e,t){1&e&&(Cs(),ls(0,"div",0,1),ys("click",(function(){return t._handlePaginatorClick("before")}))("mousedown",(function(e){return t._handlePaginatorPress("before",e)}))("touchend",(function(){return t._stopInterval()})),hs(2,"div",2),cs(),ls(3,"div",3,4),ys("keydown",(function(e){return t._handleKeydown(e)})),ls(5,"div",5,6),ys("cdkObserveContent",(function(){return t._onContentChanges()})),ls(7,"div",7),Ss(8),cs(),hs(9,"mat-ink-bar"),cs(),cs(),ls(10,"div",8,9),ys("mousedown",(function(e){return t._handlePaginatorPress("after",e)}))("click",(function(){return t._handlePaginatorClick("after")}))("touchend",(function(){return t._stopInterval()})),hs(12,"div",2),cs()),2&e&&(Ns("mat-tab-header-pagination-disabled",t._disableScrollBefore),ss("matRippleDisabled",t._disableScrollBefore||t.disableRipple),Ka(5),Ns("_mat-animation-noopable","NoopAnimations"===t._animationMode),Ka(5),Ns("mat-tab-header-pagination-disabled",t._disableScrollAfter),ss("matRippleDisabled",t._disableScrollAfter||t.disableRipple))},directives:[Tq,zL,LJ],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),AJ),oX=((DJ=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:DJ}),DJ.\u0275inj=Ke({factory:function(e){return new(e||DJ)},imports:[[Lh,jW,AH,Eq,BL,cz],jW]}),DJ),sX=["sliderWrapper"],uX=BF({passive:!1}),lX={provide:SV,useExisting:st((function(){return fX})),multi:!0},cX=function e(){_classCallCheck(this,e)},hX=XW(GW(HW((function e(t){_classCallCheck(this,e),this._elementRef=t})),"accent")),fX=((RJ=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o,s,u,l){var c;return _classCallCheck(this,n),(c=t.call(this,e))._focusMonitor=r,c._changeDetectorRef=a,c._dir=i,c._animationMode=s,c._ngZone=u,c._invert=!1,c._max=100,c._min=0,c._step=1,c._thumbLabel=!1,c._tickInterval=0,c._value=null,c._vertical=!1,c.change=new fl,c.input=new fl,c.valueChange=new fl,c.onTouched=function(){},c._percent=0,c._isSliding=!1,c._isActive=!1,c._tickIntervalPercent=0,c._sliderDimensions=null,c._controlValueAccessorChangeFn=function(){},c._dirChangeSubscription=J.EMPTY,c._pointerDown=function(e){c.disabled||c._isSliding||!dX(e)&&0!==e.button||c._runInsideZone((function(){var t=c.value,n=pX(e);c._isSliding=!0,c._lastPointerEvent=e,e.preventDefault(),c._focusHostElement(),c._onMouseenter(),c._bindGlobalEvents(e),c._focusHostElement(),c._updateValueFromPosition(n),c._valueOnSlideStart=c.value,c._pointerPositionOnStart=n,t!=c.value&&(c._emitInputEvent(),c._emitChangeEvent())}))},c._pointerMove=function(e){if(c._isSliding){e.preventDefault();var t=c.value;c._lastPointerEvent=e,c._updateValueFromPosition(pX(e)),t!=c.value&&c._emitInputEvent()}},c._pointerUp=function(e){if(c._isSliding){var t=c._pointerPositionOnStart,n=pX(e);e.preventDefault(),c._removeGlobalEvents(),c._valueOnSlideStart=c._pointerPositionOnStart=c._lastPointerEvent=null,c._isSliding=!1,c._valueOnSlideStart==c.value||c.disabled||!t||t.x===n.x&&t.y===n.y||c._emitChangeEvent()}},c._windowBlur=function(){c._lastPointerEvent&&c._pointerUp(c._lastPointerEvent)},c._document=l,c.tabIndex=parseInt(o)||0,c._runOutsizeZone((function(){var t=e.nativeElement;t.addEventListener("mousedown",c._pointerDown,uX),t.addEventListener("touchstart",c._pointerDown,uX)})),c}return _createClass(n,[{key:"focus",value:function(e){this._focusHostElement(e)}},{key:"blur",value:function(){this._blurHostElement()}},{key:"_shouldInvertMouseCoords",value:function(){return"rtl"!=this._getDirection()||this.vertical?this._invertAxis:!this._invertAxis}},{key:"_getDirection",value:function(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}},{key:"ngOnInit",value:function(){var e=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe((function(t){e._isActive=!!t&&"keyboard"!==t,e._changeDetectorRef.detectChanges()})),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe((function(){e._changeDetectorRef.markForCheck()})))}},{key:"ngOnDestroy",value:function(){var e=this._elementRef.nativeElement;e.removeEventListener("mousedown",this._pointerDown,uX),e.removeEventListener("touchstart",this._pointerDown,uX),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}},{key:"_onMouseenter",value:function(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}},{key:"_onFocus",value:function(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}},{key:"_onBlur",value:function(){this.onTouched()}},{key:"_onKeydown",value:function(e){if(!this.disabled&&!IL(e)){var t=this.value;switch(e.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}t!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding=!0,e.preventDefault()}}},{key:"_onKeyup",value:function(){this._isSliding=!1}},{key:"_getWindow",value:function(){var e;return(null===(e=this._document)||void 0===e?void 0:e.defaultView)||window}},{key:"_bindGlobalEvents",value:function(e){var t=this._document;if(void 0!==t&&t){var n=dX(e),r=n?"touchend":"mouseup";t.addEventListener(n?"touchmove":"mousemove",this._pointerMove,uX),t.addEventListener(r,this._pointerUp,uX),n&&t.addEventListener("touchcancel",this._pointerUp,uX)}var a=this._getWindow();void 0!==a&&a&&a.addEventListener("blur",this._windowBlur)}},{key:"_removeGlobalEvents",value:function(){var e=this._document;void 0!==e&&e&&(e.removeEventListener("mousemove",this._pointerMove,uX),e.removeEventListener("mouseup",this._pointerUp,uX),e.removeEventListener("touchmove",this._pointerMove,uX),e.removeEventListener("touchend",this._pointerUp,uX),e.removeEventListener("touchcancel",this._pointerUp,uX));var t=this._getWindow();void 0!==t&&t&&t.removeEventListener("blur",this._windowBlur)}},{key:"_increment",value:function(e){this.value=this._clamp((this.value||0)+this.step*e,this.min,this.max)}},{key:"_updateValueFromPosition",value:function(e){if(this._sliderDimensions){var t=this._clamp(((this.vertical?e.y:e.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(t=1-t),0===t)this.value=this.min;else if(1===t)this.value=this.max;else{var n=this._calculateValue(t),r=Math.round((n-this.min)/this.step)*this.step+this.min;this.value=this._clamp(r,this.min,this.max)}}}},{key:"_emitChangeEvent",value:function(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}},{key:"_emitInputEvent",value:function(){this.input.emit(this._createChangeEvent())}},{key:"_updateTickIntervalPercent",value:function(){if(this.tickInterval&&this._sliderDimensions)if("auto"==this.tickInterval){var e=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width,t=Math.ceil(30/(e*this.step/(this.max-this.min)));this._tickIntervalPercent=t*this.step/e}else this._tickIntervalPercent=this.tickInterval*this.step/(this.max-this.min)}},{key:"_createChangeEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.value,t=new cX;return t.source=this,t.value=e,t}},{key:"_calculatePercentage",value:function(e){return((e||0)-this.min)/(this.max-this.min)}},{key:"_calculateValue",value:function(e){return this.min+e*(this.max-this.min)}},{key:"_clamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(t,Math.min(e,n))}},{key:"_getSliderDimensions",value:function(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}},{key:"_focusHostElement",value:function(e){this._elementRef.nativeElement.focus(e)}},{key:"_blurHostElement",value:function(){this._elementRef.nativeElement.blur()}},{key:"_runInsideZone",value:function(e){this._ngZone?this._ngZone.run(e):e()}},{key:"_runOutsizeZone",value:function(e){this._ngZone?this._ngZone.runOutsideAngular(e):e()}},{key:"writeValue",value:function(e){this.value=e}},{key:"registerOnChange",value:function(e){this._controlValueAccessorChangeFn=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"invert",get:function(){return this._invert},set:function(e){this._invert=VF(e)}},{key:"max",get:function(){return this._max},set:function(e){this._max=UF(e,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}},{key:"min",get:function(){return this._min},set:function(e){this._min=UF(e,this._min),null===this._value&&(this.value=this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}},{key:"step",get:function(){return this._step},set:function(e){this._step=UF(e,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}},{key:"thumbLabel",get:function(){return this._thumbLabel},set:function(e){this._thumbLabel=VF(e)}},{key:"tickInterval",get:function(){return this._tickInterval},set:function(e){this._tickInterval="auto"===e?"auto":"number"==typeof e||"string"==typeof e?UF(e,this._tickInterval):0}},{key:"value",get:function(){return null===this._value&&(this.value=this._min),this._value},set:function(e){if(e!==this._value){var t=UF(e);this._roundToDecimal&&(t=parseFloat(t.toFixed(this._roundToDecimal))),this._value=t,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}},{key:"vertical",get:function(){return this._vertical},set:function(e){this._vertical=VF(e)}},{key:"displayValue",get:function(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}},{key:"percent",get:function(){return this._clamp(this._percent)}},{key:"_invertAxis",get:function(){return this.vertical?!this.invert:this.invert}},{key:"_isMinValue",get:function(){return 0===this.percent}},{key:"_thumbGap",get:function(){return this.disabled?7:this._isMinValue&&!this.thumbLabel?this._isActive?10:7:0}},{key:"_trackBackgroundStyles",get:function(){var e=this.vertical?"1, ".concat(1-this.percent,", 1"):"".concat(1-this.percent,", 1, 1");return{transform:"translate".concat(this.vertical?"Y":"X","(").concat(this._shouldInvertMouseCoords()?"-":"").concat(this._thumbGap,"px) scale3d(").concat(e,")")}}},{key:"_trackFillStyles",get:function(){var e=this.percent,t=this.vertical?"1, ".concat(e,", 1"):"".concat(e,", 1, 1");return{transform:"translate".concat(this.vertical?"Y":"X","(").concat(this._shouldInvertMouseCoords()?"":"-").concat(this._thumbGap,"px) scale3d(").concat(t,")"),display:0===e?"none":""}}},{key:"_ticksContainerStyles",get:function(){return{transform:"translate".concat(this.vertical?"Y":"X","(").concat(this.vertical||"rtl"!=this._getDirection()?"-":"").concat(this._tickIntervalPercent/2*100,"%)")}}},{key:"_ticksStyles",get:function(){var e,t=100*this._tickIntervalPercent,n={backgroundSize:this.vertical?"2px ".concat(t,"%"):"".concat(t,"% 2px"),transform:"translateZ(0) translate".concat(this.vertical?"Y":"X","(").concat(this.vertical||"rtl"!=this._getDirection()?"":"-").concat(t/2,"%)").concat(this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)")};return this._isMinValue&&this._thumbGap&&(e=this.vertical?this._invertAxis?"Bottom":"Top":this._invertAxis?"Right":"Left",n["padding".concat(e)]="".concat(this._thumbGap,"px")),n}},{key:"_thumbContainerStyles",get:function(){return{transform:"translate".concat(this.vertical?"Y":"X","(-").concat(100*(("rtl"!=this._getDirection()||this.vertical?this._invertAxis:!this._invertAxis)?this.percent:1-this.percent),"%)")}}}]),n}(hX)).\u0275fac=function(e){return new(e||RJ)(as(bu),as(rz),as(Co),as(gL,8),is("tabindex"),as(NW,8),as(rc),as(Fc,8))},RJ.\u0275cmp=Yt({type:RJ,selectors:[["mat-slider"]],viewQuery:function(e,t){var n;1&e&&Sl(sX,!0),2&e&&kl(n=El())&&(t._sliderWrapper=n.first)},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:28,hostBindings:function(e,t){1&e&&ys("focus",(function(){return t._onFocus()}))("blur",(function(){return t._onBlur()}))("keydown",(function(e){return t._onKeydown(e)}))("keyup",(function(){return t._onKeyup()}))("mouseenter",(function(){return t._onMouseenter()}))("selectstart",(function(e){return e.preventDefault()})),2&e&&(Ys("tabIndex",t.tabIndex),es("aria-disabled",t.disabled)("aria-valuemax",t.max)("aria-valuemin",t.min)("aria-valuenow",t.value)("aria-orientation",t.vertical?"vertical":"horizontal"),Ns("mat-slider-disabled",t.disabled)("mat-slider-has-ticks",t.tickInterval)("mat-slider-horizontal",!t.vertical)("mat-slider-axis-inverted",t._invertAxis)("mat-slider-invert-mouse-coords",t._shouldInvertMouseCoords())("mat-slider-sliding",t._isSliding)("mat-slider-thumb-label-showing",t.thumbLabel)("mat-slider-vertical",t.vertical)("mat-slider-min-value",t._isMinValue)("mat-slider-hide-last-tick",t.disabled||t._isMinValue&&t._thumbGap&&t._invertAxis)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",value:"value",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",vertical:"vertical",displayWith:"displayWith"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[vu([lX]),eu],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(e,t){1&e&&(ls(0,"div",0,1),ls(2,"div",2),hs(3,"div",3),hs(4,"div",4),cs(),ls(5,"div",5),hs(6,"div",6),cs(),ls(7,"div",7),hs(8,"div",8),hs(9,"div",9),ls(10,"div",10),ls(11,"span",11),Gs(12),cs(),cs(),cs(),cs()),2&e&&(Ka(3),ss("ngStyle",t._trackBackgroundStyles),Ka(1),ss("ngStyle",t._trackFillStyles),Ka(1),ss("ngStyle",t._ticksContainerStyles),Ka(1),ss("ngStyle",t._ticksStyles),Ka(1),ss("ngStyle",t._thumbContainerStyles),Ka(5),Js(t.displayValue))},directives:[Ph],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:-webkit-grabbing;cursor:grabbing}.mat-slider-wrapper{position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{background-repeat:repeat;background-clip:content-box;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:-webkit-grab;cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),RJ);function dX(e){return"t"===e.type[0]}function pX(e){var t=dX(e)?e.touches[0]||e.changedTouches[0]:e;return{x:t.clientX,y:t.clientY}}var mX,vX=((mX=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:mX}),mX.\u0275inj=Ke({factory:function(e){return new(e||mX)},imports:[[Lh,jW],jW]}),mX);function yX(){}var gX=function(e){return null==e?yX:function(){return this.querySelector(e)}};function _X(){return[]}var bX=function(e){return null==e?_X:function(){return this.querySelectorAll(e)}},xX=function(e){return function(){return this.matches(e)}},wX=function(e){return new Array(e.length)};function kX(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function CX(e,t,n,r,a,i){for(var o,s=0,u=t.length,l=i.length;s<l;++s)(o=t[s])?(o.__data__=i[s],r[s]=o):n[s]=new kX(e,i[s]);for(;s<u;++s)(o=t[s])&&(a[s]=o)}function SX(e,t,n,r,a,i,o){var s,u,l,c={},h=t.length,f=i.length,d=new Array(h);for(s=0;s<h;++s)(u=t[s])&&(d[s]=l="$"+o.call(u,u.__data__,s,t),l in c?a[s]=u:c[l]=u);for(s=0;s<f;++s)(u=c[l="$"+o.call(e,i[s],s,i)])?(r[s]=u,u.__data__=i[s],c[l]=null):n[s]=new kX(e,i[s]);for(s=0;s<h;++s)(u=t[s])&&c[d[s]]===u&&(a[s]=u)}function IX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}kX.prototype={constructor:kX,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var DX="http://www.w3.org/1999/xhtml",AX={svg:"http://www.w3.org/2000/svg",xhtml:DX,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},TX=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),AX.hasOwnProperty(t)?{space:AX[t],local:e}:e};function EX(e){return function(){this.removeAttribute(e)}}function RX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function OX(e,t){return function(){this.setAttribute(e,t)}}function MX(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function NX(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function PX(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var FX=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function LX(e){return function(){this.style.removeProperty(e)}}function zX(e,t,n){return function(){this.style.setProperty(e,t,n)}}function BX(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function WX(e,t){return e.style.getPropertyValue(t)||FX(e).getComputedStyle(e,null).getPropertyValue(t)}function qX(e){return function(){delete this[e]}}function VX(e,t){return function(){this[e]=t}}function UX(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function jX(e){return e.trim().split(/^|\s+/)}function HX(e){return e.classList||new GX(e)}function GX(e){this._node=e,this._names=jX(e.getAttribute("class")||"")}function JX(e,t){for(var n=HX(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function XX(e,t){for(var n=HX(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function KX(e){return function(){JX(this,e)}}function ZX(e){return function(){XX(this,e)}}function YX(e,t){return function(){(t.apply(this,arguments)?JX:XX)(this,e)}}function QX(){this.textContent=""}function $X(e){return function(){this.textContent=e}}function eK(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function tK(){this.innerHTML=""}function nK(e){return function(){this.innerHTML=e}}function rK(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function aK(){this.nextSibling&&this.parentNode.appendChild(this)}function iK(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oK(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===DX&&t.documentElement.namespaceURI===DX?t.createElement(e):t.createElementNS(n,e)}}function sK(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}GX.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var uK=function(e){var t=TX(e);return(t.local?sK:oK)(t)};function lK(){return null}function cK(){var e=this.parentNode;e&&e.removeChild(this)}function hK(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fK(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}var dK={},pK=null;function mK(e,t,n){return e=vK(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function vK(e,t,n){return function(r){var a=pK;pK=r;try{e.call(this,this.__data__,t,n)}finally{pK=a}}}function yK(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function gK(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?t.length=a:delete this.__on}}}function _K(e,t,n){var r=dK.hasOwnProperty(e.type)?mK:vK;return function(a,i,o){var s,u=this.__on,l=r(t,i,o);if(u)for(var c=0,h=u.length;c<h;++c)if((s=u[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=t);this.addEventListener(e.type,l,n),s={type:e.type,name:e.name,value:t,listener:l,capture:n},u?u.push(s):this.__on=[s]}}function bK(e,t,n){var r=FX(e),a=r.CustomEvent;"function"==typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function xK(e,t){return function(){return bK(this,e,t)}}function wK(e,t){return function(){return bK(this,e,t.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(dK={mouseenter:"mouseover",mouseleave:"mouseout"}));var kK=[null];function CK(e,t){this._groups=e,this._parents=t}function SK(){return new CK([[document.documentElement]],kK)}CK.prototype=SK.prototype={constructor:CK,select:function(e){"function"!=typeof e&&(e=gX(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,s=t[a],u=s.length,l=r[a]=new Array(u),c=0;c<u;++c)(i=s[c])&&(o=e.call(i,i.__data__,c,s))&&("__data__"in i&&(o.__data__=i.__data__),l[c]=o);return new CK(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=bX(e));for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,s=t[i],u=s.length,l=0;l<u;++l)(o=s[l])&&(r.push(e.call(o,o.__data__,l,s)),a.push(o));return new CK(r,a)},filter:function(e){"function"!=typeof e&&(e=xX(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],s=o.length,u=r[a]=[],l=0;l<s;++l)(i=o[l])&&e.call(i,i.__data__,l,o)&&u.push(i);return new CK(r,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),c=-1,this.each((function(e){p[++c]=e})),p;var n,r=t?SX:CX,a=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=i.length,s=new Array(o),u=new Array(o),l=new Array(o),c=0;c<o;++c){var h=a[c],f=i[c],d=f.length,p=e.call(h,h&&h.__data__,c,a),m=p.length,v=u[c]=new Array(m),y=s[c]=new Array(m);r(h,f,v,y,l[c]=new Array(d),p,t);for(var g,_,b=0,x=0;b<m;++b)if(g=v[b]){for(b>=x&&(x=b+1);!(_=y[x])&&++x<m;);g._next=_||null}}return(s=new CK(s,a))._enter=u,s._exit=l,s},enter:function(){return new CK(this._enter||this._groups.map(wX),this._parents)},exit:function(){return new CK(this._exit||this._groups.map(wX),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,i=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(a=t(a)),null==n?i.remove():n(i),r&&a?r.merge(a).order():a},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,a=Math.min(r,n.length),i=new Array(r),o=0;o<a;++o)for(var s,u=t[o],l=n[o],c=u.length,h=i[o]=new Array(c),f=0;f<c;++f)(s=u[f]||l[f])&&(h[f]=s);for(;o<r;++o)i[o]=t[o];return new CK(i,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=IX);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,s=n[i],u=s.length,l=a[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(l[c]=o);l.sort(t)}return new CK(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,s=i.length;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function(e,t){var n=TX(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?RX:EX:"function"==typeof t?n.local?PX:NX:n.local?MX:OX)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?LX:"function"==typeof t?BX:zX)(e,t,null==n?"":n)):WX(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?qX:"function"==typeof t?UX:VX)(e,t)):this.node()[e]},classed:function(e,t){var n=jX(e+"");if(arguments.length<2){for(var r=HX(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof t?YX:t?KX:ZX)(n,t))},text:function(e){return arguments.length?this.each(null==e?QX:("function"==typeof e?eK:$X)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?tK:("function"==typeof e?rK:nK)(e)):this.node().innerHTML},raise:function(){return this.each(aK)},lower:function(){return this.each(iK)},append:function(e){var t="function"==typeof e?e:uK(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:uK(e),r=null==t?lK:"function"==typeof t?t:gX(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(cK)},clone:function(e){return this.select(e?fK:hK)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,i=yK(e+""),o=i.length;if(!(arguments.length<2)){for(s=t?_K:gK,null==n&&(n=!1),r=0;r<o;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?wK:xK)(e,t))}};var IK=SK,DK=function(e){return"string"==typeof e?new CK([[document.querySelector(e)]],[document.documentElement]):new CK([[e]],kK)},AK={value:function(){}};function TK(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new EK(r)}function EK(e){this._=e}function RK(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function OK(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function MK(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=AK,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}EK.prototype=TK.prototype={constructor:EK,on:function(e,t){var n,r=this._,a=RK(e+"",r),i=-1,o=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<o;)if(n=(e=a[i]).type)r[n]=MK(r[n],e.name,t);else if(null==t)for(n in r)r[n]=MK(r[n],e.name,null);return this}for(;++i<o;)if((n=(e=a[i]).type)&&(n=OK(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new EK(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,n)}};var NK=TK,PK=function(){pK.preventDefault(),pK.stopImmediatePropagation()},FK=function(e){var t=e.document.documentElement,n=DK(e).on("dragstart.drag",PK,!0);"onselectstart"in t?n.on("selectstart.drag",PK,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")};function LK(e,t){var n=e.document.documentElement,r=DK(e).on("dragstart.drag",null);t&&(r.on("click.drag",PK,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var zK=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function BK(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function WK(){}var qK="\\s*([+-]?\\d+)\\s*",VK="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",UK="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jK=/^#([0-9a-f]{3,8})$/,HK=new RegExp("^rgb\\("+[qK,qK,qK]+"\\)$"),GK=new RegExp("^rgb\\("+[UK,UK,UK]+"\\)$"),JK=new RegExp("^rgba\\("+[qK,qK,qK,VK]+"\\)$"),XK=new RegExp("^rgba\\("+[UK,UK,UK,VK]+"\\)$"),KK=new RegExp("^hsl\\("+[VK,UK,UK]+"\\)$"),ZK=new RegExp("^hsla\\("+[VK,UK,UK,VK]+"\\)$"),YK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function QK(){return this.rgb().formatHex()}function $K(){return this.rgb().formatRgb()}function eZ(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jK.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?tZ(t):3===n?new iZ(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?nZ(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?nZ(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=HK.exec(e))?new iZ(t[1],t[2],t[3],1):(t=GK.exec(e))?new iZ(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=JK.exec(e))?nZ(t[1],t[2],t[3],t[4]):(t=XK.exec(e))?nZ(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=KK.exec(e))?lZ(t[1],t[2]/100,t[3]/100,1):(t=ZK.exec(e))?lZ(t[1],t[2]/100,t[3]/100,t[4]):YK.hasOwnProperty(e)?tZ(YK[e]):"transparent"===e?new iZ(NaN,NaN,NaN,0):null}function tZ(e){return new iZ(e>>16&255,e>>8&255,255&e,1)}function nZ(e,t,n,r){return r<=0&&(e=t=n=NaN),new iZ(e,t,n,r)}function rZ(e){return e instanceof WK||(e=eZ(e)),e?new iZ((e=e.rgb()).r,e.g,e.b,e.opacity):new iZ}function aZ(e,t,n,r){return 1===arguments.length?rZ(e):new iZ(e,t,n,null==r?1:r)}function iZ(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function oZ(){return"#"+uZ(this.r)+uZ(this.g)+uZ(this.b)}function sZ(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function uZ(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function lZ(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hZ(e,t,n,r)}function cZ(e){if(e instanceof hZ)return new hZ(e.h,e.s,e.l,e.opacity);if(e instanceof WK||(e=eZ(e)),!e)return new hZ;if(e instanceof hZ)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,s=i-a,u=(i+a)/2;return s?(o=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=u<.5?i+a:2-i-a,o*=60):s=u>0&&u<1?0:o,new hZ(o,s,u,e.opacity)}function hZ(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function fZ(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function dZ(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}zK(WK,eZ,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:QK,formatHex:QK,formatHsl:function(){return cZ(this).formatHsl()},formatRgb:$K,toString:$K}),zK(iZ,aZ,BK(WK,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new iZ(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new iZ(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oZ,formatHex:oZ,formatRgb:sZ,toString:sZ})),zK(hZ,(function(e,t,n,r){return 1===arguments.length?cZ(e):new hZ(e,t,n,null==r?1:r)}),BK(WK,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new hZ(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new hZ(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new iZ(fZ(e>=240?e-240:e+120,a,r),fZ(e,a,r),fZ(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var pZ=function(e){return function(){return e}};function mZ(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):pZ(isNaN(e)?t:e)}var vZ=function e(t){var n=function(e){return 1==(e=+e)?mZ:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):pZ(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=aZ(e)).r,(t=aZ(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=mZ(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function yZ(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),s=new Array(a);for(n=0;n<a;++n)r=aZ(t[n]),i[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return i=e(i),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=s(e),r+""}}}yZ((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1];return dZ((n-r/t)*t,r>0?e[r-1]:2*a-i,a,i,r<t-1?e[r+2]:2*i-a)}})),yZ((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t);return dZ((n-r/t)*t,e[(r+t-1)%t],e[r%t],e[(r+1)%t],e[(r+2)%t])}}));var gZ=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}};function _Z(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=AZ(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}var bZ,xZ,wZ=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},kZ=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},CZ=function(e,t){var n,r={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=AZ(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}},SZ=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,IZ=new RegExp(SZ.source,"g"),DZ=function(e,t){var n,r,a,i=SZ.lastIndex=IZ.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=SZ.exec(e))&&(r=IZ.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:kZ(n,r)})),i=IZ.lastIndex;return i<t.length&&(a=t.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})},AZ=function(e,t){var n,r,a=typeof t;return null==t||"boolean"===a?pZ(t):("number"===a?kZ:"string"===a?(n=eZ(t))?(t=n,vZ):DZ:t instanceof eZ?vZ:t instanceof Date?wZ:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?_Z:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?CZ:kZ:gZ))(e,t)},TZ=function(){for(var e,t=pK;e=t.sourceEvent;)t=e;return t},EZ=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]},RZ=function(e){var t=TZ();return t.changedTouches&&(t=t.changedTouches[0]),EZ(e,t)},OZ=0,MZ=0,NZ=0,PZ=0,FZ=0,LZ=0,zZ="object"==typeof performance&&performance.now?performance:Date,BZ="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function WZ(){return FZ||(BZ(qZ),FZ=zZ.now()+LZ)}function qZ(){FZ=0}function VZ(){this._call=this._time=this._next=null}function UZ(e,t,n){var r=new VZ;return r.restart(e,t,n),r}function jZ(){FZ=(PZ=zZ.now())+LZ,OZ=MZ=0;try{!function(){WZ(),++OZ;for(var e,t=bZ;t;)(e=FZ-t._time)>=0&&t._call.call(null,e),t=t._next;--OZ}()}finally{OZ=0,function(){for(var e,t,n=bZ,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:bZ=t);xZ=e,GZ(r)}(),FZ=0}}function HZ(){var e=zZ.now(),t=e-PZ;t>1e3&&(LZ-=t,PZ=e)}function GZ(e){OZ||(MZ&&(MZ=clearTimeout(MZ)),e-FZ>24?(e<1/0&&(MZ=setTimeout(jZ,e-zZ.now()-LZ)),NZ&&(NZ=clearInterval(NZ))):(NZ||(PZ=zZ.now(),NZ=setInterval(HZ,1e3)),OZ=1,BZ(jZ)))}VZ.prototype=UZ.prototype={constructor:VZ,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?WZ():+n)+(null==t?0:+t),this._next||xZ===this||(xZ?xZ._next=this:bZ=this,xZ=this),this._call=e,this._time=n,GZ()},stop:function(){this._call&&(this._call=null,this._time=1/0,GZ())}};var JZ=function(e,t,n){var r=new VZ;return r.restart((function(n){r.stop(),e(n+t)}),t=null==t?0:+t,n),r},XZ=NK("start","end","cancel","interrupt"),KZ=[],ZZ=function(e,t,n,r,a,i){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,a=e.__transition;function i(u){var l,c,h,f;if(1!==n.state)return s();for(l in a)if((f=a[l]).name===n.name){if(3===f.state)return JZ(i);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete a[l]):+l<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete a[l])}if(JZ((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(u))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),l=0,c=-1;l<h;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function o(t){for(var a=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),i=-1,o=r.length;++i<o;)r[i].call(e,a);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=n,n.timer=UZ((function(e){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:a,on:XZ,tween:KZ,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})};function YZ(e,t){var n=$Z(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function QZ(e,t){var n=$Z(e,t);if(n.state>3)throw new Error("too late; already running");return n}function $Z(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var eY,tY,nY,rY,aY=function(e,t){var n,r,a,i=e.__transition,o=!0;if(i){for(a in t=null==t?null:t+"",i)(n=i[a]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[a]):o=!1;o&&delete e.__transition}},iY=180/Math.PI,oY={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},sY=function(e,t,n,r,a,i){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*iY,skewX:Math.atan(u)*iY,scaleX:o,scaleY:s}};function uY(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(i,o){var s=[],u=[];return i=e(i),o=e(o),function(e,r,a,i,o,s){if(e!==a||r!==i){var u=o.push("translate(",null,t,null,n);s.push({i:u-4,x:kZ(e,a)},{i:u-2,x:kZ(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,s,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:kZ(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}(i.rotate,o.rotate,s,u),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:kZ(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}(i.skewX,o.skewX,s,u),function(e,t,n,r,i,o){if(e!==n||t!==r){var s=i.push(a(i)+"scale(",null,",",null,")");o.push({i:s-4,x:kZ(e,n)},{i:s-2,x:kZ(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,s,u),i=o=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var lY=uY((function(e){return"none"===e?oY:(eY||(eY=document.createElement("DIV"),tY=document.documentElement,nY=document.defaultView),eY.style.transform=e,e=nY.getComputedStyle(tY.appendChild(eY),null).getPropertyValue("transform"),tY.removeChild(eY),e=e.slice(7,-1).split(","),sY(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),cY=uY((function(e){return null==e?oY:(rY||(rY=document.createElementNS("http://www.w3.org/2000/svg","g")),rY.setAttribute("transform",e),(e=rY.transform.baseVal.consolidate())?sY((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):oY)}),", ",")",")");function hY(e,t){var n,r;return function(){var a=QZ(this,e),i=a.tween;if(i!==n)for(var o=0,s=(r=n=i).length;o<s;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}a.tween=r}}function fY(e,t,n){var r,a;if("function"!=typeof n)throw new Error;return function(){var i=QZ(this,e),o=i.tween;if(o!==r){a=(r=o).slice();for(var s={name:t,value:n},u=0,l=a.length;u<l;++u)if(a[u].name===t){a[u]=s;break}u===l&&a.push(s)}i.tween=a}}function dY(e,t,n){var r=e._id;return e.each((function(){var e=QZ(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return $Z(e,r).value[t]}}var pY=function(e,t){var n;return("number"==typeof t?kZ:t instanceof eZ?vZ:(n=eZ(t))?(t=n,vZ):DZ)(e,t)};function mY(e){return function(){this.removeAttribute(e)}}function vY(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yY(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function gY(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function _Y(e,t,n){var r,a,i;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttribute(e))===(s=u+"")?null:o===r&&s===a?i:(a=s,i=t(r=o,u));this.removeAttribute(e)}}function bY(e,t,n){var r,a,i;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:o===r&&s===a?i:(a=s,i=t(r=o,u));this.removeAttributeNS(e.space,e.local)}}function xY(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function wY(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function kY(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&wY(e,a)),n}return a._value=t,a}function CY(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&xY(e,a)),n}return a._value=t,a}function SY(e,t){return function(){YZ(this,e).delay=+t.apply(this,arguments)}}function IY(e,t){return t=+t,function(){YZ(this,e).delay=t}}function DY(e,t){return function(){QZ(this,e).duration=+t.apply(this,arguments)}}function AY(e,t){return t=+t,function(){QZ(this,e).duration=t}}function TY(e,t){if("function"!=typeof t)throw new Error;return function(){QZ(this,e).ease=t}}function EY(e,t,n){var r,a,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?YZ:QZ;return function(){var o=i(this,e),s=o.on;s!==r&&(a=(r=s).copy()).on(t,n),o.on=a}}var RY=IK.prototype.constructor;function OY(e){return function(){this.style.removeProperty(e)}}function MY(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function NY(e,t,n){var r,a;function i(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&MY(e,i,n)),r}return i._value=t,i}function PY(e){return function(t){this.textContent=e.call(this,t)}}function FY(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&PY(r)),t}return r._value=e,r}var LY=0;function zY(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function BY(){return++LY}var WY=IK.prototype;zY.prototype=(function(e){return IK().transition(e)}).prototype={constructor:zY,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=gX(e));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var s,u,l=r[o],c=l.length,h=i[o]=new Array(c),f=0;f<c;++f)(s=l[f])&&(u=e.call(s,s.__data__,f,l))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,ZZ(h[f],t,n,f,h,$Z(s,n)));return new zY(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=bX(e));for(var r=this._groups,a=r.length,i=[],o=[],s=0;s<a;++s)for(var u,l=r[s],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,d=e.call(u,u.__data__,h,l),p=$Z(u,n),m=0,v=d.length;m<v;++m)(f=d[m])&&ZZ(f,t,n,m,d,p);i.push(d),o.push(u)}return new zY(i,o,t,n)},filter:function(e){"function"!=typeof e&&(e=xX(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],s=o.length,u=r[a]=[],l=0;l<s;++l)(i=o[l])&&e.call(i,i.__data__,l,o)&&u.push(i);return new zY(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=Math.min(r,n.length),i=new Array(r),o=0;o<a;++o)for(var s,u=t[o],l=n[o],c=u.length,h=i[o]=new Array(c),f=0;f<c;++f)(s=u[f]||l[f])&&(h[f]=s);for(;o<r;++o)i[o]=t[o];return new zY(i,this._parents,this._name,this._id)},selection:function(){return new RY(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=BY(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],u=s.length,l=0;l<u;++l)if(o=s[l]){var c=$Z(o,t);ZZ(o,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new zY(r,this._parents,e,n)},call:WY.call,nodes:WY.nodes,node:WY.node,size:WY.size,empty:WY.empty,each:WY.each,on:function(e,t){var n=this._id;return arguments.length<2?$Z(this.node(),n).on.on(e):this.each(EY(n,e,t))},attr:function(e,t){var n=TX(e),r="transform"===n?cY:pY;return this.attrTween(e,"function"==typeof t?(n.local?bY:_Y)(n,r,dY(this,"attr."+e,t)):null==t?(n.local?vY:mY)(n):(n.local?gY:yY)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=TX(e);return this.tween(n,(r.local?kY:CY)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?lY:pY;return null==t?this.styleTween(e,function(e,t){var n,r,a;return function(){var i=WX(this,e),o=(this.style.removeProperty(e),WX(this,e));return i===o?null:i===n&&o===r?a:a=t(n=i,r=o)}}(e,r)).on("end.style."+e,OY(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,a,i;return function(){var o=WX(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=WX(this,e)),o===u?null:o===r&&u===a?i:(a=u,i=t(r=o,s))}}(e,r,dY(this,"style."+e,t))).each(function(e,t){var n,r,a,i,o="style."+t,s="end."+o;return function(){var u=QZ(this,e),l=u.on,c=null==u.value[o]?i||(i=OY(t)):void 0;l===n&&a===c||(r=(n=l).copy()).on(s,a=c),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,a,i=n+"";return function(){var o=WX(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,NY(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(dY(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,FY(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,a=$Z(this.node(),n).tween,i=0,o=a.length;i<o;++i)if((r=a[i]).name===e)return r.value;return null}return this.each((null==t?hY:fY)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?SY:IY)(t,e)):$Z(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?DY:AY)(t,e)):$Z(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(TY(t,e)):$Z(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,a=n.size();return new Promise((function(i,o){var s={value:o},u={value:function(){0==--a&&i()}};n.each((function(){var n=QZ(this,r),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t}))}))}};var qY={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function VY(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return qY.time=WZ(),qY;return n}IK.prototype.interrupt=function(e){return this.each((function(){aY(this,e)}))},IK.prototype.transition=function(e){var t,n;e instanceof zY?(t=e._id,e=e._name):(t=BY(),(n=qY).time=WZ(),e=null==e?null:e+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],u=s.length,l=0;l<u;++l)(o=s[l])&&ZZ(o,e,t,l,s,n||VY(o,t));return new zY(r,this._parents,e,t)};var UY=function(e){return function(){return e}},jY=function(e,t,n){this.target=e,this.type=t,this.selection=n};function HY(){pK.stopImmediatePropagation()}var GY=function(){pK.preventDefault(),pK.stopImmediatePropagation()},JY={name:"drag"},XY={name:"space"},KY={name:"handle"},ZY={name:"center"};function YY(e){return[+e[0],+e[1]]}function QY(e){return[YY(e[0]),YY(e[1])]}function $Y(e){return function(t){return function(e,t,n){arguments.length<3&&(n=t,t=TZ().changedTouches);for(var r,a=0,i=t?t.length:0;a<i;++a)if((r=t[a]).identifier===n)return EZ(e,r);return null}(t,pK.touches,e)}}var eQ={name:"x",handles:["w","e"].map(sQ),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},tQ={name:"y",handles:["n","s"].map(sQ),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},nQ=(["n","w","e","s","nw","ne","sw","se"].map(sQ),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),rQ={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},aQ={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},iQ={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},oQ={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function sQ(e){return{type:e}}function uQ(){return!pK.ctrlKey&&!pK.button}function lQ(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function cQ(){return navigator.maxTouchPoints||"ontouchstart"in this}function hQ(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function fQ(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}var dQ=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},pQ=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return dQ(t(e),n)}),{left:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)<0?r=i+1:a=i}return r},right:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)>0?a=i:r=i+1}return r}}},mQ=Math.sqrt(50),vQ=Math.sqrt(10),yQ=Math.sqrt(2);function gQ(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,a);return a>=0?(i>=mQ?10:i>=vQ?5:i>=yQ?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=mQ?10:i>=vQ?5:i>=yQ?2:1)}function _Q(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/a;return i>=mQ?a*=10:i>=vQ?a*=5:i>=yQ&&(a*=2),t<e?-a:a}var bQ=new Date,xQ=new Date;function wQ(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,s=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return s;do{s.push(o=new Date(+n)),t(n,i),e(n)}while(o<n&&n<r);return s},a.filter=function(n){return wQ((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return bQ.setTime(+t),xQ.setTime(+r),e(bQ),e(xQ),Math.floor(n(bQ,xQ))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e==0}:function(t){return a.count(0,t)%e==0}):a:null}),a}var kQ=wQ((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));kQ.every=function(e){return isFinite(e=Math.floor(e))&&e>0?wQ((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var CQ=kQ,SQ=wQ((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}));function IQ(e){return wQ((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5}))}var DQ=IQ(0),AQ=IQ(1),TQ=(IQ(2),IQ(3),IQ(4)),EQ=(IQ(5),IQ(6),wQ((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),(function(e){return e.getDate()-1}))),RQ=wQ((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getHours()})),OQ=wQ((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getMinutes()})),MQ=wQ((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+1e3*t)}),(function(e,t){return(t-e)/1e3}),(function(e){return e.getUTCSeconds()})),NQ=wQ((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));NQ.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?wQ((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):NQ:null};var PQ=NQ;function FQ(e){return wQ((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/6048e5}))}var LQ=FQ(0),zQ=FQ(1),BQ=(FQ(2),FQ(3),FQ(4)),WQ=(FQ(5),FQ(6),wQ((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/864e5}),(function(e){return e.getUTCDate()-1}))),qQ=wQ((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));qQ.every=function(e){return isFinite(e=Math.floor(e))&&e>0?wQ((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var VQ=qQ;function UQ(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jQ(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function HQ(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var GQ,JQ,XQ={"-":"",_:" ",0:"0"},KQ=/^\s*\d+/,ZQ=/^%/,YQ=/[\\^$*+?|[\]().{}]/g;function QQ(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function $Q(e){return e.replace(YQ,"\\$&")}function e$(e){return new RegExp("^(?:"+e.map($Q).join("|")+")","i")}function t$(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function n$(e,t,n){var r=KQ.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function r$(e,t,n){var r=KQ.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function a$(e,t,n){var r=KQ.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function i$(e,t,n){var r=KQ.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function o$(e,t,n){var r=KQ.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function s$(e,t,n){var r=KQ.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function u$(e,t,n){var r=KQ.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function l$(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function c$(e,t,n){var r=KQ.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function h$(e,t,n){var r=KQ.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function f$(e,t,n){var r=KQ.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function d$(e,t,n){var r=KQ.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function p$(e,t,n){var r=KQ.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function m$(e,t,n){var r=KQ.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function v$(e,t,n){var r=KQ.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function y$(e,t,n){var r=KQ.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function g$(e,t,n){var r=KQ.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _$(e,t,n){var r=ZQ.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function b$(e,t,n){var r=KQ.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function x$(e,t,n){var r=KQ.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function w$(e,t){return QQ(e.getDate(),t,2)}function k$(e,t){return QQ(e.getHours(),t,2)}function C$(e,t){return QQ(e.getHours()%12||12,t,2)}function S$(e,t){return QQ(1+EQ.count(CQ(e),e),t,3)}function I$(e,t){return QQ(e.getMilliseconds(),t,3)}function D$(e,t){return I$(e,t)+"000"}function A$(e,t){return QQ(e.getMonth()+1,t,2)}function T$(e,t){return QQ(e.getMinutes(),t,2)}function E$(e,t){return QQ(e.getSeconds(),t,2)}function R$(e){var t=e.getDay();return 0===t?7:t}function O$(e,t){return QQ(DQ.count(CQ(e)-1,e),t,2)}function M$(e,t){var n=e.getDay();return e=n>=4||0===n?TQ(e):TQ.ceil(e),QQ(TQ.count(CQ(e),e)+(4===CQ(e).getDay()),t,2)}function N$(e){return e.getDay()}function P$(e,t){return QQ(AQ.count(CQ(e)-1,e),t,2)}function F$(e,t){return QQ(e.getFullYear()%100,t,2)}function L$(e,t){return QQ(e.getFullYear()%1e4,t,4)}function z$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+QQ(t/60|0,"0",2)+QQ(t%60,"0",2)}function B$(e,t){return QQ(e.getUTCDate(),t,2)}function W$(e,t){return QQ(e.getUTCHours(),t,2)}function q$(e,t){return QQ(e.getUTCHours()%12||12,t,2)}function V$(e,t){return QQ(1+WQ.count(VQ(e),e),t,3)}function U$(e,t){return QQ(e.getUTCMilliseconds(),t,3)}function j$(e,t){return U$(e,t)+"000"}function H$(e,t){return QQ(e.getUTCMonth()+1,t,2)}function G$(e,t){return QQ(e.getUTCMinutes(),t,2)}function J$(e,t){return QQ(e.getUTCSeconds(),t,2)}function X$(e){var t=e.getUTCDay();return 0===t?7:t}function K$(e,t){return QQ(LQ.count(VQ(e)-1,e),t,2)}function Z$(e,t){var n=e.getUTCDay();return e=n>=4||0===n?BQ(e):BQ.ceil(e),QQ(BQ.count(VQ(e),e)+(4===VQ(e).getUTCDay()),t,2)}function Y$(e){return e.getUTCDay()}function Q$(e,t){return QQ(zQ.count(VQ(e)-1,e),t,2)}function $$(e,t){return QQ(e.getUTCFullYear()%100,t,2)}function e0(e,t){return QQ(e.getUTCFullYear()%1e4,t,4)}function t0(){return"+0000"}function n0(){return"%"}function r0(e){return+e}function a0(e){return Math.floor(+e/1e3)}GQ=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,u=e.shortMonths,l=e$(a),c=t$(a),h=e$(i),f=t$(i),d=e$(o),p=t$(o),m=e$(s),v=t$(s),y=e$(u),g=t$(u),_={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:w$,e:w$,f:D$,H:k$,I:C$,j:S$,L:I$,m:A$,M:T$,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:r0,s:a0,S:E$,u:R$,U:O$,V:M$,w:N$,W:P$,x:null,X:null,y:F$,Y:L$,Z:z$,"%":n0},b={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:B$,e:B$,f:j$,H:W$,I:q$,j:V$,L:U$,m:H$,M:G$,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:r0,s:a0,S:J$,u:X$,U:K$,V:Z$,w:Y$,W:Q$,x:null,X:null,y:$$,Y:e0,Z:t0,"%":n0},x={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=g[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return C(e,t,n,r)},d:f$,e:f$,f:g$,H:p$,I:p$,j:d$,L:y$,m:h$,M:m$,p:function(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=c[r[0].toLowerCase()],n+r[0].length):-1},q:c$,Q:b$,s:x$,S:v$,u:r$,U:a$,V:i$,w:n$,W:o$,x:function(e,t,r){return C(e,n,t,r)},X:function(e,t,n){return C(e,r,t,n)},y:u$,Y:s$,Z:l$,"%":_$};function w(e,t){return function(n){var r,a,i,o=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(a=XQ[r=e.charAt(++s)])?r=e.charAt(++s):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}}function k(e,t){return function(n){var r,a,i=HQ(1900,void 0,1);if(C(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=jQ(HQ(i.y,0,1))).getUTCDay(),r=a>4||0===a?zQ.ceil(r):zQ(r),r=WQ.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=UQ(HQ(i.y,0,1))).getDay(),r=a>4||0===a?AQ.ceil(r):AQ(r),r=EQ.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?jQ(HQ(i.y,0,1)).getUTCDay():UQ(HQ(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,jQ(i)):UQ(i)}}function C(e,t,n,r){for(var a,i,o=0,s=t.length,u=n.length;o<s;){if(r>=u)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=x[a in XQ?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return _.x=w(n,_),_.X=w(r,_),_.c=w(t,_),b.x=w(n,b),b.X=w(r,b),b.c=w(t,b),{format:function(e){var t=w(e+="",_);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),JQ=GQ.format;var i0=pQ(dQ).right,o0=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},s0=function(e){return+e},u0=[0,1];function l0(e){return e}function c0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function h0(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=c0(a,r),i=n(o,i)):(r=c0(r,a),i=n(i,o)),function(e){return i(r(e))}}function f0(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=c0(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=i0(e,t,1,r)-1;return i[n](a[n](t))}}function d0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function p0(){return function(){var e,t,n,r,a,i,o=u0,s=u0,u=AZ,l=l0;function c(){var e,t,n,u=Math.min(o.length,s.length);return l!==l0&&((e=o[0])>(t=o[u-1])&&(n=e,e=t,t=n),l=function(n){return Math.max(e,Math.min(t,n))}),r=u>2?f0:h0,a=i=null,h}function h(t){return isNaN(t=+t)?n:(a||(a=r(o.map(e),s,u)))(e(l(t)))}return h.invert=function(n){return l(t((i||(i=r(s,o.map(e),kZ)))(n)))},h.domain=function(e){return arguments.length?(o=Array.from(e,s0),c()):o.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),u=o0,c()},h.clamp=function(e){return arguments.length?(l=!!e||l0,c()):l!==l0},h.interpolate=function(e){return arguments.length?(u=e,c()):u},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,c()}}()(l0,l0)}function m0(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function v0(e){return new Date(e)}function y0(e){return e instanceof Date?+e:+new Date(+e)}function g0(e,t,n,r,a,i,o,s,u){var l=p0(),c=l.invert,h=l.domain,f=u(".%L"),d=u(":%S"),p=u("%I:%M"),m=u("%I %p"),v=u("%a %d"),y=u("%b %d"),g=u("%B"),_=u("%Y"),b=[[o,1,1e3],[o,5,5e3],[o,15,15e3],[o,30,3e4],[i,1,6e4],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,36e5],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];function x(s){return(o(s)<s?f:i(s)<s?d:a(s)<s?p:r(s)<s?m:t(s)<s?n(s)<s?v:y:e(s)<s?g:_)(s)}function w(t,n,r){if(null==t&&(t=10),"number"==typeof t){var a,i=Math.abs(r-n)/t,o=pQ((function(e){return e[2]})).right(b,i);return o===b.length?(a=_Q(n/31536e6,r/31536e6,t),t=e):o?(a=(o=b[i/b[o-1][2]<b[o][2]/i?o-1:o])[1],t=o[0]):(a=Math.max(_Q(n,r,t),1),t=s),t.every(a)}return t}return l.invert=function(e){return new Date(c(e))},l.domain=function(e){return arguments.length?h(Array.from(e,y0)):h().map(v0)},l.ticks=function(e){var t,n=h(),r=n[0],a=n[n.length-1],i=a<r;return i&&(t=r,r=a,a=t),t=(t=w(e,r,a))?t.range(r,a+1):[],i?t.reverse():t},l.tickFormat=function(e,t){return null==t?x:u(t)},l.nice=function(e){var t=h();return(e=w(e,t[0],t[t.length-1]))?h(function(e,t){var n,r=0,a=(e=e.slice()).length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}(t,e)):l},l.copy=function(){return d0(l,g0(e,t,n,r,a,i,o,s,u))},l}var _0=function(){return m0.apply(g0(CQ,SQ,DQ,EQ,RQ,OQ,MQ,PQ,JQ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},b0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function x0(e){if(!(t=b0.exec(e)))throw new Error("invalid format: "+e);var t;return new w0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function w0(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}x0.prototype=w0.prototype,w0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var k0,C0,S0,I0,D0=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},A0=function(e){return(e=D0(Math.abs(e)))?e[1]:NaN},T0=function(e,t){var n=D0(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")},E0={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return T0(100*e,t)},r:T0,s:function(e,t){var n=D0(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(k0=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+D0(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},R0=function(e){return e},O0=Array.prototype.map,M0=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function N0(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,a,i,o,s=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(o=gQ(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),i=new Array(a=Math.ceil(t-e+1));++s<a;)i[s]=(e+s)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),i=new Array(a=Math.ceil(e-t+1));++s<a;)i[s]=(e-s)/o;return r&&i.reverse(),i}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return function(e,t,n,r){var a,i=_Q(e,t,n);switch((r=x0(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(A0(t)/3)))-A0(Math.abs(e)))}(i,o))||(r.precision=a),I0(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,A0(t)-A0(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-A0(Math.abs(e)))}(i))||(r.precision=a-2*("%"===r.type))}return S0(r)}(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a=t(),i=0,o=a.length-1,s=a[i],u=a[o];return u<s&&(r=s,s=u,u=r,r=i,i=o,o=r),(r=gQ(s,u,n))>0?r=gQ(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=gQ(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(a[i]=Math.floor(s/r)*r,a[o]=Math.ceil(u/r)*r,t(a)):r<0&&(a[i]=Math.ceil(s*r)/r,a[o]=Math.floor(u*r)/r,t(a)),e},e}function P0(){var e=p0();return e.copy=function(){return d0(e,P0())},m0.apply(e,arguments),N0(e)}C0=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?R0:(t=O0.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,s=t[0],u=0;a>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),i.push(e.substring(a-=s,a+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?R0:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(O0.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"-":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=x0(e)).fill,n=e.align,h=e.sign,f=e.symbol,d=e.zero,p=e.width,m=e.comma,v=e.precision,y=e.trim,g=e.type;"n"===g?(m=!0,g="g"):E0[g]||(void 0===v&&(v=12),y=!0,g="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var _="$"===f?a:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?i:/[%p]/.test(g)?u:"",x=E0[g],w=/[defgprs%]/.test(g);function k(e){var a,i,u,f=_,k=b;if("c"===g)k=x(e)+k,e="";else{var C=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:x(Math.abs(e),v),y&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),C&&0==+e&&"+"!==h&&(C=!1),f=(C?"("===h?h:l:"-"===h||"("===h?"":h)+f,k=("s"===g?M0[8+k0/3]:"")+k+(C&&"("===h?")":""),w)for(a=-1,i=e.length;++a<i;)if(48>(u=e.charCodeAt(a))||u>57){k=(46===u?o+e.slice(a+1):e.slice(a))+k,e=e.slice(0,a);break}}m&&!d&&(e=r(e,1/0));var S=f.length+e.length+k.length,I=S<p?new Array(p-S+1).join(t):"";switch(m&&d&&(e=r(I+e,I.length?p-k.length:1/0),I=""),n){case"<":e=f+e+k+I;break;case"=":e=f+I+e+k;break;case"^":e=I.slice(0,S=I.length>>1)+f+e+k+I.slice(S);break;default:e=I+f+e+k}return s(e)}return v=void 0===v?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return e+""},k}return{format:h,formatPrefix:function(e,t){var n=h(((e=x0(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(A0(t)/3))),a=Math.pow(10,-r),i=M0[8+r/3];return function(e){return n(a*e)+i}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),S0=C0.format,I0=C0.formatPrefix;var F0=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i},L0=Symbol("implicit");function z0(){var e=new Map,t=[],n=[],r=L0;function a(a){var i=a+"",o=e.get(i);if(!o){if(r!==L0)return r;e.set(i,o=t.push(a))}return n[(o-1)%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;var r,i=_createForOfIteratorHelper(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o+"";e.has(s)||e.set(s,t.push(o))}}catch(s7){i.e(s7)}finally{i.f()}return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return z0(t,n).unknown(r)},m0.apply(a,arguments),a}function B0(){var e,t,n=z0().unknown(void 0),r=n.domain,a=n.range,i=0,o=1,s=!1,u=0,l=0,c=.5;function h(){var n=r().length,h=o<i,f=h?o:i,d=h?i:o;e=(d-f)/Math.max(1,n-u+2*l),s&&(e=Math.floor(e)),f+=(d-f-e*(n-u))*c,t=e*(1-u),s&&(f=Math.round(f),t=Math.round(t));var p=F0(n).map((function(t){return f+e*t}));return a(h?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){var t;return arguments.length?(t=_slicedToArray(e,2),i=t[0],o=t[1],i=+i,o=+o,h()):[i,o]},n.rangeRound=function(e){var t;return t=_slicedToArray(e,2),i=t[0],o=t[1],i=+i,o=+o,s=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,h()):s},n.padding=function(e){return arguments.length?(u=Math.min(1,l=+e),h()):u},n.paddingInner=function(e){return arguments.length?(u=Math.min(1,e),h()):u},n.paddingOuter=function(e){return arguments.length?(l=+e,h()):l},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),h()):c},n.copy=function(){return B0(r(),[i,o]).round(s).paddingInner(u).paddingOuter(l).align(c)},m0.apply(h(),arguments)}function W0(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return W0(t())},e}function q0(){return W0(B0.apply(null,arguments).paddingInner(1))}function V0(e,t){var n;if(void 0===t){var r,a=_createForOfIteratorHelper(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n<i||void 0===n&&i>=i)&&(n=i)}}catch(s7){a.e(s7)}finally{a.f()}}else{var o,s=-1,u=_createForOfIteratorHelper(e);try{for(u.s();!(o=u.n()).done;){var l=o.value;null!=(l=t(l,++s,e))&&(n<l||void 0===n&&l>=l)&&(n=l)}}catch(s7){u.e(s7)}finally{u.f()}}return n}function U0(e,t){var n;if(void 0===t){var r,a=_createForOfIteratorHelper(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n>i||void 0===n&&i>=i)&&(n=i)}}catch(s7){a.e(s7)}finally{a.f()}}else{var o,s=-1,u=_createForOfIteratorHelper(e);try{for(u.s();!(o=u.n()).done;){var l=o.value;null!=(l=t(l,++s,e))&&(n>l||void 0===n&&l>=l)&&(n=l)}}catch(s7){u.e(s7)}finally{u.f()}}return n}function j0(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function H0(e,t,n){if(r=(e=Float64Array.from(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=22;break}r=_createForOfIteratorHelper(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=12;break}if(i=a.value,e.t0=null!=i&&(i=+i)>=i,!e.t0){e.next=10;break}return e.next=10,i;case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),r.e(e.t1);case 17:return e.prev=17,r.f(),e.finish(17);case 20:e.next=42;break;case 22:o=-1,s=_createForOfIteratorHelper(t),e.prev=24,s.s();case 26:if((u=s.n()).done){e.next=34;break}if(l=u.value,e.t2=null!=(l=n(l,++o,t))&&(l=+l)>=l,!e.t2){e.next=32;break}return e.next=32,l;case 32:e.next=26;break;case 34:e.next=39;break;case 36:e.prev=36,e.t3=e.catch(24),s.e(e.t3);case 39:return e.prev=39,s.f(),e.finish(39);case 42:case"end":return e.stop()}}),e,null,[[2,14,17,20],[24,36,39,42]])}))(e,n))).length){if((t=+t)<=0||r<2)return U0(e);if(t>=1)return V0(e);var r,a=(r-1)*t,i=Math.floor(a),o=V0(function e(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dQ;a>r;){if(a-r>600){var o=a-r+1,s=n-r+1,u=Math.log(o),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(o-l)/o)*(s-o/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*l/o+c)),Math.min(a,Math.floor(n+(o-s)*l/o+c)),i)}var h=t[n],f=r,d=a;for(j0(t,r,n),i(t[a],h)>0&&j0(t,r,a);f<d;){for(j0(t,f,d),++f,--d;i(t[f],h)<0;)++f;for(;i(t[d],h)>0;)--d}0===i(t[r],h)?j0(t,r,d):j0(t,++d,a),d<=n&&(r=d+1),n<=d&&(a=d-1)}return t}(e,i).subarray(0,i+1));return o+(U0(e.subarray(i+1))-o)*(a-i)}}function G0(e){this._context=e}G0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var J0=function(e){return new G0(e)},X0=Math.PI,K0=2*X0,Z0=K0-1e-6;function Y0(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Q0(){return new Y0}Y0.prototype=Q0.prototype={constructor:Y0,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(e,t,n,r,a){var i=this._x1,o=this._y1,s=(n=+n)-(e=+e),u=(r=+r)-(t=+t),l=i-e,c=o-t,h=l*l+c*c;if((a=+a)<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>1e-6)if(Math.abs(c*s-u*l)>1e-6&&a){var f=n-i,d=r-o,p=s*s+u*u,m=f*f+d*d,v=Math.sqrt(p),y=Math.sqrt(h),g=a*Math.tan((X0-Math.acos((p+h-m)/(2*v*y)))/2),_=g/y,b=g/v;Math.abs(_-1)>1e-6&&(this._+="L"+(e+_*l)+","+(t+_*c)),this._+="A"+a+","+a+",0,0,"+ +(c*f>l*d)+","+(this._x1=e+b*s)+","+(this._y1=t+b*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,r,a,i){e=+e,t=+t,i=!!i;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+o,l=t+s,c=1^i,h=i?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(h<0&&(h=h%K0+K0),h>Z0?this._+="A"+n+","+n+",0,1,"+c+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=X0)+","+c+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var $0=Q0,e1=function(e){return function(){return e}};function t1(e){return e[0]}function n1(e){return e[1]}var r1=function(){var e=t1,t=n1,n=e1(!0),r=null,a=J0,i=null;function o(o){var s,u,l,c=o.length,h=!1;for(null==r&&(i=a(l=$0())),s=0;s<=c;++s)!(s<c&&n(u=o[s],s,o))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(u,s,o),+t(u,s,o));if(l)return i=null,l+""||null}return o.x=function(t){return arguments.length?(e="function"==typeof t?t:e1(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:e1(+e),o):t},o.defined=function(e){return arguments.length?(n="function"==typeof e?e:e1(!!e),o):n},o.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),o):a},o.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),o):r},o},a1=function(){var e=t1,t=null,n=e1(0),r=n1,a=e1(!0),i=null,o=J0,s=null;function u(u){var l,c,h,f,d,p=u.length,m=!1,v=new Array(p),y=new Array(p);for(null==i&&(s=o(d=$0())),l=0;l<=p;++l){if(!(l<p&&a(f=u[l],l,u))===m)if(m=!m)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=l-1;h>=c;--h)s.point(v[h],y[h]);s.lineEnd(),s.areaEnd()}m&&(v[l]=+e(f,l,u),y[l]=+n(f,l,u),s.point(t?+t(f,l,u):v[l],r?+r(f,l,u):y[l]))}if(d)return s=null,d+""||null}function l(){return r1().defined(a).curve(o).context(i)}return u.x=function(n){return arguments.length?(e="function"==typeof n?n:e1(+n),t=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:e1(+t),u):e},u.x1=function(e){return arguments.length?(t=null==e?null:"function"==typeof e?e:e1(+e),u):t},u.y=function(e){return arguments.length?(n="function"==typeof e?e:e1(+e),r=null,u):n},u.y0=function(e){return arguments.length?(n="function"==typeof e?e:e1(+e),u):n},u.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:e1(+e),u):r},u.lineX0=u.lineY0=function(){return l().x(e).y(n)},u.lineY1=function(){return l().x(e).y(r)},u.lineX1=function(){return l().x(t).y(n)},u.defined=function(e){return arguments.length?(a="function"==typeof e?e:e1(!!e),u):a},u.curve=function(e){return arguments.length?(o=e,null!=i&&(s=o(i)),u):o},u.context=function(e){return arguments.length?(null==e?i=s=null:s=o(i=e),u):i},u},i1=function(){};function o1(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function s1(e,t){this._context=e,this._k=(1-t)/6}function u1(e,t){this._context=e,this._k=(1-t)/6}s1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:o1(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:o1(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new s1(e,t)}return n.tension=function(t){return e(+t)},n}(0),u1.prototype={areaStart:i1,areaEnd:i1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:o1(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new u1(e,t)}return n.tension=function(t){return e(+t)},n}(0);var l1=Math.abs,c1=Math.atan2,h1=Math.cos,f1=Math.max,d1=Math.min,p1=Math.sin,m1=Math.sqrt,v1=Math.PI,y1=v1/2,g1=2*v1;function _1(e){return e>1?0:e<-1?v1:Math.acos(e)}function b1(e){return e>=1?y1:e<=-1?-y1:Math.asin(e)}function x1(e){return e.innerRadius}function w1(e){return e.outerRadius}function k1(e){return e.startAngle}function C1(e){return e.endAngle}function S1(e){return e&&e.padAngle}function I1(e,t,n,r,a,i,o,s){var u=n-e,l=r-t,c=o-a,h=s-i,f=h*u-c*l;if(!(f*f<1e-12))return[e+(f=(c*(t-i)-h*(e-a))/f)*u,t+f*l]}function D1(e,t,n,r,a,i,o){var s=e-n,u=t-r,l=(o?i:-i)/m1(s*s+u*u),c=l*u,h=-l*s,f=e+c,d=t+h,p=n+c,m=r+h,v=(f+p)/2,y=(d+m)/2,g=p-f,_=m-d,b=g*g+_*_,x=a-i,w=f*m-p*d,k=(_<0?-1:1)*m1(f1(0,x*x*b-w*w)),C=(w*_-g*k)/b,S=(-w*g-_*k)/b,I=(w*_+g*k)/b,D=(-w*g+_*k)/b,A=C-v,T=S-y,E=I-v,R=D-y;return A*A+T*T>E*E+R*R&&(C=I,S=D),{cx:C,cy:S,x01:-c,y01:-h,x11:C*(a/x-1),y11:S*(a/x-1)}}var A1=function(){var e=x1,t=w1,n=e1(0),r=null,a=k1,i=C1,o=S1,s=null;function u(){var u,l,c=+e.apply(this,arguments),h=+t.apply(this,arguments),f=a.apply(this,arguments)-y1,d=i.apply(this,arguments)-y1,p=l1(d-f),m=d>f;if(s||(s=u=$0()),h<c&&(l=h,h=c,c=l),h>1e-12)if(p>g1-1e-12)s.moveTo(h*h1(f),h*p1(f)),s.arc(0,0,h,f,d,!m),c>1e-12&&(s.moveTo(c*h1(d),c*p1(d)),s.arc(0,0,c,d,f,m));else{var v,y,g=f,_=d,b=f,x=d,w=p,k=p,C=o.apply(this,arguments)/2,S=C>1e-12&&(r?+r.apply(this,arguments):m1(c*c+h*h)),I=d1(l1(h-c)/2,+n.apply(this,arguments)),D=I,A=I;if(S>1e-12){var T=b1(S/c*p1(C)),E=b1(S/h*p1(C));(w-=2*T)>1e-12?(b+=T*=m?1:-1,x-=T):(w=0,b=x=(f+d)/2),(k-=2*E)>1e-12?(g+=E*=m?1:-1,_-=E):(k=0,g=_=(f+d)/2)}var R=h*h1(g),O=h*p1(g),M=c*h1(x),N=c*p1(x);if(I>1e-12){var P,F=h*h1(_),L=h*p1(_),z=c*h1(b),B=c*p1(b);if(p<v1&&(P=I1(R,O,z,B,F,L,M,N))){var W=R-P[0],q=O-P[1],V=F-P[0],U=L-P[1],j=1/p1(_1((W*V+q*U)/(m1(W*W+q*q)*m1(V*V+U*U)))/2),H=m1(P[0]*P[0]+P[1]*P[1]);D=d1(I,(c-H)/(j-1)),A=d1(I,(h-H)/(j+1))}}k>1e-12?A>1e-12?(v=D1(z,B,R,O,h,A,m),y=D1(F,L,M,N,h,A,m),s.moveTo(v.cx+v.x01,v.cy+v.y01),A<I?s.arc(v.cx,v.cy,A,c1(v.y01,v.x01),c1(y.y01,y.x01),!m):(s.arc(v.cx,v.cy,A,c1(v.y01,v.x01),c1(v.y11,v.x11),!m),s.arc(0,0,h,c1(v.cy+v.y11,v.cx+v.x11),c1(y.cy+y.y11,y.cx+y.x11),!m),s.arc(y.cx,y.cy,A,c1(y.y11,y.x11),c1(y.y01,y.x01),!m))):(s.moveTo(R,O),s.arc(0,0,h,g,_,!m)):s.moveTo(R,O),c>1e-12&&w>1e-12?D>1e-12?(v=D1(M,N,F,L,c,-D,m),y=D1(R,O,z,B,c,-D,m),s.lineTo(v.cx+v.x01,v.cy+v.y01),D<I?s.arc(v.cx,v.cy,D,c1(v.y01,v.x01),c1(y.y01,y.x01),!m):(s.arc(v.cx,v.cy,D,c1(v.y01,v.x01),c1(v.y11,v.x11),!m),s.arc(0,0,c,c1(v.cy+v.y11,v.cx+v.x11),c1(y.cy+y.y11,y.cx+y.x11),m),s.arc(y.cx,y.cy,D,c1(y.y11,y.x11),c1(y.y01,y.x01),!m))):s.arc(0,0,c,x,b,m):s.lineTo(M,N)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-v1/2;return[h1(r)*n,p1(r)*n]},u.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:e1(+t),u):e},u.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:e1(+e),u):t},u.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:e1(+e),u):n},u.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:e1(+e),u):r},u.startAngle=function(e){return arguments.length?(a="function"==typeof e?e:e1(+e),u):a},u.endAngle=function(e){return arguments.length?(i="function"==typeof e?e:e1(+e),u):i},u.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:e1(+e),u):o},u.context=function(e){return arguments.length?(s=null==e?null:e,u):s},u},T1=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},E1=function(e){return e},R1=function(e,t,n,r,a){for(var i,o=e.children,s=-1,u=o.length,l=e.value&&(r-t)/e.value;++s<u;)(i=o[s]).y0=n,i.y1=a,i.x0=t,i.x1=t+=i.value*l},O1=function(e,t,n,r,a){for(var i,o=e.children,s=-1,u=o.length,l=e.value&&(a-n)/e.value;++s<u;)(i=o[s]).x0=t,i.x1=r,i.y0=n,i.y1=n+=i.value*l};function M1(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function N1(e,t){var n,r,a,i,o,s=new z1(e),u=+e.value&&(s.value=e.value),l=[s];for(null==t&&(t=P1);n=l.pop();)if(u&&(n.value=+n.data.value),(a=t(n.data))&&(o=a.length))for(n.children=new Array(o),i=o-1;i>=0;--i)l.push(r=n.children[i]=new z1(a[i])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(L1)}function P1(e){return e.children}function F1(e){e.data=e.data.data}function L1(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function z1(e){this.data=e,this.depth=this.height=0,this.parent=null}!function e(t){function n(e,n,r,a,i){!function(e,t,n,r,a,i){for(var o,s,u,l,c,h,f,d,p,m,v,y=[],g=t.children,_=0,b=0,x=g.length,w=t.value;_<x;){u=a-n,l=i-r;do{c=g[b++].value}while(!c&&b<x);for(h=f=c,v=c*c*(m=Math.max(l/u,u/l)/(w*e)),p=Math.max(f/v,v/h);b<x;++b){if(c+=s=g[b].value,s<h&&(h=s),s>f&&(f=s),v=c*c*m,(d=Math.max(f/v,v/h))>p){c-=s;break}p=d}y.push(o={value:c,dice:u<l,children:g.slice(_,b)}),o.dice?R1(o,n,r,a,w?r+=l*c/w:i):O1(o,n,r,w?n+=u*c/w:a,i),w-=c,_=b}}(t,e,n,r,a,i)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}((1+Math.sqrt(5))/2),z1.prototype=N1.prototype={constructor:z1,count:function(){return this.eachAfter(M1)},each:function(e){var t,n,r,a,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(e(i),n=i.children)for(r=0,a=n.length;r<a;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(e){for(var t,n,r,a=this,i=[a],o=[];a=i.pop();)if(o.push(a),t=a.children)for(n=0,r=t.length;n<r;++n)i.push(t[n]);for(;a=o.pop();)e(a);return this},eachBefore:function(e){for(var t,n,r=this,a=[r];r=a.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)a.push(t[n]);return this},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,a=r&&r.length;--a>=0;)n+=r[a].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),a=null;for(e=n.pop(),t=r.pop();e===t;)a=e,e=n.pop(),t=r.pop();return a}(t,e),r=[t];t!==n;)r.push(t=t.parent);for(var a=r.length;e!==n;)r.splice(a,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return N1(this).eachBefore(F1)}};var B1=["caretElm"];function W1(e,t){}var q1=function(e){return{model:e}};function V1(e,t){if(1&e&&(ls(0,"span"),ns(1,W1,0,0,"ng-template",5),cs()),2&e){var n=ws();Ka(1),ss("ngTemplateOutlet",n.template)("ngTemplateOutletContext",ll(2,q1,n.context))}}function U1(e,t){1&e&&hs(0,"span",6),2&e&&ss("innerHTML",ws().title,Ea)}function j1(e,t){if(1&e&&(nr(),rr(),hs(0,"ngx-charts-scale-legend",4)),2&e){var n=ws();ss("horizontal",n.legendOptions&&"below"===n.legendOptions.position)("valueRange",n.legendOptions.domain)("colors",n.legendOptions.colors)("height",n.view[1])("width",n.legendWidth)}}function H1(e,t){if(1&e){var n=ps();nr(),rr(),ls(0,"ngx-charts-legend",5),ys("labelClick",(function(e){return Mn(n),ws().legendLabelClick.emit(e)}))("labelActivate",(function(e){return Mn(n),ws().legendLabelActivate.emit(e)}))("labelDeactivate",(function(e){return Mn(n),ws().legendLabelDeactivate.emit(e)})),cs()}if(2&e){var r=ws();ss("horizontal",r.legendOptions&&"below"===r.legendOptions.position)("data",r.legendOptions.domain)("title",r.legendOptions.title)("colors",r.legendOptions.colors)("height",r.view[1])("width",r.legendWidth)("activeEntries",r.activeEntries)}}var G1=["*"],J1=["ngx-charts-axis-label",""],X1=["ticksel"],K1=["ngx-charts-x-axis-ticks",""];function Z1(e,t){if(1&e&&(nr(),ls(0,"g",3),ls(1,"title"),Gs(2),cs(),ls(3,"text",4),Gs(4),cs(),cs()),2&e){var n=t.$implicit,r=ws();es("transform",r.tickTransform(n)),Ka(2),Js(r.tickFormat(n)),Ka(1),Ms("font-size","12px"),es("text-anchor",r.textAnchor)("transform",r.textTransform),Ka(1),Xs(" ",r.tickTrim(r.tickFormat(n))," ")}}function Y1(e,t){if(1&e&&(nr(),ls(0,"g"),hs(1,"line",6),cs()),2&e){var n=ws(2);es("transform",n.gridLineTransform()),Ka(1),es("y1",0-n.gridLineHeight)}}function Q1(e,t){if(1&e&&(nr(),ls(0,"g"),ns(1,Y1,2,2,"g",5),cs()),2&e){var n=t.$implicit,r=ws();es("transform",r.tickTransform(n)),Ka(1),ss("ngIf",r.showGridLines)}}var $1=["ngx-charts-x-axis",""];function e2(e,t){if(1&e){var n=ps();nr(),ls(0,"g",2),ys("dimensionsChanged",(function(e){return Mn(n),ws().emitTicksHeight(e)})),cs()}if(2&e){var r=ws();ss("trimTicks",r.trimTicks)("rotateTicks",r.rotateTicks)("maxTickLength",r.maxTickLength)("tickFormatting",r.tickFormatting)("tickArguments",r.tickArguments)("tickStroke",r.tickStroke)("scale",r.xScale)("orient",r.xOrient)("showGridLines",r.showGridLines)("gridLineHeight",r.dims.height)("width",r.dims.width)("tickValues",r.ticks)}}function t2(e,t){if(1&e&&(nr(),hs(0,"g",3)),2&e){var n=ws();ss("label",n.labelText)("offset",n.labelOffset)("orient","bottom")("height",n.dims.height)("width",n.dims.width)}}var n2=["ngx-charts-y-axis-ticks",""];function r2(e,t){if(1&e&&(nr(),ls(0,"g",4),ls(1,"title"),Gs(2),cs(),ls(3,"text",5),Gs(4),cs(),cs()),2&e){var n=t.$implicit,r=ws();es("transform",r.transform(n)),Ka(2),Js(r.tickFormat(n)),Ka(1),Ms("font-size","12px"),es("dy",r.dy)("x",r.x1)("y",r.y1)("text-anchor",r.textAnchor),Ka(1),Xs(" ",r.tickTrim(r.tickFormat(n))," ")}}function a2(e,t){if(1&e&&(nr(),hs(0,"path",6)),2&e){var n=ws();es("d",n.referenceAreaPath)("transform",n.gridLineTransform())}}function i2(e,t){1&e&&(nr(),hs(0,"line",9)),2&e&&es("x2",ws(3).gridLineWidth)}function o2(e,t){1&e&&(nr(),hs(0,"line",9)),2&e&&es("x2",0-ws(3).gridLineWidth)}function s2(e,t){if(1&e&&(nr(),ls(0,"g"),ns(1,i2,1,1,"line",8),ns(2,o2,1,1,"line",8),cs()),2&e){var n=ws(2);es("transform",n.gridLineTransform()),Ka(1),ss("ngIf","left"===n.orient),Ka(1),ss("ngIf","right"===n.orient)}}function u2(e,t){if(1&e&&(nr(),ls(0,"g"),ns(1,s2,3,3,"g",7),cs()),2&e){var n=t.$implicit,r=ws();es("transform",r.transform(n)),Ka(1),ss("ngIf",r.showGridLines)}}function l2(e,t){if(1&e&&(nr(),ls(0,"g"),ls(1,"title"),Gs(2),cs(),ls(3,"text",11),Gs(4),cs(),cs()),2&e){var n=ws(2).$implicit,r=ws();Ka(2),Js(r.tickTrim(r.tickFormat(n.value))),Ka(1),es("dy",r.dy)("y",-6)("x",r.gridLineWidth)("text-anchor",r.textAnchor),Ka(1),Xs(" ",n.name," ")}}function c2(e,t){if(1&e&&(nr(),ls(0,"g"),hs(1,"line",10),ns(2,l2,5,6,"g",7),cs()),2&e){var n=ws().$implicit,r=ws();es("transform",r.transform(n.value)),Ka(1),es("x2",r.gridLineWidth)("transform",r.gridLineTransform()),Ka(1),ss("ngIf",r.showRefLabels)}}function h2(e,t){if(1&e&&(nr(),ls(0,"g"),ns(1,c2,3,4,"g",7),cs()),2&e){var n=ws();Ka(1),ss("ngIf",n.showRefLines)}}var f2=["ngx-charts-y-axis",""];function d2(e,t){if(1&e){var n=ps();nr(),ls(0,"g",2),ys("dimensionsChanged",(function(e){return Mn(n),ws().emitTicksWidth(e)})),cs()}if(2&e){var r=ws();ss("trimTicks",r.trimTicks)("maxTickLength",r.maxTickLength)("tickFormatting",r.tickFormatting)("tickArguments",r.tickArguments)("tickValues",r.ticks)("tickStroke",r.tickStroke)("scale",r.yScale)("orient",r.yOrient)("showGridLines",r.showGridLines)("gridLineWidth",r.dims.width)("referenceLines",r.referenceLines)("showRefLines",r.showRefLines)("showRefLabels",r.showRefLabels)("height",r.dims.height)}}function p2(e,t){if(1&e&&(nr(),hs(0,"g",3)),2&e){var n=ws();ss("label",n.labelText)("offset",n.labelOffset)("orient",n.yOrient)("height",n.dims.height)("width",n.dims.width)}}var m2=["ngx-charts-circle-series",""];function v2(e,t){if(1&e&&(nr(),hs(0,"rect",4)),2&e){var n=ws(2);ss("@animationState","active"),es("x",n.circle.cx-n.circle.radius)("y",n.circle.cy)("width",2*n.circle.radius)("height",n.circle.height)("fill",n.gradientFill)}}var y2=function(e){return{name:e}};function g2(e,t){if(1&e){var n=ps();nr(),ls(0,"g"),ls(1,"defs"),hs(2,"g",1),cs(),ns(3,v2,1,6,"rect",2),ls(4,"g",3),ys("select",(function(){Mn(n);var e=ws();return e.onClick(e.circle.data)}))("activate",(function(){return Mn(n),ws().activateCircle()}))("deactivate",(function(){return Mn(n),ws().deactivateCircle()})),cs(),cs()}if(2&e){var r=ws();Ka(2),ss("name",r.gradientId)("stops",r.circle.gradientStops),Ka(1),ss("ngIf",r.barVisible&&"standard"===r.type),Ka(1),Ns("active",r.isActive(ll(18,y2,r.circle.seriesName))),ss("cx",r.circle.cx)("cy",r.circle.cy)("r",r.circle.radius)("fill",r.circle.color)("pointerEvents",0===r.circle.value?"none":"all")("data",r.circle.value)("classNames",r.circle.classNames)("tooltipDisabled",r.tooltipDisabled)("tooltipPlacement","top")("tooltipType","tooltip")("tooltipTitle",r.tooltipTemplate?void 0:r.getTooltipText(r.circle))("tooltipTemplate",r.tooltipTemplate)("tooltipContext",r.circle.data)}}var _2=["ngx-charts-circle",""],b2=["ngx-charts-svg-linear-gradient",""];function x2(e,t){if(1&e&&(nr(),hs(0,"stop")),2&e){var n=t.$implicit;Ms("stop-color",n.color)("stop-opacity",n.opacity),es("offset",n.offset+"%")}}var w2=["ngx-charts-svg-radial-gradient",""];function k2(e,t){if(1&e&&(nr(),hs(0,"stop")),2&e){var n=t.$implicit;Ms("stop-color",n.color)("stop-opacity",n.opacity),es("offset",n.offset+"%")}}var C2=["ngx-charts-area",""];function S2(e,t){if(1&e&&(nr(),ls(0,"defs"),hs(1,"g",2),cs()),2&e){var n=ws();Ka(1),ss("name",n.gradientId)("stops",n.gradientStops)}}var I2=["tooltipAnchor"],D2=["ngx-charts-tooltip-area",""];function A2(e,t){if(1&e&&(ls(0,"div",6),hs(1,"span",7),Gs(2),cs()),2&e){var n=t.$implicit,r=ws(2);Ka(1),Ms("background-color",n.color),Ka(1),Xs(" ",r.getToolTipText(n)," ")}}function T2(e,t){if(1&e&&(nr(),rr(),ls(0,"div",4),ns(1,A2,3,3,"div",5),cs()),2&e){var n=t.model;Ka(1),ss("ngForOf",n)}}var E2=["ngx-charts-timeline",""];function R2(e,t){if(1&e&&(ls(0,"header",4),ls(1,"span",5),Gs(2),cs(),cs()),2&e){var n=ws();Ka(2),Js(n.title)}}function O2(e,t){if(1&e){var n=ps();ls(0,"li",6),ls(1,"ngx-charts-legend-entry",7),ys("select",(function(e){return Mn(n),ws().labelClick.emit(e)}))("activate",(function(e){return Mn(n),ws().activate(e)}))("deactivate",(function(e){return Mn(n),ws().deactivate(e)})),cs(),cs()}if(2&e){var r=t.$implicit,a=ws();Ka(1),ss("label",r.label)("formattedLabel",r.formattedLabel)("color",r.color)("isActive",a.isActive(r))}}var M2=["tooltipTemplate"],N2=["seriesTooltipTemplate"],P2=function(e,t){return[e,t]},F2=["ngx-charts-bar",""];function L2(e,t){if(1&e&&(nr(),ls(0,"defs"),hs(1,"g",2),cs()),2&e){var n=ws();Ka(1),ss("orientation",n.orientation)("name",n.gradientId)("stops",n.gradientStops)}}function z2(e,t){if(1&e){var n=ps();nr(),ls(0,"g",5),ys("dimensionsChanged",(function(e){return Mn(n),ws().updateXAxisHeight(e)})),cs()}if(2&e){var r=ws();ss("xScale",r.xScale)("dims",r.dims)("showLabel",r.showXAxisLabel)("labelText",r.xAxisLabel)("trimTicks",r.trimXAxisTicks)("rotateTicks",r.rotateXAxisTicks)("maxTickLength",r.maxXAxisTickLength)("tickFormatting",r.xAxisTickFormatting)("ticks",r.xAxisTicks)("xAxisOffset",r.dataLabelMaxHeight.negative)}}function B2(e,t){if(1&e){var n=ps();nr(),ls(0,"g",6),ys("dimensionsChanged",(function(e){return Mn(n),ws().updateYAxisWidth(e)})),cs()}if(2&e){var r=ws();ss("yScale",r.yScale)("dims",r.dims)("showGridLines",r.showGridLines)("showLabel",r.showYAxisLabel)("labelText",r.yAxisLabel)("trimTicks",r.trimYAxisTicks)("maxTickLength",r.maxYAxisTickLength)("tickFormatting",r.yAxisTickFormatting)("ticks",r.yAxisTicks)}}var W2=["ngx-charts-series-vertical",""];function q2(e,t){if(1&e){var n=ps();nr(),ls(0,"g",2),ys("select",(function(e){return Mn(n),ws().onClick(e)}))("activate",(function(e){return Mn(n),ws().activate.emit(e)}))("deactivate",(function(e){return Mn(n),ws().deactivate.emit(e)})),cs()}if(2&e){var r=t.$implicit,a=ws();ss("@animationState","active")("@.disabled",!a.animations)("width",r.width)("height",r.height)("x",r.x)("y",r.y)("fill",r.color)("stops",r.gradientStops)("data",r.data)("orientation","vertical")("roundEdges",r.roundEdges)("gradient",a.gradient)("ariaLabel",r.ariaLabel)("isActive",a.isActive(r.data))("tooltipDisabled",a.tooltipDisabled)("tooltipPlacement",a.tooltipPlacement)("tooltipType",a.tooltipType)("tooltipTitle",a.tooltipTemplate?void 0:r.tooltipText)("tooltipTemplate",a.tooltipTemplate)("tooltipContext",r.data)("noBarWhenZero",a.noBarWhenZero)("animations",a.animations)}}function V2(e,t){if(1&e){var n=ps();nr(),ls(0,"g",4),ys("dimensionsChanged",(function(e){Mn(n);var r=t.index;return ws(2).dataLabelHeightChanged.emit({size:e,index:r})})),cs()}if(2&e){var r=t.$implicit,a=ws(2);ss("barX",r.x)("barY",r.y)("barWidth",r.width)("barHeight",r.height)("value",r.total)("valueFormatting",a.dataLabelFormatting)("orientation","vertical")}}function U2(e,t){if(1&e&&(nr(),ls(0,"g"),ns(1,V2,1,7,"g",3),cs()),2&e){var n=ws();Ka(1),ss("ngForOf",n.barsForDataLabels)("ngForTrackBy",n.trackDataLabelBy)}}var j2=["ngx-charts-bar-label",""],H2=["ngx-charts-line",""];function G2(e,t){if(1&e){var n=ps();nr(),ls(0,"g",7),ys("dimensionsChanged",(function(e){return Mn(n),ws().updateXAxisHeight(e)})),cs()}if(2&e){var r=ws();ss("xScale",r.xScale)("dims",r.dims)("showGridLines",r.showGridLines)("showLabel",r.showXAxisLabel)("labelText",r.xAxisLabel)("trimTicks",r.trimXAxisTicks)("rotateTicks",r.rotateXAxisTicks)("maxTickLength",r.maxXAxisTickLength)("tickFormatting",r.xAxisTickFormatting)("ticks",r.xAxisTicks)}}function J2(e,t){if(1&e){var n=ps();nr(),ls(0,"g",8),ys("dimensionsChanged",(function(e){return Mn(n),ws().updateYAxisWidth(e)})),cs()}if(2&e){var r=ws();ss("yScale",r.yScale)("dims",r.dims)("showGridLines",r.showGridLines)("showLabel",r.showYAxisLabel)("labelText",r.yAxisLabel)("trimTicks",r.trimYAxisTicks)("maxTickLength",r.maxYAxisTickLength)("tickFormatting",r.yAxisTickFormatting)("ticks",r.yAxisTicks)("referenceLines",r.referenceLines)("showRefLines",r.showRefLines)("showRefLabels",r.showRefLabels)}}function X2(e,t){if(1&e&&(nr(),ls(0,"g"),hs(1,"g",9),cs()),2&e){var n=t.$implicit,r=ws();ss("@animationState","active"),Ka(1),ss("xScale",r.xScale)("yScale",r.yScale)("colors",r.colors)("data",n)("activeEntries",r.activeEntries)("scaleType",r.scaleType)("curve",r.curve)("rangeFillOpacity",r.rangeFillOpacity)("hasRange",r.hasRange)("animations",r.animations)}}function K2(e,t){if(1&e){var n=ps();nr(),ls(0,"g"),ls(1,"g",13),ys("select",(function(e){return Mn(n),ws(2).onClick(e)}))("activate",(function(e){return Mn(n),ws(2).onActivate(e)}))("deactivate",(function(e){return Mn(n),ws(2).onDeactivate(e)})),cs(),cs()}if(2&e){var r=t.$implicit,a=ws(2);Ka(1),ss("xScale",a.xScale)("yScale",a.yScale)("colors",a.colors)("data",r)("scaleType",a.scaleType)("visibleValue",a.hoveredVertical)("activeEntries",a.activeEntries)("tooltipDisabled",a.tooltipDisabled)("tooltipTemplate",a.tooltipTemplate)}}function Z2(e,t){if(1&e){var n=ps();nr(),ls(0,"g",10),ys("mouseleave",(function(){return Mn(n),ws().hideCircles()})),ls(1,"g",11),ys("hover",(function(e){return Mn(n),ws().updateHoveredVertical(e)})),cs(),ns(2,K2,2,9,"g",12),cs()}if(2&e){var r=ws();Ka(1),ss("dims",r.dims)("xSet",r.xSet)("xScale",r.xScale)("yScale",r.yScale)("results",r.results)("colors",r.colors)("tooltipDisabled",r.tooltipDisabled)("tooltipTemplate",r.seriesTooltipTemplate),Ka(1),ss("ngForOf",r.results)}}function Y2(e,t){if(1&e&&(nr(),ls(0,"g"),hs(1,"g",15),cs()),2&e){var n=t.$implicit,r=ws(2);Ka(1),ss("xScale",r.timelineXScale)("yScale",r.timelineYScale)("colors",r.colors)("data",n)("scaleType",r.scaleType)("curve",r.curve)("hasRange",r.hasRange)("animations",r.animations)}}function Q2(e,t){if(1&e){var n=ps();nr(),ls(0,"g",14),ys("onDomainChange",(function(e){return Mn(n),ws().updateDomain(e)})),ns(1,Y2,2,8,"g",4),cs()}if(2&e){var r=ws();ss("results",r.results)("view",cl(10,P2,r.timelineWidth,r.height))("height",r.timelineHeight)("scheme",r.scheme)("customColors",r.customColors)("scaleType",r.scaleType)("legend",r.legend),es("transform",r.timelineTransform),Ka(1),ss("ngForOf",r.results)("ngForTrackBy",r.trackBy)}}var $2=["ngx-charts-line-series",""];function e3(e,t){if(1&e&&(nr(),hs(0,"g",4)),2&e){var n=ws();ss("name",n.gradientId)("stops",n.gradientStops)}}function t3(e,t){if(1&e&&(nr(),hs(0,"g",5)),2&e){var n=ws();Ns("active",n.isActive(n.data))("inactive",n.isInactive(n.data)),ss("data",n.data)("path",n.outerPath)("fill",n.hasGradient?n.gradientUrl:n.colors.getColor(n.data.name))("opacity",n.rangeFillOpacity)("animations",n.animations)}}var n3=["ngx-charts-pie-label",""],r3=["ngx-charts-pie-arc",""];function a3(e,t){if(1&e&&(nr(),ls(0,"defs"),hs(1,"g",3),cs()),2&e){var n=ws();Ka(1),ss("color",n.fill)("name",n.radialGradientId)("startOpacity",n.startOpacity)}}var i3,o3=["ngx-charts-pie-series",""];function s3(e,t){if(1&e&&(nr(),hs(0,"g",3)),2&e){var n=ws().$implicit,r=ws();ss("data",n)("radius",r.outerRadius)("color",r.color(n))("label",r.labelText(n))("labelTrim",r.trimLabels)("labelTrimSize",r.maxLabelLength)("max",r.max)("value",n.value)("explodeSlices",r.explodeSlices)("animations",r.animations)}}function u3(e,t){if(1&e){var n=ps();nr(),ls(0,"g"),ns(1,s3,1,10,"g",1),ls(2,"g",2),ys("select",(function(e){return Mn(n),ws().onClick(e)}))("activate",(function(e){return Mn(n),ws().activate.emit(e)}))("deactivate",(function(e){return Mn(n),ws().deactivate.emit(e)}))("dblclick",(function(e){return Mn(n),ws().dblclick.emit(e)})),cs(),cs()}if(2&e){var r=t.$implicit,a=ws();Ka(1),ss("ngIf",a.labelVisible(r)),Ka(1),ss("startAngle",r.startAngle)("endAngle",r.endAngle)("innerRadius",a.innerRadius)("outerRadius",a.outerRadius)("fill",a.color(r))("value",r.data.value)("gradient",a.gradient)("data",r.data)("max",a.max)("explodeSlices",a.explodeSlices)("isActive",a.isActive(r.data))("animate",a.animations)("tooltipDisabled",a.tooltipDisabled)("tooltipPlacement","top")("tooltipType","tooltip")("tooltipTitle",a.getTooltipTitle(r))("tooltipTemplate",a.tooltipTemplate)("tooltipContext",r.data)}}var l3,c3=((l3=i3=function(){function e(t,n,r){_classCallCheck(this,e),this.applicationRef=t,this.componentFactoryResolver=n,this.injector=r}return _createClass(e,[{key:"getRootViewContainer",value:function(){if(this._container)return this._container;if(i3.globalRootViewContainer)return i3.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}},{key:"setRootViewContainer",value:function(e){this._container=e}},{key:"getComponentRootNode",value:function(e){return e.element?e.element.nativeElement:e.hostView&&e.hostView.rootNodes.length>0?e.hostView.rootNodes[0]:e.location.nativeElement}},{key:"getRootViewContainerNode",value:function(e){return this.getComponentRootNode(e)}},{key:"projectComponentBindings",value:function(e,t){if(t){if(void 0!==t.inputs){var n,r=_createForOfIteratorHelper(Object.getOwnPropertyNames(t.inputs));try{for(r.s();!(n=r.n()).done;){var a=n.value;e.instance[a]=t.inputs[a]}}catch(s7){r.e(s7)}finally{r.f()}}if(void 0!==t.outputs){var i,o=_createForOfIteratorHelper(Object.getOwnPropertyNames(t.outputs));try{for(o.s();!(i=o.n()).done;){var s=i.value;e.instance[s]=t.outputs[s]}}catch(s7){o.e(s7)}finally{o.f()}}}return e}},{key:"appendComponent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;n||(n=this.getRootViewContainer());var r=this.getComponentRootNode(n),a=new kH(r,this.componentFactoryResolver,this.applicationRef,this.injector),i=new gH(e),o=a.attach(i);return this.projectComponentBindings(o,t),o}}],[{key:"setGlobalRootViewContainer",value:function(e){i3.globalRootViewContainer=e}}]),e}()).\u0275fac=function(e){return new(e||l3)(Ot(kc),Ot(_u),Ot(Wo))},l3.\u0275prov=Xe({token:l3,factory:l3.\u0275fac}),l3.globalRootViewContainer=null,l3);function h3(e,t,n){var r,a,i;n=n||{};var o=null,s=0;function u(){s=!1===n.leading?0:+new Date,o=null,i=e.apply(r,a)}return function(){var l=+new Date;s||!1!==n.leading||(s=l);var c=t-(l-s);return r=this,a=arguments,c<=0?(clearTimeout(o),o=null,s=l,i=e.apply(r,a)):o||!1===n.trailing||(o=setTimeout(u,c)),i}}var f3=function(e){return e[e.top="top"]="top",e[e.bottom="bottom"]="bottom",e[e.left="left"]="left",e[e.right="right"]="right",e}({});function d3(e,t,n){return"top"===n?e.top-7:"bottom"===n?e.top+e.height-t.height+7:"center"===n?e.top+e.height/2-t.height/2:void 0}function p3(e,t,n){return"left"===n?e.left-7:"right"===n?e.left+e.width-t.width+7:"center"===n?e.left+e.width/2-t.width/2:void 0}var m3,v3,y3,g3,_3,b3,x3=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"calculateVerticalAlignment",value:function(e,t,n){var r=d3(e,t,n);return r+t.height>window.innerHeight&&(r=window.innerHeight-t.height),r}},{key:"calculateVerticalCaret",value:function(e,t,n,r){var a;"top"===r&&(a=e.height/2-n.height/2+7),"bottom"===r&&(a=t.height-e.height/2-n.height/2-7),"center"===r&&(a=t.height/2-n.height/2);var i=d3(e,t,r);return i+t.height>window.innerHeight&&(a+=i+t.height-window.innerHeight),a}},{key:"calculateHorizontalAlignment",value:function(e,t,n){var r=p3(e,t,n);return r+t.width>window.innerWidth&&(r=window.innerWidth-t.width),r}},{key:"calculateHorizontalCaret",value:function(e,t,n,r){var a;"left"===r&&(a=e.width/2-n.width/2+7),"right"===r&&(a=t.width-e.width/2-n.width/2-7),"center"===r&&(a=t.width/2-n.width/2);var i=p3(e,t,r);return i+t.width>window.innerWidth&&(a+=i+t.width-window.innerWidth),a}},{key:"shouldFlip",value:function(e,t,n,r){var a=!1;return"right"===n&&e.left+e.width+t.width+r>window.innerWidth&&(a=!0),"left"===n&&e.left-t.width-r<0&&(a=!0),"top"===n&&e.top-t.height-r<0&&(a=!0),"bottom"===n&&e.top+e.height+t.height+r>window.innerHeight&&(a=!0),a}},{key:"positionCaret",value:function(t,n,r,a,i){var o=0,s=0;return t===f3.right?(s=-7,o=e.calculateVerticalCaret(r,n,a,i)):t===f3.left?(s=n.width,o=e.calculateVerticalCaret(r,n,a,i)):t===f3.top?(o=n.height,s=e.calculateHorizontalCaret(r,n,a,i)):t===f3.bottom&&(o=-7,s=e.calculateHorizontalCaret(r,n,a,i)),{top:o,left:s}}},{key:"positionContent",value:function(t,n,r,a,i){var o=0,s=0;return t===f3.right?(s=r.left+r.width+a,o=e.calculateVerticalAlignment(r,n,i)):t===f3.left?(s=r.left-n.width-a,o=e.calculateVerticalAlignment(r,n,i)):t===f3.top?(o=r.top-n.height-a,s=e.calculateHorizontalAlignment(r,n,i)):t===f3.bottom&&(o=r.top+r.height+a,s=e.calculateHorizontalAlignment(r,n,i)),{top:o,left:s}}},{key:"determinePlacement",value:function(t,n,r,a){if(e.shouldFlip(r,n,t,a)){if(t===f3.right)return f3.left;if(t===f3.left)return f3.right;if(t===f3.top)return f3.bottom;if(t===f3.bottom)return f3.top}return t}}]),e}(),w3=((b3=function(){function e(t,n){_classCallCheck(this,e),this.element=t,this.renderer=n}return _createClass(e,[{key:"ngAfterViewInit",value:function(){setTimeout(this.position.bind(this))}},{key:"position",value:function(){var e=this,t=this.element.nativeElement,n=this.host.nativeElement.getBoundingClientRect();if(n.height||n.width){var r=t.getBoundingClientRect();this.checkFlip(n,r),this.positionContent(t,n,r),this.showCaret&&this.positionCaret(n,r),setTimeout((function(){return e.renderer.addClass(t,"animate")}),1)}}},{key:"positionContent",value:function(e,t,n){var r=x3.positionContent(this.placement,n,t,this.spacing,this.alignment),a=r.top,i=r.left;this.renderer.setStyle(e,"top","".concat(a,"px")),this.renderer.setStyle(e,"left","".concat(i,"px"))}},{key:"positionCaret",value:function(e,t){var n=this.caretElm.nativeElement,r=n.getBoundingClientRect(),a=x3.positionCaret(this.placement,t,e,r,this.alignment),i=a.top,o=a.left;this.renderer.setStyle(n,"top","".concat(i,"px")),this.renderer.setStyle(n,"left","".concat(o,"px"))}},{key:"checkFlip",value:function(e,t){this.placement=x3.determinePlacement(this.placement,t,e,this.spacing)}},{key:"onWindowResize",value:function(){this.position()}},{key:"cssClasses",get:function(){var e="ngx-charts-tooltip-content";return e+=" position-".concat(this.placement),e+=" type-".concat(this.type),e+=" ".concat(this.cssClass)}}]),e}()).\u0275fac=function(e){return new(e||b3)(as(bu),as(Cu))},b3.\u0275cmp=Yt({type:b3,selectors:[["ngx-tooltip-content"]],viewQuery:function(e,t){var n;1&e&&Sl(B1,!0),2&e&&kl(n=El())&&(t.caretElm=n.first)},hostVars:2,hostBindings:function(e,t){1&e&&ys("resize",(function(){return t.onWindowResize()}),!1,kr),2&e&&Ls(Ut,Ps,t.cssClasses,!0)},inputs:{placement:"placement",host:"host",showCaret:"showCaret",type:"type",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},decls:6,vars:6,consts:[[3,"hidden"],["caretElm",""],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(e,t){1&e&&(ls(0,"div"),hs(1,"span",0,1),ls(3,"div",2),ns(4,V1,2,4,"span",3),ns(5,U1,1,1,"span",4),cs(),cs()),2&e&&(Ka(1),Zs("tooltip-caret position-",t.placement,""),ss("hidden",!t.showCaret),Ka(3),ss("ngIf",!t.title),Ka(1),ss("ngIf",t.title))},directives:[yh,Fh],styles:[".ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 2px 1px -1px rgba(0,0,0,.12);font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:rgba(0,0,0,.75);font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate3d(10px,0,0)}.ngx-charts-tooltip-content.position-left{transform:translate3d(-10px,0,0)}.ngx-charts-tooltip-content.position-top{transform:translate3d(0,-10px,0)}.ngx-charts-tooltip-content.position-bottom{transform:translate3d(0,10px,0)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translate3d(0,0,0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}"],encapsulation:2}),function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);i>3&&o&&Object.defineProperty(t,n,o)}([function(e,t,n){return{configurable:!0,enumerable:n.enumerable,get:function(){return Object.defineProperty(this,t,{configurable:!0,enumerable:n.enumerable,value:h3(n.value,100,void 0)}),this[t]}}}],b3.prototype,"onWindowResize",null),b3),k3=((_3=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).type=w3,r}return n}(function(){function e(t){_classCallCheck(this,e),this.injectionService=t,this.defaults={},this.components=new Map}return _createClass(e,[{key:"getByType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.type;return this.components.get(e)}},{key:"create",value:function(e){return this.createByType(this.type,e)}},{key:"createByType",value:function(e,t){t=this.assignDefaults(t);var n=this.injectComponent(e,t);return this.register(e,n),n}},{key:"destroy",value:function(e){var t=this.components.get(e.componentType);if(t&&t.length){var n=t.indexOf(e);n>-1&&(t[n].destroy(),t.splice(n,1))}}},{key:"destroyAll",value:function(){this.destroyByType(this.type)}},{key:"destroyByType",value:function(e){var t=this.components.get(e);if(t&&t.length)for(var n=t.length-1;n>=0;)this.destroy(t[n--])}},{key:"injectComponent",value:function(e,t){return this.injectionService.appendComponent(e,t)}},{key:"assignDefaults",value:function(e){var t=Object.assign({},this.defaults.inputs),n=Object.assign({},this.defaults.outputs);return e.inputs||e.outputs||(e={inputs:e}),t&&(e.inputs=Object.assign(Object.assign({},t),e.inputs)),n&&(e.outputs=Object.assign(Object.assign({},n),e.outputs)),e}},{key:"register",value:function(e,t){this.components.has(e)||this.components.set(e,[]),this.components.get(e).push(t)}}]),e}())).\u0275fac=function(e){return new(e||_3)(Ot(c3))},_3.\u0275prov=Xe({token:_3,factory:_3.\u0275fac}),_3),C3=((g3=function(){function e(){_classCallCheck(this,e),this.showLegend=!1,this.animations=!0,this.legendLabelClick=new fl,this.legendLabelActivate=new fl,this.legendLabelDeactivate=new fl}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"update",value:function(){var e=0;this.showLegend&&(this.legendType=this.getLegendType(),this.legendOptions&&"right"!==this.legendOptions.position||(e="scaleLegend"===this.legendType?1:2)),this.chartWidth=Math.floor(this.view[0]*(12-e)/12),this.legendWidth=this.legendOptions&&"right"!==this.legendOptions.position?this.chartWidth:Math.floor(this.view[0]*e/12)}},{key:"getLegendType",value:function(){return"linear"===this.legendOptions.scaleType?"scaleLegend":"legend"}}]),e}()).\u0275fac=function(e){return new(e||g3)},g3.\u0275cmp=Yt({type:g3,selectors:[["ngx-charts-chart"]],inputs:{showLegend:"showLegend",animations:"animations",legendType:"legendType",view:"view",legendOptions:"legendOptions",data:"data",legendData:"legendData",colors:"colors",activeEntries:"activeEntries"},outputs:{legendLabelClick:"legendLabelClick",legendLabelActivate:"legendLabelActivate",legendLabelDeactivate:"legendLabelDeactivate"},features:[vu([k3]),ou],ngContentSelectors:G1,decls:5,vars:8,consts:[[1,"ngx-charts-outer"],[1,"ngx-charts"],["class","chart-legend",3,"horizontal","valueRange","colors","height","width",4,"ngIf"],["class","chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate",4,"ngIf"],[1,"chart-legend",3,"horizontal","valueRange","colors","height","width"],[1,"chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate"]],template:function(e,t){1&e&&(Cs(),ls(0,"div",0),nr(),ls(1,"svg",1),Ss(2),cs(),ns(3,j1,1,5,"ngx-charts-scale-legend",2),ns(4,H1,1,7,"ngx-charts-legend",3),cs()),2&e&&(Ms("width",t.view[0],"px"),ss("@animationState","active")("@.disabled",!t.animations),Ka(1),es("width",t.chartWidth)("height",t.view[1]),Ka(2),ss("ngIf",t.showLegend&&"scaleLegend"===t.legendType),Ka(1),ss("ngIf",t.showLegend&&"legend"===t.legendType))},directives:function(){return[yh,x4,_4]},encapsulation:2,data:{animation:[dz("animationState",[gz(":enter",[vz({opacity:0}),pz("500ms 100ms",vz({opacity:1}))])])]},changeDetection:0}),g3),S3=((y3=function(){function e(t,n){_classCallCheck(this,e),this.element=t,this.zone=n,this.visible=new fl,this.isVisible=!1,this.runCheck()}return _createClass(e,[{key:"destroy",value:function(){clearTimeout(this.timeout)}},{key:"onVisibilityChange",value:function(){var e=this;this.zone.run((function(){e.isVisible=!0,e.visible.emit(!0)}))}},{key:"runCheck",value:function(){var e=this;this.zone.runOutsideAngular((function(){e.timeout=setTimeout((function(){return function t(){if(e.element){var n=e.element.nativeElement,r=n.offsetHeight,a=n.offsetWidth;r&&a?(clearTimeout(e.timeout),e.onVisibilityChange()):(clearTimeout(e.timeout),e.zone.runOutsideAngular((function(){e.timeout=setTimeout((function(){return t()}),100)})))}}()}))}))}}]),e}()).\u0275fac=function(e){return new(e||y3)(as(bu),as(rc))},y3.\u0275dir=rn({type:y3,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),y3),I3=((v3=function(){function e(t,n,r){_classCallCheck(this,e),this.chartElement=t,this.zone=n,this.cd=r,this.scheme="cool",this.schemeType="ordinal",this.animations=!0,this.select=new fl}return _createClass(e,[{key:"ngAfterViewInit",value:function(){this.bindWindowResizeEvent(),this.visibilityObserver=new S3(this.chartElement,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this))}},{key:"ngOnDestroy",value:function(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy())}},{key:"ngOnChanges",value:function(e){this.update()}},{key:"update",value:function(){if(this.results=this.results?this.cloneData(this.results):[],this.view)this.width=this.view[0],this.height=this.view[1];else{var e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}},{key:"getContainerDims",value:function(){var e,t,n=this.chartElement.nativeElement;if(null!==n.parentNode){var r=n.parentNode.getBoundingClientRect();e=r.width,t=r.height}return e&&t?{width:e,height:t}:null}},{key:"formatDates",value:function(){for(var e=0;e<this.results.length;e++){var t=this.results[e];if(t.label=t.name,t.label instanceof Date&&(t.label=t.label.toLocaleDateString()),t.series)for(var n=0;n<t.series.length;n++){var r=t.series[n];r.label=r.name,r.label instanceof Date&&(r.label=r.label.toLocaleDateString())}}}},{key:"unbindEvents",value:function(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}},{key:"bindWindowResizeEvent",value:function(){var e=this,t=JF(window,"resize").pipe(DL(200)).subscribe((function(t){e.update(),e.cd&&e.cd.markForCheck()}));this.resizeSubscription=t}},{key:"cloneData",value:function(e){var t,n=[],r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,i={name:a.name};if(void 0!==a.value&&(i.value=a.value),void 0!==a.series){i.series=[];var o,s=_createForOfIteratorHelper(a.series);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=Object.assign({},u);i.series.push(l)}}catch(s7){s.e(s7)}finally{s.f()}}void 0!==a.extra&&(i.extra=JSON.parse(JSON.stringify(a.extra))),n.push(i)}}catch(s7){r.e(s7)}finally{r.f()}return n}}]),e}()).\u0275fac=function(e){return new(e||v3)(as(bu),as(rc),as(Co))},v3.\u0275cmp=Yt({type:v3,selectors:[["base-chart"]],inputs:{scheme:"scheme",schemeType:"schemeType",animations:"animations",results:"results",view:"view",customColors:"customColors"},outputs:{select:"select"},features:[ou],decls:1,vars:0,template:function(e,t){1&e&&hs(0,"div")},encapsulation:2}),v3),D3=((m3=function(){function e(t){_classCallCheck(this,e),this.textHeight=25,this.margin=5,this.element=t.nativeElement}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"update",value:function(){switch(this.strokeWidth="0.01",this.textAnchor="middle",this.transform="",this.orient){case"top":case"bottom":this.y=this.offset,this.x=this.width/2;break;case"left":this.y=-(this.offset+this.textHeight+this.margin),this.x=-this.height/2,this.transform="rotate(270)";break;case"right":this.y=this.offset+this.margin,this.x=-this.height/2,this.transform="rotate(270)"}}}]),e}()).\u0275fac=function(e){return new(e||m3)(as(bu))},m3.\u0275cmp=Yt({type:m3,selectors:[["g","ngx-charts-axis-label",""]],inputs:{orient:"orient",label:"label",offset:"offset",width:"width",height:"height"},features:[ou],attrs:J1,decls:2,vars:6,template:function(e,t){1&e&&(nr(),ls(0,"text"),Gs(1),cs()),2&e&&(es("stroke-width",t.strokeWidth)("x",t.x)("y",t.y)("text-anchor",t.textAnchor)("transform",t.transform),Ka(1),Xs(" ",t.label," "))},encapsulation:2,changeDetection:0}),m3);function A3(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return"string"!=typeof e?"number"==typeof e?e+"":"":(e=e.trim()).length<=t?e:"".concat(e.slice(0,t),"...")}function T3(e,t){if(e.length>t){for(var n=[],r=Math.floor(e.length/t),a=0;a<e.length;a++)a%r==0&&n.push(e[a]);e=n}return e}var E3,R3,O3=((R3=function(){function e(){_classCallCheck(this,e),this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.rotateTicks=!0,this.dimensionsChanged=new fl,this.verticalSpacing=20,this.rotateLabels=!1,this.innerTickSize=6,this.outerTickSize=6,this.tickPadding=3,this.textAnchor="middle",this.maxTicksLength=0,this.maxAllowedLength=16,this.height=0}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout((function(){return e.updateDims()}))}},{key:"updateDims",value:function(){var e=this,t=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().height,10);t!==this.height&&(this.height=t,this.dimensionsChanged.emit({height:t}),setTimeout((function(){return e.updateDims()})))}},{key:"update",value:function(){var e=this,t=this.scale;this.ticks=this.getTicks(),this.tickFormat=this.tickFormatting?this.tickFormatting:t.tickFormat?t.tickFormat.apply(t,this.tickArguments):function(e){return"Date"===e.constructor.name?e.toLocaleDateString():e.toLocaleString()};var n=this.rotateTicks?this.getRotationAngle(this.ticks):null;this.adjustedScale=this.scale.bandwidth?function(e){return this.scale(e)+.5*this.scale.bandwidth()}:this.scale,this.textTransform="",n&&0!==n?(this.textTransform="rotate(".concat(n,")"),this.textAnchor="end",this.verticalSpacing=10):this.textAnchor="middle",setTimeout((function(){return e.updateDims()}))}},{key:"getRotationAngle",value:function(e){var t=0;this.maxTicksLength=0;for(var n=0;n<e.length;n++){var r=this.tickFormat(e[n]).toString(),a=r.length;this.trimTicks&&(a=this.tickTrim(r).length),a>this.maxTicksLength&&(this.maxTicksLength=a)}for(var i=8*Math.min(this.maxTicksLength,this.maxAllowedLength),o=i,s=Math.floor(this.width/e.length);o>s&&t>-90;)t-=30,o=Math.cos(t*(Math.PI/180))*i;return t}},{key:"getTicks",value:function(){var e=this.getMaxTicks(20),t=this.getMaxTicks(100);return this.tickValues?this.tickValues:this.scale.ticks?this.scale.ticks.apply(this.scale,[t]):T3(this.scale.domain(),e)}},{key:"getMaxTicks",value:function(e){return Math.floor(this.width/e)}},{key:"tickTransform",value:function(e){return"translate("+this.adjustedScale(e)+","+this.verticalSpacing+")"}},{key:"gridLineTransform",value:function(){return"translate(0,".concat(-this.verticalSpacing-5,")")}},{key:"tickTrim",value:function(e){return this.trimTicks?A3(e,this.maxTickLength):e}}]),e}()).\u0275fac=function(e){return new(e||R3)},R3.\u0275cmp=Yt({type:R3,selectors:[["g","ngx-charts-x-axis-ticks",""]],viewQuery:function(e,t){var n;1&e&&Sl(X1,!0),2&e&&kl(n=El())&&(t.ticksElement=n.first)},inputs:{tickArguments:"tickArguments",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",showGridLines:"showGridLines",rotateTicks:"rotateTicks",scale:"scale",orient:"orient",tickValues:"tickValues",tickFormatting:"tickFormatting",gridLineHeight:"gridLineHeight",width:"width"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[ou],attrs:K1,decls:4,vars:2,consts:[["ticksel",""],["class","tick",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"tick"],["stroke-width","0.01"],[4,"ngIf"],["y2","0",1,"gridline-path","gridline-path-vertical"]],template:function(e,t){1&e&&(nr(),ls(0,"g",null,0),ns(2,Z1,5,7,"g",1),cs(),ns(3,Q1,2,2,"g",2)),2&e&&(Ka(2),ss("ngForOf",t.ticks),Ka(1),ss("ngForOf",t.ticks))},directives:[mh,yh],encapsulation:2,changeDetection:0}),R3),M3=((E3=function(){function e(){_classCallCheck(this,e),this.rotateTicks=!0,this.showGridLines=!1,this.xOrient="bottom",this.xAxisOffset=0,this.dimensionsChanged=new fl,this.xAxisClassName="x axis",this.labelOffset=0,this.fill="none",this.stroke="stroke",this.tickStroke="#ccc",this.strokeWidth="none",this.padding=5}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"update",value:function(){this.transform="translate(0,".concat(this.xAxisOffset+this.padding+this.dims.height,")"),void 0!==this.xAxisTickCount&&(this.tickArguments=[this.xAxisTickCount])}},{key:"emitTicksHeight",value:function(e){var t=this,n=e.height,r=n+25+5;r!==this.labelOffset&&(this.labelOffset=r,setTimeout((function(){t.dimensionsChanged.emit({height:n})}),0))}}]),e}()).\u0275fac=function(e){return new(e||E3)},E3.\u0275cmp=Yt({type:E3,selectors:[["g","ngx-charts-x-axis",""]],viewQuery:function(e,t){var n;1&e&&Sl(O3,!0),2&e&&kl(n=El())&&(t.ticksComponent=n.first)},inputs:{rotateTicks:"rotateTicks",showGridLines:"showGridLines",xOrient:"xOrient",xAxisOffset:"xAxisOffset",xScale:"xScale",dims:"dims",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showLabel:"showLabel",labelText:"labelText",ticks:"ticks",xAxisTickInterval:"xAxisTickInterval",xAxisTickCount:"xAxisTickCount"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[ou],attrs:$1,decls:3,vars:4,consts:[["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","dimensionsChanged"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(e,t){1&e&&(nr(),ls(0,"g"),ns(1,e2,1,12,"g",0),ns(2,t2,1,5,"g",1),cs()),2&e&&(es("class",t.xAxisClassName)("transform",t.transform),Ka(1),ss("ngIf",t.xScale),Ka(1),ss("ngIf",t.showLabel))},directives:[yh,O3,D3],encapsulation:2,changeDetection:0}),E3);function N3(e,t,n,r,a,i){var o=_slicedToArray(i,4),s=o[0],u=o[1],l=o[2],c=o[3],h="";return h="M".concat([e+a,t]),h+="h".concat((n=0===(n=Math.floor(n))?1:n)-2*a),h+=u?"a".concat([a,a]," 0 0 1 ").concat([a,a]):"h".concat(a,"v").concat(a),h+="v".concat((r=0===(r=Math.floor(r))?1:r)-2*a),h+=c?"a".concat([a,a]," 0 0 1 ").concat([-a,a]):"v".concat(a,"h").concat(-a),h+="h".concat(2*a-n),h+=l?"a".concat([a,a]," 0 0 1 ").concat([-a,-a]):"h".concat(-a,"v").concat(-a),h+="v".concat(2*a-r),h+=s?"a".concat([a,a]," 0 0 1 ").concat([a,-a]):"v".concat(-a,"h").concat(a),h+="z"}var P3,F3,L3,z3,B3,W3=((L3=function(){function e(){_classCallCheck(this,e),this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.showRefLabels=!1,this.showRefLines=!1,this.dimensionsChanged=new fl,this.innerTickSize=6,this.tickPadding=3,this.verticalSpacing=20,this.textAnchor="middle",this.width=0,this.outerTickSize=6,this.rotateLabels=!1,this.referenceLineLength=0}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout((function(){return e.updateDims()}))}},{key:"updateDims",value:function(){var e=this,t=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().width,10);t!==this.width&&(this.width=t,this.dimensionsChanged.emit({width:t}),setTimeout((function(){return e.updateDims()})))}},{key:"update",value:function(){var e,t=this,n="top"===this.orient||"right"===this.orient?-1:1;switch(this.tickSpacing=Math.max(this.innerTickSize,0)+this.tickPadding,e=this.scale,this.ticks=this.getTicks(),this.tickFormat=this.tickFormatting?this.tickFormatting:e.tickFormat?e.tickFormat.apply(e,this.tickArguments):function(e){return"Date"===e.constructor.name?e.toLocaleDateString():e.toLocaleString()},this.adjustedScale=e.bandwidth?function(t){return e(t)+.5*e.bandwidth()}:e,this.showRefLines&&this.referenceLines&&this.setReferencelines(),this.orient){case"top":case"bottom":this.transform=function(e){return"translate("+this.adjustedScale(e)+",0)"},this.textAnchor="middle",this.y2=this.innerTickSize*n,this.y1=this.tickSpacing*n,this.dy=n<0?"0em":".71em";break;case"left":this.transform=function(e){return"translate(0,"+this.adjustedScale(e)+")"},this.textAnchor="end",this.x2=this.innerTickSize*-n,this.x1=this.tickSpacing*-n,this.dy=".32em";break;case"right":this.transform=function(e){return"translate(0,"+this.adjustedScale(e)+")"},this.textAnchor="start",this.x2=this.innerTickSize*-n,this.x1=this.tickSpacing*-n,this.dy=".32em"}setTimeout((function(){return t.updateDims()}))}},{key:"setReferencelines",value:function(){this.refMin=this.adjustedScale(Math.min.apply(null,this.referenceLines.map((function(e){return e.value})))),this.refMax=this.adjustedScale(Math.max.apply(null,this.referenceLines.map((function(e){return e.value})))),this.referenceLineLength=this.referenceLines.length,this.referenceAreaPath=N3(0,this.refMax,this.gridLineWidth,this.refMin-this.refMax,0,[!1,!1,!1,!1])}},{key:"getTicks",value:function(){var e=this.getMaxTicks(20),t=this.getMaxTicks(50);return this.tickValues?this.tickValues:this.scale.ticks?this.scale.ticks.apply(this.scale,[t]):T3(this.scale.domain(),e)}},{key:"getMaxTicks",value:function(e){return Math.floor(this.height/e)}},{key:"tickTransform",value:function(e){return"translate(".concat(this.adjustedScale(e),",").concat(this.verticalSpacing,")")}},{key:"gridLineTransform",value:function(){return"translate(5,0)"}},{key:"tickTrim",value:function(e){return this.trimTicks?A3(e,this.maxTickLength):e}}]),e}()).\u0275fac=function(e){return new(e||L3)},L3.\u0275cmp=Yt({type:L3,selectors:[["g","ngx-charts-y-axis-ticks",""]],viewQuery:function(e,t){var n;1&e&&Sl(X1,!0),2&e&&kl(n=El())&&(t.ticksElement=n.first)},inputs:{tickArguments:"tickArguments",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",showGridLines:"showGridLines",showRefLabels:"showRefLabels",showRefLines:"showRefLines",scale:"scale",orient:"orient",tickValues:"tickValues",tickFormatting:"tickFormatting",gridLineWidth:"gridLineWidth",height:"height",referenceLines:"referenceLines"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[ou],attrs:n2,decls:6,vars:4,consts:[["ticksel",""],["class","tick",4,"ngFor","ngForOf"],["class","reference-area",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"tick"],["stroke-width","0.01"],[1,"reference-area"],[4,"ngIf"],["class","gridline-path gridline-path-horizontal","x1","0",4,"ngIf"],["x1","0",1,"gridline-path","gridline-path-horizontal"],["x1","0",1,"refline-path","gridline-path-horizontal"],[1,"refline-label"]],template:function(e,t){1&e&&(nr(),ls(0,"g",null,0),ns(2,r2,5,9,"g",1),cs(),ns(3,a2,1,2,"path",2),ns(4,u2,2,2,"g",3),ns(5,h2,2,1,"g",3)),2&e&&(Ka(2),ss("ngForOf",t.ticks),Ka(1),ss("ngIf",t.referenceLineLength>1&&t.refMax&&t.refMin&&t.showRefLines),Ka(1),ss("ngForOf",t.ticks),Ka(1),ss("ngForOf",t.referenceLines))},directives:[mh,yh],encapsulation:2,changeDetection:0}),L3),q3=((F3=function(){function e(){_classCallCheck(this,e),this.showGridLines=!1,this.yOrient="left",this.yAxisOffset=0,this.dimensionsChanged=new fl,this.yAxisClassName="y axis",this.labelOffset=15,this.fill="none",this.stroke="#CCC",this.tickStroke="#CCC",this.strokeWidth=1,this.padding=5}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"update",value:function(){this.offset=-(this.yAxisOffset+this.padding),"right"===this.yOrient?(this.labelOffset=65,this.transform="translate(".concat(this.offset+this.dims.width," , 0)")):(this.offset=this.offset,this.transform="translate(".concat(this.offset," , 0)")),void 0!==this.yAxisTickCount&&(this.tickArguments=[this.yAxisTickCount])}},{key:"emitTicksWidth",value:function(e){var t=this,n=e.width;n!==this.labelOffset&&"right"===this.yOrient?(this.labelOffset=n+this.labelOffset,setTimeout((function(){t.dimensionsChanged.emit({width:n})}),0)):n!==this.labelOffset&&(this.labelOffset=n,setTimeout((function(){t.dimensionsChanged.emit({width:n})}),0))}}]),e}()).\u0275fac=function(e){return new(e||F3)},F3.\u0275cmp=Yt({type:F3,selectors:[["g","ngx-charts-y-axis",""]],viewQuery:function(e,t){var n;1&e&&Sl(W3,!0),2&e&&kl(n=El())&&(t.ticksComponent=n.first)},inputs:{showGridLines:"showGridLines",yOrient:"yOrient",yAxisOffset:"yAxisOffset",yScale:"yScale",dims:"dims",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",ticks:"ticks",showLabel:"showLabel",labelText:"labelText",yAxisTickInterval:"yAxisTickInterval",yAxisTickCount:"yAxisTickCount",referenceLines:"referenceLines",showRefLines:"showRefLines",showRefLabels:"showRefLabels"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[ou],attrs:f2,decls:3,vars:4,consts:[["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","dimensionsChanged"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(e,t){1&e&&(nr(),ls(0,"g"),ns(1,d2,1,14,"g",0),ns(2,p2,1,5,"g",1),cs()),2&e&&(es("class",t.yAxisClassName)("transform",t.transform),Ka(1),ss("ngIf",t.yScale),Ka(1),ss("ngIf",t.showLabel))},directives:[yh,W3,D3],encapsulation:2,changeDetection:0}),F3),V3=((P3=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:P3}),P3.\u0275inj=Ke({factory:function(e){return new(e||P3)},imports:[[Lh]]}),P3),U3=function(e){return e[e.popover="popover"]="popover",e[e.tooltip="tooltip"]="tooltip",e}({}),j3=function(e){return e[e.left="left"]="left",e[e.center="center"]="center",e[e.right="right"]="right",e}({}),H3=function(e){return e[e.all="all"]="all",e[e.focus="focus"]="focus",e[e.mouseover="mouseover"]="mouseover",e}({}),G3=((B3=function(){function e(t,n,r){_classCallCheck(this,e),this.tooltipService=t,this.viewContainerRef=n,this.renderer=r,this.tooltipCssClass="",this.tooltipTitle="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=f3.top,this.tooltipAlignment=j3.center,this.tooltipType=U3.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=H3.all,this.tooltipImmediateExit=!1,this.show=new fl,this.hide=new fl}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.hideTooltip(!0)}},{key:"onFocus",value:function(){this.listensForFocus&&this.showTooltip()}},{key:"onBlur",value:function(){this.listensForFocus&&this.hideTooltip(!0)}},{key:"onMouseEnter",value:function(){this.listensForHover&&this.showTooltip()}},{key:"onMouseLeave",value:function(e){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(e))return;this.hideTooltip(this.tooltipImmediateExit)}}},{key:"onMouseClick",value:function(){this.listensForHover&&this.hideTooltip(!0)}},{key:"showTooltip",value:function(e){var t=this;if(!this.component&&!this.tooltipDisabled){var n=e?0:this.tooltipShowTimeout;clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.tooltipService.destroyAll();var e=t.createBoundOptions();t.component=t.tooltipService.create(e),setTimeout((function(){t.component&&t.addHideListeners(t.component.instance.element.nativeElement)}),10),t.show.emit(!0)}),n)}}},{key:"addHideListeners",value:function(e){var t=this;this.mouseEnterContentEvent=this.renderer.listen(e,"mouseenter",(function(){clearTimeout(t.timeout)})),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(e,"mouseleave",(function(){t.hideTooltip(t.tooltipImmediateExit)}))),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen(document,"click",(function(n){e.contains(n.target)||t.hideTooltip()})))}},{key:"hideTooltip",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.component){var n=function(){e.mouseLeaveContentEvent&&e.mouseLeaveContentEvent(),e.mouseEnterContentEvent&&e.mouseEnterContentEvent(),e.documentClickEvent&&e.documentClickEvent(),e.hide.emit(!0),e.tooltipService.destroy(e.component),e.component=void 0};clearTimeout(this.timeout),t?n():this.timeout=setTimeout(n,this.tooltipHideTimeout)}}},{key:"createBoundOptions",value:function(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}},{key:"listensForFocus",get:function(){return this.tooltipShowEvent===H3.all||this.tooltipShowEvent===H3.focus}},{key:"listensForHover",get:function(){return this.tooltipShowEvent===H3.all||this.tooltipShowEvent===H3.mouseover}}]),e}()).\u0275fac=function(e){return new(e||B3)(as(k3),as(Gu),as(Cu))},B3.\u0275dir=rn({type:B3,selectors:[["","ngx-tooltip",""]],hostBindings:function(e,t){1&e&&ys("focusin",(function(){return t.onFocus()}))("blur",(function(){return t.onBlur()}))("mouseenter",(function(){return t.onMouseEnter()}))("mouseleave",(function(e){return t.onMouseLeave(e.target)}))("click",(function(){return t.onMouseClick()}))},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipShowEvent:"tooltipShowEvent",tooltipImmediateExit:"tooltipImmediateExit",tooltipTemplate:"tooltipTemplate",tooltipContext:"tooltipContext"},outputs:{show:"show",hide:"hide"}}),B3),J3=((z3=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:z3}),z3.\u0275inj=Ke({factory:function(e){return new(e||z3)},providers:[c3,k3],imports:[[Lh]]}),z3);function X3(e){return e instanceof Date?e.toLocaleDateString():e.toLocaleString()}function K3(e){return e.toLocaleString().replace(/[&'`"<>]/g,(function(e){return{"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"}[e]}))}var Z3={};function Y3(){var e=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return e="a".concat(e),Z3[e]?Y3():(Z3[e]=!0,e)}var Q3,$3,e4,t4,n4,r4,a4=((r4=function(){function e(){_classCallCheck(this,e),this.type="standard",this.tooltipDisabled=!1,this.select=new fl,this.activate=new fl,this.deactivate=new fl,this.barVisible=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.gradientId="grad"+Y3().toString(),this.gradientFill="url(#".concat(this.gradientId,")")}},{key:"ngOnChanges",value:function(e){this.update()}},{key:"update",value:function(){this.circle=this.getActiveCircle()}},{key:"getActiveCircle",value:function(){var e=this,t=this.data.series.findIndex((function(t){var n=t.name;return n&&e.visibleValue&&n.toString()===e.visibleValue.toString()&&void 0!==t.value}));if(-1!==t)return this.mapDataPointToCircle(this.data.series[t],t)}},{key:"mapDataPointToCircle",value:function(e,t){var n,r=this.data.name,a=e.value,i=e.name,o=X3(i);n=this.xScale("time"===this.scaleType?i:"linear"===this.scaleType?Number(i):i);var s,u=this.yScale("standard"===this.type?a:e.d1),l=this.yScale.range()[0]-u;return s=this.colors.getColor("linear"===this.colors.scaleType?"standard"===this.type?a:e.d1:r),{classNames:["circle-data-".concat(t)],value:a,label:i,data:Object.assign({},e,{series:r,value:a,name:i}),cx:n,cy:u,radius:5,height:l,tooltipLabel:o,color:s,opacity:1,seriesName:r,gradientStops:this.getGradientStops(s),min:e.min,max:e.max}}},{key:"getTooltipText",value:function(e){var t=e.tooltipLabel,n=e.value,r=e.seriesName,a=e.min,i=e.max;return'\n      <span class="tooltip-label">'.concat(K3(r)," \u2022 ").concat(K3(t),'</span>\n      <span class="tooltip-val">').concat(n.toLocaleString()).concat(this.getTooltipMinMaxText(a,i),"</span>\n    ")}},{key:"getTooltipMinMaxText",value:function(e,t){if(void 0!==e||void 0!==t){var n=" (";return void 0!==e?(void 0===t&&(n+="\u2265"),n+=e.toLocaleString(),void 0!==t&&(n+=" - ")):void 0!==t&&(n+="\u2264"),void 0!==t&&(n+=t.toLocaleString()),n+=")"}return""}},{key:"getGradientStops",value:function(e){return[{offset:0,color:e,opacity:.2},{offset:100,color:e,opacity:1}]}},{key:"onClick",value:function(e){this.select.emit(e)}},{key:"isActive",value:function(e){return!!this.activeEntries&&void 0!==this.activeEntries.find((function(t){return e.name===t.name}))}},{key:"activateCircle",value:function(){this.barVisible=!0,this.activate.emit({name:this.data.name})}},{key:"deactivateCircle",value:function(){this.barVisible=!1,this.circle.opacity=0,this.deactivate.emit({name:this.data.name})}}]),e}()).\u0275fac=function(e){return new(e||r4)},r4.\u0275cmp=Yt({type:r4,selectors:[["g","ngx-charts-circle-series",""]],inputs:{type:"type",tooltipDisabled:"tooltipDisabled",data:"data",xScale:"xScale",yScale:"yScale",colors:"colors",scaleType:"scaleType",visibleValue:"visibleValue",activeEntries:"activeEntries",tooltipTemplate:"tooltipTemplate"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[ou],attrs:m2,decls:1,vars:1,consts:[[4,"ngIf"],["ngx-charts-svg-linear-gradient","","orientation","vertical",3,"name","stops"],["class","tooltip-bar",4,"ngIf"],["ngx-charts-circle","","ngx-tooltip","",1,"circle",3,"cx","cy","r","fill","pointerEvents","data","classNames","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate"],[1,"tooltip-bar"]],template:function(e,t){1&e&&ns(0,g2,5,20,"g",0),2&e&&ss("ngIf",t.circle)},directives:function(){return[yh,o4,i4,G3]},encapsulation:2,data:{animation:[dz("animationState",[gz(":enter",[vz({opacity:0}),pz(250,vz({opacity:1}))])])]},changeDetection:0}),r4),i4=((n4=function(){function e(){_classCallCheck(this,e),this.select=new fl,this.activate=new fl,this.deactivate=new fl}return _createClass(e,[{key:"onClick",value:function(){this.select.emit(this.data)}},{key:"onMouseEnter",value:function(){this.activate.emit(this.data)}},{key:"onMouseLeave",value:function(){this.deactivate.emit(this.data)}},{key:"ngOnChanges",value:function(e){this.classNames=Array.isArray(this.classNames)?this.classNames.join(" "):"",this.classNames+="circle"}}]),e}()).\u0275fac=function(e){return new(e||n4)},n4.\u0275cmp=Yt({type:n4,selectors:[["g","ngx-charts-circle",""]],hostBindings:function(e,t){1&e&&ys("click",(function(){return t.onClick()}))("mouseenter",(function(){return t.onMouseEnter()}))("mouseleave",(function(){return t.onMouseLeave()}))},inputs:{classNames:"classNames",cx:"cx",cy:"cy",r:"r",fill:"fill",stroke:"stroke",data:"data",circleOpacity:"circleOpacity",pointerEvents:"pointerEvents"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[ou],attrs:_2,decls:1,vars:8,template:function(e,t){1&e&&(nr(),hs(0,"circle")),2&e&&es("cx",t.cx)("cy",t.cy)("r",t.r)("fill",t.fill)("stroke",t.stroke)("opacity",t.circleOpacity)("class",t.classNames)("pointer-events",t.pointerEvents)},encapsulation:2,changeDetection:0}),n4),o4=((t4=function(){function e(){_classCallCheck(this,e),this.orientation="vertical"}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.x1="0%",this.x2="0%",this.y1="0%",this.y2="0%","horizontal"===this.orientation?this.x2="100%":"vertical"===this.orientation&&(this.y1="100%")}}]),e}()).\u0275fac=function(e){return new(e||t4)},t4.\u0275cmp=Yt({type:t4,selectors:[["g","ngx-charts-svg-linear-gradient",""]],inputs:{orientation:"orientation",name:"name",stops:"stops"},features:[ou],attrs:b2,decls:2,vars:6,consts:[[3,"id"],[3,"stop-color","stop-opacity",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(nr(),ls(0,"linearGradient",0),ns(1,x2,1,5,"stop",1),cs()),2&e&&(ss("id",t.name),es("x1",t.x1)("y1",t.y1)("x2",t.x2)("y2",t.y2),Ka(1),ss("ngForOf",t.stops))},directives:[mh],encapsulation:2,changeDetection:0}),t4),s4=((e4=function(){function e(){_classCallCheck(this,e),this.endOpacity=1,this.cx=0,this.cy=0}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.r="30%",("color"in e||"startOpacity"in e||"endOpacity"in e)&&(this.stopsDefault=[{offset:0,color:this.color,opacity:this.startOpacity},{offset:100,color:this.color,opacity:this.endOpacity}])}},{key:"stops",get:function(){return this.stopsInput||this.stopsDefault},set:function(e){this.stopsInput=e}}]),e}()).\u0275fac=function(e){return new(e||e4)},e4.\u0275cmp=Yt({type:e4,selectors:[["g","ngx-charts-svg-radial-gradient",""]],inputs:{endOpacity:"endOpacity",cx:"cx",cy:"cy",stops:"stops",color:"color",name:"name",startOpacity:"startOpacity"},features:[ou],attrs:w2,decls:2,vars:5,consts:[["gradientUnits","userSpaceOnUse",3,"id"],[3,"stop-color","stop-opacity",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(nr(),ls(0,"radialGradient",0),ns(1,k2,1,5,"stop",1),cs()),2&e&&(ss("id",t.name),es("cx",t.cx)("cy",t.cy)("r",t.r),Ka(1),ss("ngForOf",t.stops))},directives:[mh],encapsulation:2,changeDetection:0}),e4),u4=(($3=function(){function e(t){_classCallCheck(this,e),this.opacity=1,this.startOpacity=.5,this.endOpacity=1,this.gradient=!1,this.animations=!0,this.select=new fl,this.initialized=!1,this.hasGradient=!1,this.element=t.nativeElement}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.initialized?this.update():(this.loadAnimation(),this.initialized=!0)}},{key:"update",value:function(){this.gradientId="grad"+Y3().toString(),this.gradientFill="url(#".concat(this.gradientId,")"),this.gradient||this.stops?(this.gradientStops=this.getGradient(),this.hasGradient=!0):this.hasGradient=!1,this.updatePathEl()}},{key:"loadAnimation",value:function(){this.areaPath=this.startingPath,setTimeout(this.update.bind(this),100)}},{key:"updatePathEl",value:function(){var e=DK(this.element).select(".area");this.animations?e.transition().duration(750).attr("d",this.path):e.attr("d",this.path)}},{key:"getGradient",value:function(){return this.stops?this.stops:[{offset:0,color:this.fill,opacity:this.startOpacity},{offset:100,color:this.fill,opacity:this.endOpacity}]}}]),e}()).\u0275fac=function(e){return new(e||$3)(as(bu))},$3.\u0275cmp=Yt({type:$3,selectors:[["g","ngx-charts-area",""]],inputs:{opacity:"opacity",startOpacity:"startOpacity",endOpacity:"endOpacity",gradient:"gradient",animations:"animations",data:"data",path:"path",startingPath:"startingPath",fill:"fill",activeLabel:"activeLabel",stops:"stops"},outputs:{select:"select"},features:[ou],attrs:C2,decls:2,vars:5,consts:[[4,"ngIf"],[1,"area"],["ngx-charts-svg-linear-gradient","","orientation","vertical",3,"name","stops"]],template:function(e,t){1&e&&(ns(0,S2,2,2,"defs",0),nr(),hs(1,"path",1)),2&e&&(ss("ngIf",t.gradient),Ka(1),Ms("opacity",t.opacity),es("d",t.areaPath)("fill",t.gradient?t.gradientFill:t.fill))},directives:[yh,o4],encapsulation:2,changeDetection:0}),$3);"undefined"!=typeof window?Q3=window:"undefined"!=typeof global&&(Q3=global);var l4=Q3.MouseEvent;function c4(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("function"==typeof l4)return new l4(e,{bubbles:t,cancelable:n});var r=document.createEvent("MouseEvent");return r.initEvent(e,t,n),r}var h4,f4,d4,p4,m4,v4,y4=((v4=function(){function e(){_classCallCheck(this,e),this.anchorOpacity=0,this.anchorPos=-1,this.anchorValues=[],this.showPercentage=!1,this.tooltipDisabled=!1,this.hover=new fl}return _createClass(e,[{key:"getValues",value:function(e){var t,n=[],r=_createForOfIteratorHelper(this.results);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.series.find((function(t){return t.name.toString()===e.toString()})),o=a.name;if(o instanceof Date&&(o=o.toLocaleDateString()),i){var s=i.name,u=void 0,l=i.value;if(this.showPercentage&&(l=(i.d1-i.d0).toFixed(2)+"%"),"linear"===this.colors.scaleType){var c=l;i.d1&&(c=i.d1),u=this.colors.getColor(c)}else u=this.colors.getColor(a.name);var h=Object.assign({},i,{value:l,name:s,series:o,min:i.min,max:i.max,color:u});n.push(h)}}}catch(s7){r.e(s7)}finally{r.f()}return n}},{key:"mouseMove",value:function(e){var t=e.pageX-e.target.getBoundingClientRect().left,n=this.findClosestPointIndex(t),r=this.xSet[n];if(this.anchorPos=this.xScale(r),this.anchorPos=Math.max(0,this.anchorPos),this.anchorPos=Math.min(this.dims.width,this.anchorPos),this.anchorValues=this.getValues(r),this.anchorPos!==this.lastAnchorPos){var a=c4("mouseleave");this.tooltipAnchor.nativeElement.dispatchEvent(a),this.anchorOpacity=.7,this.hover.emit({value:r}),this.showTooltip(),this.lastAnchorPos=this.anchorPos}}},{key:"findClosestPointIndex",value:function(e){for(var t=0,n=this.xSet.length-1,r=Number.MAX_VALUE,a=0;t<=n;){var i=(t+n)/2|0,o=this.xScale(this.xSet[i]),s=Math.abs(o-e);if(s<r&&(r=s,a=i),o<e)t=i+1;else{if(!(o>e)){r=0,a=i;break}n=i-1}}return a}},{key:"showTooltip",value:function(){var e=c4("mouseenter");this.tooltipAnchor.nativeElement.dispatchEvent(e)}},{key:"hideTooltip",value:function(){var e=c4("mouseleave");this.tooltipAnchor.nativeElement.dispatchEvent(e),this.anchorOpacity=0,this.lastAnchorPos=-1}},{key:"getToolTipText",value:function(e){var t="";return t+=void 0!==e.series?e.series:"???",t+=": ",void 0!==e.value&&(t+=e.value.toLocaleString()),void 0===e.min&&void 0===e.max||(t+=" (",void 0!==e.min?(void 0===e.max&&(t+="\u2265"),t+=e.min.toLocaleString(),void 0!==e.max&&(t+=" - ")):void 0!==e.max&&(t+="\u2264"),void 0!==e.max&&(t+=e.max.toLocaleString()),t+=")"),t}}]),e}()).\u0275fac=function(e){return new(e||v4)},v4.\u0275cmp=Yt({type:v4,selectors:[["g","ngx-charts-tooltip-area",""]],viewQuery:function(e,t){var n;1&e&&Sl(I2,!0),2&e&&kl(n=El())&&(t.tooltipAnchor=n.first)},inputs:{showPercentage:"showPercentage",tooltipDisabled:"tooltipDisabled",dims:"dims",xSet:"xSet",xScale:"xScale",yScale:"yScale",results:"results",colors:"colors",tooltipTemplate:"tooltipTemplate"},outputs:{hover:"hover"},attrs:D2,decls:6,vars:18,consts:[["y","0",1,"tooltip-area",2,"opacity","0","cursor","auto",3,"mousemove","mouseleave"],["defaultTooltipTemplate",""],["y","0","ngx-tooltip","",1,"tooltip-anchor",3,"tooltipDisabled","tooltipPlacement","tooltipType","tooltipSpacing","tooltipTemplate","tooltipContext","tooltipImmediateExit"],["tooltipAnchor",""],[1,"area-tooltip-container"],["class","tooltip-item",4,"ngFor","ngForOf"],[1,"tooltip-item"],[1,"tooltip-item-color"]],template:function(e,t){if(1&e&&(nr(),ls(0,"g"),ls(1,"rect",0),ys("mousemove",(function(e){return t.mouseMove(e)}))("mouseleave",(function(){return t.hideTooltip()})),cs(),ns(2,T2,2,1,"ng-template",null,1,Nl),hs(4,"rect",2,3),cs()),2&e){var n=rs(3);Ka(1),es("x",0)("width",t.dims.width)("height",t.dims.height),Ka(3),Ms("opacity",t.anchorOpacity)("pointer-events","none"),ss("@animationState",0!==t.anchorOpacity?"active":"inactive")("tooltipDisabled",t.tooltipDisabled)("tooltipPlacement","right")("tooltipType","tooltip")("tooltipSpacing",15)("tooltipTemplate",t.tooltipTemplate?t.tooltipTemplate:n)("tooltipContext",t.anchorValues)("tooltipImmediateExit",!0),es("x",t.anchorPos)("width",1)("height",t.dims.height)}},directives:[G3,mh],encapsulation:2,data:{animation:[dz("animationState",[gz("inactive => active",[vz({opacity:0}),pz(250,vz({opacity:.7}))]),gz("active => inactive",[vz({opacity:.7}),pz(250,vz({opacity:0}))])])]},changeDetection:0}),v4),g4=((m4=function(){function e(t,n){_classCallCheck(this,e),this.cd=n,this.height=50,this.select=new fl,this.onDomainChange=new fl,this.initialized=!1,this.element=t.nativeElement}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update(),this.initialized||(this.addBrush(),this.initialized=!0)}},{key:"update",value:function(){this.dims=this.getDims(),this.height=this.dims.height;var e=this.view[1]-this.height;this.xDomain=this.getXDomain(),this.xScale=this.getXScale(),this.brush&&this.updateBrush(),this.transform="translate(0 , ".concat(e,")"),this.filterId="filter"+Y3().toString(),this.filter="url(#".concat(this.filterId,")"),this.cd.markForCheck()}},{key:"getXDomain",value:function(){var e,t=[],n=_createForOfIteratorHelper(this.results);try{for(n.s();!(e=n.n()).done;){var r,a=_createForOfIteratorHelper(e.value.series);try{for(a.s();!(r=a.n()).done;){var i=r.value;t.includes(i.name)||t.push(i.name)}}catch(s7){a.e(s7)}finally{a.f()}}}catch(s7){n.e(s7)}finally{n.f()}var o=[];return"time"===this.scaleType?o=[Math.min.apply(Math,_toConsumableArray(t)),Math.max.apply(Math,_toConsumableArray(t))]:"linear"===this.scaleType?(t=t.map((function(e){return Number(e)})),o=[Math.min.apply(Math,_toConsumableArray(t)),Math.max.apply(Math,_toConsumableArray(t))]):o=t,o}},{key:"getXScale",value:function(){var e;return"time"===this.scaleType?e=_0().range([0,this.dims.width]).domain(this.xDomain):"linear"===this.scaleType?e=P0().range([0,this.dims.width]).domain(this.xDomain):"ordinal"===this.scaleType&&(e=q0().range([0,this.dims.width]).padding(.1).domain(this.xDomain)),e}},{key:"addBrush",value:function(){var e=this;if(!this.brush){var t=this.height,n=this.view[0];this.brush=function(e){var t,n=lQ,r=uQ,a=cQ,i=!0,o=NK("start","brush","end"),s=6;function u(t){var n=t.property("__brush",m).selectAll(".overlay").data([sQ("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",nQ.overlay).merge(n).each((function(){var e=hQ(this).extent;DK(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])})),t.selectAll(".selection").data([sQ("selection")]).enter().append("rect").attr("class","selection").attr("cursor",nQ.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,(function(e){return e.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(e){return"handle handle--"+e.type})).attr("cursor",(function(e){return nQ[e.type]})),t.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(a).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var e=DK(this),t=hQ(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",(function(e){return"e"===e.type[e.type.length-1]?t[1][0]-s/2:t[0][0]-s/2})).attr("y",(function(e){return"s"===e.type[0]?t[1][1]-s/2:t[0][1]-s/2})).attr("width",(function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+s:s})).attr("height",(function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+s:s}))):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(e,t,n){return!n&&e.__brush.emitter||new h(e,t)}function h(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function f(){if((!t||pK.touches)&&r.apply(this,arguments)){var n,a,o,s,u,h,f,d,p,m,v,y=this,g=pK.target.__data__.type,_="selection"===(i&&pK.metaKey?g="overlay":g)?JY:i&&pK.altKey?ZY:KY,b=e===tQ?null:iQ[g],x=e===eQ?null:oQ[g],w=hQ(y),k=w.extent,C=w.selection,S=k[0][0],I=k[0][1],D=k[1][0],A=k[1][1],T=0,E=0,R=b&&x&&i&&pK.shiftKey,O=pK.touches?$Y(pK.changedTouches[0].identifier):RZ,M=O(y),N=M,P=c(y,arguments,!0).beforestart();"overlay"===g?(C&&(p=!0),w.selection=C=[[n=e===tQ?S:M[0],o=e===eQ?I:M[1]],[u=e===tQ?D:n,f=e===eQ?A:o]]):(n=C[0][0],o=C[0][1],u=C[1][0],f=C[1][1]),a=n,s=o,h=u,d=f;var F=DK(y).attr("pointer-events","none"),L=F.selectAll(".overlay").attr("cursor",nQ[g]);if(pK.touches)P.moved=B,P.ended=q;else{var z=DK(pK.view).on("mousemove.brush",B,!0).on("mouseup.brush",q,!0);i&&z.on("keydown.brush",V,!0).on("keyup.brush",U,!0),FK(pK.view)}HY(),aY(y),l.call(y),P.start()}function B(){var e=O(y);!R||m||v||(Math.abs(e[0]-N[0])>Math.abs(e[1]-N[1])?v=!0:m=!0),N=e,p=!0,GY(),W()}function W(){var e;switch(T=N[0]-M[0],E=N[1]-M[1],_){case XY:case JY:b&&(T=Math.max(S-n,Math.min(D-u,T)),a=n+T,h=u+T),x&&(E=Math.max(I-o,Math.min(A-f,E)),s=o+E,d=f+E);break;case KY:b<0?(T=Math.max(S-n,Math.min(D-n,T)),a=n+T,h=u):b>0&&(T=Math.max(S-u,Math.min(D-u,T)),a=n,h=u+T),x<0?(E=Math.max(I-o,Math.min(A-o,E)),s=o+E,d=f):x>0&&(E=Math.max(I-f,Math.min(A-f,E)),s=o,d=f+E);break;case ZY:b&&(a=Math.max(S,Math.min(D,n-T*b)),h=Math.max(S,Math.min(D,u+T*b))),x&&(s=Math.max(I,Math.min(A,o-E*x)),d=Math.max(I,Math.min(A,f+E*x)))}h<a&&(b*=-1,e=n,n=u,u=e,e=a,a=h,h=e,g in rQ&&L.attr("cursor",nQ[g=rQ[g]])),d<s&&(x*=-1,e=o,o=f,f=e,e=s,s=d,d=e,g in aQ&&L.attr("cursor",nQ[g=aQ[g]])),w.selection&&(C=w.selection),m&&(a=C[0][0],h=C[1][0]),v&&(s=C[0][1],d=C[1][1]),C[0][0]===a&&C[0][1]===s&&C[1][0]===h&&C[1][1]===d||(w.selection=[[a,s],[h,d]],l.call(y),P.brush())}function q(){if(HY(),pK.touches){if(pK.touches.length)return;t&&clearTimeout(t),t=setTimeout((function(){t=null}),500)}else LK(pK.view,p),z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),L.attr("cursor",nQ.overlay),w.selection&&(C=w.selection),fQ(C)&&(w.selection=null,l.call(y)),P.end()}function V(){switch(pK.keyCode){case 16:R=b&&x;break;case 18:_===KY&&(b&&(u=h-T*b,n=a+T*b),x&&(f=d-E*x,o=s+E*x),_=ZY,W());break;case 32:_!==KY&&_!==ZY||(b<0?u=h-T:b>0&&(n=a-T),x<0?f=d-E:x>0&&(o=s-E),_=XY,L.attr("cursor",nQ.selection),W());break;default:return}GY()}function U(){switch(pK.keyCode){case 16:R&&(m=v=R=!1,W());break;case 18:_===ZY&&(b<0?u=h:b>0&&(n=a),x<0?f=d:x>0&&(o=s),_=KY,W());break;case 32:_===XY&&(pK.altKey?(b&&(u=h-T*b,n=a+T*b),x&&(f=d-E*x,o=s+E*x),_=ZY):(b<0?u=h:b>0&&(n=a),x<0?f=d:x>0&&(o=s),_=KY),L.attr("cursor",nQ[g]),W());break;default:return}GY()}}function d(){c(this,arguments).moved()}function p(){c(this,arguments).ended()}function m(){var t=this.__brush||{selection:null};return t.extent=QY(n.apply(this,arguments)),t.dim=e,t}return u.move=function(t,n){t.selection?t.on("start.brush",(function(){c(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){c(this,arguments).end()})).tween("brush",(function(){var t=this,r=t.__brush,a=c(t,arguments),i=r.selection,o=e.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=AZ(i,o);function u(e){r.selection=1===e&&null===o?null:s(e),l.call(t),a.brush()}return null!==i&&null!==o?u:u(1)})):t.each((function(){var t=this,r=arguments,a=t.__brush,i=e.input("function"==typeof n?n.apply(t,r):n,a.extent),o=c(t,r).beforestart();aY(t),a.selection=null===i?null:i,l.call(t),o.start().brush().end()}))},u.clear=function(e){u.move(e,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){!function(e,t,n,r){var a=pK;e.sourceEvent=pK,pK=e;try{t.apply(n,r)}finally{pK=a}}(new jY(u,t,e.output(this.state.selection)),o.apply,o,[t,this.that,this.args])}},u.extent=function(e){return arguments.length?(n="function"==typeof e?e:UY(QY(e)),u):n},u.filter=function(e){return arguments.length?(r="function"==typeof e?e:UY(!!e),u):r},u.touchable=function(e){return arguments.length?(a="function"==typeof e?e:UY(!!e),u):a},u.handleSize=function(e){return arguments.length?(s=+e,u):s},u.keyModifiers=function(e){return arguments.length?(i=!!e,u):i},u.on=function(){var e=o.on.apply(o,arguments);return e===o?u:e},u}(eQ).extent([[0,0],[n,t]]).on("brush end",(function(){var t=(pK.selection||e.xScale.range()).map(e.xScale.invert);e.onDomainChange.emit(t),e.cd.markForCheck()})),DK(this.element).select(".brush").call(this.brush)}}},{key:"updateBrush",value:function(){this.brush&&(this.brush.extent([[0,0],[this.view[0],this.height]]),DK(this.element).select(".brush").call(this.brush),DK(this.element).select(".selection").attr("fill",void 0).attr("stroke",void 0).attr("fill-opacity",void 0),this.cd.markForCheck())}},{key:"getDims",value:function(){return{width:this.view[0],height:this.height}}}]),e}()).\u0275fac=function(e){return new(e||m4)(as(bu),as(Co))},m4.\u0275cmp=Yt({type:m4,selectors:[["g","ngx-charts-timeline",""]],inputs:{height:"height",view:"view",state:"state",results:"results",scheme:"scheme",customColors:"customColors",legend:"legend",miniChart:"miniChart",autoScale:"autoScale",scaleType:"scaleType"},outputs:{select:"select",onDomainChange:"onDomainChange"},features:[ou],attrs:E2,ngContentSelectors:G1,decls:7,vars:4,consts:[[1,"timeline"],["in","SourceGraphic","type","matrix","values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"],[1,"embedded-chart"],["x","0","y","0",1,"brush-background"],[1,"brush"]],template:function(e,t){1&e&&(Cs(),nr(),ls(0,"g",0),ls(1,"filter"),hs(2,"feColorMatrix",1),cs(),ls(3,"g",2),Ss(4),cs(),hs(5,"rect",3),hs(6,"g",4),cs()),2&e&&(es("transform",t.transform),Ka(1),es("id",t.filterId),Ka(4),es("width",t.view[0])("height",t.height))},styles:[".timeline .brush-background{fill:rgba(0,0,0,.05)}.timeline .brush .selection{fill:rgba(0,0,0,.1);stroke-width:1px;stroke:#888}.timeline .brush .handle{fill-opacity:0}.timeline .embedded-chart{opacity:.6}"],encapsulation:2,changeDetection:0}),m4),_4=((p4=function(){function e(t){_classCallCheck(this,e),this.cd=t,this.horizontal=!1,this.labelClick=new fl,this.labelActivate=new fl,this.labelDeactivate=new fl,this.legendEntries=[]}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"update",value:function(){this.cd.markForCheck(),this.legendEntries=this.getLegendEntries()}},{key:"getLegendEntries",value:function(){var e,t=this,n=[],r=_createForOfIteratorHelper(this.data);try{var a=function(){var r=e.value,a=X3(r);-1===n.findIndex((function(e){return e.label===a}))&&n.push({label:r,formattedLabel:a,color:t.colors.getColor(r)})};for(r.s();!(e=r.n()).done;)a()}catch(s7){r.e(s7)}finally{r.f()}return n}},{key:"isActive",value:function(e){return!!this.activeEntries&&void 0!==this.activeEntries.find((function(t){return e.label===t.name}))}},{key:"activate",value:function(e){this.labelActivate.emit(e)}},{key:"deactivate",value:function(e){this.labelDeactivate.emit(e)}},{key:"trackBy",value:function(e,t){return t.label}}]),e}()).\u0275fac=function(e){return new(e||p4)(as(Co))},p4.\u0275cmp=Yt({type:p4,selectors:[["ngx-charts-legend"]],inputs:{horizontal:"horizontal",data:"data",title:"title",colors:"colors",height:"height",width:"width",activeEntries:"activeEntries"},outputs:{labelClick:"labelClick",labelActivate:"labelActivate",labelDeactivate:"labelDeactivate"},features:[ou],decls:5,vars:9,consts:[["class","legend-title",4,"ngIf"],[1,"legend-wrap"],[1,"legend-labels"],["class","legend-label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-title"],[1,"legend-title-text"],[1,"legend-label"],[3,"label","formattedLabel","color","isActive","select","activate","deactivate"]],template:function(e,t){1&e&&(ls(0,"div"),ns(1,R2,3,1,"header",0),ls(2,"div",1),ls(3,"ul",2),ns(4,O2,2,4,"li",3),cs(),cs(),cs()),2&e&&(Ms("width",t.width,"px"),Ka(1),ss("ngIf",(null==t.title?null:t.title.length)>0),Ka(2),Ms("max-height",t.height-45,"px"),Ns("horizontal-legend",t.horizontal),Ka(1),ss("ngForOf",t.legendEntries)("ngForTrackBy",t.trackBy))},directives:function(){return[yh,mh,b4]},styles:[".chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .legend-title{white-space:nowrap;overflow:hidden;margin-left:10px;margin-bottom:5px;font-size:14px;font-weight:700}.chart-legend li,.chart-legend ul{padding:0;margin:0;list-style:none}.chart-legend .horizontal-legend li{display:inline-block}.chart-legend .legend-wrap{width:calc(100% - 10px)}.chart-legend .legend-labels{line-height:85%;list-style:none;text-align:left;float:left;width:100%;border-radius:3px;overflow-y:auto;overflow-x:hidden;white-space:nowrap;background:rgba(0,0,0,.05)}.chart-legend .legend-label{cursor:pointer;font-size:90%;margin:8px;color:#afb7c8}.chart-legend .legend-label:hover{color:#000;transition:.2s}.chart-legend .legend-label .active .legend-label-text{color:#000}.chart-legend .legend-label-color{display:inline-block;height:15px;width:15px;margin-right:5px;color:#5b646b;border-radius:3px}.chart-legend .legend-label-text{display:inline-block;vertical-align:top;line-height:15px;font-size:12px;width:calc(100% - 20px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .legend-title-text{vertical-align:bottom;display:inline-block;line-height:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),p4),b4=((d4=function(){function e(){_classCallCheck(this,e),this.isActive=!1,this.select=new fl,this.activate=new fl,this.deactivate=new fl,this.toggle=new fl}return _createClass(e,[{key:"onMouseEnter",value:function(){this.activate.emit({name:this.label})}},{key:"onMouseLeave",value:function(){this.deactivate.emit({name:this.label})}},{key:"trimmedLabel",get:function(){return this.formattedLabel||"(empty)"}}]),e}()).\u0275fac=function(e){return new(e||d4)},d4.\u0275cmp=Yt({type:d4,selectors:[["ngx-charts-legend-entry"]],hostBindings:function(e,t){1&e&&ys("mouseenter",(function(){return t.onMouseEnter()}))("mouseleave",(function(){return t.onMouseLeave()}))},inputs:{isActive:"isActive",color:"color",label:"label",formattedLabel:"formattedLabel"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",toggle:"toggle"},decls:4,vars:6,consts:[["tabindex","-1",3,"title","click"],[1,"legend-label-color",3,"click"],[1,"legend-label-text"]],template:function(e,t){1&e&&(ls(0,"span",0),ys("click",(function(){return t.select.emit(t.formattedLabel)})),ls(1,"span",1),ys("click",(function(){return t.toggle.emit(t.formattedLabel)})),cs(),ls(2,"span",2),Gs(3),cs(),cs()),2&e&&(Ns("active",t.isActive),ss("title",t.formattedLabel),Ka(1),Ms("background-color",t.color),Ka(2),Xs(" ",t.trimmedLabel," "))},encapsulation:2,changeDetection:0}),d4),x4=((f4=function(){function e(t){_classCallCheck(this,e),this.sanitizer=t,this.horizontal=!1}return _createClass(e,[{key:"ngOnChanges",value:function(e){var t=this.gradientString(this.colors.range(),this.colors.domain());this.gradient=this.sanitizer.bypassSecurityTrustStyle("linear-gradient(to ".concat(this.horizontal?"right":"bottom",", ").concat(t,")"))}},{key:"gradientString",value:function(e,t){t.push(1);var n=[];return e.reverse().forEach((function(e,r){n.push("".concat(e," ").concat(Math.round(100*t[r]),"%"))})),n.join(", ")}}]),e}()).\u0275fac=function(e){return new(e||f4)(as(yf))},f4.\u0275cmp=Yt({type:f4,selectors:[["ngx-charts-scale-legend"]],inputs:{horizontal:"horizontal",valueRange:"valueRange",colors:"colors",height:"height",width:"width"},features:[ou],decls:8,vars:10,consts:[[1,"scale-legend"],[1,"scale-legend-label"],[1,"scale-legend-wrap"]],template:function(e,t){1&e&&(ls(0,"div",0),ls(1,"div",1),ls(2,"span"),Gs(3),cs(),cs(),hs(4,"div",2),ls(5,"div",1),ls(6,"span"),Gs(7),cs(),cs(),cs()),2&e&&(Ms("height",t.horizontal?void 0:t.height,"px")("width",t.width,"px"),Ns("horizontal-legend",t.horizontal),Ka(3),Js(t.valueRange[1].toLocaleString()),Ka(1),Ms("background",t.gradient,Oa),Ka(3),Js(t.valueRange[0].toLocaleString()))},styles:[".chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .scale-legend{text-align:center;display:flex;flex-direction:column}.chart-legend .scale-legend-wrap{display:inline-block;flex:1;width:30px;border-radius:5px;margin:0 auto}.chart-legend .scale-legend-label{font-size:12px}.chart-legend .horizontal-legend.scale-legend{flex-direction:row}.chart-legend .horizontal-legend .scale-legend-wrap{width:auto;height:30px;margin:0 16px}"],encapsulation:2,changeDetection:0}),f4),w4=((h4=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:h4}),h4.\u0275inj=Ke({factory:function(e){return new(e||h4)},imports:[[Lh,V3,J3],Lh,V3,J3]}),h4);function k4(e){var t=e.width,n=e.height,r=e.margins,a=e.showXAxis,i=void 0!==a&&a,o=e.showYAxis,s=void 0!==o&&o,u=e.xAxisHeight,l=void 0===u?0:u,c=e.yAxisWidth,h=void 0===c?0:c,f=e.showXLabel,d=void 0!==f&&f,p=e.showYLabel,m=void 0!==p&&p,v=e.showLegend,y=void 0!==v&&v,g=e.legendType,_=void 0===g?"ordinal":g,b=e.legendPosition,x=void 0===b?"right":b,w=e.columns,k=void 0===w?12:w,C=r[3],S=t,I=n-r[0]-r[2];if(y&&"right"===x&&(k-="ordinal"===_?2:1),S=(S=S*k/12)-r[1]-r[3],i&&(I-=5,I-=l,d)&&(I-=30),s&&(S-=5,S-=h,C+=h,C+=10,m)){S-=30,C+=30}return S=Math.max(0,S),I=Math.max(0,I),{width:Math.floor(S),height:Math.floor(I),xOffset:Math.floor(C)}}var C4,S4,I4,D4,A4,T4,E4,R4,O4,M4,N4,P4,F4=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}],L4=function(){function e(t,n,r,a){_classCallCheck(this,e),"string"==typeof t&&(t=F4.find((function(e){return e.name===t}))),this.colorDomain=t.domain,this.scaleType=n,this.domain=r,this.customColors=a,this.scale=this.generateColorScheme(t,n,this.domain)}return _createClass(e,[{key:"generateColorScheme",value:function(e,t,n){var r;if("string"==typeof e&&(e=F4.find((function(t){return t.name===e}))),"quantile"===t)r=function e(){var t,n=[],r=[],a=[];function i(){var e=0,t=Math.max(1,r.length);for(a=new Array(t-1);++e<t;)a[e-1]=H0(n,e/t);return o}function o(e){return isNaN(e=+e)?t:r[i0(a,e)]}return o.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]},o.domain=function(e){if(!arguments.length)return n.slice();n=[];var t,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null==a||isNaN(a=+a)||n.push(a)}}catch(s7){r.e(s7)}finally{r.f()}return n.sort(dQ),i()},o.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return a.slice()},o.copy=function(){return e().domain(n).range(r).unknown(t)},m0.apply(o,arguments)}().range(e.domain).domain(n);else if("ordinal"===t)r=z0().range(e.domain).domain(n);else if("linear"===t){var a=_toConsumableArray(e.domain);1===a.length&&(a.push(a[0]),this.colorDomain=a);var i=F0(0,1,1/a.length);r=P0().domain(i).range(a)}return r}},{key:"getColor",value:function(e){if(null==e)throw new Error("Value can not be null");if("linear"===this.scaleType){var t=P0().domain(this.domain).range([0,1]);return this.scale(t(e))}if("function"==typeof this.customColors)return this.customColors(e);var n,r=e.toString();return this.customColors&&this.customColors.length>0&&(n=this.customColors.find((function(e){return e.name.toLowerCase()===r.toLowerCase()}))),n?n.value:this.scale(e)}},{key:"getLinearGradientStops",value:function(e,t){void 0===t&&(t=this.domain[0]);var n=P0().domain(this.domain).range([0,1]),r=B0().domain(this.colorDomain).range([0,1]),a=this.getColor(e),i=n(t),o=this.getColor(t),s=n(e),u=1,l=i,c=[];for(c.push({color:o,offset:i,originalOffset:i,opacity:1});l<s&&u<this.colorDomain.length;){var h=this.colorDomain[u],f=r(h);if(f<=i)u++;else{if(f.toFixed(4)>=(s-r.bandwidth()).toFixed(4))break;c.push({color:h,offset:f,opacity:1}),l=f,u++}}if(c[c.length-1].offset<100&&c.push({color:a,offset:s,opacity:1}),s===i)c[0].offset=0,c[1].offset=100;else if(100!==c[c.length-1].offset){var d,p=_createForOfIteratorHelper(c);try{for(p.s();!(d=p.n()).done;){var m=d.value;m.offset=(m.offset-i)/(s-i)*100}}catch(s7){p.e(s7)}finally{p.f()}}return c}}]),e}(),z4=((I4=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:I4}),I4.\u0275inj=Ke({factory:function(e){return new(e||I4)},imports:[[w4]]}),I4),B4=((S4=function(){function e(t){_classCallCheck(this,e),this.roundEdges=!0,this.gradient=!1,this.offset=0,this.isActive=!1,this.animations=!0,this.noBarWhenZero=!0,this.select=new fl,this.activate=new fl,this.deactivate=new fl,this.hasGradient=!1,this.hideBar=!1,this.element=t.nativeElement}return _createClass(e,[{key:"ngOnChanges",value:function(e){e.roundEdges&&this.loadAnimation(),this.update()}},{key:"update",value:function(){this.gradientId="grad"+Y3().toString(),this.gradientFill="url(#".concat(this.gradientId,")"),this.gradient||this.stops?(this.gradientStops=this.getGradient(),this.hasGradient=!0):this.hasGradient=!1,this.updatePathEl(),this.checkToHideBar()}},{key:"loadAnimation",value:function(){this.path=this.getStartingPath(),setTimeout(this.update.bind(this),100)}},{key:"updatePathEl",value:function(){var e=DK(this.element).select(".bar"),t=this.getPath();this.animations?e.transition().duration(500).attr("d",t):e.attr("d",t)}},{key:"getGradient",value:function(){return this.stops?this.stops:[{offset:0,color:this.fill,opacity:this.getStartOpacity()},{offset:100,color:this.fill,opacity:1}]}},{key:"getStartingPath",value:function(){if(!this.animations)return this.getPath();var e,t=this.getRadius();return this.roundEdges?"vertical"===this.orientation?(t=Math.min(this.height,t),e=N3(this.x,this.y+this.height,this.width,1,0,this.edges)):"horizontal"===this.orientation&&(t=Math.min(this.width,t),e=N3(this.x,this.y,1,this.height,0,this.edges)):"vertical"===this.orientation?e=N3(this.x,this.y+this.height,this.width,1,0,this.edges):"horizontal"===this.orientation&&(e=N3(this.x,this.y,1,this.height,0,this.edges)),e}},{key:"getPath",value:function(){var e,t=this.getRadius();return this.roundEdges?"vertical"===this.orientation?(t=Math.min(this.height,t),e=N3(this.x,this.y,this.width,this.height,t,this.edges)):"horizontal"===this.orientation&&(t=Math.min(this.width,t),e=N3(this.x,this.y,this.width,this.height,t,this.edges)):e=N3(this.x,this.y,this.width,this.height,t,this.edges),e}},{key:"getRadius",value:function(){var e=0;return this.roundEdges&&this.height>5&&this.width>5&&(e=Math.floor(Math.min(5,this.height/2,this.width/2))),e}},{key:"getStartOpacity",value:function(){return this.roundEdges?.2:.5}},{key:"onMouseEnter",value:function(){this.activate.emit(this.data)}},{key:"onMouseLeave",value:function(){this.deactivate.emit(this.data)}},{key:"checkToHideBar",value:function(){this.hideBar=this.noBarWhenZero&&("vertical"===this.orientation&&0===this.height||"horizontal"===this.orientation&&0===this.width)}},{key:"edges",get:function(){var e=[!1,!1,!1,!1];return this.roundEdges&&("vertical"===this.orientation?e=this.data.value>0?[!0,!0,!1,!1]:[!1,!1,!0,!0]:"horizontal"===this.orientation&&(e=this.data.value>0?[!1,!0,!1,!0]:[!0,!1,!0,!1])),e}}]),e}()).\u0275fac=function(e){return new(e||S4)(as(bu))},S4.\u0275cmp=Yt({type:S4,selectors:[["g","ngx-charts-bar",""]],hostBindings:function(e,t){1&e&&ys("mouseenter",(function(){return t.onMouseEnter()}))("mouseleave",(function(){return t.onMouseLeave()}))},inputs:{roundEdges:"roundEdges",gradient:"gradient",offset:"offset",isActive:"isActive",animations:"animations",noBarWhenZero:"noBarWhenZero",fill:"fill",data:"data",width:"width",height:"height",x:"x",y:"y",orientation:"orientation",stops:"stops",ariaLabel:"ariaLabel"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[ou],attrs:F2,decls:2,vars:8,consts:[[4,"ngIf"],["stroke","none","role","img","tabIndex","-1",1,"bar",3,"click"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"]],template:function(e,t){1&e&&(ns(0,L2,2,3,"defs",0),nr(),ls(1,"path",1),ys("click",(function(){return t.select.emit(t.data)})),cs()),2&e&&(ss("ngIf",t.hasGradient),Ka(1),Ns("active",t.isActive)("hidden",t.hideBar),es("d",t.path)("aria-label",t.ariaLabel)("fill",t.hasGradient?t.gradientFill:t.fill))},directives:[yh,o4],encapsulation:2,changeDetection:0}),S4),W4=((C4=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).legend=!1,e.legendTitle="Legend",e.legendPosition="right",e.tooltipDisabled=!1,e.showGridLines=!0,e.activeEntries=[],e.trimXAxisTicks=!0,e.trimYAxisTicks=!0,e.rotateXAxisTicks=!0,e.maxXAxisTickLength=16,e.maxYAxisTickLength=16,e.barPadding=8,e.roundDomains=!1,e.roundEdges=!0,e.showDataLabel=!1,e.noBarWhenZero=!0,e.activate=new fl,e.deactivate=new fl,e.margin=[10,20,10,20],e.xAxisHeight=0,e.yAxisWidth=0,e.dataLabelMaxHeight={negative:0,positive:0},e}return _createClass(n,[{key:"update",value:function(){_get(_getPrototypeOf(n.prototype),"update",this).call(this),this.showDataLabel||(this.dataLabelMaxHeight={negative:0,positive:0}),this.margin=[10+this.dataLabelMaxHeight.positive,20,10+this.dataLabelMaxHeight.negative,20],this.dims=k4({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.formatDates(),this.showDataLabel&&(this.dims.height-=this.dataLabelMaxHeight.negative),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform="translate(".concat(this.dims.xOffset," , ").concat(this.margin[0]+this.dataLabelMaxHeight.negative,")")}},{key:"getXScale",value:function(){this.xDomain=this.getXDomain();var e=this.xDomain.length/(this.dims.width/this.barPadding+1);return B0().range([0,this.dims.width]).paddingInner(e).domain(this.xDomain)}},{key:"getYScale",value:function(){this.yDomain=this.getYDomain();var e=P0().range([this.dims.height,0]).domain(this.yDomain);return this.roundDomains?e.nice():e}},{key:"getXDomain",value:function(){return this.results.map((function(e){return e.label}))}},{key:"getYDomain",value:function(){var e=this.results.map((function(e){return e.value})),t=this.yScaleMin?Math.min.apply(Math,[this.yScaleMin].concat(_toConsumableArray(e))):Math.min.apply(Math,[0].concat(_toConsumableArray(e)));this.yAxisTicks&&!this.yAxisTicks.some(isNaN)&&(t=Math.min.apply(Math,[t].concat(_toConsumableArray(this.yAxisTicks))));var n=this.yScaleMax?Math.max.apply(Math,[this.yScaleMax].concat(_toConsumableArray(e))):Math.max.apply(Math,[0].concat(_toConsumableArray(e)));return this.yAxisTicks&&!this.yAxisTicks.some(isNaN)&&(n=Math.max.apply(Math,[n].concat(_toConsumableArray(this.yAxisTicks)))),[t,n]}},{key:"onClick",value:function(e){this.select.emit(e)}},{key:"setColors",value:function(){var e;e="ordinal"===this.schemeType?this.xDomain:this.yDomain,this.colors=new L4(this.scheme,this.schemeType,e,this.customColors)}},{key:"getLegendOptions",value:function(){var e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.xDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.yDomain,e.colors=this.colors.scale),e}},{key:"updateYAxisWidth",value:function(e){var t=e.width;this.yAxisWidth=t,this.update()}},{key:"updateXAxisHeight",value:function(e){var t=e.height;this.xAxisHeight=t,this.update()}},{key:"onDataLabelMaxHeightChanged",value:function(e){var t=this;e.size.negative?this.dataLabelMaxHeight.negative=Math.max(this.dataLabelMaxHeight.negative,e.size.height):this.dataLabelMaxHeight.positive=Math.max(this.dataLabelMaxHeight.positive,e.size.height),e.index===this.results.length-1&&setTimeout((function(){return t.update()}))}},{key:"onActivate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=this.results.find((function(n){return t?n.label===e.name:n.name===e.name})),this.activeEntries.findIndex((function(t){return t.name===e.name&&t.value===e.value&&t.series===e.series}))>-1||(this.activeEntries=[e].concat(_toConsumableArray(this.activeEntries)),this.activate.emit({value:e,entries:this.activeEntries}))}},{key:"onDeactivate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=this.results.find((function(n){return t?n.label===e.name:n.name===e.name}));var n=this.activeEntries.findIndex((function(t){return t.name===e.name&&t.value===e.value&&t.series===e.series}));this.activeEntries.splice(n,1),this.activeEntries=_toConsumableArray(this.activeEntries),this.deactivate.emit({value:e,entries:this.activeEntries})}}]),n}(I3)).\u0275fac=function(e){return y9(e||C4)},C4.\u0275cmp=Yt({type:C4,selectors:[["ngx-charts-bar-vertical"]],contentQueries:function(e,t,n){var r;1&e&&Dl(n,M2,!0),2&e&&kl(r=El())&&(t.tooltipTemplate=r.first)},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",tooltipDisabled:"tooltipDisabled",showGridLines:"showGridLines",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",barPadding:"barPadding",roundDomains:"roundDomains",roundEdges:"roundEdges",showDataLabel:"showDataLabel",noBarWhenZero:"noBarWhenZero",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",yScaleMax:"yScaleMax",yScaleMin:"yScaleMin",dataLabelFormatting:"dataLabelFormatting"},outputs:{activate:"activate",deactivate:"deactivate"},features:[eu],decls:5,vars:25,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"bar-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","xAxisOffset","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-series-vertical","",3,"xScale","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","activeEntries","roundEdges","animations","noBarWhenZero","activate","deactivate","select","dataLabelHeightChanged"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","xAxisOffset","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"]],template:function(e,t){1&e&&(ls(0,"ngx-charts-chart",0),ys("legendLabelClick",(function(e){return t.onClick(e)}))("legendLabelActivate",(function(e){return t.onActivate(e,!0)}))("legendLabelDeactivate",(function(e){return t.onDeactivate(e,!0)})),nr(),ls(1,"g",1),ns(2,z2,1,10,"g",2),ns(3,B2,1,9,"g",3),ls(4,"g",4),ys("activate",(function(e){return t.onActivate(e)}))("deactivate",(function(e){return t.onDeactivate(e)}))("select",(function(e){return t.onClick(e)}))("dataLabelHeightChanged",(function(e){return t.onDataLabelMaxHeightChanged(e)})),cs(),cs(),cs()),2&e&&(ss("view",cl(22,P2,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),Ka(1),es("transform",t.transform),Ka(1),ss("ngIf",t.xAxis),Ka(1),ss("ngIf",t.yAxis),Ka(1),ss("xScale",t.xScale)("yScale",t.yScale)("colors",t.colors)("series",t.results)("dims",t.dims)("gradient",t.gradient)("tooltipDisabled",t.tooltipDisabled)("tooltipTemplate",t.tooltipTemplate)("showDataLabel",t.showDataLabel)("dataLabelFormatting",t.dataLabelFormatting)("activeEntries",t.activeEntries)("roundEdges",t.roundEdges)("animations",t.animations)("noBarWhenZero",t.noBarWhenZero))},directives:function(){return[C3,yh,V4,M3,q3]},styles:[".ngx-charts{float:left;overflow:visible}.ngx-charts .arc,.ngx-charts .bar,.ngx-charts .circle{cursor:pointer}.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .card.active,.ngx-charts .card:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .arc:focus,.ngx-charts .bar:focus,.ngx-charts .card:focus,.ngx-charts .cell:focus{outline:0}.ngx-charts .arc.hidden,.ngx-charts .bar.hidden,.ngx-charts .card.hidden,.ngx-charts .cell.hidden{display:none}.ngx-charts g:focus{outline:0}.ngx-charts .area-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .line-series.inactive,.ngx-charts .polar-series-area.inactive,.ngx-charts .polar-series-path.inactive{transition:opacity .1s ease-in-out;opacity:.2}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{stroke:#ddd;stroke-width:1;fill:none}.ngx-charts .refline-path{stroke:#a8b2c7;stroke-width:1;stroke-dasharray:5;stroke-dashoffset:5}.ngx-charts .refline-label{font-size:9px}.ngx-charts .reference-area{fill-opacity:.05;fill:#000}.ngx-charts .gridline-path-dotted{stroke:#ddd;stroke-width:1;fill:none;stroke-dasharray:1,20;stroke-dashoffset:3}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:rgba(0,0,0,.05)}"],encapsulation:2,changeDetection:0}),C4),q4=function(e){return e.positive="positive",e.negative="negative",e}({}),V4=((P4=function(){function e(){_classCallCheck(this,e),this.type="standard",this.tooltipDisabled=!1,this.animations=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.select=new fl,this.activate=new fl,this.deactivate=new fl,this.dataLabelHeightChanged=new fl,this.barsForDataLabels=[]}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"update",value:function(){var e,t,n=this;this.updateTooltipSettings(),this.series.length&&(t=this.xScale.bandwidth()),t=Math.round(t);var r,a=Math.max(this.yScale.domain()[0],0),i=(_defineProperty(e={},q4.positive,0),_defineProperty(e,q4.negative,0),e),o=q4.positive;"normalized"===this.type&&(r=this.series.map((function(e){return e.value})).reduce((function(e,t){return e+t}),0)),this.bars=this.series.map((function(e,s){var u=e.value,l=n.getLabel(e),c=X3(l);o=u>0?q4.positive:q4.negative;var h={value:u,label:l,roundEdges:n.roundEdges,data:e,width:t,formattedLabel:c,height:0,x:0,y:0};if("standard"===n.type)h.height=Math.abs(n.yScale(u)-n.yScale(a)),h.x=n.xScale(l),h.y=n.yScale(u<0?0:u);else if("stacked"===n.type){var f=i[o],d=f+u;i[o]+=u,h.height=n.yScale(f)-n.yScale(d),h.x=0,h.y=n.yScale(d),h.offset0=f,h.offset1=d}else if("normalized"===n.type){var p=i[o],m=p+u;i[o]+=u,r>0?(p=100*p/r,m=100*m/r):(p=0,m=0),h.height=n.yScale(p)-n.yScale(m),h.x=0,h.y=n.yScale(m),h.offset0=p,h.offset1=m,u=(m-p).toFixed(2)+"%"}"ordinal"===n.colors.scaleType?h.color=n.colors.getColor(l):"standard"===n.type?(h.color=n.colors.getColor(u),h.gradientStops=n.colors.getLinearGradientStops(u)):(h.color=n.colors.getColor(h.offset1),h.gradientStops=n.colors.getLinearGradientStops(h.offset1,h.offset0));var v=c;return h.ariaLabel=c+" "+u.toLocaleString(),n.seriesName&&(v="".concat(n.seriesName," \u2022 ").concat(c),h.data.series=n.seriesName,h.ariaLabel=n.seriesName+" "+h.ariaLabel),h.tooltipText=n.tooltipDisabled?void 0:'\n        <span class="tooltip-label">'.concat(K3(v),'</span>\n        <span class="tooltip-val">').concat(u.toLocaleString(),"</span>\n      "),h})),this.updateDataLabels()}},{key:"updateDataLabels",value:function(){var e=this;if("stacked"===this.type){this.barsForDataLabels=[];var t={};t.series=this.seriesName;var n=this.series.map((function(e){return e.value})).reduce((function(e,t){return t>0?e+t:e}),0),r=this.series.map((function(e){return e.value})).reduce((function(e,t){return t<0?e+t:e}),0);t.total=n+r,t.x=0,t.y=0,t.height=this.yScale(t.total>0?n:r),t.width=this.xScale.bandwidth(),this.barsForDataLabels.push(t)}else this.barsForDataLabels=this.series.map((function(t){var n={};return n.series=e.seriesName?e.seriesName:t.label,n.total=t.value,n.x=e.xScale(t.label),n.y=e.yScale(0),n.height=e.yScale(n.total)-e.yScale(0),n.width=e.xScale.bandwidth(),n}))}},{key:"updateTooltipSettings",value:function(){this.tooltipPlacement=this.tooltipDisabled?void 0:"top",this.tooltipType=this.tooltipDisabled?void 0:"tooltip"}},{key:"isActive",value:function(e){return!!this.activeEntries&&void 0!==this.activeEntries.find((function(t){return e.name===t.name&&e.series===t.series}))}},{key:"onClick",value:function(e){this.select.emit(e)}},{key:"getLabel",value:function(e){return e.label?e.label:e.name}},{key:"trackBy",value:function(e,t){return t.label}},{key:"trackDataLabelBy",value:function(e,t){return e+"#"+t.series+"#"+t.total}}]),e}()).\u0275fac=function(e){return new(e||P4)},P4.\u0275cmp=Yt({type:P4,selectors:[["g","ngx-charts-series-vertical",""]],inputs:{type:"type",tooltipDisabled:"tooltipDisabled",animations:"animations",showDataLabel:"showDataLabel",noBarWhenZero:"noBarWhenZero",dims:"dims",series:"series",xScale:"xScale",yScale:"yScale",colors:"colors",gradient:"gradient",activeEntries:"activeEntries",seriesName:"seriesName",tooltipTemplate:"tooltipTemplate",roundEdges:"roundEdges",dataLabelFormatting:"dataLabelFormatting"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",dataLabelHeightChanged:"dataLabelHeightChanged"},features:[ou],attrs:W2,decls:2,vars:3,consts:[["ngx-charts-bar","","ngx-tooltip","",3,"width","height","x","y","fill","stops","data","orientation","roundEdges","gradient","ariaLabel","isActive","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","noBarWhenZero","animations","select","activate","deactivate",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["ngx-charts-bar","","ngx-tooltip","",3,"width","height","x","y","fill","stops","data","orientation","roundEdges","gradient","ariaLabel","isActive","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","noBarWhenZero","animations","select","activate","deactivate"],["ngx-charts-bar-label","",3,"barX","barY","barWidth","barHeight","value","valueFormatting","orientation","dimensionsChanged",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-bar-label","",3,"barX","barY","barWidth","barHeight","value","valueFormatting","orientation","dimensionsChanged"]],template:function(e,t){1&e&&(ns(0,q2,1,22,"g",0),ns(1,U2,2,2,"g",1)),2&e&&(ss("ngForOf",t.bars)("ngForTrackBy",t.trackBy),Ka(1),ss("ngIf",t.showDataLabel))},directives:function(){return[mh,yh,B4,G3,U4]},encapsulation:2,data:{animation:[dz("animationState",[gz(":leave",[vz({opacity:1}),pz(500,vz({opacity:0}))])])]},changeDetection:0}),P4),U4=((N4=function(){function e(t){_classCallCheck(this,e),this.dimensionsChanged=new fl,this.horizontalPadding=2,this.verticalPadding=5,this.element=t.nativeElement}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"getSize",value:function(){return{height:this.element.getBoundingClientRect().height,width:this.element.getBoundingClientRect().width,negative:this.value<0}}},{key:"ngAfterViewInit",value:function(){this.dimensionsChanged.emit(this.getSize())}},{key:"update",value:function(){this.formatedValue=this.valueFormatting?this.valueFormatting(this.value):X3(this.value),"horizontal"===this.orientation?(this.x=this.barX+this.barWidth,this.value<0?(this.x=this.x-this.horizontalPadding,this.textAnchor="end"):(this.x=this.x+this.horizontalPadding,this.textAnchor="start"),this.y=this.barY+this.barHeight/2):(this.x=this.barX+this.barWidth/2,this.y=this.barY+this.barHeight,this.value<0?(this.y=this.y+this.verticalPadding,this.textAnchor="end"):(this.y=this.y-this.verticalPadding,this.textAnchor="start"),this.transform="rotate(-45, ".concat(this.x," , ").concat(this.y,")"))}}]),e}()).\u0275fac=function(e){return new(e||N4)(as(bu))},N4.\u0275cmp=Yt({type:N4,selectors:[["g","ngx-charts-bar-label",""]],inputs:{value:"value",valueFormatting:"valueFormatting",barX:"barX",barY:"barY",barWidth:"barWidth",barHeight:"barHeight",orientation:"orientation"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[ou],attrs:j2,decls:2,vars:5,consts:[["alignment-baseline","middle",1,"textDataLabel"]],template:function(e,t){1&e&&(nr(),ls(0,"text",0),Gs(1),cs()),2&e&&(es("text-anchor",t.textAnchor)("transform",t.transform)("x",t.x)("y",t.y),Ka(1),Xs(" ",t.formatedValue," "))},styles:[".textDataLabel[_ngcontent-%COMP%]{font-size:11px}"],changeDetection:0}),N4),j4=((M4=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:M4}),M4.\u0275inj=Ke({factory:function(e){return new(e||M4)},imports:[[w4]]}),M4),H4=((O4=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:O4}),O4.\u0275inj=Ke({factory:function(e){return new(e||O4)},imports:[[w4]]}),O4),G4=((R4=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:R4}),R4.\u0275inj=Ke({factory:function(e){return new(e||R4)},imports:[[w4]]}),R4),J4=((E4=function(){function e(t){_classCallCheck(this,e),this.element=t,this.fill="none",this.animations=!0,this.select=new fl,this.initialized=!1}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.initialized?this.updatePathEl():(this.initialized=!0,this.initialPath=this.path)}},{key:"updatePathEl",value:function(){var e=DK(this.element.nativeElement).select(".line");this.animations?e.transition().duration(750).attr("d",this.path):e.attr("d",this.path)}}]),e}()).\u0275fac=function(e){return new(e||E4)(as(bu))},E4.\u0275cmp=Yt({type:E4,selectors:[["g","ngx-charts-line",""]],inputs:{fill:"fill",animations:"animations",path:"path",stroke:"stroke",data:"data"},outputs:{select:"select"},features:[ou],attrs:H2,decls:1,vars:4,consts:[["stroke-width","1.5px",1,"line"]],template:function(e,t){1&e&&(nr(),hs(0,"path",0)),2&e&&(ss("@animationState","active"),es("d",t.initialPath)("fill",t.fill)("stroke",t.stroke))},encapsulation:2,data:{animation:[dz("animationState",[gz(":enter",[vz({strokeDasharray:2e3,strokeDashoffset:2e3}),pz(1e3,vz({strokeDashoffset:0}))])])]},changeDetection:0}),E4),X4=((T4=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).legendTitle="Legend",e.legendPosition="right",e.showGridLines=!0,e.curve=J0,e.activeEntries=[],e.trimXAxisTicks=!0,e.trimYAxisTicks=!0,e.rotateXAxisTicks=!0,e.maxXAxisTickLength=16,e.maxYAxisTickLength=16,e.roundDomains=!1,e.tooltipDisabled=!1,e.showRefLines=!1,e.showRefLabels=!0,e.activate=new fl,e.deactivate=new fl,e.margin=[10,20,10,20],e.xAxisHeight=0,e.yAxisWidth=0,e.timelineHeight=50,e.timelinePadding=10,e}return _createClass(n,[{key:"update",value:function(){_get(_getPrototypeOf(n.prototype),"update",this).call(this),this.dims=k4({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.timeline&&(this.dims.height-=this.timelineHeight+this.margin[2]+this.timelinePadding),this.xDomain=this.getXDomain(),this.filteredDomain&&(this.xDomain=this.filteredDomain),this.yDomain=this.getYDomain(),this.seriesDomain=this.getSeriesDomain(),this.xScale=this.getXScale(this.xDomain,this.dims.width),this.yScale=this.getYScale(this.yDomain,this.dims.height),this.updateTimeline(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform="translate(".concat(this.dims.xOffset," , ").concat(this.margin[0],")"),this.clipPathId="clip"+Y3().toString(),this.clipPath="url(#".concat(this.clipPathId,")")}},{key:"updateTimeline",value:function(){this.timeline&&(this.timelineWidth=this.dims.width,this.timelineXDomain=this.getXDomain(),this.timelineXScale=this.getXScale(this.timelineXDomain,this.timelineWidth),this.timelineYScale=this.getYScale(this.yDomain,this.timelineHeight),this.timelineTransform="translate(".concat(this.dims.xOffset,", ").concat(-this.margin[2],")"))}},{key:"getXDomain",value:function(){var e=function(e){var t,n=new Set,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var a,i=_createForOfIteratorHelper(t.value.series);try{for(i.s();!(a=i.n()).done;){var o=a.value;n.add(o.name)}}catch(s7){i.e(s7)}finally{i.f()}}}catch(s7){r.e(s7)}finally{r.f()}return Array.from(n)}(this.results);this.scaleType=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t&&e.every((function(e){return e instanceof Date}))?"time":e.every((function(e){return"number"==typeof e}))?"linear":"ordinal"}(e);var t,n,r=[];return"linear"===this.scaleType&&(e=e.map((function(e){return Number(e)}))),"time"!==this.scaleType&&"linear"!==this.scaleType||(t=this.xScaleMin?this.xScaleMin:Math.min.apply(Math,_toConsumableArray(e)),n=this.xScaleMax?this.xScaleMax:Math.max.apply(Math,_toConsumableArray(e))),"time"===this.scaleType?(r=[new Date(t),new Date(n)],this.xSet=_toConsumableArray(e).sort((function(e,t){var n=e.getTime(),r=t.getTime();return n>r?1:r>n?-1:0}))):"linear"===this.scaleType?(r=[t,n],this.xSet=_toConsumableArray(e).sort((function(e,t){return e-t}))):(r=e,this.xSet=e),r}},{key:"getYDomain",value:function(){var e,t=[],n=_createForOfIteratorHelper(this.results);try{for(n.s();!(e=n.n()).done;){var r,a=_createForOfIteratorHelper(e.value.series);try{for(a.s();!(r=a.n()).done;){var i=r.value;t.indexOf(i.value)<0&&t.push(i.value),void 0!==i.min&&(this.hasRange=!0,t.indexOf(i.min)<0&&t.push(i.min)),void 0!==i.max&&(this.hasRange=!0,t.indexOf(i.max)<0&&t.push(i.max))}}catch(s7){a.e(s7)}finally{a.f()}}}catch(s7){n.e(s7)}finally{n.f()}var o=[].concat(t);return this.autoScale||o.push(0),[this.yScaleMin?this.yScaleMin:Math.min.apply(Math,_toConsumableArray(o)),this.yScaleMax?this.yScaleMax:Math.max.apply(Math,_toConsumableArray(o))]}},{key:"getSeriesDomain",value:function(){return this.results.map((function(e){return e.name}))}},{key:"getXScale",value:function(e,t){var n;return"time"===this.scaleType?n=_0().range([0,t]).domain(e):"linear"===this.scaleType?(n=P0().range([0,t]).domain(e),this.roundDomains&&(n=n.nice())):"ordinal"===this.scaleType&&(n=q0().range([0,t]).padding(.1).domain(e)),n}},{key:"getYScale",value:function(e,t){var n=P0().range([t,0]).domain(e);return this.roundDomains?n.nice():n}},{key:"updateDomain",value:function(e){this.filteredDomain=e,this.xDomain=this.filteredDomain,this.xScale=this.getXScale(this.xDomain,this.dims.width)}},{key:"updateHoveredVertical",value:function(e){this.hoveredVertical=e.value,this.deactivateAll()}},{key:"hideCircles",value:function(){this.hoveredVertical=null,this.deactivateAll()}},{key:"onClick",value:function(e){this.select.emit(e)}},{key:"trackBy",value:function(e,t){return t.name}},{key:"setColors",value:function(){var e;e="ordinal"===this.schemeType?this.seriesDomain:this.yDomain,this.colors=new L4(this.scheme,this.schemeType,e,this.customColors)}},{key:"getLegendOptions",value:function(){var e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.seriesDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.yDomain,e.colors=this.colors.scale),e}},{key:"updateYAxisWidth",value:function(e){var t=e.width;this.yAxisWidth=t,this.update()}},{key:"updateXAxisHeight",value:function(e){var t=e.height;this.xAxisHeight=t,this.update()}},{key:"onActivate",value:function(e){this.deactivateAll(),this.activeEntries.findIndex((function(t){return t.name===e.name&&t.value===e.value}))>-1||(this.activeEntries=[e],this.activate.emit({value:e,entries:this.activeEntries}))}},{key:"onDeactivate",value:function(e){var t=this.activeEntries.findIndex((function(t){return t.name===e.name&&t.value===e.value}));this.activeEntries.splice(t,1),this.activeEntries=_toConsumableArray(this.activeEntries),this.deactivate.emit({value:e,entries:this.activeEntries})}},{key:"deactivateAll",value:function(){this.activeEntries=_toConsumableArray(this.activeEntries);var e,t=_createForOfIteratorHelper(this.activeEntries);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.deactivate.emit({value:n,entries:[]})}}catch(s7){t.e(s7)}finally{t.f()}this.activeEntries=[]}}]),n}(I3)).\u0275fac=function(e){return g9(e||T4)},T4.\u0275cmp=Yt({type:T4,selectors:[["ngx-charts-line-chart"]],contentQueries:function(e,t,n){var r;1&e&&(Dl(n,M2,!0),Dl(n,N2,!0)),2&e&&(kl(r=El())&&(t.tooltipTemplate=r.first),kl(r=El())&&(t.seriesTooltipTemplate=r.first))},hostBindings:function(e,t){1&e&&ys("mouseleave",(function(){return t.hideCircles()}))},inputs:{legendTitle:"legendTitle",legendPosition:"legendPosition",showGridLines:"showGridLines",curve:"curve",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",roundDomains:"roundDomains",tooltipDisabled:"tooltipDisabled",showRefLines:"showRefLines",showRefLabels:"showRefLabels",legend:"legend",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",autoScale:"autoScale",timeline:"timeline",gradient:"gradient",schemeType:"schemeType",rangeFillOpacity:"rangeFillOpacity",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",referenceLines:"referenceLines",xScaleMin:"xScaleMin",xScaleMax:"xScaleMax",yScaleMin:"yScaleMin",yScaleMax:"yScaleMax"},outputs:{activate:"activate",deactivate:"deactivate"},features:[eu],decls:11,vars:20,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"line-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"mouseleave",4,"ngIf"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","scaleType","legend","onDomainChange",4,"ngIf"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","dimensionsChanged"],["ngx-charts-line-series","",3,"xScale","yScale","colors","data","activeEntries","scaleType","curve","rangeFillOpacity","hasRange","animations"],[3,"mouseleave"],["ngx-charts-tooltip-area","",3,"dims","xSet","xScale","yScale","results","colors","tooltipDisabled","tooltipTemplate","hover"],[4,"ngFor","ngForOf"],["ngx-charts-circle-series","",3,"xScale","yScale","colors","data","scaleType","visibleValue","activeEntries","tooltipDisabled","tooltipTemplate","select","activate","deactivate"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","scaleType","legend","onDomainChange"],["ngx-charts-line-series","",3,"xScale","yScale","colors","data","scaleType","curve","hasRange","animations"]],template:function(e,t){1&e&&(ls(0,"ngx-charts-chart",0),ys("legendLabelClick",(function(e){return t.onClick(e)}))("legendLabelActivate",(function(e){return t.onActivate(e)}))("legendLabelDeactivate",(function(e){return t.onDeactivate(e)})),nr(),ls(1,"defs"),ls(2,"clipPath"),hs(3,"rect"),cs(),cs(),ls(4,"g",1),ns(5,G2,1,10,"g",2),ns(6,J2,1,12,"g",3),ls(7,"g"),ns(8,X2,2,11,"g",4),ns(9,Z2,3,9,"g",5),cs(),cs(),ns(10,Q2,2,13,"g",6),cs()),2&e&&(ss("view",cl(17,P2,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),Ka(2),es("id",t.clipPathId),Ka(1),es("width",t.dims.width+10)("height",t.dims.height+10)("transform","translate(-5, -5)"),Ka(1),es("transform",t.transform),Ka(1),ss("ngIf",t.xAxis),Ka(1),ss("ngIf",t.yAxis),Ka(1),es("clip-path",t.clipPath),Ka(1),ss("ngForOf",t.results)("ngForTrackBy",t.trackBy),Ka(1),ss("ngIf",!t.tooltipDisabled),Ka(1),ss("ngIf",t.timeline&&"ordinal"!=t.scaleType))},directives:function(){return[C3,yh,mh,M3,q3,K4,y4,a4,g4]},styles:[".ngx-charts{float:left;overflow:visible}.ngx-charts .arc,.ngx-charts .bar,.ngx-charts .circle{cursor:pointer}.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .card.active,.ngx-charts .card:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .arc:focus,.ngx-charts .bar:focus,.ngx-charts .card:focus,.ngx-charts .cell:focus{outline:0}.ngx-charts .arc.hidden,.ngx-charts .bar.hidden,.ngx-charts .card.hidden,.ngx-charts .cell.hidden{display:none}.ngx-charts g:focus{outline:0}.ngx-charts .area-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .line-series.inactive,.ngx-charts .polar-series-area.inactive,.ngx-charts .polar-series-path.inactive{transition:opacity .1s ease-in-out;opacity:.2}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{stroke:#ddd;stroke-width:1;fill:none}.ngx-charts .refline-path{stroke:#a8b2c7;stroke-width:1;stroke-dasharray:5;stroke-dashoffset:5}.ngx-charts .refline-label{font-size:9px}.ngx-charts .reference-area{fill-opacity:.05;fill:#000}.ngx-charts .gridline-path-dotted{stroke:#ddd;stroke-width:1;fill:none;stroke-dasharray:1,20;stroke-dashoffset:3}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:rgba(0,0,0,.05)}"],encapsulation:2,data:{animation:[dz("animationState",[gz(":leave",[vz({opacity:1}),pz(500,vz({opacity:0}))])])]},changeDetection:0}),T4),K4=((A4=function(){function e(){_classCallCheck(this,e),this.animations=!0}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"update",value:function(){this.updateGradients();var e=this.sortData(this.data.series),t=this.getLineGenerator();this.path=t(e)||"";var n=this.getAreaGenerator();if(this.areaPath=n(e)||"",this.hasRange){var r=this.getRangeGenerator();this.outerPath=r(e)||""}if(this.hasGradient){this.stroke=this.gradientUrl;var a=this.data.series.map((function(e){return e.value})),i=Math.max.apply(Math,_toConsumableArray(a));i===Math.min.apply(Math,_toConsumableArray(a))&&(this.stroke=this.colors.getColor(i))}else this.stroke=this.colors.getColor(this.data.name)}},{key:"getLineGenerator",value:function(){var e=this;return r1().x((function(t){var n=t.name;return e.xScale("time"===e.scaleType?n:"linear"===e.scaleType?Number(n):n)})).y((function(t){return e.yScale(t.value)})).curve(this.curve)}},{key:"getRangeGenerator",value:function(){var e=this;return a1().x((function(t){var n=t.name;return e.xScale("time"===e.scaleType?n:"linear"===e.scaleType?Number(n):n)})).y0((function(t){return e.yScale("number"==typeof t.min?t.min:t.value)})).y1((function(t){return e.yScale("number"==typeof t.max?t.max:t.value)})).curve(this.curve)}},{key:"getAreaGenerator",value:function(){var e=this;return a1().x((function(t){return e.xScale(t.name)})).y0((function(){return e.yScale.range()[0]})).y1((function(t){return e.yScale(t.value)})).curve(this.curve)}},{key:"sortData",value:function(e){return"linear"===this.scaleType?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return e.sort((function(e,r){return"asc"===n?e[t]-r[t]:r[t]-e[t]}))}(e,"name"):"time"===this.scaleType?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return e.sort((function(e,r){var a=e[t].getTime(),i=r[t].getTime();return"asc"===n?a>i?1:i>a?-1:0:a>i?-1:i>a?1:0}))}(e,"name"):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",r=arguments.length>3?arguments[3]:void 0;return e.sort((function(e,a){var i=a[t],o=r.indexOf(e[t]),s=r.indexOf(i);return"asc"===n?o-s:s-o}))}(e,"name","asc",this.xScale.domain())}},{key:"updateGradients",value:function(){if("linear"===this.colors.scaleType){this.hasGradient=!0,this.gradientId="grad"+Y3().toString(),this.gradientUrl="url(#".concat(this.gradientId,")");var e=this.data.series.map((function(e){return e.value})),t=Math.max.apply(Math,_toConsumableArray(e)),n=Math.min.apply(Math,_toConsumableArray(e));this.gradientStops=this.colors.getLinearGradientStops(t,n),this.areaGradientStops=this.colors.getLinearGradientStops(t)}else this.hasGradient=!1,this.gradientStops=void 0,this.areaGradientStops=void 0}},{key:"isActive",value:function(e){return!!this.activeEntries&&void 0!==this.activeEntries.find((function(t){return e.name===t.name}))}},{key:"isInactive",value:function(e){return!(!this.activeEntries||0===this.activeEntries.length)&&void 0===this.activeEntries.find((function(t){return e.name===t.name}))}}]),e}()).\u0275fac=function(e){return new(e||A4)},A4.\u0275cmp=Yt({type:A4,selectors:[["g","ngx-charts-line-series",""]],inputs:{animations:"animations",data:"data",xScale:"xScale",yScale:"yScale",colors:"colors",scaleType:"scaleType",curve:"curve",activeEntries:"activeEntries",rangeFillOpacity:"rangeFillOpacity",hasRange:"hasRange"},features:[ou],attrs:$2,decls:6,vars:22,consts:[["ngx-charts-svg-linear-gradient","","orientation","vertical",3,"name","stops",4,"ngIf"],["ngx-charts-area","",1,"line-highlight",3,"data","path","fill","opacity","startOpacity","gradient","stops","animations"],["ngx-charts-line","",1,"line-series",3,"data","path","stroke","animations"],["ngx-charts-area","","class","line-series-range",3,"data","path","fill","active","inactive","opacity","animations",4,"ngIf"],["ngx-charts-svg-linear-gradient","","orientation","vertical",3,"name","stops"],["ngx-charts-area","",1,"line-series-range",3,"data","path","fill","opacity","animations"]],template:function(e,t){1&e&&(nr(),ls(0,"g"),ls(1,"defs"),ns(2,e3,1,2,"g",0),cs(),hs(3,"g",1),hs(4,"g",2),ns(5,t3,1,9,"g",3),cs()),2&e&&(Ka(2),ss("ngIf",t.hasGradient),Ka(1),Ns("active",t.isActive(t.data))("inactive",t.isInactive(t.data)),ss("data",t.data)("path",t.areaPath)("fill",t.hasGradient?t.gradientUrl:t.colors.getColor(t.data.name))("opacity",.25)("startOpacity",0)("gradient",!0)("stops",t.areaGradientStops)("animations",t.animations),Ka(1),Ns("active",t.isActive(t.data))("inactive",t.isInactive(t.data)),ss("data",t.data)("path",t.path)("stroke",t.stroke)("animations",t.animations),Ka(1),ss("ngIf",t.hasRange))},directives:[yh,u4,J4,o4],encapsulation:2,changeDetection:0}),A4),Z4=((D4=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:D4}),D4.\u0275inj=Ke({factory:function(e){return new(e||D4)},imports:[[w4]]}),D4);Math;var Y4,Q4,$4,e9,t9,n9,r9,a9,i9,o9,s9=((o9=function(){function e(){_classCallCheck(this,e),this.animations=!0,this.labelTrim=!0,this.labelTrimSize=10,this.isIE=/(edge|msie|trident)/i.test(navigator.userAgent),this.trimLabel=A3}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"update",value:function(){var e=this.radius;this.explodeSlices&&(e=this.radius*this.value/this.max);var t=A1().innerRadius(e).outerRadius(e).centroid(this.data),n=this.data.pos[1]/t[1];0!==this.data.pos[1]&&0!==t[1]||(n=1),this.line="M".concat(t,"L").concat([n*t[0],n*t[1]],"L").concat(this.data.pos)}},{key:"textAnchor",value:function(){return this.midAngle(this.data)<Math.PI?"start":"end"}},{key:"midAngle",value:function(e){return e.startAngle+(e.endAngle-e.startAngle)/2}},{key:"textX",get:function(){return this.data.pos[0]}},{key:"textY",get:function(){return this.data.pos[1]}},{key:"styleTransform",get:function(){return this.isIE?null:"translate3d(".concat(this.textX,"px,").concat(this.textY,"px, 0)")}},{key:"attrTransform",get:function(){return this.isIE?"translate(".concat(this.textX,",").concat(this.textY,")"):null}},{key:"textTransition",get:function(){return this.isIE||!this.animations?null:"transform 0.75s"}}]),e}()).\u0275fac=function(e){return new(e||o9)},o9.\u0275cmp=Yt({type:o9,selectors:[["g","ngx-charts-pie-label",""]],inputs:{animations:"animations",labelTrim:"labelTrim",labelTrimSize:"labelTrimSize",data:"data",radius:"radius",label:"label",color:"color",max:"max",value:"value",explodeSlices:"explodeSlices"},features:[ou],attrs:n3,decls:6,vars:17,consts:[["dy",".35em",1,"pie-label"],["fill","none",1,"pie-label-line","line"]],template:function(e,t){1&e&&(ls(0,"title"),Gs(1),cs(),nr(),ls(2,"g"),ls(3,"text",0),Gs(4),cs(),cs(),hs(5,"path",1)),2&e&&(Ka(1),Js(t.label),Ka(1),Ms("transform",t.styleTransform)("transition",t.textTransition),es("transform",t.attrTransform),Ka(1),Ms("text-anchor",t.textAnchor())("shape-rendering","crispEdges"),Ns("animation",t.animations),Ka(1),Xs(" ",t.labelTrim?t.trimLabel(t.label,t.labelTrimSize):t.label," "),Ka(1),Ns("animation",t.animations),es("d",t.line)("stroke",t.color))},encapsulation:2,changeDetection:0}),o9),u9=((i9=function(){function e(t){_classCallCheck(this,e),this.startAngle=0,this.endAngle=2*Math.PI,this.cornerRadius=0,this.explodeSlices=!1,this.gradient=!1,this.animate=!0,this.pointerEvents=!0,this.isActive=!1,this.select=new fl,this.activate=new fl,this.deactivate=new fl,this.dblclick=new fl,this.initialized=!1,this.element=t.nativeElement}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"getGradient",value:function(){return this.gradient?this.gradientFill:this.fill}},{key:"getPointerEvents",value:function(){return this.pointerEvents?"auto":"none"}},{key:"update",value:function(){var e=this.calculateArc();this.startOpacity=.5,this.radialGradientId="linearGrad"+Y3().toString(),this.gradientFill="url(#".concat(this.radialGradientId,")"),this.animate?this.initialized?this.updateAnimation():(this.loadAnimation(),this.initialized=!0):this.path=e.startAngle(this.startAngle).endAngle(this.endAngle)()}},{key:"calculateArc",value:function(){var e=this.outerRadius;return this.explodeSlices&&0===this.innerRadius&&(e=this.outerRadius*this.value/this.max),A1().innerRadius(this.innerRadius).outerRadius(e).cornerRadius(this.cornerRadius)}},{key:"loadAnimation",value:function(){var e=DK(this.element).selectAll(".arc").data([{startAngle:this.startAngle,endAngle:this.endAngle}]),t=this.calculateArc();e.transition().attrTween("d",(function(e){this._current=this._current||e;var n=Object.assign({},e);n.endAngle=n.startAngle;var r=AZ(n,n);return this._current=r(0),function(e){return t(r(e))}})).transition().duration(750).attrTween("d",(function(e){this._current=this._current||e;var n=AZ(this._current,e);return this._current=n(0),function(e){return t(n(e))}}))}},{key:"updateAnimation",value:function(){var e=DK(this.element).selectAll(".arc").data([{startAngle:this.startAngle,endAngle:this.endAngle}]),t=this.calculateArc();e.transition().duration(750).attrTween("d",(function(e){this._current=this._current||e;var n=AZ(this._current,e);return this._current=n(0),function(e){return t(n(e))}}))}},{key:"onClick",value:function(){var e=this;clearTimeout(this._timeout),this._timeout=setTimeout((function(){return e.select.emit(e.data)}),200)}},{key:"onDblClick",value:function(e){e.preventDefault(),e.stopPropagation(),clearTimeout(this._timeout),this.dblclick.emit({data:this.data,nativeEvent:e})}}]),e}()).\u0275fac=function(e){return new(e||i9)(as(bu))},i9.\u0275cmp=Yt({type:i9,selectors:[["g","ngx-charts-pie-arc",""]],inputs:{startAngle:"startAngle",endAngle:"endAngle",cornerRadius:"cornerRadius",explodeSlices:"explodeSlices",gradient:"gradient",animate:"animate",pointerEvents:"pointerEvents",isActive:"isActive",fill:"fill",innerRadius:"innerRadius",outerRadius:"outerRadius",value:"value",max:"max",data:"data"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",dblclick:"dblclick"},features:[ou],attrs:r3,decls:3,vars:7,consts:[[1,"arc-group"],[4,"ngIf"],[1,"arc",3,"click","dblclick","mouseenter","mouseleave"],["ngx-charts-svg-radial-gradient","","orientation","vertical",3,"color","name","startOpacity"]],template:function(e,t){1&e&&(nr(),ls(0,"g",0),ns(1,a3,2,3,"defs",1),ls(2,"path",2),ys("click",(function(){return t.onClick()}))("dblclick",(function(e){return t.onDblClick(e)}))("mouseenter",(function(){return t.activate.emit(t.data)}))("mouseleave",(function(){return t.deactivate.emit(t.data)})),cs(),cs()),2&e&&(Ka(1),ss("ngIf",t.gradient),Ka(1),Ms("pointer-events",t.getPointerEvents()),Ns("active",t.isActive),es("d",t.path)("fill",t.getGradient()))},directives:[yh,s4],encapsulation:2,changeDetection:0}),i9),l9=((a9=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).labels=!1,e.legend=!1,e.legendTitle="Legend",e.legendPosition="right",e.explodeSlices=!1,e.doughnut=!1,e.arcWidth=.25,e.activeEntries=[],e.tooltipDisabled=!1,e.trimLabels=!0,e.maxLabelLength=10,e.dblclick=new fl,e.select=new fl,e.activate=new fl,e.deactivate=new fl,e}return _createClass(n,[{key:"update",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"update",this).call(this),this.labels&&this.hasNoOptionalMarginsSet()?this.margins=[30,80,30,80]:!this.labels&&this.hasNoOptionalMarginsSet()&&(this.margins=[20,20,20,20]),this.dims=k4({width:this.width,height:this.height,margins:this.margins,showLegend:this.legend,legendPosition:this.legendPosition}),this.formatDates(),this.translation="translate(".concat(this.margins[3]+this.dims.width/2,", ").concat(this.margins[0]+this.dims.height/2,")"),this.outerRadius=Math.min(this.dims.width,this.dims.height),this.outerRadius/=this.labels?3:2,this.innerRadius=0,this.doughnut&&(this.innerRadius=this.outerRadius*(1-this.arcWidth)),this.domain=this.getDomain(),this.data=this.results.sort((function(t,n){return e.domain.indexOf(t.name)-e.domain.indexOf(n.name)})),this.setColors(),this.legendOptions=this.getLegendOptions()}},{key:"getDomain",value:function(){return this.results.map((function(e){return e.label}))}},{key:"onClick",value:function(e){this.select.emit(e)}},{key:"setColors",value:function(){this.colors=new L4(this.scheme,"ordinal",this.domain,this.customColors)}},{key:"getLegendOptions",value:function(){return{scaleType:"ordinal",domain:this.domain,colors:this.colors,title:this.legendTitle,position:this.legendPosition}}},{key:"onActivate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=this.results.find((function(n){return t?n.label===e.name:n.name===e.name})),this.activeEntries.findIndex((function(t){return t.name===e.name&&t.value===e.value&&t.series===e.series}))>-1||(this.activeEntries=[e].concat(_toConsumableArray(this.activeEntries)),this.activate.emit({value:e,entries:this.activeEntries}))}},{key:"onDeactivate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=this.results.find((function(n){return t?n.label===e.name:n.name===e.name}));var n=this.activeEntries.findIndex((function(t){return t.name===e.name&&t.value===e.value&&t.series===e.series}));this.activeEntries.splice(n,1),this.activeEntries=_toConsumableArray(this.activeEntries),this.deactivate.emit({value:e,entries:this.activeEntries})}},{key:"hasNoOptionalMarginsSet",value:function(){return!this.margins||this.margins.length<=0}}]),n}(I3)).\u0275fac=function(e){return _9(e||a9)},a9.\u0275cmp=Yt({type:a9,selectors:[["ngx-charts-pie-chart"]],contentQueries:function(e,t,n){var r;1&e&&Dl(n,M2,!0),2&e&&kl(r=El())&&(t.tooltipTemplate=r.first)},inputs:{labels:"labels",legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",explodeSlices:"explodeSlices",doughnut:"doughnut",arcWidth:"arcWidth",activeEntries:"activeEntries",tooltipDisabled:"tooltipDisabled",trimLabels:"trimLabels",maxLabelLength:"maxLabelLength",margins:"margins",gradient:"gradient",labelFormatting:"labelFormatting",tooltipText:"tooltipText"},outputs:{dblclick:"dblclick",select:"select",activate:"activate",deactivate:"deactivate"},features:[eu],decls:3,vars:24,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelActivate","legendLabelDeactivate","legendLabelClick"],[1,"pie-chart","chart"],["ngx-charts-pie-series","",3,"colors","series","showLabels","labelFormatting","trimLabels","maxLabelLength","activeEntries","innerRadius","outerRadius","explodeSlices","gradient","animations","tooltipDisabled","tooltipTemplate","tooltipText","dblclick","select","activate","deactivate"]],template:function(e,t){1&e&&(ls(0,"ngx-charts-chart",0),ys("legendLabelActivate",(function(e){return t.onActivate(e,!0)}))("legendLabelDeactivate",(function(e){return t.onDeactivate(e,!0)}))("legendLabelClick",(function(e){return t.onClick(e)})),nr(),ls(1,"g",1),ls(2,"g",2),ys("dblclick",(function(e){return t.dblclick.emit(e)}))("select",(function(e){return t.onClick(e)}))("activate",(function(e){return t.onActivate(e)}))("deactivate",(function(e){return t.onDeactivate(e)})),cs(),cs(),cs()),2&e&&(ss("view",cl(21,P2,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),Ka(1),es("transform",t.translation),Ka(1),ss("colors",t.colors)("series",t.data)("showLabels",t.labels)("labelFormatting",t.labelFormatting)("trimLabels",t.trimLabels)("maxLabelLength",t.maxLabelLength)("activeEntries",t.activeEntries)("innerRadius",t.innerRadius)("outerRadius",t.outerRadius)("explodeSlices",t.explodeSlices)("gradient",t.gradient)("animations",t.animations)("tooltipDisabled",t.tooltipDisabled)("tooltipTemplate",t.tooltipTemplate)("tooltipText",t.tooltipText))},directives:function(){return[C3,c9]},styles:[".ngx-charts{float:left;overflow:visible}.ngx-charts .arc,.ngx-charts .bar,.ngx-charts .circle{cursor:pointer}.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .card.active,.ngx-charts .card:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .arc:focus,.ngx-charts .bar:focus,.ngx-charts .card:focus,.ngx-charts .cell:focus{outline:0}.ngx-charts .arc.hidden,.ngx-charts .bar.hidden,.ngx-charts .card.hidden,.ngx-charts .cell.hidden{display:none}.ngx-charts g:focus{outline:0}.ngx-charts .area-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .line-series.inactive,.ngx-charts .polar-series-area.inactive,.ngx-charts .polar-series-path.inactive{transition:opacity .1s ease-in-out;opacity:.2}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{stroke:#ddd;stroke-width:1;fill:none}.ngx-charts .refline-path{stroke:#a8b2c7;stroke-width:1;stroke-dasharray:5;stroke-dashoffset:5}.ngx-charts .refline-label{font-size:9px}.ngx-charts .reference-area{fill-opacity:.05;fill:#000}.ngx-charts .gridline-path-dotted{stroke:#ddd;stroke-width:1;fill:none;stroke-dasharray:1,20;stroke-dashoffset:3}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:rgba(0,0,0,.05)}",".pie-label{font-size:11px}.pie-label.animation{-webkit-animation:750ms ease-in fadeIn;animation:750ms ease-in fadeIn}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.pie-label-line{stroke-dasharray:100%}.pie-label-line.animation{-webkit-animation:3s linear drawOut;animation:3s linear drawOut;transition:d 750ms}@-webkit-keyframes drawOut{from{stroke-dashoffset:100%}to{stroke-dashoffset:0}}@keyframes drawOut{from{stroke-dashoffset:100%}to{stroke-dashoffset:0}}"],encapsulation:2,changeDetection:0}),a9),c9=((r9=function(){function e(){_classCallCheck(this,e),this.series=[],this.innerRadius=60,this.outerRadius=80,this.trimLabels=!0,this.maxLabelLength=10,this.tooltipDisabled=!1,this.animations=!0,this.select=new fl,this.activate=new fl,this.deactivate=new fl,this.dblclick=new fl}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.update()}},{key:"update",value:function(){var e=function(){var e=E1,t=T1,n=null,r=e1(0),a=e1(g1),i=e1(0);function o(o){var s,u,l,c,h,f=o.length,d=0,p=new Array(f),m=new Array(f),v=+r.apply(this,arguments),y=Math.min(g1,Math.max(-g1,a.apply(this,arguments)-v)),g=Math.min(Math.abs(y)/f,i.apply(this,arguments)),_=g*(y<0?-1:1);for(s=0;s<f;++s)(h=m[p[s]=s]=+e(o[s],s,o))>0&&(d+=h);for(null!=t?p.sort((function(e,n){return t(m[e],m[n])})):null!=n&&p.sort((function(e,t){return n(o[e],o[t])})),s=0,l=d?(y-f*_)/d:0;s<f;++s,v=c)m[u=p[s]]={data:o[u],index:s,value:h=m[u],startAngle:v,endAngle:c=v+(h>0?h*l:0)+_,padAngle:g};return m}return o.value=function(t){return arguments.length?(e="function"==typeof t?t:e1(+t),o):e},o.sortValues=function(e){return arguments.length?(t=e,n=null,o):t},o.sort=function(e){return arguments.length?(n=e,t=null,o):n},o.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:e1(+e),o):r},o.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:e1(+e),o):a},o.padAngle=function(e){return arguments.length?(i="function"==typeof e?e:e1(+e),o):i},o}().value((function(e){return e.value})).sort(null)(this.series);this.max=V0(e,(function(e){return e.value})),this.data=this.calculateLabelPositions(e),this.tooltipText=this.tooltipText||this.defaultTooltipText}},{key:"midAngle",value:function(e){return e.startAngle+(e.endAngle-e.startAngle)/2}},{key:"outerArc",value:function(){return A1().innerRadius(1.5*this.outerRadius).outerRadius(1.5*this.outerRadius)}},{key:"calculateLabelPositions",value:function(e){var t=this,n=e;n.forEach((function(e){e.pos=t.outerArc().centroid(e),e.pos[0]=1.5*t.outerRadius*(t.midAngle(e)<Math.PI?1:-1)}));for(var r=0;r<n.length-1;r++){var a=n[r];if(this.labelVisible(a))for(var i=r+1;i<n.length;i++){var o=n[i];if(this.labelVisible(o)&&o.pos[0]*a.pos[0]>0){var s=10-Math.abs(o.pos[1]-a.pos[1]);s>0&&(o.pos[1]+=Math.sign(o.pos[0])*s)}}}return n}},{key:"labelVisible",value:function(e){return this.showLabels&&e.endAngle-e.startAngle>Math.PI/30}},{key:"getTooltipTitle",value:function(e){return this.tooltipTemplate?void 0:this.tooltipText(e)}},{key:"labelText",value:function(e){return this.labelFormatting?this.labelFormatting(e.data.name):this.label(e)}},{key:"label",value:function(e){return X3(e.data.name)}},{key:"defaultTooltipText",value:function(e){var t=this.label(e),n=X3(e.data.value);return'\n      <span class="tooltip-label">'.concat(K3(t),'</span>\n      <span class="tooltip-val">').concat(n,"</span>\n    ")}},{key:"color",value:function(e){return this.colors.getColor(this.label(e))}},{key:"trackBy",value:function(e,t){return t.data.name}},{key:"onClick",value:function(e){this.select.emit(e)}},{key:"isActive",value:function(e){return!!this.activeEntries&&void 0!==this.activeEntries.find((function(t){return e.name===t.name&&e.series===t.series}))}}]),e}()).\u0275fac=function(e){return new(e||r9)},r9.\u0275cmp=Yt({type:r9,selectors:[["g","ngx-charts-pie-series",""]],inputs:{series:"series",innerRadius:"innerRadius",outerRadius:"outerRadius",trimLabels:"trimLabels",maxLabelLength:"maxLabelLength",tooltipDisabled:"tooltipDisabled",animations:"animations",tooltipText:"tooltipText",colors:"colors",dims:"dims",explodeSlices:"explodeSlices",showLabels:"showLabels",gradient:"gradient",activeEntries:"activeEntries",labelFormatting:"labelFormatting",tooltipTemplate:"tooltipTemplate"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",dblclick:"dblclick"},features:[ou],attrs:o3,decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-pie-label","",3,"data","radius","color","label","labelTrim","labelTrimSize","max","value","explodeSlices","animations",4,"ngIf"],["ngx-charts-pie-arc","","ngx-tooltip","",3,"startAngle","endAngle","innerRadius","outerRadius","fill","value","gradient","data","max","explodeSlices","isActive","animate","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate","dblclick"],["ngx-charts-pie-label","",3,"data","radius","color","label","labelTrim","labelTrimSize","max","value","explodeSlices","animations"]],template:function(e,t){1&e&&ns(0,u3,3,19,"g",0),2&e&&ss("ngForOf",t.data)("ngForTrackBy",t.trackBy)},directives:[mh,yh,u9,G3,s9],encapsulation:2,changeDetection:0}),r9),h9=((n9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:n9}),n9.\u0275inj=Ke({factory:function(e){return new(e||n9)},imports:[[w4]]}),n9),f9=((t9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:t9}),t9.\u0275inj=Ke({factory:function(e){return new(e||t9)},imports:[[w4,h9,Z4]]}),t9),d9=((e9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:e9}),e9.\u0275inj=Ke({factory:function(e){return new(e||e9)},imports:[[w4]]}),e9),p9=(($4=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:$4}),$4.\u0275inj=Ke({factory:function(e){return new(e||$4)},imports:[[w4]]}),$4),m9=((Q4=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:Q4}),Q4.\u0275inj=Ke({factory:function(e){return new(e||Q4)},imports:[[w4,h9,j4]]}),Q4),v9=((Y4=function e(){_classCallCheck(this,e),"undefined"!=typeof SVGElement&&void 0===SVGElement.prototype.contains&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}).\u0275mod=tn({type:Y4}),Y4.\u0275inj=Ke({factory:function(e){return new(e||Y4)},imports:[w4,z4,j4,H4,G4,Z4,f9,d9,h9,p9,m9]}),Y4),y9=qr(W4),g9=qr(X4),_9=qr(l9);function b9(e,t){if(1&e&&(nr(),hs(0,"circle",3)),2&e){var n=ws();Ms("animation-name","mat-progress-spinner-stroke-rotate-"+n.diameter)("stroke-dashoffset",n._strokeDashOffset,"px")("stroke-dasharray",n._strokeCircumference,"px")("stroke-width",n._circleStrokeWidth,"%"),es("r",n._circleRadius)}}function x9(e,t){if(1&e&&(nr(),hs(0,"circle",3)),2&e){var n=ws();Ms("stroke-dashoffset",n._strokeDashOffset,"px")("stroke-dasharray",n._strokeCircumference,"px")("stroke-width",n._circleStrokeWidth,"%"),es("r",n._circleRadius)}}function w9(e,t){if(1&e&&(nr(),hs(0,"circle",3)),2&e){var n=ws();Ms("animation-name","mat-progress-spinner-stroke-rotate-"+n.diameter)("stroke-dashoffset",n._strokeDashOffset,"px")("stroke-dasharray",n._strokeCircumference,"px")("stroke-width",n._circleStrokeWidth,"%"),es("r",n._circleRadius)}}function k9(e,t){if(1&e&&(nr(),hs(0,"circle",3)),2&e){var n=ws();Ms("stroke-dashoffset",n._strokeDashOffset,"px")("stroke-dasharray",n._strokeCircumference,"px")("stroke-width",n._circleStrokeWidth,"%"),es("r",n._circleRadius)}}var C9,S9,I9,D9=GW((function e(t){_classCallCheck(this,e),this._elementRef=t}),"primary"),A9=new kt("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}}),T9=((I9=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o){var s;_classCallCheck(this,n),(s=t.call(this,e))._elementRef=e,s._document=a,s._diameter=100,s._value=0,s._fallbackAnimation=!1,s.mode="determinate";var u=n._diameters;return u.has(a.head)||u.set(a.head,new Set([100])),s._fallbackAnimation=r.EDGE||r.TRIDENT,s._noopAnimations="NoopAnimations"===i&&!!o&&!o._forceAnimations,o&&(o.diameter&&(s.diameter=o.diameter),o.strokeWidth&&(s.strokeWidth=o.strokeWidth)),s}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this._elementRef.nativeElement;this._styleRoot=qF(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate".concat(this._fallbackAnimation?"-fallback":"","-animation"))}},{key:"_attachStyleNode",value:function(){var e=this._styleRoot,t=this._diameter,r=n._diameters,a=r.get(e);if(!a||!a.has(t)){var i=this._document.createElement("style");i.setAttribute("mat-spinner-animation",t+""),i.textContent=this._getAnimationText(),e.appendChild(i),a||(a=new Set,r.set(e,a)),a.add(t)}}},{key:"_getAnimationText",value:function(){return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,"".concat(.95*this._strokeCircumference)).replace(/END_VALUE/g,"".concat(.2*this._strokeCircumference)).replace(/DIAMETER/g,"".concat(this.diameter))}},{key:"diameter",get:function(){return this._diameter},set:function(e){this._diameter=UF(e),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}},{key:"strokeWidth",get:function(){return this._strokeWidth||this.diameter/10},set:function(e){this._strokeWidth=UF(e)}},{key:"value",get:function(){return"determinate"===this.mode?this._value:0},set:function(e){this._value=Math.max(0,Math.min(100,UF(e)))}},{key:"_circleRadius",get:function(){return(this.diameter-10)/2}},{key:"_viewBox",get:function(){var e=2*this._circleRadius+this.strokeWidth;return"0 0 ".concat(e," ").concat(e)}},{key:"_strokeCircumference",get:function(){return 2*Math.PI*this._circleRadius}},{key:"_strokeDashOffset",get:function(){return"determinate"===this.mode?this._strokeCircumference*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._strokeCircumference:null}},{key:"_circleStrokeWidth",get:function(){return this.strokeWidth/this.diameter*100}}]),n}(D9)).\u0275fac=function(e){return new(e||I9)(as(bu),as(PF),as(Fc,8),as(NW,8),as(A9))},I9.\u0275cmp=Yt({type:I9,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(es("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),Ms("width",t.diameter,"px")("height",t.diameter,"px"),Ns("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[eu],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(nr(),ls(0,"svg",0),ns(1,b9,1,9,"circle",1),ns(2,x9,1,7,"circle",2),cs()),2&e&&(Ms("width",t.diameter,"px")("height",t.diameter,"px"),ss("ngSwitch","indeterminate"===t.mode),es("viewBox",t._viewBox),Ka(1),ss("ngSwitchCase",!0),Ka(1),ss("ngSwitchCase",!1))},directives:[Oh,Mh],styles:[".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),I9._diameters=new WeakMap,I9),E9=((S9=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o){var s;return _classCallCheck(this,n),(s=t.call(this,e,r,a,i,o)).mode="indeterminate",s}return n}(T9)).\u0275fac=function(e){return new(e||S9)(as(bu),as(PF),as(Fc,8),as(NW,8),as(A9))},S9.\u0275cmp=Yt({type:S9,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(e,t){2&e&&(Ms("width",t.diameter,"px")("height",t.diameter,"px"),Ns("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color"},features:[eu],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(nr(),ls(0,"svg",0),ns(1,w9,1,9,"circle",1),ns(2,k9,1,7,"circle",2),cs()),2&e&&(Ms("width",t.diameter,"px")("height",t.diameter,"px"),ss("ngSwitch","indeterminate"===t.mode),es("viewBox",t._viewBox),Ka(1),ss("ngSwitchCase",!0),Ka(1),ss("ngSwitchCase",!1))},directives:[Oh,Mh],styles:[".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),S9),R9=((C9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:C9}),C9.\u0275inj=Ke({factory:function(e){return new(e||C9)},imports:[[jW,Lh],jW]}),C9);function O9(e,t){if(1&e){var n=ps();ls(0,"div",12),ls(1,"ngx-charts-pie-chart",20),ys("select",(function(e){return Mn(n),ws(2).selected(e)})),cs(),cs()}if(2&e){var r=ws(2);Ka(1),ss("view",r.view)("scheme",r.colorScheme)("results",r.single)}}function M9(e,t){if(1&e){var n=ps();ls(0,"div",12),ls(1,"ngx-charts-bar-vertical",21),ys("select",(function(e){return Mn(n),ws(2).selected(e)})),cs(),cs()}if(2&e){var r=ws(2);Ka(1),ss("view",r.view)("scheme",r.colorScheme)("results",r.single)}}function N9(e,t){if(1&e){var n=ps();ls(0,"div"),ls(1,"div",12),ls(2,"div",13),ls(3,"div",14),ls(4,"h1"),Gs(5),cs(),ls(6,"mat-slider",15,16),ys("input",(function(e){return Mn(n),ws().changeDate(e)})),cs(),cs(),cs(),ls(8,"div",17),ls(9,"div"),ls(10,"h3"),Gs(11),cs(),cs(),cs(),cs(),ls(12,"button",18),ys("click",(function(){return Mn(n),ws().changeView()})),Gs(13," change view "),cs(),ns(14,O9,2,3,"div",19),ns(15,M9,2,3,"div",19),cs()}if(2&e){var r=rs(7),a=ws();Ka(5),Js(a.byDate[0][0].query),Ka(1),ss("displayWith",a.formatLabel)("value",r),Ka(5),Js(a.byDate[a.sliderIndex][0].date),Ka(3),ss("ngIf",a.viewValue),Ka(1),ss("ngIf",!a.viewValue)}}function P9(e,t){if(1&e){var n=ps();ls(0,"mat-tab",22),ls(1,"button",23),ys("click",(function(){return Mn(n),ws().changeSelect()})),ls(2,"span"),Gs(3,"\xd7"),cs(),cs(),ls(4,"h1",24),Gs(5),cs(),ls(6,"button",18),ys("click",(function(){return Mn(n),ws().onAnalyze()})),Gs(7," Predict next 3 months "),cs(),hs(8,"br"),hs(9,"ngx-charts-line-chart",25),cs()}if(2&e){var r=ws();Ka(5),Ks("",r.sentData[0].series[0].query," popularity in ",r.sentData[0].name,""),Ka(4),ss("view",r.view)("scheme",r.colorScheme)("results",r.data)}}function F9(e,t){1&e&&hs(0,"mat-spinner",26),2&e&&ss("diameter",150)}var L9,z9,B9,W9,q9,V9,U9,j9,H9,G9,J9,X9,K9,Z9,Y9,Q9,$9=((L9=function(){function e(t,n){_classCallCheck(this,e),this.SidebarService=t,this.tensorflowService=n,this.select=!1,this.view=[.37*window.innerWidth,.7*window.innerHeight],this.viewValue=!0,this.showLegend=!0,this.showLabels=!0,this.colorScheme={domain:["#FF6633","#FFB399","#FF33FF","#FFFF99","#00B3E6","#E6B333","#3366E6","#999966","#99FF99","#B34D4D","#80B300","#809900","#E6B3B3","#6680B3","#66991A","#FF99E6","#CCFF1A","#FF1A66","#E6331A","#33FFCC","#66994D","#B366CC","#4D8000","#B33300","#CC80CC","#66664D","#991AFF","#E666FF","#4DB3FF","#1AB399","#E666B3","#33991A","#CC9999","#B3B31A","#00E680","#4D8066","#809980","#E6FF80","#1AFF33","#999933","#FF3380","#CCCC00","#66E64D","#4D80CC","#9900B3","#E64D66","#4DB380","#FF4D4D","#99E6E6","#6666FF"]},this.byDate=[],this.original=[],this.sliderIndex=0,this.sentData=[]}return _createClass(e,[{key:"changeDate",value:function(e){this.single=this.byDate[this.sliderIndex],this.SidebarService.getCountriesData(e.value)}},{key:"changeView",value:function(){this.viewValue=!this.viewValue,console.log(this.viewValue)}},{key:"ngOnInit",value:function(){var e=this;this.arraybyDate=this.SidebarService.byDate.subscribe((function(t){e.byDate=t,e.single=e.byDate[0]})),this.isLoading=this.SidebarService.Loading.subscribe((function(t){return e.loading=t})),this.SidebarService.saveByDate(this.byDate),this.single=this.byDate[0],this.Index=this.SidebarService.sliderIndex.subscribe((function(t){return e.sliderIndex=t})),this.arrayOriginal=this.SidebarService.original.subscribe((function(t){e.original=t})),this.SidebarService.saveOriginal(this.original),this.dataSent=this.SidebarService.sentData.subscribe((function(t){e.sentData=t,e.data=e.sentData}))}},{key:"formatLabel",value:function(e){return e>=1e3?Math.round(e/1e3)+"k":e}},{key:"changeSelect",value:function(){this.select=!1}},{key:"selected",value:function(e){this.select=!0,this.SidebarService.parseSendData("string"==typeof e?e:e.name),console.log(this.sentData)}},{key:"checkLoading",value:function(){return this.loading}},{key:"ngOnDestroy",value:function(){this.Index.unsubscribe(),this.arraybyDate.unsubscribe(),this.arrayOriginal.unsubscribe(),this.isLoading.unsubscribe(),this.dataSent.unsubscribe()}},{key:"onAnalyze",value:function(){for(var e=[10,20,15],t=[{name:"CA",series:[]}],n=0;n<e.length;n++)t[0].series.push({name:(51+n+1).toString(),value:e[n]});this.sentData[0].series.reverse(),this.sentData[0].series.forEach((function(e){t[0].series.unshift(e)})),console.log(t),this.SidebarService._sentData.next(t)}}]),e}()).\u0275fac=function(e){return new(e||L9)(as(cv),as(AF))},L9.\u0275cmp=Yt({type:L9,selectors:[["app-sidebar"]],decls:16,vars:4,consts:[["autosize","",3,"hidden"],["mode","side","opened","true",1,"container-fluid"],["drawer",""],["mat-button","","id","closeBtn",1,"",3,"click"],[1,""],["label","Global"],[4,"ngIf"],["label","Country Analysis",4,"ngIf"],["id","spinner"],[3,"diameter",4,"ngIf"],["id","openBtn"],["type","button","mat-raised-button","",3,"click"],[1,"container"],[1,"row"],[1,"col-7"],["min","0","max","51",3,"displayWith","value","input"],["matslider",""],[1,"col-4"],["mat-raised-button","",3,"click"],["class","container",4,"ngIf"],["labels","true","doughnut","true","legend","true","legendTitle","countries",1,"",3,"view","scheme","results","select"],["legend","true","legendTitle","countries","xAxis","true","yAxies","false","showXAxisLabel","true","showYAxisLabel","true",1,"",3,"view","scheme","results","select"],["label","Country Analysis"],["mat-button","","label","close",3,"click"],[2,"text-align","left"],["legend","true","showXAxisLabel","true","showYAxisLabel","true","xAxis","popularity","yAxis","time(weeks)","xAxisLabel","time(weeks)","yAxisLabel","popularity","timeline","true",3,"view","scheme","results"],[3,"diameter"]],template:function(e,t){if(1&e){var n=ps();ls(0,"mat-drawer-container",0),ls(1,"mat-sidenav",1,2),ls(3,"button",3),ys("click",(function(){return Mn(n),rs(2).toggle()})),ls(4,"span"),Gs(5,"\xd7"),cs(),cs(),hs(6,"app-searchbar",4),ls(7,"mat-tab-group"),ls(8,"mat-tab",5),ns(9,N9,16,6,"div",6),cs(),ns(10,P9,10,5,"mat-tab",7),cs(),ls(11,"div",8),ns(12,F9,1,1,"mat-spinner",9),cs(),cs(),cs(),ls(13,"div",10),ls(14,"button",11),ys("click",(function(){return Mn(n),rs(2).toggle()})),Gs(15," Open Sidebar "),cs(),cs()}2&e&&(ss("hidden",!rs(2).opened),Ka(9),ss("ngIf",!t.checkLoading()),Ka(1),ss("ngIf",t.select),Ka(2),ss("ngIf",t.checkLoading()))},directives:[lV,cV,yV,aJ,$J,UJ,yh,fX,l9,W4,X4,E9],styles:["mat-drawer-container[_ngcontent-%COMP%]{height:100%;max-width:40%;min-width:600px;background-color:rgba(255,255,100,0)}#spinner[_ngcontent-%COMP%]{text-align:center}.col-6[_ngcontent-%COMP%]{padding:0}.container-fluid[_ngcontent-%COMP%]{padding-left:5px;padding-right:0}.outer[_ngcontent-%COMP%]{height:95%;position:relative}#closeBtn[_ngcontent-%COMP%]{position:absolute;right:0}#openBtn[_ngcontent-%COMP%]{position:absolute;top:0;left:0}h3[_ngcontent-%COMP%]{left:5px;text-align:left}.mat-progress-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{height:-webkit-max-content;height:-moz-max-content;height:max-content;width:-webkit-max-content;width:-moz-max-content;width:max-content}.pie-chart-container[_ngcontent-%COMP%]{height:600px;min-width:600px}.pie-label[_ngcontent-%COMP%]{font-size:14}"]}),L9),e5=[{path:"home",component:$9}],t5=((z9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:z9}),z9.\u0275inj=Ke({factory:function(e){return new(e||z9)},imports:[[Ym.forRoot(e5)],Ym]}),z9),n5=n("4ZJM"),r5=((U9=function(){function e(t){_classCallCheck(this,e),this.sidebarService=t}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.map=new n5.Map({accessToken:"pk.eyJ1IjoidHJhdmVsbmV0IiwiYSI6ImNrYjJ4bnpxZDBnMHUydG10cXJmeGNjazEifQ.Z2ajmP1ywUc77Z74VlXmWw",container:"mapbox",style:"mapbox://styles/travelnet/ckb47dkvn0dh31ila3aizjqlt",center:[-71.22,46.85],zoom:2}),this.byDateSubscription=this.sidebarService.byDate.subscribe((function(t){var n=e.byDate;e.byDate=t,JSON.stringify(n)!=JSON.stringify(e.byDate)&&n&&e.colorMap()})),this.byDateSubscription=this.sidebarService.sliderIndex.subscribe((function(t){var n=e.sliderValue;e.sliderValue=t,n!=e.sliderValue&&0!=t&&e.colorMap()}))}},{key:"colorMap",value:function(){var e=this;this.byDate[this.sliderValue].forEach((function(t){var n=t.value/100;e.map.setPaintProperty(t.name.toLowerCase(),"fill-opacity",n)}))}},{key:"ngOnDestroy",value:function(){this.byDateSubscription.unsubscribe(),this.sliderValueSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||U9)(as(cv))},U9.\u0275cmp=Yt({type:U9,selectors:[["app-map"]],decls:2,vars:0,consts:[["href","https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css","rel","stylesheet"],["id","mapbox",3,"click"]],template:function(e,t){1&e&&(hs(0,"link",0),ls(1,"div",1),ys("click",(function(){return t.colorMap()})),cs())},styles:["#mapbox[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute}body[_ngcontent-%COMP%]{margin:0;padding:0}.map-overlay[_ngcontent-%COMP%]{font:700 12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;position:absolute;width:25%;bottom:0;left:0;padding:10px}.map-overlay[_ngcontent-%COMP%]   .map-overlay-inner[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 1px 2px rgba(0,0,0,.2);border-radius:3px;padding:10px;margin-bottom:10px}.map-overlay[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin:0 0 10px}.map-overlay[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;display:inline-block;width:100%;position:relative;margin:0;cursor:ew-resize}"]}),U9),a5=((V9=function(){function e(t){_classCallCheck(this,e),this.TensorflowService=t,this.title="EnVision"}return _createClass(e,[{key:"ngAfterContentInit",value:function(){this.TensorflowService.loadModel()}}]),e}()).\u0275fac=function(e){return new(e||V9)(as(AF))},V9.\u0275cmp=Yt({type:V9,selectors:[["app-root"]],decls:8,vars:0,consts:[["lang","en"],["href","https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css","rel","stylesheet"],[1,""]],template:function(e,t){1&e&&(ls(0,"html",0),ls(1,"head"),ls(2,"title"),Gs(3,"Document"),cs(),hs(4,"link",1),cs(),ls(5,"body"),hs(6,"app-map"),hs(7,"app-sidebar",2),cs(),cs())},directives:[r5,$9],styles:["h1[_ngcontent-%COMP%]{z-index:2}body[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky}"]}),V9),i5=((q9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:q9}),q9.\u0275inj=Ke({factory:function(e){return new(e||q9)}}),q9),o5=((W9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:W9}),W9.\u0275inj=Ke({factory:function(e){return new(e||W9)},imports:[[Eq,jW,BL,i5],jW,i5]}),W9),s5=((B9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:B9}),B9.\u0275inj=Ke({factory:function(e){return new(e||B9)},imports:[[Eq,jW],jW]}),B9),u5={provide:new kt("mat-autocomplete-scroll-strategy"),deps:[uG],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},l5=((X9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:X9}),X9.\u0275inj=Ke({factory:function(e){return new(e||X9)},providers:[u5],imports:[[Uq,pG,jW,Lh],CL,Uq,jW]}),X9),c5=((J9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:J9}),J9.\u0275inj=Ke({factory:function(e){return new(e||J9)},imports:[[cz,jW],jW]}),J9),h5=((G9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:G9}),G9.\u0275inj=Ke({factory:function(e){return new(e||G9)},imports:[[pG,jW,AH],jW]}),G9),f5=((H9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:H9}),H9.\u0275inj=Ke({factory:function(e){return new(e||H9)},imports:[[jW,Eq],jW]}),H9),d5=((j9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:j9}),j9.\u0275inj=Ke({factory:function(e){return new(e||j9)},imports:[[jW],jW]}),j9),p5=new kt("mat-chips-default-options"),m5={separatorKeyCodes:[13]},v5=((Y9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:Y9}),Y9.\u0275inj=Ke({factory:function(e){return new(e||Y9)},providers:[bq,{provide:p5,useValue:m5}]}),Y9),y5=((Z9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:Z9}),Z9.\u0275inj=Ke({factory:function(e){return new(e||Z9)},imports:[[_L]]}),Z9),g5=((K9=function e(){_classCallCheck(this,e),this.changes=new le,this.optionalLabel="Optional"}).\u0275fac=function(e){return new(e||K9)},K9.\u0275prov=Xe({factory:function(){return new K9},token:K9,providedIn:"root"}),K9),_5={provide:g5,deps:[[new Ve,new je,g5]],useFactory:function(e){return e||new g5}},b5=((Q9=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:Q9}),Q9.\u0275inj=Ke({factory:function(e){return new(e||Q9)},providers:[_5,bq],imports:[[jW,Lh,AH,gV,y5,eJ,Eq],jW]}),Q9);function x5(e,t){}var w5=function e(){_classCallCheck(this,e),this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0},k5={dialogContainer:dz("dialogContainer",[yz("void, exit",vz({opacity:0,transform:"scale(0.7)"})),yz("enter",vz({transform:"none"})),gz("* => enter",pz("150ms cubic-bezier(0, 0, 0.2, 1)",vz({transform:"none",opacity:1}))),gz("* => void, * => exit",pz("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",vz({opacity:0})))])};function C5(){throw Error("Attempting to attach dialog content after content is already attached")}var S5,I5,D5,A5,T5,E5,R5,O5,M5,N5,P5,F5,L5,z5,B5,W5,q5,V5,U5,j5,H5,G5,J5,X5,K5,Z5,Y5,Q5,$5,e6,t6=((S5=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,i,o){var s;return _classCallCheck(this,n),(s=t.call(this))._elementRef=e,s._focusTrapFactory=r,s._changeDetectorRef=a,s._config=o,s._elementFocusedBeforeDialogWasOpened=null,s._state="enter",s._animationStateChanged=new fl,s.attachDomPortal=function(e){return s._portalOutlet.hasAttached()&&C5(),s._setupFocusTrap(),s._portalOutlet.attachDomPortal(e)},s._ariaLabelledBy=o.ariaLabelledBy||null,s._document=i,s}return _createClass(n,[{key:"attachComponentPortal",value:function(e){return this._portalOutlet.hasAttached()&&C5(),this._setupFocusTrap(),this._portalOutlet.attachComponentPortal(e)}},{key:"attachTemplatePortal",value:function(e){return this._portalOutlet.hasAttached()&&C5(),this._setupFocusTrap(),this._portalOutlet.attachTemplatePortal(e)}},{key:"_recaptureFocus",value:function(){this._containsFocus()||this._focusTrap.focusInitialElement()||this._elementRef.nativeElement.focus()}},{key:"_trapFocus",value:function(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}},{key:"_restoreFocus",value:function(){var e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){var t=this._document.activeElement,n=this._elementRef.nativeElement;t&&t!==this._document.body&&t!==n&&!n.contains(t)||e.focus()}this._focusTrap&&this._focusTrap.destroy()}},{key:"_setupFocusTrap",value:function(){var e=this;this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)),this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then((function(){return e._elementRef.nativeElement.focus()})))}},{key:"_containsFocus",value:function(){var e=this._elementRef.nativeElement,t=this._document.activeElement;return e===t||e.contains(t)}},{key:"_onAnimationDone",value:function(e){"enter"===e.toState?this._trapFocus():"exit"===e.toState&&this._restoreFocus(),this._animationStateChanged.emit(e)}},{key:"_onAnimationStart",value:function(e){this._animationStateChanged.emit(e)}},{key:"_startExitAnimation",value:function(){this._state="exit",this._changeDetectorRef.markForCheck()}}]),n}(xH)).\u0275fac=function(e){return new(e||S5)(as(bu),as(XL),as(Co),as(Fc,8),as(w5))},S5.\u0275cmp=Yt({type:S5,selectors:[["mat-dialog-container"]],viewQuery:function(e,t){var n;1&e&&Cl(SH,!0),2&e&&kl(n=El())&&(t._portalOutlet=n.first)},hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,t){1&e&&gs("@dialogContainer.start",(function(e){return t._onAnimationStart(e)}))("@dialogContainer.done",(function(e){return t._onAnimationDone(e)})),2&e&&(es("id",t._id)("role",t._config.role)("aria-labelledby",t._config.ariaLabel?null:t._ariaLabelledBy)("aria-label",t._config.ariaLabel)("aria-describedby",t._config.ariaDescribedBy||null),Qs("@dialogContainer",t._state))},features:[eu],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,t){1&e&&ns(0,x5,0,0,"ng-template",0)},directives:[SH],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[k5.dialogContainer]}}),S5),n6=0,r6=function(){function e(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mat-dialog-".concat(n6++);_classCallCheck(this,e),this._overlayRef=t,this._containerInstance=n,this.id=a,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new le,this._afterClosed=new le,this._beforeClosed=new le,this._state=0,n._id=a,n._animationStateChanged.pipe(Of((function(e){return"done"===e.phaseName&&"enter"===e.toState})),Zf(1)).subscribe((function(){r._afterOpened.next(),r._afterOpened.complete()})),n._animationStateChanged.pipe(Of((function(e){return"done"===e.phaseName&&"exit"===e.toState})),Zf(1)).subscribe((function(){clearTimeout(r._closeFallbackTimeout),r._finishDialogClose()})),t.detachments().subscribe((function(){r._beforeClosed.next(r._result),r._beforeClosed.complete(),r._afterClosed.next(r._result),r._afterClosed.complete(),r.componentInstance=null,r._overlayRef.dispose()})),t.keydownEvents().pipe(Of((function(e){return 27===e.keyCode&&!r.disableClose&&!IL(e)}))).subscribe((function(e){e.preventDefault(),r.close()})),t.backdropClick().subscribe((function(){r.disableClose?r._containerInstance._recaptureFocus():r.close()}))}return _createClass(e,[{key:"close",value:function(e){var t=this;this._result=e,this._containerInstance._animationStateChanged.pipe(Of((function(e){return"start"===e.phaseName})),Zf(1)).subscribe((function(n){t._beforeClosed.next(e),t._beforeClosed.complete(),t._overlayRef.detachBackdrop(),t._closeFallbackTimeout=setTimeout((function(){return t._finishDialogClose()}),n.totalTime+100)})),this._containerInstance._startExitAnimation(),this._state=1}},{key:"afterOpened",value:function(){return this._afterOpened.asObservable()}},{key:"afterClosed",value:function(){return this._afterClosed.asObservable()}},{key:"beforeClosed",value:function(){return this._beforeClosed.asObservable()}},{key:"backdropClick",value:function(){return this._overlayRef.backdropClick()}},{key:"keydownEvents",value:function(){return this._overlayRef.keydownEvents()}},{key:"updatePosition",value:function(e){var t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}},{key:"updateSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._getPositionStrategy().width(e).height(t),this._overlayRef.updatePosition(),this}},{key:"addPanelClass",value:function(e){return this._overlayRef.addPanelClass(e),this}},{key:"removePanelClass",value:function(e){return this._overlayRef.removePanelClass(e),this}},{key:"getState",value:function(){return this._state}},{key:"_finishDialogClose",value:function(){this._state=2,this._overlayRef.dispose()}},{key:"_getPositionStrategy",value:function(){return this._overlayRef.getConfig().positionStrategy}}]),e}(),a6=new kt("MatDialogData"),i6=new kt("mat-dialog-default-options"),o6=new kt("mat-dialog-scroll-strategy"),s6={provide:o6,deps:[uG],useFactory:function(e){return function(){return e.scrollStrategies.block()}}},u6=((A5=function(){function e(t,n,r,a,i,o,s){var u=this;_classCallCheck(this,e),this._overlay=t,this._injector=n,this._defaultOptions=a,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new le,this._afterOpenedAtThisLevel=new le,this._ariaHiddenElements=new Map,this.afterAllClosed=Ef((function(){return u.openDialogs.length?u._afterAllClosed:u._afterAllClosed.pipe(od(void 0))})),this._scrollStrategy=i}return _createClass(e,[{key:"open",value:function(e,t){var n=this;if((t=function(e,t){return Object.assign(Object.assign({},t),e)}(t,this._defaultOptions||new w5)).id&&this.getDialogById(t.id))throw Error('Dialog with id "'.concat(t.id,'" exists already. The dialog id must be unique.'));var r=this._createOverlay(t),a=this._attachDialogContainer(r,t),i=this._attachDialogContent(e,a,r,t);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(i),i.afterClosed().subscribe((function(){return n._removeOpenDialog(i)})),this.afterOpened.next(i),i}},{key:"closeAll",value:function(){this._closeDialogs(this.openDialogs)}},{key:"getDialogById",value:function(e){return this.openDialogs.find((function(t){return t.id===e}))}},{key:"ngOnDestroy",value:function(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}},{key:"_createOverlay",value:function(e){var t=this._getOverlayConfig(e);return this._overlay.create(t)}},{key:"_getOverlayConfig",value:function(e){var t=new zH({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(t.backdropClass=e.backdropClass),t}},{key:"_attachDialogContainer",value:function(e,t){var n=Wo.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:w5,useValue:t}]}),r=new gH(t6,t.viewContainerRef,n,t.componentFactoryResolver);return e.attach(r).instance}},{key:"_attachDialogContent",value:function(e,t,n,r){var a=new r6(n,t,r.id);if(e instanceof ju)t.attachTemplatePortal(new _H(e,null,{$implicit:r.data,dialogRef:a}));else{var i=this._createInjector(r,a,t),o=t.attachComponentPortal(new gH(e,r.viewContainerRef,i));a.componentInstance=o.instance}return a.updateSize(r.width,r.height).updatePosition(r.position),a}},{key:"_createInjector",value:function(e,t,n){var r=e&&e.viewContainerRef&&e.viewContainerRef.injector,a=[{provide:t6,useValue:n},{provide:a6,useValue:e.data},{provide:r6,useValue:t}];return!e.direction||r&&r.get(gL,null)||a.push({provide:gL,useValue:{value:e.direction,change:wf()}}),Wo.create({parent:r||this._injector,providers:a})}},{key:"_removeOpenDialog",value:function(e){var t=this.openDialogs.indexOf(e);t>-1&&(this.openDialogs.splice(t,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((function(e,t){e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")})),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))}},{key:"_hideNonDialogContentFromAssistiveTechnology",value:function(){var e=this._overlayContainer.getContainerElement();if(e.parentElement)for(var t=e.parentElement.children,n=t.length-1;n>-1;n--){var r=t[n];r===e||"SCRIPT"===r.nodeName||"STYLE"===r.nodeName||r.hasAttribute("aria-live")||(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}},{key:"_closeDialogs",value:function(e){for(var t=e.length;t--;)e[t].close()}},{key:"openDialogs",get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}},{key:"afterOpened",get:function(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}},{key:"_afterAllClosed",get:function(){var e=this._parentDialog;return e?e._afterAllClosed:this._afterAllClosedAtThisLevel}}]),e}()).\u0275fac=function(e){return new(e||A5)(Ot(uG),Ot(Wo),Ot(nh,8),Ot(i6,8),Ot(o6),Ot(A5,12),Ot(JH))},A5.\u0275prov=Xe({token:A5,factory:A5.\u0275fac}),A5),l6=((D5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:D5}),D5.\u0275inj=Ke({factory:function(e){return new(e||D5)},providers:[u6,s6],imports:[[pG,AH,jW],jW]}),D5),c6=((I5=function(){function e(){_classCallCheck(this,e),this.changes=new le,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 20 years",this.nextMultiYearLabel="Next 20 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}return _createClass(e,[{key:"formatYearRange",value:function(e,t){return"".concat(e," \u2013 ").concat(t)}}]),e}()).\u0275fac=function(e){return new(e||I5)},I5.\u0275prov=Xe({factory:function(){return new I5},token:I5,providedIn:"root"}),I5),h6={provide:new kt("mat-datepicker-scroll-strategy"),deps:[uG],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},f6=((N5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:N5}),N5.\u0275inj=Ke({factory:function(e){return new(e||N5)},providers:[c6,h6],imports:[[Lh,gV,l6,pG,cz,AH],CL]}),N5),d6=((M5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:M5}),M5.\u0275inj=Ke({factory:function(e){return new(e||M5)},imports:[[jW],jW]}),M5),p6=((O5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:O5}),O5.\u0275inj=Ke({factory:function(e){return new(e||O5)}}),O5),m6=((R5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:R5}),R5.\u0275inj=Ke({factory:function(e){return new(e||R5)},imports:[[Lh,p6,AH]]}),R5),v6=((E5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:E5}),E5.\u0275inj=Ke({factory:function(e){return new(e||E5)},imports:[[xq,jW],xq,jW]}),E5),y6=((T5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:T5}),T5.\u0275inj=Ke({factory:function(e){return new(e||T5)},imports:[[xq,Eq,jW,Oq,Lh],xq,jW,Oq,d6]}),T5),g6={provide:new kt("mat-menu-scroll-strategy"),deps:[uG],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},_6=((F5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:F5}),F5.\u0275inj=Ke({factory:function(e){return new(e||F5)},providers:[g6],imports:[jW]}),F5),b6=((P5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:P5}),P5.\u0275inj=Ke({factory:function(e){return new(e||P5)},providers:[g6],imports:[[Lh,jW,Eq,pG,_6],CL,jW,_6]}),P5),x6={provide:new kt("mat-tooltip-scroll-strategy"),deps:[uG],useFactory:function(e){return function(){return e.scrollStrategies.reposition({scrollThrottle:20})}}},w6=((z5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:z5}),z5.\u0275inj=Ke({factory:function(e){return new(e||z5)},providers:[x6],imports:[[cz,Lh,pG,jW],jW,CL]}),z5),k6=((L5=function e(){_classCallCheck(this,e),this.changes=new le,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=function(e,t,n){if(0==n||0==t)return"0 of ".concat(n);var r=e*t;return"".concat(r+1," \u2013 ").concat(r<(n=Math.max(n,0))?Math.min(r+t,n):r+t," of ").concat(n)}}).\u0275fac=function(e){return new(e||L5)},L5.\u0275prov=Xe({factory:function(){return new L5},token:L5,providedIn:"root"}),L5),C6={provide:k6,deps:[[new Ve,new je,k6]],useFactory:function(e){return e||new k6}},S6=((j5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:j5}),j5.\u0275inj=Ke({factory:function(e){return new(e||j5)},providers:[C6],imports:[[Lh,gV,FG,w6]]}),j5),I6=((U5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:U5}),U5.\u0275inj=Ke({factory:function(e){return new(e||U5)},imports:[[Lh,jW],jW]}),U5),D6=((V5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:V5}),V5.\u0275inj=Ke({factory:function(e){return new(e||V5)}}),V5),A6=((q5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:q5}),q5.\u0275inj=Ke({factory:function(e){return new(e||q5)},imports:[[D6,Eq,jW,BL],D6,jW]}),q5),T6=((W5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:W5}),W5.\u0275inj=Ke({factory:function(e){return new(e||W5)},imports:[[pG,AH,Lh,gV,jW],jW]}),W5),E6=((B5=function e(){_classCallCheck(this,e),this.changes=new le,this.sortButtonLabel=function(e){return"Change sorting for ".concat(e)}}).\u0275fac=function(e){return new(e||B5)},B5.\u0275prov=Xe({factory:function(){return new B5},token:B5,providedIn:"root"}),B5),R6={provide:E6,deps:[[new Ve,new je,E6]],useFactory:function(e){return e||new E6}},O6=((Y5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:Y5}),Y5.\u0275inj=Ke({factory:function(e){return new(e||Y5)},providers:[R6],imports:[[Lh]]}),Y5),M6=((Z5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:Z5}),Z5.\u0275inj=Ke({factory:function(e){return new(e||Z5)}}),Z5),N6=((K5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:K5}),K5.\u0275inj=Ke({factory:function(e){return new(e||K5)},imports:[[M6,jW],jW]}),K5),P6=((X5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:X5}),X5.\u0275inj=Ke({factory:function(e){return new(e||X5)},imports:[[jW],jW]}),X5),F6=((J5=function e(t){_classCallCheck(this,e),this.template=t}).\u0275fac=function(e){return new(e||J5)(as(ju))},J5.\u0275dir=rn({type:J5,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),J5),L6=((G5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:G5}),G5.\u0275inj=Ke({factory:function(e){return new(e||G5)},providers:[rz,F6]}),G5),z6=((H5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:H5}),H5.\u0275inj=Ke({factory:function(e){return new(e||H5)},imports:[[L6,jW],jW]}),H5),B6=function(){return"undefined"!=typeof document},W6=function(e){return e&&e.observers.length>0},q6=function(){function e(t){_classCallCheck(this,e),this.resizeBatchService=t,this.resize=new fl,this.acceptedSize=!1,this.state=0}return _createClass(e,[{key:"acceptSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.measure();this.lastWidth=e.width,this.lastHeight=e.height,this.acceptedSize=!0}},{key:"checkChanges",value:function(){B6()&&0===this.state&&(this.state=1,this.resizeBatchService.schedule(this,this.init))}},{key:"destroy",value:function(){this.resizeBatchService.cancel(this)}},{key:"checkSize",value:function(){if(this.parentElement){var e=this.measure(),t=e.width,n=e.height;return t===this.lastWidth&&n===this.lastHeight?void 0:(this.lastWidth=t,this.lastHeight=n,this.acceptedSize=!1,this.resize.emit(),!0)}}},{key:"initSize",value:function(){var e=this.measure();this.lastWidth=e.width,this.lastHeight=e.height}},{key:"measure",value:function(){var e=0,t=0;return this.parentElement&&(t=this.parentElement.offsetHeight,e=this.parentElement.offsetWidth),{height:t,width:e}}}]),e}(),V6=function(e){var t=document.createElement("div");return t.style.cssText=e,t},U6="position: absolute; display: block; left: 0; top: 0; right: 0; bottom: 0; z-index: -1;overflow: hidden; visibility: hidden;",j6=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).element=r,i.ngZone=a,i}return _createClass(n,[{key:"checkChanges",value:function(){2!==this.state?_get(_getPrototypeOf(n.prototype),"checkChanges",this).call(this):this.resizeBatchService.isScheduled(this)||this.resizeBatchService.schedule(this,this.checkSize)}},{key:"destroy",value:function(){if(_get(_getPrototypeOf(n.prototype),"destroy",this).call(this),this.subscription&&this.subscription.unsubscribe(),this.expand){var e=this.element.nativeElement;e.removeChild(this.expand),e.removeChild(this.shrink),this.expand.removeChild(this.expandChild),this.expand=this.expandChild=this.shrink=this.element=null}}},{key:"checkSize",value:function(){if(_get(_getPrototypeOf(n.prototype),"checkSize",this).call(this))return this.reset(),!0}},{key:"init",value:function(){var e=this.parentElement=this.element.nativeElement.parentElement;"static"===getComputedStyle(e,null).getPropertyValue("position")&&(e.style.position="relative"),this.state=2,this.render(),this.reset(),this.initSize(),this.subscribe()}},{key:"render",value:function(){var e=this.element.nativeElement;e.style.cssText=U6,e.setAttribute("dir","ltr"),this.expand=V6(U6),this.expandChild=V6("position: absolute; left: 0; top: 0; transition: 0s;"),this.expand.appendChild(this.expandChild),e.appendChild(this.expand),this.shrink=V6(U6);var t=V6("position: absolute; left: 0; top: 0; transition: 0s;width: 200%; height: 200%;");this.shrink.appendChild(t),e.appendChild(this.shrink)}},{key:"reset",value:function(){var e=this.expandChild;e.style.width="100000px",e.style.height="100000px";var t=this.expand;t.scrollLeft=1e5,t.scrollTop=1e5;var n=this.shrink;n.scrollLeft=1e5,n.scrollTop=1e5}},{key:"subscribe",value:function(){var e=this;this.ngZone.runOutsideAngular((function(){e.subscription=Ee(JF(e.shrink,"scroll"),JF(e.expand,"scroll")).subscribe((function(){e.checkSize()}))}))}}]),n}(q6),H6="undefined"!=typeof ResizeObserver,G6=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a){var i;return _classCallCheck(this,n),(i=t.call(this,e)).element=r,i.ngZone=a,i}return _createClass(n,[{key:"destroy",value:function(){_get(_getPrototypeOf(n.prototype),"destroy",this).call(this),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.parentElement=null}},{key:"init",value:function(){var e=this;this.parentElement=this.element.nativeElement.parentElement,this.initSize(),this.state=2,this.ngZone.runOutsideAngular((function(){e.resizeObserver=new ResizeObserver((function(){e.checkSize()})),e.resizeObserver.observe(e.parentElement)}))}}],[{key:"supported",value:function(){return H6}}]),n}(q6),J6=((e6=function(){function e(t){_classCallCheck(this,e),this.ngZone=t,this.scheduled=[],this.resolvedPromise=Promise.resolve(null),this.flush=this.flush.bind(this)}return _createClass(e,[{key:"schedule",value:function(e,t){var n=this;this.scheduled.push({instance:e,method:t}),this.subscription||this.ngZone.runOutsideAngular((function(){n.subscription=Ce(n.resolvedPromise).subscribe(n.flush)}))}},{key:"isScheduled",value:function(e){return Boolean(this.scheduled.find((function(t){return t.instance===e})))}},{key:"cancel",value:function(e){for(var t=this.scheduled,n=t.length,r=0;r<n;r++)if(t[r].instance===e)return t.splice(r,1),void(t.length||this.unsubscribe())}},{key:"ngOnDestroy",value:function(){this.unsubscribe()}},{key:"unsubscribe",value:function(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}},{key:"flush",value:function(){this.scheduled.forEach((function(e){e.method.call(e.instance)})),this.scheduled=[],this.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||e6)(Ot(rc))},e6.\u0275prov=Xe({token:e6,factory:e6.\u0275fac}),e6),X6=(($5=function(){function e(t,n,r){var a=this;_classCallCheck(this,e),this.rateLimit=10,this.resize=new fl;var i=G6.supported()?G6:j6;this.resizeService=new i(t,n,r),this.subscription=this.resizeService.resize.pipe(oL(1e3/(this.rateLimit||10))).subscribe((function(){a.resizeService.acceptedSize||a.resize.emit()}))}return _createClass(e,[{key:"ngAfterViewChecked",value:function(){this.resizeService.checkChanges()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe(),this.resizeService.destroy()}},{key:"acceptSize",value:function(e){this.resizeService.acceptSize(e)}}]),e}()).\u0275fac=function(e){return new(e||$5)(as(J6),as(bu),as(rc))},$5.\u0275cmp=Yt({type:$5,selectors:[["kendo-resize-sensor"]],inputs:{rateLimit:"rateLimit"},outputs:{resize:"resize"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),$5),K6=((Q5=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:Q5}),Q5.\u0275inj=Ke({factory:function(e){return new(e||Q5)},providers:[J6]}),Q5);function Z6(e){return e.ownerDocument||e.document||e}var Y6=function(e){return Z6(e).defaultView},Q6=function(e){return Z6(e).documentElement},$6=0;function e8(){if(!$6&&"undefined"!=typeof document){var e=document.createElement("div");e.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",e.innerHTML="&nbsp;",document.body.appendChild(e),$6=e.offsetWidth-e.scrollWidth,document.body.removeChild(e)}return $6}function t8(e){var t=Y6(e),n=Q6(e),r={height:t.innerHeight,width:t.innerWidth};return n.scrollHeight-n.clientHeight>0&&(r.width-=e8()),r}var n8=function(e){for(var t=e.offsetParent;t&&"static"===t.style.position;)t=t.offsetParent;return t||Q6(e)},r8=function(e){var t=e.getBoundingClientRect(),n=t,r=n.left,a=n.top;return t.height||t.width||(t=function(e){var t=e.style,n=t.display,r=t.left,a=t.position;e.style.display="",e.style.left="-10000px",e.style.position="absolute";var i=e.getBoundingClientRect();return e.style.display=n,e.style.left=r,e.style.position=a,i}(e)),{top:a,left:r,height:t.height,width:t.width}},a8=function(e,t){for(var n=[],r=e.parentNode;r&&(n.push(r),r!==t);)r=r.parentNode;return n};function i8(e){var t=Q6(e),n=Y6(e);return{x:n.pageXOffset||t.scrollLeft||0,y:n.pageYOffset||t.scrollTop||0}}var o8=function(e){return e===(e.ownerDocument||{}).body?i8(e):{x:e.scrollLeft,y:e.scrollTop}},s8=function(e,t,n){var r=0;return e+t>n&&(r=n-(e+t)),e<0&&(r=-e),r},u8=function(e){var t=e.offset,n=e.size,r=e.anchorSize,a=e.viewPortSize,i=e.anchorAlignPoint,o=e.elementAlignPoint,s=0,u=2*e.margin;if(o!==i&&"center"!==o&&"middle"!==o&&"center"!==i&&"middle"!==i){var l="top"===i||"left"===i;t<0&&l?t+(s=n+r+u)+n>a&&(s=0):t>=0&&!l&&(t+n>a&&(s+=-(r+n+u)),t+s<0&&(s=0))}return s},l8=function(e){for(var t=[],n=e.parentNode.firstElementChild;n;)n!==e&&t.push(n),n=n.nextElementSibling;return t},c8=["container"];function h8(e,t){}var f8=["*"],d8=function(e,t){return e||{height:0,left:t.left,top:t.top,width:0}},p8=function(){return"undefined"!=typeof window},m8=/auto|scroll/,v8=function(e){return function(e){return"".concat(e.style.overflow).concat(e.style.overflowX).concat(e.style.overflowY)}(e)||function(e){var t=window.getComputedStyle(e);return"".concat(t.overflow).concat(t.overflowX).concat(t.overflowY)}(e)};var y8,g8,_8,b8,x8,w8,k8,C8,S8,I8,D8,A8,T8,E8,R8,O8,M8,N8,P8,F8,L8=(y8=function(){if(!B6()&&null!==document.body)return!1;var e=document.createElement("div");e.style.transform="matrix(10, 0, 0, 10, 0, 0)",e.innerHTML='<div style="position: fixed; top: 10px;">child</div>',document.body.appendChild(e);var t=10!==e.children[0].getBoundingClientRect().top;return document.body.removeChild(e),t},_8=!1,function(){return _8||(g8=y8.apply(void 0,arguments),_8=!0),g8}),z8=function(e,t){return e&&1!==t?{height:e.height/t,left:e.left/t,top:e.top/t,width:e.width/t}:e},B8=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],W8=((b8=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addOffset",value:function(e,t){return{left:e.left+t.left,top:e.top+t.top}}},{key:"addScroll",value:function(e,t){return function(e,t){return{top:e.top+t.y,left:e.left+t.x,height:e.height,width:e.width}}(e,t)}},{key:"align",value:function(e){return n=(t=e).anchorRect,r=t.anchorAlign,a=t.elementRect,i=t.elementAlign,o=t.margin,s=void 0===o?{}:o,u=r.horizontal,l=r.vertical,c=i.horizontal,h=i.vertical,f=s.horizontal||0,d=s.vertical||0,p=n.top,m=n.left,"bottom"===l&&(p+=n.height),"center"!==l&&"middle"!==l||(p+=Math.round(n.height/2)),"bottom"===h&&(p-=a.height,d*=-1),"center"!==h&&"middle"!==h||(p-=Math.round(a.height/2),d*=-1),"right"===u&&(m+=n.width),"center"!==u&&"middle"!==u||(m+=Math.round(n.width/2)),"right"===c&&(m-=a.width,f*=-1),"center"!==c&&"middle"!==c||(m-=Math.round(a.width/2),f*=-1),{top:p+d,left:m+f};var t,n,r,a,i,o,s,u,l,c,h,f,d,p,m}},{key:"boundingOffset",value:function(e){return function(e){if(!e.getBoundingClientRect){var t=t8(e);return{bottom:t.height,left:0,right:t.width,top:0}}var n=e.getBoundingClientRect();return{bottom:n.bottom,left:n.left,right:n.right,top:n.top}}(this.nativeElement(e))}},{key:"getFontStyles",value:function(e){var t=this.getWindow();if(!t||!e)return[];var n=t.getComputedStyle(this.nativeElement(e));return B8.map((function(e){return{key:e,value:n[e]}}))}},{key:"getWindow",value:function(){return p8()?window:null}},{key:"hasOffsetParent",value:function(e){return!!e&&!!this.nativeElement(e).offsetParent}},{key:"offset",value:function(e){return e?r8(this.nativeElement(e)):null}},{key:"offsetAtPoint",value:function(e,t){if(!e)return null;var n=this.nativeElement(e),r=n.style,a=r.left,i=r.top,o=r.transition;n.style.transition="none",n.style.left="".concat(t.left,"px"),n.style.top="".concat(t.top,"px");var s=r8(n);return n.style.left=a,n.style.top=i,n.style.transition=o,s}},{key:"nativeElement",value:function(e){return e?e.nativeElement||e:null}},{key:"position",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e&&t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t?n8(t):null,a=function(e,t){var n=Y6(e),r=n.getComputedStyle(e),a=r8(e),i=t||n8(e),o=e.ownerDocument,s={top:0,left:0};if("fixed"!==r.position&&i!==o.body&&i!==o.documentElement){var u=n.getComputedStyle(i);(s=r8(i)).top+=parseInt(u.borderTopWidth,10),s.left+=parseInt(u.borderLeftWidth,10)}return{top:a.top-s.top,left:a.left-s.left,height:a.height,width:a.width}}(e,r),i=a.top,o=a.left,s=a.height,u=a.width,l=function(e,t){return e?o8(e):function(e){var t=n8(e);return t?o8(t):{x:0,y:0}}(t)}(r,e),c=l.x,h=l.y,f=e.ownerDocument,d=r===f.body||r===f.documentElement?1:n;return{top:i+h*d,left:o+c*d,height:s,width:u}}(this.nativeElement(e),this.nativeElement(t),n):null}},{key:"removeScroll",value:function(e,t){return function(e,t){return{top:e.top-t.y,left:e.left-t.x,height:e.height,width:e.width}}(e,t)}},{key:"restrictToView",value:function(e){return function(e){var t=e.anchorRect,n=e.anchorAlign,r=e.elementRect,a=e.elementAlign,i=e.collisions,o=e.viewPort,s=e.margin,u=void 0===s?{}:s,l=r.top,c=r.left,h=r.height,f=r.width,d=o.height,p=o.width,m=u.horizontal||0,v=u.vertical||0,y=0,g=0,_="flip"===i.horizontal,b="flip"===i.vertical;"fit"===i.vertical&&(g+=s8(l,h,d)),"fit"===i.horizontal&&(y+=s8(c,f,p)),b&&(g+=u8({margin:v,offset:l,size:h,anchorSize:t.height,viewPortSize:d,anchorAlignPoint:n.vertical,elementAlignPoint:a.vertical})),_&&(y+=u8({margin:m,offset:c,size:f,anchorSize:t.width,viewPortSize:p,anchorAlignPoint:n.horizontal,elementAlignPoint:a.horizontal}));var x=_&&0!==y,w=b&&0!==g;return{flipped:x||w,flip:{horizontal:x,vertical:w},offset:{left:y,top:g}}}(e)}},{key:"scrollPosition",value:function(e){return i8(this.nativeElement(e))}},{key:"scrollableParents",value:function(e){return function(e){var t=[];if(!B6()||!p8())return t;for(var n=e.parentElement;n;)(m8.test(v8(n))||n.hasAttribute("data-scrollable"))&&t.push(n),n=n.parentElement;return t.push(window),t}(this.nativeElement(e))}},{key:"stackingElementOffset",value:function(e){var t=this.getRelativeContextElement(e);return t?r8(t):null}},{key:"stackingElementScroll",value:function(e){var t=this.getRelativeContextElement(e);return t?{x:t.scrollLeft,y:t.scrollTop}:{x:0,y:0}}},{key:"getRelativeContextElement",value:function(e){if(!e||!L8())return null;for(var t=this.nativeElement(e).parentElement;t;){if("none"!==window.getComputedStyle(t).transform)return t;t=t.parentElement}return null}},{key:"useRelativePosition",value:function(e){return!!this.getRelativeContextElement(e)}},{key:"windowViewPort",value:function(e){return t8(this.nativeElement(e))}},{key:"zIndex",value:function(e,t){return function(e,t){if(!e||!B6()||!p8())return null;var n=function(e,t){for(var n,r,a=a8(e),i=t;i&&(n=l8(i),!(r=a.reduce((function(e,t){return e.concat(n.filter((function(e){return e===t})))}),[])[0]));)i=i.parentElement;return r}(e,t);if(!n)return null;var r=[e].concat(a8(e,n)).reduce((function(e,t){var n=t.style.zIndex||window.getComputedStyle(t).zIndex,r=parseInt(n,10);return r>e?r:e}),0);return r?r+1:null}(this.nativeElement(e),this.nativeElement(t))}},{key:"zoomLevel",value:function(){return B6()&&p8()&&parseFloat((document.documentElement.clientWidth/window.innerWidth).toFixed(2))||1}},{key:"isZoomed",value:function(){return this.zoomLevel()>1}}]),e}()).\u0275fac=function(e){return new(e||b8)},b8.\u0275prov=Xe({token:b8,factory:b8.\u0275fac}),b8),q8=new kt("Popup Document Scale"),V8=((C8=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_classCallCheck(this,e),this._dom=t,this.scale=n}return _createClass(e,[{key:"alignElement",value:function(e){var t=e.anchor,n=e.element,r=e.anchorAlign,a=e.elementAlign,i=e.margin,o=e.offset,s=e.positionMode,u=this.scale||1,l="fixed"!==s&&this._dom.hasOffsetParent(n)?this.relativeRect(t,n,o,u):this.absoluteRect(t,n,o,u),c=z8(this._dom.offset(n),u);return this._dom.align({anchorAlign:r,anchorRect:l,elementAlign:a,elementRect:c,margin:i})}},{key:"absoluteRect",value:function(e,t,n,r){var a=this.elementScrollPosition(e,t),i=d8(this._dom.offset(e),n),o=2*r,s=this._dom.stackingElementScroll(t);1!==r&&s&&(s.x/=o,s.y/=o);var u=this._dom.stackingElementOffset(t);return 1!==r&&u&&(u.left/=o,u.top/=o),this._dom.removeScroll(this._dom.addScroll(function(e,t){return t?{height:e.height,left:e.left-t.left,top:e.top-t.top,width:e.width}:e}(z8(i,r),u),s),a)}},{key:"elementScrollPosition",value:function(e,t){return e?{x:0,y:0}:this._dom.scrollPosition(t)}},{key:"relativeRect",value:function(e,t,n,r){var a=d8(this._dom.position(e,t,r),n);return z8(a,r)}}]),e}()).\u0275fac=function(e){return new(e||C8)(Ot(W8),Ot(q8,8))},C8.\u0275prov=Xe({token:C8,factory:C8.\u0275fac}),C8),U8=((k8=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_classCallCheck(this,e),this._dom=t,this.scale=n}return _createClass(e,[{key:"positionElement",value:function(e){var t=e.anchor,n=e.currentLocation,r=e.element,a=e.anchorAlign,i=e.elementAlign,o=e.collisions,s=e.margin,u=this._dom,l=this.scale||1,c=u.offsetAtPoint(r,n),h=z8(c,l),f=z8(u.offset(t),l),d=d8(f,n),p=e.viewPort||u.windowViewPort(r);p.width=p.width/l,p.height=p.height/l;var m=u.restrictToView({anchorAlign:a,anchorRect:d,collisions:o,elementAlign:i,elementRect:h,margin:s,viewPort:p}),v=u.addOffset(n,m.offset);return{flip:m.flip,flipped:m.flipped,offset:v}}}]),e}()).\u0275fac=function(e){return new(e||k8)(Ot(W8),Ot(q8,8))},k8.\u0275prov=Xe({token:k8,factory:k8.\u0275fac}),k8),j8=((w8=function(){function e(t,n){_classCallCheck(this,e),this._dom=t,this._zone=n}return _createClass(e,[{key:"subscribe",value:function(e){var t=this;B6()&&this._zone.runOutsideAngular((function(){t.subscription=JF(t._dom.getWindow(),"resize").pipe(oL(1e3/60)).subscribe((function(){return e()}))}))}},{key:"unsubscribe",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"isUnsubscribed",value:function(){return this.subscription&&this.subscription.closed}}]),e}()).\u0275fac=function(e){return new(e||w8)(Ot(W8),Ot(rc))},w8.\u0275prov=Xe({token:w8,factory:w8.\u0275fac}),w8),H8=((x8=function(){function e(t,n){_classCallCheck(this,e),this._dom=t,this._zone=n}return _createClass(e,[{key:"forElement",value:function(e){return this.unsubscribe(),this.element=e,this}},{key:"subscribe",value:function(e){var t=this;if(e&&B6()&&this.element){var n=this._dom.nativeElement(this.element),r=this._dom.scrollableParents(this.element);this._zone.runOutsideAngular((function(){var a=r.map((function(e){return JF(e,"scroll").pipe(oL(1e3/60))}));t.subscription=Ee.apply(void 0,_toConsumableArray(a)).subscribe((function(a){var i=a.target,o=r.filter((function(e){return e===i})).length>0,s=i===document,u=i===window;(o||s||u)&&e(t.isVisible(n,i))}))}))}}},{key:"unsubscribe",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"isVisible",value:function(e,t){var n=this._dom.boundingOffset(e),r=this._dom.boundingOffset(t);return!(1<r.top-n.bottom||1<n.top-r.bottom||1<n.left-r.right||1<r.left-n.right)}}]),e}()).\u0275fac=function(e){return new(e||x8)(Ot(W8),Ot(rc))},x8.\u0275prov=Xe({token:x8,factory:x8.\u0275fac}),x8),G8={expand:function(e){var t,n="up"===e||"down"===e?"scaleY":"scaleX";return t="down"===e?"top":"left"===e?"right":"right"===e?"left":"bottom",{start:{transform:"".concat(n,"(0)"),transformOrigin:t},end:{transform:"".concat(n,"(1)")}}},slide:function(e){var t="left"===e||"right"===e?"translateX":"translateY";return{start:{transform:"".concat(t,"(").concat("right"===e||"down"===e?-100:100,"%)")},end:{transform:"".concat(t,"(0%)")}}},fade:function(){return{start:{opacity:0},end:{opacity:1}}},zoom:function(){return{start:{transform:"scale(0)"},end:{transform:"scale(1)"}}}},J8=((S8=function(){function e(t){_classCallCheck(this,e),this.animationBuilder=t,this.start=new fl,this.end=new fl}return _createClass(e,[{key:"play",value:function(e,t,n){if(!this.flip||this.flip.horizontal!==n.horizontal||this.flip.vertical!==n.vertical){this.flip=n;var r=t.type||"slide",a=G8[r];if(a){var i=a(this.getDirection(n,t));this.playStates(e,i,t)}else if(ra())throw new Error('Unsupported animation type: "'.concat(r,'". The supported types are slide, expand, fade and zoom.'))}}},{key:"ngOnDestroy",value:function(){this.stopPlayer()}},{key:"playStates",value:function(e,t,n){var r=this;this.stopPlayer();var a=n.duration||100,i=this.animationBuilder.build([vz(t.start),pz("".concat(a,"ms ease-in"),vz(t.end))]),o=this.player=i.create(e);o.onDone((function(){r.end.emit(),r.stopPlayer()})),this.start.emit(),o.play()}},{key:"getDirection",value:function(e,t){var n=t.direction||"down";return e.horizontal&&("left"===n?n="right":"right"===n&&(n="left")),e.vertical&&("down"===n?n="up":"up"===n&&(n="down")),n}},{key:"stopPlayer",value:function(){this.player&&(this.player.destroy(),this.player=null)}}]),e}()).\u0275fac=function(e){return new(e||S8)(Ot(fz))},S8.\u0275prov=Xe({token:S8,factory:S8.\u0275fac}),S8),X8={left:-1e4,top:0},K8=((I8=function(){function e(t,n,r,a,i,o,s,u,l){_classCallCheck(this,e),this.container=t,this._alignService=n,this.domService=r,this._positionService=a,this._resizeService=i,this._scrollableService=o,this.animationService=s,this._renderer=u,this._zone=l,this.animate=!0,this.anchorAlign={horizontal:"left",vertical:"bottom"},this.collision={horizontal:"fit",vertical:"flip"},this.popupAlign={horizontal:"left",vertical:"top"},this.copyAnchorStyles=!1,this.positionMode="fixed",this.offset=X8,this.anchorViewportLeave=new fl,this.close=new fl,this.open=new fl,this.positionChange=new fl,this.resolvedPromise=Promise.resolve(null),this.initialCheck=!0,this._renderer.addClass(t.nativeElement,"k-animation-container"),this.updateFixedClass()}return _createClass(e,[{key:"ngOnInit",value:function(){this.reposition=this.reposition.bind(this),this._resizeService.subscribe(this.reposition),this.animationSubscriptions=this.animationService.start.subscribe(this.onAnimationStart.bind(this)),this.animationSubscriptions.add(this.animationService.end.subscribe(this.onAnimationEnd.bind(this))),this._scrollableService.forElement(this.anchor||this.container).subscribe(this.onScroll.bind(this)),this.currentOffset=X8,this.setZIndex(),this.copyFontStyles(),this.updateFixedClass()}},{key:"ngOnChanges",value:function(e){e.copyAnchorStyles&&this.copyFontStyles(),e.positionMode&&this.updateFixedClass()}},{key:"ngAfterViewInit",value:function(){var e=this;this.reposition(),this.animate||this.resolvedPromise.then((function(){e.onAnimationEnd()}))}},{key:"ngAfterViewChecked",value:function(){var e=this;this.initialCheck?this.initialCheck=!1:this._zone.runOutsideAngular((function(){e.unsubscribeReposition(),e.repositionSubscription=Ce(e.resolvedPromise).subscribe(e.reposition)}))}},{key:"ngOnDestroy",value:function(){this.anchorViewportLeave.complete(),this.positionChange.complete(),this.close.emit(),this.close.complete(),this._resizeService.unsubscribe(),this._scrollableService.unsubscribe(),this.animationSubscriptions.unsubscribe(),this.unsubscribeReposition()}},{key:"onResize",value:function(){this.reposition()}},{key:"onAnimationStart",value:function(){this._renderer.removeClass(this.container.nativeElement,"k-animation-container-shown")}},{key:"onAnimationEnd",value:function(){this._renderer.addClass(this.container.nativeElement,"k-animation-container-shown"),this.open.emit(),this.open.complete()}},{key:"setZIndex",value:function(){this.anchor&&this.setContainerStyle("z-index",String(this.domService.zIndex(this.anchor,this.container)))}},{key:"reposition",value:function(){var e=this;if(B6()){var t,n,r,a,i,o,s=this.position(),u=s.flip,l=s.offset;this.currentOffset&&(t=this.currentOffset,n=l,r=t.left,a=t.top,i=n.left,o=n.top,!(Math.abs(r-i)>=1||Math.abs(a-o)>=1))||(this.currentOffset=l,W6(this.positionChange)&&this._zone.run((function(){return e.positionChange.emit({offset:l,flip:u})}))),this.animate&&this.animationService.play(this.contentContainer.nativeElement,this.animate,u),this.resizeSensor.acceptSize()}}},{key:"position",value:function(){var e=this._alignService.alignElement({anchor:this.anchor,anchorAlign:this.anchorAlign,element:this.container,elementAlign:this.popupAlign,margin:this.margin,offset:this.offset,positionMode:this.positionMode});return this._positionService.positionElement({anchor:this.anchor,anchorAlign:this.anchorAlign,collisions:this.collision,currentLocation:e,element:this.container,elementAlign:this.popupAlign,margin:this.margin})}},{key:"onScroll",value:function(e){var t=this,n=W6(this.anchorViewportLeave);e||!n?this.reposition():n&&this._zone.run((function(){t.anchorViewportLeave.emit()}))}},{key:"copyFontStyles",value:function(){var e=this;this.anchor&&this.copyAnchorStyles&&this.domService.getFontStyles(this.anchor).forEach((function(t){return e.setContainerStyle(t.key,t.value)}))}},{key:"updateFixedClass",value:function(){this._renderer["fixed"===this.positionMode?"addClass":"removeClass"](this.container.nativeElement,"k-animation-container-fixed")}},{key:"setContainerStyle",value:function(e,t){this._renderer.setStyle(this.container.nativeElement,e,t)}},{key:"unsubscribeReposition",value:function(){this.repositionSubscription&&this.repositionSubscription.unsubscribe()}},{key:"currentOffset",get:function(){return this._currentOffset},set:function(e){this.setContainerStyle("left","".concat(e.left,"px")),this.setContainerStyle("top","".concat(e.top,"px")),this._currentOffset=e}}]),e}()).\u0275fac=function(e){return new(e||I8)(as(bu),as(V8),as(W8),as(U8),as(j8),as(H8),as(J8),as(Cu),as(rc))},I8.\u0275cmp=Yt({type:I8,selectors:[["kendo-popup"]],viewQuery:function(e,t){var n;1&e&&(Sl(c8,!0),Sl(X6,!0)),2&e&&(kl(n=El())&&(t.contentContainer=n.first),kl(n=El())&&(t.resizeSensor=n.first))},inputs:{animate:"animate",anchorAlign:"anchorAlign",collision:"collision",popupAlign:"popupAlign",copyAnchorStyles:"copyAnchorStyles",positionMode:"positionMode",offset:"offset",anchor:"anchor",popupClass:"popupClass",margin:"margin"},outputs:{anchorViewportLeave:"anchorViewportLeave",close:"close",open:"open",positionChange:"positionChange"},exportAs:["kendo-popup"],features:[vu([V8,J8,W8,U8,j8,H8]),ou],ngContentSelectors:f8,decls:5,vars:4,consts:[[1,"k-popup",3,"ngClass"],["container",""],[3,"ngTemplateOutlet","ngIf"],[3,"rateLimit","resize"]],template:function(e,t){1&e&&(Cs(),ls(0,"div",0,1),Ss(2),ns(3,h8,0,0,"ng-template",2),ls(4,"kendo-resize-sensor",3),ys("resize",(function(){return t.onResize()})),cs(),cs()),2&e&&(ss("ngClass",t.popupClass),Ka(3),ss("ngTemplateOutlet",t.content)("ngIf",t.content),Ka(1),ss("rateLimit",100))},directives:[dh,Fh,yh,X6],encapsulation:2}),I8),Z8=new kt("Popup Container"),Y8=((F8=function(){function e(t,n,r,a){_classCallCheck(this,e),this.applicationRef=t,this.componentFactoryResolver=n,this.injector=r,this.container=a}return _createClass(e,[{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.contentFrom(e.content),n=t.component,r=t.nodes,a=this.appendPopup(r,e.appendTo),i=a.instance;this.projectComponentInputs(a,e),a.changeDetectorRef.detectChanges(),n&&n.changeDetectorRef.detectChanges();var o=this.getComponentRootNode(a);return{close:function(){var e;n&&n.destroy(),a.destroy(),(e=o)&&e.parentNode&&e.parentNode.removeChild(e)},content:n,popup:a,popupAnchorViewportLeave:i.anchorViewportLeave,popupClose:i.close,popupElement:o,popupOpen:i.open,popupPositionChange:i.positionChange}}},{key:"appendPopup",value:function(e,t){var n=this.createComponent(K8,e,t);return t||this.rootViewContainerNode.appendChild(this.getComponentRootNode(n)),n}},{key:"getComponentRootNode",value:function(e){return e.location.nativeElement}},{key:"getComponentFactory",value:function(e){return this.componentFactoryResolver.resolveComponentFactory(e)}},{key:"createComponent",value:function(e,t,n){var r=this.getComponentFactory(e);if(n)return n.createComponent(r,void 0,this.injector,t);var a=r.create(this.injector,t);return this.applicationRef.attachView(a.hostView),a}},{key:"projectComponentInputs",value:function(e,t){return Object.getOwnPropertyNames(t).filter((function(e){return"content"!==e||t.content instanceof ju})).map((function(n){e.instance[n]=t[n]})),e}},{key:"contentFrom",value:function(e){if(!e||e instanceof ju)return{component:null,nodes:[[]]};var t=this.createComponent(e);return{component:t,nodes:[t?[t.location.nativeElement]:[]]}}},{key:"rootViewContainer",get:function(){var e=this.applicationRef.components||[];if(e[0])return e[0];throw new Error("\n            View Container not found! Inject the POPUP_CONTAINER or define a specific ViewContainerRef via the appendTo option.\n            See http://www.telerik.com/kendo-angular-ui/components/popup/api/POPUP_CONTAINER/ for more details.\n        ")}},{key:"rootViewContainerNode",get:function(){return this.container?this.container.nativeElement:this.getComponentRootNode(this.rootViewContainer)}}]),e}()).\u0275fac=function(e){return new(e||F8)(Ot(kc),Ot(_u),Ot(Wo),Ot(Z8,8))},F8.\u0275prov=Xe({token:F8,factory:F8.\u0275fac}),F8),Q8=((P8=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:P8}),P8.\u0275inj=Ke({factory:function(e){return new(e||P8)},providers:[Y8],imports:[[Lh,K6]]}),P8),$8=((N8=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:N8}),N8.\u0275inj=Ke({factory:function(e){return new(e||N8)}}),N8),e7=((M8=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:M8}),M8.\u0275inj=Ke({factory:function(e){return new(e||M8)},imports:[[Lh,$8]]}),M8),t7=((O8=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:O8}),O8.\u0275inj=Ke({factory:function(e){return new(e||O8)},imports:[[Lh]]}),O8),n7=((R8=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:R8}),R8.\u0275inj=Ke({factory:function(e){return new(e||R8)},imports:[[Lh,Q8,$8,t7],t7]}),R8),r7=((E8=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:E8}),E8.\u0275inj=Ke({factory:function(e){return new(e||E8)},imports:[[Lh,Q8,t7,$8],t7]}),E8),a7=((T8=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:T8}),T8.\u0275inj=Ke({factory:function(e){return new(e||T8)},imports:[[Lh]]}),T8),i7=((A8=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:A8}),A8.\u0275inj=Ke({factory:function(e){return new(e||A8)},imports:[e7,$8,n7,r7,a7]}),A8),o7=((D8=function e(){_classCallCheck(this,e)}).\u0275mod=tn({type:D8,bootstrap:[a5]}),D8.\u0275inj=Ke({factory:function(e){return new(e||D8)},providers:[],imports:[[xf,t5,nH,hH,eJ,o5,gV,s5,l5,c5,h5,gV,f5,d5,o5,v5,b5,f6,l6,d6,m6,v6,eJ,hH,y6,b6,_q,S6,I6,R9,s5,Eq,FG,fV,vX,A6,T6,O6,N6,oX,P6,w6,z6,FW,v9,IF,lj,i7]]}),D8);(function(){if(na)throw new Error("Cannot enable prod mode after platform setup.");ta=!1})(),_f().bootstrapModule(o7).catch((function(e){return console.error(e)}))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);